(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{Jn5M:function(t,e,n){"use strict";n.r(e),n.d(e,"VideosModule",(function(){return se}));var i=n("ofXK"),o=n("tyNb"),s=n("9xOu"),c=n("fXoL"),a=n("FFj9"),r=n("wDcp"),l=n("HHsJ"),d=n("Rnal"),m=n("ZP/m"),u=n("NFeN"),b=n("86ia"),g=n("Xa2L"),p=n("mrSG"),h=n("JOq8"),v=n("wgiU"),f=n("wd/R"),C=n("fZdh"),P=n("yEwS");function _(t,e){1&t&&(c.Xb(0,"span",19),c.Rc(1,"Live now"),c.Wb())}function O(t,e){1&t&&(c.Xb(0,"div",20),c.Xb(1,"mat-icon"),c.Rc(2,"turned_in"),c.Wb(),c.Xb(3,"span"),c.Rc(4,"Saved"),c.Wb(),c.Wb())}function M(t,e){if(1&t){const t=c.Yb();c.Xb(0,"li",21),c.jc("click",(function(){c.Ic(t);const n=e.$implicit;return c.nc(2).getVideosByTag(n.name)})),c.Xb(1,"span"),c.Rc(2),c.Wb(),c.Wb()}if(2&t){const t=e.$implicit;c.Cb(2),c.Sc(t.name)}}function y(t,e){1&t&&(c.Xb(0,"div",22),c.Xb(1,"span",23),c.Rc(2,"New"),c.Wb(),c.Wb())}function k(t,e){if(1&t){const t=c.Yb();c.Xb(0,"div",2),c.Xb(1,"div",3),c.Xb(2,"img",4),c.jc("click",(function(){c.Ic(t);const n=e.$implicit;return c.nc().openVideoPage(n,n.user.username)})),c.oc(3,"getImgPath"),c.Wb(),c.Pc(4,_,2,0,"span",5),c.Xb(5,"span",6),c.Rc(6),c.Wb(),c.Wb(),c.Xb(7,"div",7),c.Xb(8,"h4",8),c.Rc(9),c.Wb(),c.Xb(10,"div",9),c.Xb(11,"span",10),c.jc("click",(function(){c.Ic(t);const n=e.$implicit;return c.nc().openChannelPage(n.user.channel,n.user.username)})),c.Rc(12),c.Wb(),c.Xb(13,"span",11),c.Rc(14,"\xb7"),c.Wb(),c.Xb(15,"span",12),c.Rc(16),c.Wb(),c.Xb(17,"span",11),c.Rc(18,"\xb7"),c.Wb(),c.Xb(19,"span",13),c.Rc(20),c.oc(21,"dateFromNow"),c.Wb(),c.Wb(),c.Xb(22,"p",14),c.Rc(23),c.Wb(),c.Pc(24,O,5,0,"div",15),c.Xb(25,"div",16),c.Xb(26,"ul"),c.Pc(27,M,3,1,"li",17),c.Wb(),c.Wb(),c.Pc(28,y,3,0,"div",18),c.Wb(),c.Wb()}if(2&t){const t=e.$implicit,n=c.nc();c.Cb(2),c.uc("src",c.pc(3,11,t.thumbnail),c.Kc),c.Cb(2),c.uc("ngIf","live"===t.status),c.Cb(2),c.Sc(t.duration),c.Cb(3),c.Sc(t.name),c.Cb(3),c.Tc(" ",t.user.channel.name," "),c.Cb(4),c.Tc(" ","live"===t.status?"17k watching":t.views+" view"+(1===t.views?"":"s")," "),c.Cb(4),c.Sc(c.pc(21,13,t.created_at)),c.Cb(3),c.Tc(" ",t.description," "),c.Cb(1),c.uc("ngIf",n.checkIfSavedByCurrentUser(t)),c.Cb(3),c.uc("ngForOf",null==t?null:t.tags),c.Cb(1),c.uc("ngIf",n.checkIfNewVideo(t))}}let w=(()=>{class t{constructor(t){this.router=t,this.trackByElement=v.a}ngOnInit(){}openVideoPage(t,e){return Object(p.a)(this,void 0,void 0,(function*(){const n=Object(h.a)(t,e);yield this.router.navigate([n.route],{queryParams:n.params})}))}openChannelPage(t,e){return Object(p.a)(this,void 0,void 0,(function*(){yield this.router.navigate(["channels/show"],{queryParams:{username:e}})}))}checkIfSavedByCurrentUser(t){return t.users_vids.find(t=>{var e;return t.username===(null===(e=this.authUser)||void 0===e?void 0:e.username)&&t.users_videos.saved})}checkIfNewVideo(t){const e=f.duration(f().diff(t.created_at));return Math.floor(e.asDays())<7}getVideosByTag(t){return Object(p.a)(this,void 0,void 0,(function*(){yield this.router.navigate(["videos"],{queryParams:{tag:t}})}))}}return t.\u0275fac=function(e){return new(e||t)(c.Rb(o.d))},t.\u0275cmp=c.Lb({type:t,selectors:[["app-show-regular-list"]],inputs:{items:"items",authUser:"authUser"},decls:2,vars:2,consts:[["id","regular-video-list-container"],["class","video-container flex-wrap",4,"ngFor","ngForOf","ngForTrackBy"],[1,"video-container","flex-wrap"],[1,"thumbnail"],[3,"src","click"],["class","live-now",4,"ngIf"],[1,"duration"],[1,"details"],[1,"title"],[1,"shortened-details"],[1,"channel-name",3,"click"],[1,"dot"],[1,"watchers-count"],[1,"upload-time"],[1,"shortened-description"],["class","saved-video",4,"ngIf"],[1,"tags"],[3,"click",4,"ngFor","ngForOf"],["class","is-new-video",4,"ngIf"],[1,"live-now"],[1,"saved-video"],[3,"click"],[1,"is-new-video"],[1,"new"]],template:function(t,e){1&t&&(c.Xb(0,"div",0),c.Pc(1,k,29,15,"div",1),c.Wb()),2&t&&(c.Cb(1),c.uc("ngForOf",e.items.videos)("ngForTrackBy",e.trackByElement))},directives:[i.l,i.m,u.a],pipes:[C.a,P.a],styles:["#regular-video-list-container[_ngcontent-%COMP%]   .shortened-description[_ngcontent-%COMP%]{-webkit-line-clamp:4}#regular-video-list-container[_ngcontent-%COMP%]   .is-new-video[_ngcontent-%COMP%]   .new[_ngcontent-%COMP%]{background-color:#18b587;color:#fff;padding:2px}@media (max-width:992px){#regular-video-list-container[_ngcontent-%COMP%]   .is-new-video[_ngcontent-%COMP%]{margin-bottom:10px}}#regular-video-list-container[_ngcontent-%COMP%]   .channel-name[_ngcontent-%COMP%]{cursor:pointer}.playlist-container[_ngcontent-%COMP%]{display:flex;margin-bottom:30px}.playlist-container[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]{position:relative}.playlist-container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{padding-left:32px;max-width:310px}@media screen and (max-width:1022px){.playlist-container[_ngcontent-%COMP%]{flex-direction:column}.playlist-container[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]{max-width:432px;width:100%}.playlist-container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{padding-left:0;margin-top:8px}}"]}),t})();function W(t,e){if(1&t){const t=c.Yb();c.Vb(0),c.Xb(1,"div",3),c.jc("click",(function(){c.Ic(t);const e=c.nc().$implicit;return c.nc().openPlaylistPage(e,e.videos[0].id)})),c.Xb(2,"div",4),c.Xb(3,"div",5),c.Xb(4,"mat-icon"),c.Rc(5,"playlist_add_check"),c.Wb(),c.Xb(6,"p",6),c.Rc(7),c.Wb(),c.Xb(8,"p",7),c.Rc(9),c.Wb(),c.Wb(),c.Sb(10,"img",8),c.oc(11,"getImgPath"),c.Wb(),c.Sb(12,"div",9),c.Wb(),c.Sb(13,"div",10),c.Ub()}if(2&t){const t=c.nc().$implicit;c.Cb(7),c.Sc(t.name),c.Cb(2),c.Sc(t.videos.length+(1===t.videos.length?" video":" videos")),c.Cb(1),c.uc("src",c.pc(11,3,t.thumbnail),c.Kc)}}function X(t,e){if(1&t&&(c.Xb(0,"div",1),c.Pc(1,W,14,5,"ng-container",2),c.Wb()),2&t){const t=e.$implicit;c.Cb(1),c.uc("ngIf",t.videos.length>0)}}let x=(()=>{class t{constructor(t){this.router=t}ngOnInit(){}openPlaylistPage(t,e){return Object(p.a)(this,void 0,void 0,(function*(){const n={id:e,playlist_id:t.id};yield this.router.navigate(["videos/play"],{queryParams:n})}))}}return t.\u0275fac=function(e){return new(e||t)(c.Rb(o.d))},t.\u0275cmp=c.Lb({type:t,selectors:[["app-show-playlists-list"]],inputs:{items:"items",authUser:"authUser"},decls:1,vars:1,consts:[["class","playlist-container",4,"ngFor","ngForOf"],[1,"playlist-container"],[4,"ngIf"],[1,"thumbnail-container",3,"click"],[1,"thumbnail"],[1,"short-details"],[1,"name"],[1,"video-count"],[3,"src"],[1,"fake-bg","thumbnail"],[1,"details"]],template:function(t,e){1&t&&c.Pc(0,X,2,1,"div",0),2&t&&c.uc("ngForOf",e.items.playlists)},directives:[i.l,i.m,u.a],pipes:[C.a],styles:[".playlist-container[_ngcontent-%COMP%]{width:432px;display:flex;margin-bottom:30px}.playlist-container[_ngcontent-%COMP%]   .thumbnail-container[_ngcontent-%COMP%]{position:relative;cursor:pointer}.playlist-container[_ngcontent-%COMP%]   .thumbnail-container[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]{position:relative}.playlist-container[_ngcontent-%COMP%]   .thumbnail-container[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]   .short-details[_ngcontent-%COMP%]{position:absolute;top:10px;left:10px;color:#fff}.playlist-container[_ngcontent-%COMP%]   .thumbnail-container[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]   .short-details[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-weight:700}.playlist-container[_ngcontent-%COMP%]   .thumbnail-container[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:400px;height:249px;-o-object-fit:cover;object-fit:cover;cursor:pointer}@media screen and (max-width:991px){.playlist-container[_ngcontent-%COMP%]   .thumbnail-container[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:432px!important;width:100%!important}}.playlist-container[_ngcontent-%COMP%]   .thumbnail-container[_ngcontent-%COMP%]   .fake-bg[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;top:0;background:rgba(1,1,1,.2)}"]}),t})();function R(t,e){if(1&t){const t=c.Yb();c.Xb(0,"button",11),c.jc("click",(function(){c.Ic(t);const e=c.nc().$implicit;return c.nc().subscribeToChannel(e)})),c.Rc(1),c.Wb()}if(2&t){const t=c.nc().$implicit,e=c.nc();c.Hb("subscribed",e.checkIfSubscribed(t)),c.Cb(1),c.Tc("",e.checkIfSubscribed(t)?"Subscribed":"Subscribe"," ")}}function I(t,e){if(1&t&&(c.Xb(0,"li"),c.Xb(1,"span"),c.Rc(2),c.Wb(),c.Wb()),2&t){const t=e.$implicit;c.Cb(2),c.Sc(t.name)}}function S(t,e){if(1&t){const t=c.Yb();c.Xb(0,"div",12),c.Xb(1,"div",3),c.Xb(2,"img",13),c.jc("click",(function(){c.Ic(t);const n=e.$implicit,i=c.nc().$implicit;return c.nc().openVideoPage(n,i.user.username)})),c.oc(3,"getImgPath"),c.Wb(),c.Xb(4,"span",14),c.Rc(5),c.Wb(),c.Wb(),c.Xb(6,"div",15),c.Xb(7,"h4",16),c.Rc(8),c.Wb(),c.Xb(9,"div",7),c.Xb(10,"span",17),c.Rc(11),c.Wb(),c.Xb(12,"span",18),c.Rc(13,"\xb7"),c.Wb(),c.Xb(14,"span",19),c.Rc(15),c.Wb(),c.Xb(16,"span",18),c.Rc(17,"\xb7"),c.Wb(),c.Xb(18,"span",20),c.Rc(19),c.oc(20,"dateFromNow"),c.Wb(),c.Wb(),c.Xb(21,"p",21),c.Rc(22),c.Wb(),c.Xb(23,"div",22),c.Xb(24,"ul"),c.Pc(25,I,3,1,"li",1),c.Wb(),c.Wb(),c.Wb(),c.Wb()}if(2&t){const t=e.$implicit,n=c.nc().$implicit;c.Cb(2),c.uc("src",c.pc(3,8,t.thumbnail),c.Kc),c.Cb(3),c.Sc(t.duration),c.Cb(3),c.Sc(t.name),c.Cb(3),c.Sc(n.name),c.Cb(4),c.Tc(" ","live"===t.status?"17k watching":t.views+" view"+(1===t.views?"":"s")," "),c.Cb(4),c.Sc(c.pc(20,10,t.created_at)),c.Cb(3),c.Tc(" ",t.description," "),c.Cb(3),c.uc("ngForOf",null==t?null:t.tags)}}function V(t,e){if(1&t){const t=c.Yb();c.Vb(0),c.Xb(1,"div",2),c.Xb(2,"div",3),c.Xb(3,"img",4),c.jc("click",(function(){c.Ic(t);const n=e.$implicit;return c.nc().openChannelPage(n,null==n.user?null:n.user.username)})),c.oc(4,"getImgPath"),c.Wb(),c.Wb(),c.Xb(5,"div",5),c.Xb(6,"p",6),c.jc("click",(function(){c.Ic(t);const n=e.$implicit;return c.nc().openChannelPage(n,null==n||null==n.user?null:n.user.username)})),c.Rc(7),c.Wb(),c.Xb(8,"div",7),c.Xb(9,"p",8),c.Rc(10),c.Wb(),c.Wb(),c.Xb(11,"p"),c.Rc(12),c.Wb(),c.Pc(13,R,2,3,"button",9),c.Wb(),c.Wb(),c.Pc(14,S,26,12,"div",10),c.Ub()}if(2&t){const t=e.$implicit,n=c.nc();c.Cb(3),c.uc("src",c.qc(4,6,t.avatar,"avatars"),c.Kc),c.Cb(4),c.Sc(t.name),c.Cb(3),c.Sc(t.videos.length+(1===t.videos.length?" video":" videos")),c.Cb(2),c.Sc(n.getDesc(t.description)),c.Cb(1),c.uc("ngIf",(null==t||null==t.user?null:t.user.username)!==(null==n.authUser?null:n.authUser.username)),c.Cb(1),c.uc("ngForOf",t.videos)}}let D=(()=>{class t{constructor(t,e,n){this.router=t,this.subject=e,this.channelsService=n}ngOnInit(){}openChannelPage(t,e){return Object(p.a)(this,void 0,void 0,(function*(){yield this.router.navigate(["channels/show"],{queryParams:{username:e}})}))}openVideoPage(t,e){return Object(p.a)(this,void 0,void 0,(function*(){const n=Object(h.a)(t,e);yield this.router.navigate([n.route],{queryParams:n.params})}))}subscribeToChannel(t){this.channelsService.subscribeToChannel({user_id:this.authUser.id,channel_id:t.id}).subscribe(e=>{this.channelsService.getUserChannelSubscriptions({user_id:this.authUser.id}).subscribe(e=>{this.subject.setUserSubscriptions(e),this.checkIfSubscribed(t)?t.subscribers=t.subscribers.filter(t=>{var e;return t.id!==(null===(e=this.authUser)||void 0===e?void 0:e.id)}):t.subscribers.push(this.authUser)})})}checkIfSubscribed(t){return t.subscribers.find(t=>{var e;return t.id===(null===(e=this.authUser)||void 0===e?void 0:e.id)})}getDesc(t){return null==t?void 0:t.replace(/<br\s*[\/]?>/gi,"\n")}}return t.\u0275fac=function(e){return new(e||t)(c.Rb(o.d),c.Rb(r.a),c.Rb(l.a))},t.\u0275cmp=c.Lb({type:t,selectors:[["app-show-search-results"]],inputs:{channelsVideos:"channelsVideos",authUser:"authUser"},decls:2,vars:1,consts:[["id","search-results-container"],[4,"ngFor","ngForOf"],[1,"channel-item"],[1,"thumbnail"],[1,"avatar",3,"src","click"],[1,"info"],[1,"name",3,"click"],[1,"shortened-details"],[1,"video-count"],["class","btn subscribe-to-channel-btn",3,"subscribed","click",4,"ngIf"],["class","video-container",4,"ngFor","ngForOf"],[1,"btn","subscribe-to-channel-btn",3,"click"],[1,"video-container"],[3,"src","click"],[1,"duration"],[1,"details"],[1,"title"],[1,"channel-name"],[1,"dot"],[1,"watchers-count"],[1,"upload-time"],[1,"shortened-description"],[1,"tags"]],template:function(t,e){1&t&&(c.Xb(0,"div",0),c.Pc(1,V,15,9,"ng-container",1),c.Wb()),2&t&&(c.Cb(1),c.uc("ngForOf",e.channelsVideos))},directives:[i.l,i.m],pipes:[C.a,P.a],styles:["#my-subscriptions[_ngcontent-%COMP%]{text-align:center;color:#18b587}.channel-item[_ngcontent-%COMP%]{display:flex;margin-bottom:32px;flex-wrap:wrap}.channel-item[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:240px!important;height:240px}.channel-item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{margin-top:4px;min-width:250px;max-width:350px}.channel-item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{color:#545454;font-size:24px;font-family:Muli-Bold;cursor:pointer}.channel-item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{margin-left:26px;margin-top:-3px}.channel-item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;font-family:Muli-Light}.channel-item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .videos-count[_ngcontent-%COMP%], .channel-item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .watchers-count[_ngcontent-%COMP%]{font-size:14px;color:#818181}#search-results-container[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]{width:100%;max-width:432px;height:243px;display:flex;align-items:center;justify-content:center}#search-results-container[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;max-width:432px}#search-results-container[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{padding-left:32px;max-width:310px}@media screen and (max-width:1022px){#search-results-container[_ngcontent-%COMP%]{flex-direction:column}#search-results-container[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]{max-width:432px;width:100%}#search-results-container[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{padding-left:0;margin-top:8px}}"]}),t})();function F(t,e){if(1&t){const t=c.Yb();c.Xb(0,"button",6),c.jc("click",(function(){c.Ic(t);const e=c.nc();return e.showFilters=!e.showFilters})),c.Xb(1,"mat-icon"),c.Rc(2,"tune"),c.Wb(),c.Xb(3,"span"),c.Rc(4,"Filters"),c.Wb(),c.Wb()}}function U(t,e){if(1&t){const t=c.Yb();c.Xb(0,"app-video-filters",7),c.jc("filter",(function(e){return c.Ic(t),c.nc().getFilteredList(e)})),c.Wb()}}function j(t,e){1&t&&c.Sb(0,"mat-spinner",8),2&t&&c.uc("diameter",20)}function T(t,e){if(1&t&&(c.Vb(0),c.Sb(1,"app-show-regular-list",9),c.Sb(2,"app-show-playlists-list",9),c.Ub()),2&t){const t=c.nc();c.Cb(1),c.uc("items",t.items)("authUser",t.authUser),c.Cb(1),c.uc("items",t.items)("authUser",t.authUser)}}function $(t,e){if(1&t&&(c.Vb(0),c.Sb(1,"app-show-search-results",10),c.Ub()),2&t){const t=c.nc();c.Cb(1),c.uc("channelsVideos",t.channelsVideos)("authUser",t.authUser)}}function L(t,e){1&t&&(c.Xb(0,"div"),c.Xb(1,"span",11),c.Rc(2,"No results found"),c.Wb(),c.Wb())}let A=(()=>{class t{constructor(t,e,n,i,o,c,a){this.videoService=t,this.router=e,this.subject=n,this.channelsService=i,this.route=o,this.getAuthUser=c,this.getExactParams=a,this.items={videos:[],playlists:[]},this.channelsVideos=[],this.apiUrl=s.b,this.showTrending=!1,this.showFilters=!1,this.filters={},this.filterStatus="idle",this.subscriptions=[],this.loadingVideos=!1,this.authUser=this.getAuthUser.transform(),this.subscriptions.push(this.route.queryParams.subscribe(t=>{var e,n;this.search=null===(e=this.route.snapshot.queryParams)||void 0===e?void 0:e.search,this.showTrending=this.router.url.includes("trending"),this.selectedTag=null===(n=this.route.snapshot.queryParams)||void 0===n?void 0:n.tag,this.search?this.searchChannelsVideos({search:this.search,filters:this.filters}):this.getVideosList({search:this.search,filters:this.filters,tag:this.selectedTag})}))}ngOnInit(){}getFilteredList(t={}){this.filters=t,this.filterStatus="applied",this.search?this.searchChannelsVideos({search:this.search,filters:this.filters}):this.getVideosList({filters:this.filters})}getVideosList(t){t=this.getExactParams.transform(t),this.videoService.get(Object.assign({withPlaylists:this.showTrending?0:1,trending:this.showTrending?1:0},t)).subscribe(t=>{this.items=t})}searchChannelsVideos(t){var e;t=this.getExactParams.transform(t),this.loadingVideos=!0,this.channelsService.searchWithVideos(Object.assign({user_id:null===(e=this.authUser)||void 0===e?void 0:e.id},t)).subscribe(t=>{this.loadingVideos=!1,this.channelsVideos=t})}isFiltersShown(){var t;return(null===(t=this.items.videos)||void 0===t?void 0:t.length)>0||this.search&&this.channelsVideos.find(t=>t.videos.length>0)||"applied"===this.filterStatus&&!this.loadingVideos}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(c.Rb(a.a),c.Rb(o.d),c.Rb(r.a),c.Rb(l.a),c.Rb(o.a),c.Rb(d.a),c.Rb(m.a))},t.\u0275cmp=c.Lb({type:t,selectors:[["app-show-videos"]],decls:8,vars:6,consts:[[1,"all-videos"],["class","filter-toggle-btn",3,"click",4,"ngIf"],[3,"filter",4,"ngIf"],["id","videos-list"],[3,"diameter",4,"ngIf"],[4,"ngIf"],[1,"filter-toggle-btn",3,"click"],[3,"filter"],[3,"diameter"],[3,"items","authUser"],[3,"channelsVideos","authUser"],[1,"error"]],template:function(t,e){1&t&&(c.Xb(0,"div",0),c.Pc(1,F,5,0,"button",1),c.Pc(2,U,1,0,"app-video-filters",2),c.Xb(3,"div",3),c.Pc(4,j,1,1,"mat-spinner",4),c.Pc(5,T,3,4,"ng-container",5),c.Pc(6,$,2,2,"ng-container",5),c.Wb(),c.Pc(7,L,3,0,"div",5),c.Wb()),2&t&&(c.Cb(1),c.uc("ngIf",e.isFiltersShown()),c.Cb(1),c.uc("ngIf",e.showFilters),c.Cb(2),c.uc("ngIf",e.loadingVideos),c.Cb(1),c.uc("ngIf",!e.search&&!e.loadingVideos),c.Cb(1),c.uc("ngIf",e.search&&!e.loadingVideos),c.Cb(1),c.uc("ngIf",e.search&&0===(null==e.channelsVideos?null:e.channelsVideos.length)))},directives:[i.m,u.a,b.a,g.b,w,x,D],styles:[".filter-toggle-btn[_ngcontent-%COMP%]{text-transform:uppercase;background-color:unset;display:flex;align-items:center;font-family:Muli-Bold;padding:10px}.filter-toggle-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:10px}"]}),t})();var q=n("GJOa"),Y=n("7dP1"),B=n("5eHb"),E=n("lwos"),N=n("Y9zH");let H=(()=>{class t{constructor(){}ngOnInit(){const t=document.getElementsByTagName("video")[0];this.videoUrl=s.b+"uploads/videos/"+this.videoData.filename,t.setAttribute("src",this.videoUrl)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Lb({type:t,selectors:[["app-video-regular-player"]],inputs:{videoData:"videoData"},decls:2,vars:0,consts:[[1,"video-container"],["controls","","autoplay",""]],template:function(t,e){1&t&&(c.Xb(0,"div",0),c.Sb(1,"video",1),c.Wb())},styles:[".video-container[_ngcontent-%COMP%]{margin:50px auto;max-width:500px;width:100%;height:480px}"]}),t})();var z=n("dJ++"),K=n("0IaG"),J=n("3Pt+"),G=n("MFHO"),Q=n("kmnG"),Z=n("qFsG"),tt=n("ihCf");const et=["cEditable"];let nt=(()=>{class t{constructor(t,e,n,i,o,s){this.fb=t,this.videoService=e,this.getAuthUser=n,this.subject=i,this.cdr=o,this.fixLineBreaks=s,this.inputFocused=!1,this.isSubmitted=!1,this.editComment=!1,this.selectedComment=null,this.reply=!1,this.isReplyComment=!1,this.parentComment=null,this.commentAdded=new c.o,this.commentUpdated=new c.o,this.editingCancelled=new c.o}ngOnInit(){this.authUser=this.getAuthUser.transform(),this.placeholderText=this.getPlaceholderText(),this.videoCommentsForm=this.fb.group({id:[""],from_id:[this.authUser.id],comment:["",J.w.required],video_id:[this.videoData.id],to_user_id:[0],to_comment_id:[0],is_reply:[0]})}saveComment(){this.isSubmitted=!0,this.videoCommentsForm.valid&&(this.reply?this.videoCommentsForm.patchValue({to_comment_id:this.selectedComment.id,to_user_id:this.selectedComment.user.id,is_reply:1}):this.isReplyComment&&this.videoCommentsForm.patchValue({to_comment_id:this.parentComment.id,to_user_id:this.parentComment.user.id,is_reply:1}),this.editComment?this.videoService.updateVideoComment(this.videoCommentsForm.value).subscribe(t=>{this.commentUpdated.emit(t),this.videoCommentsForm.get("comment").reset()}):this.videoService.addVideoComment(this.videoCommentsForm.value).subscribe(t=>{this.inputFocused=!1,this.commentAdded.emit(t),this.videoCommentsForm.get("comment").reset()}))}onCancel(){this.inputFocused=!1,this.videoCommentsForm.get("comment").reset(),this.editComment&&this.editingCancelled.emit()}getPlaceholderText(){return"Add a public "+(this.reply?"reply":"comment")+"..."}get commentCtrl(){return this.videoCommentsForm.get("comment")}ngAfterViewInit(){this.editComment&&(this.videoCommentsForm.patchValue({comment:this.fixLineBreaks.transform(this.selectedComment.comment),id:this.selectedComment.id}),this.inputFocused=!0,this.cdr.detectChanges())}}return t.\u0275fac=function(e){return new(e||t)(c.Rb(J.e),c.Rb(a.a),c.Rb(d.a),c.Rb(r.a),c.Rb(c.h),c.Rb(G.a))},t.\u0275cmp=c.Lb({type:t,selectors:[["app-video-comments-form"]],viewQuery:function(t,e){var n;1&t&&c.Wc(et,!0),2&t&&c.Dc(n=c.kc())&&(e.cEditable=n.first)},inputs:{videoData:"videoData",editComment:"editComment",selectedComment:"selectedComment",reply:"reply",isReplyComment:"isReplyComment",parentComment:"parentComment"},outputs:{commentAdded:"added",commentUpdated:"updated",editingCancelled:"cancelled"},decls:14,vars:10,consts:[[1,"w-100",3,"formGroup"],[1,"d-flex","mt-3","comment-input-container"],[1,"avatar",3,"src"],["type","hidden","formControlName","comment"],["floatLabel","never"],["matInput","","cdkTextareaAutosize","","formControlName","comment",1,"comment-input",3,"placeholder","focus"],["cEditable",""],[1,"d-flex","justify-content-end"],[3,"ngClass"],["type","button",1,"btn","text-btn",3,"click"],["type","button",1,"ml-3","px-2","btn","enter",3,"click"]],template:function(t,e){1&t&&(c.Xb(0,"form",0),c.Xb(1,"div",1),c.Sb(2,"img",2),c.oc(3,"getImgPath"),c.Sb(4,"input",3),c.Xb(5,"mat-form-field",4),c.Xb(6,"textarea",5,6),c.jc("focus",(function(){return e.inputFocused=!0})),c.Wb(),c.Wb(),c.Wb(),c.Xb(8,"div",7),c.Xb(9,"div",8),c.Xb(10,"button",9),c.jc("click",(function(){return e.onCancel()})),c.Rc(11,"Cancel"),c.Wb(),c.Xb(12,"button",10),c.jc("click",(function(){return e.saveComment()})),c.Rc(13),c.Wb(),c.Wb(),c.Wb(),c.Wb()),2&t&&(c.uc("formGroup",e.videoCommentsForm),c.Cb(2),c.uc("src",c.qc(3,7,e.authUser.channel.avatar,"avatars"),c.Kc),c.Cb(4),c.uc("placeholder",e.placeholderText),c.Cb(3),c.uc("ngClass",e.inputFocused?"d-flex":"d-none"),c.Cb(3),c.Hb("green-bg",e.videoCommentsForm.valid),c.Cb(1),c.Tc("",e.reply?"Reply":"Comment"," "))},directives:[J.y,J.p,J.i,J.c,J.o,J.h,Q.c,Z.b,tt.b,i.k],pipes:[C.a],styles:["form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%!important}form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{overflow:hidden;resize:none}form[_ngcontent-%COMP%]   .comment-input-container[_ngcontent-%COMP%]{position:relative}form[_ngcontent-%COMP%]   .content-editable-textarea[_ngcontent-%COMP%]{flex:1}form[_ngcontent-%COMP%]   .content-editable-textarea[_ngcontent-%COMP%]:focus{outline:none}form[_ngcontent-%COMP%]   .content-editable-textarea.focused-border[_ngcontent-%COMP%]{border-bottom:2px solid #18b587!important}form[_ngcontent-%COMP%]   .btn.enter[_ngcontent-%COMP%]{background-color:#777;color:#fff;text-transform:uppercase}form[_ngcontent-%COMP%]   .btn.text-btn[_ngcontent-%COMP%]{outline:none;color:#777;text-transform:uppercase;font-weight:700}"]}),t})();var it=n("bTqV"),ot=n("STbY");let st=(()=>{class t{constructor(t){this.getAuthUser=t,this.commentSelected=new c.o,this.remove=new c.o}ngOnInit(){this.authUser=this.getAuthUser.transform()}selectComment(t){this.commentSelected.emit(t)}removeComment(t){this.remove.emit(t)}}return t.\u0275fac=function(e){return new(e||t)(c.Rb(d.a))},t.\u0275cmp=c.Lb({type:t,selectors:[["app-comment-actions"]],inputs:{comment:"comment"},outputs:{commentSelected:"commentSelected",remove:"remove"},decls:16,vars:1,consts:[[1,"more-actions"],["mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"]],template:function(t,e){if(1&t&&(c.Xb(0,"div",0),c.Xb(1,"button",1),c.Xb(2,"mat-icon"),c.Rc(3,"more_vert"),c.Wb(),c.Wb(),c.Xb(4,"mat-menu",null,2),c.Xb(6,"button",3),c.jc("click",(function(){return e.selectComment(e.comment)})),c.Xb(7,"mat-icon"),c.Rc(8,"edit"),c.Wb(),c.Xb(9,"span"),c.Rc(10,"Edit"),c.Wb(),c.Wb(),c.Xb(11,"button",3),c.jc("click",(function(){return e.removeComment(e.comment)})),c.Xb(12,"mat-icon"),c.Rc(13,"delete"),c.Wb(),c.Xb(14,"span"),c.Rc(15,"Delete"),c.Wb(),c.Wb(),c.Wb(),c.Wb()),2&t){const t=c.Ec(5);c.Cb(1),c.uc("matMenuTriggerFor",t)}},directives:[it.a,ot.c,u.a,ot.d,ot.a],styles:[""]}),t})();function ct(t,e){1&t&&c.Sb(0,"i",26)}function at(t,e){if(1&t){const t=c.Yb();c.Xb(0,"div",27),c.Xb(1,"app-video-comments-form",28),c.jc("added",(function(e){return c.Ic(t),c.nc(4).commentAdded(e)})),c.Wb(),c.Wb()}if(2&t){const t=c.nc(4);c.Cb(1),c.uc("videoData",t.videoData)("reply",!0)("selectedComment",t.selectedComment)}}function rt(t,e){if(1&t){const t=c.Yb();c.Xb(0,"p",29),c.jc("click",(function(){c.Ic(t);const e=c.nc(2).$implicit;return c.nc(2).toggleReplies(e)})),c.Xb(1,"mat-icon"),c.Rc(2),c.Wb(),c.Xb(3,"span"),c.Rc(4),c.Wb(),c.Wb()}if(2&t){const t=c.nc(2).$implicit,e=c.nc(2);c.Cb(2),c.Tc("expand_",e.showReplies&&e.selectedComment===t?"more":"less",""),c.Cb(2),c.Sc(e.getRepliesTogglerText(t))}}function lt(t,e){1&t&&c.Sb(0,"i",26)}function dt(t,e){if(1&t){const t=c.Yb();c.Vb(0),c.Sb(1,"img",9),c.oc(2,"getImgPath"),c.Xb(3,"div",10),c.Xb(4,"div",11),c.Xb(5,"div",12),c.Xb(6,"span"),c.Rc(7),c.Wb(),c.Pc(8,lt,1,0,"i",13),c.Wb(),c.Xb(9,"div",14),c.Rc(10),c.oc(11,"dateFromNow"),c.Wb(),c.Wb(),c.Sb(12,"div",15),c.Xb(13,"div",16),c.Xb(14,"div",17),c.Xb(15,"i",18),c.jc("click",(function(){c.Ic(t);const e=c.nc().$implicit,n=c.nc(3).$implicit;return c.nc(2).likeDislikeComment(e,!0,n)})),c.Wb(),c.Xb(16,"span",19),c.Rc(17),c.Wb(),c.Xb(18,"i",20),c.jc("click",(function(){c.Ic(t);const e=c.nc().$implicit,n=c.nc(3).$implicit;return c.nc(2).likeDislikeComment(e,!1,n)})),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Ub()}if(2&t){const t=c.nc().$implicit,e=c.nc(5);var n;const o=null==(n=e.checkUserCommentConnection(t))?null:n.liked;var i;const s=null==(i=e.checkUserCommentConnection(t))?null:i.disliked;c.Cb(1),c.uc("src",c.qc(2,12,null==t.user?null:t.user.channel.avatar,"avatars"),c.Kc),c.Cb(4),c.Hb("author",e.isAuthor(t)),c.Cb(2),c.Sc(null==t||null==t.user?null:t.user.full_name),c.Cb(1),c.uc("ngIf",e.isAuthor(t)),c.Cb(2),c.Sc(c.pc(11,15,t.created_at)),c.Cb(2),c.uc("innerHTML",t.comment,c.Jc),c.Cb(3),c.Hb("liked",o),c.Cb(2),c.Tc(" ",e.getLikersCount(t.reactors)," "),c.Cb(1),c.Hb("disliked",s)}}function mt(t,e){if(1&t){const t=c.Yb();c.Xb(0,"app-comment-actions",33),c.jc("remove",(function(e){return c.Ic(t),c.nc(6).removeComment(e)}))("commentSelected",(function(e){return c.Ic(t),c.nc(6).selectComment(e,!1,!0)})),c.Wb()}if(2&t){const t=c.nc().$implicit;c.uc("comment",t)}}function ut(t,e){if(1&t){const t=c.Yb();c.Xb(0,"app-video-comments-form",34),c.jc("updated",(function(e){return c.Ic(t),c.nc(6).getUpdatedComments(e)}))("cancelled",(function(){return c.Ic(t),c.nc(6).editReply=!1})),c.Wb()}if(2&t){const t=c.nc(4).$implicit,e=c.nc(2);c.uc("editComment",!0)("selectedComment",e.selectedReply)("isReplyComment",!0)("parentComment",t)("videoData",e.videoData)}}function bt(t,e){if(1&t&&(c.Vb(0),c.Xb(1,"div",31),c.Xb(2,"div",4),c.Pc(3,dt,19,17,"ng-container",5),c.Wb(),c.Xb(4,"div",7),c.Pc(5,mt,1,1,"app-comment-actions",8),c.Wb(),c.Wb(),c.Pc(6,ut,1,5,"app-video-comments-form",32),c.Ub()),2&t){const t=e.$implicit,n=c.nc(5);c.Cb(3),c.uc("ngIf",t.id!==(null==n.selectedReply?null:n.selectedReply.id)||!n.editReply),c.Cb(2),c.uc("ngIf",n.isMyComment(t)&&!n.editReply),c.Cb(1),c.uc("ngIf",n.editReply&&t.id===n.selectedReply.id)}}function gt(t,e){if(1&t&&(c.Xb(0,"div",30),c.Pc(1,bt,7,3,"ng-container",2),c.Wb()),2&t){const t=c.nc(2).$implicit;c.Cb(1),c.uc("ngForOf",t.replies)}}function pt(t,e){if(1&t){const t=c.Yb();c.Vb(0),c.Sb(1,"img",9),c.oc(2,"getImgPath"),c.Xb(3,"div",10),c.Xb(4,"div",11),c.Xb(5,"div",12),c.Rc(6),c.Pc(7,ct,1,0,"i",13),c.Wb(),c.Xb(8,"div",14),c.Rc(9),c.oc(10,"dateFromNow"),c.Wb(),c.Wb(),c.Sb(11,"div",15),c.Xb(12,"div",16),c.Xb(13,"div",17),c.Xb(14,"i",18),c.jc("click",(function(){c.Ic(t);const e=c.nc().$implicit;return c.nc(2).likeDislikeComment(e)})),c.Wb(),c.Xb(15,"span",19),c.Rc(16),c.Wb(),c.Xb(17,"i",20),c.jc("click",(function(){c.Ic(t);const e=c.nc().$implicit;return c.nc(2).likeDislikeComment(e,!1)})),c.Wb(),c.Wb(),c.Xb(18,"div",21),c.Xb(19,"span",22),c.jc("click",(function(){c.Ic(t);const e=c.nc().$implicit;return c.nc(2).selectComment(e,!0)})),c.Rc(20,"Reply"),c.Wb(),c.Pc(21,at,2,3,"div",23),c.Wb(),c.Wb(),c.Pc(22,rt,5,2,"p",24),c.Pc(23,gt,2,1,"div",25),c.Wb(),c.Ub()}if(2&t){const t=c.nc().$implicit,e=c.nc(2);var n;const o=null==(n=e.checkUserCommentConnection(t))?null:n.liked;var i;const s=null==(i=e.checkUserCommentConnection(t))?null:i.disliked;c.Cb(1),c.uc("src",c.qc(2,15,null==t.user?null:t.user.channel.avatar,"avatars"),c.Kc),c.Cb(4),c.Hb("author",e.isAuthor(t)),c.Cb(1),c.Tc(" ",null==t||null==t.user?null:t.user.full_name," "),c.Cb(1),c.uc("ngIf",e.isAuthor(t)),c.Cb(2),c.Sc(c.pc(10,18,t.created_at)),c.Cb(2),c.uc("innerHTML",t.comment,c.Jc),c.Cb(3),c.Hb("liked",o),c.Cb(2),c.Tc(" ",e.getLikersCount(t.reactors)," "),c.Cb(1),c.Hb("disliked",s),c.Cb(4),c.uc("ngIf",e.showReplyForm&&t.id===e.selectedComment.id),c.Cb(1),c.uc("ngIf",t.replies.length>0),c.Cb(1),c.uc("ngIf",e.showReplies&&e.selectedComment===t)}}function ht(t,e){if(1&t){const t=c.Yb();c.Xb(0,"app-video-comments-form",35),c.jc("updated",(function(e){return c.Ic(t),c.nc(3).getUpdatedComments(e)}))("cancelled",(function(){return c.Ic(t),c.nc(3).editComment=!1})),c.Wb()}if(2&t){const t=c.nc(3);c.uc("editComment",!0)("selectedComment",t.selectedComment)("videoData",t.videoData)}}function vt(t,e){if(1&t){const t=c.Yb();c.Xb(0,"app-comment-actions",33),c.jc("remove",(function(e){return c.Ic(t),c.nc(3).removeComment(e)}))("commentSelected",(function(e){return c.Ic(t),c.nc(3).selectComment(e)})),c.Wb()}if(2&t){const t=c.nc().$implicit;c.uc("comment",t)}}function ft(t,e){if(1&t&&(c.Vb(0),c.Xb(1,"div",3),c.Xb(2,"div",4),c.Pc(3,pt,24,20,"ng-container",5),c.Pc(4,ht,1,3,"app-video-comments-form",6),c.Wb(),c.Xb(5,"div",7),c.Pc(6,vt,1,1,"app-comment-actions",8),c.Wb(),c.Wb(),c.Ub()),2&t){const t=e.$implicit,n=c.nc(2);c.Cb(2),c.Hb("w-100",n.editComment),c.Cb(1),c.uc("ngIf",t.id!==(null==n.selectedComment?null:n.selectedComment.id)&&!n.showReplyForm||n.showReplyForm||!n.editComment),c.Cb(1),c.uc("ngIf",n.editComment&&t.id===n.selectedComment.id),c.Cb(2),c.uc("ngIf",n.isMyComment(t)&&!n.editComment)}}function Ct(t,e){if(1&t&&(c.Xb(0,"div",1),c.Pc(1,ft,7,5,"ng-container",2),c.Wb()),2&t){const t=c.nc();c.Cb(1),c.uc("ngForOf",t.videoComments)}}let Pt=(()=>{class t{constructor(t,e,n,i){this.subject=t,this.videoService=e,this.getAuthUser=n,this.dialog=i,this.subscriptions=[],this.showReplyForm=!1,this.showReplies=!1,this.editReply=!1,this.trackByElement=v.a,this.videoComments=[],this.editComment=!1,this.authUser=this.getAuthUser.transform()}ngOnInit(){}isAuthor(t){return t.user.id===this.videoData.author_id}isMyComment(t){return t.user.id===this.authUser.id}getUpdatedComments(t){this.videoComments=t,this.editComment=!1,this.editReply=!1,this.selectedComment=t.find(t=>{var e;return t.id===(null===(e=this.selectedComment)||void 0===e?void 0:e.id)}),this.selectedReply=t.find(t=>{var e;return t.id===(null===(e=this.selectedReply)||void 0===e?void 0:e.id)})}getRepliesTogglerText(t){const e=t.replies.length;return"View "+e+(e>1?" replies":" reply")}selectComment(t,e=!1,n=!1){e||n?n?(this.editReply=!0,this.selectedReply=t):(this.showReplyForm=this.selectedComment!==t||!this.showReplyForm,this.selectedComment=t):(this.editComment=!this.editComment,this.showReplyForm=!this.editComment,this.selectedComment=t)}removeComment(t){this.subscriptions.push(this.dialog.open(z.a).afterClosed().subscribe(e=>{e&&this.videoService.removeVideoComment({user_id:this.authUser.id,id:t.id,video_id:t.video_id}).subscribe(t=>{this.videoComments=t,console.log(this.videoComments),this.selectedComment=t.find(t=>{var e;return t.id===(null===(e=this.selectedComment)||void 0===e?void 0:e.id)})})}))}commentAdded(t){this.videoComments=t,this.showReplyForm=!1,this.showReplies=!0,this.selectedComment=t.find(t=>t.id===this.selectedComment.id)}toggleReplies(t){this.showReplies=!this.showReplies,this.selectedComment=t}likeDislikeComment(t,e=!0,n=null){const i=this.buildParams(t,e);this.videoService.updateCommentLikes(i).subscribe(t=>{this.videoComments=t,n&&(this.showReplies=!0,this.selectedComment=this.videoComments.find(t=>t.id===this.selectedComment.id))})}buildParams(t,e){const n={video_id:t.video_id,comment_id:t.id,user_id:this.authUser.id,liked:0,disliked:0,likes:t.likes,dislikes:t.dislikes},i=this.checkUserCommentConnection(t);return n.likes=Math.max(0,(null==i?void 0:i.liked)?--t.likes:+t.likes),n.dislikes=Math.max(0,(null==i?void 0:i.disliked)?--t.dislikes:+t.dislikes),e?n.liked=+!(null==i?void 0:i.liked):n.disliked=+!(null==i?void 0:i.disliked),n}getLikersCount(t){return t.filter(t=>null==t?void 0:t.users_comments.liked).length}checkUserCommentConnection(t){const e=t.reactors.find(t=>t.id===this.authUser.id);return null==e?void 0:e.users_comments}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(c.Rb(r.a),c.Rb(a.a),c.Rb(d.a),c.Rb(K.b))},t.\u0275cmp=c.Lb({type:t,selectors:[["app-video-comments-list"]],inputs:{videoData:"videoData",videoComments:"videoComments",editComment:"editComment"},decls:1,vars:1,consts:[["class","comments-container",4,"ngIf"],[1,"comments-container"],[4,"ngFor","ngForOf"],[1,"comment","d-flex","mt-4"],[1,"left-group"],[4,"ngIf"],["class","w-100",3,"editComment","selectedComment","videoData","updated","cancelled",4,"ngIf"],[1,"right-group"],[3,"comment","remove","commentSelected",4,"ngIf"],[1,"avatar",3,"src"],[1,"details"],[1,"d-flex","align-items-center","mb-2"],[1,"mr-3","user-name"],["class","fas fa-check-circle ml-1",4,"ngIf"],[1,"comment-date"],[1,"comment-text","mb-2",3,"innerHTML"],[1,"likes-reply"],[1,"comments-like","mb-2"],[1,"fa","fa-thumbs-up","mr-1",3,"click"],[1,"likes-count"],[1,"fa","fa-thumbs-down","ml-3",3,"click"],[1,"reply-container"],[1,"reply",3,"click"],["class","add-reply",4,"ngIf"],["class","replies-toggler mt-3",3,"click",4,"ngIf"],["class","replies",4,"ngIf"],[1,"fas","fa-check-circle","ml-1"],[1,"add-reply"],[1,"w-100",3,"videoData","reply","selectedComment","added"],[1,"replies-toggler","mt-3",3,"click"],[1,"replies"],[1,"d-flex","mt-4","reply"],["class","w-100",3,"editComment","selectedComment","isReplyComment","parentComment","videoData","updated","cancelled",4,"ngIf"],[3,"comment","remove","commentSelected"],[1,"w-100",3,"editComment","selectedComment","isReplyComment","parentComment","videoData","updated","cancelled"],[1,"w-100",3,"editComment","selectedComment","videoData","updated","cancelled"]],template:function(t,e){1&t&&c.Pc(0,Ct,2,1,"div",0),2&t&&c.uc("ngIf",e.videoComments.length>0)},directives:[i.m,i.l,nt,u.a,st],pipes:[C.a,P.a],styles:[".comments-container[_ngcontent-%COMP%]{margin-top:50px}.comments-container[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%], .comments-container[_ngcontent-%COMP%]   .reply[_ngcontent-%COMP%]{justify-content:space-between}.comments-container[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .left-group[_ngcontent-%COMP%], .comments-container[_ngcontent-%COMP%]   .reply[_ngcontent-%COMP%]   .left-group[_ngcontent-%COMP%]{display:flex;width:70%}.comments-container[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .left-group[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%], .comments-container[_ngcontent-%COMP%]   .reply[_ngcontent-%COMP%]   .left-group[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{width:70%}.comments-container[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .left-group[_ngcontent-%COMP%]   .author[_ngcontent-%COMP%], .comments-container[_ngcontent-%COMP%]   .reply[_ngcontent-%COMP%]   .left-group[_ngcontent-%COMP%]   .author[_ngcontent-%COMP%]{height:26px;background-color:#777;color:#fff!important;border-radius:20px;text-align:center;display:flex;align-items:center;justify-content:center;padding:0 5px;font-family:Muli-Regular,serif!important}.comments-container[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .left-group[_ngcontent-%COMP%]   .replies-toggler[_ngcontent-%COMP%], .comments-container[_ngcontent-%COMP%]   .reply[_ngcontent-%COMP%]   .left-group[_ngcontent-%COMP%]   .replies-toggler[_ngcontent-%COMP%]{display:flex;align-items:center;color:#0e9d6a;cursor:pointer;font-family:Muli-Bold,serif;font-size:14px}.comments-container[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .left-group[_ngcontent-%COMP%]   .comment-date[_ngcontent-%COMP%], .comments-container[_ngcontent-%COMP%]   .reply[_ngcontent-%COMP%]   .left-group[_ngcontent-%COMP%]   .comment-date[_ngcontent-%COMP%]{font-size:12px;color:#818181;font-family:Muli-Light,serif}.comments-container[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .left-group[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%], .comments-container[_ngcontent-%COMP%]   .reply[_ngcontent-%COMP%]   .left-group[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{color:#545454;font-family:Muli-Bold,serif}.comments-container[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .left-group[_ngcontent-%COMP%]   .likes-reply[_ngcontent-%COMP%], .comments-container[_ngcontent-%COMP%]   .reply[_ngcontent-%COMP%]   .left-group[_ngcontent-%COMP%]   .likes-reply[_ngcontent-%COMP%]{display:flex;width:100%}.comments-container[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .left-group[_ngcontent-%COMP%]   .likes-reply[_ngcontent-%COMP%]   .comments-like[_ngcontent-%COMP%], .comments-container[_ngcontent-%COMP%]   .reply[_ngcontent-%COMP%]   .left-group[_ngcontent-%COMP%]   .likes-reply[_ngcontent-%COMP%]   .comments-like[_ngcontent-%COMP%]{color:#777}.comments-container[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .left-group[_ngcontent-%COMP%]   .likes-reply[_ngcontent-%COMP%]   .comments-like[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%], .comments-container[_ngcontent-%COMP%]   .reply[_ngcontent-%COMP%]   .left-group[_ngcontent-%COMP%]   .likes-reply[_ngcontent-%COMP%]   .comments-like[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%]{cursor:pointer}.comments-container[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .left-group[_ngcontent-%COMP%]   .likes-reply[_ngcontent-%COMP%]   .reply-container[_ngcontent-%COMP%], .comments-container[_ngcontent-%COMP%]   .reply[_ngcontent-%COMP%]   .left-group[_ngcontent-%COMP%]   .likes-reply[_ngcontent-%COMP%]   .reply-container[_ngcontent-%COMP%]{width:80%}.comments-container[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .left-group[_ngcontent-%COMP%]   .likes-reply[_ngcontent-%COMP%]   .reply[_ngcontent-%COMP%], .comments-container[_ngcontent-%COMP%]   .reply[_ngcontent-%COMP%]   .left-group[_ngcontent-%COMP%]   .likes-reply[_ngcontent-%COMP%]   .reply[_ngcontent-%COMP%]{text-transform:uppercase;color:#777;margin-left:15px;font-family:Muli-Bold,serif;font-size:14px;cursor:pointer}"]}),t})();var _t=n("FtGj"),Ot=n("A5z7");function Mt(t,e){1&t&&(c.Xb(0,"mat-error"),c.Rc(1," The video name is required "),c.Wb())}function yt(t,e){if(1&t){const t=c.Yb();c.Xb(0,"mat-chip",16),c.jc("removed",(function(){c.Ic(t);const n=e.$implicit;return c.nc().remove(n)})),c.Rc(1),c.Xb(2,"mat-icon",17),c.Rc(3,"cancel"),c.Wb(),c.Wb()}if(2&t){const t=e.$implicit;c.Cb(1),c.Tc(" ",t.name," ")}}function kt(t,e){1&t&&(c.Xb(0,"mat-error"),c.Rc(1,"Please provide some tags describing your live video "),c.Wb())}let wt=(()=>{class t{constructor(t,e){this.fb=t,this.toastr=e,this.formReady=new c.o,this.isSubmitted=!1,this.separatorKeysCodes=[_t.g,_t.c],this.videoDetailsForm=this.fb.group({name:["",J.w.required],tags:[[],J.w.required]})}ngOnInit(){this.videoDetailsForm.patchValue({name:this.videoData.name})}add(t){const e=t.input,n=t.value;(n||"").trim()&&(3===this.videoData.tags.length?this.toastr.error("We don't support more than 3 tags per video"):(this.videoData.tags.push({name:n.trim()}),this.videoDetailsForm.patchValue({tags:this.videoData.tags}))),e&&(e.value="")}remove(t){const e=this.videoData.tags.indexOf(t);e>=0&&(this.videoData.tags.splice(e,1),this.videoDetailsForm.patchValue({tags:this.videoData.tags}))}saveDetails(){this.videoDetailsForm.patchValue({tags:this.videoData.tags}),this.isSubmitted=!0,this.videoDetailsForm.valid&&this.formReady.emit(this.videoDetailsForm.value)}}return t.\u0275fac=function(e){return new(e||t)(c.Rb(J.e),c.Rb(B.b))},t.\u0275cmp=c.Lb({type:t,selectors:[["app-video-details-form"]],inputs:{videoData:"videoData"},outputs:{formReady:"formReady"},decls:21,vars:6,consts:[["id","tags-form",3,"formGroup"],[1,"left-group"],["id","video-name"],["matInput","","formControlName","name"],[4,"ngIf"],[1,"right-group"],["id","video-tags"],[1,"example-chip-list"],["formControlName","tags"],["tagList",""],[3,"removed",4,"ngFor","ngForOf"],["placeholder","Tags...",3,"matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputTokenEnd"],["chipsInput",""],["align","end"],[1,"actions"],["id","save-tags",3,"click"],[3,"removed"],["matChipRemove",""]],template:function(t,e){if(1&t&&(c.Xb(0,"form",0),c.Xb(1,"div",1),c.Xb(2,"div",2),c.Xb(3,"mat-form-field"),c.Sb(4,"input",3),c.Wb(),c.Pc(5,Mt,2,0,"mat-error",4),c.Wb(),c.Wb(),c.Xb(6,"div",5),c.Xb(7,"div",6),c.Xb(8,"mat-form-field",7),c.Xb(9,"mat-chip-list",8,9),c.Pc(11,yt,4,1,"mat-chip",10),c.Xb(12,"input",11,12),c.jc("matChipInputTokenEnd",(function(t){return e.add(t)})),c.Wb(),c.Wb(),c.Xb(14,"mat-hint",13),c.Rc(15,"Please press 'Enter' after the tag name"),c.Wb(),c.Wb(),c.Pc(16,kt,2,0,"mat-error",4),c.Wb(),c.Xb(17,"div",14),c.Xb(18,"button",15),c.jc("click",(function(){return e.saveDetails()})),c.Xb(19,"mat-icon"),c.Rc(20,"checked"),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Wb()),2&t){const t=c.Ec(10);c.uc("formGroup",e.videoDetailsForm),c.Cb(5),c.uc("ngIf",e.isSubmitted&&e.videoDetailsForm.get("name").hasError("required")),c.Cb(6),c.uc("ngForOf",e.videoData.tags),c.Cb(1),c.uc("matChipInputFor",t)("matChipInputSeparatorKeyCodes",e.separatorKeysCodes),c.Cb(4),c.uc("ngIf",0===e.videoData.tags.length&&e.isSubmitted)}},directives:[J.y,J.p,J.i,Q.c,Z.b,J.c,J.o,J.h,i.m,Ot.c,i.l,Ot.b,Q.f,u.a,Q.b,Ot.a,Ot.d],styles:["#tags-form[_ngcontent-%COMP%]{display:flex;align-items:flex-end;justify-content:space-between;flex-wrap:wrap}#tags-form[_ngcontent-%COMP%]   .right-group[_ngcontent-%COMP%]{display:flex;align-items:center}#tags-form[_ngcontent-%COMP%]   .right-group[_ngcontent-%COMP%]   #video-tags[_ngcontent-%COMP%]{width:250px}#tags-form[_ngcontent-%COMP%]   .right-group[_ngcontent-%COMP%]   #video-tags[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}#tags-form[_ngcontent-%COMP%]   .right-group[_ngcontent-%COMP%]   #save-tags[_ngcontent-%COMP%]{background-color:#18b587;color:#fff;display:flex;align-items:center;font-size:16px;border-radius:0;transition:.3s ease-in-out;margin-left:30px}@media screen and (max-width:767px){#tags-form[_ngcontent-%COMP%]   .right-group[_ngcontent-%COMP%]   #save-tags[_ngcontent-%COMP%]{margin-left:0}}"]}),t})();var Wt=n("AytR"),Xt=n("CPAS");function xt(t,e){if(1&t){const t=c.Yb();c.Xb(0,"div",14),c.jc("click",(function(){c.Ic(t);const e=c.nc().$implicit,n=c.nc(2);return n.removeVideoFromPlaylist(e,n.playlistId)})),c.Xb(1,"span",15),c.Rc(2,"delete"),c.Wb(),c.Wb()}}function Rt(t,e){if(1&t){const t=c.Yb();c.Vb(0),c.Xb(1,"div",7),c.jc("click",(function(){c.Ic(t);const n=e.$implicit,i=c.nc(2);return i.openVideoPage(n,null==i.playlistData?null:i.playlistData.id)})),c.Xb(2,"div",8),c.Sb(3,"img",9),c.oc(4,"getImgPath"),c.Wb(),c.Xb(5,"div",10),c.Xb(6,"p",11),c.jc("click",(function(){c.Ic(t);const n=e.$implicit,i=c.nc(2);return i.openVideoPage(n,null==i.playlistData?null:i.playlistData.id)})),c.Rc(7),c.Wb(),c.Xb(8,"p",12),c.Rc(9),c.Wb(),c.Wb(),c.Pc(10,xt,3,0,"div",13),c.Wb(),c.Ub()}if(2&t){const t=e.$implicit,n=c.nc(2);c.Cb(1),c.Hb("selected",n.videoId===t.id),c.Cb(2),c.uc("src",c.pc(4,6,t.thumbnail),c.Kc),c.Cb(4),c.Sc(t.name),c.Cb(2),c.Sc(t.channel.name),c.Cb(1),c.uc("ngIf",n.authUser.id===n.playlistData.channel.id)}}function It(t,e){if(1&t&&(c.Xb(0,"div",4),c.Xb(1,"h2"),c.Rc(2),c.Wb(),c.Xb(3,"div",5),c.Pc(4,Rt,11,8,"ng-container",6),c.Wb(),c.Wb()),2&t){const t=c.nc();c.Cb(2),c.Sc(t.playlistData.name),c.Cb(2),c.uc("ngForOf",t.playlistData.videos)}}function St(t,e){if(1&t){const t=c.Yb();c.Xb(0,"div",18),c.Xb(1,"div",8),c.Xb(2,"img",19),c.jc("click",(function(){c.Ic(t);const e=c.nc().$implicit;return c.nc().openVideoPage(e)})),c.oc(3,"getImgPath"),c.Wb(),c.Wb(),c.Xb(4,"div",10),c.Xb(5,"p",20),c.Rc(6),c.Wb(),c.Xb(7,"p",21),c.Rc(8),c.Wb(),c.Xb(9,"div",22),c.Xb(10,"span",23),c.Rc(11),c.Wb(),c.Xb(12,"span",24),c.Rc(13,"\xb7"),c.Wb(),c.Xb(14,"span",25),c.Rc(15),c.oc(16,"dateFromNow"),c.Wb(),c.Wb(),c.Wb(),c.Wb()}if(2&t){const t=c.nc().$implicit;c.Cb(2),c.uc("src",c.pc(3,5,t.thumbnail),c.Kc),c.Cb(4),c.Sc(t.name),c.Cb(2),c.Sc(t.channel.name),c.Cb(3),c.Tc(" ","live"===t.status?"17k watching":t.views+" view"+(1===t.views?"":"s")," "),c.Cb(4),c.Sc(c.pc(16,7,t.created_at))}}function Vt(t,e){if(1&t&&(c.Xb(0,"div",16),c.Pc(1,St,17,9,"div",17),c.Wb()),2&t){const t=e.index;c.Cb(1),c.uc("ngIf",t<5)}}let Dt=(()=>{class t{constructor(t,e,n,i,o,c){this.route=t,this.playlistsService=e,this.videoService=n,this.getAuthUser=i,this.router=o,this.dialog=c,this.playlistOpened=!1,this.videoSuggestions=[],this.apiUrl=s.b,this.isProduction=Wt.a.production,this.authUser=this.getAuthUser.transform()}ngOnInit(){var t,e;this.urlParams=this.route.snapshot.queryParams,this.videoId=+(null===(t=this.urlParams)||void 0===t?void 0:t.id),this.playlistId=null===(e=this.urlParams)||void 0===e?void 0:e.playlist_id,this.playlistOpened=!!this.playlistId,this.playlistOpened&&this.playlistsService.getById({playlist_id:this.playlistId}).subscribe(t=>{this.playlistData=t}),this.videoService.get({limit:s.c}).subscribe(t=>{this.videoSuggestions=t.videos})}openVideoPage(t,e=null){const n={id:t.id,playlist_id:e};this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>Object(p.a)(this,void 0,void 0,(function*(){return yield this.router.navigate(["/videos/play"],{queryParams:n})})))}removeVideoFromPlaylist(t,e){this.dialog.open(z.a).afterClosed().subscribe(n=>{n&&this.playlistsService.removeVideoFromPlaylist({playlist_id:e,video_id:t.id}).subscribe(e=>{const n=this.playlistData.videos.indexOf(t);this.playlistData.videos=e.videos;const i=this.playlistData.videos[n];i&&this.openVideoPage(i)})})}}return t.\u0275fac=function(e){return new(e||t)(c.Rb(o.a),c.Rb(Xt.a),c.Rb(a.a),c.Rb(d.a),c.Rb(o.d),c.Rb(K.b))},t.\u0275cmp=c.Lb({type:t,selectors:[["app-video-suggestions"]],decls:5,vars:3,consts:[["class","playlist-wrap",4,"ngIf"],["class","suggested-videos",4,"ngFor","ngForOf"],[3,"hidden"],["src","assets/img/ads.png",1,"ads"],[1,"playlist-wrap"],[1,"list-wrap"],[4,"ngFor","ngForOf"],[1,"playlist-video",3,"click"],[1,"thumbnail-container"],[3,"src"],[1,"details-container"],[1,"video-name",3,"click"],[1,"main-text-3"],["class","remove-btn-container",3,"click",4,"ngIf"],[1,"remove-btn-container",3,"click"],[1,"material-icons"],[1,"suggested-videos"],["class","suggested-video",4,"ngIf"],[1,"suggested-video"],[3,"src","click"],[1,"video-name"],[1,"channel-sub-name"],[1,"details-row"],[1,"watchers-count"],[1,"dot"],[1,"upload-time"]],template:function(t,e){1&t&&(c.Pc(0,It,5,2,"div",0),c.Pc(1,Vt,2,1,"div",1),c.Xb(2,"div",2),c.Sb(3,"img",3),c.Sb(4,"img",3),c.Wb()),2&t&&(c.uc("ngIf",e.playlistOpened&&e.playlistData&&e.playlistData.videos.length>0),c.Cb(1),c.uc("ngForOf",e.videoSuggestions),c.Cb(1),c.uc("hidden",e.isProduction))},directives:[i.m,i.l],pipes:[C.a,P.a],styles:[".playlist-wrap[_ngcontent-%COMP%]{box-shadow:0 0 6px rgba(0,0,0,.1)}.playlist-wrap[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.playlist-wrap[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#e3e3e3;border-radius:10px}.playlist-wrap[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#cbcbcb;border-radius:10px}.playlist-wrap[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}.playlist-wrap[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{padding:6px 12px;background:#f8f8f8;font-size:16px;color:#545454}.playlist-wrap[_ngcontent-%COMP%]   .list-wrap[_ngcontent-%COMP%]{margin-bottom:40px;max-height:440px;overflow:auto;padding:0 12px 16px;margin-top:16px}.playlist-wrap[_ngcontent-%COMP%]   .list-wrap[_ngcontent-%COMP%]   .ads-info[_ngcontent-%COMP%]:last-child{margin:0}.playlist-wrap[_ngcontent-%COMP%]   .list-wrap[_ngcontent-%COMP%]   .playlist-video[_ngcontent-%COMP%]{cursor:pointer}.playlist-wrap[_ngcontent-%COMP%]   .list-wrap[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:68px;height:51px}.playlist-wrap[_ngcontent-%COMP%]   .list-wrap[_ngcontent-%COMP%]   .video-name[_ngcontent-%COMP%]{font-size:14px}.playlist-wrap[_ngcontent-%COMP%]   .list-wrap[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]{margin-left:12px;margin-top:8px;cursor:pointer}.playlist-wrap[_ngcontent-%COMP%]   .list-wrap[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{color:#18b587}.playlist-wrap[_ngcontent-%COMP%]   .list-wrap[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px;color:#545454;transition:.3s}.suggested-video[_ngcontent-%COMP%]   .video-name[_ngcontent-%COMP%], .suggested-video[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer}.selected[_ngcontent-%COMP%]{background-color:#f4f4f4}.details-row[_ngcontent-%COMP%]{display:flex;align-items:center}.details-row[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{margin:0 5px}"]}),t})();function Ft(t,e){if(1&t){const t=c.Yb();c.Xb(0,"app-user-tags",5),c.jc("tagSelected",(function(e){return c.Ic(t),c.nc().getVideosByTag(e)})),c.Wb()}}function Ut(t,e){1&t&&(c.Xb(0,"span"),c.Rc(1,"No tags defined for this video"),c.Wb())}function jt(t,e){if(1&t){const t=c.Yb();c.Xb(0,"p",30),c.jc("click",(function(){c.Ic(t);const n=e.$implicit;return c.nc(3).openVideoByTag(n.name)})),c.Rc(1),c.Wb()}if(2&t){const t=e.$implicit;c.Cb(1),c.Tc(" #",t.name,"")}}function Tt(t,e){if(1&t&&(c.Vb(0),c.Pc(1,jt,2,1,"p",29),c.Ub()),2&t){const t=c.nc(2);c.Cb(1),c.uc("ngForOf",t.videoData.tags)}}function $t(t,e){if(1&t){const t=c.Yb();c.Xb(0,"button",34),c.jc("click",(function(){c.Ic(t);const e=c.nc(3);return e.showTagsForm=!e.showTagsForm})),c.Xb(1,"mat-icon"),c.Rc(2,"edit"),c.Wb(),c.Xb(3,"span"),c.Rc(4,"Edit details"),c.Wb(),c.Wb()}}function Lt(t,e){if(1&t&&(c.Xb(0,"div",31),c.Xb(1,"p",32),c.Rc(2),c.Wb(),c.Pc(3,$t,5,0,"button",33),c.Wb()),2&t){const t=c.nc(2);c.Cb(2),c.Sc(null==t.videoData?null:t.videoData.name),c.Cb(1),c.uc("ngIf",!t.showTagsForm&&(null==t.authUser?null:t.authUser.id)===t.videoData.author_id)}}function At(t,e){if(1&t){const t=c.Yb();c.Xb(0,"app-video-details-form",35),c.jc("formReady",(function(e){return c.Ic(t),c.nc(2).saveVideoDetails(e)})),c.Wb()}if(2&t){const t=c.nc(2);c.uc("videoData",t.videoData)}}function qt(t,e){if(1&t){const t=c.Yb();c.Xb(0,"div",36),c.jc("click",(function(){c.Ic(t);const e=c.nc(2);return e.openChannelPage(e.videoData)})),c.Sb(1,"img",37),c.oc(2,"getImgPath"),c.Xb(3,"div"),c.Xb(4,"p",38),c.Rc(5),c.Wb(),c.Xb(6,"p",39),c.Rc(7),c.Wb(),c.Wb(),c.Wb()}if(2&t){const t=c.nc(2);c.Cb(1),c.uc("src",c.qc(2,3,t.videoData.channel.avatar,"avatars"),c.Kc),c.Cb(4),c.Sc(t.videoData.channel.name),c.Cb(2),c.Sc(t.buildSubscribersCountText(t.videoData))}}function Yt(t,e){if(1&t){const t=c.Yb();c.Xb(0,"app-video-comments-form",40),c.jc("added",(function(e){return c.Ic(t),c.nc(2).commentAdded(e)})),c.Wb()}if(2&t){const t=c.nc(2);c.uc("videoData",t.videoData)}}function Bt(t,e){if(1&t){const t=c.Yb();c.Vb(0),c.Xb(1,"div",6),c.Sb(2,"app-video-regular-player",7),c.Wb(),c.Xb(3,"div",8),c.Xb(4,"div",9),c.Pc(5,Ut,2,0,"span",3),c.Pc(6,Tt,2,1,"ng-container",3),c.Wb(),c.Xb(7,"div",10),c.Xb(8,"div",11),c.jc("click",(function(){c.Ic(t);const e=c.nc();return e.updateLikes(e.videoData,"like")})),c.Sb(9,"i",12),c.Xb(10,"p"),c.Rc(11),c.Wb(),c.Wb(),c.Xb(12,"div",11),c.jc("click",(function(){c.Ic(t);const e=c.nc();return e.updateLikes(e.videoData,"dislike")})),c.Sb(13,"i",13),c.Xb(14,"p"),c.Rc(15),c.Wb(),c.Wb(),c.Xb(16,"div",14),c.Sb(17,"i",15),c.Xb(18,"p"),c.Rc(19,"Share"),c.Wb(),c.Wb(),c.Xb(20,"div",11),c.jc("click",(function(){c.Ic(t);const e=c.nc();return e.saveVideo(e.videoData)})),c.Sb(21,"i",16),c.Xb(22,"p"),c.Rc(23),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Xb(24,"div",17),c.Pc(25,Lt,4,2,"div",18),c.Pc(26,At,1,1,"app-video-details-form",19),c.Wb(),c.Xb(27,"div",20),c.Xb(28,"span",21),c.Rc(29),c.Wb(),c.Xb(30,"span",22),c.Rc(31,"\xb7"),c.Wb(),c.Xb(32,"span",23),c.Rc(33),c.oc(34,"dateFromNow"),c.Wb(),c.Wb(),c.Pc(35,qt,8,6,"div",24),c.Xb(36,"div",25),c.Pc(37,Yt,1,1,"app-video-comments-form",26),c.Sb(38,"mat-spinner",27),c.Sb(39,"app-video-comments-list",28),c.Wb(),c.Ub()}if(2&t){const t=c.nc();c.Cb(2),c.uc("videoData",t.videoData),c.Cb(3),c.uc("ngIf",0===(null==t.videoData.tags?null:t.videoData.tags.length)),c.Cb(1),c.uc("ngIf",(null==t.videoData.tags?null:t.videoData.tags.length)>0),c.Cb(3),c.Hb("liked",null==t.userVideoConnection?null:t.userVideoConnection.liked),c.Cb(2),c.Sc(t.videoData.likes),c.Cb(2),c.Hb("disliked",null==t.userVideoConnection?null:t.userVideoConnection.disliked),c.Cb(2),c.Sc(t.videoData.dislikes),c.Cb(5),c.Hb("saved","saved"===(null==t.userVideoConnection?null:t.userVideoConnection.saved)),c.Cb(3),c.Sc("saved"===(null==t.userVideoConnection?null:t.userVideoConnection.saved)?"Saved":"Save"),c.Cb(2),c.uc("ngIf",!t.showTagsForm),c.Cb(1),c.uc("ngIf",t.showTagsForm),c.Cb(3),c.Sc((null==t.videoData?null:t.videoData.views)+" view"+(1===(null==t.videoData?null:t.videoData.views)?"":"s")),c.Cb(4),c.Sc(c.pc(34,22,t.videoData.created_at)),c.Cb(2),c.uc("ngIf",null==t.videoData?null:t.videoData.channel),c.Cb(2),c.uc("ngIf",t.auth.loggedIn()),c.Cb(1),c.uc("diameter",15)("hidden","finished"===t.commentsLoading),c.Cb(1),c.uc("videoData",t.videoData)("videoComments",t.videoComments)}}function Et(t,e){1&t&&c.Sb(0,"app-video-suggestions")}function Nt(t,e){1&t&&c.Sb(0,"app-video-suggestions")}let Ht=(()=>{class t{constructor(t,e,n,i,o,c,a){this.route=t,this.videoService=e,this.router=n,this.getAuthUser=i,this.auth=o,this.toastr=c,this.loader=a,this.apiUrl=s.b,this.userVideoConnection={liked:0,disliked:0,saved:"",viewed:!1},this.videoJSPlayerOptions=s.m,this.showTagsForm=!1,this.isSmallScreen=q.a.isSmallScreen(),this.commentsRefreshed=!1,this.videoComments=[],this.commentsLoading="idle",this.subscriptions=[],this.authUser=this.getAuthUser.transform()}ngOnInit(){this.subscriptions.push(this.videoService.getVideoById({id:this.route.snapshot.queryParams.id}).subscribe(t=>{this.videoData=t,this.auth.loggedIn()&&(this.userVideoConnection=this.checkUserVideoConnection(t),this.updateViewsCount(t),this.indexUserTags(t),this.getComments())}))}checkUserVideoConnection(t){var e,n,i;const o=null==t?void 0:t.users_vids.find(t=>t.id===this.authUser.id);return o?{liked:null===(e=o.users_videos)||void 0===e?void 0:e.liked,disliked:null===(n=o.users_videos)||void 0===n?void 0:n.disliked,saved:o.users_videos.saved?"saved":"",viewed:!!(null===(i=null==o?void 0:o.users_videos)||void 0===i?void 0:i.viewed)}:this.userVideoConnection}updateViewsCount(t){this.userVideoConnection.viewed||this.subscriptions.push(this.videoService.updateViews({user_id:this.authUser.id,video_id:t.id}).subscribe(t=>{this.videoData=t}))}updateLikes(t,e){this.auth.loggedIn()?(t=this.getLikesState(e,t),this.videoService.updateLikes({video_id:t.id,user_id:this.authUser.id,likes:t.likes,dislikes:t.dislikes,liked:this.userVideoConnection.liked,disliked:this.userVideoConnection.disliked,saved:t.saved}).subscribe(t=>{})):this.toastr.error("Please log in first to take this action")}getLikesState(t,e){return"like"===t?(this.userVideoConnection.liked=+!this.userVideoConnection.liked,this.userVideoConnection.disliked&&(e.dislikes+=0===e.dislikes?0:-1),this.userVideoConnection.disliked=0,e.likes+=this.userVideoConnection.liked?1:-1):(this.userVideoConnection.disliked=+!this.userVideoConnection.disliked,this.userVideoConnection.liked&&(e.likes+=0===e.likes?0:-1),this.userVideoConnection.liked=0,e.dislikes+=this.userVideoConnection.disliked?1:-1),e}indexUserTags(t){var e;const n={user_id:this.authUser.id,video_id:t.id,tags:null===(e=this.videoData)||void 0===e?void 0:e.tags};this.subscriptions.push(this.videoService.indexUserTags(n).subscribe(t=>{}))}openChannelPage(t){this.router.navigate(["channels/show"],{queryParams:{username:t.users_vids[0].username}})}openVideoByTag(t){return Object(p.a)(this,void 0,void 0,(function*(){yield this.router.navigate(["videos"],{queryParams:{tag:t}})}))}saveVideo(t){this.subscriptions.push(this.videoService.saveVideo({video_id:t.id,user_id:this.authUser.id,saved:"saved"===this.userVideoConnection.saved?0:1}).subscribe(t=>{this.userVideoConnection.saved=t.saved?"saved":""}))}saveVideoDetails(t){this.videoData.tags=t.tags,this.subscriptions.push(this.videoService.saveVideoDetails(Object.assign(Object.assign({},t),{video_id:this.videoData.id})).subscribe(t=>{this.videoData=t,this.showTagsForm=!1}))}getComments(){this.commentsLoading="loading",this.subscriptions.push(this.videoService.getVideoComments({video_id:this.videoData.id}).subscribe(t=>{this.videoComments=t,this.commentsLoading="finished"}))}commentAdded(t){this.commentsRefreshed=!0,this.videoComments=t}getVideosByTag(t){return Object(p.a)(this,void 0,void 0,(function*(){yield this.router.navigate(["videos"],{queryParams:{tag:t}})}))}buildSubscribersCountText(t){const e=t.channel.subscribers_count;return e+" subscriber"+(1===e?"":"s")}ngAfterViewInit(){}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(c.Rb(o.a),c.Rb(a.a),c.Rb(o.d),c.Rb(d.a),c.Rb(Y.a),c.Rb(B.b),c.Rb(E.a))},t.\u0275cmp=c.Lb({type:t,selectors:[["app-play-video"]],decls:7,vars:4,consts:[[3,"tagSelected",4,"ngIf"],[1,"ads-block"],[1,"ads-block-left"],[4,"ngIf"],[1,"ads-block-right"],[3,"tagSelected"],[1,"videoWrap"],[3,"videoData"],[1,"main-tags"],[1,"main-tags-text"],[1,"main-tags-like"],[1,"main-tags-share",3,"click"],[1,"fas","fa-thumbs-up"],[1,"fas","fa-thumbs-down"],[1,"main-tags-share"],[1,"fas","fa-share-alt"],[1,"fas","fa-plus-square"],[1,"tags-container"],["class","editable-details",4,"ngIf"],[3,"videoData","formReady",4,"ngIf"],[1,"details-row"],[1,"views-count"],[1,"dot"],[1,"date"],["class","channel-block",3,"click",4,"ngIf"],[1,"comments-block"],["class","w-100",3,"videoData","added",4,"ngIf"],[3,"diameter","hidden"],[3,"videoData","videoComments"],["class","tag",3,"click",4,"ngFor","ngForOf"],[1,"tag",3,"click"],[1,"editable-details"],[1,"video-title"],["id","add-tags",3,"click",4,"ngIf"],["id","add-tags",3,"click"],[3,"videoData","formReady"],[1,"channel-block",3,"click"],["alt","avatar",1,"avatar",3,"src"],[1,"channel-name"],[1,"subscribers-count"],[1,"w-100",3,"videoData","added"]],template:function(t,e){1&t&&(c.Pc(0,Ft,1,0,"app-user-tags",0),c.Xb(1,"div",1),c.Xb(2,"div",2),c.Pc(3,Bt,40,24,"ng-container",3),c.Pc(4,Et,1,0,"app-video-suggestions",3),c.Wb(),c.Xb(5,"div",4),c.Pc(6,Nt,1,0,"app-video-suggestions",3),c.Wb(),c.Wb()),2&t&&(c.uc("ngIf",e.auth.loggedIn()),c.Cb(3),c.uc("ngIf",e.videoData),c.Cb(1),c.uc("ngIf",e.isSmallScreen),c.Cb(2),c.uc("ngIf",!e.isSmallScreen))},directives:[i.m,N.a,H,g.b,Pt,i.l,u.a,wt,nt,Dt],pipes:[P.a,C.a],styles:[".plyr[_ngcontent-%COMP%]{height:400px!important;width:100%}.plyr[_ngcontent-%COMP%]   .plyr__control--overlaid[_ngcontent-%COMP%]{background-color:#18b587!important}.plyr[_ngcontent-%COMP%]   .plyr--video[_ngcontent-%COMP%]   .plyr__control[aria-expanded=true][_ngcontent-%COMP%], .plyr[_ngcontent-%COMP%]   .plyr__controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus, .plyr[_ngcontent-%COMP%]   .plyr__controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#18b587!important}.plyr--full-ui[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%], .saved[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .saved[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#18b587!important}#add-tags[_ngcontent-%COMP%]{background-color:#18b587;color:#fff;margin-left:10px;display:flex;align-items:center;padding:8px 24px}.tag[_ngcontent-%COMP%]{cursor:pointer}.details-row[_ngcontent-%COMP%]{display:flex;align-items:center}.details-row[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{margin:0 10px}.channel-block[_ngcontent-%COMP%]{cursor:pointer;border-top:.5px solid #c9c9c9;border-bottom:.5px solid #c9c9c9;padding:12px 0}.main-tags[_ngcontent-%COMP%], .tags-container[_ngcontent-%COMP%]   .editable-details[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.main-tags[_ngcontent-%COMP%]{margin-bottom:16px;margin-top:24px;align-items:flex-start}.main-tags[_ngcontent-%COMP%]   .main-tags-text[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;flex:1;margin-right:24px;align-items:center}.main-tags[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#0035c6;font-size:16px;font-family:Muli-Bold;margin-right:16px;margin-bottom:8px}.main-tags[_ngcontent-%COMP%]   .main-tags-like[_ngcontent-%COMP%]{display:flex;color:#545454}.main-tags[_ngcontent-%COMP%]   .main-tags-share[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer}.main-tags[_ngcontent-%COMP%]   .main-tags-share[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-left:5px;color:#545454;font-size:12px;font-family:Muli-Light;margin-bottom:0!important}"]}),t})();function zt(t,e){if(1&t){const t=c.Yb();c.Xb(0,"li",18),c.jc("click",(function(){c.Ic(t);const n=e.$implicit;return c.nc(4).getVideosByTag(n.name)})),c.Xb(1,"span"),c.Rc(2),c.Wb(),c.Wb()}if(2&t){const t=e.$implicit;c.Cb(2),c.Sc(t.name)}}function Kt(t,e){if(1&t){const t=c.Yb();c.Xb(0,"div",4),c.Xb(1,"div",5),c.Xb(2,"img",6),c.jc("click",(function(){c.Ic(t);const n=e.$implicit,i=c.nc(3);return i.openVideoPage(n,i.userVideos.username)})),c.oc(3,"getImgPath"),c.Wb(),c.Xb(4,"span",7),c.Rc(5),c.Wb(),c.Wb(),c.Xb(6,"div",8),c.Xb(7,"h4",9),c.Rc(8),c.Wb(),c.Xb(9,"div",10),c.Xb(10,"span",11),c.jc("click",(function(){c.Ic(t);const n=e.$implicit;return c.nc(3).openChannelPage(n.user.channel,n.user.username)})),c.Rc(11),c.Wb(),c.Xb(12,"span",12),c.Rc(13,"\xb7"),c.Wb(),c.Xb(14,"span",13),c.Rc(15),c.Wb(),c.Xb(16,"span",12),c.Rc(17,"\xb7"),c.Wb(),c.Xb(18,"span",14),c.Rc(19),c.oc(20,"dateFromNow"),c.Wb(),c.Wb(),c.Xb(21,"p",15),c.Rc(22),c.Wb(),c.Xb(23,"div",16),c.Xb(24,"ul"),c.Pc(25,zt,3,1,"li",17),c.Wb(),c.Wb(),c.Wb(),c.Wb()}if(2&t){const t=e.$implicit;c.Cb(2),c.uc("src",c.pc(3,8,t.thumbnail),c.Kc),c.Cb(3),c.Sc(t.duration),c.Cb(3),c.Sc(t.name),c.Cb(3),c.Sc(t.channel.name),c.Cb(4),c.Tc(" ","live"===t.status?"17k watching":t.views+" view"+(1===t.views?"":"s")," "),c.Cb(4),c.Sc(c.pc(20,10,t.created_at)),c.Cb(3),c.Tc(" ",t.description," "),c.Cb(3),c.uc("ngForOf",null==t?null:t.tags)}}function Jt(t,e){if(1&t&&(c.Vb(0),c.Pc(1,Kt,26,12,"div",3),c.Ub()),2&t){const t=c.nc(2);c.Cb(1),c.uc("ngForOf",t.userVideos.users_vids)}}function Gt(t,e){if(1&t&&(c.Xb(0,"div",1),c.Pc(1,Jt,2,1,"ng-container",2),c.Wb()),2&t){const t=c.nc();c.Cb(1),c.uc("ngIf",!t.search)}}let Qt=(()=>{class t{constructor(t,e,n,i,o,c){this.videoService=t,this.router=e,this.subject=n,this.channelsService=i,this.route=o,this.getAuthUser=c,this.channelsVideos=[],this.apiUrl=s.b}ngOnInit(){this.authUser=this.getAuthUser.transform(),this.videoService.getUserSavedVideos({user_id:this.authUser.id}).subscribe(t=>{this.userVideos=t})}openVideoPage(t,e){return Object(p.a)(this,void 0,void 0,(function*(){const n=Object(h.a)(t,e);yield this.router.navigate([n.route],{queryParams:n.params})}))}openChannelPage(t,e){this.router.navigate(["channels/show"],{queryParams:{username:e}})}getVideosByTag(t){return Object(p.a)(this,void 0,void 0,(function*(){yield this.router.navigate(["videos"],{queryParams:{tag:t}})}))}}return t.\u0275fac=function(e){return new(e||t)(c.Rb(a.a),c.Rb(o.d),c.Rb(r.a),c.Rb(l.a),c.Rb(o.a),c.Rb(d.a))},t.\u0275cmp=c.Lb({type:t,selectors:[["app-show-saved-videos"]],decls:1,vars:1,consts:[["id","videos-list",4,"ngIf"],["id","videos-list"],[4,"ngIf"],["class","video-container flex-wrap",4,"ngFor","ngForOf"],[1,"video-container","flex-wrap"],[1,"thumbnail"],[3,"src","click"],[1,"duration"],[1,"details"],[1,"title"],[1,"shortened-details"],[1,"channel-name",3,"click"],[1,"dot"],[1,"watchers-count"],[1,"upload-time"],[1,"shortened-description"],[1,"tags"],[3,"click",4,"ngFor","ngForOf"],[3,"click"]],template:function(t,e){1&t&&c.Pc(0,Gt,2,1,"div",0),2&t&&c.uc("ngIf",e.userVideos)},directives:[i.m,i.l],pipes:[C.a,P.a],styles:[".filter-toggle-btn[_ngcontent-%COMP%]{text-transform:uppercase;background-color:unset;display:flex;align-items:center;font-family:Muli-Bold;padding:10px}.filter-toggle-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:10px}"]}),t})();var Zt=n("NUQi"),te=n("8OJ3"),ee=n("qe5e");const ne=[{path:"test",component:(()=>{class t{constructor(){this.config={controls:!0,bigPlayButton:!1,width:320,height:240,fluid:!1,plugins:{record:{audio:!0,video:!0,maxLength:110,debug:!0}}}}ngOnInit(){}ngAfterViewInit(){this.player=Object(te.default)(document.getElementById("video"),this.config,()=>{const t="Using video.js "+te.default.VERSION+" with videojs-record "+te.default.getPluginVersion("record")+" and recordrtc "+ee.version;te.default.log(t)},()=>{});let t=this.player;this.player.on("finishRecord",()=>{console.log("finished recording: ",t.recordedData)})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Lb({type:t,selectors:[["app-videojs-test"]],decls:1,vars:0,consts:[["id","video","playsinline","",1,"video-js"]],template:function(t,e){1&t&&c.Sb(0,"video",0)},styles:[""]}),t})()},{path:"",component:A,pathMatch:"full",data:{title:"Videos"}},{path:"play",component:Ht,data:{title:"Play Video"}},{path:"saved",component:Qt,canActivate:[Zt.a],data:{title:"Saved Videos"}}];let ie=(()=>{class t{}return t.\u0275mod=c.Pb({type:t}),t.\u0275inj=c.Ob({factory:function(e){return new(e||t)},imports:[[o.f.forChild(ne)],o.f]}),t})();var oe=n("PCNd");let se=(()=>{class t{}return t.\u0275mod=c.Pb({type:t}),t.\u0275inj=c.Ob({factory:function(e){return new(e||t)},imports:[[i.c,ie,oe.a]]}),t})()}}]);