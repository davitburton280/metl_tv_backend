(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"+27z":function(e,t){function n(e,t,n){var i={audio:!1,video:{mandatory:{chromeMediaSource:e?"screen":"desktop",maxWidth:window.screen.width>1920?window.screen.width:1920,maxHeight:window.screen.height>1080?window.screen.height:1080},optional:[]}};return n&&(i.audio={mandatory:{chromeMediaSource:e?"screen":"desktop"},optional:[]}),t&&(i.video.mandatory.chromeMediaSourceId=t,i.audio&&i.audio.mandatory&&(i.audio.mandatory.chromeMediaSourceId=t)),i}function i(e){o?o.isLoaded?o.contentWindow.postMessage(e?e.forEach?{captureCustomSourceId:e}:{captureSourceIdWithAudio:!0}:{captureSourceId:!0},"*"):setTimeout((function(){i(e)}),100):s((function(){i(e)}))}var o;function s(e){o?e():((o=document.createElement("iframe")).onload=function(){o.isLoaded=!0,e()},o.src="https://openvidu.github.io/openvidu-screen-sharing-chrome-extension/",o.style.display="none",(document.body||document.documentElement).appendChild(o))}function r(){o?o.isLoaded?o.contentWindow.postMessage({getChromeExtensionStatus:!0},"*"):setTimeout(r,100):s(r)}window.getScreenId=function(e,t,o){-1===navigator.userAgent.indexOf("Edge")||!navigator.msSaveOrOpenBlob&&!navigator.msSaveBlob?navigator.mozGetUserMedia?t(null,"firefox",{video:{mozMediaSource:e,mediaSource:e}}):(window.addEventListener("message",(function e(i){i.data&&(i.data.chromeMediaSourceId&&("PermissionDeniedError"===i.data.chromeMediaSourceId?t("permission-denied"):t(null,i.data.chromeMediaSourceId,n(null,i.data.chromeMediaSourceId,i.data.canRequestAudioTrack)),window.removeEventListener("message",e)),i.data.chromeExtensionStatus&&(t(i.data.chromeExtensionStatus,null,n(i.data.chromeExtensionStatus)),window.removeEventListener("message",e)))})),o?setTimeout((function(){i(o)}),100):setTimeout(i,100)):t({video:!0})},window.getScreenConstraints=function(e){s((function(){getScreenId((function(t,n,i){i||(i={video:!0}),e(t,i.video)}))}))},window.getChromeExtensionStatus=function(e){navigator.mozGetUserMedia?e("installed-enabled"):(window.addEventListener("message",(function t(n){n.data&&n.data.chromeExtensionStatus&&(e(n.data.chromeExtensionStatus),window.removeEventListener("message",t))})),setTimeout(r,100))},t.getScreenId=getScreenId},"+FKC":function(e,t,n){"use strict";t.__esModule=!0;var i=n("bDgZ"),o=n("9m68").OpenViduLogger.getInstance(),s=function(){function e(e){this.stream=e,this.webRtcStatsEnabled=!1,this.statsInterval=1,this.stats={inbound:{audio:{bytesReceived:0,packetsReceived:0,packetsLost:0},video:{bytesReceived:0,packetsReceived:0,packetsLost:0,framesDecoded:0,nackCount:0}},outbound:{audio:{bytesSent:0,packetsSent:0},video:{bytesSent:0,packetsSent:0,framesEncoded:0,nackCount:0}}}}return e.prototype.isEnabled=function(){return this.webRtcStatsEnabled},e.prototype.initWebRtcStats=function(){var e=this,t=localStorage.getItem("elastest-instrumentation");if(t){o.warn("WebRtc stats enabled for stream "+this.stream.streamId+" of connection "+this.stream.connection.connectionId),this.webRtcStatsEnabled=!0;var n=JSON.parse(t);return this.statsInterval=n.webrtc.interval,o.warn("localStorage item: "+JSON.stringify(n)),void(this.webRtcStatsIntervalId=setInterval((function(){e.sendStatsToHttpEndpoint(n)}),1e3*this.statsInterval))}o.debug("WebRtc stats not enabled")},e.prototype.stopWebRtcStats=function(){this.webRtcStatsEnabled&&(clearInterval(this.webRtcStatsIntervalId),o.warn("WebRtc stats stopped for disposed stream "+this.stream.streamId+" of connection "+this.stream.connection.connectionId))},e.prototype.getSelectedIceCandidateInfo=function(){var e=this;return new Promise((function(t,n){e.getStatsAgnostic(e.stream.getRTCPeerConnection(),(function(o){if(-1!==i.name.indexOf("Chrome")||-1!==i.name.indexOf("Opera")){var s=void 0,r=void 0,a=void 0,c={},l={};for(var d in o){var u=o[d];"localcandidate"===u.type?c[u.id]=u:"remotecandidate"===u.type?l[u.id]=u:"googCandidatePair"===u.type&&"true"===u.googActiveConnection&&(a=u,s=u.localCandidateId,r=u.remoteCandidateId)}var g=c[s];if(g){var h=e.stream.getLocalIceCandidateList().filter((function(e){return!!e.candidate&&e.candidate.indexOf(g.ipAddress)>=0&&e.candidate.indexOf(g.portNumber)>=0&&e.candidate.indexOf(g.priority)>=0}));g.raw=h[0]?h[0].candidate:"ERROR: Cannot find local candidate in list of sent ICE candidates"}else g="ERROR: No active local ICE candidate. Probably ICE-TCP is being used";var p=l[r];p?(h=e.stream.getRemoteIceCandidateList().filter((function(e){return!!e.candidate&&e.candidate.indexOf(p.ipAddress)>=0&&e.candidate.indexOf(p.portNumber)>=0&&e.candidate.indexOf(p.priority)>=0})),p.raw=h[0]?h[0].candidate:"ERROR: Cannot find remote candidate in list of received ICE candidates"):p="ERROR: No active remote ICE candidate. Probably ICE-TCP is being used",t({googCandidatePair:a,localCandidate:g,remoteCandidate:p})}else n("Selected ICE candidate info only available for Chrome")}),(function(e){n(e)}))}))},e.prototype.sendStatsToHttpEndpoint=function(e){var t=this,n=function(n){var i=new XMLHttpRequest,s=e.webrtc.httpEndpoint;i.open("POST",s,!0),i.setRequestHeader("Content-type","application/json"),i.onreadystatechange=function(){4===i.readyState&&200===i.status&&o.log("WebRtc stats successfully sent to "+s+" for stream "+t.stream.streamId+" of connection "+t.stream.connection.connectionId)},i.send(n)};this.getStatsAgnostic(this.stream.getRTCPeerConnection(),(function(o){if(-1!==i.name.indexOf("Firefox"))o.forEach((function(i){var o={};if("inbound-rtp"===i.type&&null!==i.nackCount&&!1===i.isRemote&&i.id.startsWith("inbound")&&i.remoteId.startsWith("inbound")){var s="webrtc_inbound_"+i.mediaType+"_"+i.ssrc,r={bytesReceived:(i.bytesReceived-t.stats.inbound[i.mediaType].bytesReceived)/t.statsInterval,jitter:1e3*i.jitter,packetsReceived:(i.packetsReceived-t.stats.inbound[i.mediaType].packetsReceived)/t.statsInterval,packetsLost:(i.packetsLost-t.stats.inbound[i.mediaType].packetsLost)/t.statsInterval},a={bytesReceived:"bytes",jitter:"ms",packetsReceived:"packets",packetsLost:"packets"};"video"===i.mediaType&&(r.framesDecoded=(i.framesDecoded-t.stats.inbound.video.framesDecoded)/t.statsInterval,r.nackCount=(i.nackCount-t.stats.inbound.video.nackCount)/t.statsInterval,a.framesDecoded="frames",a.nackCount="packets",t.stats.inbound.video.framesDecoded=i.framesDecoded,t.stats.inbound.video.nackCount=i.nackCount),t.stats.inbound[i.mediaType].bytesReceived=i.bytesReceived,t.stats.inbound[i.mediaType].packetsReceived=i.packetsReceived,t.stats.inbound[i.mediaType].packetsLost=i.packetsLost,(o={"@timestamp":new Date(i.timestamp).toISOString(),exec:e.exec,component:e.component,stream:"webRtc",et_type:s,stream_type:"composed_metrics",units:a})[s]=r,n(JSON.stringify(o))}else"outbound-rtp"===i.type&&!1===i.isRemote&&i.id.toLowerCase().includes("outbound")&&(s="webrtc_outbound_"+i.mediaType+"_"+i.ssrc,r={bytesSent:(i.bytesSent-t.stats.outbound[i.mediaType].bytesSent)/t.statsInterval,packetsSent:(i.packetsSent-t.stats.outbound[i.mediaType].packetsSent)/t.statsInterval},a={bytesSent:"bytes",packetsSent:"packets"},"video"===i.mediaType&&(r.framesEncoded=(i.framesEncoded-t.stats.outbound.video.framesEncoded)/t.statsInterval,a.framesEncoded="frames",t.stats.outbound.video.framesEncoded=i.framesEncoded),t.stats.outbound[i.mediaType].bytesSent=i.bytesSent,t.stats.outbound[i.mediaType].packetsSent=i.packetsSent,(o={"@timestamp":new Date(i.timestamp).toISOString(),exec:e.exec,component:e.component,stream:"webRtc",et_type:s,stream_type:"composed_metrics",units:a})[s]=r,n(JSON.stringify(o)))}));else if(-1!==i.name.indexOf("Chrome")||-1!==i.name.indexOf("Opera"))for(var s=0,r=Object.keys(o);s<r.length;s++){var a=o[r[s]];if("ssrc"===a.type){var c={};if("bytesReceived"in a&&("audio"===a.mediaType&&"audioOutputLevel"in a||"video"===a.mediaType&&"qpSum"in a)){var l="webrtc_inbound_"+a.mediaType+"_"+a.ssrc,d={bytesReceived:(a.bytesReceived-t.stats.inbound[a.mediaType].bytesReceived)/t.statsInterval,jitter:a.googJitterBufferMs,packetsReceived:(a.packetsReceived-t.stats.inbound[a.mediaType].packetsReceived)/t.statsInterval,packetsLost:(a.packetsLost-t.stats.inbound[a.mediaType].packetsLost)/t.statsInterval},u={bytesReceived:"bytes",jitter:"ms",packetsReceived:"packets",packetsLost:"packets"};"video"===a.mediaType&&(d.framesDecoded=(a.framesDecoded-t.stats.inbound.video.framesDecoded)/t.statsInterval,d.nackCount=(a.googNacksSent-t.stats.inbound.video.nackCount)/t.statsInterval,u.framesDecoded="frames",u.nackCount="packets",t.stats.inbound.video.framesDecoded=a.framesDecoded,t.stats.inbound.video.nackCount=a.googNacksSent),t.stats.inbound[a.mediaType].bytesReceived=a.bytesReceived,t.stats.inbound[a.mediaType].packetsReceived=a.packetsReceived,t.stats.inbound[a.mediaType].packetsLost=a.packetsLost,(c={"@timestamp":new Date(a.timestamp).toISOString(),exec:e.exec,component:e.component,stream:"webRtc",et_type:l,stream_type:"composed_metrics",units:u})[l]=d,n(JSON.stringify(c))}else"bytesSent"in a&&(l="webrtc_outbound_"+a.mediaType+"_"+a.ssrc,d={bytesSent:(a.bytesSent-t.stats.outbound[a.mediaType].bytesSent)/t.statsInterval,packetsSent:(a.packetsSent-t.stats.outbound[a.mediaType].packetsSent)/t.statsInterval},u={bytesSent:"bytes",packetsSent:"packets"},"video"===a.mediaType&&(d.framesEncoded=(a.framesEncoded-t.stats.outbound.video.framesEncoded)/t.statsInterval,u.framesEncoded="frames",t.stats.outbound.video.framesEncoded=a.framesEncoded),t.stats.outbound[a.mediaType].bytesSent=a.bytesSent,t.stats.outbound[a.mediaType].packetsSent=a.packetsSent,(c={"@timestamp":new Date(a.timestamp).toISOString(),exec:e.exec,component:e.component,stream:"webRtc",et_type:l,stream_type:"composed_metrics",units:u})[l]=d,n(JSON.stringify(c)))}}}),(function(e){o.log(e)}))},e.prototype.standardizeReport=function(e){o.log(e);var t={};return-1!==i.name.indexOf("Firefox")?(Object.keys(e).forEach((function(t){o.log(e[t])})),e):(e.result().forEach((function(e){var n={id:e.id,timestamp:e.timestamp,type:e.type};e.names().forEach((function(t){n[t]=e.stat(t)})),t[n.id]=n})),t)},e.prototype.getStatsAgnostic=function(e,t,n){var o=this;return-1!==i.name.indexOf("Firefox")?e.getStats(null).then((function(e){var n=o.standardizeReport(e);t(n)})).catch(n):-1!==i.name.indexOf("Chrome")||-1!==i.name.indexOf("Opera")?e.getStats((function(e){var n=o.standardizeReport(e);t(n)}),null,n):void 0},e}();t.WebRtcStats=s},"+ig+":function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0;var s=function(e){function t(t,n,i){var o=e.call(this,!1,t,n)||this;return o.data=i,o}return o(t,e),t.prototype.callDefaultBehavior=function(){},t}(n("hzOQ").Event);t.FilterEvent=s},"+xpX":function(e,t,n){"use strict";n.d(t,"OpenviduSessionComponent",(function(){return Ct})),n.d(t,"OpenviduSessionModule",(function(){return Ut}));var i=n("mrSG"),o=n("fXoL"),s=n("2Vo4"),r=n("z6cu"),a=n("PZzU"),c=n("dNgK"),l=n("bTqV"),d=n("NFeN"),u=n("Qu3c"),g=n("ofXK"),h=n("3Pt+"),p=n("znSr"),m=n("0IaG"),f=n("tk/3"),b=n("tyNb"),v=n("XhcP"),C=n("TIDz"),O=n("kmnG"),S=n("qFsG"),y=n("/t3+"),M=n("XiUz"),x=n("TU8p"),_=n("Xa2L"),P=n("d3UM"),w=n("FKr1"),E=n("JIr8"),k=n("Wp6s"),I=n("zkoq"),T=n("5RNC"),A=n("YUcS");const V=["chatScroll"],R=["chatInput"];function L(e,t){if(1&e&&(o.Wb(0,"div",13),o.Rb(1,"img",14),o.Wb(2,"div",15),o.Wb(3,"div",16),o.Wb(4,"p"),o.Mc(5),o.Vb(),o.Vb(),o.Wb(6,"div",17),o.Rb(7,"span",18),o.Rb(8,"p",19),o.jc(9,"linkify"),o.Vb(),o.Vb(),o.Vb()),2&e){const e=t.$implicit;o.pc("ngClass",e.isLocal?"right":"left"),o.Cb(1),o.pc("src",e.userAvatar,o.Ec),o.Cb(4),o.Nc(e.nickname),o.Cb(3),o.pc("innerHTML",o.kc(9,4,e.message),o.Cc)}}const N=["chatComponent"],D=["sidenav"];function j(e,t){if(1&e){const e=o.Xb();o.Wb(0,"app-room-config",4),o.ec("join",(function(){return o.Bc(e),o.ic(2).onConfigRoomJoin()}))("leaveSession",(function(){return o.Bc(e),o.ic(2).leaveSession()}))("publisherCreated",(function(t){return o.Bc(e),o.ic(2).emitPublisher(t)})),o.Vb()}if(2&e){const e=o.ic(2);o.pc("ovSettings",e.ovSettings)("externalConfig",e.externalConfig)}}function U(e,t){1&e&&o.Rb(0,"div",14)}function W(e,t){if(1&e&&(o.Wb(0,"mat-sidenav",15,16),o.Rb(2,"chat-component",17,18),o.Vb()),2&e){const e=o.ic(3);o.Gb("boundsLight",e.lightTheme),o.qc("mode",e.sidenavMode),o.Cb(2),o.pc("lightTheme",e.lightTheme)}}function B(e,t){if(1&e){const e=o.Xb();o.Wb(0,"div",19),o.Wb(1,"stream-component",20),o.ec("nicknameClicked",(function(t){return o.Bc(e),o.ic(3).onNicknameUpdate(t)}))("replaceScreenTrackClicked",(function(t){return o.Bc(e),o.ic(3).onReplaceScreenTrack(t)}))("toggleVideoSizeClicked",(function(t){return o.Bc(e),o.ic(3).onToggleVideoSize(t)})),o.Vb(),o.Vb()}if(2&e){const e=t.$implicit;o.Jc("display",null!=e.streamManager&&null!=e.streamManager.stream&&e.streamManager.stream.videoActive?"block":"none"),o.Cb(1),o.pc("user",e)("videoSizeBig",e.videoSizeBig)}}function F(e,t){if(1&e){const e=o.Xb();o.Wb(0,"div",21),o.Wb(1,"stream-component",22),o.ec("toggleVideoSizeClicked",(function(t){return o.Bc(e),o.ic(3).onToggleVideoSize(t)})),o.Vb(),o.Vb()}if(2&e){const e=t.$implicit;o.Jc("display",null!=e.streamManager&&null!=e.streamManager.stream&&e.streamManager.stream.videoActive?"block":"none"),o.Cb(1),o.pc("user",e)("videoSizeBig",e.videoSizeBig)}}function z(e,t){if(1&e){const e=o.Xb();o.Wb(0,"div"),o.Kc(1,U,1,0,"div",5),o.Wb(2,"app-toolbar",6),o.ec("camButtonClicked",(function(){return o.Bc(e),o.ic(2).toggleCam()}))("micButtonClicked",(function(){return o.Bc(e),o.ic(2).toggleMic()}))("screenShareClicked",(function(){return o.Bc(e),o.ic(2).toggleScreenShare()}))("layoutButtonClicked",(function(){return o.Bc(e),o.ic(2).toggleSpeakerLayout()}))("leaveSessionButtonClicked",(function(){return o.Bc(e),o.ic(2).leaveSession()})),o.Vb(),o.Wb(3,"mat-sidenav-container",7),o.Kc(4,W,4,4,"mat-sidenav",8),o.jc(5,"hasChat"),o.Wb(6,"mat-sidenav-content",9),o.Wb(7,"div",10),o.Kc(8,B,2,4,"div",11),o.Kc(9,F,2,4,"div",12),o.Vb(),o.Vb(),o.Vb(),o.Rb(10,"app-footer",13),o.Vb()}if(2&e){const e=o.ic(2);o.Cb(1),o.pc("ngIf",e.isConnectionLost),o.Cb(1),o.pc("lightTheme",e.lightTheme)("compact",e.compact)("mySessionId",e.mySessionId)("ovSettings",e.ovSettings)("hasVideoDevices",e.hasVideoDevices)("hasAudioDevices",e.hasAudioDevices)("isWebcamVideoEnabled",e.oVSessionService.hasWebcamVideoActive())("isWebcamAudioEnabled",e.toolbarMicIconEnabled())("isScreenEnabled",e.oVSessionService.isScreenShareEnabled())("isAutoLayout",e.isAutoLayout)("isConnectionLost",e.isConnectionLost),o.Cb(1),o.Gb("boundsLight",e.lightTheme),o.Cb(1),o.pc("ngIf",o.kc(5,21,e.ovSettings)),o.Cb(3),o.Gb("boundsLight",e.lightTheme),o.Cb(1),o.pc("ngForOf",e.localUsers),o.Cb(1),o.pc("ngForOf",e.remoteUsers),o.Cb(1),o.pc("lightTheme",e.lightTheme)("participants",e.remoteUsers)}}function G(e,t){if(1&e&&(o.Wb(0,"div",1),o.Kc(1,j,1,2,"app-room-config",2),o.Kc(2,z,11,23,"div",3),o.Vb()),2&e){const e=o.ic();o.Gb("boundsLight",e.lightTheme),o.Cb(1),o.pc("ngIf",e.showConfigRoomCard),o.Cb(1),o.pc("ngIf",e.localUsers&&e.localUsers.length>0)}}const Q=["videoRoom"];function K(e,t){if(1&e){const e=o.Xb();o.Wb(0,"app-video-room",1,2),o.ec("_session",(function(t){return o.Bc(e),o.ic().emitSession(t)}))("_publisher",(function(t){return o.Bc(e),o.ic().emitPublisher(t)}))("_error",(function(t){return o.Bc(e),o.ic().emitErrorEvent(t)}))("_leaveSession",(function(t){return o.Bc(e),o.ic().emitLeaveSessionEvent(t)}))("_joinSession",(function(t){return o.Bc(e),o.ic().emitJoinSessionEvent(t)})),o.Vb()}if(2&e){const e=o.ic();o.pc("externalConfig",e.angularLibrary)}}const H=["nicknameInput"],q=["streamComponent"];function Y(e,t){1&e&&(o.Wb(0,"span"),o.Mc(1," (edit)"),o.Vb())}function Z(e,t){if(1&e){const e=o.Xb();o.Wb(0,"div",15),o.ec("click",(function(){return o.Bc(e),o.ic(2).toggleNicknameForm()})),o.Wb(1,"span",16),o.Mc(2),o.Vb(),o.Kc(3,Y,2,0,"span",17),o.Vb()}if(2&e){const e=o.ic(2);o.Cb(2),o.Nc(e._user.nickname),o.Cb(1),o.pc("ngIf",!e._user.streamManager.remote)}}function J(e,t){1&e&&(o.Wb(0,"mat-error"),o.Mc(1," Nickname is "),o.Wb(2,"strong"),o.Mc(3,"required"),o.Vb(),o.Vb())}function X(e,t){1&e&&(o.Wb(0,"mat-error"),o.Mc(1," Nickname is "),o.Wb(2,"strong"),o.Mc(3,"too long!"),o.Vb(),o.Vb())}function ee(e,t){if(1&e){const e=o.Xb();o.Wb(0,"div",18),o.Wb(1,"button",19),o.ec("click",(function(){return o.Bc(e),o.ic(2).toggleNicknameForm()})),o.Wb(2,"mat-icon",20),o.Mc(3,"highlight_off"),o.Vb(),o.Vb(),o.Wb(4,"form",21),o.Wb(5,"mat-form-field",22),o.Wb(6,"input",23,24),o.ec("keypress",(function(t){return o.Bc(e),o.ic(2).eventKeyPress(t)})),o.Vb(),o.Kc(8,J,4,0,"mat-error",17),o.Kc(9,X,4,0,"mat-error",17),o.Vb(),o.Vb(),o.Vb()}if(2&e){const e=o.ic(2);o.Gb("fullscreen",e.isFullscreen),o.Cb(6),o.rc("placeholder","Nick: ",e._user.nickname,""),o.pc("formControl",e.nicknameFormControl)("errorStateMatcher",e.matcher),o.Cb(2),o.pc("ngIf",e.nicknameFormControl.hasError("required")),o.Cb(1),o.pc("ngIf",e.nicknameFormControl.hasError("maxlength"))}}function te(e,t){1&e&&(o.Wb(0,"div",25),o.Wb(1,"mat-icon"),o.Mc(2,"mic_off"),o.Vb(),o.Vb())}function ne(e,t){1&e&&(o.Wb(0,"div",26),o.Wb(1,"mat-icon"),o.Mc(2,"videocam_off"),o.Vb(),o.Vb())}function ie(e,t){1&e&&(o.Wb(0,"mat-icon",30),o.Mc(1,"volume_up"),o.Vb())}function oe(e,t){1&e&&(o.Wb(0,"mat-icon",31),o.Mc(1,"volume_off"),o.Vb())}function se(e,t){if(1&e){const e=o.Xb();o.Wb(0,"button",27),o.ec("click",(function(){return o.Bc(e),o.ic(2).toggleSound()})),o.Kc(1,ie,2,0,"mat-icon",28),o.Kc(2,oe,2,0,"mat-icon",29),o.Vb()}if(2&e){const e=o.ic(2);o.Cb(1),o.pc("ngIf",!e.mutedSound),o.Cb(1),o.pc("ngIf",e.mutedSound)}}function re(e,t){if(1&e){const e=o.Xb();o.Wb(0,"button",32),o.ec("click",(function(){return o.Bc(e),o.ic(2).replaceScreenTrack()})),o.Wb(1,"mat-icon",33),o.Mc(2,"picture_in_picture"),o.Vb(),o.Vb()}}function ae(e,t){if(1&e){const e=o.Xb();o.Wb(0,"div",1,2),o.ec("dblclick",(function(){return o.Bc(e),o.ic().toggleVideoSize()})),o.Wb(2,"div",3),o.Kc(3,Z,4,2,"div",4),o.Kc(4,ee,10,7,"div",5),o.Vb(),o.Wb(5,"ov-video",6),o.ec("toggleVideoSizeEvent",(function(t){return o.Bc(e),o.ic().toggleVideoSize(t)})),o.Vb(),o.Wb(6,"div",7),o.Kc(7,te,3,0,"div",8),o.Kc(8,ne,3,0,"div",9),o.Vb(),o.Wb(9,"div",10),o.Wb(10,"button",11),o.ec("click",(function(){return o.Bc(e),o.ic().toggleVideoSize()})),o.Wb(11,"mat-icon"),o.Mc(12),o.Vb(),o.Vb(),o.Wb(13,"button",12),o.ec("click",(function(){return o.Bc(e),o.ic().toggleFullscreen()})),o.Wb(14,"mat-icon"),o.Mc(15),o.Vb(),o.Vb(),o.Kc(16,se,3,2,"button",13),o.Kc(17,re,3,0,"button",14),o.Vb(),o.Vb()}if(2&e){const e=o.ic();o.pc("id","container-"+e._user.streamManager.stream.streamId),o.Cb(2),o.Gb("fullscreen",e.isFullscreen),o.Cb(1),o.pc("ngIf",!e.toggleNickname),o.Cb(1),o.pc("ngIf",e.toggleNickname&&!e._user.streamManager.remote),o.Cb(1),o.pc("streamManager",e._user.streamManager)("mutedSound",e.mutedSound),o.Cb(2),o.pc("ngIf",!e._user.streamManager.stream.audioActive),o.Cb(1),o.pc("ngIf",!e._user.streamManager.stream.videoActive),o.Cb(4),o.Nc(e.videoSizeIcon),o.Cb(3),o.Nc(e.fullscreenIcon),o.Cb(1),o.pc("ngIf",e._user.streamManager.remote),o.Cb(1),o.pc("ngIf",!e._user.streamManager.remote&&e._user.isScreen())}}const ce=["videoElement"];function le(e,t){1&e&&(o.Wb(0,"mat-icon",14),o.Mc(1,"mic"),o.Vb())}function de(e,t){1&e&&(o.Wb(0,"mat-icon",15),o.Mc(1,"mic_off"),o.Vb())}function ue(e,t){if(1&e){const e=o.Xb();o.Wb(0,"button",11),o.ec("click",(function(){return o.Bc(e),o.ic().toggleMicrophone()})),o.Kc(1,le,2,0,"mat-icon",12),o.Kc(2,de,2,0,"mat-icon",13),o.Vb()}if(2&e){const e=o.ic();o.pc("disabled",e.isConnectionLost),o.Cb(1),o.pc("ngIf",e.isWebcamAudioEnabled),o.Cb(1),o.pc("ngIf",!e.isWebcamAudioEnabled)}}function ge(e,t){1&e&&(o.Wb(0,"mat-icon",19),o.Mc(1,"videocam"),o.Vb())}function he(e,t){1&e&&(o.Wb(0,"mat-icon",20),o.Mc(1,"videocam_off"),o.Vb())}function pe(e,t){if(1&e){const e=o.Xb();o.Wb(0,"button",16),o.ec("click",(function(){return o.Bc(e),o.ic().toggleCamera()})),o.Kc(1,ge,2,0,"mat-icon",17),o.Kc(2,he,2,0,"mat-icon",18),o.Vb()}if(2&e){const e=o.ic();o.pc("disabled",e.isConnectionLost),o.Cb(1),o.pc("ngIf",e.isWebcamVideoEnabled),o.Cb(1),o.pc("ngIf",!e.isWebcamVideoEnabled)}}function me(e,t){1&e&&(o.Wb(0,"mat-icon",24),o.Mc(1,"stop_screen_share"),o.Vb())}function fe(e,t){1&e&&(o.Wb(0,"mat-icon",25),o.Mc(1,"screen_share"),o.Vb())}function be(e,t){if(1&e){const e=o.Xb();o.Wb(0,"button",21),o.ec("click",(function(){return o.Bc(e),o.ic().toggleScreenShare()})),o.Kc(1,me,2,0,"mat-icon",22),o.Kc(2,fe,2,0,"mat-icon",23),o.Vb()}if(2&e){const e=o.ic();o.pc("disabled",e.isConnectionLost),o.Cb(1),o.pc("ngIf",!e.isScreenEnabled),o.Cb(1),o.pc("ngIf",e.isScreenEnabled)}}function ve(e,t){if(1&e){const e=o.Xb();o.Wb(0,"button",26),o.ec("click",(function(){return o.Bc(e),o.ic().toggleFullscreen()})),o.Wb(1,"mat-icon",27),o.Mc(2),o.Vb(),o.Vb()}if(2&e){const e=o.ic();o.pc("disabled",e.isConnectionLost),o.Cb(2),o.Nc(e.fullscreenIcon)}}function Ce(e,t){1&e&&(o.Wb(0,"mat-icon",30),o.Mc(1,"voice_over_off"),o.Vb())}function Oe(e,t){1&e&&(o.Wb(0,"mat-icon",31),o.Mc(1,"record_voice_over"),o.Vb())}function Se(e,t){if(1&e){const e=o.Xb();o.Wb(0,"button",26),o.ec("click",(function(){return o.Bc(e),o.ic().toggleSpeakerLayout()})),o.Kc(1,Ce,2,0,"mat-icon",28),o.Kc(2,Oe,2,0,"mat-icon",29),o.Vb()}if(2&e){const e=o.ic();o.pc("disabled",e.isConnectionLost),o.Cb(1),o.pc("ngIf",!e.isAutoLayout),o.Cb(1),o.pc("ngIf",e.isAutoLayout)}}function ye(e,t){if(1&e){const e=o.Xb();o.Wb(0,"button",32),o.ec("click",(function(){return o.Bc(e),o.ic().leaveSession()})),o.Wb(1,"mat-icon",33),o.Mc(2,"power_settings_new"),o.Vb(),o.Vb()}}function Me(e,t){if(1&e){const e=o.Xb();o.Wb(0,"button",26),o.ec("click",(function(){return o.Bc(e),o.ic().toggleChat()})),o.Wb(1,"mat-icon",34),o.Mc(2,"chat"),o.Vb(),o.Vb()}if(2&e){const e=o.ic();o.pc("disabled",e.isConnectionLost),o.Cb(1),o.qc("matBadge",e.newMessagesNum),o.pc("matBadgeHidden",0===e.newMessagesNum)}}const xe=function(e,t){return{titleContent:!0,titleContentLight:e,titleContentDark:t}};function _e(e,t){if(1&e&&(o.Wb(0,"div",3),o.Wb(1,"span",4),o.Mc(2),o.Vb(),o.Vb()),2&e){const e=o.ic();o.pc("ngClass",o.uc(2,xe,e.lightTheme,!e.lightTheme)),o.Cb(2),o.Nc(e.sessionId)}}const Pe=["bodyCard"];function we(e,t){if(1&e&&o.Rb(0,"ov-video",38),2&e){const e=o.ic(),t=e.$implicit,n=e.index,i=o.ic(2);o.pc("streamManager",t.streamManager)("className",i.localUsers.length>1&&0===n?"ovVideoSmall":"")}}function Ee(e,t){1&e&&(o.Wb(0,"div",39),o.Wb(1,"span"),o.Mc(2,"Oops! Camera is not available"),o.Vb(),o.Vb())}function ke(e,t){if(1&e&&(o.Wb(0,"div"),o.Kc(1,we,1,2,"ov-video",36),o.Kc(2,Ee,3,0,"div",37),o.Vb()),2&e){const e=t.$implicit,n=o.ic(2);o.Cb(1),o.pc("ngIf",e.isCamera()&&n.hasVideoDevices||e.isScreen()),o.Cb(1),o.pc("ngIf",e.isCamera()&&!n.hasVideoDevices)}}function Ie(e,t){1&e&&(o.Wb(0,"div",46),o.Wb(1,"span"),o.Mc(2,"Press Avatar Button"),o.Vb(),o.Vb())}function Te(e,t){if(1&e&&o.Rb(0,"img",47),2&e){const e=o.ic(3);o.pc("src",e.videoAvatar,o.Ec)}}function Ae(e,t){1&e&&o.Rb(0,"mat-spinner",48),2&e&&o.pc("diameter",70)}function Ve(e,t){if(1&e&&o.Rb(0,"img",47),2&e){const e=o.ic(3);o.pc("src",e.randomAvatar,o.Ec)}}function Re(e,t){if(1&e){const e=o.Xb();o.Wb(0,"div",40),o.Wb(1,"div",41),o.Wb(2,"div",42),o.ec("click",(function(){return o.Bc(e),o.ic(2).setAvatar("video")})),o.Kc(3,Ie,3,0,"div",43),o.Kc(4,Te,1,1,"img",44),o.Vb(),o.Wb(5,"div",42),o.ec("click",(function(){return o.Bc(e),o.ic(2).setAvatar("random")})),o.Kc(6,Ae,1,1,"mat-spinner",45),o.Kc(7,Ve,1,1,"img",44),o.Vb(),o.Vb(),o.Vb()}if(2&e){const e=o.ic(2);o.Cb(2),o.Jc("background","video"===e.avatarSelected?"lightgreen":"transparent",o.Jb),o.Cb(1),o.pc("ngIf",!e.videoAvatar),o.Cb(1),o.pc("ngIf",e.videoAvatar),o.Cb(1),o.Jc("background","random"===e.avatarSelected?"lightgreen":"transparent",o.Jb),o.Cb(1),o.pc("ngIf",!e.randomAvatar),o.Cb(1),o.pc("ngIf",e.randomAvatar)}}function Le(e,t){1&e&&(o.Wb(0,"mat-error"),o.Mc(1," Nickname is "),o.Wb(2,"strong"),o.Mc(3,"required"),o.Vb(),o.Vb())}function Ne(e,t){1&e&&(o.Wb(0,"mat-error"),o.Mc(1," Nickname is "),o.Wb(2,"strong"),o.Mc(3,"too long!"),o.Vb(),o.Vb())}function De(e,t){1&e&&(o.Wb(0,"mat-icon",55),o.Mc(1,"mic"),o.Vb())}function je(e,t){1&e&&(o.Wb(0,"mat-icon",56),o.Mc(1,"mic_off"),o.Vb())}function Ue(e,t){if(1&e&&(o.Wb(0,"mat-option",57),o.Mc(1),o.Vb()),2&e){const e=t.$implicit;o.pc("value",e.device),o.Cb(1),o.Oc(" ",e.label," ")}}function We(e,t){if(1&e){const e=o.Xb();o.Wb(0,"div",24),o.Wb(1,"div",25),o.Wb(2,"div",26),o.Wb(3,"button",49),o.ec("click",(function(){return o.Bc(e),o.ic(2).toggleMic()})),o.Kc(4,De,2,0,"mat-icon",50),o.Kc(5,je,2,0,"mat-icon",51),o.Vb(),o.Vb(),o.Wb(6,"div",29),o.Wb(7,"mat-form-field",52),o.Wb(8,"mat-select",53),o.ec("selectionChange",(function(t){return o.Bc(e),o.ic(2).onMicrophoneSelected(t)})),o.Kc(9,Ue,2,2,"mat-option",54),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Vb()}if(2&e){const e=o.ic(2);o.Cb(4),o.pc("ngIf",e.isAudioActive),o.Cb(1),o.pc("ngIf",!e.isAudioActive),o.Cb(3),o.pc("ngModel",e.isAudioActive&&e.micSelected?e.micSelected.device:"None"),o.Cb(1),o.pc("ngForOf",e.microphones)}}function Be(e,t){1&e&&(o.Wb(0,"mat-icon",62),o.Mc(1,"videocam"),o.Vb())}function Fe(e,t){1&e&&(o.Wb(0,"mat-icon",63),o.Mc(1,"videocam_off"),o.Vb())}function ze(e,t){if(1&e&&(o.Wb(0,"mat-option",57),o.Mc(1),o.Vb()),2&e){const e=t.$implicit;o.pc("value",e.device),o.Cb(1),o.Oc(" ",e.label," ")}}function Ge(e,t){if(1&e){const e=o.Xb();o.Wb(0,"div",24),o.Wb(1,"div",25),o.Wb(2,"div",26),o.Wb(3,"button",58),o.ec("click",(function(){return o.Bc(e),o.ic(2).toggleCam()})),o.Kc(4,Be,2,0,"mat-icon",59),o.Kc(5,Fe,2,0,"mat-icon",60),o.Vb(),o.Vb(),o.Wb(6,"div",29),o.Wb(7,"mat-form-field",52),o.Wb(8,"mat-select",61),o.ec("selectionChange",(function(t){return o.Bc(e),o.ic(2).onCameraSelected(t)})),o.Kc(9,ze,2,2,"mat-option",54),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Vb()}if(2&e){const e=o.ic(2);o.Cb(4),o.pc("ngIf",e.isVideoActive),o.Cb(1),o.pc("ngIf",!e.isVideoActive),o.Cb(3),o.pc("ngModel",e.isVideoActive&&e.camSelected?e.camSelected.device:"None"),o.Cb(1),o.pc("ngForOf",e.cameras)}}function Qe(e,t){1&e&&(o.Wb(0,"mat-icon",68),o.Mc(1,"screen_share"),o.Vb())}function Ke(e,t){1&e&&(o.Wb(0,"mat-icon",69),o.Mc(1," stop_screen_share"),o.Vb())}function He(e,t){if(1&e){const e=o.Xb();o.Wb(0,"div",24),o.Wb(1,"div",25),o.Wb(2,"div",26),o.Wb(3,"button",64),o.ec("click",(function(){return o.Bc(e),o.ic(2).toggleScreenShare()})),o.Kc(4,Qe,2,0,"mat-icon",65),o.Kc(5,Ke,2,0,"mat-icon",66),o.Vb(),o.Vb(),o.Wb(6,"div",29),o.Wb(7,"mat-form-field",52),o.Rb(8,"input",67),o.Vb(),o.Vb(),o.Vb(),o.Vb()}if(2&e){const e=o.ic(2);o.Cb(4),o.pc("ngIf",e.oVSessionService.isScreenShareEnabled()),o.Cb(1),o.pc("ngIf",!e.oVSessionService.isScreenShareEnabled()),o.Cb(3),o.pc("ngModel",e.oVSessionService.isScreenShareEnabled()?"Screen":"None")}}function qe(e,t){if(1&e){const e=o.Xb();o.Wb(0,"div",2),o.Wb(1,"div",3),o.Wb(2,"div",4),o.Wb(3,"div",5),o.Wb(4,"div",6),o.Rb(5,"img",7),o.Vb(),o.Wb(6,"h3",8),o.Mc(7),o.Vb(),o.Wb(8,"button",9),o.ec("click",(function(){return o.Bc(e),o.ic().close()})),o.Wb(9,"mat-icon",10),o.Mc(10,"highlight_off"),o.Vb(),o.Vb(),o.Vb(),o.Wb(11,"div",11,12),o.Wb(13,"div",13),o.Wb(14,"div",14),o.Wb(15,"div",15),o.Kc(16,ke,3,2,"div",16),o.Vb(),o.Wb(17,"div",17),o.Wb(18,"button",18),o.ec("click",(function(){return o.Bc(e),o.ic().takePhoto()})),o.Wb(19,"mat-icon",19),o.Mc(20,"photo_camera"),o.Vb(),o.Wb(21,"span",20),o.Mc(22,"Capture Avatar"),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Wb(23,"div",21),o.Wb(24,"div",22),o.Wb(25,"h3"),o.Mc(26,"Avatar"),o.Vb(),o.Vb(),o.Kc(27,Re,8,8,"div",23),o.Wb(28,"div",24),o.Wb(29,"div",25),o.Wb(30,"div",26),o.Wb(31,"button",27),o.ec("click",(function(){return o.Bc(e),o.ic().setNicknameForm()})),o.Wb(32,"mat-icon",28),o.Mc(33,"person"),o.Vb(),o.Vb(),o.Vb(),o.Wb(34,"div",29),o.Wb(35,"form",30),o.Wb(36,"mat-form-field"),o.Wb(37,"input",31),o.ec("keypress",(function(t){return o.Bc(e),o.ic().eventKeyPress(t)})),o.Vb(),o.Kc(38,Le,4,0,"mat-error",32),o.Kc(39,Ne,4,0,"mat-error",32),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Kc(40,We,10,4,"div",33),o.jc(41,"hasAudio"),o.Kc(42,Ge,10,4,"div",33),o.jc(43,"hasVideo"),o.Kc(44,He,9,3,"div",33),o.jc(45,"hasScreenSharing"),o.Vb(),o.Vb(),o.Vb(),o.Wb(46,"div",34),o.Wb(47,"button",35),o.ec("click",(function(){return o.Bc(e),o.ic().joinSession()})),o.Mc(48,"JOIN"),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Vb()}if(2&e){const e=o.ic();o.Cb(7),o.Nc(e.mySessionId),o.Cb(9),o.pc("ngForOf",e.localUsers),o.Cb(11),o.pc("ngIf",e.hasVideoDevices),o.Cb(10),o.pc("formControl",e.nicknameFormControl)("errorStateMatcher",e.matcher),o.Cb(1),o.pc("ngIf",e.nicknameFormControl.hasError("required")),o.Cb(1),o.pc("ngIf",e.nicknameFormControl.hasError("maxlength")),o.Cb(1),o.pc("ngIf",e.hasAudioDevices&&o.kc(41,10,e.ovSettings)),o.Cb(2),o.pc("ngIf",e.hasVideoDevices&&o.kc(43,12,e.ovSettings)),o.Cb(2),o.pc("ngIf",o.kc(45,14,e.ovSettings))}}const Ye=function(e){return{display:e}};class Ze{updateLayout(){setTimeout(()=>{if("none"===this.layoutContainer.style.display)return;let e=this.layoutContainer.id;e||(e="OT_"+this.cheapUUID(),this.layoutContainer.id=e);const t=this.getHeight(this.layoutContainer)-this.getCSSNumber(this.layoutContainer,"borderTop")-this.getCSSNumber(this.layoutContainer,"borderBottom"),n=this.getWidth(this.layoutContainer)-this.getCSSNumber(this.layoutContainer,"borderLeft")-this.getCSSNumber(this.layoutContainer,"borderRight"),i=t/n;let o=0,s=0,r=0,a=0;const c=Array.prototype.filter.call(this.layoutContainer.querySelectorAll("#"+e+">."+this.opts.bigClass),this.filterDisplayNone),l=Array.prototype.filter.call(this.layoutContainer.querySelectorAll("#"+e+">*:not(."+this.opts.bigClass+")"),this.filterDisplayNone);if(c.length>0&&l.length>0){let e,d;i>this.getVideoRatio(c[0])?(e=n,d=Math.floor(t*this.opts.bigPercentage),s=d,r=t-s):(d=t,e=Math.floor(n*this.opts.bigPercentage),o=e,a=n-o),this.opts.bigFirst?(this.arrange(c,e,d,0,0,this.opts.bigFixedRatio,this.opts.bigMinRatio,this.opts.bigMaxRatio,this.opts.animate),this.arrange(l,n-o,t-s,o,s,this.opts.fixedRatio,this.opts.minRatio,this.opts.maxRatio,this.opts.animate)):(this.arrange(l,n-o,t-s,0,0,this.opts.fixedRatio,this.opts.minRatio,this.opts.maxRatio,this.opts.animate),this.arrange(c,e,d,a,r,this.opts.bigFixedRatio,this.opts.bigMinRatio,this.opts.bigMaxRatio,this.opts.animate))}else c.length>0&&0===l.length?this.arrange(c,n,t,0,0,this.opts.bigFixedRatio,this.opts.bigMinRatio,this.opts.bigMaxRatio,this.opts.animate):this.arrange(l,n-o,t-s,o,s,this.opts.fixedRatio,this.opts.minRatio,this.opts.maxRatio,this.opts.animate)},50)}initLayoutContainer(e,t){this.opts={maxRatio:null!=t.maxRatio?t.maxRatio:1.5,minRatio:null!=t.minRatio?t.minRatio:9/16,fixedRatio:null!=t.fixedRatio&&t.fixedRatio,animate:null!=t.animate&&t.animate,bigClass:null!=t.bigClass?t.bigClass:"OT_big",bigPercentage:null!=t.bigPercentage?t.bigPercentage:.8,bigFixedRatio:null!=t.bigFixedRatio&&t.bigFixedRatio,bigMaxRatio:null!=t.bigMaxRatio?t.bigMaxRatio:1.5,bigMinRatio:null!=t.bigMinRatio?t.bigMinRatio:9/16,bigFirst:null==t.bigFirst||t.bigFirst},this.layoutContainer="string"==typeof e?$(e):e}setLayoutOptions(e){this.opts=e}fixAspectRatio(e,t){const n=e.querySelector(".OT_root");if(n){const e=n.style.width;n.style.width=t+"px",n.style.width=e||""}}positionElement(e,t,n,i,o,s){const r={left:t+"px",top:n+"px",width:i+"px",height:o+"px"};this.fixAspectRatio(e,i),s&&$?($(e).stop(),$(e).animate(r,s.duration||200,s.easing||"swing",()=>{this.fixAspectRatio(e,i),s.complete&&s.complete.call(this)})):$(e).css(r),this.fixAspectRatio(e,i)}getVideoRatio(e){if(!e)return 3/4;const t=e.querySelector("video");return t&&t.videoHeight&&t.videoWidth?t.videoHeight/t.videoWidth:e.videoHeight&&e.videoWidth?e.videoHeight/e.videoWidth:3/4}getCSSNumber(e,t){const n=$(e).css(t);return n?parseInt(n,10):0}cheapUUID(){return(1e8*Math.random()).toFixed(0)}getHeight(e){const t=$(e).css("height");return t?parseInt(t,10):0}getWidth(e){const t=$(e).css("width");return t?parseInt(t,10):0}getBestDimensions(e,t,n,i,o,s){let r,a,c,l,d,u,g;for(let h=1;h<=n;h++){const p=h,m=Math.ceil(n/p);u=Math.floor(o/m),d=Math.floor(i/p),g=u/d,g>t?(g=t,u=d*g):g<e&&(g=e,d=u/g);const f=d*u*n;(void 0===r||f>r)&&(r=f,s=u,l=d,a=p,c=m)}return{maxArea:r,targetCols:a,targetRows:c,targetHeight:s,targetWidth:l,ratio:s/l}}arrange(e,t,n,i,o,s,r,a,c){let l;const d=e.length;let u;if(s){const i=this.getVideoRatio(e.length>0?e[0]:null);u=this.getBestDimensions(i,i,d,t,n,l)}else u=this.getBestDimensions(r,a,d,t,n,l);let g=0,h=0;const p=[];let m;for(let v=0;v<e.length;v++){v%u.targetCols==0&&(m={children:[],width:0,height:0},p.push(m));const t=e[v];m.children.push(t);let n=u.targetWidth;l=u.targetHeight,s&&(n=l/this.getVideoRatio(t)),m.width+=n,m.height=l}let f=0,b=0;for(let v=0;v<p.length;v++)m=p[v],m.width>t?(m.height=Math.floor(m.height*(t/m.width)),m.width=t):m.width<t&&(b+=1),f+=m.height;if(f<n&&b>0){let e=n-f;f=0;for(let n=0;n<p.length;n++){if(m=p[n],m.width<t){let n=e/b;n/m.height>(t-m.width)/m.width&&(n=Math.floor((t-m.width)/m.width*m.height)),m.width+=Math.floor(n/m.height*m.width),m.height+=n,e-=n,b-=1}f+=m.height}}h=(n-f)/2;for(let v=0;v<p.length;v++){m=p[v],g=(t-m.width)/2;for(let e=0;e<m.children.length;e++){const t=m.children[e];let n=u.targetWidth;l=m.height,s&&(n=Math.floor(l/this.getVideoRatio(t))),t.style.position="absolute";const r=n-this.getCSSNumber(t,"paddingLeft")-this.getCSSNumber(t,"paddingRight")-this.getCSSNumber(t,"marginLeft")-this.getCSSNumber(t,"marginRight")-this.getCSSNumber(t,"borderLeft")-this.getCSSNumber(t,"borderRight"),a=l-this.getCSSNumber(t,"paddingTop")-this.getCSSNumber(t,"paddingBottom")-this.getCSSNumber(t,"marginTop")-this.getCSSNumber(t,"marginBottom")-this.getCSSNumber(t,"borderTop")-this.getCSSNumber(t,"borderBottom");this.positionElement(t,g+i,h+o,r,a,c),g+=n}h+=l}}filterDisplayNone(e){return"none"!==e.style.display}}var Je=function(e){return e.CAMERA="CAMERA",e.SCREEN="SCREEN",e.CUSTOM="CUSTOM",e}({}),Xe=function(e){return e.WINDOW="window",e.SCREEN="screen",e}({});class $e{constructor(e,t,n){this.connectionId=e||"",this.nickname=n||"OpenVidu",this.streamManager=t||null}isAudioActive(){var e,t;return null===(t=null===(e=this.streamManager)||void 0===e?void 0:e.stream)||void 0===t?void 0:t.audioActive}isVideoActive(){var e,t;return null===(t=null===(e=this.streamManager)||void 0===e?void 0:e.stream)||void 0===t?void 0:t.videoActive}getConnectionId(){var e,t,n;return null===(n=null===(t=null===(e=this.streamManager)||void 0===e?void 0:e.stream)||void 0===t?void 0:t.connection)||void 0===n?void 0:n.connectionId}getNickname(){return this.nickname}getStreamManager(){return this.streamManager}getAvatar(){return this.videoAvatar?this.videoAvatar.toDataURL():this.randomAvatar}isLocal(){return!this.isRemote()}isRemote(){var e;return null===(e=this.streamManager)||void 0===e?void 0:e.remote}isScreen(){var e,t;return(null===(t=null===(e=this.streamManager)||void 0===e?void 0:e.stream)||void 0===t?void 0:t.typeOfVideo)===Je.SCREEN}isCamera(){var e,t;return(null===(t=null===(e=this.streamManager)||void 0===e?void 0:e.stream)||void 0===t?void 0:t.typeOfVideo)===Je.CAMERA||this.isLocal()&&!this.isScreen()}setStreamManager(e){this.streamManager=e}setNickname(e){this.nickname=e}isVideoSizeBig(){return this.videoSizeBig}setVideoSizeBig(e){this.videoSizeBig=e}setUserAvatar(e){return new Promise(t=>{if(e)this.randomAvatar=e,t();else{this.createVideoAvatar();const e=document.getElementById("video-"+this.getStreamManager().stream.streamId);this.videoAvatar.getContext("2d").drawImage(e,200,120,285,285,0,0,100,100),t()}})}removeVideoAvatar(){this.videoAvatar=null}createVideoAvatar(){this.videoAvatar=document.createElement("canvas"),this.videoAvatar.className="user-img",this.videoAvatar.width=100,this.videoAvatar.height=100}}var et=function(e){return e.RANDOM="random",e.VIDEO="video",e}({});let tt=(()=>{let e=class{constructor(){this.log=window.console,this.LOG_FNS=[],this.MSG_PREFIXES=[["[","]"],["[","] WARN: "],["[","] ERROR: "]],this.LOG_FNS=[this.log.log,this.log.warn,this.log.error]}get(e){const t=this.LOG_FNS.map((t,n)=>t.bind(this.log,this.MSG_PREFIXES[n][0]+e+this.MSG_PREFIXES[n][1]));return{d:function(...e){t[0].apply(this.log,arguments)},w:function(...e){t[1].apply(this.log,arguments)},e:function(...e){t[2].apply(this.log,arguments)}}}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Object(o.Mb)({factory:function(){return new e},token:e,providedIn:"root"}),e})(),nt=(()=>{let e=class{constructor(e){this.loggerSrv=e,this._OVUsers=new s.a([]),this.OV=null,this.OVScreen=null,this.webcamSession=null,this.screenSession=null,this.webcamUser=null,this.screenUser=null,this.videoSource=void 0,this.audioSource=void 0,this.sessionId="",this.screenMediaStream=null,this.webcamMediaStream=null,this.log=this.loggerSrv.get("OpenViduSessionService"),this.OV=new a.OpenVidu,this.OVScreen=new a.OpenVidu,this.OVUsers=this._OVUsers.asObservable(),this.webcamUser=new $e,this._OVUsers.next([this.webcamUser])}initSessions(){this.webcamSession=this.OV.initSession(),this.screenSession=this.OVScreen.initSession()}getWebcamSession(){return this.webcamSession}getConnectedUserSession(){return this.isWebCamEnabled()?this.getWebcamSession():this.getScreenSession()}getScreenSession(){return this.screenSession}connectWebcamSession(e){return Object(i.a)(this,void 0,void 0,(function*(){e&&(yield this.webcamSession.connect(e,{clientData:this.getWebcamUserName(),avatar:this.getWebCamAvatar()}))}))}connectScreenSession(e){return Object(i.a)(this,void 0,void 0,(function*(){e&&(yield this.screenSession.connect(e,{clientData:this.getScreenUserName(),avatar:this.getWebCamAvatar()}))}))}publishWebcam(){return Object(i.a)(this,void 0,void 0,(function*(){if(this.webcamSession.capabilities.publish){const e=this.webcamUser.getStreamManager();if(e)return yield this.webcamSession.publish(e)}this.log.w("User cannot publish")}))}publishScreen(){return Object(i.a)(this,void 0,void 0,(function*(){if(this.screenSession.capabilities.publish){const e=this.screenUser.getStreamManager();if(e)return yield this.screenSession.publish(e)}this.log.w("User cannot publish")}))}unpublishWebcam(){const e=this.webcamUser.getStreamManager();e&&(this.publishScreenAudio(this.hasWebcamAudioActive()),this.webcamSession.unpublish(e))}unpublishScreen(){const e=this.screenUser.getStreamManager();e&&this.screenSession.unpublish(e)}enableWebcamUser(){this._OVUsers.next([this.webcamUser,this.screenUser])}disableWebcamUser(){this._OVUsers.next([this.screenUser])}enableScreenUser(e){var t,n;const i=null===(n=null===(t=this.screenSession)||void 0===t?void 0:t.connection)||void 0===n?void 0:n.connectionId;this.screenUser=new $e(i,e,this.getScreenUserName()),this.screenUser.setUserAvatar(this.webcamUser.getAvatar()),this.isWebCamEnabled()?this._OVUsers.next([this.webcamUser,this.screenUser]):(this.log.d("ENABLED SCREEN SHARE"),this._OVUsers.next([this.screenUser]))}disableScreenUser(){this.destryoScreenUser(),this._OVUsers.next([this.webcamUser])}initCamPublisher(e,t){const n=this.initPublisher(e,t);return this.webcamUser.setStreamManager(n),n}publishVideo(e){this.webcamUser.getStreamManager().publishVideo(e),this._OVUsers.next(this._OVUsers.getValue())}publishWebcamAudio(e){var t;const n=null===(t=this.webcamUser)||void 0===t?void 0:t.getStreamManager();n&&n.publishAudio(e)}publishScreenAudio(e){var t;const n=null===(t=this.screenUser)||void 0===t?void 0:t.getStreamManager();n&&n.publishAudio(e)}replaceTrack(e,t,n=!0){return new Promise((i,o)=>{e&&(this.log.d("Replacing video track "+e),this.videoSource=e),t&&(this.log.d("Replacing audio track "+t),this.audioSource=t),this.destryoWebcamUser();const s=this.createProperties(this.videoSource,this.audioSource,this.hasWebcamVideoActive(),this.hasWebcamAudioActive(),n),r=this.initCamPublisher(void 0,s);r.once("streamPlaying",()=>{this.webcamUser.setStreamManager(r),i()}),r.once("accessDenied",()=>{o()})})}replaceScreenTrack(){return Object(i.a)(this,void 0,void 0,(function*(){const e=Xe.SCREEN,t=!this.isWebCamEnabled(),n=this.createProperties(e,void 0,!0,t,!1);this.stopScreenTracks(),this.screenMediaStream=yield this.OVScreen.getUserMedia(n),yield this.screenUser.getStreamManager().replaceTrack(this.screenMediaStream.getVideoTracks()[0])}))}initScreenPublisher(e,t){return this.log.d("init screen properties",t),this.initPublisher(e,t)}destroyUsers(){this.destryoScreenUser(),this.destryoWebcamUser()}disconnect(){this.webcamSession&&(this.log.d("Disconnecting screen session"),this.webcamSession.disconnect(),this.webcamSession=null),this.screenSession&&setTimeout(()=>{this.log.d("Disconnecting screen session"),this.screenSession.disconnect(),this.stopScreenTracks(),this.screenSession=null},50),this.destroyUsers(),this.screenUser=null,this.videoSource=void 0,this.audioSource=void 0,this.sessionId="",this.webcamUser=new $e,this._OVUsers.next([this.webcamUser])}isWebCamEnabled(){return this._OVUsers.getValue()[0].isCamera()}isOnlyScreenConnected(){return this._OVUsers.getValue()[0].isScreen()}hasWebcamVideoActive(){return this.webcamUser.isVideoActive()}hasWebcamAudioActive(){var e;return null===(e=this.webcamUser)||void 0===e?void 0:e.isAudioActive()}hasScreenAudioActive(){var e;return null===(e=this.screenUser)||void 0===e?void 0:e.isAudioActive()}areBothConnected(){return 2===this._OVUsers.getValue().length}isOnlyWebcamConnected(){return this.isWebCamEnabled()&&!this.areBothConnected()}isScreenShareEnabled(){return this.areBothConnected()||this.isOnlyScreenConnected()}isMyOwnConnection(e){var t,n;return(null===(t=this.webcamUser)||void 0===t?void 0:t.getConnectionId())===e||(null===(n=this.screenUser)||void 0===n?void 0:n.getConnectionId())===e}createProperties(e,t,n,i,o){return{videoSource:e,audioSource:t,publishVideo:n,publishAudio:i,mirror:o}}setSessionId(e){this.sessionId=e}getSessionId(){return this.sessionId}setWebcamAvatar(){this.webcamUser.setUserAvatar()}setAvatar(e,t){(e===et.RANDOM&&t||et.VIDEO&&t)&&e===et.RANDOM&&this.webcamUser.setUserAvatar(t)}setWebcamName(e){this.webcamUser.setNickname(e)}getWebCamAvatar(){return this.webcamUser.getAvatar()}getWebcamUserName(){return this.webcamUser.getNickname()}getScreenUserName(){return this.getWebcamUserName()+"_SCREEN"}resetUsersZoom(){var e,t;null===(e=this.webcamUser)||void 0===e||e.setVideoSizeBig(!1),null===(t=this.screenUser)||void 0===t||t.setVideoSizeBig(!1)}toggleZoom(e){this.webcamUser.getConnectionId()!==e?this.screenUser.setVideoSizeBig(!this.screenUser.isVideoSizeBig()):this.webcamUser.setVideoSizeBig(!this.webcamUser.isVideoSizeBig())}initPublisher(e,t){return this.OV.initPublisher(e,t)}destryoScreenUser(){var e;(null===(e=this.screenUser)||void 0===e?void 0:e.getStreamManager())&&(this.screenUser.getStreamManager().stream.disposeWebRtcPeer(),this.screenUser.getStreamManager().stream.disposeMediaStream())}destryoWebcamUser(){var e;(null===(e=this.webcamUser)||void 0===e?void 0:e.getStreamManager())&&(this.webcamUser.getStreamManager().stream.disposeWebRtcPeer(),this.webcamUser.getStreamManager().stream.disposeMediaStream())}stopScreenTracks(){this.screenMediaStream&&(this.stopAudioTracks(this.screenMediaStream),this.stopVideoTracks(this.screenMediaStream))}stopAudioTracks(e){var t,n;null===(t=e)||void 0===t||t.getAudioTracks().forEach(e=>{e.stop(),e.enabled=!1}),null===(n=this.webcamMediaStream)||void 0===n||n.getAudioTracks().forEach(e=>{e.stop()})}stopVideoTracks(e){var t;null===(t=e)||void 0===t||t.getVideoTracks().forEach(e=>{e.stop()})}};return e.\u0275fac=function(t){return new(t||e)(o.ac(tt))},e.\u0275prov=Object(o.Mb)({factory:function(){return new e(Object(o.ac)(tt))},token:e,providedIn:"root"}),e})(),it=(()=>{let e=class{constructor(e){this.loggerSrv=e,this._remoteUsers=new s.a([]),this.users=[],this.log=this.loggerSrv.get("RemoteService"),this.remoteUsers=this._remoteUsers.asObservable()}updateUsers(){this._remoteUsers.next(this.users)}add(e,t){var n,i;let o="",s="";const r=e.stream.connection.connectionId;try{o=null===(n=JSON.parse(e.stream.connection.data))||void 0===n?void 0:n.clientData,s=null===(i=JSON.parse(e.stream.connection.data))||void 0===i?void 0:i.avatar}catch(c){o="Unknown"}const a=new $e(r,t,o);a.setUserAvatar(s),this.users.push(a),this.updateUsers()}removeUserByConnectionId(e){this.log.w("Deleting user: ",e);const t=this.getRemoteUserByConnectionId(e),n=this.users.indexOf(t,0);n>-1&&(this.users.splice(n,1),this.updateUsers())}someoneIsSharingScreen(){return this.users.some(e=>e.isScreen())}toggleUserZoom(e){const t=this.getRemoteUserByConnectionId(e);t.setVideoSizeBig(!t.isVideoSizeBig())}resetUsersZoom(){this.users.forEach(e=>e.setVideoSizeBig(!1))}setUserZoom(e,t){var n;null===(n=this.getRemoteUserByConnectionId(e))||void 0===n||n.setVideoSizeBig(t)}getRemoteUserByConnectionId(e){return this.users.find(t=>t.getConnectionId()===e)}updateNickname(e,t){var n;null===(n=this.getRemoteUserByConnectionId(e))||void 0===n||n.setNickname(t),this._remoteUsers.next(this.users)}clean(){this._remoteUsers=new s.a([]),this.remoteUsers=this._remoteUsers.asObservable(),this.users=[]}getUserAvatar(e){return this.getRemoteUserByConnectionId(e).getAvatar()}};return e.\u0275fac=function(t){return new(t||e)(o.ac(tt))},e.\u0275prov=Object(o.Mb)({factory:function(){return new e(Object(o.ac)(tt))},token:e,providedIn:"root"}),e})(),ot=(()=>{let e=class{constructor(e){this.snackBar=e}newMessage(e,t){this.launchNotification(e+" sent a message","OPEN","messageSnackbar",3e3).onAction().subscribe(()=>{t()})}launchNotification(e,t,n,i){return this.snackBar.open(e,t,{duration:i,verticalPosition:"top",horizontalPosition:"end",panelClass:n})}};return e.\u0275fac=function(t){return new(t||e)(o.ac(c.a))},e.\u0275prov=Object(o.Mb)({factory:function(){return new e(Object(o.ac)(c.a))},token:e,providedIn:"root"}),e})(),st=(()=>{let e=class{constructor(e,t,n,i){this.loggerSrv=e,this.oVSessionService=t,this.remoteUsersService=n,this.notificationService=i,this._messageList=new s.a([]),this._toggleChat=new s.a(!1),this.messageList=[],this.messagesUnread=0,this._messagesUnread=new s.a(0),this.log=this.loggerSrv.get("ChatService"),this.messagesObs=this._messageList.asObservable(),this.toggleChatObs=this._toggleChat.asObservable(),this.messagesUnreadObs=this._messagesUnread.asObservable()}setChatComponent(e){this.chatComponent=e}subscribeToChat(){this.oVSessionService.getWebcamSession().on("signal:chat",e=>{const t=e.from.connectionId,n=JSON.parse(e.data),i=this.oVSessionService.isMyOwnConnection(t);this.messageList.push({isLocal:i,nickname:n.nickname,message:n.message,userAvatar:i?this.oVSessionService.getWebCamAvatar():this.remoteUsersService.getUserAvatar(t)}),this.isChatOpened()||(this.addMessageUnread(),this.notificationService.newMessage(n.nickname.toUpperCase(),this.toggleChat.bind(this))),this._messageList.next(this.messageList)})}sendMessage(e){if(""!==(e=e.replace(/ +(?= )/g,""))&&" "!==e){const t={message:e,nickname:this.oVSessionService.getWebcamUserName()};this.oVSessionService.getConnectedUserSession().signal({data:JSON.stringify(t),type:"chat"})}}toggleChat(){this.log.d("Toggling chat"),this.chatComponent.toggle().then(()=>{this.chatOpened=this.chatComponent.opened,this._toggleChat.next(this.chatOpened),this.chatOpened&&(this.messagesUnread=0,this._messagesUnread.next(this.messagesUnread))})}isChatOpened(){return this.chatOpened}addMessageUnread(){this.messagesUnread++,this._messagesUnread.next(this.messagesUnread)}};return e.\u0275fac=function(t){return new(t||e)(o.ac(tt),o.ac(nt),o.ac(it),o.ac(ot))},e.\u0275prov=Object(o.Mb)({factory:function(){return new e(Object(o.ac)(tt),Object(o.ac)(nt),Object(o.ac)(it),Object(o.ac)(ot))},token:e,providedIn:"root"}),e})(),rt=(()=>{let e=class{constructor(e){this.chatService=e,this.messageList=[]}onKeydownHandler(e){console.log(e),this.chatOpened&&this.close()}ngOnInit(){this.subscribeToMessages(),this.subscribeToToggleChat()}ngOnDestroy(){this.chatMessageSubscription&&this.chatMessageSubscription.unsubscribe(),this.chatToggleSubscription&&this.chatToggleSubscription.unsubscribe()}eventKeyPress(e){e&&13===e.keyCode&&this.sendMessage()}sendMessage(){this.chatService.sendMessage(this.message),this.message=""}scrollToBottom(){setTimeout(()=>{try{this.chatScroll.nativeElement.scrollTop=this.chatScroll.nativeElement.scrollHeight}catch(e){}},20)}close(){this.chatService.toggleChat()}subscribeToMessages(){this.chatMessageSubscription=this.chatService.messagesObs.subscribe(e=>{this.messageList=e})}subscribeToToggleChat(){this.chatToggleSubscription=this.chatService.toggleChatObs.subscribe(e=>{this.chatOpened=e,this.chatOpened&&(this.scrollToBottom(),setTimeout(()=>{this.chatInput.nativeElement.focus()}))})}};return e.\u0275fac=function(t){return new(t||e)(o.Qb(st))},e.\u0275cmp=o.Kb({type:e,selectors:[["chat-component"]],viewQuery:function(e,t){var n;1&e&&(o.Rc(V,!0),o.Rc(R,!0)),2&e&&(o.wc(n=o.fc())&&(t.chatScroll=n.first),o.wc(n=o.fc())&&(t.chatInput=n.first))},hostBindings:function(e,t){1&e&&o.ec("keydown.escape",(function(e){return t.onKeydownHandler(e)}),!1,o.zc)},inputs:{lightTheme:"lightTheme"},decls:17,vars:4,consts:[["id","chatContainer"],["id","chatComponent"],["id","chatToolbar"],["mat-icon-button","","id","closeButton",3,"click"],["matTooltip","Close","color","warn"],[1,"message-wrap"],["chatScroll",""],["class","message",3,"ngClass",4,"ngFor","ngForOf"],["id","messageInput"],["placeholder","Send a message","autocomplete","off","id","chatInput",3,"ngModel","keypress","ngModelChange"],["chatInput",""],["mat-mini-fab","","id","sendButton",3,"click"],["matTooltip","Send"],[1,"message",3,"ngClass"],[1,"user-img",3,"src"],[1,"msg-detail"],[1,"msg-info"],[1,"msg-content"],[1,"triangle"],[1,"text",3,"innerHTML"]],template:function(e,t){1&e&&(o.Wb(0,"div",0),o.Wb(1,"div",1),o.Wb(2,"div",2),o.Wb(3,"span"),o.Mc(4," CHAT"),o.Vb(),o.Wb(5,"button",3),o.ec("click",(function(){return t.close()})),o.Wb(6,"mat-icon",4),o.Mc(7,"highlight_off"),o.Vb(),o.Vb(),o.Vb(),o.Wb(8,"div",5,6),o.Kc(10,L,10,6,"div",7),o.Vb(),o.Wb(11,"div",8),o.Wb(12,"input",9,10),o.ec("keypress",(function(e){return t.eventKeyPress(e)}))("ngModelChange",(function(e){return t.message=e})),o.Vb(),o.Wb(14,"button",11),o.ec("click",(function(){return t.sendMessage()})),o.Wb(15,"mat-icon",12),o.Mc(16,"send"),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Vb()),2&e&&(o.Cb(1),o.Gb("chatComponentLight",t.lightTheme),o.Cb(9),o.pc("ngForOf",t.messageList),o.Cb(2),o.pc("ngModel",t.message))},directives:function(){return[l.b,d.a,u.a,g.s,h.c,h.s,h.v,g.q,p.a]},pipes:function(){return[Ot]},styles:["#chatContainer[_ngcontent-%COMP%]{position:absolute;z-index:0;width:100%;height:calc(100% - 20px)}input[_ngcontent-%COMP%]{font-family:Ubuntu,sans-serif}#chatToolbar[_ngcontent-%COMP%]{height:30px;background-color:#3d3d3d;box-sizing:border-box;font-weight:700;font-size:14px;text-align:center;padding-top:4px;border-top-left-radius:6px;border-top-right-radius:6px;color:#fff}#closeButton[_ngcontent-%COMP%]{position:absolute;right:0;top:-5px}#chatComponent[_ngcontent-%COMP%]{background-color:#b8b8b8;position:absolute;z-index:99999;top:0;left:0;right:0;bottom:0;margin:auto;height:calc(100% - 30px);width:calc(100% - 30px);border-radius:20px}.message-wrap[_ngcontent-%COMP%]{padding:0 15px;height:calc(100% - 80px);overflow:auto}.message[_ngcontent-%COMP%]{position:relative;padding:7px 0}.user-img[_ngcontent-%COMP%]{position:absolute;border-radius:45px;width:60px;height:60px;top:15px}.msg-detail[_ngcontent-%COMP%]{width:calc(100% - 65px);display:inline-block}.msg-detail[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:15px}.msg-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.8em;color:#000;font-style:italic}.msg-content[_ngcontent-%COMP%]{position:relative;margin-top:5px;border-radius:5px;padding:8px;color:#000;width:auto;max-width:95%}span.triangle[_ngcontent-%COMP%]{border-radius:2px;height:8px;width:8px;top:12px;display:block;transform:rotate(45deg);position:absolute}.text[_ngcontent-%COMP%]{word-break:break-all}.message.left[_ngcontent-%COMP%]   .msg-detail[_ngcontent-%COMP%]   .msg-info[_ngcontent-%COMP%]{text-align:left}.message.left[_ngcontent-%COMP%]   .msg-detail[_ngcontent-%COMP%]{padding-left:65px}.message.left[_ngcontent-%COMP%]   .user-img[_ngcontent-%COMP%]{left:-5px;border:1px solid #f0f0f094}.message.left[_ngcontent-%COMP%]   .msg-detail[_ngcontent-%COMP%]   .msg-content[_ngcontent-%COMP%]{background-color:#f0f0f0;float:left}.message.left[_ngcontent-%COMP%]   .msg-detail[_ngcontent-%COMP%]   .msg-content[_ngcontent-%COMP%]   span.triangle[_ngcontent-%COMP%]{background-color:#f0f0f0;border-bottom-width:0;border-left-width:0;left:-5px}.message.right[_ngcontent-%COMP%]   .msg-detail[_ngcontent-%COMP%]   .msg-info[_ngcontent-%COMP%]{text-align:right}.message.right[_ngcontent-%COMP%]   .user-img[_ngcontent-%COMP%]{right:-5px;border:1px solid #c8ffe8ab}.message.right[_ngcontent-%COMP%]   .msg-detail[_ngcontent-%COMP%]   .msg-content[_ngcontent-%COMP%]{background-color:#c8ffe8;float:right}.message.right[_ngcontent-%COMP%]   .msg-detail[_ngcontent-%COMP%]   .msg-content[_ngcontent-%COMP%]   span.triangle[_ngcontent-%COMP%]{background-color:#c8ffe8;border-bottom-width:0;border-left-width:0;right:-5px}#messageInput[_ngcontent-%COMP%]{position:absolute;bottom:0;width:100%;background-color:#fff;text-align:center;padding:10px 0;height:30px;border-bottom-left-radius:6px;border-bottom-right-radius:6px}#messageInput[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:90%;height:100%;border:none;outline:0;font-size:14px;margin-left:-6%}#sendButton[_ngcontent-%COMP%]{background-color:#81e9b0;position:absolute;right:10px;top:0;bottom:0;margin:auto;border:1px solid #7ae2a9;box-shadow:none!important}#sendButton[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-left:3px!important;margin-bottom:2px!important}[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#6b6b6b}.chatComponentLight[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#eee!important}"]}),e})();class at{constructor(){this.ovSettings={chat:!0,autopublish:!1,toolbarButtons:{video:!0,audio:!0,fullscreen:!0,screenShare:!0,layoutSpeaking:!0,exit:!0}}}set(e){this.ovSettings=e}isAutoPublish(){return this.ovSettings.autopublish}hasVideo(){return this.ovSettings.toolbarButtons.video}hasScreenSharing(){return this.ovSettings.toolbarButtons.screenShare}hasLayoutSpeaking(){return this.ovSettings.toolbarButtons.layoutSpeaking}hasFullscreen(){return this.ovSettings.toolbarButtons.fullscreen}hasAudio(){return this.ovSettings.toolbarButtons.audio}hasChat(){return this.ovSettings.chat}hasExit(){return this.ovSettings.toolbarButtons.exit}setScreenSharing(e){this.ovSettings.toolbarButtons.screenShare=e}}var ct=function(e){return e.ROOT_CLASS="OT_root",e}({}),lt=function(e){return e.BIG_ELEMENT_CLASS="OV_big",e}({}),dt=function(e){return e.DARK="dark",e.LIGHT="light",e}({}),ut=function(e){return e.FRONT="FRONT",e.BACK="BACK",e}({});let gt=(()=>{let e=class{constructor(e,t){this.dialogRef=e,this.data=t}ngOnInit(){}};return e.\u0275fac=function(t){return new(t||e)(o.Qb(m.h),o.Qb(m.a))},e.\u0275cmp=o.Kb({type:e,selectors:[["app-dialog-error"]],decls:5,vars:2,consts:[["mat-dialog-title",""]],template:function(e,t){1&e&&(o.Wb(0,"div"),o.Wb(1,"h1",0),o.Mc(2),o.Vb(),o.Wb(3,"span"),o.Mc(4),o.Vb(),o.Vb()),2&e&&(o.Cb(2),o.Nc(t.data.header),o.Cb(2),o.Oc(" ",t.data.message," "))},directives:[m.i],styles:["h1[_ngcontent-%COMP%]{color:#a30101}"]}),e})(),ht=(()=>{let e=class{constructor(e){this.dialog=e}toggleFullscreen(e){const t=window.document,n=t.getElementById(e);t.fullscreenElement||t.mozFullScreenElement||t.webkitFullscreenElement||t.msFullscreenElement?t.exitFullscreen?t.exitFullscreen():t.msExitFullscreen?t.msExitFullscreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.webkitExitFullscreen&&t.webkitExitFullscreen():n.requestFullscreen?n.requestFullscreen():n.msRequestFullscreen?n.msRequestFullscreen():n.mozRequestFullScreen?n.mozRequestFullScreen():n.webkitRequestFullscreen&&n.webkitRequestFullscreen()}getOpenViduAvatar(){return"https://openvidu.io/img/logos/openvidu_globe_bg_transp_cropped.png"}handlerScreenShareError(e){e&&"SCREEN_SHARING_NOT_SUPPORTED"===e.name?alert("Your browser does not support screen sharing"):e&&"SCREEN_EXTENSION_DISABLED"===e.name&&alert("You need to enable screen sharing extension")}getOpenviduLayoutOptions(){return{maxRatio:1.5,minRatio:.6,fixedRatio:!1,bigClass:lt.BIG_ELEMENT_CLASS,bigPercentage:.85,bigFixedRatio:!1,bigMaxRatio:1.5,bigMinRatio:9/16,bigFirst:!0,animate:!0}}generateNickname(){return"OpenVidu_User"+Math.floor(100*Math.random())}isFF(){return/Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent)}isMobile(){return this.isAndroid()||this.isIos()}showErrorMessage(e,t,n=!1){this.dialogRef=this.dialog.open(gt,{data:{header:e,message:t},disableClose:n})}closeDialog(){this.dialogRef.close()}getHTMLElementByClassName(e,t){for(;e&&e!==document.body;){if(e.className.includes(t))return e;e=e.parentElement}return null}toggleBigElementClass(e){var t,n;(null===(t=e)||void 0===t?void 0:t.className.includes(lt.BIG_ELEMENT_CLASS))?null===(n=e)||void 0===n||n.classList.remove(lt.BIG_ELEMENT_CLASS):e.classList.add(lt.BIG_ELEMENT_CLASS)}removeAllBigElementClass(){const e=document.getElementsByClassName(lt.BIG_ELEMENT_CLASS);for(;e.length>0;)this.toggleBigElementClass(e[0])}isAndroid(){return/\b(\w*Android\w*)\b/.test(navigator.userAgent)&&/\b(\w*Mobile\w*)\b/.test(navigator.userAgent)}isIos(){return/\b(\w*iOS\w*)\b/.test(navigator.userAgent)}};return e.\u0275fac=function(t){return new(t||e)(o.ac(m.b))},e.\u0275prov=Object(o.Mb)({factory:function(){return new e(Object(o.ac)(m.b))},token:e,providedIn:"root"}),e})(),pt=(()=>{let e=class{constructor(e){this.loggerSrv=e,this.storage=window.localStorage,this.log=this.loggerSrv.get("StorageService")}set(e,t){const n=JSON.stringify({item:t});this.log.d('Storing on localStorage "'+e+'" with value "'+n+'"'),this.storage.setItem(e,n)}get(e){var t;const n=JSON.parse(this.storage.getItem(e));return(null===(t=n)||void 0===t?void 0:t.item)?n.item:null}clear(){this.log.d("Clearing localStorage"),this.storage.clear()}};return e.\u0275fac=function(t){return new(t||e)(o.ac(tt))},e.\u0275prov=Object(o.Mb)({factory:function(){return new e(Object(o.ac)(tt))},token:e,providedIn:"root"}),e})(),mt=(()=>{let e=class{constructor(e,t,n){this.loggerSrv=e,this.utilSrv=t,this.storageSrv=n,this.VIDEO_DEVICE="openviduCallVideoDevice",this.AUDIO_DEVICE="openviduCallAudioDevice",this.OV=null,this.cameras=[],this.microphones=[],this.log=this.loggerSrv.get("DevicesService"),this.OV=new a.OpenVidu}initDevices(){return Object(i.a)(this,void 0,void 0,(function*(){yield this.initOpenViduDevices(),this.devices.length>0?this.log.d("Devices found: ",this.devices):this.log.w("No devices found!"),this.resetDevicesArray(),this.hasAudioDeviceAvailable()&&(this.initAudioDevices(),this.micSelected=this.getMicSelected()),this.hasVideoDeviceAvailable()&&(this.initVideoDevices(),this.camSelected=this.cameras.find(e=>e.type===ut.FRONT))}))}initOpenViduDevices(){return Object(i.a)(this,void 0,void 0,(function*(){this.devices=yield this.OV.getDevices()}))}initAudioDevices(){this.devices.filter(e=>"audioinput"===e.kind).forEach(e=>{this.microphones.push({label:e.label,device:e.deviceId})})}initVideoDevices(){this.devices.filter(e=>"videoinput"===e.kind).forEach((e,t)=>{const n={label:e.label,device:e.deviceId,type:ut.BACK};this.utilSrv.isMobile()?n.label.toLowerCase().includes(ut.FRONT.toLowerCase())&&(n.type=ut.FRONT):0===t&&(n.type=ut.FRONT),this.cameras.push(n)}),this.log.d("Camera selected",this.camSelected)}getCamSelected(){if(0!==this.cameras.length)return this.getCamFromStorage()||this.camSelected||this.cameras[0];this.log.e("No video devices found!")}getCamFromStorage(){var e;let t=this.storageSrv.get(this.VIDEO_DEVICE);if(t=this.getCameraByDeviceField(null===(e=t)||void 0===e?void 0:e.device),t)return t}getMicSelected(){if(0!==this.microphones.length)return this.getMicFromStogare()||this.micSelected||this.microphones[0];this.log.e("No audio devices found!")}getMicFromStogare(){var e;let t=this.storageSrv.get(this.AUDIO_DEVICE);if(t=this.getMicrophoneByDeviceField(null===(e=t)||void 0===e?void 0:e.device),t)return t}setCamSelected(e){this.camSelected=this.getCameraByDeviceField(e),this.saveCamToStorage(this.camSelected)}saveCamToStorage(e){this.storageSrv.set(this.VIDEO_DEVICE,e)}setMicSelected(e){this.micSelected=this.getMicrophoneByDeviceField(e),this.saveMicToStorage(this.micSelected)}saveMicToStorage(e){this.storageSrv.set(this.AUDIO_DEVICE,e)}needUpdateVideoTrack(e){return this.getCamSelected().device!==e}needUpdateAudioTrack(e){return this.getMicSelected().device!==e}getCameras(){return this.cameras}getMicrophones(){return this.microphones}hasVideoDeviceAvailable(){var e;return!!(null===(e=this.devices)||void 0===e?void 0:e.find(e=>"videoinput"===e.kind))}hasAudioDeviceAvailable(){var e;return!!(null===(e=this.devices)||void 0===e?void 0:e.find(e=>"audioinput"===e.kind))}cameraNeedsMirror(e){var t;return(null===(t=this.getCameraByDeviceField(e))||void 0===t?void 0:t.type)===ut.FRONT}areEmptyLabels(){return!!this.cameras.find(e=>""===e.label)||!!this.microphones.find(e=>""===e.label)}getCameraByDeviceField(e){return this.cameras.find(t=>t.device===e||t.label===e)}getMicrophoneByDeviceField(e){return this.microphones.find(t=>t.device===e||t.label===e)}resetDevicesArray(){this.cameras=[{label:"None",device:null,type:null}],this.microphones=[{label:"None",device:null,type:null}]}};return e.\u0275fac=function(t){return new(t||e)(o.ac(tt),o.ac(ht),o.ac(pt))},e.\u0275prov=Object(o.Mb)({factory:function(){return new e(Object(o.ac)(tt),Object(o.ac)(ht),Object(o.ac)(pt))},token:e,providedIn:"root"}),e})(),ft=(()=>{let e=class{constructor(e,t){this.http=e,this.loggerSrv=t,this.log=this.loggerSrv.get("NetworkService"),this.baseHref="/"+(window.location.pathname.split("/")[1]?window.location.pathname.split("/")[1]+"/":"")}getToken(e,t,n){return Object(i.a)(this,void 0,void 0,(function*(){if(t&&n){const i=yield this.createSession(e,t,n);return yield this.createToken(i,t,n)}try{return this.log.d("Getting token from backend"),yield this.http.post(this.baseHref+"call",{sessionId:e}).toPromise()}catch(i){if(404===i.status)throw{status:i.status,message:"Cannot connect with backend. "+i.url+" not found"};throw i}}))}createSession(e,t,n){return new Promise((i,o)=>{const s=JSON.stringify({customSessionId:e}),a={headers:new f.e({Authorization:"Basic "+btoa("OPENVIDUAPP:"+n),"Content-Type":"application/json"})};return this.http.post(t+"/api/sessions",s,a).pipe(Object(E.a)(t=>(409===t.status&&i(e),"Unknown Error"===t.statusText&&o({status:401,message:"ERR_CERT_AUTHORITY_INVALID"}),Object(r.a)(t)))).subscribe(e=>{i(e.id)})})}createToken(e,t,n){return new Promise((i,o)=>{const s=JSON.stringify({session:e}),a={headers:new f.e({Authorization:"Basic "+btoa("OPENVIDUAPP:"+n),"Content-Type":"application/json"})};return this.http.post(t+"/api/tokens",s,a).pipe(Object(E.a)(e=>(o(e),Object(r.a)(e)))).subscribe(e=>{this.log.d(e),i(e.token)})})}};return e.\u0275fac=function(t){return new(t||e)(o.ac(f.b),o.ac(tt))},e.\u0275prov=Object(o.Mb)({factory:function(){return new e(Object(o.ac)(f.b),Object(o.ac)(tt))},token:e,providedIn:"root"}),e})(),bt=(()=>{let e=class{constructor(e,t,n,i,s,r,a,c){this.networkSrv=e,this.router=t,this.utilsSrv=n,this.remoteUsersService=i,this.oVSessionService=s,this.oVDevicesService=r,this.loggerSrv=a,this.chatService=c,this._session=new o.o,this._publisher=new o.o,this._error=new o.o,this._joinSession=new o.o,this._leaveSession=new o.o,this.compact=!1,this.sidenavMode="side",this.showConfigRoomCard=!0,this.localUsers=[],this.remoteUsers=[],this.isAutoLayout=!1,this.log=this.loggerSrv.get("VideoRoomComponent")}beforeunloadHandler(){this.leaveSession()}sizeChange(){this.openviduLayout&&(this.updateOpenViduLayout(),this.checkSizeComponent())}ngOnInit(){var e;return Object(i.a)(this,void 0,void 0,(function*(){this.lightTheme=(null===(e=this.externalConfig)||void 0===e?void 0:e.getTheme())===dt.LIGHT,this.ovSettings=this.externalConfig?this.externalConfig.getOvSettings():new at,this.ovSettings.setScreenSharing(this.ovSettings.hasScreenSharing()&&!this.utilsSrv.isMobile())}))}ngOnDestroy(){var e;null===(e=this.session)||void 0===e||e.off("reconnecting"),this.remoteUsersService.clean(),this.session=null,this.sessionScreen=null,this.localUsers=[],this.remoteUsers=[],this.openviduLayout=null,this.oVUsersSubscription&&this.oVUsersSubscription.unsubscribe(),this.remoteUsersSubscription&&this.remoteUsersSubscription.unsubscribe(),this.chatSubscription&&this.chatSubscription.unsubscribe()}onConfigRoomJoin(){this.hasVideoDevices=this.oVDevicesService.hasVideoDeviceAvailable(),this.hasAudioDevices=this.oVDevicesService.hasAudioDeviceAvailable(),this.showConfigRoomCard=!1,this.subscribeToLocalUsers(),this.subscribeToRemoteUsers(),this.mySessionId=this.oVSessionService.getSessionId(),setTimeout(()=>{this.openviduLayout=new Ze,this.openviduLayoutOptions=this.utilsSrv.getOpenviduLayoutOptions(),this.openviduLayout.initLayoutContainer(document.getElementById("layout"),this.openviduLayoutOptions),this.checkSizeComponent(),this.joinToSession()},50)}joinToSession(){this.oVSessionService.initSessions(),this.session=this.oVSessionService.getWebcamSession(),this._session.emit(this.session),this.sessionScreen=this.oVSessionService.getScreenSession(),this.subscribeToStreamCreated(),this.subscribeToStreamDestroyed(),this.subscribeToStreamPropertyChange(),this.subscribeToNicknameChanged(),this.chatService.setChatComponent(this.chatSidenav),this.chatService.subscribeToChat(),this.subscribeToChatComponent(),this.subscribeToReconnection(),this.connectToSession()}leaveSession(){this.log.d("Leaving session..."),this.oVSessionService.disconnect(),this._leaveSession.emit()}onNicknameUpdate(e){this.oVSessionService.setWebcamName(e),this.sendNicknameSignal(e)}toggleMic(){this.oVSessionService.isWebCamEnabled()?this.oVSessionService.publishWebcamAudio(!this.oVSessionService.hasWebcamAudioActive()):this.oVSessionService.publishScreenAudio(!this.oVSessionService.hasScreenAudioActive())}toggleCam(){return Object(i.a)(this,void 0,void 0,(function*(){const e=!this.oVSessionService.hasWebcamVideoActive();if(this.oVSessionService.areBothConnected())return this.oVSessionService.publishVideo(e),this.oVSessionService.disableWebcamUser(),void this.oVSessionService.unpublishWebcam();if(this.oVSessionService.isOnlyScreenConnected()){const e=this.oVSessionService.hasScreenAudioActive();yield this.oVSessionService.publishWebcam(),this.oVSessionService.publishScreenAudio(!1),this.oVSessionService.publishWebcamAudio(e),this.oVSessionService.enableWebcamUser()}this.oVSessionService.publishVideo(e)}))}toggleScreenShare(){return Object(i.a)(this,void 0,void 0,(function*(){if(this.oVSessionService.areBothConnected())return void this.removeScreen();if(this.oVSessionService.isOnlyWebcamConnected()){const e=this.initScreenPublisher();return e.once("accessAllowed",t=>{e.stream.getMediaStream().getVideoTracks()[0].addEventListener("ended",()=>{this.log.d("Clicked native stop button. Stopping screen sharing"),this.toggleScreenShare()}),this.log.d("ACCESS ALOWED screenPublisher"),this.oVSessionService.enableScreenUser(e),this.oVSessionService.publishScreen(),this.oVSessionService.hasWebcamVideoActive()||(this.oVSessionService.disableWebcamUser(),this.oVSessionService.unpublishWebcam())}),void e.once("accessDenied",e=>{this.log.w("ScreenShare: Access Denied")})}const e=this.oVSessionService.hasScreenAudioActive();yield this.oVSessionService.publishWebcam(),this.oVSessionService.publishScreenAudio(!1),this.oVSessionService.publishWebcamAudio(e),this.oVSessionService.enableWebcamUser(),this.removeScreen()}))}toggleSpeakerLayout(){if(!this.oVSessionService.isScreenShareEnabled())return this.isAutoLayout=!this.isAutoLayout,this.log.d("Automatic Layout ",this.isAutoLayout?"Disabled":"Enabled"),this.isAutoLayout?void this.subscribeToSpeechDetection():(this.log.d("Unsubscribe to speech detection"),this.session.off("publisherStartSpeaking"),this.resetAllBigElements(),void this.updateOpenViduLayout());this.log.w("Screen is enabled. Speech detection has been rejected")}onReplaceScreenTrack(e){this.oVSessionService.replaceScreenTrack()}checkSizeComponent(){var e;this.compact=(null===(e=document.getElementById("room-container"))||void 0===e?void 0:e.offsetWidth)<=790,this.sidenavMode=this.compact?"over":"side"}onToggleVideoSize(e){var t;const n=e.element;e.resetAll&&this.resetAllBigElements(),this.utilsSrv.toggleBigElementClass(n),(null===(t=e)||void 0===t?void 0:t.connectionId)&&(this.oVSessionService.isMyOwnConnection(e.connectionId)?this.oVSessionService.toggleZoom(e.connectionId):this.remoteUsersService.toggleUserZoom(e.connectionId)),this.updateOpenViduLayout()}toolbarMicIconEnabled(){return this.oVSessionService.isWebCamEnabled()?this.oVSessionService.hasWebcamAudioActive():this.oVSessionService.hasScreenAudioActive()}connectToSession(){var e,t;return Object(i.a)(this,void 0,void 0,(function*(){let n,i;this.externalConfig&&this.externalConfig.hasTokens()&&(this.log.d("Received external tokens from "+this.externalConfig.getComponentName()),n=this.externalConfig.getWebcamToken(),i=(null===(e=this.ovSettings)||void 0===e?void 0:e.hasScreenSharing())?this.externalConfig.getScreenToken():void 0),n=n||(yield this.getToken()),!i&&(null===(t=this.ovSettings)||void 0===t?void 0:t.hasScreenSharing())&&(i=yield this.getToken()),(n||i)&&(yield this.connectBothSessions(n,i),this.oVSessionService.areBothConnected()?(this.oVSessionService.publishWebcam(),this.oVSessionService.publishScreen()):this.oVSessionService.isOnlyScreenConnected()?this.oVSessionService.publishScreen():this.oVSessionService.publishWebcam(),this._joinSession.emit(),this.updateOpenViduLayout())}))}connectBothSessions(e,t){var n,o;return Object(i.a)(this,void 0,void 0,(function*(){try{yield this.oVSessionService.connectWebcamSession(e),yield this.oVSessionService.connectScreenSession(t),this.localUsers[0].getStreamManager().on("streamPlaying",()=>{this.localUsers[0].getStreamManager().videos[0].video.parentElement.classList.remove("custom-class")})}catch(i){this._error.emit({error:i.error,messgae:i.message,code:i.code,status:i.status}),this.log.e("There was an error connecting to the session:",i.code,i.message),this.utilsSrv.showErrorMessage("There was an error connecting to the session:",(null===(n=i)||void 0===n?void 0:n.error)||(null===(o=i)||void 0===o?void 0:o.message))}}))}subscribeToStreamCreated(){this.session.on("streamCreated",e=>{if(this.oVSessionService.isMyOwnConnection(e.stream.connection.connectionId))return;const t=this.session.subscribe(e.stream,void 0);this.remoteUsersService.add(e,t),this.sendNicknameSignal(this.oVSessionService.getWebcamUserName(),e.stream.connection)})}subscribeToStreamDestroyed(){this.session.on("streamDestroyed",e=>{this.remoteUsersService.removeUserByConnectionId(e.stream.connection.connectionId)})}emitPublisher(e){this._publisher.emit(e)}subscribeToStreamPropertyChange(){this.session.on("streamPropertyChanged",e=>{this.oVSessionService.isMyOwnConnection(e.stream.connection.connectionId)||"videoActive"===e.changedProperty&&this.remoteUsersService.updateUsers()})}subscribeToNicknameChanged(){this.session.on("signal:nicknameChanged",e=>{const t=e.from.connectionId;if(this.oVSessionService.isMyOwnConnection(t))return;const n=JSON.parse(e.data).nickname;this.remoteUsersService.updateNickname(t,n)})}subscribeToSpeechDetection(){this.log.d("Subscribe to speech detection",this.session),this.session.on("publisherStartSpeaking",e=>{const t=this.remoteUsersService.someoneIsSharingScreen();if(!this.oVSessionService.isScreenShareEnabled()&&!t){const t=this.utilsSrv.getHTMLElementByClassName(e.connection.stream.streamManager.videos[0].video,ct.ROOT_CLASS);this.resetAllBigElements(),this.remoteUsersService.setUserZoom(e.connection.connectionId,!0),this.onToggleVideoSize({element:t})}})}removeScreen(){this.oVSessionService.disableScreenUser(),this.oVSessionService.unpublishScreen()}subscribeToChatComponent(){this.chatSubscription=this.chatService.toggleChatObs.subscribe(e=>{this.updateOpenViduLayout(this.externalConfig?300:0)})}subscribeToReconnection(){this.session.on("reconnecting",()=>{this.log.w("Connection lost: Reconnecting"),this.isConnectionLost=!0,this.utilsSrv.showErrorMessage("Connection Problem","Oops! Trying to reconnect to the session ...",!0)}),this.session.on("reconnected",()=>{this.log.w("Connection lost: Reconnected"),this.isConnectionLost=!1,this.utilsSrv.closeDialog()}),this.session.on("sessionDisconnected",e=>{"networkDisconnect"===e.reason&&(this.utilsSrv.closeDialog(),this.leaveSession())})}initScreenPublisher(){const e=Xe.SCREEN,t=!(this.oVSessionService.isWebCamEnabled()&&this.oVSessionService.hasWebcamVideoActive())&&this.oVSessionService.hasWebcamAudioActive(),n=this.oVSessionService.createProperties(e,void 0,!0,t,!1);try{return this.oVSessionService.initScreenPublisher(void 0,n)}catch(i){this.log.e(i),this.utilsSrv.handlerScreenShareError(i)}}getToken(){var e,t;return Object(i.a)(this,void 0,void 0,(function*(){this.log.d("Generating tokens...");try{return yield this.networkSrv.getToken(this.mySessionId,null===(e=this.externalConfig)||void 0===e?void 0:e.getOvServerUrl(),null===(t=this.externalConfig)||void 0===t?void 0:t.getOvSecret())}catch(n){this._error.emit({error:n.error,messgae:n.message,code:n.code,status:n.status}),this.log.e("There was an error getting the token:",n.status,n.message),this.utilsSrv.showErrorMessage("There was an error getting the token:",n.error||n.message)}}))}sendNicknameSignal(e,t){const n={data:JSON.stringify({nickname:e}),type:"nicknameChanged",to:t?[t]:void 0};this.session.signal(n)}updateOpenViduLayout(e){if(this.openviduLayout){if(!e)return void this.openviduLayout.updateLayout();setTimeout(()=>{this.openviduLayout.updateLayout()},e)}}resetAllBigElements(){this.utilsSrv.removeAllBigElementClass(),this.remoteUsersService.resetUsersZoom(),this.oVSessionService.resetUsersZoom()}subscribeToLocalUsers(){this.oVUsersSubscription=this.oVSessionService.OVUsers.subscribe(e=>{this.localUsers=e,this.updateOpenViduLayout()})}subscribeToRemoteUsers(){this.remoteUsersSubscription=this.remoteUsersService.remoteUsers.subscribe(e=>{this.remoteUsers=[...e],this.updateOpenViduLayout()})}};return e.\u0275fac=function(t){return new(t||e)(o.Qb(ft),o.Qb(b.e),o.Qb(ht),o.Qb(it),o.Qb(nt),o.Qb(mt),o.Qb(tt),o.Qb(st))},e.\u0275cmp=o.Kb({type:e,selectors:[["app-video-room"]],viewQuery:function(e,t){var n;1&e&&(o.Rc(N,!0),o.Rc(D,!0)),2&e&&(o.wc(n=o.fc())&&(t.chatComponent=n.first),o.wc(n=o.fc())&&(t.chatSidenav=n.first))},hostBindings:function(e,t){1&e&&o.ec("beforeunload",(function(){return t.beforeunloadHandler()}),!1,o.Ac)("resize",(function(){return t.sizeChange()}),!1,o.Ac)},inputs:{externalConfig:"externalConfig"},outputs:{_session:"_session",_publisher:"_publisher",_error:"_error",_joinSession:"_joinSession",_leaveSession:"_leaveSession"},decls:1,vars:1,consts:[["id","videoRoomNavBar",3,"boundsLight",4,"ngIf"],["id","videoRoomNavBar"],[3,"ovSettings","externalConfig","join","leaveSession","publisherCreated",4,"ngIf"],[4,"ngIf"],[3,"ovSettings","externalConfig","join","leaveSession","publisherCreated"],["class","reconnecting-container",4,"ngIf"],[3,"lightTheme","compact","mySessionId","ovSettings","hasVideoDevices","hasAudioDevices","isWebcamVideoEnabled","isWebcamAudioEnabled","isScreenEnabled","isAutoLayout","isConnectionLost","camButtonClicked","micButtonClicked","screenShareClicked","layoutButtonClicked","leaveSessionButtonClicked"],["id","room-container","fullscreen","",1,"sidenav-container"],["position","end","class","sidenav-chat","fixedInViewport","true","fixedTopGap","40","fixedBottomGap","0",3,"mode","boundsLight",4,"ngIf"],[1,"sidenav-main"],["id","layout",1,"bounds"],["class","OT_root OT_publisher custom-class","id","localUser",3,"display",4,"ngFor","ngForOf"],["class","OT_root OT_publisher custom-class","id","remoteUsers",3,"display",4,"ngFor","ngForOf"],[3,"lightTheme","participants"],[1,"reconnecting-container"],["position","end","fixedInViewport","true","fixedTopGap","40","fixedBottomGap","0",1,"sidenav-chat",3,"mode"],["sidenav",""],[3,"lightTheme"],["chatComponent",""],["id","localUser",1,"OT_root","OT_publisher","custom-class"],[3,"user","videoSizeBig","nicknameClicked","replaceScreenTrackClicked","toggleVideoSizeClicked"],["id","remoteUsers",1,"OT_root","OT_publisher","custom-class"],[3,"user","videoSizeBig","toggleVideoSizeClicked"]],template:function(e,t){1&e&&o.Kc(0,G,3,4,"div",0),2&e&&o.pc("ngIf",!!t.ovSettings)},directives:function(){return[g.t,jt,Lt,v.e,v.f,g.s,Dt,v.d,rt,Vt]},pipes:function(){return[St]},styles:["#videoRoomNavBar[_ngcontent-%COMP%]{min-width:400px;background-color:#494949;height:100%}.stream-container[_ngcontent-%COMP%]{padding:0}.reconnecting-container[_ngcontent-%COMP%]{width:100%;height:100%;z-index:1000;background-color:#000;opacity:80%;position:absolute}.sidenav-container[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;min-height:-webkit-fill-available;overflow:hidden}.sidenav-chat[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:450px;background-color:#494949;border-left:none;position:absolute}.mat-drawer-container[_ngcontent-%COMP%]{background-color:#494949}.sidenav-main[_ngcontent-%COMP%]{height:100%;overflow:hidden;min-height:-webkit-fill-available;min-height:-moz-available}.bounds[_ngcontent-%COMP%]{background-color:#494949;position:absolute;left:0;right:0;top:40px;bottom:25px;min-width:400px!important;width:inherit}.boundsLight[_ngcontent-%COMP%]{background-color:#dfdfdf!important}.custom-class[_ngcontent-%COMP%]{min-height:0!important}.OT_root[_ngcontent-%COMP%], .OT_root[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{color:#fff;margin:0;padding:0;border:0;font-size:100%;font-family:Ubuntu,sans-serif;vertical-align:baseline}.OT_dialog-centering[_ngcontent-%COMP%]{display:table;width:100%;height:100%}.OT_dialog-centering-child[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle}.OT_dialog[_ngcontent-%COMP%]{position:relative;box-sizing:border-box;margin-right:auto;margin-left:auto;color:#fff;font-family:Ubuntu,sans-serif;font-size:13px;line-height:1.4}.OT_dialog[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{font-family:inherit;box-sizing:inherit}.OT_closeButton[_ngcontent-%COMP%]{color:#999;cursor:pointer;font-size:32px;line-height:36px;position:absolute;right:18px;top:0}.OT_dialog-messages[_ngcontent-%COMP%]{text-align:center}.OT_dialog-messages-main[_ngcontent-%COMP%]{margin-bottom:36px;line-height:36px;font-weight:300;font-size:24px}.OT_dialog-messages-minor[_ngcontent-%COMP%]{margin-bottom:18px;font-size:13px;line-height:18px;color:#a4a4a4}.OT_dialog-messages-minor[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#fff}.OT_dialog-actions-card[_ngcontent-%COMP%]{display:inline-block}.OT_dialog-button-title[_ngcontent-%COMP%]{margin-bottom:18px;line-height:18px;font-weight:300;text-align:center;font-size:14px;color:#999}.OT_dialog-button-title[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#999}.OT_dialog-button-title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .OT_dialog-button-title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active, .OT_dialog-button-title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:link{color:#02a1de}.OT_dialog-button-title[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#fff;font-weight:100;display:block}.OT_dialog-button[_ngcontent-%COMP%]{display:inline-block;margin-bottom:18px;padding:0 1em;background-color:#1ca3dc;text-align:center;cursor:pointer}.OT_dialog-button[_ngcontent-%COMP%]:disabled{cursor:not-allowed;opacity:.5}.OT_dialog-button-large[_ngcontent-%COMP%]{line-height:36px;padding-top:9px;padding-bottom:9px;font-weight:100;font-size:24px}.OT_dialog-button-small[_ngcontent-%COMP%]{line-height:18px;padding-top:9px;padding-bottom:9px;background-color:#444;color:#999;font-size:16px}.OT_dialog-progress-bar[_ngcontent-%COMP%]{display:inline-block;width:100%;margin-top:5px;margin-bottom:41px;border:1px solid #4e4e4e;height:8px}.OT_dialog-progress-bar-fill[_ngcontent-%COMP%]{height:100%;background-color:#29a4da}.OT_dialog-plugin-upgrading[_ngcontent-%COMP%]   .OT_dialog-plugin-upgrade-percentage[_ngcontent-%COMP%]{line-height:54px;font-size:48px;font-weight:100}.OT_centered[_ngcontent-%COMP%]{position:fixed;left:50%;top:50%;margin:0}.OT_dialog-hidden[_ngcontent-%COMP%]{display:none}.OT_dialog-button-block[_ngcontent-%COMP%]{display:block}.OT_dialog-no-natural-margin[_ngcontent-%COMP%]{margin-bottom:0}.OT_publisher[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]{position:relative;min-width:48px;min-height:48px}.OT_publisher[_ngcontent-%COMP%]   .OT_video-element[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_video-element[_ngcontent-%COMP%]{display:block;position:absolute;width:100%;height:100%;transform-origin:0 0}.OT_publisher.OT_mirrored[_ngcontent-%COMP%]   .OT_video-element[_ngcontent-%COMP%]{transform:scale(-1,1);transform-origin:50% 50%}.OT_subscriber_error[_ngcontent-%COMP%]{background-color:#000;color:#fff;text-align:center}.OT_subscriber_error[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{padding:20px}.OT_publisher[_ngcontent-%COMP%]   .OT_archiving[_ngcontent-%COMP%], .OT_publisher[_ngcontent-%COMP%]   .OT_archiving-light-box[_ngcontent-%COMP%], .OT_publisher[_ngcontent-%COMP%]   .OT_archiving-status[_ngcontent-%COMP%], .OT_publisher[_ngcontent-%COMP%]   .OT_bar[_ngcontent-%COMP%], .OT_publisher[_ngcontent-%COMP%]   .OT_name[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_archiving[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_archiving-light-box[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_archiving-status[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_bar[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_name[_ngcontent-%COMP%]{-ms-box-sizing:border-box;box-sizing:border-box;top:0;left:0;right:0;display:block;height:34px;position:absolute}.OT_publisher[_ngcontent-%COMP%]   .OT_bar[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_bar[_ngcontent-%COMP%]{background:rgba(0,0,0,.4)}.OT_publisher[_ngcontent-%COMP%]   .OT_edge-bar-item[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_edge-bar-item[_ngcontent-%COMP%]{z-index:1;transition-property:top,bottom,opacity;transition-duration:.5s;transition-timing-function:ease-in}.OT_publisher[_ngcontent-%COMP%]   .OT_name[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_name[_ngcontent-%COMP%]{background-color:transparent;color:#fff;font-size:15px;line-height:34px;font-weight:400;padding:0 4px 0 36px}.OT_publisher[_ngcontent-%COMP%]   .OT_archiving-status[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_archiving-status[_ngcontent-%COMP%]{background:rgba(0,0,0,.4);top:auto;bottom:0;left:34px;padding:0 4px;color:rgba(255,255,255,.8);font-size:15px;line-height:34px;font-weight:400}.OT_micro[_ngcontent-%COMP%]   .OT_archiving-status[_ngcontent-%COMP%], .OT_micro[_ngcontent-%COMP%]:hover   .OT_archiving-status[_ngcontent-%COMP%], .OT_mini[_ngcontent-%COMP%]   .OT_archiving-status[_ngcontent-%COMP%], .OT_mini[_ngcontent-%COMP%]:hover   .OT_archiving-status[_ngcontent-%COMP%]{display:none}.OT_publisher[_ngcontent-%COMP%]   .OT_archiving-light-box[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_archiving-light-box[_ngcontent-%COMP%]{background:rgba(0,0,0,.4);top:auto;bottom:0;right:auto;width:34px;height:34px}.OT_archiving-light[_ngcontent-%COMP%]{width:7px;height:7px;border-radius:30px;position:absolute;top:14px;left:14px;background-color:#575757;box-shadow:0 0 5px 1px #575757}.OT_archiving-light.OT_active[_ngcontent-%COMP%]{background-color:#970d13;animation:1.3s ease-in infinite OT_pulse;-webkit-animation:1.3s ease-in OT_pulse;-moz-animation:1.3s ease-in infinite OT_pulse;-webkit-animation-iteration-count:infinite}@-webkit-keyframes OT_pulse{0%,100%,80%{box-shadow:0 0 0 0 #c70019}30%,50%{box-shadow:0 0 5px 1px #c70019}}.OT_bar.OT_mode-mini[_ngcontent-%COMP%], .OT_bar.OT_mode-mini-auto[_ngcontent-%COMP%], .OT_mini[_ngcontent-%COMP%]   .OT_bar[_ngcontent-%COMP%]{bottom:0;height:auto}.OT_mini[_ngcontent-%COMP%]   .OT_name.OT_mode-auto[_ngcontent-%COMP%], .OT_mini[_ngcontent-%COMP%]   .OT_name.OT_mode-off[_ngcontent-%COMP%], .OT_mini[_ngcontent-%COMP%]   .OT_name.OT_mode-on[_ngcontent-%COMP%], .OT_mini[_ngcontent-%COMP%]:hover   .OT_name.OT_mode-auto[_ngcontent-%COMP%]{display:none}.OT_publisher[_ngcontent-%COMP%]   .OT_name[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_name[_ngcontent-%COMP%]{left:10px;right:37px;height:34px;padding-left:0}.OT_publisher[_ngcontent-%COMP%]   .OT_mute[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_mute[_ngcontent-%COMP%]{border:none;cursor:pointer;display:block;position:absolute;text-align:center;text-indent:-9999em;background-color:transparent;background-repeat:no-repeat;right:0;top:0;border-left:1px solid rgba(255,255,255,.2);height:36px;width:37px}.OT_mini[_ngcontent-%COMP%]   .OT_mute[_ngcontent-%COMP%], .OT_publisher.OT_mini[_ngcontent-%COMP%]   .OT_mute.OT_mode-auto.OT_mode-on-hold[_ngcontent-%COMP%], .OT_subscriber.OT_mini[_ngcontent-%COMP%]   .OT_mute.OT_mode-auto.OT_mode-on-hold[_ngcontent-%COMP%]{top:50%;left:50%;right:auto;margin-top:-18px;margin-left:-18.5px;border-left:none}.OT_publisher[_ngcontent-%COMP%]   .OT_mute[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAcCAMAAAC02HQrAAAA1VBMVEUAAAD3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pn3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pn3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj39/j3+Pj3+Pn4+Pk/JRMlAAAAQ3RSTlMABAUHCQoLDhAQERwdHiAjLjAxOD9ASFBRVl1mbnZ6fH2LjI+QkaWqrrC1uLzAwcXJycrL1NXj5Ofo6u3w9fr7/P3+d4M3+QAAAQBJREFUGBlVwYdCglAABdCLlr5Unijm3hMUtBzlBLSr//9JgUToOQgVJgceJgU8aHgMeA38K50ZOpcQmTPwcyXn+JM8M3JJIqQypiIkeXelTyIkGZPwKS1NMia1lgKTVkaE3oQQGYsmHNqSMWnTgUFbMiZtGlD2dpaxrL1XgM0i4ZK8MeAmFhsAs29MGZniawagS63oMOQUNXYB5D0D1RMDpyoMLw/fiE2og/V+PVDR5AiBl0/2Uwik+vx4xV3a5G5Ye68Nd1czjUjZckm6VhmPciRzeCZICjwTJAViQq+3e+St167rAoHK8sLYZVkBYPCZAZ/eGa+2R5LH7Wrc0YFf/O9J3yBDFaoAAAAASUVORK5CYII=);background-position:9px 5px}.OT_publisher[_ngcontent-%COMP%]   .OT_mute.OT_active[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAdCAYAAABFRCf7AAADcElEQVRIiaWVXWhcRRTHf7NNd2aDtUKMIjTpg4ufFIuiUOmDEWm0Vi3VYhXRqIggQh4sWJFSig9+oOhTKSpIRUWMIBIr2kptoTbgU6ooxCiIjR+14kcJmf9sNceHnd3ebnc3Uv9wuXfOzPzmnDMz5zozGwdWAbc65w5RUJQ8cC2wDJgFJioh/MJCMrNxq2vOzK4HmIvRRemxKP0RJWt53o7S+d2Yzsx6gQ+AIUDAnUqpBLzXZd4RYFUlhB/bdZacc3PAOmAcCMC7wfvFwLNdoAPAyx09bXyYWRl4E7gDmAdGlNKFwLYu8GolhO9O87RJd64GbMrgEvB68P4osMWdXLtVV7czlooNpVRWSs8DO7NpR/B+3rBHsvetCgtCMTxwQCm9BbyQrc8F7/uBex3uRCeXO0PrUZ4NfKyUPgWeyj3bg/crDNsIRGwBaJQGorQ3Svdn2wHgc2BUKb0DPJHtjwfvbwRucc7tz+N+i9LFUdoXpfVN36I0CVwBTFI/q9e1LPxT8P4qYEdu70q12mYzWw1MYQzjeJF6zq+shHC4B7jklOBPP/TzSunh4P0DwKvAfb5c9krpe+CcwsEoZdbhEvBM9wxRAl5RShcA9wAngE3B+8tLpdLuwrhp4MNmK0pfRWkySr7NXS8+L5nZbWZWy/Vin1IaitJnUTqvwevJ71lgSSWEFKUfHG7Q2m/xqFJaGry/GXgfGPLl8mJgrXPur2JoUC8Qy3OpG+sAbGhEKT0ErAWOA6uBPWbW1wr9BOgFbgKezot0kAPYqJQA1gC/A9cA+82svzksSn1R+jNKX0SpnM/e1x3yqig92JhrZivM7FjO8bSZLSuCR/Ok16K0KMNHojQWpYko7Y7S1igN5PE3ROl4lNaZ2UVmNpPBU01orvZvZPCeKFXbBR+lEKVtUapFaSZKg9njqpl9aWYTrmXCImA7sCWb9lK/jj9TrwkrgA1AH3AQuKsSwkzbrLfxpgpsBtYDxf/R3xm2ExirhNCuHHZXTsmRwiat+S/zSt06eysVA/4pmGr/G3qm6ik28v29FKgCg8BS6pvS0KNRGgZ+Bb4FpsxsOkfUlMuwDcBWYOUZOHYM2AU8WQmhBifDv70O7PjX7KZ+4G7g3FM8zd6uBIaBy4AqxnIcZwFLCovPAhE4Sj38b4BDwEeVEFKD9S94Khjn486v3QAAAABJRU5ErkJggg==);background-position:9px 4px}.OT_subscriber[_ngcontent-%COMP%]   .OT_mute[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAATCAYAAAB7u5a2AAABx0lEQVQ4jaWUv48NURiGn3ONmCs32ZBd28ht1gqyZAkF21ylQkEiSp2ehpDlD1BoFGqqVdJohYKI7MaPxMoVNghCWMF+7ybLUewnOXfcMWO9yeQ857zne8+XmZOBGjJpr0kvTIomvTZpS526UCO4DUwD64FjwCFgqZnnR+oc8LfgzKQ73vGsr42ZtGjSQFV9o8KfBCacZwCaef4YmAf2rzjcpN3A2WSpm/AssKcqPDNpDBjs410CViXzTwk/A7b1C4wxDgOngAsZcAXY2buDfp/6S4F3lDS8DjgBzDWAjX/Y/e/QgYS/AhsKHa+OMQ6GEJ4Cj4BOAxgq6aCowyZtdf4OtAr+FHDO+R4wWnVbihr3cQnICt4boO38GWj9a/icjwOACt4m4K3zEPA+AxaAtTWCnwN3lzHkEL8V/OPAGud9wK2GF9XR1Wae/1zG2AI+pGYI4VUIoRtjHAc2A9cz4LRPevYCZ+i9/4sJt4GXJU10gaPAzdI2TTro/5Tfz8XEe2LSZGmxq/SDNvP8BnA5WRrx4BwYBe6vONx1EnjovGvBLAAd4Adwuyq8UiaNmDTvr+a8SQ9MuvbfwckBHZPe+QEfTdpep+4XZmPBHiHgz74AAAAASUVORK5CYII=);background-position:8px 7px}.OT_subscriber[_ngcontent-%COMP%]   .OT_mute.OT_active[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAUCAYAAACXtf2DAAACtklEQVQ4jZ2VSYiURxTHf+/T9Nc9iRrBuYySmIsXUU9iFMEFERRBvAjJLUQi5ioiHvSScfTmgqC4XAT1ZIgLuJHkICaaQAgKI2hAUBT30bjUq7bbv4eukXK029F3+eqtv/fqK6qQdEnSNUmT6CDB/bvgfjO4N9zj2RD8007xg1IABkwEzkma0qb4PGAPMBZYLtSD8eNwAEjqTlNI0gNJM4YU7w7ut4O7gvuhZFsR3C8NC5BBLiTIY0mzM8AvqbiC++pk+zLpE95XuwAws3vAQuBPYDRwWtL84P4tsDSLv5oaug4EYOawAMF9jMdoLxqNZcDvQA04UVYqL4G/svj7AF21mhJscrvCksYBFO7xc2AAGGg2mrdjvf4rcAyomNn+slLZmUEGBgsYdh945xZJmgvckDSrEJpK6ySBgV6q12O8ABwGPjGzfWWlsjdN9rpjoSfA+DYDXARGAksK4Is3XC1Ub4z1f4CDQGFmu6tleQSYk0U+p7WVeefLJc00s4fAeWB6Qeunvj0m2ugx9gO7kmlrtSxvBfcy6fXUZS6rgG/S+jLQUwCVNmMC9HqM14EtSe+rluWazN8YEv8IqKZ1E1qnaIDO0ucx3gX6kv6TpM3AM+D/IbGjgP60/gq4WQA33gMA2OQxPgHWJX1ttSwL4FAeZGYLgB2SasBs4A8L7qOBf9M0uXQB3a+TMYSmVctyDrA9mfcBK82smSdKWgCcAaa1bTm4fxbc/8uuCQX3RanAD5Ka6Wo5IGnE0HxJPZ03pQX5Org3MsD3AO5xXLPZXJ9BjkrqdFg6QjZkgG3Jtsw93pG0VFI9QU5K6voYQBHcTydAfwheBI9HgvvPAJIWS3qeIL9JGvUxkO7gfi1BrqTvwkG/pPmSnibIqTzXPgAyEVgBjAEu1qrVPbk/PVTHgb/NbPGg/RVIzOQqzSTBaQAAAABJRU5ErkJggg==);background-position:7px 7px}.OT_publisher[_ngcontent-%COMP%]   .OT_edge-bar-item.OT_mode-auto[_ngcontent-%COMP%], .OT_publisher[_ngcontent-%COMP%]   .OT_edge-bar-item.OT_mode-mini-auto[_ngcontent-%COMP%], .OT_publisher[_ngcontent-%COMP%]   .OT_edge-bar-item.OT_mode-off[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_edge-bar-item.OT_mode-auto[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_edge-bar-item.OT_mode-mini-auto[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_edge-bar-item.OT_mode-off[_ngcontent-%COMP%]{top:-25px;opacity:0}.OT_publisher[_ngcontent-%COMP%]   .OT_edge-bar-item.OT_mode-off[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_edge-bar-item.OT_mode-off[_ngcontent-%COMP%]{display:none}.OT_mini[_ngcontent-%COMP%]   .OT_mute.OT_mode-auto[_ngcontent-%COMP%], .OT_publisher[_ngcontent-%COMP%]   .OT_mute.OT_mode-mini-auto[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_mute.OT_mode-mini-auto[_ngcontent-%COMP%]{top:50%}.OT_publisher[_ngcontent-%COMP%]   .OT_edge-bar-item.OT_edge-bottom.OT_mode-auto[_ngcontent-%COMP%], .OT_publisher[_ngcontent-%COMP%]   .OT_edge-bar-item.OT_edge-bottom.OT_mode-mini-auto[_ngcontent-%COMP%], .OT_publisher[_ngcontent-%COMP%]   .OT_edge-bar-item.OT_edge-bottom.OT_mode-off[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_edge-bar-item.OT_edge-bottom.OT_mode-auto[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_edge-bar-item.OT_edge-bottom.OT_mode-mini-auto[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_edge-bar-item.OT_edge-bottom.OT_mode-off[_ngcontent-%COMP%]{top:auto;bottom:-25px}.OT_publisher[_ngcontent-%COMP%]   .OT_edge-bar-item.OT_mode-auto.OT_mode-on-hold[_ngcontent-%COMP%], .OT_publisher[_ngcontent-%COMP%]   .OT_edge-bar-item.OT_mode-on[_ngcontent-%COMP%], .OT_publisher[_ngcontent-%COMP%]:hover   .OT_edge-bar-item.OT_mode-auto[_ngcontent-%COMP%], .OT_publisher[_ngcontent-%COMP%]:hover   .OT_edge-bar-item.OT_mode-mini-auto[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_edge-bar-item.OT_mode-auto.OT_mode-on-hold[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_edge-bar-item.OT_mode-on[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]:hover   .OT_edge-bar-item.OT_mode-auto[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]:hover   .OT_edge-bar-item.OT_mode-mini-auto[_ngcontent-%COMP%]{top:0;opacity:1}.OT_mini[_ngcontent-%COMP%]   .OT_mute.OT_mode-on[_ngcontent-%COMP%], .OT_mini[_ngcontent-%COMP%]:hover   .OT_mute.OT_mode-auto[_ngcontent-%COMP%], .OT_mute.OT_mode-mini[_ngcontent-%COMP%], .OT_root[_ngcontent-%COMP%]:hover   .OT_mute.OT_mode-mini-auto[_ngcontent-%COMP%]{top:50%}.OT_publisher[_ngcontent-%COMP%]   .OT_edge-bar-item.OT_edge-bottom.OT_mode-on[_ngcontent-%COMP%], .OT_publisher[_ngcontent-%COMP%]:hover   .OT_edge-bar-item.OT_edge-bottom.OT_mode-auto[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_edge-bar-item.OT_edge-bottom.OT_mode-on[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]:hover   .OT_edge-bar-item.OT_edge-bottom.OT_mode-auto[_ngcontent-%COMP%]{top:auto;bottom:0;opacity:1}.OT_root[_ngcontent-%COMP%]   .OT_video-loading[_ngcontent-%COMP%]{position:absolute;z-index:1;width:100%;height:100%;display:none;background-color:rgba(0,0,0,.75)}.OT_root[_ngcontent-%COMP%]   .OT_video-loading[_ngcontent-%COMP%]   .OT_video-loading-spinner[_ngcontent-%COMP%]{background:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0yMCAtMjAgMjQwIDI0MCI+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJhIiB4Mj0iMCIgeTI9IjEiPjxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iI2ZmZiIgc3RvcC1vcGFjaXR5PSIwIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9IjAiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iYiIgeDE9IjEiIHgyPSIwIiB5Mj0iMSI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9IjAiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmZmYiIHN0b3Atb3BhY2l0eT0iLjA4Ii8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImMiIHgxPSIxIiB4Mj0iMCIgeTE9IjEiPjxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iI2ZmZiIgc3RvcC1vcGFjaXR5PSIuMDgiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmZmYiIHN0b3Atb3BhY2l0eT0iLjE2Ii8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImQiIHgyPSIwIiB5MT0iMSI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9Ii4xNiIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI2ZmZiIgc3RvcC1vcGFjaXR5PSIuMzMiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iZSIgeDI9IjEiIHkxPSIxIj48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiNmZmYiIHN0b3Atb3BhY2l0eT0iLjMzIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9Ii42NiIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJmIiB4Mj0iMSIgeTI9IjEiPjxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iI2ZmZiIgc3RvcC1vcGFjaXR5PSIuNjYiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmZmYiLz48L2xpbmVhckdyYWRpZW50PjxtYXNrIGlkPSJnIj48ZyBmaWxsPSJub25lIiBzdHJva2Utd2lkdGg9IjQwIj48cGF0aCBzdHJva2U9InVybCgjYSkiIGQ9Ik04Ni42LTUwYTEwMCAxMDAgMCAwIDEgMCAxMDAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwMCAxMDApIi8+PHBhdGggc3Ryb2tlPSJ1cmwoI2IpIiBkPSJNODYuNiA1MEExMDAgMTAwIDAgMCAxIDAgMTAwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMDAgMTAwKSIvPjxwYXRoIHN0cm9rZT0idXJsKCNjKSIgZD0iTTAgMTAwYTEwMCAxMDAgMCAwIDEtODYuNi01MCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTAwIDEwMCkiLz48cGF0aCBzdHJva2U9InVybCgjZCkiIGQ9Ik0tODYuNiA1MGExMDAgMTAwIDAgMCAxIDAtMTAwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMDAgMTAwKSIvPjxwYXRoIHN0cm9rZT0idXJsKCNlKSIgZD0iTS04Ni42LTUwQTEwMCAxMDAgMCAwIDEgMC0xMDAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwMCAxMDApIi8+PHBhdGggc3Ryb2tlPSJ1cmwoI2YpIiBkPSJNMC0xMDBhMTAwIDEwMCAwIDAgMSA4Ni42IDUwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMDAgMTAwKSIvPjwvZz48L21hc2s+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHg9Ii0yMCIgeT0iLTIwIiBtYXNrPSJ1cmwoI2cpIiBmaWxsPSIjZmZmIi8+PC9zdmc+) no-repeat;position:absolute;width:32px;height:32px;left:50%;top:50%;margin-left:-16px;margin-top:-16px;-webkit-animation:2s linear infinite OT_spin;animation:2s linear infinite OT_spin}@-webkit-keyframes OT_spin{100%{-webkit-transform:rotate(360deg)}}@keyframes OT_spin{100%{transform:rotate(360deg)}}.OT_publisher.OT_loading[_ngcontent-%COMP%]   .OT_video-loading[_ngcontent-%COMP%], .OT_subscriber.OT_loading[_ngcontent-%COMP%]   .OT_video-loading[_ngcontent-%COMP%]{display:block}.OT_video-centering[_ngcontent-%COMP%]{display:table;width:100%;height:100%}.OT_video-container[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle}.OT_video-poster[_ngcontent-%COMP%]{position:absolute;z-index:1;width:100%;height:100%;display:none;opacity:.25;background-repeat:no-repeat;background-image:url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgNDcxIDQ2NCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48bGluZWFyR3JhZGllbnQgaWQ9ImEiIHgyPSIwIiB5Mj0iMSI+PHN0b3Agb2Zmc2V0PSI2Ni42NiUiIHN0b3AtY29sb3I9IiNmZmYiLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZmYiIHN0b3Atb3BhY2l0eT0iMCIvPjwvbGluZWFyR3JhZGllbnQ+PHBhdGggZmlsbD0idXJsKCNhKSIgZD0iTTc5IDMwOGMxNC4yNS02LjUgNTQuMjUtMTkuNzUgNzEtMjkgOS0zLjI1IDI1LTIxIDI1LTIxczMuNzUtMTMgMy0yMmMtMS43NS02Ljc1LTE1LTQzLTE1LTQzLTIuNSAzLTQuNzQxIDMuMjU5LTcgMS0zLjI1LTcuNS0yMC41LTQ0LjUtMTYtNTcgMS4yNS03LjUgMTAtNiAxMC02LTExLjI1LTMzLjc1LTgtNjctOC02N3MuMDczLTcuMzQ2IDYtMTVjLTMuNDguNjM3LTkgNC05IDQgMi41NjMtMTEuNzI3IDE1LTIxIDE1LTIxIC4xNDgtLjMxMi0xLjMyMS0xLjQ1NC0xMCAxIDEuNS0yLjc4IDE2LjY3NS04LjY1NCAzMC0xMSAzLjc4Ny05LjM2MSAxMi43ODItMTcuMzk4IDIyLTIyLTIuMzY1IDMuMTMzLTMgNi0zIDZzMTUuNjQ3LTguMDg4IDQxLTZjLTE5Ljc1IDItMjQgNi0yNCA2czc0LjUtMTAuNzUgMTA0IDM3YzcuNSA5LjUgMjQuNzUgNTUuNzUgMTAgODkgMy43NS0xLjUgNC41LTQuNSA5IDEgLjI1IDE0Ljc1LTExLjUgNjMtMTkgNjItMi43NSAxLTQtMy00LTMtMTAuNzUgMjkuNS0xNCAzOC0xNCAzOC0yIDQuMjUtMy43NSAxOC41LTEgMjIgMS4yNSA0LjUgMjMgMjMgMjMgMjNsMTI3IDUzYzM3IDM1IDIzIDEzNSAyMyAxMzVMMCA0NjRzLTMtOTYuNzUgMTQtMTIwYzUuMjUtNi4yNSAyMS43NS0xOS43NSA2NS0zNnoiLz48L3N2Zz4=);background-size:auto 76%}.OT_fit-mode-cover[_ngcontent-%COMP%]   .OT_video-element[_ngcontent-%COMP%]{-o-object-fit:cover;object-fit:cover}@media only screen and (orientation:portrait){.OT_subscriber.OT_ForceContain.OT_fit-mode-cover[_ngcontent-%COMP%]   .OT_video-element[_ngcontent-%COMP%]{-o-object-fit:contain!important;object-fit:contain!important}}.OT_fit-mode-contain[_ngcontent-%COMP%]   .OT_video-element[_ngcontent-%COMP%]{-o-object-fit:contain;object-fit:contain}.OT_fit-mode-cover[_ngcontent-%COMP%]   .OT_video-poster[_ngcontent-%COMP%]{background-position:center bottom}.OT_fit-mode-contain[_ngcontent-%COMP%]   .OT_video-poster[_ngcontent-%COMP%]{background-position:center}.OT_audio-level-meter[_ngcontent-%COMP%]{position:absolute;width:25%;max-width:224px;min-width:21px;top:0;right:0;overflow:hidden}.OT_audio-level-meter[_ngcontent-%COMP%]:before{content:'';display:block;padding-top:100%}.OT_audio-level-meter__bar[_ngcontent-%COMP%]{position:absolute;width:192%;height:192%;top:-96%;right:-96%;border-radius:50%;background-color:rgba(0,0,0,.8)}.OT_audio-level-meter__audio-only-img[_ngcontent-%COMP%]{position:absolute;top:22%;right:15%;width:40%;opacity:.7;background:url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgNzkgODYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI2ZmZiI+PHBhdGggZD0iTTkuNzU3IDQwLjkyNGMzLjczOC01LjE5MSAxMi43MTEtNC4zMDggMTIuNzExLTQuMzA4IDIuMjIzIDMuMDE0IDUuMTI2IDI0LjU4NiAzLjYyNCAyOC43MTgtMS40MDEgMS4zMDEtMTEuNjExIDEuNjI5LTEzLjM4LTEuNDM2LTEuMjI2LTguODA0LTIuOTU1LTIyLjk3NS0yLjk1NS0yMi45NzV6bTU4Ljc4NSAwYy0zLjczNy01LjE5MS0xMi43MTEtNC4zMDgtMTIuNzExLTQuMzA4LTIuMjIzIDMuMDE0LTUuMTI2IDI0LjU4Ni0zLjYyNCAyOC43MTggMS40MDEgMS4zMDEgMTEuNjExIDEuNjI5IDEzLjM4LTEuNDM2IDEuMjI2LTguODA0IDIuOTU1LTIyLjk3NSAyLjk1NS0yMi45NzV6Ii8+PHBhdGggZD0iTTY4LjY0NyA1OC42Yy43MjktNC43NTMgMi4zOC05LjU2MSAyLjM4LTE0LjgwNCAwLTIxLjQxMi0xNC4xMTUtMzguNzctMzEuNTI4LTM4Ljc3LTE3LjQxMiAwLTMxLjUyNyAxNy4zNTgtMzEuNTI3IDM4Ljc3IDAgNC41NDEuNTE1IDguOTM2IDEuODAyIDEyLjk1IDEuNjk4IDUuMjk1LTUuNTQyIDYuOTkxLTYuNjE2IDIuMDczQzIuNDEgNTUuMzk0IDAgNTEuNzg3IDAgNDguMTAzIDAgMjEuNTM2IDE3LjY4NSAwIDM5LjUgMCA2MS4zMTYgMCA3OSAyMS41MzYgNzkgNDguMTAzYzAgLjcxOC0yLjg5OSA5LjY5My0zLjI5MiAxMS40MDgtLjc1NCAzLjI5My03Ljc1MSAzLjU4OS03LjA2MS0uOTEyeiIvPjxwYXRoIGQ9Ik01LjA4NCA1MS4zODVjLS44MDQtMy43ODIuNTY5LTcuMzM1IDMuMTM0LTcuOTIxIDIuNjM2LS42MDMgNS40ODUgMi4xNSA2LjI4OSA2LjEzMi43OTcgMy45NDgtLjc1MiA3LjQ1Ny0zLjM4OCA3Ljg1OS0yLjU2Ni4zOTEtNS4yMzctMi4zMTgtNi4wMzQtNi4wN3ptNjguODM0IDBjLjgwNC0zLjc4Mi0uNTY4LTcuMzM1LTMuMTMzLTcuOTIxLTIuNjM2LS42MDMtNS40ODUgMi4xNS02LjI4OSA2LjEzMi0uNzk3IDMuOTQ4Ljc1MiA3LjQ1NyAzLjM4OSA3Ljg1OSAyLjU2NS4zOTEgNS4yMzctMi4zMTggNi4wMzQtNi4wN3ptLTIuMDM4IDguMjg4Yy0uOTI2IDE5LjY1OS0xNS4xMTIgMjQuNzU5LTI1Ljg1OSAyMC40NzUtNS40MDUtLjYwNi0zLjAzNCAxLjI2Mi0zLjAzNCAxLjI2MiAxMy42NjEgMy41NjIgMjYuMTY4IDMuNDk3IDMxLjI3My0yMC41NDktLjU4NS00LjUxMS0yLjM3OS0xLjE4Ny0yLjM3OS0xLjE4N3oiLz48cGF0aCBkPSJNNDEuNjYyIDc4LjQyMmw3LjU1My41NWMxLjE5Mi4xMDcgMi4xMiAxLjE1MyAyLjA3MiAyLjMzNWwtLjEwOSAyLjczOGMtLjA0NyAxLjE4Mi0xLjA1MSAyLjA1NC0yLjI0MyAxLjk0NmwtNy41NTMtLjU1Yy0xLjE5MS0uMTA3LTIuMTE5LTEuMTUzLTIuMDcyLTIuMzM1bC4xMDktMi43MzdjLjA0Ny0xLjE4MiAxLjA1Mi0yLjA1NCAyLjI0My0xLjk0N3oiLz48L2c+PC9zdmc+) center no-repeat}.OT_audio-level-meter__audio-only-img[_ngcontent-%COMP%]:before{content:'';display:block;padding-top:100%}.OT_audio-level-meter__value[_ngcontent-%COMP%]{position:absolute;border-radius:50%;background-image:radial-gradient(circle,#97ce00 0,rgba(151,206,0,0) 100%)}.OT_audio-level-meter.OT_mode-off[_ngcontent-%COMP%]{display:none}.OT_audio-level-meter.OT_mode-on[_ngcontent-%COMP%], .OT_audio-only[_ngcontent-%COMP%]   .OT_audio-level-meter.OT_mode-auto[_ngcontent-%COMP%]{display:block}.OT_audio-only.OT_publisher[_ngcontent-%COMP%]   .OT_video-element[_ngcontent-%COMP%], .OT_audio-only.OT_subscriber[_ngcontent-%COMP%]   .OT_video-element[_ngcontent-%COMP%]{display:none}.OT_video-disabled-indicator[_ngcontent-%COMP%]{opacity:1;border:none;display:none;position:absolute;background-color:transparent;background-repeat:no-repeat;background-position:bottom right;pointer-events:none;top:0;left:0;bottom:3px;right:3px}.OT_video-disabled[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFIAAAAoCAYAAABtla08AAAINUlEQVR42u2aaUxUVxTHcRBmAAEBRVTK4sKwDIsg+wCK7CqIw1CN1YobbbS2qYlJ06Qx1UpdqMbYWq2pSzWmH6ytNbXWJY1Lq7VuqBERtW64V0XFLYae0/xvcp3MMAMzDz6IyT/ge2ce5/7ucpY3Ts3NzZ1ygF57AJ0gO0G2jyZPmdbFyclJSAV1EeoEaUUSLGdSV5KLLFxzFmA7QVqGqDqjixhWkxCVeyRVl38wM6bwj6yYItYK47BAuu9B0gCqs6Ng2r494KQtkj/Dz2jHraw6qw2fdSE4rNmcCPCvZONP8iF1I6kdBdMaQJWZLeJqRWa2kPJAxXY+GxE+zxLI03GRh8lGSwoi9WCY8FWlCEh+8JOnT7MfPGjMuXX7Tt61hoaCi/9cKmKdv3BxeEtim/UbNpnbQiqF4MmT7kqrbr4lkMcTo46TTSpJB5g+8NHuVWnWuaampvhmO/7duHmrGluoO4C6OsJZGRrkDIld43ZqUOTnlkDSmXmabAoBU0vqBf+6KgFSxQ9++uzZ8rZApM81TJ8xM5me0Z/UF7PuBmdVdkGEb5gYDeQmyZNW3SJLIP9Kj64lGyMpmxRN6sOfIbkoAhKOdnv2/PmB1kB88eLFo+olyyrps3rSINIAzLonnqlqK8R9w+L86vtrt5L2nhug3Vc3ULu/Liz8AOuXESlZZONH6kmr7gtLIA9lRNeRzVukAvj3BslLnJNKgfScO69K+/Lly0ZbQW7e8tNK+pwBjqaSIjDrXgJkW1ciAZvbQjQ+RDahpBBKd5ZZsqN758hmImk4KQHnpDd8UwSkCyJarx07d4+3BeKJmlMHyX4qaRxpBCmNFE4KENvHDpAutVERn1kCVBMfeRRgYvZnx62wZPdnZkw92VQA5GClQXYRBze2S+iJmpPVVoJLA9l9QKokjcWKTCT1R5rhLg70NuSsziT16diIKkuAjibrTpJNDkn/e17CahtAjlAWJAYkb29Sb1LE9Rs391kILk8mVkyuIpuZcLKUlEmKkra1WuSTNuesEPzwoEploSVAh9Oiz+BIyd9dOHhtx4OEpFpVg6gbNK3yXX1j48N6U5Dz5i/gc/FDrMY3sTLiSMEkXxGxzUEUAGnbxlPaksMlHUXWAlHS8URCPseSohZbCSLjSSU7ixLXdzhIWVKq4Y7t2a/2bN0qGeKly1fYsVmk6RgIDz4J0bonyUOcjeYqm/8hRoYbWkigV2NH9CHAS60EkUkkw47hSRs6FqT1LR5AVcsrueXlK1d5AO+RpmBrZZEiefByytPCanRGNLZY0uF52gNDYr9sCRB8MHY0SJu2OJWKS2WQV65e4y31DmkCImEi0hBfufRime0RIhpbKen0/Ny9OYNW2ghyYytABjNIaxNuKttAWk6HPLn0k0FevdZwFinPWFIuKZbUV16NVko6jbWSDoPO3pOf8K0jQWLSQ0S9bdpkYck+m7vfWpAiHfKgBsZiGSSt0FqcTeU8WETqAHE2CgcAVd3Gkm4MD3xXYeI6B4NMItvKbcUpQ9gP+KMWnSsW+TaYJtoo+avBWLoKoK0CCSDud+7eXWQGZAXqV3YoQjQCfixJ8+fzj9ta3JHhlUeJ8wJOY2ws6eRKpPS3oqTvHAESEz9ya0naXL5WH6pt3FqSOhTHkTcKEXc6k1POh4Q9YJu/03TT4a8PoGMFI4i2EqSbOZAYaBkpCyD92RkG6KCSbjI/H0HEISBnlOZPFdcEzI2GTO4KBZICGKyAKLTEmJOB2txf5MbgohBINCl4FTqmpJMB2W+HiRn1Q2l6lXyPmiEP6VVE2TfGoaMYrHyPdtAnyI0jEOn9RLWmNEhvBBE7SjpFQZaShtLK+1S+T12lRwxUvrZlVPp8jE1PikeO7C/nyEqBDCB1t7+kUx4kKUWclea0yZC5BIGpiJSNSD9QgFR0RQKkL6KxHSWdsiARHJNYewoGrzG1/bk4dTPSunL2EyDjcbb7MQ+lQfZmkKiN7SjpFAM5CWAyGcwyY84YsZ1lUcbRNNtQMAdtQWGvQ0DyVjzYAKQfQFodeAeC1C8vzymXIZqD+ZEh/2OyLSalS/3VbnJZ+VqDXGjMrTCFuK4s66vVZUNfqaDolcbjOcb899sLpEE+I20GifywXe2QR3KElu99PzqjGufhREqB1pjCnG3IL3fY1v733r2FMsiGhutn0LAoJWWIGbPxjKwgjUbF0m52mPhigrpdXOecEq9pR6MkHbu2LOtrcZ9y3d0ODTb15y9MePz48aF79+8fvXnr9sljx2u2I7KNxDuaMPGVECoRs7mC4eT7SIruFNfNHK15MKuM2evwNq+4qjxvGnd5CHwNNynawW4cOlUZdG8b55IIJHmkItwrZHH6QxB3OSL9kTtAGpIvZiQB3Z4SKBfXQtEE9sashWAW87Bt3sYZNR6zn4uzJwWDKUKXfaKCdqUoBpLxSjYe9nqGiwWRBGipuGZ3Qm76itYLbbJI/PEhUApfw73uOIy9xfse3M9F9BuFJHcYrseSouGkHtCVtkuGTTikI8XgZzhg9SeF4VqcvSWiaSvNHQ8JwkNjIfEHemCmNLD1RaEfLs18mlgNuN6PFALHo7CyU5W2g00gFAQF4ozvibH04muwDbWraSFAyt/AAMzewgGR8uCeWn77xzBxPxgzPRCDDMZ14bQ/3jqGKGoHf2Hjgx3kw5LbaJDYWb52t9FMgw4AuWNWukNeuOYqOsmQi2jgws4PA/DD/z0B2x0/veCs4naw0cgybezid7X9jV3rX2RSs0wfLkll4pBGcgifg+NYxe1kJ2ycTaRq66uG/wBOl0vjcw70xwAAAABJRU5ErkJggg==);background-size:33px auto}.OT_video-disabled-warning[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFIAAAAoCAYAAABtla08AAAGMElEQVR4Ae2aA7D0yBaAc7oH12vbRmlLaxYWb23btm3btm2899a2bWuYtPZ01cmtU9lJrib315yqr9I3Oem/5/s7acwEnehEJzoxCcX2O+wEeIgRBDDaGjAZOgQ6ihRpLklHZDJIXK1WWymMIhGGkVBKCWMM+Iv/f/b5t7faYtM/sGgIS7j8RNLjceUVl41GvGN1BFiHy9sgtRWaYbhvuVQ6o1VOvV5/tLe3dyssKoZuh8xClkDEi2MMS6ZjR0cScxdK/+HgnJsmLccYOx0e/PUGUqfTJDEHkV5go9lcMQoj4R8RpSIRRUr4a9baTJFCCNfqESKJ7RYJibK0xoi05EhFRTxMi1Rit6xHAuLaKRLwEVi6q1x+EhlVpd3d3Wfh4VQkQhRhxthYLg7SRGqdLlIp7UVOHf+JhEhEMscUolVje3p63saeeOFoKsT7fjj++BNuw2I/0ouUENmGaQcQEilQvUU6xuWC0kqmVWCt8df6kG7WLoFA20VSCOyNh0RKPT+SyrTWtQsvuvTYCy84z3+oAdbgAiLGIvHjTz6bFuu/B3lKKfVkFKknwih6EnnipZdfXQZzepAupXSGSCfwUGZtkrx3t/0dSQGnnXbmdocdetArQoj+4VR23wMP3bj/vnv9Sv/rBmkish09ca655thHSrlWq4TFF1vkNDxsgjiUnPqZnHPABIq47jx7pPMcecShfz7x1DO7D6eit99576X1113nVd8rqLGAuDaNitJonTGIqHgQGQjDsJglMrUH5iDSEQbRa6y2yrNvv/PuWVmV/PTzLz8steTit1B9FtGJeZrJksmWdBzBMcami4xUkaY1A1Qe94WIaPGBApJhaERrLrXkElf8+NPPz6YMLs1DDjn0Wn9PnI/UiQadM4jNEkhzVsEGE8nIHESM1j5/KqRX+/IEiOQ/yifNBlEkpnb00cccesbpp13T3983H88/48xzrrvm6it/8U5JXgX5G6nSvSq1R5LATR7aYGkwMG1RSwkWABH+4jUb3vT/uJ1Z0xpjraTBRltrxUQhksIRmgTJyy69+Pv99tv3qYX6FxgU+fU33352xGEHf5wisU7nNWJpZRMkAjZ6aIN1mwV7h29Jo2wCHlveu/GV169z65E+T6koexCh6c+EEiky3lnxQKFjUeVyOeI5AOBzIiayRhJryd7YYnkIHgvB0qk9Tdql6N3XH4bRUIOIIIKJSiRb0hkSEpZKRd1CpEq8GxtIyCVmDSgFl94GacTgaJw1rUlYhYng0c4ewaUsmKRIJjpiqMSOCh9QeI+UYECmtQIsxEu6OorEcv6Rl0gu0woh8MhFkmSCTXVI4pC704WCFRJvSRNJSzrMMEZO2iKZTCHAZYnmvXCny7ed5vfZK3viHSBdIFCKEFj2+nt+73nw8m2uedcLJlktA++VNMEPaR45aYukcKnnCfY3/DFbZS8t7eHxNgsPM0N1hXhJJwwM1QbpoQFlog2R13a/zBxEYHAQEUYUM6qiVwEyBYoM6JFNF2kFLelI5KQf+fVI4dJFCguDS7oAyx2R6SFQJKRedSDj/cMg/RXQ6ZE05GSIDAaXdCi1I3L021SQWNJ1RLY5OiIdL4/yvuw8ADfWPFrSciaMyH8tEQPwf1uGG54g5+KlJGTmsrxsQdl5PKidnPFe2QS///7Hu+VS6WX/HYnf0sevGL7lXydwod2/9DykZq0s5yff0sgSWCigNOH7TPHL7ufj+/TH8P/+qYpL4HkBDiRYpEXeM8/89/9zzjn7EtY64dfd1nqccM7Bs8+9MKy8555/8TnKS+5MufH6EZVASkgPzf+mJXroet17JirU0ALST3nT0y5ONyLpeo1y64ih+vuQfsoTOeRFSJXa+SvyB90TUmdw49EjLaKpMQ0mzEeTzkWsd/oI6fzfiKM8gWg6X6OjpXstu5ZHnmIb0GFiu29MIUfUewkmVrEN3RqVQ/bY8FzNcquMBv/pCNUZ5pHHem01KdN/I/DG66/lLhKSvTO5M84kav5C5z2ZfyAivi9i9VGd45RH7UWJbjwGG/7NYsRECt7jiOToHedKAui8SW4CsxyRc54mKH/8f7ELhCCACyNcIl/wI+FaAJyc8yzRtinQPzWzuFZrFHq/AAAAAElFTkSuQmCC);background-size:33px auto}.OT_video-disabled-indicator.OT_active[_ngcontent-%COMP%]{display:block}.OT_audio-blocked-indicator[_ngcontent-%COMP%]{opacity:1;border:none;display:none;position:absolute;background-color:transparent;background-repeat:no-repeat;background-position:center;pointer-events:none;top:0;left:0;bottom:0;right:0}.OT_audio-blocked[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMTUwIiBoZWlnaHQ9IjkwIj48ZGVmcz48cGF0aCBkPSJNNjcgMTJMNi40NDggNzIuNTUyIDAgMzFWMThMMjYgMGw0MSAxMnptMyA3bDYgNDctMjkgMTgtMzUuNTAyLTYuNDk4TDcwIDE5eiIgaWQ9ImEiLz48L2RlZnM+PHJlY3Qgd2lkdGg9IjE1MCIgaGVpZ2h0PSI5MCIgcng9IjM1IiByeT0iNDUiIG9wYWNpdHk9Ii41Ii8+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzNikiPjxtYXNrIGlkPSJiIiBmaWxsPSIjZmZmIj48dXNlIHhsaW5rOmhyZWY9IiNhIi8+PC9tYXNrPjxwYXRoIGQ9Ik0zOS4yNDkgNTEuMzEyYy42OTcgMTAuMzcgMi43ODUgMTcuODk3IDUuMjUxIDE3Ljg5NyAzLjAzOCAwIDUuNS0xMS40MTcgNS41LTI1LjVzLTIuNDYyLTI1LjUtNS41LTI1LjVjLTIuNTEgMC00LjYyOCA3Ljc5Ny01LjI4NyAxOC40NTNBOC45ODkgOC45ODkgMCAwIDEgNDMgNDRhOC45ODggOC45ODggMCAwIDEtMy43NTEgNy4zMTJ6TTIwLjk4NSAzMi4yMjRsMTUuNzQ2LTE2Ljg3N2E3LjM4NSA3LjM4NSAwIDAgMSAxMC4zNzQtLjQyQzUxLjcwMiAxOS4xMTQgNTQgMjkuMjA4IDU0IDQ1LjIwOGMwIDE0LjUyNy0yLjM0MyAyMy44OC03LjAzIDI4LjA1OGE3LjI4IDcuMjggMCAwIDEtMTAuMTY4LS40NjhMMjAuNDA1IDU1LjIyNEgxMmE1IDUgMCAwIDEtNS01di0xM2E1IDUgMCAwIDEgNS01aDguOTg1eiIgZmlsbD0iI0ZGRiIgbWFzaz0idXJsKCNiKSIvPjwvZz48cGF0aCBkPSJNMTA2LjUgMTMuNUw0NC45OTggNzUuMDAyIiBzdHJva2U9IiNGRkYiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+PC9nPjwvc3ZnPg==);background-size:90px auto}.OT_container-audio-blocked[_ngcontent-%COMP%]{cursor:pointer}.OT_container-audio-blocked[_ngcontent-%COMP%]   .OT_mute[_ngcontent-%COMP%], .OT_container-audio-blocked.OT_mini[_ngcontent-%COMP%]   .OT_edge-bar-item[_ngcontent-%COMP%]{display:none}.OT_audio-blocked-indicator.OT_active[_ngcontent-%COMP%]{display:block}.OT_video-unsupported[_ngcontent-%COMP%]{opacity:1;border:none;display:none;position:absolute;background-color:transparent;background-repeat:no-repeat;background-position:center;background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOTciIGhlaWdodD0iOTAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxwYXRoIGQ9Ik03MCAxMkw5LjQ0OCA3Mi41NTIgMCA2MmwzLTQ0TDI5IDBsNDEgMTJ6bTggMmwxIDUyLTI5IDE4LTM1LjUwMi02LjQ5OEw3OCAxNHoiIGlkPSJhIi8+PC9kZWZzPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOCAzKSI+PG1hc2sgaWQ9ImIiIGZpbGw9IiNmZmYiPjx1c2UgeGxpbms6aHJlZj0iI2EiLz48L21hc2s+PHBhdGggZD0iTTkuMTEgMjAuOTY4SDQ4LjFhNSA1IDAgMCAxIDUgNVY1OC4xOGE1IDUgMCAwIDEtNSA1SDkuMTFhNSA1IDAgMCAxLTUtNVYyNS45N2E1IDUgMCAwIDEgNS01em00Ny4wOCAxMy4zOTRjMC0uMzQ1IDUuNDcyLTMuMTU5IDE2LjQxNS04LjQ0M2EzIDMgMCAwIDEgNC4zMDQgMi43MDJ2MjYuODM1YTMgMyAwIDAgMS00LjMwNSAyLjcwMWMtMTAuOTQyLTUuMjg2LTE2LjQxMy04LjEtMTYuNDEzLTguNDQ2VjM0LjM2MnoiIGZpbGw9IiNGRkYiIG1hc2s9InVybCgjYikiLz48L2c+PHBhdGggZD0iTTgxLjUgMTYuNUwxOS45OTggNzguMDAyIiBzdHJva2U9IiNGRkYiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+PC9nPjwvc3ZnPg==);background-size:58px auto;pointer-events:none;top:0;left:0;bottom:0;right:0;margin-top:-30px}.OT_video-unsupported-bar[_ngcontent-%COMP%]{display:none;position:absolute;width:192%;height:192%;top:-96%;left:-96%;border-radius:50%;background-color:rgba(0,0,0,.8)}.OT_video-unsupported-img[_ngcontent-%COMP%]{display:none;position:absolute;top:11%;left:15%;width:70%;opacity:.7;background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOTciIGhlaWdodD0iOTAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxwYXRoIGQ9Ik03MCAxMkw5LjQ0OCA3Mi41NTIgMCA2MmwzLTQ0TDI5IDBsNDEgMTJ6bTggMmwxIDUyLTI5IDE4LTM1LjUwMi02LjQ5OEw3OCAxNHoiIGlkPSJhIi8+PC9kZWZzPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOCAzKSI+PG1hc2sgaWQ9ImIiIGZpbGw9IiNmZmYiPjx1c2UgeGxpbms6aHJlZj0iI2EiLz48L21hc2s+PHBhdGggZD0iTTkuMTEgMjAuOTY4SDQ4LjFhNSA1IDAgMCAxIDUgNVY1OC4xOGE1IDUgMCAwIDEtNSA1SDkuMTFhNSA1IDAgMCAxLTUtNVYyNS45N2E1IDUgMCAwIDEgNS01em00Ny4wOCAxMy4zOTRjMC0uMzQ1IDUuNDcyLTMuMTU5IDE2LjQxNS04LjQ0M2EzIDMgMCAwIDEgNC4zMDQgMi43MDJ2MjYuODM1YTMgMyAwIDAgMS00LjMwNSAyLjcwMWMtMTAuOTQyLTUuMjg2LTE2LjQxMy04LjEtMTYuNDEzLTguNDQ2VjM0LjM2MnoiIGZpbGw9IiNGRkYiIG1hc2s9InVybCgjYikiLz48L2c+PHBhdGggZD0iTTgxLjUgMTYuNUwxOS45OTggNzguMDAyIiBzdHJva2U9IiNGRkYiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+PC9nPjwvc3ZnPg==);background-repeat:no-repeat;background-position:center;background-size:100% auto}.OT_video-unsupported-img[_ngcontent-%COMP%]:before{content:'';display:block;padding-top:93%}.OT_video-unsupported-text[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;text-align:center;height:100%;margin-top:40px}@media only screen and (max-width:600px){#videoRoomNavBar[_ngcontent-%COMP%]{width:100%}}"]}),e})();class vt extends class{constructor(){this.theme=dt.DARK,this.ovSettings=new at}getComponentName(){}getOvSettings(){return this.ovSettings}getSessionName(){return this.sessionName}getOvServerUrl(){return this.ovServerUrl}getOvSecret(){return this.ovSecret}getTheme(){return this.theme}getNickname(){return this.nickname}getTokens(){return this.tokens}getScreenToken(){return this.tokens[1]}getWebcamToken(){return this.tokens[0]}setOvSettings(e){e&&this.ovSettings.set(e)}setSessionName(e){this.sessionName=e}setOvServerUrl(e){this.ovServerUrl=e}setOvSecret(e){this.ovSecret=e}setTheme(e){Object.values(dt).includes(e)&&(this.theme=e===dt.DARK?dt.DARK:dt.LIGHT)}setNickname(e){this.nickname=e}setTokens(e){this.tokens=e}canJoinToSession(){return this.canOVCallGenerateToken()||this.hasReceivedToken()}hasTokens(){var e;return(null===(e=this.tokens)||void 0===e?void 0:e.length)>0}canOVCallGenerateToken(){return!!(this.sessionName&&this.ovServerUrl&&this.ovSecret&&this.nickname)}hasReceivedToken(){return!!this.tokens&&this.tokens.length>0&&!!this.nickname}}{constructor(){super(),this.NAME="Angular Library"}setTokens(e){var t;e&&(this.ovSettings.setScreenSharing(this.ovSettings.hasScreenSharing()&&(null===(t=e)||void 0===t?void 0:t.length)>1),super.setTokens(e))}getComponentName(){return this.NAME}}let Ct=(()=>{let e=class{constructor(e){this.loggerSrv=e,this.display=!1,this.sessionCreated=new o.o,this.publisherCreated=new o.o,this.error=new o.o,this.joinSession=new o.o,this.leaveSession=new o.o,this.log=this.loggerSrv.get("OpenviduSessionComponent")}ngOnInit(){this.angularLibrary=new vt,this.angularLibrary.setOvSettings(this.ovSettings),this.angularLibrary.setSessionName(this.sessionName),this.angularLibrary.setOvServerUrl(this.openviduServerUrl),this.angularLibrary.setOvSecret(this.openviduSecret),this.angularLibrary.setTheme(this.theme),this.angularLibrary.setNickname(this.user),this.angularLibrary.setTokens(this.tokens),this.angularLibrary.canJoinToSession()?this.display=!0:this.log.e("Cannot join to session.")}emitSession(e){e.on("sessionDisconnected",e=>this.display=!1),e.on("connectionCreated",e=>{setTimeout(()=>{var t,n,i;(null===(i=null===(n=null===(t=e.connection)||void 0===t?void 0:t.stream)||void 0===n?void 0:n.streamManager)||void 0===i?void 0:i.remote)||this.videoRoom.checkSizeComponent()},700)}),this.sessionCreated.emit(e)}emitPublisher(e){this.publisherCreated.emit(e)}emitErrorEvent(e){setTimeout(()=>this.error.emit(e),20)}getSession(){return this.log.w("getSession method is DEPRECATED. Please consider to use sessionCreated event"),this.videoRoom.session}getLocalUsers(){return this.videoRoom.localUsers}getOpenviduLayout(){return this.videoRoom.openviduLayout}getOpenviduLayoutOptions(){return this.videoRoom.openviduLayoutOptions}emitJoinSessionEvent(e){this.joinSession.observers.length>0&&this.log.w("joinSession event is DEPRECATED. Please consider to use sessionCreated event"),this.joinSession.emit(e)}emitLeaveSessionEvent(e){this.leaveSession.observers.length>0&&this.log.w("leaveSession event is DEPRECATED. Please consider to use sessionCreated event"),this.leaveSession.emit(e)}};return e.\u0275fac=function(t){return new(t||e)(o.Qb(tt))},e.\u0275cmp=o.Kb({type:e,selectors:[["opv-session"]],viewQuery:function(e,t){var n;1&e&&o.Rc(Q,!0),2&e&&o.wc(n=o.fc())&&(t.videoRoom=n.first)},inputs:{ovSettings:"ovSettings",sessionName:"sessionName",user:"user",openviduServerUrl:"openviduServerUrl",openviduSecret:"openviduSecret",tokens:"tokens",theme:"theme"},outputs:{sessionCreated:"sessionCreated",publisherCreated:"publisherCreated",error:"error",joinSession:"joinSession",leaveSession:"leaveSession"},decls:1,vars:1,consts:[[3,"externalConfig","_session","_publisher","_error","_leaveSession","_joinSession",4,"ngIf"],[3,"externalConfig","_session","_publisher","_error","_leaveSession","_joinSession"],["videoRoom",""]],template:function(e,t){1&e&&o.Kc(0,K,2,1,"app-video-room",0),2&e&&o.pc("ngIf",t.display)},directives:[g.t,bt],encapsulation:2}),e})(),Ot=(()=>{let e=class{constructor(e){this.linkifyService=e}transform(e){return e?this.linkifyService.linkify(e):e}};return e.\u0275fac=function(t){return new(t||e)(o.Qb(C.b))},e.\u0275pipe=o.Pb({name:"linkify",type:e,pure:!0}),e})(),St=(()=>{let e=class{constructor(){}transform(e){return!e||e.hasChat()}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=o.Pb({name:"hasChat",type:e,pure:!0}),e})(),yt=(()=>{let e=class{constructor(){}transform(e){return!e||e.hasAudio()}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=o.Pb({name:"hasAudio",type:e,pure:!0}),e})(),Mt=(()=>{let e=class{constructor(){}transform(e){return!e||e.hasVideo()}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=o.Pb({name:"hasVideo",type:e,pure:!0}),e})(),xt=(()=>{let e=class{constructor(){}transform(e){return!e||e.isAutoPublish()}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=o.Pb({name:"isAutoPublish",type:e,pure:!0}),e})(),_t=(()=>{let e=class{constructor(){}transform(e){return!e||e.hasScreenSharing()}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=o.Pb({name:"hasScreenSharing",type:e,pure:!0}),e})(),Pt=(()=>{let e=class{constructor(){}transform(e){return!e||e.hasFullscreen()}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=o.Pb({name:"hasFullscreen",type:e,pure:!0}),e})(),wt=(()=>{let e=class{constructor(){}transform(e){return!e||e.hasLayoutSpeaking()}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=o.Pb({name:"hasLayoutSpeaking",type:e,pure:!0}),e})(),Et=(()=>{let e=class{constructor(){}transform(e){return!e||e.hasExit()}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=o.Pb({name:"hasExit",type:e,pure:!0}),e})(),kt=(()=>{let e=class{transform(e){let t="";return e.forEach(e=>{t+="\u2022 "+e+"\n"}),t}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=o.Pb({name:"tooltipList",type:e,pure:!0}),e})();class It{isErrorState(e,t){return!!(e&&e.invalid&&(e.dirty||e.touched||t&&t.submitted))}}var Tt=function(e){return e.BIG="zoom_in",e.NORMAL="zoom_out",e}({}),At=function(e){return e.BIG="fullscreen",e.NORMAL="fullscreen_exit",e}({});let Vt=(()=>{let e=class{constructor(e){this.utilsSrv=e,this.videoSizeIcon=Tt.BIG,this.fullscreenIcon=At.BIG,this.nicknameClicked=new o.o,this.replaceScreenTrackClicked=new o.o,this.toggleVideoSizeClicked=new o.o}sizeChange(e){const t=window.screen.height,n=window.screen.width,i=window.innerHeight;n!==window.innerWidth&&t!==i&&(this.isFullscreen=!1,this.videoSizeIcon=Tt.BIG)}set videoSizeBig(e){this.checkVideoSizeBigIcon(e)}set user(e){this._user=e,this.nicknameFormControl=new h.g(this._user.getNickname(),[h.G.maxLength(25),h.G.required])}set nicknameInputElement(e){setTimeout(()=>{var t;null===(t=e)||void 0===t||t.nativeElement.focus()})}ngOnInit(){this.matcher=new It}toggleVideoSize(e){const t=this.utilsSrv.getHTMLElementByClassName(this.streamComponent.element.nativeElement,ct.ROOT_CLASS);this.toggleVideoSizeClicked.emit({element:t,connectionId:this._user.getConnectionId(),resetAll:e})}toggleFullscreen(){this.utilsSrv.toggleFullscreen("container-"+this._user.getStreamManager().stream.streamId),this.toggleFullscreenIcon()}toggleSound(){this.mutedSound=!this.mutedSound}toggleNicknameForm(){this._user.isLocal()&&(this.toggleNickname=!this.toggleNickname)}eventKeyPress(e){e&&13===e.keyCode&&this.nicknameFormControl.valid&&(this.nicknameClicked.emit(this.nicknameFormControl.value),this.toggleNicknameForm())}replaceScreenTrack(){this.replaceScreenTrackClicked.emit()}checkVideoSizeBigIcon(e){this.videoSizeIcon=e?Tt.NORMAL:Tt.BIG}toggleFullscreenIcon(){this.fullscreenIcon=this.fullscreenIcon===At.BIG?At.NORMAL:At.BIG}};return e.\u0275fac=function(t){return new(t||e)(o.Qb(ht))},e.\u0275cmp=o.Kb({type:e,selectors:[["stream-component"]],viewQuery:function(e,t){var n;1&e&&(o.Rc(H,!0),o.Rc(q,!0,o.P)),2&e&&(o.wc(n=o.fc())&&(t.nicknameInputElement=n.first),o.wc(n=o.fc())&&(t.streamComponent=n.first))},hostBindings:function(e,t){1&e&&o.ec("resize",(function(e){return t.sizeChange(e)}),!1,o.Ac)},inputs:{videoSizeBig:"videoSizeBig",user:"user"},outputs:{nicknameClicked:"nicknameClicked",replaceScreenTrackClicked:"replaceScreenTrackClicked",toggleVideoSizeClicked:"toggleVideoSizeClicked"},decls:1,vars:1,consts:[["class","OT_widget-container",3,"id","dblclick",4,"ngIf"],[1,"OT_widget-container",3,"id","dblclick"],["streamComponent",""],[1,"nickname"],["class","nicknameContainer","selected","",3,"click",4,"ngIf"],["id","dialogNickname",3,"fullscreen",4,"ngIf"],[3,"streamManager","mutedSound","toggleVideoSizeEvent"],[1,"statusIcons"],["id","statusMic",4,"ngIf"],["id","statusCam",4,"ngIf"],[1,"videoButtons"],["mat-icon-button","","id","videoZoomButton",3,"click"],["mat-icon-button","","id","fullscreenButton",3,"click"],["mat-icon-button","","id","volumeButton",3,"click",4,"ngIf"],["mat-icon-button","","id","changeScreenButton",3,"click",4,"ngIf"],["selected","",1,"nicknameContainer",3,"click"],["id","nickname"],[4,"ngIf"],["id","dialogNickname"],["mat-icon-button","","id","closeButton",3,"click"],["matTooltip","Close"],["id","nicknameForm"],["color","primary"],["matInput","","autocomplete","off",3,"placeholder","formControl","errorStateMatcher","keypress"],["nicknameInput",""],["id","statusMic"],["id","statusCam"],["mat-icon-button","","id","volumeButton",3,"click"],["matTooltip","Mute sound",4,"ngIf"],["color","warn","matTooltip","Unmute sound",4,"ngIf"],["matTooltip","Mute sound"],["color","warn","matTooltip","Unmute sound"],["mat-icon-button","","id","changeScreenButton",3,"click"],["matTooltip","Choose screen"]],template:function(e,t){1&e&&o.Kc(0,ae,18,13,"div",0),2&e&&o.pc("ngIf",t._user)},directives:function(){return[g.t,Rt,l.b,d.a,u.a,h.I,h.t,h.u,O.c,S.b,h.c,h.s,h.h,O.b]},styles:[".nickname[_ngcontent-%COMP%]{padding:0;position:absolute;z-index:999;border-radius:5px;color:#fff;font-family:Ubuntu,sans-serif}.nicknameContainer[_ngcontent-%COMP%]{background-color:#424242;padding:5px;color:#fff;font-weight:700}#dialogNickname[_ngcontent-%COMP%]{background-color:#0000005e;border-radius:5px}#closeButton[_ngcontent-%COMP%]{position:absolute;top:-3px;right:0;z-index:999}#nicknameForm[_ngcontent-%COMP%]{padding:10px}.fullscreen[_ngcontent-%COMP%]{top:40px}mat-error[_ngcontent-%COMP%]{text-align:center;color:#353535}video[_ngcontent-%COMP%]{-o-object-fit:cover;object-fit:cover;width:100%;height:100%;color:#fff;margin:0;padding:0;border:0;font-size:100%}.statusIcons[_ngcontent-%COMP%]{bottom:0;left:5px;width:40px;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;position:absolute;color:#fff}.statusIcons[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{vertical-align:-webkit-baseline-middle;vertical-align:-moz-middle-with-baseline;font-size:20px}.videoButtons[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:24px}.videoButtons[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]{line-height:0}#camStatus[_ngcontent-%COMP%]{bottom:43px}#statusCam[_ngcontent-%COMP%], #statusMic[_ngcontent-%COMP%]{text-align:center;width:28px;height:28px;border-radius:50%;background:#c71100;margin:5px auto}.videoButtons[_ngcontent-%COMP%]{right:0;position:absolute;bottom:0;z-index:9999999;width:50px;text-align:center}.videoButtons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#000;width:30px;height:30px;margin:1px}.OT_widget-container[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;overflow:hidden}  .mat-focused .mat-form-field-label,   .mat-form-field-appearance-legacy .mat-form-field-label, mat-error[_ngcontent-%COMP%]{color:#cacaca!important}  .mat-form-field-appearance-legacy .mat-form-field-underline,   .mat-form-field.mat-focused .mat-form-field-ripple{background-color:#cacaca!important}input[_ngcontent-%COMP%]{caret-color:#fff!important}"]}),e})(),Rt=(()=>{let e=class{constructor(){this.toggleVideoSizeEvent=new o.o}ngAfterViewInit(){setTimeout(()=>{this._streamManager&&this._videoElement&&this._streamManager.addVideoElement(this._videoElement.nativeElement)})}set videoElement(e){this._videoElement=e}set streamManager(e){setTimeout(()=>{this._streamManager=e,this._videoElement&&this._streamManager&&(this._streamManager.stream.typeOfVideo===Je.SCREEN?(this._videoElement.nativeElement.style.objectFit="contain",this._videoElement.nativeElement.style.background="#272727",this.enableVideoSizeBig()):this._videoElement.nativeElement.style.objectFit="cover",this._streamManager.addVideoElement(this._videoElement.nativeElement))})}enableVideoSizeBig(){setTimeout(()=>{this.toggleVideoSizeEvent.emit(!0)},590)}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Kb({type:e,selectors:[["ov-video"]],viewQuery:function(e,t){var n;1&e&&o.Rc(ce,!0),2&e&&o.wc(n=o.fc())&&(t.videoElement=n.first)},inputs:{streamManager:"streamManager",mutedSound:"mutedSound"},outputs:{toggleVideoSizeEvent:"toggleVideoSizeEvent"},decls:2,vars:2,consts:[[3,"muted"],["videoElement",""]],template:function(e,t){1&e&&o.Rb(0,"video",0,1),2&e&&(o.pc("muted",t.mutedSound),o.Db("id",t.streamManager&&t._streamManager.stream?"video-"+t._streamManager.stream.streamId:"video-undefined"))},styles:[".nickname[_ngcontent-%COMP%]{padding:0;position:absolute;z-index:999;border-radius:5px;color:#fff;font-family:Ubuntu,sans-serif}.nicknameContainer[_ngcontent-%COMP%]{background-color:#424242;padding:5px;color:#fff;font-weight:700}#dialogNickname[_ngcontent-%COMP%]{background-color:#0000005e;border-radius:5px}#closeButton[_ngcontent-%COMP%]{position:absolute;top:-3px;right:0;z-index:999}#nicknameForm[_ngcontent-%COMP%]{padding:10px}.fullscreen[_ngcontent-%COMP%]{top:40px}mat-error[_ngcontent-%COMP%]{text-align:center;color:#353535}video[_ngcontent-%COMP%]{-o-object-fit:cover;object-fit:cover;width:100%;height:100%;color:#fff;margin:0;padding:0;border:0;font-size:100%}.statusIcons[_ngcontent-%COMP%]{bottom:0;left:5px;width:40px;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;position:absolute;color:#fff}.statusIcons[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{vertical-align:-webkit-baseline-middle;vertical-align:-moz-middle-with-baseline;font-size:20px}.videoButtons[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:24px}.videoButtons[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]{line-height:0}#camStatus[_ngcontent-%COMP%]{bottom:43px}#statusCam[_ngcontent-%COMP%], #statusMic[_ngcontent-%COMP%]{text-align:center;width:28px;height:28px;border-radius:50%;background:#c71100;margin:5px auto}.videoButtons[_ngcontent-%COMP%]{right:0;position:absolute;bottom:0;z-index:9999999;width:50px;text-align:center}.videoButtons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#000;width:30px;height:30px;margin:1px}.OT_widget-container[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;overflow:hidden}  .mat-focused .mat-form-field-label,   .mat-form-field-appearance-legacy .mat-form-field-label, mat-error[_ngcontent-%COMP%]{color:#cacaca!important}  .mat-form-field-appearance-legacy .mat-form-field-underline,   .mat-form-field.mat-focused .mat-form-field-ripple{background-color:#cacaca!important}input[_ngcontent-%COMP%]{caret-color:#fff!important}"]}),e})(),Lt=(()=>{let e=class{constructor(e,t){this.utilsSrv=e,this.chatService=t,this.micButtonClicked=new o.o,this.camButtonClicked=new o.o,this.screenShareClicked=new o.o,this.layoutButtonClicked=new o.o,this.leaveSessionButtonClicked=new o.o,this.fullscreenIcon=At.BIG,this.logoUrl="https://raw.githubusercontent.com/OpenVidu/openvidu-call/master/openvidu-call-front/src/assets/images/",this.participantsNames=[],this.chatServiceSubscription=this.chatService.messagesUnreadObs.subscribe(e=>{this.newMessagesNum=e})}ngOnDestroy(){this.chatServiceSubscription.unsubscribe()}sizeChange(e){const t=window.screen.height,n=window.screen.width,i=window.innerHeight;n!==window.innerWidth&&t!==i&&(this.fullscreenIcon=At.BIG)}ngOnInit(){this.logoUrl+=this.lightTheme?"openvidu_logo_grey.png":"openvidu_logo.png"}toggleMicrophone(){this.micButtonClicked.emit()}toggleCamera(){this.camButtonClicked.emit()}toggleScreenShare(){this.screenShareClicked.emit()}toggleSpeakerLayout(){this.layoutButtonClicked.emit()}leaveSession(){this.leaveSessionButtonClicked.emit()}toggleChat(){this.chatService.toggleChat()}toggleFullscreen(){this.utilsSrv.toggleFullscreen("videoRoomNavBar"),this.fullscreenIcon=this.fullscreenIcon===At.BIG?At.NORMAL:At.BIG}};return e.\u0275fac=function(t){return new(t||e)(o.Qb(ht),o.Qb(st))},e.\u0275cmp=o.Kb({type:e,selectors:[["app-toolbar"]],hostBindings:function(e,t){1&e&&o.ec("resize",(function(e){return t.sizeChange(e)}),!1,o.Ac)},inputs:{lightTheme:"lightTheme",mySessionId:"mySessionId",compact:"compact",showNotification:"showNotification",ovSettings:"ovSettings",isWebcamVideoEnabled:"isWebcamVideoEnabled",isWebcamAudioEnabled:"isWebcamAudioEnabled",isScreenEnabled:"isScreenEnabled",isAutoLayout:"isAutoLayout",isConnectionLost:"isConnectionLost",hasVideoDevices:"hasVideoDevices",hasAudioDevices:"hasAudioDevices"},outputs:{micButtonClicked:"micButtonClicked",camButtonClicked:"camButtonClicked",screenShareClicked:"screenShareClicked",layoutButtonClicked:"layoutButtonClicked",leaveSessionButtonClicked:"leaveSessionButtonClicked"},decls:20,vars:27,consts:[["id","header","role","heading","fxLayout","","fxLayoutAlign","center","fxLayoutGap","10px",1,"container"],["fxFlex","20%"],[3,"lightTheme","sessionId","compact","logoUrl"],["fxFlex","70%","fxFlexOrder","2"],["align","center",1,"buttonsContainer"],["id","navMicrophoneButton","mat-icon-button","",3,"disabled","click",4,"ngIf"],["id","navCameraButton","mat-icon-button","",3,"disabled","click",4,"ngIf"],["id","navScreenButton","mat-icon-button","",3,"disabled","click",4,"ngIf"],["mat-icon-button","",3,"disabled","click",4,"ngIf"],["mat-icon-button","","id","navLeaveButton",3,"click",4,"ngIf"],["fxFlex","10%","fxFlexOrder","3","align","end"],["id","navMicrophoneButton","mat-icon-button","",3,"disabled","click"],["matTooltip","Mute your audio",4,"ngIf"],["color","warn","matTooltip","Unmute your audio",4,"ngIf"],["matTooltip","Mute your audio"],["color","warn","matTooltip","Unmute your audio"],["id","navCameraButton","mat-icon-button","",3,"disabled","click"],["matTooltip","Mute your cam",4,"ngIf"],["color","warn","matTooltip","Unmute your cam",4,"ngIf"],["matTooltip","Mute your cam"],["color","warn","matTooltip","Unmute your cam"],["id","navScreenButton","mat-icon-button","",3,"disabled","click"],["matTooltip","Screen share","color","warn",4,"ngIf"],["matTooltip","Stop sharing",4,"ngIf"],["matTooltip","Screen share","color","warn"],["matTooltip","Stop sharing"],["mat-icon-button","",3,"disabled","click"],["matTooltip","Fullscreen"],["matTooltip","Enable speaker layout","color","warn",4,"ngIf"],["matTooltip","Disable speaker layout",4,"ngIf"],["matTooltip","Enable speaker layout","color","warn"],["matTooltip","Disable speaker layout"],["mat-icon-button","","id","navLeaveButton",3,"click"],["color","warn","matTooltip","Leave the session"],["matBadgePosition","above before","matTooltip","Chat","matBadgeColor","accent",3,"matBadge","matBadgeHidden"]],template:function(e,t){1&e&&(o.Wb(0,"mat-toolbar",0),o.Wb(1,"div",1),o.Rb(2,"app-toolbar-logo",2),o.Vb(),o.Wb(3,"div",3),o.Wb(4,"div",4),o.Kc(5,ue,3,3,"button",5),o.jc(6,"hasAudio"),o.Kc(7,pe,3,3,"button",6),o.jc(8,"hasVideo"),o.Kc(9,be,3,3,"button",7),o.jc(10,"hasScreenSharing"),o.Kc(11,ve,3,2,"button",8),o.jc(12,"hasFullscreen"),o.Kc(13,Se,3,3,"button",8),o.jc(14,"hasLayoutSpeaking"),o.Kc(15,ye,3,0,"button",9),o.jc(16,"hasExit"),o.Vb(),o.Vb(),o.Wb(17,"div",10),o.Kc(18,Me,3,3,"button",8),o.jc(19,"hasChat"),o.Vb(),o.Vb()),2&e&&(o.Gb("headerLight",t.lightTheme),o.Cb(2),o.pc("lightTheme",t.lightTheme)("sessionId",t.mySessionId)("compact",t.compact)("logoUrl",t.logoUrl),o.Cb(3),o.pc("ngIf",t.hasAudioDevices&&o.kc(6,13,t.ovSettings)),o.Cb(2),o.pc("ngIf",!t.ovSettings||t.hasVideoDevices&&o.kc(8,15,t.ovSettings)),o.Cb(2),o.pc("ngIf",o.kc(10,17,t.ovSettings)),o.Cb(2),o.pc("ngIf",o.kc(12,19,t.ovSettings)),o.Cb(2),o.pc("ngIf",o.kc(14,21,t.ovSettings)),o.Cb(2),o.pc("ngIf",o.kc(16,23,t.ovSettings)),o.Cb(3),o.pc("ngIf",o.kc(19,25,t.ovSettings)))},directives:function(){return[y.a,M.d,M.c,M.e,M.a,Nt,M.b,g.t,l.b,d.a,u.a,x.a]},pipes:function(){return[yt,Mt,_t,Pt,wt,Et,St]},styles:["#header[_ngcontent-%COMP%]{color:#fff;height:40px;background-color:#333;padding:0 14px 0 0;position:absolute;top:0;left:0;z-index:999999;min-width:400px!important}.buttonsContainer[_ngcontent-%COMP%]{position:absolute;left:0;right:0}.headerLight[_ngcontent-%COMP%]{color:#706969!important;background-color:#eee!important}#navSessionInfo[_ngcontent-%COMP%]{height:100%;display:inline-flex}#navChatButton[_ngcontent-%COMP%]   .mat-badge-medium.mat-badge-overlap.mat-badge-before[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{left:-17px}#navChatButton[_ngcontent-%COMP%]   .mat-badge-medium.mat-badge-above[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{top:-6px}.mat-icon-button[disabled][_ngcontent-%COMP%]{color:#fff}.titleContent[_ngcontent-%COMP%]{font-family:Ubuntu,sans-serif;max-width:100px;margin:5px -18px;padding:0 15px;font-size:16px;overflow:hidden;text-overflow:ellipsis}.titleContentDark[_ngcontent-%COMP%]{background-color:#494949;color:#fff}.titleContentLight[_ngcontent-%COMP%]{background-color:#dfdfdf!important;color:#000}#header_img[_ngcontent-%COMP%]{max-width:135px;margin-right:10px;margin-top:-3px}#point[_ngcontent-%COMP%]{width:10px;height:10px;position:absolute;top:12px;right:33px;border-radius:50%;background-color:#ffa600;border:1px solid #000;z-index:99999}.pointLight[_ngcontent-%COMP%]{border:1px solid #fff!important}.tooltipList[_ngcontent-%COMP%]{white-space:pre}@media (max-width:600px){#navSessionInfo[_ngcontent-%COMP%]{display:none}}"]}),e})(),Nt=(()=>{let e=class{constructor(){}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Kb({type:e,selectors:[["app-toolbar-logo"]],inputs:{lightTheme:"lightTheme",compact:"compact",sessionId:"sessionId",logoUrl:"logoUrl"},decls:4,vars:2,consts:[["id","navSessionInfo"],["id","header_img","alt","OpenVidu Logo",3,"src"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],["id","session-title"]],template:function(e,t){1&e&&(o.Wb(0,"div",0),o.Wb(1,"a"),o.Rb(2,"img",1),o.Vb(),o.Kc(3,_e,3,5,"div",2),o.Vb()),2&e&&(o.Cb(2),o.pc("src",t.logoUrl,o.Ec),o.Cb(1),o.pc("ngIf",!t.compact&&t.sessionId))},directives:[g.t,g.q,p.a],styles:["#header[_ngcontent-%COMP%]{color:#fff;height:40px;background-color:#333;padding:0 14px 0 0;position:absolute;top:0;left:0;z-index:999999;min-width:400px!important}.buttonsContainer[_ngcontent-%COMP%]{position:absolute;left:0;right:0}.headerLight[_ngcontent-%COMP%]{color:#706969!important;background-color:#eee!important}#navSessionInfo[_ngcontent-%COMP%]{height:100%;display:inline-flex}#navChatButton[_ngcontent-%COMP%]   .mat-badge-medium.mat-badge-overlap.mat-badge-before[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{left:-17px}#navChatButton[_ngcontent-%COMP%]   .mat-badge-medium.mat-badge-above[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{top:-6px}.mat-icon-button[disabled][_ngcontent-%COMP%]{color:#fff}.titleContent[_ngcontent-%COMP%]{font-family:Ubuntu,sans-serif;max-width:100px;margin:5px -18px;padding:0 15px;font-size:16px;overflow:hidden;text-overflow:ellipsis}.titleContentDark[_ngcontent-%COMP%]{background-color:#494949;color:#fff}.titleContentLight[_ngcontent-%COMP%]{background-color:#dfdfdf!important;color:#000}#header_img[_ngcontent-%COMP%]{max-width:135px;margin-right:10px;margin-top:-3px}#point[_ngcontent-%COMP%]{width:10px;height:10px;position:absolute;top:12px;right:33px;border-radius:50%;background-color:#ffa600;border:1px solid #000;z-index:99999}.pointLight[_ngcontent-%COMP%]{border:1px solid #fff!important}.tooltipList[_ngcontent-%COMP%]{white-space:pre}@media (max-width:600px){#navSessionInfo[_ngcontent-%COMP%]{display:none}}"]}),e})(),Dt=(()=>{let e=class{constructor(){this.participantsNames=[]}sizeChange(e){}ngOnInit(){}set participants(e){this.participantsNames=[],e.forEach(e=>{e.isCamera()&&this.participantsNames.push(e.getNickname())}),this.participantsNames=[...this.participantsNames]}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Kb({type:e,selectors:[["app-footer"]],hostBindings:function(e,t){1&e&&o.ec("resize",(function(e){return t.sizeChange(e)}),!1,o.Ac)},inputs:{participants:"participants",lightTheme:"lightTheme"},decls:9,vars:6,consts:[["fxLayout","","fxLayout.xs","row","fxLayoutAlign","center center","fxLayoutGap","2px","id","footer","role","heading",1,"container"],[1,"participantsButtonContainer"],["mat-icon-button","","matTooltip","Remote participants",1,""],["matBadgeSize","small","matBadgePosition","above after","matBadgeColor","accent",3,"matBadge"],["fxFlex","calc(100% - 40px)","fxFlexOrder","2"],[1,"participantNames"]],template:function(e,t){1&e&&(o.Wb(0,"mat-toolbar",0),o.Wb(1,"div",1),o.Wb(2,"button",2),o.Wb(3,"mat-icon",3),o.Mc(4,"people"),o.Vb(),o.Vb(),o.Vb(),o.Wb(5,"div",4),o.Wb(6,"span",5),o.Mc(7),o.jc(8,"tooltipList"),o.Vb(),o.Vb(),o.Vb()),2&e&&(o.Gb("headerLight",t.lightTheme),o.Cb(3),o.qc("matBadge",null==t.participantsNames?null:t.participantsNames.length),o.Cb(4),o.Nc(o.kc(8,4,t.participantsNames)))},directives:[y.a,M.d,M.c,M.e,l.b,u.a,d.a,x.a,M.a,M.b],pipes:[kt],styles:["#footer[_ngcontent-%COMP%]{color:#fff;height:25px;background-color:#333;padding:0 14px 0 0;position:absolute;bottom:0;left:0;z-index:999999;min-width:400px!important}.footerLight[_ngcontent-%COMP%]{color:#706969!important;background-color:#eee!important}.participantNames[_ngcontent-%COMP%]{font-size:small;height:inherit}.participantsButton[_ngcontent-%COMP%]{position:absolute;left:5px;top:none;height:-webkit-fill-available;height:-moz-available}.participantsButtonContainer[_ngcontent-%COMP%]{height:-webkit-fill-available;height:-moz-available}.mat-icon-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], .participantsButtonContainer[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{line-height:18px}"]}),e})(),jt=(()=>{let e=class{constructor(e,t,n,i,s,r){this.route=e,this.utilsSrv=t,this.oVSessionService=n,this.oVDevicesService=i,this.loggerSrv=s,this.storageSrv=r,this.USER_NICKNAME="openviduCallNickname",this.join=new o.o,this.leaveSession=new o.o,this.publisherCreated=new o.o,this.isVideoActive=!0,this.isAudioActive=!0,this.localUsers=[],this.nicknameFormControl=new h.g("",[h.G.maxLength(25),h.G.required]),this.matcher=new It,this.log=this.loggerSrv.get("RoomConfigComponent")}beforeunloadHandler(){this.close()}ngOnInit(){return Object(i.a)(this,void 0,void 0,(function*(){this.subscribeToUsers(),this.setNicknameForm(),this.setRandomAvatar(),this.columns=window.innerWidth>900?2:1,this.setSessionName(),yield this.oVDevicesService.initDevices(),this.setDevicesInfo(),this.initwebcamPublisher()}))}ngOnDestroy(){this.oVUsersSubscription.unsubscribe()}onCameraSelected(e){var t;return Object(i.a)(this,void 0,void 0,(function*(){const n=null===(t=e)||void 0===t?void 0:t.value;if(n){if(this.oVDevicesService.needUpdateVideoTrack(n)){const e=this.oVDevicesService.cameraNeedsMirror(n);yield this.oVSessionService.replaceTrack(n,null,e),this.oVDevicesService.setCamSelected(n),this.camSelected=this.oVDevicesService.getCamSelected()}return this.oVSessionService.publishVideo(!0),void(this.isVideoActive=!0)}this.oVSessionService.publishVideo(!1),this.isVideoActive=!1}))}onMicrophoneSelected(e){var t;return Object(i.a)(this,void 0,void 0,(function*(){const n=null===(t=e)||void 0===t?void 0:t.value;if(n){if(this.oVDevicesService.needUpdateAudioTrack(n)){console.log(this.camSelected);const e=this.oVDevicesService.cameraNeedsMirror(this.camSelected.device);yield this.oVSessionService.replaceTrack(null,n,e),this.oVDevicesService.setMicSelected(n),this.micSelected=this.oVDevicesService.getMicSelected()}return this.publishAudio(!0),void(this.isAudioActive=!0)}this.publishAudio(!1),this.isAudioActive=!1}))}toggleCam(){this.isVideoActive=!this.isVideoActive,this.oVSessionService.publishVideo(this.isVideoActive),this.oVSessionService.areBothConnected()?(this.oVSessionService.disableWebcamUser(),this.oVSessionService.publishScreenAudio(this.isAudioActive)):this.oVSessionService.isOnlyScreenConnected()&&this.oVSessionService.enableWebcamUser()}toggleScreenShare(){if(this.oVSessionService.areBothConnected())this.oVSessionService.disableScreenUser();else{if(this.oVSessionService.isOnlyWebcamConnected()){const e=this.initScreenPublisher();return e.on("accessAllowed",t=>{e.stream.getMediaStream().getVideoTracks()[0].addEventListener("ended",()=>{this.log.d("Clicked native stop button. Stopping screen sharing"),this.toggleScreenShare()}),this.oVSessionService.enableScreenUser(e),this.oVSessionService.hasWebcamVideoActive()||this.oVSessionService.disableWebcamUser()}),void e.on("accessDenied",e=>{this.log.w("ScreenShare: Access Denied")})}this.oVSessionService.enableWebcamUser(),this.oVSessionService.disableScreenUser()}}toggleMic(){this.isAudioActive=!this.isAudioActive,this.publishAudio(this.isAudioActive)}takePhoto(){this.oVSessionService.setWebcamAvatar(),this.videoAvatar=this.oVSessionService.getWebCamAvatar(),this.oVSessionService.setAvatar(et.VIDEO)}setNicknameForm(){if(this.externalConfig)return void this.nicknameFormControl.setValue(this.externalConfig.getNickname());const e=this.storageSrv.get(this.USER_NICKNAME)||this.utilsSrv.generateNickname();this.nicknameFormControl.setValue(e)}eventKeyPress(e){e&&13===e.keyCode&&this.nicknameFormControl.valid&&this.joinSession()}onResize(e){this.columns=e.target.innerWidth>900?2:1}joinSession(){this.nicknameFormControl.valid&&(this.oVSessionService.setWebcamName(this.nicknameFormControl.value),this.storageSrv.set(this.USER_NICKNAME,this.nicknameFormControl.value),this.join.emit()),this.scrollToBottom()}close(){this.leaveSession.emit(),this.showConfigCard=!1}setAvatar(e){const t=e===et.VIDEO?et.VIDEO:et.RANDOM;(t===et.RANDOM&&this.randomAvatar||t===et.VIDEO&&this.videoAvatar)&&(this.avatarSelected=t)}setDevicesInfo(){this.hasVideoDevices=this.oVDevicesService.hasVideoDeviceAvailable(),this.hasAudioDevices=this.oVDevicesService.hasAudioDeviceAvailable(),this.microphones=this.oVDevicesService.getMicrophones(),this.cameras=this.oVDevicesService.getCameras(),this.camSelected=this.oVDevicesService.getCamSelected(),this.micSelected=this.oVDevicesService.getMicSelected()}setSessionName(){this.route.params.subscribe(e=>{this.mySessionId=this.externalConfig?this.externalConfig.getSessionName():e.roomName,this.oVSessionService.setSessionId(this.mySessionId)})}setRandomAvatar(){this.randomAvatar=this.utilsSrv.getOpenViduAvatar(),this.oVSessionService.setAvatar(et.RANDOM,this.randomAvatar),this.avatarSelected=et.RANDOM}scrollToBottom(){try{this.bodyCard.nativeElement.scrollTop=this.bodyCard.nativeElement.scrollHeight}catch(e){}}initScreenPublisher(){const e=Xe.SCREEN,t=this.oVSessionService.isWebCamEnabled()&&this.oVSessionService.hasWebcamVideoActive(),n=this.oVSessionService.createProperties(e,void 0,!0,!t&&this.isAudioActive,!1);try{return this.oVSessionService.initScreenPublisher(void 0,n)}catch(i){this.log.e(i),this.utilsSrv.handlerScreenShareError(i)}}publishAudio(e){this.oVSessionService.isWebCamEnabled()?this.oVSessionService.publishWebcamAudio(e):this.oVSessionService.publishScreenAudio(e)}subscribeToUsers(){this.oVUsersSubscription=this.oVSessionService.OVUsers.subscribe(e=>{this.localUsers=e})}initwebcamPublisher(){var e,t;const n=(null===(e=this.micSelected)||void 0===e?void 0:e.device)||void 0,i=(null===(t=this.camSelected)||void 0===t?void 0:t.device)||void 0,o=this.oVSessionService.createProperties(!!this.hasVideoDevices&&i,!!this.hasAudioDevices&&n,!!this.hasVideoDevices&&this.isVideoActive,!!this.hasAudioDevices&&this.isAudioActive,this.camSelected&&this.camSelected.type===ut.FRONT),s=this.oVSessionService.initCamPublisher(void 0,o);this.handlePublisherSuccess(s),this.handlePublisherError(s)}emitPublisher(e){this.publisherCreated.emit(e)}handlePublisherSuccess(e){e.once("accessAllowed",()=>Object(i.a)(this,void 0,void 0,(function*(){if(this.oVDevicesService.areEmptyLabels()){if(yield this.oVDevicesService.initDevices(),this.hasAudioDevices){const t=e.stream.getMediaStream().getAudioTracks()[0].label;this.oVDevicesService.setMicSelected(t)}if(this.hasVideoDevices){const t=e.stream.getMediaStream().getVideoTracks()[0].label;this.oVDevicesService.setCamSelected(t)}this.setDevicesInfo()}this.emitPublisher(e),this.ovSettings.isAutoPublish()?this.joinSession():this.showConfigCard=!0})))}handlePublisherError(e){e.once("accessDenied",e=>{let t;"DEVICE_ACCESS_DENIED"===e.name&&(t="Access to media devices was not allowed."),"NO_INPUT_SOURCE_SET"===e.name&&(t="No video or audio devices have been found. Please, connect at least one."),this.utilsSrv.showErrorMessage(e.name.replace(/_/g," "),t,!0),this.log.e(e.message)})}};return e.\u0275fac=function(t){return new(t||e)(o.Qb(b.a),o.Qb(ht),o.Qb(nt),o.Qb(mt),o.Qb(tt),o.Qb(pt))},e.\u0275cmp=o.Kb({type:e,selectors:[["app-room-config"]],viewQuery:function(e,t){var n;1&e&&o.Rc(Pe,!0),2&e&&o.wc(n=o.fc())&&(t.bodyCard=n.first)},hostBindings:function(e,t){1&e&&o.ec("beforeunload",(function(){return t.beforeunloadHandler()}),!1,o.Ac)},inputs:{externalConfig:"externalConfig",ovSettings:"ovSettings"},outputs:{join:"join",leaveSession:"leaveSession",publisherCreated:"publisherCreated"},decls:3,vars:6,consts:[["id","roomConfig",3,"ngStyle"],["class","modal",4,"ngIf"],[1,"modal"],[1,"modal-dialog","modal-xl"],[1,"modal-content","cardContainer"],[1,"modal-header","cardHeader"],[1,"headerLogo"],["id","header_img","alt","OpenVidu Logo","src","https://raw.githubusercontent.com/OpenVidu/openvidu-call/master/openvidu-call-front/src/assets/images/openvidu_logo_grey.png"],[1,"headerTitle"],["mat-mini-fab","","id","closeButton",1,"closeButton",3,"click"],["color","warn","matTooltip","Close"],[1,"modal-body"],["bodyCard",""],[1,"row","align-items-center"],[1,"col-sm-6","col-md-6","col-lg-6","leftSection"],[1,"videoContainer"],[4,"ngFor","ngForOf"],[1,"avatarButton"],["mat-stroked-button","",3,"click"],["matTooltip","Take Photo"],[2,"margin-left","5px"],[1,"col-sm-6","col-md-6","col-lg-6","rightSection"],[1,"avatarContainer"],["fxLayout","row","fxFill","","id","avatarSection",4,"ngIf"],["fxLayout","row","fxFill","","id","devicesSection"],["fxLayout","","fxFlex",""],["fxFlex","20","fxLayoutAlign","center center",1,"one"],["mat-mini-fab","",1,"deviceButton",3,"click"],["matTooltip","Nickname"],["fxFlex","80","fxLayoutAlign","center center",1,"two"],["id","nicknameForm",1,"alternate-theme"],["matInput","","placeholder","Nickname","autocomplete","off",3,"formControl","errorStateMatcher","keypress"],[4,"ngIf"],["fxLayout","row","fxFill","","id","devicesSection",4,"ngIf"],[1,"modal-footer",2,"justify-content","center"],["mat-flat-button","","color","accent","form","nicknameForm","id","joinButton",3,"click"],[3,"streamManager","className",4,"ngIf"],["class","cameraMessageContainer",4,"ngIf"],[3,"streamManager","className"],[1,"cameraMessageContainer"],["fxLayout","row","fxFill","","id","avatarSection"],["fxFlex","100","fxLayoutAlign","center center",1,""],["id","avatarContainer",3,"click"],["id","imgText",4,"ngIf"],["id","avatarImg",3,"src",4,"ngIf"],["id","imgText","color","accent",3,"diameter",4,"ngIf"],["id","imgText"],["id","avatarImg",3,"src"],["id","imgText","color","accent",3,"diameter"],["mat-mini-fab","","id","configCardMicrophoneButton",1,"deviceButton",3,"click"],["matTooltip","Microphone Enabled",4,"ngIf"],["color","warn","matTooltip","Microphone Disabled",4,"ngIf"],[1,"alternate-theme"],["placeholder","Microphone Options",3,"ngModel","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["matTooltip","Microphone Enabled"],["color","warn","matTooltip","Microphone Disabled"],[3,"value"],["mat-mini-fab","","id","configCardCameraButton",1,"deviceButton",3,"click"],["matTooltip","Camera Enabled",4,"ngIf"],["color","warn","matTooltip","Camera Disabled",4,"ngIf"],["placeholder","Camera Options",3,"ngModel","selectionChange"],["matTooltip","Camera Enabled"],["color","warn","matTooltip","Camera Disabled"],["mat-mini-fab","","id","configCardScreenButton",1,"deviceButton",3,"click"],["matTooltip","Screen Share Enabled",4,"ngIf"],["color","warn","matTooltip","Screen Share Disabled",4,"ngIf"],["matInput","","disabled","","placeholder","Screen",3,"ngModel"],["matTooltip","Screen Share Enabled"],["color","warn","matTooltip","Screen Share Disabled"]],template:function(e,t){1&e&&(o.Wb(0,"div",0),o.jc(1,"isAutoPublish"),o.Kc(2,qe,49,16,"div",1),o.Vb()),2&e&&(o.pc("ngStyle",o.tc(4,Ye,o.kc(1,2,t.ovSettings)?"none":"block")),o.Cb(2),o.pc("ngIf",t.showConfigCard))},directives:[g.w,p.b,g.t,l.b,d.a,u.a,g.s,M.d,M.f,M.a,M.c,h.I,h.t,h.u,O.c,S.b,h.c,h.s,h.h,Rt,_.c,O.b,P.a,h.v,w.n],pipes:[xt,yt,Mt,_t],styles:[".cardHeader[_ngcontent-%COMP%]{background-color:#ccc;border-radius:14px 14px 0 0;text-align:center;height:50px}.headerLogo[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:inherit}.headerTitle[_ngcontent-%COMP%]{font-size:large;margin:auto}.videoContainer[_ngcontent-%COMP%]{width:100%;height:calc(100% - 50px);text-align:center;margin:auto}.avatarButton[_ngcontent-%COMP%]{text-align:center;margin-top:10px}.videoContainer[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline}.ovVideoSmall[_ngcontent-%COMP%]{position:absolute;width:30%;left:15px;bottom:46px}.cameraMessageContainer[_ngcontent-%COMP%]{height:100%;width:100%;text-align:center;border:2px solid;font-size:large;display:table}.cameraMessageContainer[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle}.deviceButton[_ngcontent-%COMP%]{box-shadow:none;background-color:#f5f5f5}.rightSection[_ngcontent-%COMP%]{padding-left:0!important;text-align:center}.avatarContainer[_ngcontent-%COMP%]{background-color:#f5f5f5;height:40px;text-align:center;display:flex}.avatarContainer[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:auto}.closeButton[_ngcontent-%COMP%]{position:absolute;top:5px;right:7px;box-shadow:none;background-color:transparent}#roomConfig[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%}#header_img[_ngcontent-%COMP%]{max-width:150px}#sessionInfo[_ngcontent-%COMP%]{margin-top:0}#joinButton[_ngcontent-%COMP%]{margin:15px;width:80%}#photoButton[_ngcontent-%COMP%]{margin:10px;text-align:center}#avatarContainer[_ngcontent-%COMP%]{border:1px solid #b6b6b6;width:100px;height:100px;margin:10px;position:relative;cursor:pointer;display:inline-block}#devicesSection[_ngcontent-%COMP%]{margin:15px 0}#avatarSection[_ngcontent-%COMP%], #devicesSection[_ngcontent-%COMP%]{height:-webkit-fit-content!important;height:-moz-fit-content!important;height:fit-content!important;min-height:auto!important}#imgText[_ngcontent-%COMP%]{display:table}#avatarImg[_ngcontent-%COMP%], #imgText[_ngcontent-%COMP%]{text-align:center;position:absolute;margin:auto;top:25%;left:0;right:0;bottom:25%}#avatarImg[_ngcontent-%COMP%]{height:83%;width:83%}#avatarContainer[_ngcontent-%COMP%], #avatarImg[_ngcontent-%COMP%]{border-radius:25%}#optionsContent[_ngcontent-%COMP%]{position:initial}#nicknameForm[_ngcontent-%COMP%], mat-form-field[_ngcontent-%COMP%]{width:100%}mat-card[_ngcontent-%COMP%]{max-width:85%!important;position:absolute;top:0;bottom:0;left:0;right:0;max-height:90%;margin:auto;padding:20px;overflow:auto;border:2px solid #fff;border-right:4px solid #fff}@media only screen and (max-width:959px){mat-card[_ngcontent-%COMP%]{max-width:80%!important;max-height:80%!important}}  .mat-option-text{color:#000!important}  .mat-slider-thumb{visibility:hidden}  .mat-slider-vertical .mat-slider-track-background,   .mat-slider-vertical .mat-slider-track-fill,   .mat-slider-vertical .mat-slider-track-wrapper{width:10px!important}[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#b8afaf;border-radius:4px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#888}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#e1e1e1;border-radius:4px}*[_ngcontent-%COMP%], [_ngcontent-%COMP%]:after, [_ngcontent-%COMP%]:before{box-sizing:border-box}.container[_ngcontent-%COMP%]{padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media (min-width:768px){.container[_ngcontent-%COMP%]{width:750px}}@media (min-width:992px){.container[_ngcontent-%COMP%]{width:970px}}@media (min-width:1200px){.container[_ngcontent-%COMP%]{width:1170px}}.container-fluid[_ngcontent-%COMP%]{padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}.row[_ngcontent-%COMP%]{margin-right:-15px;margin-left:-15px}.row-no-gutters[_ngcontent-%COMP%]{margin-right:0;margin-left:0}.row-no-gutters[_ngcontent-%COMP%]   [class*=col-][_ngcontent-%COMP%]{padding-right:0;padding-left:0}.col-lg-1[_ngcontent-%COMP%], .col-lg-10[_ngcontent-%COMP%], .col-lg-11[_ngcontent-%COMP%], .col-lg-12[_ngcontent-%COMP%], .col-lg-2[_ngcontent-%COMP%], .col-lg-3[_ngcontent-%COMP%], .col-lg-4[_ngcontent-%COMP%], .col-lg-5[_ngcontent-%COMP%], .col-lg-6[_ngcontent-%COMP%], .col-lg-7[_ngcontent-%COMP%], .col-lg-8[_ngcontent-%COMP%], .col-lg-9[_ngcontent-%COMP%], .col-md-1[_ngcontent-%COMP%], .col-md-10[_ngcontent-%COMP%], .col-md-11[_ngcontent-%COMP%], .col-md-12[_ngcontent-%COMP%], .col-md-2[_ngcontent-%COMP%], .col-md-3[_ngcontent-%COMP%], .col-md-4[_ngcontent-%COMP%], .col-md-5[_ngcontent-%COMP%], .col-md-6[_ngcontent-%COMP%], .col-md-7[_ngcontent-%COMP%], .col-md-8[_ngcontent-%COMP%], .col-md-9[_ngcontent-%COMP%], .col-sm-1[_ngcontent-%COMP%], .col-sm-10[_ngcontent-%COMP%], .col-sm-11[_ngcontent-%COMP%], .col-sm-12[_ngcontent-%COMP%], .col-sm-2[_ngcontent-%COMP%], .col-sm-3[_ngcontent-%COMP%], .col-sm-4[_ngcontent-%COMP%], .col-sm-5[_ngcontent-%COMP%], .col-sm-6[_ngcontent-%COMP%], .col-sm-7[_ngcontent-%COMP%], .col-sm-8[_ngcontent-%COMP%], .col-sm-9[_ngcontent-%COMP%], .col-xs-1[_ngcontent-%COMP%], .col-xs-10[_ngcontent-%COMP%], .col-xs-11[_ngcontent-%COMP%], .col-xs-12[_ngcontent-%COMP%], .col-xs-2[_ngcontent-%COMP%], .col-xs-3[_ngcontent-%COMP%], .col-xs-4[_ngcontent-%COMP%], .col-xs-5[_ngcontent-%COMP%], .col-xs-6[_ngcontent-%COMP%], .col-xs-7[_ngcontent-%COMP%], .col-xs-8[_ngcontent-%COMP%], .col-xs-9[_ngcontent-%COMP%]{position:relative;min-height:1px;padding-right:15px;padding-left:15px}.col-xs-1[_ngcontent-%COMP%], .col-xs-10[_ngcontent-%COMP%], .col-xs-11[_ngcontent-%COMP%], .col-xs-12[_ngcontent-%COMP%], .col-xs-2[_ngcontent-%COMP%], .col-xs-3[_ngcontent-%COMP%], .col-xs-4[_ngcontent-%COMP%], .col-xs-5[_ngcontent-%COMP%], .col-xs-6[_ngcontent-%COMP%], .col-xs-7[_ngcontent-%COMP%], .col-xs-8[_ngcontent-%COMP%], .col-xs-9[_ngcontent-%COMP%]{float:left}.col-xs-12[_ngcontent-%COMP%]{width:100%}.col-xs-11[_ngcontent-%COMP%]{width:91.66666667%}.col-xs-10[_ngcontent-%COMP%]{width:83.33333333%}.col-xs-9[_ngcontent-%COMP%]{width:75%}.col-xs-8[_ngcontent-%COMP%]{width:66.66666667%}.col-xs-7[_ngcontent-%COMP%]{width:58.33333333%}.col-xs-6[_ngcontent-%COMP%]{width:50%}.col-xs-5[_ngcontent-%COMP%]{width:41.66666667%}.col-xs-4[_ngcontent-%COMP%]{width:33.33333333%}.col-xs-3[_ngcontent-%COMP%]{width:25%}.col-xs-2[_ngcontent-%COMP%]{width:16.66666667%}.col-xs-1[_ngcontent-%COMP%]{width:8.33333333%}.col-xs-pull-12[_ngcontent-%COMP%]{right:100%}.col-xs-pull-11[_ngcontent-%COMP%]{right:91.66666667%}.col-xs-pull-10[_ngcontent-%COMP%]{right:83.33333333%}.col-xs-pull-9[_ngcontent-%COMP%]{right:75%}.col-xs-pull-8[_ngcontent-%COMP%]{right:66.66666667%}.col-xs-pull-7[_ngcontent-%COMP%]{right:58.33333333%}.col-xs-pull-6[_ngcontent-%COMP%]{right:50%}.col-xs-pull-5[_ngcontent-%COMP%]{right:41.66666667%}.col-xs-pull-4[_ngcontent-%COMP%]{right:33.33333333%}.col-xs-pull-3[_ngcontent-%COMP%]{right:25%}.col-xs-pull-2[_ngcontent-%COMP%]{right:16.66666667%}.col-xs-pull-1[_ngcontent-%COMP%]{right:8.33333333%}.col-xs-pull-0[_ngcontent-%COMP%]{right:auto}.col-xs-push-12[_ngcontent-%COMP%]{left:100%}.col-xs-push-11[_ngcontent-%COMP%]{left:91.66666667%}.col-xs-push-10[_ngcontent-%COMP%]{left:83.33333333%}.col-xs-push-9[_ngcontent-%COMP%]{left:75%}.col-xs-push-8[_ngcontent-%COMP%]{left:66.66666667%}.col-xs-push-7[_ngcontent-%COMP%]{left:58.33333333%}.col-xs-push-6[_ngcontent-%COMP%]{left:50%}.col-xs-push-5[_ngcontent-%COMP%]{left:41.66666667%}.col-xs-push-4[_ngcontent-%COMP%]{left:33.33333333%}.col-xs-push-3[_ngcontent-%COMP%]{left:25%}.col-xs-push-2[_ngcontent-%COMP%]{left:16.66666667%}.col-xs-push-1[_ngcontent-%COMP%]{left:8.33333333%}.col-xs-push-0[_ngcontent-%COMP%]{left:auto}.col-xs-offset-12[_ngcontent-%COMP%]{margin-left:100%}.col-xs-offset-11[_ngcontent-%COMP%]{margin-left:91.66666667%}.col-xs-offset-10[_ngcontent-%COMP%]{margin-left:83.33333333%}.col-xs-offset-9[_ngcontent-%COMP%]{margin-left:75%}.col-xs-offset-8[_ngcontent-%COMP%]{margin-left:66.66666667%}.col-xs-offset-7[_ngcontent-%COMP%]{margin-left:58.33333333%}.col-xs-offset-6[_ngcontent-%COMP%]{margin-left:50%}.col-xs-offset-5[_ngcontent-%COMP%]{margin-left:41.66666667%}.col-xs-offset-4[_ngcontent-%COMP%]{margin-left:33.33333333%}.col-xs-offset-3[_ngcontent-%COMP%]{margin-left:25%}.col-xs-offset-2[_ngcontent-%COMP%]{margin-left:16.66666667%}.col-xs-offset-1[_ngcontent-%COMP%]{margin-left:8.33333333%}.col-xs-offset-0[_ngcontent-%COMP%]{margin-left:0}@media (min-width:768px){.col-sm-1[_ngcontent-%COMP%], .col-sm-10[_ngcontent-%COMP%], .col-sm-11[_ngcontent-%COMP%], .col-sm-12[_ngcontent-%COMP%], .col-sm-2[_ngcontent-%COMP%], .col-sm-3[_ngcontent-%COMP%], .col-sm-4[_ngcontent-%COMP%], .col-sm-5[_ngcontent-%COMP%], .col-sm-6[_ngcontent-%COMP%], .col-sm-7[_ngcontent-%COMP%], .col-sm-8[_ngcontent-%COMP%], .col-sm-9[_ngcontent-%COMP%]{float:left}.col-sm-12[_ngcontent-%COMP%]{width:100%}.col-sm-11[_ngcontent-%COMP%]{width:91.66666667%}.col-sm-10[_ngcontent-%COMP%]{width:83.33333333%}.col-sm-9[_ngcontent-%COMP%]{width:75%}.col-sm-8[_ngcontent-%COMP%]{width:66.66666667%}.col-sm-7[_ngcontent-%COMP%]{width:58.33333333%}.col-sm-6[_ngcontent-%COMP%]{width:50%}.col-sm-5[_ngcontent-%COMP%]{width:41.66666667%}.col-sm-4[_ngcontent-%COMP%]{width:33.33333333%}.col-sm-3[_ngcontent-%COMP%]{width:25%}.col-sm-2[_ngcontent-%COMP%]{width:16.66666667%}.col-sm-1[_ngcontent-%COMP%]{width:8.33333333%}.col-sm-pull-12[_ngcontent-%COMP%]{right:100%}.col-sm-pull-11[_ngcontent-%COMP%]{right:91.66666667%}.col-sm-pull-10[_ngcontent-%COMP%]{right:83.33333333%}.col-sm-pull-9[_ngcontent-%COMP%]{right:75%}.col-sm-pull-8[_ngcontent-%COMP%]{right:66.66666667%}.col-sm-pull-7[_ngcontent-%COMP%]{right:58.33333333%}.col-sm-pull-6[_ngcontent-%COMP%]{right:50%}.col-sm-pull-5[_ngcontent-%COMP%]{right:41.66666667%}.col-sm-pull-4[_ngcontent-%COMP%]{right:33.33333333%}.col-sm-pull-3[_ngcontent-%COMP%]{right:25%}.col-sm-pull-2[_ngcontent-%COMP%]{right:16.66666667%}.col-sm-pull-1[_ngcontent-%COMP%]{right:8.33333333%}.col-sm-pull-0[_ngcontent-%COMP%]{right:auto}.col-sm-push-12[_ngcontent-%COMP%]{left:100%}.col-sm-push-11[_ngcontent-%COMP%]{left:91.66666667%}.col-sm-push-10[_ngcontent-%COMP%]{left:83.33333333%}.col-sm-push-9[_ngcontent-%COMP%]{left:75%}.col-sm-push-8[_ngcontent-%COMP%]{left:66.66666667%}.col-sm-push-7[_ngcontent-%COMP%]{left:58.33333333%}.col-sm-push-6[_ngcontent-%COMP%]{left:50%}.col-sm-push-5[_ngcontent-%COMP%]{left:41.66666667%}.col-sm-push-4[_ngcontent-%COMP%]{left:33.33333333%}.col-sm-push-3[_ngcontent-%COMP%]{left:25%}.col-sm-push-2[_ngcontent-%COMP%]{left:16.66666667%}.col-sm-push-1[_ngcontent-%COMP%]{left:8.33333333%}.col-sm-push-0[_ngcontent-%COMP%]{left:auto}.col-sm-offset-12[_ngcontent-%COMP%]{margin-left:100%}.col-sm-offset-11[_ngcontent-%COMP%]{margin-left:91.66666667%}.col-sm-offset-10[_ngcontent-%COMP%]{margin-left:83.33333333%}.col-sm-offset-9[_ngcontent-%COMP%]{margin-left:75%}.col-sm-offset-8[_ngcontent-%COMP%]{margin-left:66.66666667%}.col-sm-offset-7[_ngcontent-%COMP%]{margin-left:58.33333333%}.col-sm-offset-6[_ngcontent-%COMP%]{margin-left:50%}.col-sm-offset-5[_ngcontent-%COMP%]{margin-left:41.66666667%}.col-sm-offset-4[_ngcontent-%COMP%]{margin-left:33.33333333%}.col-sm-offset-3[_ngcontent-%COMP%]{margin-left:25%}.col-sm-offset-2[_ngcontent-%COMP%]{margin-left:16.66666667%}.col-sm-offset-1[_ngcontent-%COMP%]{margin-left:8.33333333%}.col-sm-offset-0[_ngcontent-%COMP%]{margin-left:0}}@media (min-width:992px){.col-md-1[_ngcontent-%COMP%], .col-md-10[_ngcontent-%COMP%], .col-md-11[_ngcontent-%COMP%], .col-md-12[_ngcontent-%COMP%], .col-md-2[_ngcontent-%COMP%], .col-md-3[_ngcontent-%COMP%], .col-md-4[_ngcontent-%COMP%], .col-md-5[_ngcontent-%COMP%], .col-md-6[_ngcontent-%COMP%], .col-md-7[_ngcontent-%COMP%], .col-md-8[_ngcontent-%COMP%], .col-md-9[_ngcontent-%COMP%]{float:left}.col-md-12[_ngcontent-%COMP%]{width:100%}.col-md-11[_ngcontent-%COMP%]{width:91.66666667%}.col-md-10[_ngcontent-%COMP%]{width:83.33333333%}.col-md-9[_ngcontent-%COMP%]{width:75%}.col-md-8[_ngcontent-%COMP%]{width:66.66666667%}.col-md-7[_ngcontent-%COMP%]{width:58.33333333%}.col-md-6[_ngcontent-%COMP%]{width:50%}.col-md-5[_ngcontent-%COMP%]{width:41.66666667%}.col-md-4[_ngcontent-%COMP%]{width:33.33333333%}.col-md-3[_ngcontent-%COMP%]{width:25%}.col-md-2[_ngcontent-%COMP%]{width:16.66666667%}.col-md-1[_ngcontent-%COMP%]{width:8.33333333%}.col-md-pull-12[_ngcontent-%COMP%]{right:100%}.col-md-pull-11[_ngcontent-%COMP%]{right:91.66666667%}.col-md-pull-10[_ngcontent-%COMP%]{right:83.33333333%}.col-md-pull-9[_ngcontent-%COMP%]{right:75%}.col-md-pull-8[_ngcontent-%COMP%]{right:66.66666667%}.col-md-pull-7[_ngcontent-%COMP%]{right:58.33333333%}.col-md-pull-6[_ngcontent-%COMP%]{right:50%}.col-md-pull-5[_ngcontent-%COMP%]{right:41.66666667%}.col-md-pull-4[_ngcontent-%COMP%]{right:33.33333333%}.col-md-pull-3[_ngcontent-%COMP%]{right:25%}.col-md-pull-2[_ngcontent-%COMP%]{right:16.66666667%}.col-md-pull-1[_ngcontent-%COMP%]{right:8.33333333%}.col-md-pull-0[_ngcontent-%COMP%]{right:auto}.col-md-push-12[_ngcontent-%COMP%]{left:100%}.col-md-push-11[_ngcontent-%COMP%]{left:91.66666667%}.col-md-push-10[_ngcontent-%COMP%]{left:83.33333333%}.col-md-push-9[_ngcontent-%COMP%]{left:75%}.col-md-push-8[_ngcontent-%COMP%]{left:66.66666667%}.col-md-push-7[_ngcontent-%COMP%]{left:58.33333333%}.col-md-push-6[_ngcontent-%COMP%]{left:50%}.col-md-push-5[_ngcontent-%COMP%]{left:41.66666667%}.col-md-push-4[_ngcontent-%COMP%]{left:33.33333333%}.col-md-push-3[_ngcontent-%COMP%]{left:25%}.col-md-push-2[_ngcontent-%COMP%]{left:16.66666667%}.col-md-push-1[_ngcontent-%COMP%]{left:8.33333333%}.col-md-push-0[_ngcontent-%COMP%]{left:auto}.col-md-offset-12[_ngcontent-%COMP%]{margin-left:100%}.col-md-offset-11[_ngcontent-%COMP%]{margin-left:91.66666667%}.col-md-offset-10[_ngcontent-%COMP%]{margin-left:83.33333333%}.col-md-offset-9[_ngcontent-%COMP%]{margin-left:75%}.col-md-offset-8[_ngcontent-%COMP%]{margin-left:66.66666667%}.col-md-offset-7[_ngcontent-%COMP%]{margin-left:58.33333333%}.col-md-offset-6[_ngcontent-%COMP%]{margin-left:50%}.col-md-offset-5[_ngcontent-%COMP%]{margin-left:41.66666667%}.col-md-offset-4[_ngcontent-%COMP%]{margin-left:33.33333333%}.col-md-offset-3[_ngcontent-%COMP%]{margin-left:25%}.col-md-offset-2[_ngcontent-%COMP%]{margin-left:16.66666667%}.col-md-offset-1[_ngcontent-%COMP%]{margin-left:8.33333333%}.col-md-offset-0[_ngcontent-%COMP%]{margin-left:0}}@media (min-width:1200px){.col-lg-1[_ngcontent-%COMP%], .col-lg-10[_ngcontent-%COMP%], .col-lg-11[_ngcontent-%COMP%], .col-lg-12[_ngcontent-%COMP%], .col-lg-2[_ngcontent-%COMP%], .col-lg-3[_ngcontent-%COMP%], .col-lg-4[_ngcontent-%COMP%], .col-lg-5[_ngcontent-%COMP%], .col-lg-6[_ngcontent-%COMP%], .col-lg-7[_ngcontent-%COMP%], .col-lg-8[_ngcontent-%COMP%], .col-lg-9[_ngcontent-%COMP%]{float:left}.col-lg-12[_ngcontent-%COMP%]{width:100%}.col-lg-11[_ngcontent-%COMP%]{width:91.66666667%}.col-lg-10[_ngcontent-%COMP%]{width:83.33333333%}.col-lg-9[_ngcontent-%COMP%]{width:75%}.col-lg-8[_ngcontent-%COMP%]{width:66.66666667%}.col-lg-7[_ngcontent-%COMP%]{width:58.33333333%}.col-lg-6[_ngcontent-%COMP%]{width:50%}.col-lg-5[_ngcontent-%COMP%]{width:41.66666667%}.col-lg-4[_ngcontent-%COMP%]{width:33.33333333%}.col-lg-3[_ngcontent-%COMP%]{width:25%}.col-lg-2[_ngcontent-%COMP%]{width:16.66666667%}.col-lg-1[_ngcontent-%COMP%]{width:8.33333333%}.col-lg-pull-12[_ngcontent-%COMP%]{right:100%}.col-lg-pull-11[_ngcontent-%COMP%]{right:91.66666667%}.col-lg-pull-10[_ngcontent-%COMP%]{right:83.33333333%}.col-lg-pull-9[_ngcontent-%COMP%]{right:75%}.col-lg-pull-8[_ngcontent-%COMP%]{right:66.66666667%}.col-lg-pull-7[_ngcontent-%COMP%]{right:58.33333333%}.col-lg-pull-6[_ngcontent-%COMP%]{right:50%}.col-lg-pull-5[_ngcontent-%COMP%]{right:41.66666667%}.col-lg-pull-4[_ngcontent-%COMP%]{right:33.33333333%}.col-lg-pull-3[_ngcontent-%COMP%]{right:25%}.col-lg-pull-2[_ngcontent-%COMP%]{right:16.66666667%}.col-lg-pull-1[_ngcontent-%COMP%]{right:8.33333333%}.col-lg-pull-0[_ngcontent-%COMP%]{right:auto}.col-lg-push-12[_ngcontent-%COMP%]{left:100%}.col-lg-push-11[_ngcontent-%COMP%]{left:91.66666667%}.col-lg-push-10[_ngcontent-%COMP%]{left:83.33333333%}.col-lg-push-9[_ngcontent-%COMP%]{left:75%}.col-lg-push-8[_ngcontent-%COMP%]{left:66.66666667%}.col-lg-push-7[_ngcontent-%COMP%]{left:58.33333333%}.col-lg-push-6[_ngcontent-%COMP%]{left:50%}.col-lg-push-5[_ngcontent-%COMP%]{left:41.66666667%}.col-lg-push-4[_ngcontent-%COMP%]{left:33.33333333%}.col-lg-push-3[_ngcontent-%COMP%]{left:25%}.col-lg-push-2[_ngcontent-%COMP%]{left:16.66666667%}.col-lg-push-1[_ngcontent-%COMP%]{left:8.33333333%}.col-lg-push-0[_ngcontent-%COMP%]{left:auto}.col-lg-offset-12[_ngcontent-%COMP%]{margin-left:100%}.col-lg-offset-11[_ngcontent-%COMP%]{margin-left:91.66666667%}.col-lg-offset-10[_ngcontent-%COMP%]{margin-left:83.33333333%}.col-lg-offset-9[_ngcontent-%COMP%]{margin-left:75%}.col-lg-offset-8[_ngcontent-%COMP%]{margin-left:66.66666667%}.col-lg-offset-7[_ngcontent-%COMP%]{margin-left:58.33333333%}.col-lg-offset-6[_ngcontent-%COMP%]{margin-left:50%}.col-lg-offset-5[_ngcontent-%COMP%]{margin-left:41.66666667%}.col-lg-offset-4[_ngcontent-%COMP%]{margin-left:33.33333333%}.col-lg-offset-3[_ngcontent-%COMP%]{margin-left:25%}.col-lg-offset-2[_ngcontent-%COMP%]{margin-left:16.66666667%}.col-lg-offset-1[_ngcontent-%COMP%]{margin-left:8.33333333%}.col-lg-offset-0[_ngcontent-%COMP%]{margin-left:0}}.modal-open[_ngcontent-%COMP%]{overflow:hidden}.modal[_ngcontent-%COMP%]{top:0;right:0;bottom:0;left:0;z-index:1050;overflow:hidden;-webkit-overflow-scrolling:touch;outline:0;display:block;height:100%}.modal.fade[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{transform:translate(0,-25%);transition:transform .3s ease-out}.modal.in[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{transform:translate(0,0)}.modal-open[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]{overflow-x:hidden;overflow-y:auto}.modal-dialog[_ngcontent-%COMP%]{width:auto;margin:30px;padding:100px 0;position:absolute;top:40%;left:50%;transform:translate(-50%,-50%)}.modal-content[_ngcontent-%COMP%]{position:relative;background-color:#fff;-webkit-background-clip:padding-box;background-clip:padding-box;border:1px solid rgba(0,0,0,.2);border-radius:15px;box-shadow:0 3px 9px rgba(0,0,0,.5);outline:0}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;right:0;bottom:0;left:0;z-index:1040;background-color:#000}.modal-backdrop.fade[_ngcontent-%COMP%]{opacity:0}.modal-backdrop.in[_ngcontent-%COMP%]{opacity:.5}.modal-header[_ngcontent-%COMP%]{padding:15px;border-bottom:1px solid #e5e5e5}.modal-header[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{margin-top:-2px}.modal-title[_ngcontent-%COMP%]{margin:0;line-height:1.42857143}.modal-body[_ngcontent-%COMP%]{position:relative;padding:15px}.modal-footer[_ngcontent-%COMP%]{padding:1px;text-align:center;border-top:1px solid #e5e5e5}.modal-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%] + .btn[_ngcontent-%COMP%]{margin-bottom:0;margin-left:5px}.modal-footer[_ngcontent-%COMP%]   .btn-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%] + .btn[_ngcontent-%COMP%]{margin-left:-1px}.modal-footer[_ngcontent-%COMP%]   .btn-block[_ngcontent-%COMP%] + .btn-block[_ngcontent-%COMP%]{margin-left:0}.modal-scrollbar-measure[_ngcontent-%COMP%]{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}@media (max-width:600px){.headerTitle[_ngcontent-%COMP%]{display:none}.headerLogo[_ngcontent-%COMP%]{right:0}}@media (max-width:767px){.row[_ngcontent-%COMP%]{height:100%}.leftSection[_ngcontent-%COMP%]{height:60%}.rightSection[_ngcontent-%COMP%]{padding-right:0!important}.headerTitle[_ngcontent-%COMP%]{font-size:medium}.modal-content[_ngcontent-%COMP%]{max-height:100%;height:100%}.modal-dialog[_ngcontent-%COMP%]{height:calc(100% - 10px);margin:5px;padding:0;position:relative;top:0;left:0;transform:none}.modal-body[_ngcontent-%COMP%]{padding:10px 20px;overflow:auto;height:calc(100% - 120px);overflow:-moz-scrollbars-vertical;overflow-x:hidden;overflow-y:scroll}.modal[_ngcontent-%COMP%]{max-height:100%}.videoContainer[_ngcontent-%COMP%]{width:60%}}@media (min-width:768px){.ovVideoSmall[_ngcontent-%COMP%]{width:40%}.row[_ngcontent-%COMP%]{display:flex!important}.modal-dialog[_ngcontent-%COMP%]{width:90%;margin:55px auto}.modal-content[_ngcontent-%COMP%]{box-shadow:0 5px 15px rgba(0,0,0,.5)}.modal-sm[_ngcontent-%COMP%]{width:300px}}@media (min-width:992px){.modal-lg[_ngcontent-%COMP%]{width:75%}}@media (min-width:1440px){.modal-xl[_ngcontent-%COMP%]{width:75%}}"]}),e})(),Ut=(()=>{let e=class{};return e.\u0275mod=o.Ob({type:e}),e.\u0275inj=o.Nb({factory:function(t){return new(t||e)},providers:[ft,nt,ht,it,mt,tt,st,ot,pt],imports:[[g.c,f.c,h.m,h.C,l.c,k.j,y.b,d.b,S.c,O.e,m.g,u.b,x.b,I.a,P.b,w.o,_.b,T.b,v.g,c.b,A.a,C.a.forRoot()]]}),e})()},"/dLB":function(e,t,n){"use strict";var i;t.__esModule=!0,(i=t.VideoInsertMode||(t.VideoInsertMode={})).AFTER="AFTER",i.APPEND="APPEND",i.BEFORE="BEFORE",i.PREPEND="PREPEND",i.REPLACE="REPLACE"},"/u9M":function(e,t,n){"use strict";t.__esModule=!0;var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n("LXjW")),o=i.tokenize,s=i.options.Options;function r(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function a(e){return e.replace(/"/g,"&quot;")}function c(e){if(!e)return"";var t=[];for(var n in e)t.push(n+'="'+a(e[n]+"")+'"');return t.join(" ")}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=new s(t);for(var n=o(e),i=[],l=0;l<n.length;l++){var d=n[l];if("nl"===d.type&&t.nl2br)i.push("<br>\n");else if(d.isLink&&t.check(d)){var u=t.resolve(d),g=u.formatted,h=u.formattedHref,p=u.tagName,m=u.className,f=u.target,b=u.attributes,v="<"+p+' href="'+a(h)+'"';m&&(v+=' class="'+a(m)+'"'),f&&(v+=' target="'+a(f)+'"'),b&&(v+=" "+c(b)),v+=">"+r(g)+"</"+p+">",i.push(v)}else i.push(r(d.toString()))}return i.join("")}if(!String.prototype.linkify)try{Object.defineProperty(String.prototype,"linkify",{set:function(){},get:function(){return function(e){return l(this,e)}}})}catch(d){String.prototype.linkify||(String.prototype.linkify=function(e){return l(this,e)})}t.default=l},"0srX":function(e,t,n){"use strict";n.r(t),n.d(t,"v1",(function(){return h})),n.d(t,"v3",(function(){return S})),n.d(t,"v4",(function(){return y})),n.d(t,"v5",(function(){return _}));var i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),o=new Uint8Array(16);function s(){if(!i)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(o)}for(var r=[],a=0;a<256;++a)r[a]=(a+256).toString(16).substr(1);var c,l,d=function(e,t){var n=t||0;return[r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]]].join("")},u=0,g=0,h=function(e,t,n){var i=t&&n||0,o=t||[],r=(e=e||{}).node||c,a=void 0!==e.clockseq?e.clockseq:l;if(null==r||null==a){var h=e.random||(e.rng||s)();null==r&&(r=c=[1|h[0],h[1],h[2],h[3],h[4],h[5]]),null==a&&(a=l=16383&(h[6]<<8|h[7]))}var p=void 0!==e.msecs?e.msecs:(new Date).getTime(),m=void 0!==e.nsecs?e.nsecs:g+1,f=p-u+(m-g)/1e4;if(f<0&&void 0===e.clockseq&&(a=a+1&16383),(f<0||p>u)&&void 0===e.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");u=p,g=m,l=a;var b=(1e4*(268435455&(p+=122192928e5))+m)%4294967296;o[i++]=b>>>24&255,o[i++]=b>>>16&255,o[i++]=b>>>8&255,o[i++]=255&b;var v=p/4294967296*1e4&268435455;o[i++]=v>>>8&255,o[i++]=255&v,o[i++]=v>>>24&15|16,o[i++]=v>>>16&255,o[i++]=a>>>8|128,o[i++]=255&a;for(var C=0;C<6;++C)o[i+C]=r[C];return t||d(o)},p=function(e,t,n){var i=function(e,i,o,s){var r=o&&s||0;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=new Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(e)),"string"==typeof i&&(i=function(e){var t=[];return e.replace(/[a-fA-F0-9]{2}/g,(function(e){t.push(parseInt(e,16))})),t}(i)),!Array.isArray(e))throw TypeError("value must be an array of bytes");if(!Array.isArray(i)||16!==i.length)throw TypeError("namespace must be uuid string or an Array of 16 byte values");var a=n(i.concat(e));if(a[6]=15&a[6]|t,a[8]=63&a[8]|128,o)for(var c=0;c<16;++c)o[r+c]=a[c];return o||d(a)};try{i.name=e}catch(o){}return i.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",i.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",i};function m(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function f(e,t,n,i,o,s){return m((r=m(m(t,e),m(i,s)))<<(a=o)|r>>>32-a,n);var r,a}function b(e,t,n,i,o,s,r){return f(t&n|~t&i,e,t,o,s,r)}function v(e,t,n,i,o,s,r){return f(t&i|n&~i,e,t,o,s,r)}function C(e,t,n,i,o,s,r){return f(t^n^i,e,t,o,s,r)}function O(e,t,n,i,o,s,r){return f(n^(t|~i),e,t,o,s,r)}var S=p("v3",48,(function(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Array(t.length);for(var n=0;n<t.length;n++)e[n]=t.charCodeAt(n)}return function(e){var t,n,i,o=[],s=32*e.length;for(t=0;t<s;t+=8)n=e[t>>5]>>>t%32&255,i=parseInt("0123456789abcdef".charAt(n>>>4&15)+"0123456789abcdef".charAt(15&n),16),o.push(i);return o}(function(e,t){var n,i,o,s,r;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var a=1732584193,c=-271733879,l=-1732584194,d=271733878;for(n=0;n<e.length;n+=16)i=a,o=c,s=l,r=d,a=b(a,c,l,d,e[n],7,-680876936),d=b(d,a,c,l,e[n+1],12,-389564586),l=b(l,d,a,c,e[n+2],17,606105819),c=b(c,l,d,a,e[n+3],22,-1044525330),a=b(a,c,l,d,e[n+4],7,-176418897),d=b(d,a,c,l,e[n+5],12,1200080426),l=b(l,d,a,c,e[n+6],17,-1473231341),c=b(c,l,d,a,e[n+7],22,-45705983),a=b(a,c,l,d,e[n+8],7,1770035416),d=b(d,a,c,l,e[n+9],12,-1958414417),l=b(l,d,a,c,e[n+10],17,-42063),c=b(c,l,d,a,e[n+11],22,-1990404162),a=b(a,c,l,d,e[n+12],7,1804603682),d=b(d,a,c,l,e[n+13],12,-40341101),l=b(l,d,a,c,e[n+14],17,-1502002290),a=v(a,c=b(c,l,d,a,e[n+15],22,1236535329),l,d,e[n+1],5,-165796510),d=v(d,a,c,l,e[n+6],9,-1069501632),l=v(l,d,a,c,e[n+11],14,643717713),c=v(c,l,d,a,e[n],20,-373897302),a=v(a,c,l,d,e[n+5],5,-701558691),d=v(d,a,c,l,e[n+10],9,38016083),l=v(l,d,a,c,e[n+15],14,-660478335),c=v(c,l,d,a,e[n+4],20,-405537848),a=v(a,c,l,d,e[n+9],5,568446438),d=v(d,a,c,l,e[n+14],9,-1019803690),l=v(l,d,a,c,e[n+3],14,-187363961),c=v(c,l,d,a,e[n+8],20,1163531501),a=v(a,c,l,d,e[n+13],5,-1444681467),d=v(d,a,c,l,e[n+2],9,-51403784),l=v(l,d,a,c,e[n+7],14,1735328473),a=C(a,c=v(c,l,d,a,e[n+12],20,-1926607734),l,d,e[n+5],4,-378558),d=C(d,a,c,l,e[n+8],11,-2022574463),l=C(l,d,a,c,e[n+11],16,1839030562),c=C(c,l,d,a,e[n+14],23,-35309556),a=C(a,c,l,d,e[n+1],4,-1530992060),d=C(d,a,c,l,e[n+4],11,1272893353),l=C(l,d,a,c,e[n+7],16,-155497632),c=C(c,l,d,a,e[n+10],23,-1094730640),a=C(a,c,l,d,e[n+13],4,681279174),d=C(d,a,c,l,e[n],11,-358537222),l=C(l,d,a,c,e[n+3],16,-722521979),c=C(c,l,d,a,e[n+6],23,76029189),a=C(a,c,l,d,e[n+9],4,-640364487),d=C(d,a,c,l,e[n+12],11,-421815835),l=C(l,d,a,c,e[n+15],16,530742520),a=O(a,c=C(c,l,d,a,e[n+2],23,-995338651),l,d,e[n],6,-198630844),d=O(d,a,c,l,e[n+7],10,1126891415),l=O(l,d,a,c,e[n+14],15,-1416354905),c=O(c,l,d,a,e[n+5],21,-57434055),a=O(a,c,l,d,e[n+12],6,1700485571),d=O(d,a,c,l,e[n+3],10,-1894986606),l=O(l,d,a,c,e[n+10],15,-1051523),c=O(c,l,d,a,e[n+1],21,-2054922799),a=O(a,c,l,d,e[n+8],6,1873313359),d=O(d,a,c,l,e[n+15],10,-30611744),l=O(l,d,a,c,e[n+6],15,-1560198380),c=O(c,l,d,a,e[n+13],21,1309151649),a=O(a,c,l,d,e[n+4],6,-145523070),d=O(d,a,c,l,e[n+11],10,-1120210379),l=O(l,d,a,c,e[n+2],15,718787259),c=O(c,l,d,a,e[n+9],21,-343485551),a=m(a,i),c=m(c,o),l=m(l,s),d=m(d,r);return[a,c,l,d]}(function(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;var i=8*e.length;for(t=0;t<i;t+=8)n[t>>5]|=(255&e[t/8])<<t%32;return n}(e),8*e.length))})),y=function(e,t,n){var i=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||s)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var r=0;r<16;++r)t[i+r]=o[r];return t||d(o)};function M(e,t,n,i){switch(e){case 0:return t&n^~t&i;case 1:return t^n^i;case 2:return t&n^t&i^n&i;case 3:return t^n^i}}function x(e,t){return e<<t|e>>>32-t}var _=p("v5",80,(function(e){var t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var i=unescape(encodeURIComponent(e));e=new Array(i.length);for(var o=0;o<i.length;o++)e[o]=i.charCodeAt(o)}e.push(128);var s=Math.ceil((e.length/4+2)/16),r=new Array(s);for(o=0;o<s;o++){r[o]=new Array(16);for(var a=0;a<16;a++)r[o][a]=e[64*o+4*a]<<24|e[64*o+4*a+1]<<16|e[64*o+4*a+2]<<8|e[64*o+4*a+3]}for(r[s-1][14]=8*(e.length-1)/Math.pow(2,32),r[s-1][14]=Math.floor(r[s-1][14]),r[s-1][15]=8*(e.length-1)&4294967295,o=0;o<s;o++){for(var c=new Array(80),l=0;l<16;l++)c[l]=r[o][l];for(l=16;l<80;l++)c[l]=x(c[l-3]^c[l-8]^c[l-14]^c[l-16],1);var d=n[0],u=n[1],g=n[2],h=n[3],p=n[4];for(l=0;l<80;l++){var m=Math.floor(l/20),f=x(d,5)+M(m,u,g,h)+p+t[m]+c[l]>>>0;p=h,h=g,g=x(u,30)>>>0,u=d,d=f}n[0]=n[0]+d>>>0,n[1]=n[1]+u>>>0,n[2]=n[2]+g>>>0,n[3]=n[3]+h>>>0,n[4]=n[4]+p>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]}))},"0wxW":function(e,t,n){var i=n("de4E"),o=n("pLL0");t.JsonRPC=i,t.XmlRPC=o},"1Kca":function(e,t,n){"use strict";var i=n("dY/r");e.exports=function(e){var t,o={stun:(e||{}).stun||n("KFtI"),turn:(e||{}).turn||n("hw9W")},s=(e||{}).turnCount||0;function r(e,t){for(var n,s=[],r=[].concat(o[e]);r.length&&s.length<t;)n=Math.random()*r.length|0,s=s.concat(r.splice(n,1));return s.map((function(t){return"string"==typeof t||t instanceof String?i(e+":"+t):t}))}return t=[].concat(r("stun",(e||{}).stunCount||2)),s&&(t=t.concat(r("turn",s))),t}},"5kmN":function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0;var s=n("1Kca"),r=n("0srX"),a=n("bDgZ"),c=n("9m68").OpenViduLogger.getInstance(),l=function(){function e(e){var t=this;this.configuration=e,this.remoteCandidatesQueue=[],this.localCandidatesQueue=[],this.iceCandidateList=[],this.candidategatheringdone=!1,this.configuration.iceServers=this.configuration.iceServers&&this.configuration.iceServers.length>0?this.configuration.iceServers:s(),this.pc=new RTCPeerConnection({iceServers:this.configuration.iceServers}),this.id=e.id?e.id:this.generateUniqueId(),this.pc.onicecandidate=function(e){if(e.candidate){var n=e.candidate;n?(t.localCandidatesQueue.push({candidate:n.candidate}),t.candidategatheringdone=!1,t.configuration.onicecandidate(e.candidate)):t.candidategatheringdone||(t.candidategatheringdone=!0)}},this.pc.onsignalingstatechange=function(){if("stable"===t.pc.signalingState)for(;t.iceCandidateList.length>0;){var e=t.iceCandidateList.shift();t.pc.addIceCandidate(e)}},this.start()}return e.prototype.start=function(){var e=this;return new Promise((function(t,n){if("closed"===e.pc.signalingState&&n('The peer connection object is in "closed" state. This is most likely due to an invocation of the dispose method before accepting in the dialogue'),e.configuration.mediaStream){for(var i=0,o=e.configuration.mediaStream.getTracks();i<o.length;i++)e.pc.addTrack(o[i],e.configuration.mediaStream);t()}}))},e.prototype.dispose=function(){if(c.debug("Disposing WebRtcPeer"),this.pc){if("closed"===this.pc.signalingState)return;this.pc.close(),this.remoteCandidatesQueue=[],this.localCandidatesQueue=[]}},e.prototype.generateOffer=function(){var e=this;return new Promise((function(t,n){var i,o=!0;e.configuration.mediaConstraints&&(i="boolean"!=typeof e.configuration.mediaConstraints.audio||e.configuration.mediaConstraints.audio,o="boolean"!=typeof e.configuration.mediaConstraints.video||e.configuration.mediaConstraints.video);var s={offerToReceiveAudio:"sendonly"!==e.configuration.mode&&i,offerToReceiveVideo:"sendonly"!==e.configuration.mode&&o};c.debug("RTCPeerConnection constraints: "+JSON.stringify(s)),"Safari"===a.name&&-1!==a.ua.indexOf("Safari")?(i&&e.pc.addTransceiver("audio",{direction:e.configuration.mode}),o&&e.pc.addTransceiver("video",{direction:e.configuration.mode}),e.pc.createOffer().then((function(t){return c.debug("Created SDP offer"),e.pc.setLocalDescription(t)})).then((function(){var i=e.pc.localDescription;i?(c.debug("Local description set",i.sdp),t(i.sdp)):n("Local description is not defined")})).catch((function(e){return n(e)}))):e.pc.createOffer(s).then((function(t){return c.debug("Created SDP offer"),e.pc.setLocalDescription(t)})).then((function(){var i=e.pc.localDescription;i?(c.debug("Local description set",i.sdp),t(i.sdp)):n("Local description is not defined")})).catch((function(e){return n(e)}))}))},e.prototype.processAnswer=function(e,t){var n=this;return new Promise((function(i,o){var s={type:"answer",sdp:e};c.debug("SDP answer received, setting remote description"),"closed"===n.pc.signalingState&&o("RTCPeerConnection is closed"),n.setRemoteDescription(s,t,i,o)}))},e.prototype.setRemoteDescription=function(e,t,n,i){var o=this;a.isIonicIos?t?setTimeout((function(){c.info("setRemoteDescription run after timeout for Ionic iOS device"),o.pc.setRemoteDescription(new RTCSessionDescription(e)).then((function(){return n()})).catch((function(e){return i(e)}))}),250):this.pc.setRemoteDescription(new RTCSessionDescription(e)).then((function(){return n()})).catch((function(e){return i(e)})):this.pc.setRemoteDescription(e).then((function(){return n()})).catch((function(e){return i(e)}))},e.prototype.addIceCandidate=function(e){var t=this;return new Promise((function(n,i){switch(c.debug("Remote ICE candidate received",e),t.remoteCandidatesQueue.push(e),t.pc.signalingState){case"closed":i(new Error("PeerConnection object is closed"));break;case"stable":t.pc.remoteDescription?t.pc.addIceCandidate(e).then((function(){return n()})).catch((function(e){return i(e)})):(t.iceCandidateList.push(e),n());break;default:t.iceCandidateList.push(e),n()}}))},e.prototype.addIceConnectionStateChangeListener=function(e){var t=this;this.pc.oniceconnectionstatechange=function(){switch(t.pc.iceConnectionState){case"disconnected":c.warn("IceConnectionState of RTCPeerConnection "+t.id+" ("+e+') change to "disconnected". Possible network disconnection');break;case"failed":c.error("IceConnectionState of RTCPeerConnection "+t.id+" ("+e+') to "failed"');break;case"closed":c.log("IceConnectionState of RTCPeerConnection "+t.id+" ("+e+') change to "closed"');break;case"new":c.log("IceConnectionState of RTCPeerConnection "+t.id+" ("+e+') change to "new"');break;case"checking":c.log("IceConnectionState of RTCPeerConnection "+t.id+" ("+e+') change to "checking"');break;case"connected":c.log("IceConnectionState of RTCPeerConnection "+t.id+" ("+e+') change to "connected"');break;case"completed":c.log("IceConnectionState of RTCPeerConnection "+t.id+" ("+e+') change to "completed"')}}},e.prototype.generateUniqueId=function(){return r.v4()},e}();t.WebRtcPeer=l;var d=function(e){function t(t){return t.mode="recvonly",e.call(this,t)||this}return o(t,e),t}(l);t.WebRtcPeerRecvonly=d;var u=function(e){function t(t){return t.mode="sendonly",e.call(this,t)||this}return o(t,e),t}(l);t.WebRtcPeerSendonly=u;var g=function(e){function t(t){return t.mode="sendrecv",e.call(this,t)||this}return o(t,e),t}(l);t.WebRtcPeerSendrecv=g},"6+/i":function(e,t,n){var i;!function(t){"use strict";function o(){}var s=o.prototype,r=t.EventEmitter;function a(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function c(e){return function(){return this[e].apply(this,arguments)}}s.getListeners=function(e){var t,n,i=this._getEvents();if(e instanceof RegExp)for(n in t={},i)i.hasOwnProperty(n)&&e.test(n)&&(t[n]=i[n]);else t=i[e]||(i[e]=[]);return t},s.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},s.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&((t={})[e]=n),t||n},s.addListener=function(e,t){if(!function e(t){return"function"==typeof t||t instanceof RegExp||!(!t||"object"!=typeof t)&&e(t.listener)}(t))throw new TypeError("listener must be a function");var n,i=this.getListenersAsObject(e),o="object"==typeof t;for(n in i)i.hasOwnProperty(n)&&-1===a(i[n],t)&&i[n].push(o?t:{listener:t,once:!1});return this},s.on=c("addListener"),s.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},s.once=c("addOnceListener"),s.defineEvent=function(e){return this.getListeners(e),this},s.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},s.removeListener=function(e,t){var n,i,o=this.getListenersAsObject(e);for(i in o)o.hasOwnProperty(i)&&-1!==(n=a(o[i],t))&&o[i].splice(n,1);return this},s.off=c("removeListener"),s.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},s.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},s.manipulateListeners=function(e,t,n){var i,o,s=e?this.removeListener:this.addListener,r=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(i=n.length;i--;)s.call(this,t,n[i]);else for(i in t)t.hasOwnProperty(i)&&(o=t[i])&&("function"==typeof o?s.call(this,i,o):r.call(this,i,o));return this},s.removeEvent=function(e){var t,n=typeof e,i=this._getEvents();if("string"===n)delete i[e];else if(e instanceof RegExp)for(t in i)i.hasOwnProperty(t)&&e.test(t)&&delete i[t];else delete this._events;return this},s.removeAllListeners=c("removeEvent"),s.emitEvent=function(e,t){var n,i,o,s,r=this.getListenersAsObject(e);for(s in r)if(r.hasOwnProperty(s))for(n=r[s].slice(0),o=0;o<n.length;o++)!0===(i=n[o]).once&&this.removeListener(e,i.listener),i.listener.apply(this,t||[])===this._getOnceReturnValue()&&this.removeListener(e,i.listener);return this},s.trigger=c("emitEvent"),s.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},s.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},s._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},s._getEvents=function(){return this._events||(this._events={})},o.noConflict=function(){return t.EventEmitter=r,o},void 0===(i=(function(){return o}).call(t,n,t,e))||(e.exports=i)}("undefined"!=typeof window?window:this||{})},"74bm":function(e,t,n){"use strict";t.__esModule=!0;var i=n("BwMD"),o=n("Tt94"),s=n("9m68").OpenViduLogger.getInstance(),r=function(){function e(e,t){this.handlers={},this.type=e,this.options=t}return e.prototype.execMethod=function(e,t){var n=this;return new Promise((function(r,a){var c;if(s.info("Executing filter method to stream "+n.stream.streamId),"string"!=typeof t)try{c=JSON.stringify(t)}catch(d){var l="'params' property must be a JSON formatted object";s.error(l),a(l)}else c=t;n.stream.session.openvidu.sendRequest("execFilterMethod",{streamId:n.stream.streamId,method:e,params:c},(function(t,l){if(t)s.error("Error executing filter method for Stream "+n.stream.streamId,t),a(401===t.code?new o.OpenViduError(o.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to execute a filter method"):t);else{s.info("Filter method successfully executed on Stream "+n.stream.streamId);var d=Object.assign({},n.stream.filter);n.stream.filter.lastExecMethod={method:e,params:JSON.parse(c)},n.stream.session.emitEvent("streamPropertyChanged",[new i.StreamPropertyChangedEvent(n.stream.session,n.stream,"filter",n.stream.filter,d,"execFilterMethod")]),n.stream.streamManager.emitEvent("streamPropertyChanged",[new i.StreamPropertyChangedEvent(n.stream.streamManager,n.stream,"filter",n.stream.filter,d,"execFilterMethod")]),r()}}))}))},e.prototype.addEventListener=function(e,t){var n=this;return new Promise((function(i,r){s.info("Adding filter event listener to event "+e+" to stream "+n.stream.streamId),n.stream.session.openvidu.sendRequest("addFilterEventListener",{streamId:n.stream.streamId,eventType:e},(function(a,c){a?(s.error("Error adding filter event listener to event "+e+"for Stream "+n.stream.streamId,a),r(401===a.code?new o.OpenViduError(o.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to add a filter event listener"):a)):(n.handlers[e]=t,s.info("Filter event listener to event "+e+" successfully applied on Stream "+n.stream.streamId),i())}))}))},e.prototype.removeEventListener=function(e){var t=this;return new Promise((function(n,i){s.info("Removing filter event listener to event "+e+" to stream "+t.stream.streamId),t.stream.session.openvidu.sendRequest("removeFilterEventListener",{streamId:t.stream.streamId,eventType:e},(function(r,a){r?(s.error("Error removing filter event listener to event "+e+"for Stream "+t.stream.streamId,r),i(401===r.code?new o.OpenViduError(o.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to add a filter event listener"):r)):(delete t.handlers[e],s.info("Filter event listener to event "+e+" successfully removed on Stream "+t.stream.streamId),n())}))}))},e}();t.Filter=r},"8KVD":function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0;var s=function(e){function t(t,n,i,o,s){var r=e.call(this,t,n,i)||this;return r.connection=o,r.reason=s,r}return o(t,e),t.prototype.callDefaultBehavior=function(){},t}(n("hzOQ").Event);t.ConnectionEvent=s},"9m68":function(e,t,n){"use strict";t.__esModule=!0;var i=function(){function e(){this.logger=window.console,this.LOG_FNS=[this.logger.log,this.logger.debug,this.logger.info,this.logger.warn,this.logger.error],this.isProdMode=!1}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.isProdMode||this.LOG_FNS[0].apply(this.logger,arguments)},e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.isProdMode||this.LOG_FNS[1].apply(this.logger,arguments)},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.isProdMode||this.LOG_FNS[2].apply(this.logger,arguments)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.isProdMode||this.LOG_FNS[3].apply(this.logger,arguments)},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.LOG_FNS[4].apply(this.logger,arguments)},e.prototype.enableProdMode=function(){this.isProdMode=!0},e}();t.OpenViduLogger=i},AeG9:function(e,t,n){var i=!1;if(Object.defineProperty)try{Object.defineProperty({},"x",{})}catch(h){i=!0}Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,i=function(){},o=function(){return n.apply(this instanceof i&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return i.prototype=this.prototype,o.prototype=new i,o});var o=n("txJ/").EventEmitter,s=n("HgqT"),r=n("0wxW"),a=n("gUCu");function c(e){if(e){if(e instanceof Function)return{send:e};if(e.send instanceof Function)return e;if(e.postMessage instanceof Function)return e.send=e.postMessage,e;if(e.write instanceof Function)return e.send=e.write,e;if(void 0===e.onmessage&&!(e.pause instanceof Function))throw new SyntaxError("Transport is not a function nor a valid object")}}function l(e,t){i?(this.method=e,this.params=t):(Object.defineProperty(this,"method",{value:e,enumerable:!0}),Object.defineProperty(this,"params",{value:t,enumerable:!0}))}function d(e,t,n,r){var d=this;if(!e)throw new SyntaxError("Packer is not defined");if(!e.pack||!e.unpack)throw new SyntaxError("Packer is invalid");var u=function(e){if(!e)return{};for(var t in e){var n=e[t];"string"==typeof n&&(e[t]={response:n})}return e}(e.responseMethods);if(t instanceof Function){if(null!=n)throw new SyntaxError("There can't be parameters after onRequest");r=t,n=void 0,t=void 0}if(t&&t.send instanceof Function){if(n&&!(n instanceof Function))throw new SyntaxError("Only a function can be after transport");r=n,n=t,t=void 0}if(n instanceof Function){if(null!=r)throw new SyntaxError("There can't be parameters after onRequest");r=n,n=void 0}if(n&&n.send instanceof Function&&r&&!(r instanceof Function))throw new SyntaxError("Only a function can be after transport");t=t||{},o.call(this),r&&this.on("request",r),i?this.peerID=t.peerID:Object.defineProperty(this,"peerID",{value:t.peerID});var g=t.max_retries||0;function p(e){d.decode(e.data||e)}this.getTransport=function(){return n},this.setTransport=function(e){n&&(n.removeEventListener?n.removeEventListener("message",p):n.removeListener&&n.removeListener("data",p)),e&&(e.addEventListener?e.addEventListener("message",p):e.addListener&&e.addListener("data",p)),n=c(e)},i||Object.defineProperty(this,"transport",{get:this.getTransport.bind(this),set:this.setTransport.bind(this)}),this.setTransport(n);var m=t.request_timeout||5e3,f=t.ping_request_timeout||m,b=t.response_timeout||5e3,v=t.duplicates_timeout||5e3,C=0,O=new a,S=new a,y=new a,M={};function x(e,t){var n=setTimeout((function(){y.remove(e,t)}),v);y.set(n,e,t)}function _(t,n,o,s,r){l.call(this,t,n),this.getTransport=function(){return r},this.setTransport=function(e){r=c(e)},i||Object.defineProperty(this,"transport",{get:this.getTransport.bind(this),set:this.setTransport.bind(this)});var a=S.get(o,s);r||d.getTransport()||(i?this.duplicated=Boolean(a):Object.defineProperty(this,"duplicated",{value:Boolean(a)}));var g=u[t];this.pack=e.pack.bind(e,this,o),this.reply=function(t,n,i){if(t instanceof Function||t&&t.send instanceof Function){if(null!=n)throw new SyntaxError("There can't be parameters after callback");i=t,n=null,t=void 0}else if(n instanceof Function||n&&n.send instanceof Function){if(null!=i)throw new SyntaxError("There can't be parameters after callback");i=n,n=null}var r;return i=c(i),a&&clearTimeout(a.timeout),null!=s&&(t&&(t.dest=s),n&&(n.dest=s)),t||null!=n?(null!=d.peerID&&(t?t.from=d.peerID:n.from=d.peerID),r=e.pack(r=g?null==g.error&&t?{error:t}:{method:t?g.error:g.response,params:t||n}:{error:t,result:n},o)):r=a?a.message:e.pack({result:null},o),function(e,t,n){var i={message:e,timeout:setTimeout((function(){S.remove(t,n)}),b)};S.set(i,t,n)}(r,o,s),(i=i||this.getTransport()||d.getTransport())?i.send(r):r}}function P(e){var t=M[e];if(t){delete M[e];var n=O.pop(t.id,t.dest);n&&(clearTimeout(n.timeout),x(t.id,t.dest))}}s(_,l),this.cancel=function(e){if(e)return P(e);for(var e in M)P(e)},this.close=function(){var e=this.getTransport();e&&e.close&&e.close(4003,"Cancel request"),this.cancel(),y.forEach(clearTimeout),S.forEach((function(e){clearTimeout(e.timeout)}))},this.encode=function(t,n,i,o,s){if(n instanceof Function){if(null!=i)throw new SyntaxError("There can't be parameters after callback");s=n,o=void 0,i=void 0,n=void 0}else if(i instanceof Function){if(null!=o)throw new SyntaxError("There can't be parameters after callback");s=i,o=void 0,i=void 0}else if(o instanceof Function){if(null!=s)throw new SyntaxError("There can't be parameters after callback");s=o,o=void 0}null!=d.peerID&&((n=n||{}).from=d.peerID),null!=i&&((n=n||{}).dest=i);var r={method:t,params:n};if(s){var a=C++,l=0;function h(e,t){d.cancel(r),s(e,t)}var p={message:r=e.pack(r,a),callback:h,responseMethods:u[t]||{}},b=c(o);function v(e){return p.timeout=setTimeout(x,("ping"===t?f:m)*Math.pow(2,l++)),M[r]={id:a,dest:i},O.set(p,a,i),(e=e||b||d.getTransport())?e.send(r):r}function S(e){e=c(e),console.warn(l+" retry for request message:",r);var t=y.pop(a,i);return clearTimeout(t),v(e)}function x(){if(l<g)return S(o);var e=new Error("Request has timed out");e.request=r,e.retry=S,h(e)}return v(o)}return r=e.pack(r),(o=o||this.getTransport())?o.send(r):r},this.decode=function(t,n){if(!t)throw new TypeError("Message is not defined");try{t=e.unpack(t)}catch(h){return console.debug(h,t)}var i=t.id,o=t.ack,s=t.method,r=t.params||{},a=r.from,u=r.dest;if(null==d.peerID||a!=d.peerID){if(null==i&&null==o){var g=new l(s,r);if(d.emit("request",g))return;return g}if(s){if(null==u||u==d.peerID){if(b=O.get(o,a)){var p=b.responseMethods;return s==p.error?M(b,r):s==p.response?M(b,null,r):C()}if(v=y.get(o,a))return P(v)}return C()}var m=t.error,f=t.result;if(!(m&&m.dest&&m.dest!=d.peerID||f&&f.dest&&f.dest!=d.peerID)){var b,v;if(!(b=O.get(o,a)))return(v=y.get(o,a))?P(v):console.warn("No callback was defined for this message",t);M(b,m,f)}}function C(){if(n=c(n)||d.getTransport()){var e=S.get(i,a);if(e)return n.send(e.message)}var t=new _(s,r,null!=i?i:o,a,n);if(!d.emit("request",t))return t}function M(e,t,n){e.callback(t,n)}function P(e){console.warn("Response already processed",t),clearTimeout(e),x(o,a)}}}s(d,o),d.RpcNotification=l,e.exports=d;var u=n("SYuc"),g=n("ee8k");(d.clients=u).transports=g,d.packers=r},BwMD:function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0;var s=function(e){function t(t,n,i,o,s,r){var a=e.call(this,!1,t,"streamPropertyChanged")||this;return a.stream=n,a.changedProperty=i,a.newValue=o,a.oldValue=s,a.reason=r,a}return o(t,e),t.prototype.callDefaultBehavior=function(){},t}(n("hzOQ").Event);t.StreamPropertyChangedEvent=s},DPKQ:function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0;var s=n("74bm"),r=n("bk74"),a=n("Dztv"),c=n("5kmN"),l=n("+FKC"),d=n("e8ps"),u=n("HxXY"),g=n("BwMD"),h=n("Tt94"),p=n("ttXH"),m=n("bDgZ"),f=n("9m68").OpenViduLogger.getInstance(),b=function(e){function t(t,n){var i=e.call(this)||this;return i.isSubscribeToRemote=!1,i.isLocalStreamReadyToPublish=!1,i.isLocalStreamPublished=!1,i.publishedOnce=!1,i.publisherStartSpeakingEventEnabled=!1,i.publisherStartSpeakingEventEnabledOnce=!1,i.publisherStopSpeakingEventEnabled=!1,i.publisherStopSpeakingEventEnabledOnce=!1,i.volumeChangeEventEnabled=!1,i.volumeChangeEventEnabledOnce=!1,i.session=t,n.hasOwnProperty("id")?(i.inboundStreamOpts=n,i.streamId=i.inboundStreamOpts.id,i.creationTime=i.inboundStreamOpts.createdAt,i.hasAudio=i.inboundStreamOpts.hasAudio,i.hasVideo=i.inboundStreamOpts.hasVideo,i.hasAudio&&(i.audioActive=i.inboundStreamOpts.audioActive),i.hasVideo&&(i.videoActive=i.inboundStreamOpts.videoActive,i.typeOfVideo=i.inboundStreamOpts.typeOfVideo?i.inboundStreamOpts.typeOfVideo:void 0,i.frameRate=-1===i.inboundStreamOpts.frameRate?void 0:i.inboundStreamOpts.frameRate,i.videoDimensions=i.inboundStreamOpts.videoDimensions),i.inboundStreamOpts.filter&&Object.keys(i.inboundStreamOpts.filter).length>0&&(i.inboundStreamOpts.filter.lastExecMethod&&0===Object.keys(i.inboundStreamOpts.filter.lastExecMethod).length&&delete i.inboundStreamOpts.filter.lastExecMethod,i.filter=i.inboundStreamOpts.filter)):(i.outboundStreamOpts=n,i.hasAudio=i.isSendAudio(),i.hasVideo=i.isSendVideo(),i.hasAudio&&(i.audioActive=!!i.outboundStreamOpts.publisherProperties.publishAudio),i.hasVideo&&(i.videoActive=!!i.outboundStreamOpts.publisherProperties.publishVideo,i.frameRate=i.outboundStreamOpts.publisherProperties.frameRate,i.typeOfVideo="undefined"!=typeof MediaStreamTrack&&i.outboundStreamOpts.publisherProperties.videoSource instanceof MediaStreamTrack?"CUSTOM":i.isSendScreen()?"SCREEN":"CAMERA"),i.outboundStreamOpts.publisherProperties.filter&&(i.filter=i.outboundStreamOpts.publisherProperties.filter)),i.ee.on("mediastream-updated",(function(){i.streamManager.updateMediaStream(i.mediaStream),f.debug("Video srcObject ["+i.mediaStream+"] updated in stream ["+i.streamId+"]")})),i}return o(t,e),t.prototype.on=function(t,n){return e.prototype.onAux.call(this,t,"Event '"+t+"' triggered by stream '"+this.streamId+"'",n),this},t.prototype.once=function(t,n){return e.prototype.onceAux.call(this,t,"Event '"+t+"' triggered once by stream '"+this.streamId+"'",n),this},t.prototype.off=function(t,n){return e.prototype.off.call(this,t,n),this},t.prototype.applyFilter=function(e,t){var n=this;return new Promise((function(i,o){f.info("Applying filter to stream "+n.streamId),"string"!=typeof(t=t||{})&&(t=JSON.stringify(t)),n.session.openvidu.sendRequest("applyFilter",{streamId:n.streamId,type:e,options:t},(function(r,a){if(r)f.error("Error applying filter for Stream "+n.streamId,r),o(401===r.code?new h.OpenViduError(h.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to apply a filter"):r);else{f.info("Filter successfully applied on Stream "+n.streamId);var c=n.filter;n.filter=new s.Filter(e,t),n.filter.stream=n,n.session.emitEvent("streamPropertyChanged",[new g.StreamPropertyChangedEvent(n.session,n,"filter",n.filter,c,"applyFilter")]),n.streamManager.emitEvent("streamPropertyChanged",[new g.StreamPropertyChangedEvent(n.streamManager,n,"filter",n.filter,c,"applyFilter")]),i(n.filter)}}))}))},t.prototype.removeFilter=function(){var e=this;return new Promise((function(t,n){f.info("Removing filter of stream "+e.streamId),e.session.openvidu.sendRequest("removeFilter",{streamId:e.streamId},(function(i,o){if(i)f.error("Error removing filter for Stream "+e.streamId,i),n(401===i.code?new h.OpenViduError(h.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to remove a filter"):i);else{f.info("Filter successfully removed from Stream "+e.streamId);var s=e.filter;delete e.filter,e.session.emitEvent("streamPropertyChanged",[new g.StreamPropertyChangedEvent(e.session,e,"filter",e.filter,s,"applyFilter")]),e.streamManager.emitEvent("streamPropertyChanged",[new g.StreamPropertyChangedEvent(e.streamManager,e,"filter",e.filter,s,"applyFilter")]),t()}}))}))},t.prototype.getRTCPeerConnection=function(){return this.webRtcPeer.pc},t.prototype.getMediaStream=function(){return this.mediaStream},t.prototype.setMediaStream=function(e){this.mediaStream=e},t.prototype.updateMediaStreamInVideos=function(){this.ee.emitEvent("mediastream-updated",[])},t.prototype.getWebRtcPeer=function(){return this.webRtcPeer},t.prototype.subscribeToMyRemote=function(e){this.isSubscribeToRemote=e},t.prototype.setOutboundStreamOptions=function(e){this.outboundStreamOpts=e},t.prototype.subscribe=function(){var e=this;return new Promise((function(t,n){e.initWebRtcPeerReceive(!1).then((function(){t()})).catch((function(e){n(e)}))}))},t.prototype.publish=function(){var e=this;return new Promise((function(t,n){e.isLocalStreamReadyToPublish?e.initWebRtcPeerSend(!1).then((function(){t()})).catch((function(e){n(e)})):e.ee.once("stream-ready-to-publish",(function(){e.publish().then((function(){t()})).catch((function(e){n(e)}))}))}))},t.prototype.disposeWebRtcPeer=function(){this.webRtcPeer&&(this.webRtcPeer.dispose(),this.stopWebRtcStats()),f.info((this.outboundStreamOpts?"Outbound ":"Inbound ")+"WebRTCPeer from 'Stream' with id ["+this.streamId+"] is now closed")},t.prototype.disposeMediaStream=function(){this.mediaStream&&(this.mediaStream.getAudioTracks().forEach((function(e){e.stop()})),this.mediaStream.getVideoTracks().forEach((function(e){e.stop()})),delete this.mediaStream),this.localMediaStreamWhenSubscribedToRemote&&(this.localMediaStreamWhenSubscribedToRemote.getAudioTracks().forEach((function(e){e.stop()})),this.localMediaStreamWhenSubscribedToRemote.getVideoTracks().forEach((function(e){e.stop()})),delete this.localMediaStreamWhenSubscribedToRemote),this.speechEvent&&(this.speechEvent.stop&&this.speechEvent.stop(),delete this.speechEvent),f.info((this.outboundStreamOpts?"Local ":"Remote ")+"MediaStream from 'Stream' with id ["+this.streamId+"] is now disposed")},t.prototype.displayMyRemote=function(){return this.isSubscribeToRemote},t.prototype.isSendAudio=function(){return!!this.outboundStreamOpts&&null!==this.outboundStreamOpts.publisherProperties.audioSource&&!1!==this.outboundStreamOpts.publisherProperties.audioSource},t.prototype.isSendVideo=function(){return!!this.outboundStreamOpts&&null!==this.outboundStreamOpts.publisherProperties.videoSource&&!1!==this.outboundStreamOpts.publisherProperties.videoSource},t.prototype.isSendScreen=function(){var e="screen"===this.outboundStreamOpts.publisherProperties.videoSource;return"Electron"===m.name&&(e="string"==typeof this.outboundStreamOpts.publisherProperties.videoSource&&this.outboundStreamOpts.publisherProperties.videoSource.startsWith("screen:")),!!this.outboundStreamOpts&&e},t.prototype.enableStartSpeakingEvent=function(){var e=this;this.setSpeechEventIfNotExists(),this.publisherStartSpeakingEventEnabled||(this.publisherStartSpeakingEventEnabled=!0,this.speechEvent.on("speaking",(function(){e.session.emitEvent("publisherStartSpeaking",[new d.PublisherSpeakingEvent(e.session,"publisherStartSpeaking",e.connection,e.streamId)]),e.publisherStartSpeakingEventEnabledOnce=!1})))},t.prototype.enableOnceStartSpeakingEvent=function(){var e=this;this.setSpeechEventIfNotExists(),this.publisherStartSpeakingEventEnabledOnce||(this.publisherStartSpeakingEventEnabledOnce=!0,this.speechEvent.once("speaking",(function(){e.publisherStartSpeakingEventEnabledOnce&&e.session.emitEvent("publisherStartSpeaking",[new d.PublisherSpeakingEvent(e.session,"publisherStartSpeaking",e.connection,e.streamId)]),e.disableStartSpeakingEvent(!0)})))},t.prototype.disableStartSpeakingEvent=function(e){if(this.speechEvent){if(this.publisherStartSpeakingEventEnabledOnce=!1,e){if(this.publisherStartSpeakingEventEnabled)return}else this.publisherStartSpeakingEventEnabled=!1;this.volumeChangeEventEnabled||this.volumeChangeEventEnabledOnce||this.publisherStopSpeakingEventEnabled||this.publisherStopSpeakingEventEnabledOnce?this.speechEvent.off("speaking"):(this.speechEvent.stop(),delete this.speechEvent)}},t.prototype.enableStopSpeakingEvent=function(){var e=this;this.setSpeechEventIfNotExists(),this.publisherStopSpeakingEventEnabled||(this.publisherStopSpeakingEventEnabled=!0,this.speechEvent.on("stopped_speaking",(function(){e.session.emitEvent("publisherStopSpeaking",[new d.PublisherSpeakingEvent(e.session,"publisherStopSpeaking",e.connection,e.streamId)]),e.publisherStopSpeakingEventEnabledOnce=!1})))},t.prototype.enableOnceStopSpeakingEvent=function(){var e=this;this.setSpeechEventIfNotExists(),this.publisherStopSpeakingEventEnabledOnce||(this.publisherStopSpeakingEventEnabledOnce=!0,this.speechEvent.once("stopped_speaking",(function(){e.publisherStopSpeakingEventEnabledOnce&&e.session.emitEvent("publisherStopSpeaking",[new d.PublisherSpeakingEvent(e.session,"publisherStopSpeaking",e.connection,e.streamId)]),e.disableStopSpeakingEvent(!0)})))},t.prototype.disableStopSpeakingEvent=function(e){if(this.speechEvent){if(this.publisherStopSpeakingEventEnabledOnce=!1,e){if(this.publisherStopSpeakingEventEnabled)return}else this.publisherStopSpeakingEventEnabled=!1;this.volumeChangeEventEnabled||this.volumeChangeEventEnabledOnce||this.publisherStartSpeakingEventEnabled||this.publisherStartSpeakingEventEnabledOnce?this.speechEvent.off("stopped_speaking"):(this.speechEvent.stop(),delete this.speechEvent)}},t.prototype.enableVolumeChangeEvent=function(e){var t=this;this.setSpeechEventIfNotExists()?this.volumeChangeEventEnabled&&!e||(this.volumeChangeEventEnabled=!0,this.speechEvent.on("volume_change",(function(e){var n={newValue:e,oldValue:t.speechEvent.oldVolumeValue};t.speechEvent.oldVolumeValue=e,t.streamManager.emitEvent("streamAudioVolumeChange",[new u.StreamManagerEvent(t.streamManager,"streamAudioVolumeChange",n)])}))):this.volumeChangeEventEnabled=!0},t.prototype.enableOnceVolumeChangeEvent=function(e){var t=this;this.setSpeechEventIfNotExists()?this.volumeChangeEventEnabledOnce&&!e||(this.volumeChangeEventEnabledOnce=!0,this.speechEvent.once("volume_change",(function(e){var n={newValue:e,oldValue:t.speechEvent.oldVolumeValue};t.speechEvent.oldVolumeValue=e,t.disableVolumeChangeEvent(!0),t.streamManager.emitEvent("streamAudioVolumeChange",[new u.StreamManagerEvent(t.streamManager,"streamAudioVolumeChange",n)])}))):this.volumeChangeEventEnabledOnce=!0},t.prototype.disableVolumeChangeEvent=function(e){if(this.speechEvent){if(this.volumeChangeEventEnabledOnce=!1,e){if(this.volumeChangeEventEnabled)return}else this.volumeChangeEventEnabled=!1;this.publisherStartSpeakingEventEnabled||this.publisherStartSpeakingEventEnabledOnce||this.publisherStopSpeakingEventEnabled||this.publisherStopSpeakingEventEnabledOnce?this.speechEvent.off("volume_change"):(this.speechEvent.stop(),delete this.speechEvent)}},t.prototype.isLocal=function(){return!this.inboundStreamOpts&&!!this.outboundStreamOpts},t.prototype.getSelectedIceCandidate=function(){var e=this;return new Promise((function(t,n){e.webRtcStats.getSelectedIceCandidateInfo().then((function(e){return t(e)})).catch((function(e){return n(e)}))}))},t.prototype.getRemoteIceCandidateList=function(){return this.webRtcPeer.remoteCandidatesQueue},t.prototype.getLocalIceCandidateList=function(){return this.webRtcPeer.localCandidatesQueue},t.prototype.streamIceConnectionStateBroken=function(){if(!this.getWebRtcPeer()||!this.getRTCPeerConnection())return!1;if(this.isLocal&&this.session.openvidu.advancedConfiguration.forceMediaReconnectionAfterNetworkDrop)return f.warn('OpenVidu Browser advanced configuration option "forceMediaReconnectionAfterNetworkDrop" is enabled. Publisher stream '+this.streamId+"will force a reconnection"),!0;var e=this.getRTCPeerConnection().iceConnectionState;return"disconnected"===e||"failed"===e},t.prototype.setSpeechEventIfNotExists=function(){if(this.mediaStream){if(!this.speechEvent){var e=this.harkOptions?this.harkOptions:this.session.openvidu.advancedConfiguration.publisherSpeakingEventsOptions||{};e.interval="number"==typeof e.interval?e.interval:100,e.threshold="number"==typeof e.threshold?e.threshold:-50,this.speechEvent=p(this.mediaStream,e)}return!0}return!1},t.prototype.initWebRtcPeerSend=function(e){var t=this;return new Promise((function(n,i){e||t.initHarkEvents();var o={audio:t.isSendAudio(),video:t.isSendVideo()},s={mediaStream:t.mediaStream,mediaConstraints:o,onicecandidate:t.connection.sendIceCandidate.bind(t.connection),iceServers:t.getIceServersConf(),simulcast:!1};e&&t.disposeWebRtcPeer(),t.webRtcPeer=t.displayMyRemote()?new c.WebRtcPeerSendrecv(s):new c.WebRtcPeerSendonly(s),t.webRtcPeer.addIceConnectionStateChangeListener("publisher of "+t.connection.connectionId),t.webRtcPeer.generateOffer().then((function(o){!function(o){f.debug("Sending SDP offer to publish as "+t.streamId,o);var s,r=e?"reconnectStream":"publishVideo";if(e)s={stream:t.streamId};else{var a="";t.isSendVideo()&&(a="undefined"!=typeof MediaStreamTrack&&t.outboundStreamOpts.publisherProperties.videoSource instanceof MediaStreamTrack?"CUSTOM":t.isSendScreen()?"SCREEN":"CAMERA"),s={doLoopback:t.displayMyRemote()||!1,hasAudio:t.isSendAudio(),hasVideo:t.isSendVideo(),audioActive:t.audioActive,videoActive:t.videoActive,typeOfVideo:a,frameRate:t.frameRate?t.frameRate:-1,videoDimensions:JSON.stringify(t.videoDimensions),filter:t.outboundStreamOpts.publisherProperties.filter}}s.sdpOffer=o,t.session.openvidu.sendRequest(r,s,(function(o,s){o?i(401===o.code?new h.OpenViduError(h.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to publish"):"Error on publishVideo: "+JSON.stringify(o)):t.webRtcPeer.processAnswer(s.sdpAnswer,!1).then((function(){t.streamId=s.id,t.creationTime=s.createdAt,t.isLocalStreamPublished=!0,t.publishedOnce=!0,t.displayMyRemote()&&(t.localMediaStreamWhenSubscribedToRemote=t.mediaStream,t.remotePeerSuccessfullyEstablished()),t.ee.emitEvent(e?"stream-reconnected-by-publisher":"stream-created-by-publisher",[]),t.initWebRtcStats(),f.info("'Publisher' ("+t.streamId+") successfully "+(e?"reconnected":"published")+" to session"),n()})).catch((function(e){i(e)}))}))}(o)})).catch((function(e){i(new Error("(publish) SDP offer error: "+JSON.stringify(e)))}))}))},t.prototype.initWebRtcPeerReceive=function(e){var t=this;return new Promise((function(n,i){var o={audio:t.inboundStreamOpts.hasAudio,video:t.inboundStreamOpts.hasVideo};f.debug("'Session.subscribe(Stream)' called. Constraints of generate SDP offer",o);var s={onicecandidate:t.connection.sendIceCandidate.bind(t.connection),mediaConstraints:o,iceServers:t.getIceServersConf(),simulcast:!1};t.webRtcPeer=new c.WebRtcPeerRecvonly(s),t.webRtcPeer.addIceConnectionStateChangeListener(t.streamId),t.webRtcPeer.generateOffer().then((function(o){!function(o){f.debug("Sending SDP offer to subscribe to "+t.streamId,o);var s=e?"reconnectStream":"receiveVideoFrom",r={sdpOffer:o};r[e?"stream":"sender"]=t.streamId,t.session.openvidu.sendRequest(s,r,(function(o,s){o?i(new Error("Error on recvVideoFrom: "+JSON.stringify(o))):(t.session.isFirstIonicIosSubscriber&&(t.session.isFirstIonicIosSubscriber=!1,setTimeout((function(){t.session.countDownForIonicIosSubscribersActive=!1}),400)),t.webRtcPeer.processAnswer(s.sdpAnswer,t.session.countDownForIonicIosSubscribersActive).then((function(){f.info("'Subscriber' ("+t.streamId+") successfully "+(e?"reconnected":"subscribed")),t.remotePeerSuccessfullyEstablished(),t.initWebRtcStats(),n()})).catch((function(e){i(e)})))}))}(o)})).catch((function(e){i(new Error("(subscribe) SDP offer error: "+JSON.stringify(e)))}))}))},t.prototype.remotePeerSuccessfullyEstablished=function(){var e;this.mediaStream=new MediaStream;for(var t=0,n=this.webRtcPeer.pc.getReceivers();t<n.length;t++)(e=n[t]).track&&this.mediaStream.addTrack(e.track);if(f.debug("Peer remote stream",this.mediaStream),this.mediaStream){if(this.streamManager instanceof r.Subscriber){if(this.mediaStream.getAudioTracks()[0]){var i=!!this.streamManager.properties.subscribeToAudio;this.mediaStream.getAudioTracks()[0].enabled=i}this.mediaStream.getVideoTracks()[0]&&(i=!!this.streamManager.properties.subscribeToVideo,this.mediaStream.getVideoTracks()[0].enabled=i)}this.updateMediaStreamInVideos(),this.initHarkEvents()}},t.prototype.initHarkEvents=function(){this.mediaStream.getAudioTracks()[0]&&(this.streamManager.remote&&(this.session.startSpeakingEventsEnabled&&this.enableStartSpeakingEvent(),this.session.startSpeakingEventsEnabledOnce&&this.enableOnceStartSpeakingEvent(),this.session.stopSpeakingEventsEnabled&&this.enableStopSpeakingEvent(),this.session.stopSpeakingEventsEnabledOnce&&this.enableOnceStopSpeakingEvent()),this.volumeChangeEventEnabled&&this.enableVolumeChangeEvent(!0),this.volumeChangeEventEnabledOnce&&this.enableOnceVolumeChangeEvent(!0))},t.prototype.initWebRtcStats=function(){this.webRtcStats=new l.WebRtcStats(this),this.webRtcStats.initWebRtcStats()},t.prototype.stopWebRtcStats=function(){this.webRtcStats&&this.webRtcStats.isEnabled()&&this.webRtcStats.stopWebRtcStats()},t.prototype.getIceServersConf=function(){return this.session.openvidu.advancedConfiguration.iceServers?"freeice"===this.session.openvidu.advancedConfiguration.iceServers?void 0:this.session.openvidu.advancedConfiguration.iceServers:this.session.openvidu.iceServers?this.session.openvidu.iceServers:void 0},t.prototype.gatherStatsForPeer=function(){var e=this;return new Promise((function(t,n){e.isLocal()?e.getRTCPeerConnection().getSenders().forEach((function(t){return t.getStats().then((function(t){t.forEach((function(t){if(e.isReportWanted(t)){var n={};n.type=t.type,n.timestamp=t.timestamp,n.id=t.id,"outbound-rtp"===t.type&&(n.ssrc=t.ssrc,n.firCount=t.firCount,n.pliCount=t.pliCount,n.nackCount=t.nackCount,n.qpSum=t.qpSum,n.mediaType=t.kind?t.kind:t.mediaType?t.mediaType:-1!==t.id.indexOf("VideoStream")?"video":"audio","video"===n.mediaType&&(n.framesEncoded=t.framesEncoded),n.packetsSent=t.packetsSent,n.bytesSent=t.bytesSent),"candidate-pair"===t.type&&void 0!==t.totalRoundTripTime&&(n.availableOutgoingBitrate=t.availableOutgoingBitrate,n.rtt=t.currentRoundTripTime,n.averageRtt=t.totalRoundTripTime/t.responsesReceived),f.log(n)}}))}))})):e.getRTCPeerConnection().getReceivers().forEach((function(t){return t.getStats().then((function(t){t.forEach((function(t){if(e.isReportWanted(t)){var n={};n.type=t.type,n.timestamp=t.timestamp,n.id=t.id,"inbound-rtp"===t.type&&(n.ssrc=t.ssrc,n.firCount=t.firCount,n.pliCount=t.pliCount,n.nackCount=t.nackCount,n.qpSum=t.qpSum,n.mediaType=t.kind?t.kind:t.mediaType?t.mediaType:-1!==t.id.indexOf("VideoStream")?"video":"audio","video"===n.mediaType&&(n.framesDecoded=t.framesDecoded),n.packetsReceived=t.packetsReceived,n.packetsLost=t.packetsLost,n.jitter=t.jitter,n.bytesReceived=t.bytesReceived),"candidate-pair"===t.type&&void 0!==t.totalRoundTripTime&&(n.availableIncomingBitrate=t.availableIncomingBitrate,n.rtt=t.currentRoundTripTime,n.averageRtt=t.totalRoundTripTime/t.responsesReceived),f.log(n)}}))}))}))}))},t.prototype.isReportWanted=function(e){return"inbound-rtp"===e.type&&!this.isLocal()||"outbound-rtp"===e.type&&this.isLocal()||"candidate-pair"===e.type&&e.nominated&&e.bytesSent>0},t}(a.EventDispatcher);t.Stream=b},Dztv:function(e,t,n){"use strict";t.__esModule=!0;var i=n("6+/i"),o=n("9m68").OpenViduLogger.getInstance(),s=function(){function e(){this.userHandlerArrowHandler=new WeakMap,this.ee=new i}return e.prototype.off=function(e,t){if(t){var n=this.userHandlerArrowHandler.get(t);n&&this.ee.off(e,n),this.userHandlerArrowHandler.delete(t)}else this.ee.removeAllListeners(e);return this},e.prototype.onAux=function(e,t,n){var i=function(e){e?o.info(t,e):o.info(t),n(e)};return this.userHandlerArrowHandler.set(n,i),this.ee.on(e,i),this},e.prototype.onceAux=function(e,t,n){var i=this,s=function(e){e?o.info(t,e):o.info(t),n(e),i.userHandlerArrowHandler.delete(n)};return this.userHandlerArrowHandler.set(n,s),this.ee.once(e,s),this},e}();t.EventDispatcher=s},EDod:function(e,t,n){var i=n("AeG9"),o=n("cUzU");Date.now=Date.now||function(){return+new Date};var s=console;e.exports=function(e){var t,n=this,r=e.ws,a=-1,c=0,l=!0,d=!1,u="DISCONNECTED",g=r.onreconnecting,h=r.onreconnected,p=r.onconnected,m=r.onerror;e.rpc.pull=function(e,t){t.reply(null,"push")},r.onreconnecting=function(){s.debug("--------- ONRECONNECTING -----------"),"RECONNECTING"!==u?(S(),u="RECONNECTING",g&&g()):s.error("Websocket already in RECONNECTING state when receiving a new ONRECONNECTING message. Ignoring it")},r.onreconnected=function(){s.debug("--------- ONRECONNECTED -----------"),"CONNECTED"!==u?(u="CONNECTED",v(),h&&h()):s.error("Websocket already in CONNECTED state when receiving a new ONRECONNECTED message. Ignoring it")},r.onconnected=function(){s.debug("--------- ONCONNECTED -----------"),"CONNECTED"!==u?(u="CONNECTED",l=!0,O(),p&&p()):s.error("Websocket already in CONNECTED state when receiving a new ONCONNECTED message. Ignoring it")},r.onerror=function(e){s.debug("--------- ONERROR -----------"),u="DISCONNECTED",S(),m&&m(e)};var f=new o(r);s.debug("Connecting websocket to URI: "+r.uri);var b=new i(i.packers.JsonRPC,{request_timeout:e.rpc.requestTimeout,ping_request_timeout:e.rpc.heartbeatRequestTimeout},f,(function(t){s.debug("Received request: "+JSON.stringify(t));try{var n=e.rpc[t.method];void 0===n?s.error("Method "+t.method+" not registered in client"):n(t.params,t)}catch(i){s.error("Exception processing request: "+JSON.stringify(t)),s.error(i)}}));function v(){s.debug("notReconnectIfNumLessThan = "+c+" (old="+a+")"),a=c}function C(){if(l){var t=null;0!=c&&c!=a||(t={interval:e.heartbeat||5e3}),c++,n.send("ping",t,(i=c,function(e,t){e&&(s.debug("Error in ping request #"+i+" ("+e.message+")"),i>a&&(l=!1,v(),s.debug("Server did not respond to ping message #"+i+". Reconnecting... "),f.reconnectWs()))}))}else s.debug("Trying to send ping, but ping is not enabled");var i}function O(){d||(s.debug("Starting ping (if configured)"),d=!0,null!=e.heartbeat&&(t=setInterval(C,e.heartbeat),C()))}function S(){clearInterval(t),d=!1,l=!1,c=-1,b.cancel()}this.send=function(e,t,n){"ping"!==e&&s.debug("Request: method:"+e+" params:"+JSON.stringify(t));var i=Date.now();b.encode(e,t,(function(o,r){if(o){try{s.error("ERROR:"+o.message+" in Request: method:"+e+" params:"+JSON.stringify(t)+" request:"+o.request),o.data&&s.error("ERROR DATA:"+JSON.stringify(o.data))}catch(a){}o.requestTime=i}n&&(null!=r&&"pong"!==r.value&&s.debug("Response: "+JSON.stringify(r)),n(o,r))}))},this.close=function(n,i){s.debug("Closing  with code: "+n+" because: "+i),null!=t&&(s.debug("Clearing ping interval"),clearInterval(t)),d=!1,l=!1,e.sendCloseMessage?(s.debug("Sending close message"),this.send("closeSession",null,(function(e,t){e&&s.error("Error sending close message: "+JSON.stringify(e)),f.close(n,i)}))):f.close(n,i)},this.forceClose=function(e){f.forceClose(e)},this.reconnect=function(){f.reconnectWs()},this.resetPing=function(){l=!0,c=0,O()}}},EcWD:function(e,t){var n,i,o="screen";if("undefined"!=typeof window&&"undefined"!=typeof navigator&&void 0!==navigator.userAgent){var s=void 0!==window.InstallTrigger;window.opera||navigator.userAgent.indexOf(" OPR/"),window,window.addEventListener("message",(function(e){e.origin==window.location.origin&&function(e){if("PermissionDeniedError"==e){if(i)return i("PermissionDeniedError");throw new Error("PermissionDeniedError")}"rtcmulticonnection-extension-loaded"==e&&(o="desktop"),e.sourceId&&i&&i(n=e.sourceId,!0===e.canRequestAudioTrack)}(e.data)}))}function r(e){if(!e)throw'"callback" parameter is mandatory.';if(n)return e(n);i=e,window.postMessage("get-sourceId","*")}function a(e,t){if(n="",s)return e(null,{mozMediaSource:"window",mediaSource:"window"});var a={mandatory:{chromeMediaSource:o,maxWidth:screen.width>1920?screen.width:1920,maxHeight:screen.height>1080?screen.height:1080},optional:[]};"desktop"!=o||n?("desktop"==o&&(a.mandatory.chromeMediaSourceId=n),e(null,a)):t?function(e){if(!e)throw'"callback" parameter is mandatory.';if(n)return e(n);i=e,window.postMessage("audio-plus-tab","*")}((function(t,n){a.mandatory.chromeMediaSourceId=t,n&&(a.canRequestAudioTrack=!0),e("PermissionDeniedError"==t?t:null,a)})):r((function(t){a.mandatory.chromeMediaSourceId=t,e("PermissionDeniedError"==t?t:null,a)}))}t.getScreenConstraints=a,t.getScreenConstraintsWithAudio=function(e){a(e,!0)},t.isChromeExtensionAvailable=function(e){if(e){if("desktop"==o)return e(!0);window.postMessage("are-you-there","*"),setTimeout((function(){e("screen"!=o)}),2e3)}},t.getChromeExtensionStatus=function(e,t){if(s)return t("not-chrome");2!=arguments.length&&(t=e,e="lfcgfepafnobdloecchnfaclibenjold");var n=document.createElement("img");n.src="chrome-extension://"+e+"/icon.png",n.onload=function(){o="screen",window.postMessage("are-you-there","*"),setTimeout((function(){t("screen"==o?"installed-disabled":"installed-enabled")}),2e3)},n.onerror=function(){t("not-installed")}},t.getSourceId=r},FlKs:function(e,t,n){"use strict";t.__esModule=!0,t.stateify=t.TokenState=t.CharacterState=void 0;var i=n("JUw6"),o=function(e){this.j=[],this.T=e||null};o.prototype={defaultTransition:!1,on:function(e,t){if(e instanceof Array){for(var n=0;n<e.length;n++)this.j.push([e[n],t]);return this}return this.j.push([e,t]),this},next:function(e){for(var t=0;t<this.j.length;t++){var n=this.j[t],i=n[1];if(this.test(e,n[0]))return i}return this.defaultTransition},accepts:function(){return!!this.T},test:function(e,t){return e===t},emit:function(){return this.T}};var s=(0,i.inherits)(o,(function(e){this.j=[],this.T=e||null}),{test:function(e,t){return e===t||t instanceof RegExp&&t.test(e)}}),r=(0,i.inherits)(o,(function(e){this.j=[],this.T=e||null}),{jump:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.next(new e(""));return n===this.defaultTransition?(n=new this.constructor(t),this.on(e,n)):t&&(n.T=t),n},test:function(e,t){return e instanceof t}});t.CharacterState=s,t.TokenState=r,t.stateify=function(e,t,n,i){for(var o=0,r=e.length,a=t,c=[],l=void 0;o<r&&(l=a.next(e[o]));)a=l,o++;if(o>=r)return[];for(;o<r-1;)l=new s(i),c.push(l),a.on(e[o],l),a=l,o++;return l=new s(n),c.push(l),a.on(e[r-1],l),c}},HgqT:function(e,t){e.exports="function"==typeof Object.create?function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},HxXY:function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0;var s=function(e){function t(t,n,i){var o=e.call(this,!1,t,n)||this;return o.value=i,o}return o(t,e),t.prototype.callDefaultBehavior=function(){},t}(n("hzOQ").Event);t.StreamManagerEvent=s},IXxz:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){var t=e.scanner.TOKENS,n=e.parser,i=n.State,o=e.parser.start,s=t.DOMAIN,r=t.LOCALHOST,a=t.NUM,c=t.SLASH,l=t.TLD,d=t.UNDERSCORE,u=t.DOT,g=t.AT;function h(e){this.v=e}e.inherits(n.TOKENS.Base,h,{type:"mention",isLink:!0,toHref:function(){return"/"+this.toString().substr(1)}});var p=o.jump(t.AT),m=new i,f=new i(h),b=new i,v=new i;p.on(d,m),m.on(d,m).on(u,m),p.on(s,f).on(r,f).on(l,f).on(a,f),m.on(s,f).on(r,f).on(l,f).on(a,f),f.on(s,f).on(r,f).on(l,f).on(a,f).on(d,f),f.on(c,b).on(u,b).on(g,b),b.on(d,v),v.on(d,v),b.on(s,f).on(r,f).on(l,f).on(a,f),v.on(s,f).on(r,f).on(l,f).on(a,f)}},JTMn:function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0;var s=n("ryRr"),r=n("74bm"),a=n("bk74"),c=n("Dztv"),l=n("8KVD"),d=n("+ig+"),u=n("rUL0"),g=n("ksJj"),h=n("suHS"),p=n("Te8r"),m=n("BwMD"),f=n("Tt94"),b=n("/dLB"),v=n("bDgZ"),C=n("9m68").OpenViduLogger.getInstance(),O=function(e){function t(t){var n=e.call(this)||this;return n.streamManagers=[],n.remoteStreamsCreated={},n.isFirstIonicIosSubscriber=!0,n.countDownForIonicIosSubscribersActive=!0,n.remoteConnections={},n.startSpeakingEventsEnabled=!1,n.startSpeakingEventsEnabledOnce=!1,n.stopSpeakingEventsEnabled=!1,n.stopSpeakingEventsEnabledOnce=!1,n.openvidu=t,n}return o(t,e),t.prototype.connect=function(e,t){var n=this;return new Promise((function(i,o){n.processToken(e),n.openvidu.checkSystemRequirements()?(n.options={sessionId:n.sessionId,participantId:e,metadata:t?n.stringClientMetadata(t):""},n.connectAux(e).then((function(){i()})).catch((function(e){o(e)}))):o(new f.OpenViduError(f.OpenViduErrorName.BROWSER_NOT_SUPPORTED,"Browser "+v.name+" (version "+v.version+") for "+v.os.family+" is not supported in OpenVidu"))}))},t.prototype.disconnect=function(){this.leave(!1,"disconnect")},t.prototype.subscribe=function(e,t,n,i){var o,s={};s=n&&"function"!=typeof n?{insertMode:void 0!==n.insertMode?"string"==typeof n.insertMode?b.VideoInsertMode[n.insertMode]:s.insertMode:b.VideoInsertMode.APPEND,subscribeToAudio:void 0===n.subscribeToAudio||n.subscribeToAudio,subscribeToVideo:void 0===n.subscribeToVideo||n.subscribeToVideo}:{insertMode:b.VideoInsertMode.APPEND,subscribeToAudio:!0,subscribeToVideo:!0},n&&"function"==typeof n?o=n:i&&(o=i),C.info("Subscribing to "+e.connection.connectionId),e.subscribe().then((function(){C.info("Subscribed correctly to "+e.connection.connectionId),void 0!==o&&o(void 0)})).catch((function(e){void 0!==o&&o(e)}));var r=new a.Subscriber(e,t,s);return r.targetElement&&e.streamManager.createVideoElement(r.targetElement,s.insertMode),r},t.prototype.subscribeAsync=function(e,t,n){var i=this;return new Promise((function(o,s){var r,a=function(e){e?s(e):o(r)};r=n?i.subscribe(e,t,n,a):i.subscribe(e,t,a)}))},t.prototype.unsubscribe=function(e){var t=e.stream.connection.connectionId;C.info("Unsubscribing from "+t),this.openvidu.sendRequest("unsubscribeFromVideo",{sender:e.stream.connection.connectionId},(function(n,i){n?C.error("Error unsubscribing from "+t,n):C.info("Unsubscribed correctly from "+t),e.stream.disposeWebRtcPeer(),e.stream.disposeMediaStream()})),e.stream.streamManager.removeAllVideos()},t.prototype.publish=function(e){var t=this;return new Promise((function(n,i){e.session=t,e.stream.session=t,e.stream.publishedOnce?e.initialize().then((function(){t.connection.addStream(e.stream),e.reestablishStreamPlayingEvent(),e.stream.publish().then((function(){n()})).catch((function(e){i(e)}))})).catch((function(e){i(e)})):(t.connection.addStream(e.stream),e.stream.publish().then((function(){n()})).catch((function(e){i(e)})))}))},t.prototype.unpublish=function(e){var t=e.stream;if(t.connection)if(t.connection===this.connection){C.info("Unpublishing local media ("+t.connection.connectionId+")"),this.openvidu.sendRequest("unpublishVideo",(function(e,t){e?C.error(e):C.info("Media unpublished correctly")})),t.disposeWebRtcPeer(),delete t.connection.stream;var n=new p.StreamEvent(!0,e,"streamDestroyed",e.stream,"unpublish");e.emitEvent("streamDestroyed",[n]),n.callDefaultBehavior()}else C.error("The associated Connection object of this Publisher is not your local Connection.Only moderators can force unpublish on remote Streams via 'forceUnpublish' method",t);else C.error("The associated Connection object of this Publisher is null",t)},t.prototype.forceDisconnect=function(e){var t=this;return new Promise((function(n,i){C.info("Forcing disconnect for connection "+e.connectionId),t.openvidu.sendRequest("forceDisconnect",{connectionId:e.connectionId},(function(t,o){t?(C.error("Error forcing disconnect for Connection "+e.connectionId,t),i(401===t.code?new f.OpenViduError(f.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to force a disconnection"):t)):(C.info("Forcing disconnect correctly for Connection "+e.connectionId),n())}))}))},t.prototype.forceUnpublish=function(e){var t=this;return new Promise((function(n,i){C.info("Forcing unpublish for stream "+e.streamId),t.openvidu.sendRequest("forceUnpublish",{streamId:e.streamId},(function(t,o){t?(C.error("Error forcing unpublish for Stream "+e.streamId,t),i(401===t.code?new f.OpenViduError(f.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to force an unpublishing"):t)):(C.info("Forcing unpublish correctly for Stream "+e.streamId),n())}))}))},t.prototype.signal=function(e){var t=this;return new Promise((function(n,i){var o={};if(e.to&&e.to.length>0){var s=[];e.to.forEach((function(e){e.connectionId&&s.push(e.connectionId)})),o.to=s}else o.to=[];o.data=e.data?e.data:"";var r=e.type?e.type:"signal";r&&"signal:"!==r.substring(0,7)&&(r="signal:"+r),o.type=r,t.openvidu.sendRequest("sendMessage",{message:JSON.stringify(o)},(function(e,t){e?i(e):n()}))}))},t.prototype.on=function(t,n){if(e.prototype.onAux.call(this,t,"Event '"+t+"' triggered by 'Session'",n),"publisherStartSpeaking"===t)for(var i in this.startSpeakingEventsEnabled=!0,this.remoteConnections)(o=this.remoteConnections[i].stream)&&o.hasAudio&&o.enableStartSpeakingEvent();if("publisherStopSpeaking"===t)for(var i in this.stopSpeakingEventsEnabled=!0,this.remoteConnections){var o;(o=this.remoteConnections[i].stream)&&o.hasAudio&&o.enableStopSpeakingEvent()}return this},t.prototype.once=function(t,n){if(e.prototype.onceAux.call(this,t,"Event '"+t+"' triggered once by 'Session'",n),"publisherStartSpeaking"===t)for(var i in this.startSpeakingEventsEnabledOnce=!0,this.remoteConnections)(o=this.remoteConnections[i].stream)&&o.hasAudio&&o.enableOnceStartSpeakingEvent();if("publisherStopSpeaking"===t)for(var i in this.stopSpeakingEventsEnabledOnce=!0,this.remoteConnections){var o;(o=this.remoteConnections[i].stream)&&o.hasAudio&&o.enableOnceStopSpeakingEvent()}return this},t.prototype.off=function(t,n){if(e.prototype.off.call(this,t,n),"publisherStartSpeaking"===t&&0===this.ee.getListeners(t).length)for(var i in this.startSpeakingEventsEnabled=!1,this.remoteConnections)(o=this.remoteConnections[i].stream)&&o.disableStartSpeakingEvent(!1);if("publisherStopSpeaking"===t&&0===this.ee.getListeners(t).length)for(var i in this.stopSpeakingEventsEnabled=!1,this.remoteConnections){var o;(o=this.remoteConnections[i].stream)&&o.disableStopSpeakingEvent(!1)}return this},t.prototype.onParticipantJoined=function(e){var t=this;this.getConnection(e.id,"").then((function(t){C.warn("Connection "+e.id+" already exists in connections list")})).catch((function(n){var i=new s.Connection(t,e);t.remoteConnections[e.id]=i,t.ee.emitEvent("connectionCreated",[new l.ConnectionEvent(!1,t,"connectionCreated",i,"")])}))},t.prototype.onParticipantLeft=function(e){var t=this;this.getRemoteConnection(e.connectionId,"Remote connection "+e.connectionId+" unknown when 'onParticipantLeft'. Existing remote connections: "+JSON.stringify(Object.keys(this.remoteConnections))).then((function(n){if(n.stream){var i=n.stream,o=new p.StreamEvent(!0,t,"streamDestroyed",i,e.reason);t.ee.emitEvent("streamDestroyed",[o]),o.callDefaultBehavior(),delete t.remoteStreamsCreated[i.streamId],0===Object.keys(t.remoteStreamsCreated).length&&(t.isFirstIonicIosSubscriber=!0,t.countDownForIonicIosSubscribersActive=!0)}delete t.remoteConnections[n.connectionId],t.ee.emitEvent("connectionDestroyed",[new l.ConnectionEvent(!1,t,"connectionDestroyed",n,e.reason)])})).catch((function(e){C.error(e)}))},t.prototype.onParticipantPublished=function(e){var t,n=this,i=function(e){n.remoteConnections[e.connectionId]=e,n.remoteStreamsCreated[e.stream.streamId]||n.ee.emitEvent("streamCreated",[new p.StreamEvent(!1,n,"streamCreated",e.stream,"")]),n.remoteStreamsCreated[e.stream.streamId]=!0};this.getRemoteConnection(e.id,"Remote connection '"+e.id+"' unknown when 'onParticipantPublished'. Existing remote connections: "+JSON.stringify(Object.keys(this.remoteConnections))).then((function(n){t=n,e.metadata=n.data,t.options=e,t.initRemoteStreams(e.streams),i(t)})).catch((function(o){t=new s.Connection(n,e),i(t)}))},t.prototype.onParticipantUnpublished=function(e){var t=this;e.connectionId===this.connection.connectionId?this.stopPublisherStream(e.reason):this.getRemoteConnection(e.connectionId,"Remote connection '"+e.connectionId+"' unknown when 'onParticipantUnpublished'. Existing remote connections: "+JSON.stringify(Object.keys(this.remoteConnections))).then((function(n){var i=new p.StreamEvent(!0,t,"streamDestroyed",n.stream,e.reason);t.ee.emitEvent("streamDestroyed",[i]),i.callDefaultBehavior();var o=n.stream.streamId;delete t.remoteStreamsCreated[o],0===Object.keys(t.remoteStreamsCreated).length&&(t.isFirstIonicIosSubscriber=!0,t.countDownForIonicIosSubscribersActive=!0),n.removeStream(o)})).catch((function(e){C.error(e)}))},t.prototype.onParticipantEvicted=function(e){e.connectionId===this.connection.connectionId&&this.sessionId&&!this.connection.disposed&&this.leave(!0,e.reason)},t.prototype.onNewMessage=function(e){var t=this;C.info("New signal: "+JSON.stringify(e));var n=e.type?e.type.replace(/^(signal:)/,""):void 0;e.from?this.getConnection(e.from,"Connection '"+e.from+"' unknow when 'onNewMessage'. Existing remote connections: "+JSON.stringify(Object.keys(this.remoteConnections))+". Existing local connection: "+this.connection.connectionId).then((function(i){t.ee.emitEvent("signal",[new h.SignalEvent(t,n,e.data,i)]),"signal"!==e.type&&t.ee.emitEvent(e.type,[new h.SignalEvent(t,n,e.data,i)])})).catch((function(e){C.error(e)})):(this.ee.emitEvent("signal",[new h.SignalEvent(this,n,e.data,void 0)]),"signal"!==e.type&&this.ee.emitEvent(e.type,[new h.SignalEvent(this,n,e.data,void 0)]))},t.prototype.onStreamPropertyChanged=function(e){var t=this,n=function(n){if(n.stream&&n.stream.streamId===e.streamId){var i=n.stream,o=void 0;switch(e.property){case"audioActive":o=i.audioActive,e.newValue="true"===e.newValue,i.audioActive=e.newValue;break;case"videoActive":o=i.videoActive,e.newValue="true"===e.newValue,i.videoActive=e.newValue;break;case"videoDimensions":o=i.videoDimensions,e.newValue=JSON.parse(JSON.parse(e.newValue)),i.videoDimensions=e.newValue;break;case"filter":o=i.filter,e.newValue=Object.keys(e.newValue).length>0?e.newValue:void 0,void 0!==e.newValue?(i.filter=new r.Filter(e.newValue.type,e.newValue.options),i.filter.stream=i,e.newValue.lastExecMethod&&(i.filter.lastExecMethod=e.newValue.lastExecMethod)):delete i.filter,e.newValue=i.filter}t.ee.emitEvent("streamPropertyChanged",[new m.StreamPropertyChangedEvent(t,i,e.property,e.newValue,o,e.reason)]),i.streamManager&&i.streamManager.emitEvent("streamPropertyChanged",[new m.StreamPropertyChangedEvent(i.streamManager,i,e.property,e.newValue,o,e.reason)])}else C.error("No stream with streamId '"+e.streamId+"' found for connection '"+e.connectionId+"' on 'streamPropertyChanged' event")};e.connectionId===this.connection.connectionId?n(this.connection):this.getRemoteConnection(e.connectionId,"Remote connection "+e.connectionId+" unknown when 'onStreamPropertyChanged'. Existing remote connections: "+JSON.stringify(Object.keys(this.remoteConnections))).then((function(e){n(e)})).catch((function(e){C.error(e)}))},t.prototype.recvIceCandidate=function(e){var t={candidate:e.candidate,component:e.component,foundation:e.foundation,port:e.port,priority:e.priority,protocol:e.protocol,relatedAddress:e.relatedAddress,relatedPort:e.relatedPort,sdpMid:e.sdpMid,sdpMLineIndex:e.sdpMLineIndex,tcpType:e.tcpType,usernameFragment:e.usernameFragment,type:e.type,toJSON:function(){return{candidate:e.candidate}}};this.getConnection(e.senderConnectionId,"Connection not found for connectionId "+e.senderConnectionId+" owning endpoint "+e.endpointName+". Ice candidate will be ignored: "+t).then((function(n){var i=n.stream;i.getWebRtcPeer().addIceCandidate(t).catch((function(t){C.error("Error adding candidate for "+i.streamId+" stream of endpoint "+e.endpointName+": "+t)}))})).catch((function(e){C.error(e)}))},t.prototype.onSessionClosed=function(e){C.info("Session closed: "+JSON.stringify(e));var t=e.sessionId;void 0!==t?this.ee.emitEvent("session-closed",[{session:t}]):C.warn("Session undefined on session closed",e)},t.prototype.onLostConnection=function(e){C.warn("Lost connection in Session "+this.sessionId),this.sessionId&&!this.connection.disposed&&this.leave(!0,e)},t.prototype.onRecoveredConnection=function(){C.info("Recovered connection in Session "+this.sessionId),this.reconnectBrokenStreams(),this.ee.emitEvent("reconnected",[])},t.prototype.onMediaError=function(e){C.error("Media error: "+JSON.stringify(e));var t=e.error;t?this.ee.emitEvent("error-media",[{error:t}]):C.warn("Received undefined media error. Params:",e)},t.prototype.onRecordingStarted=function(e){this.ee.emitEvent("recordingStarted",[new u.RecordingEvent(this,"recordingStarted",e.id,e.name)])},t.prototype.onRecordingStopped=function(e){this.ee.emitEvent("recordingStopped",[new u.RecordingEvent(this,"recordingStopped",e.id,e.name,e.reason)])},t.prototype.onFilterEventDispatched=function(e){var t=e.connectionId;this.getConnection(t,"No connection found for connectionId "+t).then((function(t){C.info("Filter event dispatched");var n=t.stream;n.filter.handlers[e.eventType](new d.FilterEvent(n.filter,e.eventType,e.data))}))},t.prototype.reconnectBrokenStreams=function(){C.info("Re-establishing media connections...");var e=!1;this.connection.stream&&this.connection.stream.streamIceConnectionStateBroken()&&(C.warn("Re-establishing Publisher "+this.connection.stream.streamId),this.connection.stream.initWebRtcPeerSend(!0),e=!0);for(var t=0,n=Object.values(this.remoteConnections);t<n.length;t++){var i=n[t];i.stream&&i.stream.streamIceConnectionStateBroken()&&(C.warn("Re-establishing Subscriber "+i.stream.streamId),i.stream.initWebRtcPeerReceive(!0),e=!0)}e||C.info("There were no media streams in need of a reconnection")},t.prototype.emitEvent=function(e,t){this.ee.emitEvent(e,t)},t.prototype.leave=function(e,t){var n=this;if(C.info("Leaving Session (forced="+(e=!!e)+")"),this.connection){if(this.connection.disposed||e?this.openvidu.closeWs():this.openvidu.sendRequest("leaveRoom",(function(e,t){e&&C.error(e),n.openvidu.closeWs()})),this.stopPublisherStream(t),!this.connection.disposed){var i=new g.SessionDisconnectedEvent(this,t);this.ee.emitEvent("sessionDisconnected",[i]),i.callDefaultBehavior()}}else C.warn("You were not connected to the session "+this.sessionId)},t.prototype.initializeParams=function(e){return{token:e||"",session:this.sessionId,platform:v.description?v.description:"unknown",metadata:this.options.metadata?this.options.metadata:"",secret:this.openvidu.getSecret(),recorder:this.openvidu.getRecorder()}},t.prototype.connectAux=function(e){var t=this;return new Promise((function(n,i){t.openvidu.startWs((function(o){if(o)i(o);else{var r=t.initializeParams(e);t.openvidu.sendRequest("joinRoom",r,(function(e,o){if(e)i(e);else{t.capabilities={subscribe:!0,publish:"SUBSCRIBER"!==t.openvidu.role,forceUnpublish:"MODERATOR"===t.openvidu.role,forceDisconnect:"MODERATOR"===t.openvidu.role},t.connection=new s.Connection(t),t.connection.connectionId=o.id,t.connection.creationTime=o.createdAt,t.connection.data=o.metadata,t.connection.rpcSessionId=o.sessionId;var r={connections:new Array,streams:new Array};o.value.forEach((function(e){var n=new s.Connection(t,e);t.remoteConnections[n.connectionId]=n,r.connections.push(n),n.stream&&(t.remoteStreamsCreated[n.stream.streamId]=!0,r.streams.push(n.stream))})),t.ee.emitEvent("connectionCreated",[new l.ConnectionEvent(!1,t,"connectionCreated",t.connection,"")]),r.connections.forEach((function(e){t.ee.emitEvent("connectionCreated",[new l.ConnectionEvent(!1,t,"connectionCreated",e,"")])})),r.streams.forEach((function(e){t.ee.emitEvent("streamCreated",[new p.StreamEvent(!1,t,"streamCreated",e,"")])})),n()}}))}}))}))},t.prototype.stopPublisherStream=function(e){this.connection.stream&&(this.connection.stream.disposeWebRtcPeer(),this.connection.stream.isLocalStreamPublished&&this.connection.stream.ee.emitEvent("local-stream-destroyed",[e]))},t.prototype.stringClientMetadata=function(e){return"string"!=typeof e?JSON.stringify(e):e},t.prototype.getConnection=function(e,t){var n=this;return new Promise((function(i,o){var s=n.remoteConnections[e];s?i(s):n.connection.connectionId===e?i(n.connection):o(new f.OpenViduError(f.OpenViduErrorName.GENERIC_ERROR,t))}))},t.prototype.getRemoteConnection=function(e,t){var n=this;return new Promise((function(i,o){var s=n.remoteConnections[e];s?i(s):o(new f.OpenViduError(f.OpenViduErrorName.GENERIC_ERROR,t))}))},t.prototype.processToken=function(e){var t=e.match(/^(wss?\:)\/\/(([^:\/?#]*)(?:\:([0-9]+))?)([\/]{0,1}[^?#]*)(\?[^#]*|)(#.*|)$/);if(t){var n={protocol:t[1],host:t[2],hostname:t[3],port:t[4],pathname:t[5],search:t[6],hash:t[7]},i=e.split("?"),o=decodeURI(i[1]).split("&").map((function(e){return e.split("=")})).reduce((function(e,t){return e[t[0]]=t[1],e}),{});this.sessionId=o.sessionId;var s=o.secret,r=o.recorder,a=o.coturnIp,c=o.turnUsername,l=o.turnCredential,d=o.role,u=o.webrtcStatsInterval,g=o.version;if(s&&(this.openvidu.secret=s),r&&(this.openvidu.recorder=!0),c&&l){var h="turn:"+a+":3478";this.openvidu.iceServers=[{urls:["stun:"+a+":3478"]},{urls:[h,h+"?transport=tcp"],username:c,credential:l}],C.log("STUN/TURN server IP: "+a),C.log("TURN temp credentials ["+c+":"+l+"]")}d&&(this.openvidu.role=d),u&&(this.openvidu.webrtcStatsInterval=+u),g&&(C.info("openvidu-server version: "+g),g!==this.openvidu.libraryVersion&&C.error("OpenVidu Server ("+g+") and OpenVidu Browser ("+this.openvidu.libraryVersion+") versions do NOT match. There may be incompatibilities")),this.openvidu.wsUri="wss://"+n.host+"/openvidu",this.openvidu.httpUri="https://"+n.host}else C.error('Token "'+e+'" is not valid')},t}(c.EventDispatcher);t.Session=O},JUw6:function(e,t,n){"use strict";t.__esModule=!0,t.inherits=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=Object.create(e.prototype);for(var o in n)i[o]=n[o];return i.constructor=t,t.prototype=i,t}},KFtI:function(e){e.exports=JSON.parse('["stun.l.google.com:19302","stun1.l.google.com:19302","stun2.l.google.com:19302","stun3.l.google.com:19302","stun4.l.google.com:19302","stun.ekiga.net","stun.ideasip.com","stun.schlund.de","stun.stunprotocol.org:3478","stun.voiparound.com","stun.voipbuster.com","stun.voipstunt.com","stun.voxgratia.org"]')},LXjW:function(e,t,n){"use strict";t.__esModule=!0,t.tokenize=t.test=t.scanner=t.parser=t.options=t.inherits=t.find=void 0;var i=n("JUw6"),o=a(n("MW5i")),s=a(n("t/6/")),r=a(n("QSjB"));function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)});var c=function(e){return r.run(s.run(e))};t.find=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=c(e),i=[],o=0;o<n.length;o++){var s=n[o];!s.isLink||t&&s.type!==t||i.push(s.toObject())}return i},t.inherits=i.inherits,t.options=o,t.parser=r,t.scanner=s,t.test=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=c(e);return 1===n.length&&n[0].isLink&&(!t||n[0].type===t)},t.tokenize=c},MW5i:function(e,t,n){"use strict";t.__esModule=!0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o={defaultProtocol:"http",events:null,format:r,formatHref:r,nl2br:!1,tagName:"a",target:function(e,t){return"url"===t?"_blank":null},validate:!0,ignoreTags:[],attributes:null,className:"linkified"};function s(e){this.defaultProtocol=(e=e||{}).hasOwnProperty("defaultProtocol")?e.defaultProtocol:o.defaultProtocol,this.events=e.hasOwnProperty("events")?e.events:o.events,this.format=e.hasOwnProperty("format")?e.format:o.format,this.formatHref=e.hasOwnProperty("formatHref")?e.formatHref:o.formatHref,this.nl2br=e.hasOwnProperty("nl2br")?e.nl2br:o.nl2br,this.tagName=e.hasOwnProperty("tagName")?e.tagName:o.tagName,this.target=e.hasOwnProperty("target")?e.target:o.target,this.validate=e.hasOwnProperty("validate")?e.validate:o.validate,this.ignoreTags=[],this.attributes=e.attributes||e.linkAttributes||o.attributes,this.className=e.hasOwnProperty("className")?e.className:e.linkClass||o.className;for(var t=e.hasOwnProperty("ignoreTags")?e.ignoreTags:o.ignoreTags,n=0;n<t.length;n++)this.ignoreTags.push(t[n].toUpperCase())}function r(e){return e}t.defaults=o,t.Options=s,t.contains=function(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return!0;return!1},s.prototype={resolve:function(e){var t=e.toHref(this.defaultProtocol);return{formatted:this.get("format",e.toString(),e),formattedHref:this.get("formatHref",t,e),tagName:this.get("tagName",t,e),className:this.get("className",t,e),target:this.get("target",t,e),events:this.getObject("events",t,e),attributes:this.getObject("attributes",t,e)}},check:function(e){return this.get("validate",e.toString(),e)},get:function(e,t,n){var s=void 0,r=this[e];if(!r)return r;switch(void 0===r?"undefined":i(r)){case"function":return r(t,n.type);case"object":return"function"==typeof(s=r.hasOwnProperty(n.type)?r[n.type]:o[e])?s(t,n.type):s}return r},getObject:function(e,t,n){var i=this[e];return"function"==typeof i?i(t,n.type):i}}},P3vI:function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0;var s=n("Dztv"),r=n("HxXY"),a=n("oIG1"),c=n("/dLB"),l=n("bDgZ"),d=n("9m68").OpenViduLogger.getInstance(),u=function(e){function t(t,n){var i=e.call(this)||this;if(i.videos=[],i.lazyLaunchVideoElementCreatedEvent=!1,i.stream=t,i.stream.streamManager=i,i.remote=!i.stream.isLocal(),n){var o=void 0;"string"==typeof n?o=document.getElementById(n):n instanceof HTMLElement&&(o=n),o&&(i.firstVideoElement={targetElement:o,video:document.createElement("video"),id:"",canplayListenerAdded:!1},"Safari"===l.name&&i.firstVideoElement.video.setAttribute("playsinline","true"),i.targetElement=o,i.element=o)}return i.canPlayListener=function(){i.stream.isLocal()?i.stream.displayMyRemote()?(d.info("Your own remote 'Stream' with id ["+i.stream.streamId+"] video is now playing"),i.ee.emitEvent("remoteVideoPlaying",[new a.VideoElementEvent(i.videos[0].video,i,"remoteVideoPlaying")])):(d.info("Your local 'Stream' with id ["+i.stream.streamId+"] video is now playing"),i.ee.emitEvent("videoPlaying",[new a.VideoElementEvent(i.videos[0].video,i,"videoPlaying")])):(d.info("Remote 'Stream' with id ["+i.stream.streamId+"] video is now playing"),i.ee.emitEvent("videoPlaying",[new a.VideoElementEvent(i.videos[0].video,i,"videoPlaying")])),i.ee.emitEvent("streamPlaying",[new r.StreamManagerEvent(i,"streamPlaying",void 0)])},i}return o(t,e),t.prototype.on=function(t,n){return e.prototype.onAux.call(this,t,"Event '"+t+"' triggered by '"+(this.remote?"Subscriber":"Publisher")+"'",n),"videoElementCreated"===t&&this.stream&&this.lazyLaunchVideoElementCreatedEvent&&(this.ee.emitEvent("videoElementCreated",[new a.VideoElementEvent(this.videos[0].video,this,"videoElementCreated")]),this.lazyLaunchVideoElementCreatedEvent=!1),"streamPlaying"!==t&&"videoPlaying"!==t||this.videos[0]&&this.videos[0].video&&this.videos[0].video.currentTime>0&&!1===this.videos[0].video.paused&&!1===this.videos[0].video.ended&&4===this.videos[0].video.readyState&&(this.ee.emitEvent("streamPlaying",[new r.StreamManagerEvent(this,"streamPlaying",void 0)]),this.ee.emitEvent("videoPlaying",[new a.VideoElementEvent(this.videos[0].video,this,"videoPlaying")])),"streamAudioVolumeChange"===t&&this.stream.hasAudio&&this.stream.enableVolumeChangeEvent(!1),this},t.prototype.once=function(t,n){return e.prototype.onceAux.call(this,t,"Event '"+t+"' triggered once by '"+(this.remote?"Subscriber":"Publisher")+"'",n),"videoElementCreated"===t&&this.stream&&this.lazyLaunchVideoElementCreatedEvent&&this.ee.emitEvent("videoElementCreated",[new a.VideoElementEvent(this.videos[0].video,this,"videoElementCreated")]),"streamPlaying"!==t&&"videoPlaying"!==t||this.videos[0]&&this.videos[0].video&&this.videos[0].video.currentTime>0&&!1===this.videos[0].video.paused&&!1===this.videos[0].video.ended&&4===this.videos[0].video.readyState&&(this.ee.emitEvent("streamPlaying",[new r.StreamManagerEvent(this,"streamPlaying",void 0)]),this.ee.emitEvent("videoPlaying",[new a.VideoElementEvent(this.videos[0].video,this,"videoPlaying")])),"streamAudioVolumeChange"===t&&this.stream.hasAudio&&this.stream.enableOnceVolumeChangeEvent(!1),this},t.prototype.off=function(t,n){return e.prototype.off.call(this,t,n),"streamAudioVolumeChange"===t&&0===this.ee.getListeners(t).length&&this.stream.disableVolumeChangeEvent(!1),this},t.prototype.addVideoElement=function(e){this.initializeVideoProperties(e),this.stream.isLocal()&&this.stream.displayMyRemote()&&e.srcObject!==this.stream.getMediaStream()&&(e.srcObject=this.stream.getMediaStream());for(var t=0,n=this.videos;t<n.length;t++)if(n[t].video===e)return 0;for(var i=1,o=0,s=this.stream.session.streamManagers;o<s.length;o++)if(s[o].disassociateVideo(e)){i=-1;break}return this.stream.session.streamManagers.forEach((function(t){t.disassociateVideo(e)})),this.pushNewStreamManagerVideo({video:e,id:e.id,canplayListenerAdded:!1}),d.info("New video element associated to ",this),i},t.prototype.createVideoElement=function(e,t){var n;if("string"==typeof e){if(!(n=document.getElementById(e)))throw new Error("The provided 'targetElement' couldn't be resolved to any HTML element: "+e)}else{if(!(e instanceof HTMLElement))throw new Error("The provided 'targetElement' couldn't be resolved to any HTML element: "+e);n=e}var i=this.createVideo();this.initializeVideoProperties(i);var o=t||c.VideoInsertMode.APPEND;switch(o){case c.VideoInsertMode.AFTER:n.parentNode.insertBefore(i,n.nextSibling);break;case c.VideoInsertMode.APPEND:n.appendChild(i);break;case c.VideoInsertMode.BEFORE:n.parentNode.insertBefore(i,n);break;case c.VideoInsertMode.PREPEND:n.insertBefore(i,n.childNodes[0]);break;case c.VideoInsertMode.REPLACE:n.parentNode.replaceChild(i,n);break;default:o=c.VideoInsertMode.APPEND,n.appendChild(i)}var s={targetElement:n,video:i,insertMode:o,id:i.id,canplayListenerAdded:!1};return this.pushNewStreamManagerVideo(s),this.ee.emitEvent("videoElementCreated",[new a.VideoElementEvent(s.video,this,"videoElementCreated")]),this.lazyLaunchVideoElementCreatedEvent=!!this.firstVideoElement,i},t.prototype.updatePublisherSpeakingEventsOptions=function(e){var t=this.stream.harkOptions?this.stream.harkOptions:this.stream.session.openvidu.advancedConfiguration.publisherSpeakingEventsOptions||{},n="number"==typeof e.interval?e.interval:"number"==typeof t.interval?t.interval:100,i="number"==typeof e.threshold?e.threshold:"number"==typeof t.threshold?t.threshold:-50;this.stream.harkOptions={interval:n,threshold:i},this.stream.speechEvent&&(this.stream.speechEvent.setInterval(n),this.stream.speechEvent.setThreshold(i))},t.prototype.initializeVideoProperties=function(e){this.stream.isLocal()&&this.stream.displayMyRemote()||e.srcObject!==this.stream.getMediaStream()&&(e.srcObject=this.stream.getMediaStream()),e.autoplay=!0,e.controls=!1,"Safari"===l.name&&e.setAttribute("playsinline","true"),e.id||(e.id=(this.remote?"remote-":"local-")+"video-"+this.stream.streamId,!this.id&&this.targetElement&&(this.id=e.id)),this.remote||this.stream.displayMyRemote()||(e.muted=!0,"rotateY(180deg)"!==e.style.transform||this.stream.outboundStreamOpts.publisherProperties.mirror?this.stream.outboundStreamOpts.publisherProperties.mirror&&!this.stream.isSendScreen()&&this.mirrorVideo(e):this.removeMirrorVideo(e))},t.prototype.removeAllVideos=function(){for(var e=this,t=this.stream.session.streamManagers.length-1;t>=0;--t)this.stream.session.streamManagers[t]===this&&this.stream.session.streamManagers.splice(t,1);this.videos.forEach((function(t){t.video&&t.video.removeEventListener&&t.video.removeEventListener("canplay",e.canPlayListener),t.canplayListenerAdded=!1,t.targetElement&&(t.video.parentNode.removeChild(t.video),e.ee.emitEvent("videoElementDestroyed",[new a.VideoElementEvent(t.video,e,"videoElementDestroyed")])),e.removeSrcObject(t),e.videos.filter((function(e){return!e.targetElement}))}))},t.prototype.disassociateVideo=function(e){for(var t=!1,n=0;n<this.videos.length;n++)if(this.videos[n].video===e){this.videos[n].video.removeEventListener("canplay",this.canPlayListener),this.videos.splice(n,1),t=!0,d.info("Video element disassociated from ",this);break}return t},t.prototype.addPlayEventToFirstVideo=function(){this.videos[0]&&this.videos[0].video&&!this.videos[0].canplayListenerAdded&&(this.videos[0].video.addEventListener("canplay",this.canPlayListener),this.videos[0].canplayListenerAdded=!0)},t.prototype.updateMediaStream=function(e){this.videos.forEach((function(t){if(t.video.srcObject=e,l.isIonicIos){var n=t.video;t.video.parentElement.replaceChild(n,t.video),t.video=n}}))},t.prototype.emitEvent=function(e,t){this.ee.emitEvent(e,t)},t.prototype.createVideo=function(){return document.createElement("video")},t.prototype.removeSrcObject=function(e){e.video.srcObject=null},t.prototype.pushNewStreamManagerVideo=function(e){this.videos.push(e),this.addPlayEventToFirstVideo(),-1===this.stream.session.streamManagers.indexOf(this)&&this.stream.session.streamManagers.push(this)},t.prototype.mirrorVideo=function(e){l.isIonicIos||(e.style.transform="rotateY(180deg)",e.style.webkitTransform="rotateY(180deg)")},t.prototype.removeMirrorVideo=function(e){e.style.transform="unset",e.style.webkitTransform="unset"},t}(s.EventDispatcher);t.StreamManager=u},PEz1:function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0;var s=n("JTMn"),r=n("DPKQ"),a=n("P3vI"),c=n("Te8r"),l=n("BwMD"),d=n("oIG1"),u=n("Tt94"),g=n("bDgZ"),h=n("9m68").OpenViduLogger.getInstance(),p=function(e){function t(t,n,i){var o=e.call(this,new r.Stream(i.session?i.session:new s.Session(i),{publisherProperties:n,mediaConstraints:{}}),t)||this;return o.accessAllowed=!1,o.isSubscribedToRemote=!1,o.accessDenied=!1,o.properties=n,o.openvidu=i,o.stream.ee.on("local-stream-destroyed",(function(e){o.stream.isLocalStreamPublished=!1;var t=new c.StreamEvent(!0,o,"streamDestroyed",o.stream,e);o.emitEvent("streamDestroyed",[t]),t.callDefaultBehavior()})),o}return o(t,e),t.prototype.publishAudio=function(e){var t=this;this.stream.audioActive!==e&&((this.stream.displayMyRemote()?this.stream.localMediaStreamWhenSubscribedToRemote:this.stream.getMediaStream()).getAudioTracks().forEach((function(t){t.enabled=e})),this.session&&this.stream.streamId&&this.session.openvidu.sendRequest("streamPropertyChanged",{streamId:this.stream.streamId,property:"audioActive",newValue:e,reason:"publishAudio"},(function(n,i){n?h.error("Error sending 'streamPropertyChanged' event",n):(t.session.emitEvent("streamPropertyChanged",[new l.StreamPropertyChangedEvent(t.session,t.stream,"audioActive",e,!e,"publishAudio")]),t.emitEvent("streamPropertyChanged",[new l.StreamPropertyChangedEvent(t,t.stream,"audioActive",e,!e,"publishAudio")]))})),this.stream.audioActive=e,h.info("'Publisher' has "+(e?"published":"unpublished")+" its audio stream"))},t.prototype.publishVideo=function(e){var t=this;this.stream.videoActive!==e&&((this.stream.displayMyRemote()?this.stream.localMediaStreamWhenSubscribedToRemote:this.stream.getMediaStream()).getVideoTracks().forEach((function(t){t.enabled=e})),this.session&&this.stream.streamId&&this.session.openvidu.sendRequest("streamPropertyChanged",{streamId:this.stream.streamId,property:"videoActive",newValue:e,reason:"publishVideo"},(function(n,i){n?h.error("Error sending 'streamPropertyChanged' event",n):(t.session.emitEvent("streamPropertyChanged",[new l.StreamPropertyChangedEvent(t.session,t.stream,"videoActive",e,!e,"publishVideo")]),t.emitEvent("streamPropertyChanged",[new l.StreamPropertyChangedEvent(t,t.stream,"videoActive",e,!e,"publishVideo")]))})),this.stream.videoActive=e,h.info("'Publisher' has "+(e?"published":"unpublished")+" its video stream"))},t.prototype.subscribeToRemote=function(e){this.isSubscribedToRemote=e=void 0===e||e,this.stream.subscribeToMyRemote(e)},t.prototype.on=function(t,n){var i=this;return e.prototype.on.call(this,t,n),"streamCreated"===t&&(this.stream&&this.stream.isLocalStreamPublished?this.emitEvent("streamCreated",[new c.StreamEvent(!1,this,"streamCreated",this.stream,"")]):this.stream.ee.on("stream-created-by-publisher",(function(){i.emitEvent("streamCreated",[new c.StreamEvent(!1,i,"streamCreated",i.stream,"")])}))),"remoteVideoPlaying"===t&&this.stream.displayMyRemote()&&this.videos[0]&&this.videos[0].video&&this.videos[0].video.currentTime>0&&!1===this.videos[0].video.paused&&!1===this.videos[0].video.ended&&4===this.videos[0].video.readyState&&this.emitEvent("remoteVideoPlaying",[new d.VideoElementEvent(this.videos[0].video,this,"remoteVideoPlaying")]),"accessAllowed"===t&&this.accessAllowed&&this.emitEvent("accessAllowed",[]),"accessDenied"===t&&this.accessDenied&&this.emitEvent("accessDenied",[]),this},t.prototype.once=function(t,n){var i=this;return e.prototype.once.call(this,t,n),"streamCreated"===t&&(this.stream&&this.stream.isLocalStreamPublished?this.emitEvent("streamCreated",[new c.StreamEvent(!1,this,"streamCreated",this.stream,"")]):this.stream.ee.once("stream-created-by-publisher",(function(){i.emitEvent("streamCreated",[new c.StreamEvent(!1,i,"streamCreated",i.stream,"")])}))),"remoteVideoPlaying"===t&&this.stream.displayMyRemote()&&this.videos[0]&&this.videos[0].video&&this.videos[0].video.currentTime>0&&!1===this.videos[0].video.paused&&!1===this.videos[0].video.ended&&4===this.videos[0].video.readyState&&this.emitEvent("remoteVideoPlaying",[new d.VideoElementEvent(this.videos[0].video,this,"remoteVideoPlaying")]),"accessAllowed"===t&&this.accessAllowed&&this.emitEvent("accessAllowed",[]),"accessDenied"===t&&this.accessDenied&&this.emitEvent("accessDenied",[]),this},t.prototype.replaceTrack=function(e){var t=this,n=function(){var n,i=t.stream.displayMyRemote()?t.stream.localMediaStreamWhenSubscribedToRemote:t.stream.getMediaStream();n="video"===e.kind?i.getVideoTracks()[0]:i.getAudioTracks()[0],i.removeTrack(n),n.stop(),i.addTrack(e)};return new Promise((function(i,o){if(t.stream.isLocalStreamPublished){var s=t.stream.getRTCPeerConnection().getSenders(),r=void 0;"video"===e.kind?(r=s.find((function(e){return!!e.track&&"video"===e.track.kind})))||o(new Error("There's no replaceable track for that kind of MediaStreamTrack in this Publisher object")):"audio"===e.kind?(r=s.find((function(e){return!!e.track&&"audio"===e.track.kind})))||o(new Error("There's no replaceable track for that kind of MediaStreamTrack in this Publisher object")):o(new Error("Unknown track kind "+e.kind)),r.replaceTrack(e).then((function(){n(),i()})).catch((function(e){o(e)}))}else n(),i()}))},t.prototype.initialize=function(){var e=this;return new Promise((function(t,n){var i,o={},s={},r=function(t){e.accessDenied=!0,e.accessAllowed=!1,n(t)},a=function(n){if(e.accessAllowed=!0,e.accessDenied=!1,"undefined"!=typeof MediaStreamTrack&&e.properties.audioSource instanceof MediaStreamTrack&&(n.removeTrack(n.getAudioTracks()[0]),n.addTrack(e.properties.audioSource)),"undefined"!=typeof MediaStreamTrack&&e.properties.videoSource instanceof MediaStreamTrack&&(n.removeTrack(n.getVideoTracks()[0]),n.addTrack(e.properties.videoSource)),n.getAudioTracks()[0]){var i=null!=e.stream.audioActive?e.stream.audioActive:!!e.stream.outboundStreamOpts.publisherProperties.publishAudio;n.getAudioTracks()[0].enabled=i}if(n.getVideoTracks()[0]&&(i=null!=e.stream.videoActive?e.stream.videoActive:!!e.stream.outboundStreamOpts.publisherProperties.publishVideo,n.getVideoTracks()[0].enabled=i),e.initializeVideoReference(n),e.stream.displayMyRemote()||e.stream.updateMediaStreamInVideos(),delete e.firstVideoElement,e.stream.isSendVideo())if(e.stream.isSendScreen())e.videoReference.addEventListener("loadedmetadata",(function(){e.stream.videoDimensions={width:e.videoReference.videoWidth,height:e.videoReference.videoHeight},e.screenShareResizeInterval=setInterval((function(){var t=n.getVideoTracks()[0].getSettings(),i="Chrome"===g.name||"Opera"===g.name?e.videoReference.videoWidth:t.width,o="Chrome"===g.name||"Opera"===g.name?e.videoReference.videoHeight:t.height;if(e.stream.isLocalStreamPublished&&(i!==e.stream.videoDimensions.width||o!==e.stream.videoDimensions.height)){var s={width:e.stream.videoDimensions.width,height:e.stream.videoDimensions.height};e.stream.videoDimensions={width:i||0,height:o||0},e.session.openvidu.sendRequest("streamPropertyChanged",{streamId:e.stream.streamId,property:"videoDimensions",newValue:JSON.stringify(e.stream.videoDimensions),reason:"screenResized"},(function(t,n){t?h.error("Error sending 'streamPropertyChanged' event",t):(e.session.emitEvent("streamPropertyChanged",[new l.StreamPropertyChangedEvent(e.session,e.stream,"videoDimensions",e.stream.videoDimensions,s,"screenResized")]),e.emitEvent("streamPropertyChanged",[new l.StreamPropertyChangedEvent(e,e.stream,"videoDimensions",e.stream.videoDimensions,s,"screenResized")]))}))}}),500),e.stream.isLocalStreamReadyToPublish=!0,e.stream.ee.emitEvent("stream-ready-to-publish",[])}));else if(g.isIonicIos||"Safari"===g.name){e.videoReference.style.display="none",document.body.appendChild(e.videoReference);var o,s=function(){e.stream.videoDimensions={width:e.videoReference.videoWidth,height:e.videoReference.videoHeight},e.stream.isLocalStreamReadyToPublish=!0,e.stream.ee.emitEvent("stream-ready-to-publish",[]),document.body.removeChild(e.videoReference)};e.videoReference.addEventListener("loadedmetadata",(function(){0===e.videoReference.videoWidth?o=setInterval((function(){0!==e.videoReference.videoWidth&&(clearInterval(o),s())}),40):s()}))}else{var r=e.getVideoDimensions(n),a=r.width,c=r.height;e.stream.videoDimensions=("iOS"===g.os.family||"Android"===g.os.family)&&window.innerHeight>window.innerWidth?{width:c||0,height:a||0}:{width:a||0,height:c||0},e.stream.isLocalStreamReadyToPublish=!0,e.stream.ee.emitEvent("stream-ready-to-publish",[])}else e.stream.isLocalStreamReadyToPublish=!0,e.stream.ee.emitEvent("stream-ready-to-publish",[]);t()},c=function(t,n){e.clearPermissionDialogTimer(i,1250),e.stream.isSendScreen()&&e.stream.isSendAudio()?(s.audio=n,s.video=!1,i=Date.now(),e.setPermissionDialogTimer(1250),navigator.mediaDevices.getUserMedia(s).then((function(n){e.clearPermissionDialogTimer(i,1250),t.addTrack(n.getAudioTracks()[0]),a(t)})).catch((function(n){e.clearPermissionDialogTimer(i,1250),t.getAudioTracks().forEach((function(e){e.stop()})),t.getVideoTracks().forEach((function(e){e.stop()})),r(e.openvidu.generateAudioDeviceError(n,o))}))):a(t)},d=function(t){var n,s;switch(h.error(t),e.clearPermissionDialogTimer(i,1250),"Error"===t.name&&(t.name=t.constructor.name),t.name.toLowerCase()){case"notfounderror":navigator.mediaDevices.getUserMedia({audio:!1,video:o.video}).then((function(e){e.getVideoTracks().forEach((function(e){e.stop()})),n=u.OpenViduErrorName.INPUT_AUDIO_DEVICE_NOT_FOUND,s=t.toString(),r(new u.OpenViduError(n,s))})).catch((function(e){n=u.OpenViduErrorName.INPUT_VIDEO_DEVICE_NOT_FOUND,s=t.toString(),r(new u.OpenViduError(n,s))}));break;case"notallowederror":n=e.stream.isSendScreen()?u.OpenViduErrorName.SCREEN_CAPTURE_DENIED:u.OpenViduErrorName.DEVICE_ACCESS_DENIED,s=t.toString(),r(new u.OpenViduError(n,s));break;case"overconstrainederror":navigator.mediaDevices.getUserMedia({audio:!1,video:o.video}).then((function(e){e.getVideoTracks().forEach((function(e){e.stop()})),"deviceid"===t.constraint.toLowerCase()?(n=u.OpenViduErrorName.INPUT_AUDIO_DEVICE_NOT_FOUND,s="Audio input device with deviceId '"+o.audio.deviceId.exact+"' not found"):(n=u.OpenViduErrorName.PUBLISHER_PROPERTIES_ERROR,s="Audio input device doesn't support the value passed for constraint '"+t.constraint+"'"),r(new u.OpenViduError(n,s))})).catch((function(e){"deviceid"===t.constraint.toLowerCase()?(n=u.OpenViduErrorName.INPUT_VIDEO_DEVICE_NOT_FOUND,s="Video input device with deviceId '"+o.video.deviceId.exact+"' not found"):(n=u.OpenViduErrorName.PUBLISHER_PROPERTIES_ERROR,s="Video input device doesn't support the value passed for constraint '"+t.constraint+"'"),r(new u.OpenViduError(n,s))}));break;case"aborterror":case"notreadableerror":n=u.OpenViduErrorName.DEVICE_ALREADY_IN_USE,s=t.toString(),r(new u.OpenViduError(n,s));break;default:n=u.OpenViduErrorName.GENERIC_ERROR,s=t.toString(),r(new u.OpenViduError(n,s))}};e.openvidu.generateMediaConstraints(e.properties).then((function(t){var n,r;if(t.videoTrack&&t.audioTrack||t.audioTrack&&!1===(null===(n=t.constraints)||void 0===n?void 0:n.video)||t.videoTrack&&!1===(null===(r=t.constraints)||void 0===r?void 0:r.audio))a(e.openvidu.addAlreadyProvidedTracks(t,new MediaStream));else{e.stream.setOutboundStreamOptions({mediaConstraints:o=t.constraints,publisherProperties:e.properties});var l=void 0===o.audio||o.audio;s.audio=!e.stream.isSendScreen()&&l,s.video=o.video,i=Date.now(),e.setPermissionDialogTimer(1250),e.stream.isSendScreen()&&navigator.mediaDevices.getDisplayMedia&&"Electron"!==g.name?navigator.mediaDevices.getDisplayMedia({video:!0}).then((function(n){e.openvidu.addAlreadyProvidedTracks(t,n),c(n,l)})).catch((function(e){d(e)})):navigator.mediaDevices.getUserMedia(s).then((function(n){e.openvidu.addAlreadyProvidedTracks(t,n),c(n,l)})).catch((function(e){d(e)}))}})).catch((function(e){r(e)}))}))},t.prototype.getVideoDimensions=function(e){return e.getVideoTracks()[0].getSettings()},t.prototype.reestablishStreamPlayingEvent=function(){this.ee.getListeners("streamPlaying").length>0&&this.addPlayEventToFirstVideo()},t.prototype.initializeVideoReference=function(e){this.videoReference=document.createElement("video"),"Safari"===g.name&&this.videoReference.setAttribute("playsinline","true"),this.stream.setMediaStream(e),this.firstVideoElement&&this.createVideoElement(this.firstVideoElement.targetElement,this.properties.insertMode),this.videoReference.srcObject=e},t.prototype.setPermissionDialogTimer=function(e){var t=this;this.permissionDialogTimeout=setTimeout((function(){t.emitEvent("accessDialogOpened",[])}),e)},t.prototype.clearPermissionDialogTimer=function(e,t){clearTimeout(this.permissionDialogTimeout),Date.now()-e>t&&this.emitEvent("accessDialogClosed",[])},t}(a.StreamManager);t.Publisher=p},PPcv:function(e,t,n){"use strict";t.__esModule=!0;var i=n("tInm"),o=n("PEz1"),s=n("JTMn"),r=n("BwMD"),a=n("Tt94"),c=n("/dLB"),l=n("9m68"),d=n("+27z"),u=n("EcWD"),g=n("6+/i"),h=n("AeG9"),p=n("bDgZ");p.isIonicIos=("iPhone"===p.product||"iPad"===p.product)&&-1===p.ua.indexOf("Safari"),p.isIonicAndroid="Android"===p.os.family&&"Android Browser"==p.name;var m=n("vqFl"),f=l.OpenViduLogger.getInstance(),b=function(){function e(){var e=this;this.publishers=[],this.secret="",this.recorder=!1,this.advancedConfiguration={},this.webrtcStatsInterval=0,this.ee=new g,this.libraryVersion=m.version,f.info("'OpenVidu' initialized"),f.info("openvidu-browser version: "+this.libraryVersion),"iOS"!==p.os.family&&"Android"!==p.os.family||window.addEventListener("orientationchange",(function(){e.publishers.forEach((function(t){if(t.stream.isLocalStreamPublished&&t.stream&&t.stream.hasVideo&&t.stream.streamManager.videos[0])var n=0,i=t.stream.videoDimensions.width,o=t.stream.videoDimensions.height,s=setInterval((function(){new Promise((function(e,n){if(p.isIonicIos)e({newWidth:t.stream.streamManager.videos[0].video.videoWidth,newHeight:t.stream.streamManager.videos[0].video.videoHeight});else{var i=t.stream.getMediaStream().getVideoTracks()[0].getSettings();e({newWidth:-1!==p.name.toLowerCase().indexOf("firefox")?i.width:t.videoReference.videoWidth,newHeight:-1!==p.name.toLowerCase().indexOf("firefox")?i.height:t.videoReference.videoHeight})}})).then((function(e){a(i,o,e.newWidth,e.newHeight)}))}),75),a=function(i,o,a,c){++n>10&&clearTimeout(s),a===i&&c===o||(t.stream.videoDimensions={width:a||0,height:c||0},e.sendRequest("streamPropertyChanged",{streamId:t.stream.streamId,property:"videoDimensions",newValue:JSON.stringify(t.stream.videoDimensions),reason:"deviceRotated"},(function(n,s){n?f.error("Error sending 'streamPropertyChanged' event",n):(e.session.emitEvent("streamPropertyChanged",[new r.StreamPropertyChangedEvent(e.session,t.stream,"videoDimensions",t.stream.videoDimensions,{width:i,height:o},"deviceRotated")]),t.emitEvent("streamPropertyChanged",[new r.StreamPropertyChangedEvent(t,t.stream,"videoDimensions",t.stream.videoDimensions,{width:i,height:o},"deviceRotated")]))})),clearTimeout(s))}}))}))}return e.prototype.initSession=function(){return this.session=new s.Session(this),this.session},e.prototype.initPublisher=function(e,t,n){var i;i=t&&"function"!=typeof t?{audioSource:void 0!==(i=t).audioSource?i.audioSource:void 0,frameRate:"undefined"!=typeof MediaStreamTrack&&i.videoSource instanceof MediaStreamTrack?void 0:void 0!==i.frameRate?i.frameRate:void 0,insertMode:void 0!==i.insertMode?"string"==typeof i.insertMode?c.VideoInsertMode[i.insertMode]:i.insertMode:c.VideoInsertMode.APPEND,mirror:void 0===i.mirror||i.mirror,publishAudio:void 0===i.publishAudio||i.publishAudio,publishVideo:void 0===i.publishVideo||i.publishVideo,resolution:"undefined"!=typeof MediaStreamTrack&&i.videoSource instanceof MediaStreamTrack?void 0:void 0!==i.resolution?i.resolution:"640x480",videoSource:void 0!==i.videoSource?i.videoSource:void 0,filter:i.filter}:{insertMode:c.VideoInsertMode.APPEND,mirror:!0,publishAudio:!0,publishVideo:!0,resolution:"640x480"};var s,r=new o.Publisher(e,i,this);return t&&"function"==typeof t?s=t:n&&(s=n),r.initialize().then((function(){void 0!==s&&s(void 0),r.emitEvent("accessAllowed",[])})).catch((function(e){void 0!==s&&s(e),r.emitEvent("accessDenied",[e])})),this.publishers.push(r),r},e.prototype.initPublisherAsync=function(e,t){var n=this;return new Promise((function(i,o){var s,r=function(e){e?o(e):i(s)};s=t?n.initPublisher(e,t,r):n.initPublisher(e,r)}))},e.prototype.initLocalRecorder=function(e){return new i.LocalRecorder(e)},e.prototype.checkSystemRequirements=function(){var e=p.name,t=p.ua?p.ua:navigator.userAgent;return this.isIPhoneOrIPad(t)?this.isIOSWithSafari(t)?1:0:"Safari"===e||"Chrome"===e||"Chrome Mobile"===e||"Firefox"===e||"Firefox Mobile"===e||"Opera"===e||"Opera Mobile"===e||"Android Browser"===e||"Electron"===e||"Samsung Internet Mobile"===e||"Samsung Internet"===e?1:0},e.prototype.checkScreenSharingCapabilities=function(){var e=p.name,t=(null==p?void 0:p.version)?parseFloat(p.version):-1,n=p.os.family;return"iOS"===n||"Android"===n||"Chrome"!==e&&"Firefox"!==e&&"Opera"!==e&&"Electron"!==e&&"Safari"===e&&t<13?0:1},e.prototype.getDevices=function(){return new Promise((function(e,t){navigator.mediaDevices.enumerateDevices().then((function(t){var n,i=[];p.isIonicAndroid&&"undefined"!=typeof cordova&&(null===(n=null===cordova||void 0===cordova?void 0:cordova.plugins)||void 0===n?void 0:n.EnumerateDevicesPlugin)?cordova.plugins.EnumerateDevicesPlugin.getEnumerateDevices().then((function(n){var o=[],s=[],r=[];o=n.filter((function(e){return"audioinput"===e.kind})),s=t.filter((function(e){return"videoinput"===e.kind})),r=t.filter((function(e){return"audioinput"===e.kind})),s.forEach((function(e,t){i.push(e.label?{kind:e.kind,deviceId:e.deviceId,label:e.label}:{kind:e.kind,deviceId:e.deviceId,label:0===t?"Front Camera":1===t?"Back Camera":"Unknown Camera"})})),r.forEach((function(e,t){if(e.label)i.push({kind:e.kind,deviceId:e.deviceId,label:e.label});else{var n="";switch(t){case 0:n="Default";break;case 1:var s=o.filter((function(e){return e.label.includes("Built")}))[0];n=s?s.label:"Built-in Microphone";break;case 2:var r=o.filter((function(e){return e.label.includes("Wired")}))[0];n=r?r.label:"Headset earpiece";break;case 3:var a=o.filter((function(e){return e.label.includes("Bluetooth")}))[0];n=a?a.label:"Wireless";break;default:n="Unknown Microphone"}i.push({kind:e.kind,deviceId:e.deviceId,label:n})}})),e(i)})):(t.forEach((function(e){"audioinput"!==e.kind&&"videoinput"!==e.kind||i.push({kind:e.kind,deviceId:e.deviceId,label:e.label})})),e(i))})).catch((function(e){f.error("Error getting devices",e),t(e)}))}))},e.prototype.getUserMedia=function(e){var t=this;return new Promise((function(n,i){var o=function(e,o){var s={audio:void 0===o.audio||o.audio,video:!1};navigator.mediaDevices.getUserMedia(s).then((function(t){e.addTrack(t.getAudioTracks()[0]),n(e)})).catch((function(n){e.getAudioTracks().forEach((function(e){e.stop()})),e.getVideoTracks().forEach((function(e){e.stop()})),i(t.generateAudioDeviceError(n,s))}))};t.generateMediaConstraints(e).then((function(s){var r,c;if(s.videoTrack&&s.audioTrack||s.audioTrack&&!1===(null===(r=s.constraints)||void 0===r?void 0:r.video)||s.videoTrack&&!1===(null===(c=s.constraints)||void 0===c?void 0:c.audio))n(t.addAlreadyProvidedTracks(s,new MediaStream));else{s.videoTrack&&delete s.constraints.video,s.audioTrack&&delete s.constraints.audio;var l=!1;if("string"==typeof e.videoSource&&("screen"===e.videoSource||"window"===e.videoSource||"Electron"===p.name&&e.videoSource.startsWith("screen:"))&&(l=!s.audioTrack&&null!==e.audioSource&&!1!==e.audioSource,navigator.mediaDevices.getDisplayMedia&&"Electron"!==p.name))return void navigator.mediaDevices.getDisplayMedia({video:!0}).then((function(e){t.addAlreadyProvidedTracks(s,e),l?o(e,s.constraints):n(e)})).catch((function(e){var t=a.OpenViduErrorName.SCREEN_CAPTURE_DENIED,n=e.toString();i(new a.OpenViduError(t,n))}));navigator.mediaDevices.getUserMedia(l?{video:s.constraints.video}:s.constraints).then((function(e){t.addAlreadyProvidedTracks(s,e),l?o(e,s.constraints):n(e)})).catch((function(t){var n=t.toString();i(new a.OpenViduError("screen"!==e.videoSource?a.OpenViduErrorName.DEVICE_ACCESS_DENIED:a.OpenViduErrorName.SCREEN_CAPTURE_DENIED,n))}))}})).catch((function(e){i(e)}))}))},e.prototype.enableProdMode=function(){f.enableProdMode()},e.prototype.setAdvancedConfiguration=function(e){this.advancedConfiguration=e},e.prototype.generateMediaConstraints=function(e){var t=this;return new Promise((function(n,i){var o={audioTrack:void 0,videoTrack:void 0,constraints:{audio:void 0,video:void 0}},s=e.audioSource,r=e.videoSource;if(null!==s&&!1!==s||(o.constraints.audio=!1),null!==r&&!1!==r||(o.constraints.video=!1),!1===o.constraints.audio&&!1===o.constraints.video&&i(new a.OpenViduError(a.OpenViduErrorName.NO_INPUT_SOURCE_SET,"Properties 'audioSource' and 'videoSource' cannot be set to false or null at the same time")),"undefined"!=typeof MediaStreamTrack&&s instanceof MediaStreamTrack&&(o.audioTrack=s),"undefined"!=typeof MediaStreamTrack&&r instanceof MediaStreamTrack&&(o.videoTrack=r),void 0===s&&(o.constraints.audio=!0),void 0===r&&(o.constraints.video={width:{ideal:640},height:{ideal:480}}),null!==r&&!1!==r){if(e.resolution){var c=e.resolution.toLowerCase().split("x"),l=Number(c[0]),d=Number(c[1]);o.constraints.video={width:{ideal:l},height:{ideal:d}}}e.frameRate&&(o.constraints.video.frameRate={ideal:e.frameRate})}t.configureDeviceIdOrScreensharing(o,e,n,i),n(o)}))},e.prototype.startWs=function(e){var t={heartbeat:5e3,sendCloseMessage:!1,ws:{uri:this.wsUri,onconnected:e,ondisconnect:this.disconnectCallback.bind(this),onreconnecting:this.reconnectingCallback.bind(this),onreconnected:this.reconnectedCallback.bind(this)},rpc:{requestTimeout:1e4,participantJoined:this.session.onParticipantJoined.bind(this.session),participantPublished:this.session.onParticipantPublished.bind(this.session),participantUnpublished:this.session.onParticipantUnpublished.bind(this.session),participantLeft:this.session.onParticipantLeft.bind(this.session),participantEvicted:this.session.onParticipantEvicted.bind(this.session),recordingStarted:this.session.onRecordingStarted.bind(this.session),recordingStopped:this.session.onRecordingStopped.bind(this.session),sendMessage:this.session.onNewMessage.bind(this.session),streamPropertyChanged:this.session.onStreamPropertyChanged.bind(this.session),filterEventDispatched:this.session.onFilterEventDispatched.bind(this.session),iceCandidate:this.session.recvIceCandidate.bind(this.session),mediaError:this.session.onMediaError.bind(this.session)}};this.jsonRpcClient=new h.clients.JsonRpcClient(t)},e.prototype.closeWs=function(){this.jsonRpcClient.close(4102,"Connection closed by client")},e.prototype.sendRequest=function(e,t,n){t&&t instanceof Function&&(n=t,t={}),f.debug('Sending request: {method:"'+e+'", params: '+JSON.stringify(t)+"}"),this.jsonRpcClient.send(e,t,n)},e.prototype.getWsUri=function(){return this.wsUri},e.prototype.getSecret=function(){return this.secret},e.prototype.getRecorder=function(){return this.recorder},e.prototype.generateAudioDeviceError=function(e,t){var n,i;switch("Error"===e.name&&(e.name=e.constructor.name),e.name.toLowerCase()){case"notfounderror":return n=a.OpenViduErrorName.INPUT_AUDIO_DEVICE_NOT_FOUND,i=e.toString(),new a.OpenViduError(n,i);case"notallowederror":return n=a.OpenViduErrorName.DEVICE_ACCESS_DENIED,i=e.toString(),new a.OpenViduError(n,i);case"overconstrainederror":return"deviceid"===e.constraint.toLowerCase()?(n=a.OpenViduErrorName.INPUT_AUDIO_DEVICE_NOT_FOUND,i="Audio input device with deviceId '"+t.audio.deviceId.exact+"' not found"):(n=a.OpenViduErrorName.PUBLISHER_PROPERTIES_ERROR,i="Audio input device doesn't support the value passed for constraint '"+e.constraint+"'"),new a.OpenViduError(n,i);case"notreadableerror":return n=a.OpenViduErrorName.DEVICE_ALREADY_IN_USE,i=e.toString(),new a.OpenViduError(n,i);default:return new a.OpenViduError(a.OpenViduErrorName.INPUT_AUDIO_DEVICE_GENERIC_ERROR,e.toString())}},e.prototype.addAlreadyProvidedTracks=function(e,t){return e.videoTrack&&t.addTrack(e.videoTrack),e.audioTrack&&t.addTrack(e.audioTrack),t},e.prototype.configureDeviceIdOrScreensharing=function(e,t,n,i){var o=this,s=t.audioSource,r=t.videoSource;if("string"==typeof s&&(e.constraints.audio={deviceId:{exact:s}}),"string"==typeof r)if(this.isScreenShare(r))if(this.checkScreenSharingCapabilities())if("Electron"===p.name){var c=r.substr(r.indexOf("screen:")+"screen:".length);e.constraints.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:c}},n(e)}else{if(this.advancedConfiguration.screenShareChromeExtension&&-1===p.name.indexOf("Firefox")&&!navigator.mediaDevices.getDisplayMedia)return void u.getScreenConstraints((function(t,s){if(t||s.mandatory&&"screen"===s.mandatory.chromeMediaSource){if("permission-denied"!==t&&"PermissionDeniedError"!==t){var r=o.advancedConfiguration.screenShareChromeExtension.split("/").pop().trim();return void u.getChromeExtensionStatus(r,(function(e){if("installed-disabled"===e){var t=new a.OpenViduError(a.OpenViduErrorName.SCREEN_EXTENSION_DISABLED,"You must enable the screen extension");f.error(t),i(t)}if("not-installed"===e){var n=new a.OpenViduError(a.OpenViduErrorName.SCREEN_EXTENSION_NOT_INSTALLED,o.advancedConfiguration.screenShareChromeExtension);f.error(n),i(n)}}))}var c=new a.OpenViduError(a.OpenViduErrorName.SCREEN_CAPTURE_DENIED,"You must allow access to one window of your desktop");f.error(c),i(c)}else e.constraints.video=s,n(e)}));if(!navigator.mediaDevices.getDisplayMedia){var l=-1!==p.name.indexOf("Firefox")?t.videoSource:void 0;return void d.getScreenId(l,(function(t,s,r){if(t)if("not-installed"===t){var c=new a.OpenViduError(a.OpenViduErrorName.SCREEN_EXTENSION_NOT_INSTALLED,o.advancedConfiguration.screenShareChromeExtension?o.advancedConfiguration.screenShareChromeExtension:"https://chrome.google.com/webstore/detail/openvidu-screensharing/lfcgfepafnobdloecchnfaclibenjold");f.error(c),i(c)}else"installed-disabled"===t?(c=new a.OpenViduError(a.OpenViduErrorName.SCREEN_EXTENSION_DISABLED,"You must enable the screen extension"),f.error(c),i(c)):"permission-denied"===t?(c=new a.OpenViduError(a.OpenViduErrorName.SCREEN_CAPTURE_DENIED,"You must allow access to one window of your desktop"),f.error(c),i(c)):(c=new a.OpenViduError(a.OpenViduErrorName.GENERIC_ERROR,"Unknown error when accessing screen share"),f.error(c),f.error(t),i(c));else e.constraints.video=r.video,n(e)}))}n(e)}else{var g=new a.OpenViduError(a.OpenViduErrorName.SCREEN_SHARING_NOT_SUPPORTED,"You can only screen share in desktop Chrome, Firefox, Opera, Safari (>=13.0) or Electron. Detected client: "+p.name);f.error(g),i(g)}else this.setVideoSource(e,r)},e.prototype.setVideoSource=function(e,t){e.constraints.video||(e.constraints.video={}),e.constraints.video.deviceId={exact:t}},e.prototype.disconnectCallback=function(){f.warn("Websocket connection lost"),this.isRoomAvailable()?this.session.onLostConnection("networkDisconnect"):alert("Connection error. Please reload page.")},e.prototype.reconnectingCallback=function(){f.warn("Websocket connection lost (reconnecting)"),this.isRoomAvailable()?this.session.emitEvent("reconnecting",[]):alert("Connection error. Please reload page.")},e.prototype.reconnectedCallback=function(){var e=this;f.warn("Websocket reconnected"),this.isRoomAvailable()?this.sendRequest("connect",{sessionId:this.session.connection.rpcSessionId},(function(t,n){t?(f.error(t),f.warn("Websocket was able to reconnect to OpenVidu Server, but your Connection was already destroyed due to timeout. You are no longer a participant of the Session and your media streams have been destroyed"),e.session.onLostConnection("networkDisconnect"),e.jsonRpcClient.close(4101,"Reconnection fault")):(e.jsonRpcClient.resetPing(),e.session.onRecoveredConnection())})):alert("Connection error. Please reload page.")},e.prototype.isRoomAvailable=function(){return void 0!==this.session&&this.session instanceof s.Session||(f.warn("Session instance not found"),!1)},e.prototype.isScreenShare=function(e){return"screen"===e||"window"===e||"Electron"===p.name&&e.startsWith("screen:")},e.prototype.isIPhoneOrIPad=function(e){var t="ontouchend"in document,n=/\b(\w*Macintosh\w*)\b/.test(e)&&t,i=/\b(\w*iPhone\w*)\b/.test(e)&&/\b(\w*Mobile\w*)\b/.test(e)&&t;return n||i},e.prototype.isIOSWithSafari=function(e){return/\b(\w*Apple\w*)\b/.test(navigator.vendor)&&/\b(\w*Safari\w*)\b/.test(e)&&!/\b(\w*CriOS\w*)\b/.test(e)&&!/\b(\w*FxiOS\w*)\b/.test(e)},e}();t.OpenVidu=b},PZzU:function(e,t,n){"use strict";t.__esModule=!0;var i=n("PPcv");t.OpenVidu=i.OpenVidu;var o=n("JTMn");t.Session=o.Session;var s=n("PEz1");t.Publisher=s.Publisher;var r=n("bk74");t.Subscriber=r.Subscriber;var a=n("P3vI");t.StreamManager=a.StreamManager;var c=n("DPKQ");t.Stream=c.Stream;var l=n("ryRr");t.Connection=l.Connection;var d=n("tInm");t.LocalRecorder=d.LocalRecorder;var u=n("74bm");t.Filter=u.Filter;var g=n("Yn0Z");t.LocalRecorderState=g.LocalRecorderState;var h=n("Tt94");t.OpenViduError=h.OpenViduError;var p=n("/dLB");t.VideoInsertMode=p.VideoInsertMode;var m=n("hzOQ");t.Event=m.Event;var f=n("8KVD");t.ConnectionEvent=f.ConnectionEvent;var b=n("e8ps");t.PublisherSpeakingEvent=b.PublisherSpeakingEvent;var v=n("rUL0");t.RecordingEvent=v.RecordingEvent;var C=n("ksJj");t.SessionDisconnectedEvent=C.SessionDisconnectedEvent;var O=n("suHS");t.SignalEvent=O.SignalEvent;var S=n("Te8r");t.StreamEvent=S.StreamEvent;var y=n("HxXY");t.StreamManagerEvent=y.StreamManagerEvent;var M=n("oIG1");t.VideoElementEvent=M.VideoElementEvent;var x=n("BwMD");t.StreamPropertyChangedEvent=x.StreamPropertyChangedEvent;var _=n("+ig+");t.FilterEvent=_.FilterEvent;var P=n("Dztv");t.EventDispatcher=P.EventDispatcher},QSjB:function(e,t,n){"use strict";t.__esModule=!0,t.start=t.run=t.TOKENS=t.State=void 0;var i=n("FlKs"),o=n("vqGb"),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(o),r=n("dlaP"),a=function(e){return new i.TokenState(e)},c=a(),l=a(),d=a(),u=a(),g=a(),h=a(),p=a(),m=a(o.URL),f=a(),b=a(o.URL),v=a(o.URL),C=a(),O=a(),S=a(),y=a(),M=a(),x=a(o.URL),_=a(o.URL),P=a(o.URL),w=a(o.URL),E=a(),k=a(),I=a(),T=a(),A=a(),V=a(),R=a(o.EMAIL),L=a(),N=a(o.EMAIL),D=a(o.MAILTOEMAIL),j=a(),U=a(),W=a(),B=a(),F=a(o.NL);c.on(r.NL,F).on(r.PROTOCOL,l).on(r.MAILTO,d).on(r.SLASH,u),l.on(r.SLASH,u),u.on(r.SLASH,g),c.on(r.TLD,h).on(r.DOMAIN,h).on(r.LOCALHOST,m).on(r.NUM,h),g.on(r.TLD,v).on(r.DOMAIN,v).on(r.NUM,v).on(r.LOCALHOST,v),h.on(r.DOT,p),A.on(r.DOT,V),p.on(r.TLD,m).on(r.DOMAIN,h).on(r.NUM,h).on(r.LOCALHOST,h),V.on(r.TLD,R).on(r.DOMAIN,A).on(r.NUM,A).on(r.LOCALHOST,A),m.on(r.DOT,p),R.on(r.DOT,V),m.on(r.COLON,f).on(r.SLASH,v),f.on(r.NUM,b),b.on(r.SLASH,v),R.on(r.COLON,L),L.on(r.NUM,N);var z=[r.DOMAIN,r.AT,r.LOCALHOST,r.NUM,r.PLUS,r.POUND,r.PROTOCOL,r.SLASH,r.TLD,r.UNDERSCORE,r.SYM,r.AMPERSAND],G=[r.COLON,r.DOT,r.QUERY,r.PUNCTUATION,r.CLOSEBRACE,r.CLOSEBRACKET,r.CLOSEANGLEBRACKET,r.CLOSEPAREN,r.OPENBRACE,r.OPENBRACKET,r.OPENANGLEBRACKET,r.OPENPAREN];v.on(r.OPENBRACE,O).on(r.OPENBRACKET,S).on(r.OPENANGLEBRACKET,y).on(r.OPENPAREN,M),C.on(r.OPENBRACE,O).on(r.OPENBRACKET,S).on(r.OPENANGLEBRACKET,y).on(r.OPENPAREN,M),O.on(r.CLOSEBRACE,v),S.on(r.CLOSEBRACKET,v),y.on(r.CLOSEANGLEBRACKET,v),M.on(r.CLOSEPAREN,v),x.on(r.CLOSEBRACE,v),_.on(r.CLOSEBRACKET,v),P.on(r.CLOSEANGLEBRACKET,v),w.on(r.CLOSEPAREN,v),E.on(r.CLOSEBRACE,v),k.on(r.CLOSEBRACKET,v),I.on(r.CLOSEANGLEBRACKET,v),T.on(r.CLOSEPAREN,v),O.on(z,x),S.on(z,_),y.on(z,P),M.on(z,w),O.on(G,E),S.on(G,k),y.on(G,I),M.on(G,T),x.on(z,x),_.on(z,_),P.on(z,P),w.on(z,w),x.on(G,x),_.on(G,_),P.on(G,P),w.on(G,w),E.on(z,x),k.on(z,_),I.on(z,P),T.on(z,w),E.on(G,E),k.on(G,k),I.on(G,I),T.on(G,T),v.on(z,v),C.on(z,v),v.on(G,C),C.on(G,C),d.on(r.TLD,D).on(r.DOMAIN,D).on(r.NUM,D).on(r.LOCALHOST,D),D.on(z,D).on(G,j),j.on(z,D).on(G,j);var Q=[r.DOMAIN,r.NUM,r.PLUS,r.POUND,r.QUERY,r.UNDERSCORE,r.SYM,r.AMPERSAND,r.TLD];h.on(Q,U).on(r.AT,W),m.on(Q,U).on(r.AT,W),p.on(Q,U),U.on(Q,U).on(r.AT,W).on(r.DOT,B),B.on(Q,U),W.on(r.TLD,A).on(r.DOMAIN,A).on(r.LOCALHOST,R),t.State=i.TokenState,t.TOKENS=s,t.run=function(e){for(var t=e.length,n=0,i=[],s=[];n<t;){for(var r=c,a=null,l=null,d=0,u=null,g=-1;n<t&&!(a=r.next(e[n]));)s.push(e[n++]);for(;n<t&&(l=a||r.next(e[n]));)a=null,(r=l).accepts()?(g=0,u=r):g>=0&&g++,n++,d++;if(g<0)for(var h=n-d;h<n;h++)s.push(e[h]);else{s.length>0&&(i.push(new o.TEXT(s)),s=[]),n-=g,d-=g;var p=u.emit();i.push(new p(e.slice(n-d,n)))}}return s.length>0&&i.push(new o.TEXT(s)),i},t.start=c},RvMX:function(e,t,n){"use strict";t.__esModule=!0,t.createTokenClass=function(){return function(e){e&&(this.v=e)}}},SYuc:function(e,t,n){var i=n("EDod");t.JsonRpcClient=i},TDwH:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){var t=e.scanner.TOKENS,n=e.parser.start;function i(e){this.v=e}e.inherits(e.parser.TOKENS.Base,i,{type:"hashtag",isLink:!0});var o=n.jump(t.POUND),s=new e.parser.State(i);o.on(t.DOMAIN,s),o.on(t.TLD,s),o.on(t.LOCALHOST,s)}},TIDz:function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return h}));var i=n("ofXK"),o=n("fXoL"),s=n("dP7y"),r=n("joaK"),a=n.n(r),c=n("bGVd"),l=n.n(c);n("mgp7");let d=(()=>{class e{constructor(){}linkify(e,t){return e.linkify(t)}find(e){return Object(s.find)(e)}test(e){return"string"==typeof e?Object(s.test)(e):Object(s.test)(...e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.Mb({token:e,factory:e.\u0275fac}),e})();const u=new o.r("NgxLinkifyjsConfig"),g={enableHash:!0,enableMention:!0};let h=(()=>{class e{constructor(e){this.config=e,e.enableHash&&a()(s),e.enableMention&&l()(s)}static forRoot(t=g){return{ngModule:e,providers:[d,{provide:u,useValue:t}]}}}return e.\u0275mod=o.Ob({type:e}),e.\u0275inj=o.Nb({factory:function(t){return new(t||e)(o.ac(u))},imports:[[i.c]]}),e})()},Te8r:function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0;var s=n("hzOQ"),r=n("PEz1"),a=n("JTMn"),c=n("9m68").OpenViduLogger.getInstance(),l=function(e){function t(t,n,i,o,s){var r=e.call(this,t,n,i)||this;return r.stream=o,r.reason=s,r}return o(t,e),t.prototype.callDefaultBehavior=function(){if("streamDestroyed"===this.type){if(this.target instanceof a.Session)c.info("Calling default behavior upon '"+this.type+"' event dispatched by 'Session'"),this.stream.disposeWebRtcPeer();else if(this.target instanceof r.Publisher){c.info("Calling default behavior upon '"+this.type+"' event dispatched by 'Publisher'"),clearInterval(this.target.screenShareResizeInterval),this.stream.isLocalStreamReadyToPublish=!1;for(var e=this.target.openvidu.publishers,t=0;t<e.length;t++)if(e[t]===this.target){e.splice(t,1);break}}this.stream.disposeMediaStream(),this.stream.streamManager&&this.stream.streamManager.removeAllVideos(),delete this.stream.session.remoteStreamsCreated[this.stream.streamId];var n=this.stream.session.remoteConnections[this.stream.connection.connectionId];if(n&&n.options){var i=n.options.streams;for(t=i.length-1;t>=0;--t)i[t].id===this.stream.streamId&&i.splice(t,1)}}},t}(s.Event);t.StreamEvent=l},Tt94:function(e,t,n){"use strict";var i;t.__esModule=!0,(i=t.OpenViduErrorName||(t.OpenViduErrorName={})).BROWSER_NOT_SUPPORTED="BROWSER_NOT_SUPPORTED",i.DEVICE_ACCESS_DENIED="DEVICE_ACCESS_DENIED",i.DEVICE_ALREADY_IN_USE="DEVICE_ALREADY_IN_USE",i.SCREEN_CAPTURE_DENIED="SCREEN_CAPTURE_DENIED",i.SCREEN_SHARING_NOT_SUPPORTED="SCREEN_SHARING_NOT_SUPPORTED",i.SCREEN_EXTENSION_NOT_INSTALLED="SCREEN_EXTENSION_NOT_INSTALLED",i.SCREEN_EXTENSION_DISABLED="SCREEN_EXTENSION_DISABLED",i.INPUT_VIDEO_DEVICE_NOT_FOUND="INPUT_VIDEO_DEVICE_NOT_FOUND",i.INPUT_AUDIO_DEVICE_NOT_FOUND="INPUT_AUDIO_DEVICE_NOT_FOUND",i.INPUT_AUDIO_DEVICE_GENERIC_ERROR="INPUT_AUDIO_DEVICE_GENERIC_ERROR",i.NO_INPUT_SOURCE_SET="NO_INPUT_SOURCE_SET",i.PUBLISHER_PROPERTIES_ERROR="PUBLISHER_PROPERTIES_ERROR",i.OPENVIDU_PERMISSION_DENIED="OPENVIDU_PERMISSION_DENIED",i.OPENVIDU_NOT_CONNECTED="OPENVIDU_NOT_CONNECTED",i.GENERIC_ERROR="GENERIC_ERROR",t.OpenViduError=function(e,t){this.name=e,this.message=t}},XiUz:function(e,t,n){"use strict";n.d(t,"g",(function(){return he})),n.d(t,"a",(function(){return L})),n.d(t,"f",(function(){return J})),n.d(t,"b",(function(){return K})),n.d(t,"d",(function(){return f})),n.d(t,"c",(function(){return ie})),n.d(t,"e",(function(){return M}));var i=n("fXoL"),o=n("pD6V"),s=n("cH1L"),r=n("XNiG"),a=n("1G5W");const c=["row","column","row-reverse","column-reverse"];function l(e){e=e?e.toLowerCase():"";let[t,n,i]=e.split(" ");return c.find(e=>e===t)||(t=c[0]),"inline"===n&&(n="inline"!==i?i:"",i="inline"),[t,u(n),!!i]}function d(e){let[t]=l(e);return t.indexOf("row")>-1}function u(e){if(e)switch(e.toLowerCase()){case"reverse":case"wrap-reverse":case"reverse-wrap":e="wrap-reverse";break;case"no":case"none":case"nowrap":e="nowrap";break;default:e="wrap"}return e}let g=(()=>{class e extends o.h{buildStyles(e){return function(e){let[t,n,i]=l(e);return function(e,t=null,n=!1){return{display:n?"inline-flex":"flex","box-sizing":"border-box","flex-direction":e,"flex-wrap":t||null}}(t,n,i)}(e)}}return e.\u0275fac=function(t){return h(t||e)},e.\u0275prov=Object(i.Mb)({factory:function(){return new e},token:e,providedIn:"root"}),e})();const h=i.Yb(g),p=["fxLayout","fxLayout.xs","fxLayout.sm","fxLayout.md","fxLayout.lg","fxLayout.xl","fxLayout.lt-sm","fxLayout.lt-md","fxLayout.lt-lg","fxLayout.lt-xl","fxLayout.gt-xs","fxLayout.gt-sm","fxLayout.gt-md","fxLayout.gt-lg"];let m=(()=>{class e extends o.b{constructor(e,t,n,i){super(e,n,t,i),this.DIRECTIVE_KEY="layout",this.styleCache=v,this.init()}}return e.\u0275fac=function(t){return new(t||e)(i.Qb(i.l),i.Qb(o.i),i.Qb(g),i.Qb(o.f))},e.\u0275dir=i.Lb({type:e,features:[i.zb]}),e})(),f=(()=>{class e extends m{constructor(){super(...arguments),this.inputs=p}}return e.\u0275fac=function(t){return b(t||e)},e.\u0275dir=i.Lb({type:e,selectors:[["","fxLayout",""],["","fxLayout.xs",""],["","fxLayout.sm",""],["","fxLayout.md",""],["","fxLayout.lg",""],["","fxLayout.xl",""],["","fxLayout.lt-sm",""],["","fxLayout.lt-md",""],["","fxLayout.lt-lg",""],["","fxLayout.lt-xl",""],["","fxLayout.gt-xs",""],["","fxLayout.gt-sm",""],["","fxLayout.gt-md",""],["","fxLayout.gt-lg",""]],inputs:{fxLayout:"fxLayout","fxLayout.xs":"fxLayout.xs","fxLayout.sm":"fxLayout.sm","fxLayout.md":"fxLayout.md","fxLayout.lg":"fxLayout.lg","fxLayout.xl":"fxLayout.xl","fxLayout.lt-sm":"fxLayout.lt-sm","fxLayout.lt-md":"fxLayout.lt-md","fxLayout.lt-lg":"fxLayout.lt-lg","fxLayout.lt-xl":"fxLayout.lt-xl","fxLayout.gt-xs":"fxLayout.gt-xs","fxLayout.gt-sm":"fxLayout.gt-sm","fxLayout.gt-md":"fxLayout.gt-md","fxLayout.gt-lg":"fxLayout.gt-lg"},features:[i.zb]}),e})();const b=i.Yb(f),v=new Map,C={"margin-left":null,"margin-right":null,"margin-top":null,"margin-bottom":null};let O=(()=>{class e extends o.h{constructor(e){super(),this._styler=e}buildStyles(e,t){return e.endsWith(k)?function(e,t){let n="0px",i="0px";return"rtl"===t?i="-"+e:n="-"+e,{margin:`0px ${n} ${"-"+e} ${i}`}}(e=e.slice(0,e.indexOf(k)),t.directionality):{}}sideEffect(e,t,n){const i=n.items;if(e.endsWith(k)){const t=function(e,t){let n="0px",i="0px";return"rtl"===t?i=e:n=e,{padding:`0px ${n} ${e} ${i}`}}(e=e.slice(0,e.indexOf(k)),n.directionality);this._styler.applyStyleToElements(t,n.items)}else{const t=i.pop(),o=function(e,t){const n=I(t.directionality,t.layout),i=Object.assign({},C);return i[n]=e,i}(e,n);this._styler.applyStyleToElements(o,i),this._styler.applyStyleToElements(C,[t])}}}return e.\u0275fac=function(t){return new(t||e)(i.ac(o.i))},e.\u0275prov=Object(i.Mb)({factory:function(){return new e(Object(i.ac)(o.i))},token:e,providedIn:"root"}),e})();const S=["fxLayoutGap","fxLayoutGap.xs","fxLayoutGap.sm","fxLayoutGap.md","fxLayoutGap.lg","fxLayoutGap.xl","fxLayoutGap.lt-sm","fxLayoutGap.lt-md","fxLayoutGap.lt-lg","fxLayoutGap.lt-xl","fxLayoutGap.gt-xs","fxLayoutGap.gt-sm","fxLayoutGap.gt-md","fxLayoutGap.gt-lg"];let y=(()=>{class e extends o.b{constructor(e,t,n,i,o,s){super(e,o,i,s),this.zone=t,this.directionality=n,this.styleUtils=i,this.layout="row",this.DIRECTIVE_KEY="layout-gap",this.observerSubject=new r.a;const c=[this.directionality.change,this.observerSubject.asObservable()];this.init(c),this.marshal.trackValue(this.nativeElement,"layout").pipe(Object(a.a)(this.destroySubject)).subscribe(this.onLayoutChange.bind(this))}get childrenNodes(){const e=this.nativeElement.children,t=[];for(let n=e.length;n--;)t[n]=e[n];return t}ngAfterContentInit(){this.buildChildObservable(),this.triggerUpdate()}ngOnDestroy(){super.ngOnDestroy(),this.observer&&this.observer.disconnect()}onLayoutChange(e){const t=e.value.split(" ");this.layout=t[0],c.find(e=>e===this.layout)||(this.layout="row"),this.triggerUpdate()}updateWithValue(e){const t=this.childrenNodes.filter(e=>1===e.nodeType&&this.willDisplay(e)).sort((e,t)=>{const n=+this.styler.lookupStyle(e,"order"),i=+this.styler.lookupStyle(t,"order");return isNaN(n)||isNaN(i)||n===i?0:n>i?1:-1});if(t.length>0){const n=this.directionality.value,i=this.layout;"row"===i&&"rtl"===n?this.styleCache=_:"row"===i&&"rtl"!==n?this.styleCache=w:"column"===i&&"rtl"===n?this.styleCache=P:"column"===i&&"rtl"!==n&&(this.styleCache=E),this.addStyles(e,{directionality:n,items:t,layout:i})}}clearStyles(){const e=Object.keys(this.mru).length>0,t=e?"padding":I(this.directionality.value,this.layout);e&&super.clearStyles(),this.styleUtils.applyStyleToElements({[t]:""},this.childrenNodes)}willDisplay(e){const t=this.marshal.getValue(e,"show-hide");return!0===t||void 0===t&&"none"!==this.styleUtils.lookupStyle(e,"display")}buildChildObservable(){this.zone.runOutsideAngular(()=>{"undefined"!=typeof MutationObserver&&(this.observer=new MutationObserver(e=>{e.some(e=>e.addedNodes&&e.addedNodes.length>0||e.removedNodes&&e.removedNodes.length>0)&&this.observerSubject.next()}),this.observer.observe(this.nativeElement,{childList:!0}))})}}return e.\u0275fac=function(t){return new(t||e)(i.Qb(i.l),i.Qb(i.A),i.Qb(s.c),i.Qb(o.i),i.Qb(O),i.Qb(o.f))},e.\u0275dir=i.Lb({type:e,features:[i.zb]}),e})(),M=(()=>{class e extends y{constructor(){super(...arguments),this.inputs=S}}return e.\u0275fac=function(t){return x(t||e)},e.\u0275dir=i.Lb({type:e,selectors:[["","fxLayoutGap",""],["","fxLayoutGap.xs",""],["","fxLayoutGap.sm",""],["","fxLayoutGap.md",""],["","fxLayoutGap.lg",""],["","fxLayoutGap.xl",""],["","fxLayoutGap.lt-sm",""],["","fxLayoutGap.lt-md",""],["","fxLayoutGap.lt-lg",""],["","fxLayoutGap.lt-xl",""],["","fxLayoutGap.gt-xs",""],["","fxLayoutGap.gt-sm",""],["","fxLayoutGap.gt-md",""],["","fxLayoutGap.gt-lg",""]],inputs:{fxLayoutGap:"fxLayoutGap","fxLayoutGap.xs":"fxLayoutGap.xs","fxLayoutGap.sm":"fxLayoutGap.sm","fxLayoutGap.md":"fxLayoutGap.md","fxLayoutGap.lg":"fxLayoutGap.lg","fxLayoutGap.xl":"fxLayoutGap.xl","fxLayoutGap.lt-sm":"fxLayoutGap.lt-sm","fxLayoutGap.lt-md":"fxLayoutGap.lt-md","fxLayoutGap.lt-lg":"fxLayoutGap.lt-lg","fxLayoutGap.lt-xl":"fxLayoutGap.lt-xl","fxLayoutGap.gt-xs":"fxLayoutGap.gt-xs","fxLayoutGap.gt-sm":"fxLayoutGap.gt-sm","fxLayoutGap.gt-md":"fxLayoutGap.gt-md","fxLayoutGap.gt-lg":"fxLayoutGap.gt-lg"},features:[i.zb]}),e})();const x=i.Yb(M),_=new Map,P=new Map,w=new Map,E=new Map,k=" grid";function I(e,t){switch(t){case"column":return"margin-bottom";case"column-reverse":return"margin-top";case"row":return"rtl"===e?"margin-left":"margin-right";case"row-reverse":return"rtl"===e?"margin-right":"margin-left";default:return"rtl"===e?"margin-left":"margin-right"}}function T(e,...t){if(null==e)throw TypeError("Cannot convert undefined or null to object");for(let n of t)if(null!=n)for(let t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e}let A=(()=>{class e extends o.h{constructor(e){super(),this.layoutConfig=e}buildStyles(e,t){let[n,i,...o]=e.split(" "),s=o.join(" ");const r=t.direction.indexOf("column")>-1?"column":"row",a=d(r)?"max-width":"max-height",c=d(r)?"min-width":"min-height",l=String(s).indexOf("calc")>-1,u=l||"auto"===s,g=String(s).indexOf("%")>-1&&!l,h=String(s).indexOf("px")>-1||String(s).indexOf("rem")>-1||String(s).indexOf("em")>-1||String(s).indexOf("vw")>-1||String(s).indexOf("vh")>-1;let p=l||h;n="0"==n?0:n,i="0"==i?0:i;const m=!n&&!i;let f={};const b={"max-width":null,"max-height":null,"min-width":null,"min-height":null};switch(s||""){case"":const e=!1!==this.layoutConfig.useColumnBasisZero;s="row"===r?"0%":e?"0.000000001px":"auto";break;case"initial":case"nogrow":n=0,s="auto";break;case"grow":s="100%";break;case"noshrink":i=0,s="auto";break;case"auto":break;case"none":n=0,i=0,s="auto";break;default:p||g||isNaN(s)||(s+="%"),"0%"===s&&(p=!0),"0px"===s&&(s="0%"),f=T(b,l?{"flex-grow":n,"flex-shrink":i,"flex-basis":p?s:"100%"}:{flex:`${n} ${i} ${p?s:"100%"}`})}return f.flex||f["flex-grow"]||(f=T(b,l?{"flex-grow":n,"flex-shrink":i,"flex-basis":s}:{flex:`${n} ${i} ${s}`})),"0%"!==s&&"0px"!==s&&"0.000000001px"!==s&&"auto"!==s&&(f[c]=m||p&&n?s:null,f[a]=m||!u&&i?s:null),f[c]||f[a]?t.hasWrap&&(f[l?"flex-basis":"flex"]=f[a]?l?f[a]:`${n} ${i} ${f[a]}`:l?f[c]:`${n} ${i} ${f[c]}`):f=T(b,l?{"flex-grow":n,"flex-shrink":i,"flex-basis":s}:{flex:`${n} ${i} ${s}`}),T(f,{"box-sizing":"border-box"})}}return e.\u0275fac=function(t){return new(t||e)(i.ac(o.e))},e.\u0275prov=Object(i.Mb)({factory:function(){return new e(Object(i.ac)(o.e))},token:e,providedIn:"root"}),e})();const V=["fxFlex","fxFlex.xs","fxFlex.sm","fxFlex.md","fxFlex.lg","fxFlex.xl","fxFlex.lt-sm","fxFlex.lt-md","fxFlex.lt-lg","fxFlex.lt-xl","fxFlex.gt-xs","fxFlex.gt-sm","fxFlex.gt-md","fxFlex.gt-lg"];let R=(()=>{class e extends o.b{constructor(e,t,n,i,o){super(e,i,t,o),this.layoutConfig=n,this.DIRECTIVE_KEY="flex",this.direction="",this.wrap=!1,this.flexGrow="1",this.flexShrink="1",this.init(),this.parentElement&&(this.marshal.trackValue(this.parentElement,"layout").pipe(Object(a.a)(this.destroySubject)).subscribe(this.onLayoutChange.bind(this)),this.marshal.trackValue(this.nativeElement,"layout-align").pipe(Object(a.a)(this.destroySubject)).subscribe(this.triggerReflow.bind(this)))}get shrink(){return this.flexShrink}set shrink(e){this.flexShrink=e||"1",this.triggerReflow()}get grow(){return this.flexGrow}set grow(e){this.flexGrow=e||"1",this.triggerReflow()}onLayoutChange(e){const t=e.value.split(" ");this.direction=t[0],this.wrap=void 0!==t[1]&&"wrap"===t[1],this.triggerUpdate()}updateWithValue(e){this.direction||(this.direction=this.getFlexFlowDirection(this.parentElement,!1!==this.layoutConfig.addFlexToParent));const t=this.direction,n=t.startsWith("row"),i=this.wrap;n&&i?this.styleCache=U:n&&!i?this.styleCache=D:!n&&i?this.styleCache=W:n||i||(this.styleCache=j);const s=String(e).replace(";",""),r=Object(o.j)(s,this.flexGrow,this.flexShrink);this.addStyles(r.join(" "),{direction:t,hasWrap:i})}triggerReflow(){const e=this.activatedValue;if(void 0!==e){const t=Object(o.j)(e+"",this.flexGrow,this.flexShrink);this.marshal.updateElement(this.nativeElement,this.DIRECTIVE_KEY,t.join(" "))}}}return e.\u0275fac=function(t){return new(t||e)(i.Qb(i.l),i.Qb(o.i),i.Qb(o.e),i.Qb(A),i.Qb(o.f))},e.\u0275dir=i.Lb({type:e,inputs:{shrink:["fxShrink","shrink"],grow:["fxGrow","grow"]},features:[i.zb]}),e})(),L=(()=>{class e extends R{constructor(){super(...arguments),this.inputs=V}}return e.\u0275fac=function(t){return N(t||e)},e.\u0275dir=i.Lb({type:e,selectors:[["","fxFlex",""],["","fxFlex.xs",""],["","fxFlex.sm",""],["","fxFlex.md",""],["","fxFlex.lg",""],["","fxFlex.xl",""],["","fxFlex.lt-sm",""],["","fxFlex.lt-md",""],["","fxFlex.lt-lg",""],["","fxFlex.lt-xl",""],["","fxFlex.gt-xs",""],["","fxFlex.gt-sm",""],["","fxFlex.gt-md",""],["","fxFlex.gt-lg",""]],inputs:{fxFlex:"fxFlex","fxFlex.xs":"fxFlex.xs","fxFlex.sm":"fxFlex.sm","fxFlex.md":"fxFlex.md","fxFlex.lg":"fxFlex.lg","fxFlex.xl":"fxFlex.xl","fxFlex.lt-sm":"fxFlex.lt-sm","fxFlex.lt-md":"fxFlex.lt-md","fxFlex.lt-lg":"fxFlex.lt-lg","fxFlex.lt-xl":"fxFlex.lt-xl","fxFlex.gt-xs":"fxFlex.gt-xs","fxFlex.gt-sm":"fxFlex.gt-sm","fxFlex.gt-md":"fxFlex.gt-md","fxFlex.gt-lg":"fxFlex.gt-lg"},features:[i.zb]}),e})();const N=i.Yb(L),D=new Map,j=new Map,U=new Map,W=new Map;let B=(()=>{class e extends o.h{buildStyles(e){return{order:e&&parseInt(e,10)||""}}}return e.\u0275fac=function(t){return F(t||e)},e.\u0275prov=Object(i.Mb)({factory:function(){return new e},token:e,providedIn:"root"}),e})();const F=i.Yb(B),z=["fxFlexOrder","fxFlexOrder.xs","fxFlexOrder.sm","fxFlexOrder.md","fxFlexOrder.lg","fxFlexOrder.xl","fxFlexOrder.lt-sm","fxFlexOrder.lt-md","fxFlexOrder.lt-lg","fxFlexOrder.lt-xl","fxFlexOrder.gt-xs","fxFlexOrder.gt-sm","fxFlexOrder.gt-md","fxFlexOrder.gt-lg"];let G=(()=>{class e extends o.b{constructor(e,t,n,i){super(e,n,t,i),this.DIRECTIVE_KEY="flex-order",this.styleCache=Q,this.init()}}return e.\u0275fac=function(t){return new(t||e)(i.Qb(i.l),i.Qb(o.i),i.Qb(B),i.Qb(o.f))},e.\u0275dir=i.Lb({type:e,features:[i.zb]}),e})();const Q=new Map;let K=(()=>{class e extends G{constructor(){super(...arguments),this.inputs=z}}return e.\u0275fac=function(t){return H(t||e)},e.\u0275dir=i.Lb({type:e,selectors:[["","fxFlexOrder",""],["","fxFlexOrder.xs",""],["","fxFlexOrder.sm",""],["","fxFlexOrder.md",""],["","fxFlexOrder.lg",""],["","fxFlexOrder.xl",""],["","fxFlexOrder.lt-sm",""],["","fxFlexOrder.lt-md",""],["","fxFlexOrder.lt-lg",""],["","fxFlexOrder.lt-xl",""],["","fxFlexOrder.gt-xs",""],["","fxFlexOrder.gt-sm",""],["","fxFlexOrder.gt-md",""],["","fxFlexOrder.gt-lg",""]],inputs:{fxFlexOrder:"fxFlexOrder","fxFlexOrder.xs":"fxFlexOrder.xs","fxFlexOrder.sm":"fxFlexOrder.sm","fxFlexOrder.md":"fxFlexOrder.md","fxFlexOrder.lg":"fxFlexOrder.lg","fxFlexOrder.xl":"fxFlexOrder.xl","fxFlexOrder.lt-sm":"fxFlexOrder.lt-sm","fxFlexOrder.lt-md":"fxFlexOrder.lt-md","fxFlexOrder.lt-lg":"fxFlexOrder.lt-lg","fxFlexOrder.lt-xl":"fxFlexOrder.lt-xl","fxFlexOrder.gt-xs":"fxFlexOrder.gt-xs","fxFlexOrder.gt-sm":"fxFlexOrder.gt-sm","fxFlexOrder.gt-md":"fxFlexOrder.gt-md","fxFlexOrder.gt-lg":"fxFlexOrder.gt-lg"},features:[i.zb]}),e})();const H=i.Yb(K),q={margin:0,width:"100%",height:"100%","min-width":"100%","min-height":"100%"};let Y=(()=>{class e extends o.h{buildStyles(e){return q}}return e.\u0275fac=function(t){return Z(t||e)},e.\u0275prov=Object(i.Mb)({factory:function(){return new e},token:e,providedIn:"root"}),e})();const Z=i.Yb(Y);let J=(()=>{class e extends o.b{constructor(e,t,n,i){super(e,n,t,i),this.styleCache=X,this.addStyles("")}}return e.\u0275fac=function(t){return new(t||e)(i.Qb(i.l),i.Qb(o.i),i.Qb(Y),i.Qb(o.f))},e.\u0275dir=i.Lb({type:e,selectors:[["","fxFill",""],["","fxFlexFill",""]],features:[i.zb]}),e})();const X=new Map;let $=(()=>{class e extends o.h{buildStyles(e,t){const n={},[i,o]=e.split(" ");switch(i){case"center":n["justify-content"]="center";break;case"space-around":n["justify-content"]="space-around";break;case"space-between":n["justify-content"]="space-between";break;case"space-evenly":n["justify-content"]="space-evenly";break;case"end":case"flex-end":n["justify-content"]="flex-end";break;case"start":case"flex-start":default:n["justify-content"]="flex-start"}switch(o){case"start":case"flex-start":n["align-items"]=n["align-content"]="flex-start";break;case"center":n["align-items"]=n["align-content"]="center";break;case"end":case"flex-end":n["align-items"]=n["align-content"]="flex-end";break;case"space-between":n["align-content"]="space-between",n["align-items"]="stretch";break;case"space-around":n["align-content"]="space-around",n["align-items"]="stretch";break;case"baseline":n["align-content"]="stretch",n["align-items"]="baseline";break;case"stretch":default:n["align-items"]=n["align-content"]="stretch"}return T(n,{display:t.inline?"inline-flex":"flex","flex-direction":t.layout,"box-sizing":"border-box","max-width":"stretch"===o?d(t.layout)?null:"100%":null,"max-height":"stretch"===o&&d(t.layout)?"100%":null})}}return e.\u0275fac=function(t){return ee(t||e)},e.\u0275prov=Object(i.Mb)({factory:function(){return new e},token:e,providedIn:"root"}),e})();const ee=i.Yb($),te=["fxLayoutAlign","fxLayoutAlign.xs","fxLayoutAlign.sm","fxLayoutAlign.md","fxLayoutAlign.lg","fxLayoutAlign.xl","fxLayoutAlign.lt-sm","fxLayoutAlign.lt-md","fxLayoutAlign.lt-lg","fxLayoutAlign.lt-xl","fxLayoutAlign.gt-xs","fxLayoutAlign.gt-sm","fxLayoutAlign.gt-md","fxLayoutAlign.gt-lg"];let ne=(()=>{class e extends o.b{constructor(e,t,n,i){super(e,n,t,i),this.DIRECTIVE_KEY="layout-align",this.layout="row",this.inline=!1,this.init(),this.marshal.trackValue(this.nativeElement,"layout").pipe(Object(a.a)(this.destroySubject)).subscribe(this.onLayoutChange.bind(this))}updateWithValue(e){const t=this.layout||"row",n=this.inline;"row"===t&&n?this.styleCache=le:"row"!==t||n?"row-reverse"===t&&n?this.styleCache=ue:"row-reverse"!==t||n?"column"===t&&n?this.styleCache=de:"column"!==t||n?"column-reverse"===t&&n?this.styleCache=ge:"column-reverse"!==t||n||(this.styleCache=ce):this.styleCache=re:this.styleCache=ae:this.styleCache=se,this.addStyles(e,{layout:t,inline:n})}onLayoutChange(e){const t=e.value.split(" ");this.layout=t[0],this.inline=e.value.includes("inline"),c.find(e=>e===this.layout)||(this.layout="row"),this.triggerUpdate()}}return e.\u0275fac=function(t){return new(t||e)(i.Qb(i.l),i.Qb(o.i),i.Qb($),i.Qb(o.f))},e.\u0275dir=i.Lb({type:e,features:[i.zb]}),e})(),ie=(()=>{class e extends ne{constructor(){super(...arguments),this.inputs=te}}return e.\u0275fac=function(t){return oe(t||e)},e.\u0275dir=i.Lb({type:e,selectors:[["","fxLayoutAlign",""],["","fxLayoutAlign.xs",""],["","fxLayoutAlign.sm",""],["","fxLayoutAlign.md",""],["","fxLayoutAlign.lg",""],["","fxLayoutAlign.xl",""],["","fxLayoutAlign.lt-sm",""],["","fxLayoutAlign.lt-md",""],["","fxLayoutAlign.lt-lg",""],["","fxLayoutAlign.lt-xl",""],["","fxLayoutAlign.gt-xs",""],["","fxLayoutAlign.gt-sm",""],["","fxLayoutAlign.gt-md",""],["","fxLayoutAlign.gt-lg",""]],inputs:{fxLayoutAlign:"fxLayoutAlign","fxLayoutAlign.xs":"fxLayoutAlign.xs","fxLayoutAlign.sm":"fxLayoutAlign.sm","fxLayoutAlign.md":"fxLayoutAlign.md","fxLayoutAlign.lg":"fxLayoutAlign.lg","fxLayoutAlign.xl":"fxLayoutAlign.xl","fxLayoutAlign.lt-sm":"fxLayoutAlign.lt-sm","fxLayoutAlign.lt-md":"fxLayoutAlign.lt-md","fxLayoutAlign.lt-lg":"fxLayoutAlign.lt-lg","fxLayoutAlign.lt-xl":"fxLayoutAlign.lt-xl","fxLayoutAlign.gt-xs":"fxLayoutAlign.gt-xs","fxLayoutAlign.gt-sm":"fxLayoutAlign.gt-sm","fxLayoutAlign.gt-md":"fxLayoutAlign.gt-md","fxLayoutAlign.gt-lg":"fxLayoutAlign.gt-lg"},features:[i.zb]}),e})();const oe=i.Yb(ie),se=new Map,re=new Map,ae=new Map,ce=new Map,le=new Map,de=new Map,ue=new Map,ge=new Map;let he=(()=>{class e{}return e.\u0275mod=i.Ob({type:e}),e.\u0275inj=i.Nb({factory:function(t){return new(t||e)},imports:[[o.c,s.a]]}),e})()},YUcS:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("fXoL"),o=n("ofXK"),s=n("pD6V"),r=n("znSr"),a=n("XiUz");n("8LU1");let c=(()=>{class e{}return e.\u0275mod=i.Ob({type:e}),e.\u0275inj=i.Nb({factory:function(t){return new(t||e)},imports:[[s.c]]}),e})(),l=(()=>{class e{constructor(e,t){Object(o.J)(t)&&!e&&console.warn("Warning: Flex Layout loaded on the server without FlexLayoutServerModule")}static withConfig(t,n=[]){return{ngModule:e,providers:t.serverLoaded?[{provide:s.e,useValue:Object.assign(Object.assign({},s.d),t)},{provide:s.a,useValue:n,multi:!0},{provide:s.g,useValue:!0}]:[{provide:s.e,useValue:Object.assign(Object.assign({},s.d),t)},{provide:s.a,useValue:n,multi:!0}]}}}return e.\u0275mod=i.Ob({type:e}),e.\u0275inj=i.Nb({factory:function(t){return new(t||e)(i.ac(s.g),i.ac(i.C))},imports:[[a.g,r.c,c],a.g,r.c,c]}),e})()},Yn0Z:function(e,t,n){"use strict";var i;t.__esModule=!0,(i=t.LocalRecorderState||(t.LocalRecorderState={})).READY="READY",i.RECORDING="RECORDING",i.PAUSED="PAUSED",i.FINISHED="FINISHED"},bDgZ:function(e,t,n){(function(e){var i;(function(){"use strict";var o={function:!0,object:!0},s=o[typeof window]&&window||this,r=o[typeof t]&&t&&o[typeof e]&&e&&!e.nodeType&&e&&"object"==typeof global&&global;!r||r.global!==r&&r.window!==r&&r.self!==r||(s=r);var a=Math.pow(2,53)-1,c=/\bOpera/,l=Object.prototype,d=l.hasOwnProperty,u=l.toString;function g(e){return(e=String(e)).charAt(0).toUpperCase()+e.slice(1)}function h(e){return e=v(e),/^(?:webOS|i(?:OS|P))/.test(e)?e:g(e)}function p(e,t){for(var n in e)d.call(e,n)&&t(e[n],n,e)}function m(e){return null==e?g(e):u.call(e).slice(8,-1)}function f(e){return String(e).replace(/([ -])(?!$)/g,"$1?")}function b(e,t){var n=null;return function(e,t){var n=-1,i=e?e.length:0;if("number"==typeof i&&i>-1&&i<=a)for(;++n<i;)t(e[n],n);else p(e,t)}(e,(function(i,o){n=t(n,i,o,e)})),n}function v(e){return String(e).replace(/^ +| +$/g,"")}var C=function e(t){var n=s,i=t&&"object"==typeof t&&"String"!=m(t);i&&(n=t,t=null);var o=n.navigator||{},r=o.userAgent||"";t||(t=r);var a,l,d,g,C=i?!!o.likeChrome:/\bChrome\b/.test(t)&&!/internal|\n/i.test(u.toString()),O=i?"Object":"ScriptBridgingProxyObject",S=i?"Object":"Environment",y=i&&n.java?"JavaPackage":m(n.java),M=i?"Object":"RuntimeObject",x=/\bJava/.test(y)&&n.java,_=x&&m(n.environment)==S,P=x?"a":"\u03b1",w=x?"b":"\u03b2",E=n.document||{},k=n.operamini||n.opera,I=c.test(I=i&&k?k["[[Class]]"]:m(k))?I:k=null,T=t,A=[],V=null,R=t==r,L=R&&k&&"function"==typeof k.version&&k.version(),N=b([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"],(function(e,n){return e||RegExp("\\b"+(n.pattern||f(n))+"\\b","i").exec(t)&&(n.label||n)})),D=b(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Waterfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"],(function(e,n){return e||RegExp("\\b"+(n.pattern||f(n))+"\\b","i").exec(t)&&(n.label||n)})),j=B([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),U=b({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1}},(function(e,n,i){return e||(n[j]||n[/^[a-z]+(?: +[a-z]+\b)*/i.exec(j)]||RegExp("\\b"+f(i)+"(?:\\b|\\w*\\d)","i").exec(t))&&i})),W=b(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "],(function(e,n){var i=n.pattern||f(n);return!e&&(e=RegExp("\\b"+i+"(?:/[\\d.]+|[ \\w.]*)","i").exec(t))&&(e=function(e,t,n){var i={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return t&&n&&/^Win/i.test(e)&&!/^Windows Phone /i.test(e)&&(i=i[/[\d.]+$/.exec(e)])&&(e="Windows "+i),e=String(e),t&&n&&(e=e.replace(RegExp(t,"i"),n)),h(e.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(e,i,n.label||n)),e}));function B(e){return b(e,(function(e,n){var i=n.pattern||f(n);return!e&&(e=RegExp("\\b"+i+" *\\d+[.\\w_]*","i").exec(t)||RegExp("\\b"+i+" *\\w+-[\\w]*","i").exec(t)||RegExp("\\b"+i+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(t))&&((e=String(n.label&&!RegExp(i,"i").test(n.label)?n.label:e).split("/"))[1]&&!/[\d.]+/.test(e[0])&&(e[0]+=" "+e[1]),n=n.label||n,e=h(e[0].replace(RegExp(i,"i"),n).replace(RegExp("; *(?:"+n+"[_-])?","i")," ").replace(RegExp("("+n+")[-_.]?(\\w)","i"),"$1 $2"))),e}))}if(N&&(N=[N]),U&&!j&&(j=B([U])),(a=/\bGoogle TV\b/.exec(j))&&(j=a[0]),/\bSimulator\b/i.test(t)&&(j=(j?j+" ":"")+"Simulator"),"Opera Mini"==D&&/\bOPiOS\b/.test(t)&&A.push("running in Turbo/Uncompressed mode"),"IE"==D&&/\blike iPhone OS\b/.test(t)?(U=(a=e(t.replace(/like iPhone OS/,""))).manufacturer,j=a.product):/^iP/.test(j)?(D||(D="Safari"),W="iOS"+((a=/ OS ([\d_]+)/i.exec(t))?" "+a[1].replace(/_/g,"."):"")):"Konqueror"!=D||/buntu/i.test(W)?U&&"Google"!=U&&(/Chrome/.test(D)&&!/\bMobile Safari\b/i.test(t)||/\bVita\b/.test(j))||/\bAndroid\b/.test(W)&&/^Chrome/.test(D)&&/\bVersion\//i.test(t)?(D="Android Browser",W=/\bAndroid\b/.test(W)?W:"Android"):"Silk"==D?(/\bMobi/i.test(t)||(W="Android",A.unshift("desktop mode")),/Accelerated *= *true/i.test(t)&&A.unshift("accelerated")):"PaleMoon"==D&&(a=/\bFirefox\/([\d.]+)\b/.exec(t))?A.push("identifying as Firefox "+a[1]):"Firefox"==D&&(a=/\b(Mobile|Tablet|TV)\b/i.exec(t))?(W||(W="Firefox OS"),j||(j=a[1])):!D||(a=!/\bMinefield\b/i.test(t)&&/\b(?:Firefox|Safari)\b/.exec(D))?(D&&!j&&/[\/,]|^[^(]+?\)/.test(t.slice(t.indexOf(a+"/")+8))&&(D=null),(a=j||U||W)&&(j||U||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(W))&&(D=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(W)?W:a)+" Browser")):"Electron"==D&&(a=(/\bChrome\/([\d.]+)\b/.exec(t)||0)[1])&&A.push("Chromium "+a):W="Kubuntu",L||(L=b(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))","Version",f(D),"(?:Firefox|Minefield|NetFront)"],(function(e,n){return e||(RegExp(n+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(t)||0)[1]||null}))),(a=("iCab"==N&&parseFloat(L)>3?"WebKit":/\bOpera\b/.test(D)&&(/\bOPR\b/.test(t)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(t)&&!/^(?:Trident|EdgeHTML)$/.test(N)&&"WebKit"||!N&&/\bMSIE\b/i.test(t)&&("Mac OS"==W?"Tasman":"Trident")||"WebKit"==N&&/\bPlayStation\b(?! Vita\b)/i.test(D)&&"NetFront")&&(N=[a]),"IE"==D&&(a=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(t)||0)[1])?(D+=" Mobile",W="Windows Phone "+(/\+$/.test(a)?a:a+".x"),A.unshift("desktop mode")):/\bWPDesktop\b/i.test(t)?(D="IE Mobile",W="Windows Phone 8.x",A.unshift("desktop mode"),L||(L=(/\brv:([\d.]+)/.exec(t)||0)[1])):"IE"!=D&&"Trident"==N&&(a=/\brv:([\d.]+)/.exec(t))&&(D&&A.push("identifying as "+D+(L?" "+L:"")),D="IE",L=a[1]),R){if(/^(?:boolean|number|string|undefined)$/.test(g=null!=(d=n)?typeof d.global:"number")||"object"==g&&!d.global)m(a=n.runtime)==O?(D="Adobe AIR",W=a.flash.system.Capabilities.os):m(a=n.phantom)==M?(D="PhantomJS",L=(a=a.version||null)&&a.major+"."+a.minor+"."+a.patch):"number"==typeof E.documentMode&&(a=/\bTrident\/(\d+)/i.exec(t))?((a=+a[1]+4)!=(L=[L,E.documentMode])[1]&&(A.push("IE "+L[1]+" mode"),N&&(N[1]=""),L[1]=a),L="IE"==D?String(L[1].toFixed(1)):L[0]):"number"==typeof E.documentMode&&/^(?:Chrome|Firefox)\b/.test(D)&&(A.push("masking as "+D+" "+L),D="IE",L="11.0",N=["Trident"],W="Windows");else if(x&&(T=(a=x.lang.System).getProperty("os.arch"),W=W||a.getProperty("os.name")+" "+a.getProperty("os.version")),_){try{L=n.require("ringo/engine").version.join("."),D="RingoJS"}catch(z){(a=n.system)&&a.global.system==n.system&&(D="Narwhal",W||(W=a[0].os||null))}D||(D="Rhino")}else"object"==typeof n.process&&!n.process.browser&&(a=n.process)&&("object"==typeof a.versions&&("string"==typeof a.versions.electron?(A.push("Node "+a.versions.node),D="Electron",L=a.versions.electron):"string"==typeof a.versions.nw&&(A.push("Chromium "+L,"Node "+a.versions.node),D="NW.js",L=a.versions.nw)),D||(D="Node.js",T=a.arch,W=a.platform,L=(L=/[\d.]+/.exec(a.version))?L[0]:null));W=W&&h(W)}if(L&&(a=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(L)||/(?:alpha|beta)(?: ?\d)?/i.exec(t+";"+(R&&o.appMinorVersion))||/\bMinefield\b/i.test(t)&&"a")&&(V=/b/i.test(a)?"beta":"alpha",L=L.replace(RegExp(a+"\\+?$"),"")+("beta"==V?w:P)+(/\d+\+?/.exec(a)||"")),"Fennec"==D||"Firefox"==D&&/\b(?:Android|Firefox OS)\b/.test(W))D="Firefox Mobile";else if("Maxthon"==D&&L)L=L.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(j))"Xbox 360"==j&&(W=null),"Xbox 360"==j&&/\bIEMobile\b/.test(t)&&A.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(D)&&(!D||j||/Browser|Mobi/.test(D))||"Windows CE"!=W&&!/Mobi/i.test(t))if("IE"==D&&R)try{null===n.external&&A.unshift("platform preview")}catch(z){A.unshift("embedded")}else(/\bBlackBerry\b/.test(j)||/\bBB10\b/.test(t))&&(a=(RegExp(j.replace(/ +/g," *")+"/([.\\d]+)","i").exec(t)||0)[1]||L)?(W=((a=[a,/BB10/.test(t)])[1]?(j=null,U="BlackBerry"):"Device Software")+" "+a[0],L=null):this!=p&&"Wii"!=j&&(R&&k||/Opera/.test(D)&&/\b(?:MSIE|Firefox)\b/i.test(t)||"Firefox"==D&&/\bOS X (?:\d+\.){2,}/.test(W)||"IE"==D&&(W&&!/^Win/.test(W)&&L>5.5||/\bWindows XP\b/.test(W)&&L>8||8==L&&!/\bTrident\b/.test(t)))&&!c.test(a=e.call(p,t.replace(c,"")+";"))&&a.name&&(a="ing as "+a.name+((a=a.version)?" "+a:""),c.test(D)?(/\bIE\b/.test(a)&&"Mac OS"==W&&(W=null),a="identify"+a):(a="mask"+a,D=I?h(I.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(a)&&(W=null),R||(L=null)),N=["Presto"],A.push(a));else D+=" Mobile";(a=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(t)||0)[1])&&(a=[parseFloat(a.replace(/\.(\d)$/,".0$1")),a],"Safari"==D&&"+"==a[1].slice(-1)?(D="WebKit Nightly",V="alpha",L=a[1].slice(0,-1)):L!=a[1]&&L!=(a[2]=(/\bSafari\/([\d.]+\+?)/i.exec(t)||0)[1])||(L=null),a[1]=(/\bChrome\/([\d.]+)/i.exec(t)||0)[1],537.36==a[0]&&537.36==a[2]&&parseFloat(a[1])>=28&&"WebKit"==N&&(N=["Blink"]),R&&(C||a[1])?(N&&(N[1]="like Chrome"),a=a[1]||((a=a[0])<530?1:a<532?2:a<532.05?3:a<533?4:a<534.03?5:a<534.07?6:a<534.1?7:a<534.13?8:a<534.16?9:a<534.24?10:a<534.3?11:a<535.01?12:a<535.02?"13+":a<535.07?15:a<535.11?16:a<535.19?17:a<536.05?18:a<536.1?19:a<537.01?20:a<537.11?"21+":a<537.13?23:a<537.18?24:a<537.24?25:a<537.36?26:"Blink"!=N?"27":"28")):(N&&(N[1]="like Safari"),a=(a=a[0])<400?1:a<500?2:a<526?3:a<533?4:a<534?"4+":a<535?5:a<537?6:a<538?7:a<601?8:"8"),N&&(N[1]+=" "+(a+="number"==typeof a?".x":/[.+]/.test(a)?"":"+")),"Safari"==D&&(!L||parseInt(L)>45)&&(L=a)),"Opera"==D&&(a=/\bzbov|zvav$/.exec(W))?(D+=" ",A.unshift("desktop mode"),"zvav"==a?(D+="Mini",L=null):D+="Mobile",W=W.replace(RegExp(" *"+a+"$"),"")):"Safari"==D&&/\bChrome\b/.exec(N&&N[1])&&(A.unshift("desktop mode"),D="Chrome Mobile",L=null,/\bOS X\b/.test(W)?(U="Apple",W="iOS 4.3+"):W=null),L&&0==L.indexOf(a=/[\d.]+$/.exec(W))&&t.indexOf("/"+a+"-")>-1&&(W=v(W.replace(a,""))),N&&!/\b(?:Avant|Nook)\b/.test(D)&&(/Browser|Lunascape|Maxthon/.test(D)||"Safari"!=D&&/^iOS/.test(W)&&/\bSafari\b/.test(N[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(D)&&N[1])&&(a=N[N.length-1])&&A.push(a),A.length&&(A=["("+A.join("; ")+")"]),U&&j&&j.indexOf(U)<0&&A.push("on "+U),j&&A.push((/^on /.test(A[A.length-1])?"":"on ")+j),W&&(a=/ ([\d.+]+)$/.exec(W),l=a&&"/"==W.charAt(W.length-a[0].length-1),W={architecture:32,family:a&&!l?W.replace(a[0],""):W,version:a?a[1]:null,toString:function(){var e=this.version;return this.family+(e&&!l?" "+e:"")+(64==this.architecture?" 64-bit":"")}}),(a=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(T))&&!/\bi686\b/i.test(T)?(W&&(W.architecture=64,W.family=W.family.replace(RegExp(" *"+a),"")),D&&(/\bWOW64\b/i.test(t)||R&&/\w(?:86|32)$/.test(o.cpuClass||o.platform)&&!/\bWin64; x64\b/i.test(t))&&A.unshift("32-bit")):W&&/^OS X/.test(W.family)&&"Chrome"==D&&parseFloat(L)>=39&&(W.architecture=64),t||(t=null);var F={};return F.description=t,F.layout=N&&N[0],F.manufacturer=U,F.name=D,F.prerelease=V,F.product=j,F.ua=t,F.version=D&&L,F.os=W||{architecture:null,family:null,version:null,toString:function(){return"null"}},F.parse=e,F.toString=function(){return this.description||""},F.version&&A.unshift(L),F.name&&A.unshift(D),W&&D&&(W!=String(W).split(" ")[0]||W!=D.split(" ")[0]&&!j)&&A.push(j?"("+W+")":"on "+W),A.length&&(F.description=A.join(" ")),F}();s.platform=C,void 0===(i=(function(){return C}).call(t,n,t,e))||(e.exports=i)}).call(this)}).call(this,n("YuTi")(e))},bGVd:function(e,t,n){e.exports=n("IXxz").default},bk74:function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0;var s=n("P3vI"),r=n("9m68").OpenViduLogger.getInstance(),a=function(e){function t(t,n,i){var o=e.call(this,t,n)||this;return o.element=o.targetElement,o.stream=t,o.properties=i,o}return o(t,e),t.prototype.subscribeToAudio=function(e){return this.stream.getMediaStream().getAudioTracks().forEach((function(t){t.enabled=e})),this.stream.audioActive=e,r.info("'Subscriber' has "+(e?"subscribed to":"unsubscribed from")+" its audio stream"),this},t.prototype.subscribeToVideo=function(e){return this.stream.getMediaStream().getVideoTracks().forEach((function(t){t.enabled=e})),this.stream.videoActive=e,r.info("'Subscriber' has "+(e?"subscribed to":"unsubscribed from")+" its video stream"),this},t}(s.StreamManager);t.Subscriber=a},cUzU:function(e,t,n){"use strict";var i=console;e.exports=function(e){var t,n=!1,o=e.uri,s=!1,r=new WebSocket(o);r.onopen=function(){i.debug("WebSocket connected to "+o),e.onconnected&&e.onconnected()},r.onerror=function(t){i.error("Could not connect to "+o+" (invoking onerror if defined)",t),e.onerror&&e.onerror(t)};var a=function(){3===r.readyState?n?i.debug("Connection closed by user"):(i.debug("Connection closed unexpectecly. Reconnecting..."),c(2e3,1)):i.debug("Close callback from previous websocket. Ignoring it")};function c(n,l){if(i.debug("reconnect (attempt #"+l+", max="+n+")"),1===l){if(s)return void i.warn("Trying to reconnect when already reconnecting... Ignoring this reconnection.");s=!0,e.onreconnecting&&e.onreconnecting()}!function(n,l){i.debug("Reconnection attempt #"+l),r.close(),(r=new WebSocket(o)).onopen=function(){i.debug("Reconnected to "+o+" after "+l+" attempts..."),s=!1,t(),e.onreconnected()&&e.onreconnected(),r.onclose=a},r.onerror=function(t){i.warn("Reconnection error: ",t),l===n?e.ondisconnect&&e.ondisconnect():setTimeout((function(){c(n,l+1)}),3e3)}}(n,l)}r.onclose=a,this.close=function(){n=!0,r.close()},this.reconnectWs=function(){i.debug("reconnectWs"),c(2e3,1)},this.send=function(e){r.send(e)},this.addEventListener=function(e,n){(t=function(){r.addEventListener(e,n)})()}}},dNgK:function(e,t,n){"use strict";n.d(t,"a",(function(){return P})),n.d(t,"b",(function(){return x}));var i=n("rDax"),o=n("+rOU"),s=n("ofXK"),r=n("fXoL"),a=n("FKr1"),c=n("bTqV"),l=n("XNiG"),d=n("IzEk"),u=n("1G5W"),g=n("R0Ic"),h=n("u47x"),p=n("0MNC");function m(e,t){if(1&e){const e=r.Xb();r.Wb(0,"div",1),r.Wb(1,"button",2),r.ec("click",(function(){return r.Bc(e),r.ic().action()})),r.Mc(2),r.Vb(),r.Vb()}if(2&e){const e=r.ic();r.Cb(2),r.Nc(e.data.action)}}function f(e,t){}const b=Math.pow(2,31)-1;class v{constructor(e,t){this._overlayRef=t,this._afterDismissed=new l.a,this._afterOpened=new l.a,this._onAction=new l.a,this._dismissedByAction=!1,this.containerInstance=e,this.onAction().subscribe(()=>this.dismiss()),e._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete())}closeWithAction(){this.dismissWithAction()}_dismissAfter(e){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(e,b))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed.asObservable()}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction.asObservable()}}const C=new r.r("MatSnackBarData");class O{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}let S=(()=>{class e{constructor(e,t){this.snackBarRef=e,this.data=t}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(v),r.Qb(C))},e.\u0275cmp=r.Kb({type:e,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-simple-snackbar"],decls:3,vars:2,consts:[["class","mat-simple-snackbar-action",4,"ngIf"],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(e,t){1&e&&(r.Wb(0,"span"),r.Mc(1),r.Vb(),r.Kc(2,m,3,1,"div",0)),2&e&&(r.Cb(1),r.Nc(t.data.message),r.Cb(1),r.pc("ngIf",t.hasAction))},directives:[s.t,c.b],styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}\n"],encapsulation:2,changeDetection:0}),e})();const y={snackBarState:Object(g.n)("state",[Object(g.k)("void, hidden",Object(g.l)({transform:"scale(0.8)",opacity:0})),Object(g.k)("visible",Object(g.l)({transform:"scale(1)",opacity:1})),Object(g.m)("* => visible",Object(g.e)("150ms cubic-bezier(0, 0, 0.2, 1)")),Object(g.m)("* => void, * => hidden",Object(g.e)("75ms cubic-bezier(0.4, 0.0, 1, 1)",Object(g.l)({opacity:0})))])};let M=(()=>{class e extends o.a{constructor(e,t,n,i){super(),this._ngZone=e,this._elementRef=t,this._changeDetectorRef=n,this.snackBarConfig=i,this._destroyed=!1,this._onExit=new l.a,this._onEnter=new l.a,this._animationState="void",this.attachDomPortal=e=>(this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachDomPortal(e)),this._role="assertive"!==i.politeness||i.announcementMessage?"off"===i.politeness?null:"status":"alert"}attachComponentPortal(e){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachComponentPortal(e)}attachTemplatePortal(e){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachTemplatePortal(e)}onAnimationEnd(e){const{fromState:t,toState:n}=e;if(("void"===n&&"void"!==t||"hidden"===n)&&this._completeExit(),"visible"===n){const e=this._onEnter;this._ngZone.run(()=>{e.next(),e.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges())}exit(){return this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),this._onExit}ngOnDestroy(){this._destroyed=!0,this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.asObservable().pipe(Object(d.a)(1)).subscribe(()=>{this._onExit.next(),this._onExit.complete()})}_applySnackBarClasses(){const e=this._elementRef.nativeElement,t=this.snackBarConfig.panelClass;t&&(Array.isArray(t)?t.forEach(t=>e.classList.add(t)):e.classList.add(t)),"center"===this.snackBarConfig.horizontalPosition&&e.classList.add("mat-snack-bar-center"),"top"===this.snackBarConfig.verticalPosition&&e.classList.add("mat-snack-bar-top")}_assertNotAttached(){if(this._portalOutlet.hasAttached())throw Error("Attempting to attach snack bar content after content is already attached")}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(r.A),r.Qb(r.l),r.Qb(r.h),r.Qb(O))},e.\u0275cmp=r.Kb({type:e,selectors:[["snack-bar-container"]],viewQuery:function(e,t){var n;1&e&&r.Ic(o.c,!0),2&e&&r.wc(n=r.fc())&&(t._portalOutlet=n.first)},hostAttrs:[1,"mat-snack-bar-container"],hostVars:2,hostBindings:function(e,t){1&e&&r.Hb("@state.done",(function(e){return t.onAnimationEnd(e)})),2&e&&(r.Db("role",t._role),r.Qc("@state",t._animationState))},features:[r.zb],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,t){1&e&&r.Kc(0,f,0,0,"ng-template",0)},directives:[o.c],styles:[".mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}.cdk-high-contrast-active .mat-snack-bar-container{border:solid 1px}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}\n"],encapsulation:2,data:{animation:[y.snackBarState]}}),e})(),x=(()=>{class e{}return e.\u0275mod=r.Ob({type:e}),e.\u0275inj=r.Nb({factory:function(t){return new(t||e)},imports:[[i.f,o.i,s.c,c.c,a.i],a.i]}),e})();const _=new r.r("mat-snack-bar-default-options",{providedIn:"root",factory:function(){return new O}});let P=(()=>{class e{constructor(e,t,n,i,o,s){this._overlay=e,this._live=t,this._injector=n,this._breakpointObserver=i,this._parentSnackBar=o,this._defaultConfig=s,this._snackBarRefAtThisLevel=null}get _openedSnackBarRef(){const e=this._parentSnackBar;return e?e._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(e){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=e:this._snackBarRefAtThisLevel=e}openFromComponent(e,t){return this._attach(e,t)}openFromTemplate(e,t){return this._attach(e,t)}open(e,t="",n){const i=Object.assign(Object.assign({},this._defaultConfig),n);return i.data={message:e,action:t},i.announcementMessage||(i.announcementMessage=e),this.openFromComponent(S,i)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(e,t){const n=new o.h(t&&t.viewContainerRef&&t.viewContainerRef.injector||this._injector,new WeakMap([[O,t]])),i=new o.d(M,t.viewContainerRef,n),s=e.attach(i);return s.instance.snackBarConfig=t,s.instance}_attach(e,t){const n=Object.assign(Object.assign(Object.assign({},new O),this._defaultConfig),t),i=this._createOverlay(n),s=this._attachSnackBarContainer(i,n),a=new v(s,i);if(e instanceof r.M){const t=new o.j(e,null,{$implicit:n.data,snackBarRef:a});a.instance=s.attachTemplatePortal(t)}else{const t=this._createInjector(n,a),i=new o.d(e,void 0,t),r=s.attachComponentPortal(i);a.instance=r.instance}return this._breakpointObserver.observe(p.b.HandsetPortrait).pipe(Object(u.a)(i.detachments())).subscribe(e=>{const t=i.overlayElement.classList;e.matches?t.add("mat-snack-bar-handset"):t.remove("mat-snack-bar-handset")}),this._animateSnackBar(a,n),this._openedSnackBarRef=a,this._openedSnackBarRef}_animateSnackBar(e,t){e.afterDismissed().subscribe(()=>{this._openedSnackBarRef==e&&(this._openedSnackBarRef=null),t.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{e.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):e.containerInstance.enter(),t.duration&&t.duration>0&&e.afterOpened().subscribe(()=>e._dismissAfter(t.duration)),t.announcementMessage&&this._live.announce(t.announcementMessage,t.politeness)}_createOverlay(e){const t=new i.d;t.direction=e.direction;let n=this._overlay.position().global();const o="rtl"===e.direction,s="left"===e.horizontalPosition||"start"===e.horizontalPosition&&!o||"end"===e.horizontalPosition&&o,r=!s&&"center"!==e.horizontalPosition;return s?n.left("0"):r?n.right("0"):n.centerHorizontally(),"top"===e.verticalPosition?n.top("0"):n.bottom("0"),t.positionStrategy=n,this._overlay.create(t)}_createInjector(e,t){return new o.h(e&&e.viewContainerRef&&e.viewContainerRef.injector||this._injector,new WeakMap([[v,t],[C,e.data]]))}}return e.\u0275fac=function(t){return new(t||e)(r.ac(i.c),r.ac(h.k),r.ac(r.s),r.ac(p.a),r.ac(e,12),r.ac(_))},e.\u0275prov=Object(r.Mb)({factory:function(){return new e(Object(r.ac)(i.c),Object(r.ac)(h.k),Object(r.ac)(r.p),Object(r.ac)(p.a),Object(r.ac)(e,12),Object(r.ac)(_))},token:e,providedIn:x}),e})()},dP7y:function(e,t,n){e.exports=n("LXjW")},"dY/r":function(e,t){var n=["stun:","turn:"];e.exports=function(e){var t,i,o=(e||{}).url||e,s={};return"string"==typeof o||o instanceof String?(o=o.trim(),(t=n[n.indexOf(o.slice(0,5))])?(i=(o=o.slice(5)).split("@"),s.username=e.username,s.credential=e.credential,i.length>1&&(o=i[1],i=i[0].split(":"),s.username=i[0],s.credential=(e||{}).credential||i[1]||""),s.url=t+o,s.urls=[s.url],s):e):e}},de4E:function(e,t){t.pack=function(e,t){var n={jsonrpc:"2.0"};if(e.method)n.method=e.method,e.params&&(n.params=e.params),null!=t&&(n.id=t);else if(null!=t){if(e.error){if(void 0!==e.result)throw new TypeError("Both result and error are defined");n.error=e.error}else{if(void 0===e.result)throw new TypeError("No result or error is defined");n.result=e.result}n.id=t}return JSON.stringify(n)},t.unpack=function(e){var t=e;("string"==typeof e||e instanceof String)&&(t=JSON.parse(e));var n=t.jsonrpc;if("2.0"!==n)throw new TypeError("Invalid JsonRPC version '"+n+"': "+e);if(null==t.method){if(null==t.id)throw new TypeError("Invalid message: "+e);var i=void 0!==t.result,o=void 0!==t.error;if(i&&o)throw new TypeError("Both result and error are defined: "+e);if(!i&&!o)throw new TypeError("No result or error is defined: "+e);t.ack=t.id,delete t.id}return t}},dlaP:function(e,t,n){"use strict";t.__esModule=!0,t.AMPERSAND=t.CLOSEPAREN=t.CLOSEANGLEBRACKET=t.CLOSEBRACKET=t.CLOSEBRACE=t.OPENPAREN=t.OPENANGLEBRACKET=t.OPENBRACKET=t.OPENBRACE=t.WS=t.TLD=t.SYM=t.UNDERSCORE=t.SLASH=t.MAILTO=t.PROTOCOL=t.QUERY=t.POUND=t.PLUS=t.NUM=t.NL=t.LOCALHOST=t.PUNCTUATION=t.DOT=t.COLON=t.AT=t.DOMAIN=t.Base=void 0;var i=n("RvMX"),o=n("JUw6"),s=(0,i.createTokenClass)();function r(e){var t=e?{v:e}:{};return(0,o.inherits)(s,(0,i.createTokenClass)(),t)}s.prototype={toString:function(){return this.v+""}};var a=r(),c=r("@"),l=r(":"),d=r("."),u=r(),g=r(),h=r("\n"),p=r(),m=r("+"),f=r("#"),b=r(),v=r("mailto:"),C=r("?"),O=r("/"),S=r("_"),y=r(),M=r(),x=r(),_=r("{"),P=r("["),w=r("<"),E=r("("),k=r("}"),I=r("]"),T=r(">"),A=r(")"),V=r("&");t.Base=s,t.DOMAIN=a,t.AT=c,t.COLON=l,t.DOT=d,t.PUNCTUATION=u,t.LOCALHOST=g,t.NL=h,t.NUM=p,t.PLUS=m,t.POUND=f,t.QUERY=C,t.PROTOCOL=b,t.MAILTO=v,t.SLASH=O,t.UNDERSCORE=S,t.SYM=y,t.TLD=M,t.WS=x,t.OPENBRACE=_,t.OPENBRACKET=P,t.OPENANGLEBRACKET=w,t.OPENPAREN=E,t.CLOSEBRACE=k,t.CLOSEBRACKET=I,t.CLOSEANGLEBRACKET=T,t.CLOSEPAREN=A,t.AMPERSAND=V},e8ps:function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0;var s=function(e){function t(t,n,i,o){var s=e.call(this,!1,t,n)||this;return s.type=n,s.connection=i,s.streamId=o,s}return o(t,e),t.prototype.callDefaultBehavior=function(){},t}(n("hzOQ").Event);t.PublisherSpeakingEvent=s},ee8k:function(e,t,n){var i=n("cUzU");t.WebSocketWithReconnection=i},gUCu:function(e,t){function n(){var e={};this.forEach=function(t){for(var n in e){var i=e[n];for(var o in i)t(i[o])}},this.get=function(t,n){var i=e[n];if(null!=i)return i[t]},this.remove=function(t,n){var i=e[n];if(null!=i){for(var o in delete i[t],i)return!1;delete e[n]}},this.set=function(t,n,i){if(null==t)return this.remove(n,i);var o=e[i];null==o&&(e[i]=o={}),o[n]=t}}n.prototype.pop=function(e,t){var n=this.get(e,t);if(null!=n)return this.remove(e,t),n},e.exports=n},hw9W:function(e){e.exports=JSON.parse("[]")},hzOQ:function(e,t,n){"use strict";t.__esModule=!0;var i=function(){function e(e,t,n){this.hasBeenPrevented=!1,this.cancelable=e,this.target=t,this.type=n}return e.prototype.isDefaultPrevented=function(){return this.hasBeenPrevented},e.prototype.preventDefault=function(){this.callDefaultBehavior=function(){},this.hasBeenPrevented=!0},e}();t.Event=i},joaK:function(e,t,n){e.exports=n("TDwH").default},ksJj:function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0;var s=n("hzOQ"),r=n("9m68").OpenViduLogger.getInstance(),a=function(e){function t(t,n){var i=e.call(this,!0,t,"sessionDisconnected")||this;return i.reason=n,i}return o(t,e),t.prototype.callDefaultBehavior=function(){r.info("Calling default behavior upon '"+this.type+"' event dispatched by 'Session'");var e=this.target;for(var t in e.remoteConnections)e.remoteConnections[t].stream&&(e.remoteConnections[t].stream.disposeWebRtcPeer(),e.remoteConnections[t].stream.disposeMediaStream(),e.remoteConnections[t].stream.streamManager&&e.remoteConnections[t].stream.streamManager.removeAllVideos(),delete e.remoteStreamsCreated[e.remoteConnections[t].stream.streamId],e.remoteConnections[t].dispose()),delete e.remoteConnections[t]},t}(s.Event);t.SessionDisconnectedEvent=a},mgp7:function(e,t,n){e.exports=n("/u9M").default},oIG1:function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0;var s=function(e){function t(t,n,i){var o=e.call(this,!1,n,i)||this;return o.element=t,o}return o(t,e),t.prototype.callDefaultBehavior=function(){},t}(n("hzOQ").Event);t.VideoElementEvent=s},pD6V:function(e,t,n){"use strict";n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return f})),n.d(t,"e",(function(){return b})),n.d(t,"g",(function(){return v})),n.d(t,"a",(function(){return C})),n.d(t,"b",(function(){return M})),n.d(t,"i",(function(){return z})),n.d(t,"h",(function(){return G})),n.d(t,"j",(function(){return Q})),n.d(t,"f",(function(){return H}));var i=n("fXoL"),o=n("ofXK"),s=n("XNiG"),r=n("2Vo4"),a=n("HDdC"),c=n("VRyK"),l=(n("7Hc7"),n("LRne"),n("xgIS"),n("pLZG")),d=(n("lJxs"),n("Kj3r"),n("eIep"),n("1G5W"),n("IzEk"),n("vkgz"));const u={provide:i.b,useFactory:function(e,t){return()=>{if(Object(o.I)(t)){const t=Array.from(e.querySelectorAll(`[class*=${g}]`)),n=/\bflex-layout-.+?\b/g;t.forEach(e=>{e.classList.contains(g+"ssr")&&e.parentNode?e.parentNode.removeChild(e):e.className.replace(n,"")})}}},deps:[o.e,i.C],multi:!0},g="flex-layout-";let h=(()=>{class e{}return e.\u0275mod=i.Ob({type:e}),e.\u0275inj=i.Nb({factory:function(t){return new(t||e)},providers:[u]}),e})();class p{constructor(e=!1,t="all",n="",i="",o=0){this.matches=e,this.mediaQuery=t,this.mqAlias=n,this.suffix=i,this.priority=o,this.property=""}clone(){return new p(this.matches,this.mediaQuery,this.mqAlias,this.suffix)}}let m=(()=>{class e{constructor(){this.stylesheet=new Map}addStyleToElement(e,t,n){const i=this.stylesheet.get(e);i?i.set(t,n):this.stylesheet.set(e,new Map([[t,n]]))}clearStyles(){this.stylesheet.clear()}getStyleForElement(e,t){const n=this.stylesheet.get(e);let i="";if(n){const e=n.get(t);"number"!=typeof e&&"string"!=typeof e||(i=e+"")}return i}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Object(i.Mb)({factory:function(){return new e},token:e,providedIn:"root"}),e})();const f={addFlexToParent:!0,addOrientationBps:!1,disableDefaultBps:!1,disableVendorPrefixes:!1,serverLoaded:!1,useColumnBasisZero:!0,printWithBreakpoints:[],mediaTriggerAutoRestore:!0,ssrObserveBreakpoints:[]},b=new i.r("Flex Layout token, config options for the library",{providedIn:"root",factory:()=>f}),v=new i.r("FlexLayoutServerLoaded",{providedIn:"root",factory:()=>!1}),C=new i.r("Flex Layout token, collect all breakpoints into one provider",{providedIn:"root",factory:()=>null});function O(e,t){return e=e?e.clone():new p,t&&(e.mqAlias=t.alias,e.mediaQuery=t.mediaQuery,e.suffix=t.suffix,e.priority=t.priority),e}const S=["row","column","row-reverse","column-reverse"];function y(e){if(e)switch(e.toLowerCase()){case"reverse":case"wrap-reverse":case"reverse-wrap":e="wrap-reverse";break;case"no":case"none":case"nowrap":e="nowrap";break;default:e="wrap"}return e}let M=(()=>{class e{constructor(e,t,n,i){this.elementRef=e,this.styleBuilder=t,this.styler=n,this.marshal=i,this.DIRECTIVE_KEY="",this.inputs=[],this.mru={},this.destroySubject=new s.a,this.styleCache=new Map}get parentElement(){return this.elementRef.nativeElement.parentElement}get nativeElement(){return this.elementRef.nativeElement}get activatedValue(){return this.marshal.getValue(this.nativeElement,this.DIRECTIVE_KEY)}set activatedValue(e){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,e,this.marshal.activatedAlias)}ngOnChanges(e){Object.keys(e).forEach(t=>{if(-1!==this.inputs.indexOf(t)){const n=t.split(".").slice(1).join(".");this.setValue(e[t].currentValue,n)}})}ngOnDestroy(){this.destroySubject.next(),this.destroySubject.complete(),this.marshal.releaseElement(this.nativeElement)}init(e=[]){this.marshal.init(this.elementRef.nativeElement,this.DIRECTIVE_KEY,this.updateWithValue.bind(this),this.clearStyles.bind(this),e)}addStyles(e,t){const n=this.styleBuilder,i=n.shouldCache;let o=this.styleCache.get(e);o&&i||(o=n.buildStyles(e,t),i&&this.styleCache.set(e,o)),this.mru=Object.assign({},o),this.applyStyleToElement(o),n.sideEffect(e,o,t)}clearStyles(){Object.keys(this.mru).forEach(e=>{this.mru[e]=""}),this.applyStyleToElement(this.mru),this.mru={}}triggerUpdate(){this.marshal.triggerUpdate(this.nativeElement,this.DIRECTIVE_KEY)}getFlexFlowDirection(e,t=!1){if(e){const[n,i]=this.styler.getFlowDirection(e);if(!i&&t){const t=function(e){let[t,n,i]=function(e){e=e?e.toLowerCase():"";let[t,n,i]=e.split(" ");return S.find(e=>e===t)||(t=S[0]),"inline"===n&&(n="inline"!==i?i:"",i="inline"),[t,y(n),!!i]}(e);return function(e,t=null,n=!1){return{display:n?"inline-flex":"flex","box-sizing":"border-box","flex-direction":e,"flex-wrap":t||null}}(t,n,i)}(n);this.styler.applyStyleToElements(t,[e])}return n.trim()}return"row"}applyStyleToElement(e,t,n=this.nativeElement){this.styler.applyStyleToElement(n,e,t)}setValue(e,t){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,e,t)}updateWithValue(e){this.addStyles(e)}}return e.\u0275fac=function(e){i.dc()},e.\u0275dir=i.Lb({type:e,features:[i.Ab]}),e})();const x=[{alias:"xs",mediaQuery:"screen and (min-width: 0px) and (max-width: 599.9px)",priority:1e3},{alias:"sm",mediaQuery:"screen and (min-width: 600px) and (max-width: 959.9px)",priority:900},{alias:"md",mediaQuery:"screen and (min-width: 960px) and (max-width: 1279.9px)",priority:800},{alias:"lg",mediaQuery:"screen and (min-width: 1280px) and (max-width: 1919.9px)",priority:700},{alias:"xl",mediaQuery:"screen and (min-width: 1920px) and (max-width: 4999.9px)",priority:600},{alias:"lt-sm",overlapping:!0,mediaQuery:"screen and (max-width: 599.9px)",priority:950},{alias:"lt-md",overlapping:!0,mediaQuery:"screen and (max-width: 959.9px)",priority:850},{alias:"lt-lg",overlapping:!0,mediaQuery:"screen and (max-width: 1279.9px)",priority:750},{alias:"lt-xl",overlapping:!0,priority:650,mediaQuery:"screen and (max-width: 1919.9px)"},{alias:"gt-xs",overlapping:!0,mediaQuery:"screen and (min-width: 600px)",priority:-950},{alias:"gt-sm",overlapping:!0,mediaQuery:"screen and (min-width: 960px)",priority:-850},{alias:"gt-md",overlapping:!0,mediaQuery:"screen and (min-width: 1280px)",priority:-750},{alias:"gt-lg",overlapping:!0,mediaQuery:"screen and (min-width: 1920px)",priority:-650}],_="(orientation: portrait) and (min-width: 600px) and (max-width: 839.9px)",P="(orientation: landscape) and (min-width: 960px) and (max-width: 1279.9px)",w="(orientation: portrait) and (min-width: 840px)",E="(orientation: landscape) and (min-width: 1280px)",k={HANDSET:"(orientation: portrait) and (max-width: 599.9px), (orientation: landscape) and (max-width: 959.9px)",TABLET:`${_} , ${P}`,WEB:`${w}, ${E} `,HANDSET_PORTRAIT:"(orientation: portrait) and (max-width: 599.9px)",TABLET_PORTRAIT:_+" ",WEB_PORTRAIT:""+w,HANDSET_LANDSCAPE:"(orientation: landscape) and (max-width: 959.9px)]",TABLET_LANDSCAPE:""+P,WEB_LANDSCAPE:""+E},I=[{alias:"handset",priority:2e3,mediaQuery:k.HANDSET},{alias:"handset.landscape",priority:2e3,mediaQuery:k.HANDSET_LANDSCAPE},{alias:"handset.portrait",priority:2e3,mediaQuery:k.HANDSET_PORTRAIT},{alias:"tablet",priority:2100,mediaQuery:k.TABLET},{alias:"tablet.landscape",priority:2100,mediaQuery:k.TABLET},{alias:"tablet.portrait",priority:2100,mediaQuery:k.TABLET_PORTRAIT},{alias:"web",priority:2200,mediaQuery:k.WEB,overlapping:!0},{alias:"web.landscape",priority:2200,mediaQuery:k.WEB_LANDSCAPE,overlapping:!0},{alias:"web.portrait",priority:2200,mediaQuery:k.WEB_PORTRAIT,overlapping:!0}],T=/(\.|-|_)/g;function A(e){let t=e.length>0?e.charAt(0):"",n=e.length>1?e.slice(1):"";return t.toUpperCase()+n}const V=new i.r("Token (@angular/flex-layout) Breakpoints",{providedIn:"root",factory:()=>{const e=Object(i.V)(C),t=Object(i.V)(b),n=[].concat.apply([],(e||[]).map(e=>Array.isArray(e)?e:[e]));return function(e,t=[]){const n={};return e.forEach(e=>{n[e.alias]=e}),t.forEach(e=>{n[e.alias]?function(e,...t){if(null==e)throw TypeError("Cannot convert undefined or null to object");for(let n of t)if(null!=n)for(let t in n)n.hasOwnProperty(t)&&(e[t]=n[t])}(n[e.alias],e):n[e.alias]=e}),(i=Object.keys(n).map(e=>n[e])).forEach(e=>{e.suffix||(e.suffix=e.alias.replace(T,"|").split("|").map(A).join(""),e.overlapping=!!e.overlapping)}),i;var i}((t.disableDefaultBps?[]:x).concat(t.addOrientationBps?I:[]),n)}});function R(e,t){return(t&&t.priority||0)-(e&&e.priority||0)}function L(e,t){return(e.priority||0)-(t.priority||0)}let N=(()=>{class e{constructor(e){this.findByMap=new Map,this.items=[...e].sort(L)}findByAlias(e){return e?this.findWithPredicate(e,t=>t.alias==e):null}findByQuery(e){return this.findWithPredicate(e,t=>t.mediaQuery==e)}get overlappings(){return this.items.filter(e=>1==e.overlapping)}get aliases(){return this.items.map(e=>e.alias)}get suffixes(){return this.items.map(e=>e.suffix?e.suffix:"")}findWithPredicate(e,t){let n=this.findByMap.get(e);return n||(n=this.items.find(t)||null,this.findByMap.set(e,n)),n||null}}return e.\u0275fac=function(t){return new(t||e)(i.ac(V))},e.\u0275prov=Object(i.Mb)({factory:function(){return new e(Object(i.ac)(V))},token:e,providedIn:"root"}),e})(),D=(()=>{class e{constructor(e,t,n){this._zone=e,this._platformId=t,this._document=n,this.source=new r.a(new p(!0)),this.registry=new Map,this._observable$=this.source.asObservable()}get activations(){const e=[];return this.registry.forEach((t,n)=>{t.matches&&e.push(n)}),e}isActive(e){const t=this.registry.get(e);return!!t&&t.matches}observe(e,t=!1){if(e&&e.length){const n=this._observable$.pipe(Object(l.a)(n=>!t||e.indexOf(n.mediaQuery)>-1)),i=new a.a(t=>{const n=this.registerQuery(e);if(n.length){const e=n.pop();n.forEach(e=>{t.next(e)}),this.source.next(e)}t.complete()});return Object(c.a)(i,n)}return this._observable$}registerQuery(e){const t=Array.isArray(e)?e:[e],n=[];return function(e,t){const n=e.filter(e=>!j[e]);if(n.length>0){const e=n.join(", ");try{const i=t.createElement("style");i.setAttribute("type","text/css"),i.styleSheet||i.appendChild(t.createTextNode(`\n/*\n  @angular/flex-layout - workaround for possible browser quirk with mediaQuery listeners\n  see http://bit.ly/2sd4HMP\n*/\n@media ${e} {.fx-query-test{ }}\n`)),t.head.appendChild(i),n.forEach(e=>j[e]=i)}catch(i){console.error(i)}}}(t,this._document),t.forEach(e=>{let t=this.registry.get(e);t||(t=this.buildMQL(e),t.addListener(t=>{this._zone.run(()=>this.source.next(new p(t.matches,e)))}),this.registry.set(e,t)),t.matches&&n.push(new p(!0,e))}),n}buildMQL(e){return function(e,t){return t&&window.matchMedia("all").addListener?window.matchMedia(e):{matches:"all"===e||""===e,media:e,addListener:()=>{},removeListener:()=>{}}}(e,Object(o.I)(this._platformId))}}return e.\u0275fac=function(t){return new(t||e)(i.ac(i.A),i.ac(i.C),i.ac(o.e))},e.\u0275prov=Object(i.Mb)({factory:function(){return new e(Object(i.ac)(i.A),Object(i.ac)(i.C),Object(i.ac)(o.e))},token:e,providedIn:"root"}),e})();const j={},U={alias:"print",mediaQuery:"print",priority:1e3};let W=(()=>{class e{constructor(e,t,n){this.breakpoints=e,this.layoutConfig=t,this._document=n,this.registeredBeforeAfterPrintHooks=!1,this.isPrintingBeforeAfterEvent=!1,this.isPrinting=!1,this.queue=new B,this.deactivations=[]}withPrintQuery(e){return[...e,"print"]}isPrintEvent(e){return e.mediaQuery.startsWith("print")}get printAlias(){return this.layoutConfig.printWithBreakpoints||[]}get printBreakPoints(){return this.printAlias.map(e=>this.breakpoints.findByAlias(e)).filter(e=>null!==e)}getEventBreakpoints({mediaQuery:e}){const t=this.breakpoints.findByQuery(e);return(t?[...this.printBreakPoints,t]:this.printBreakPoints).sort(R)}updateEvent(e){let t=this.breakpoints.findByQuery(e.mediaQuery);return this.isPrintEvent(e)&&(t=this.getEventBreakpoints(e)[0],e.mediaQuery=t?t.mediaQuery:""),O(e,t)}registerBeforeAfterPrintHooks(e){this._document.defaultView&&!this.registeredBeforeAfterPrintHooks&&(this.registeredBeforeAfterPrintHooks=!0,this._document.defaultView.addEventListener("beforeprint",()=>{this.isPrinting||(this.isPrintingBeforeAfterEvent=!0,this.startPrinting(e,this.getEventBreakpoints(new p(!0,"print"))),e.updateStyles())}),this._document.defaultView.addEventListener("afterprint",()=>{this.isPrintingBeforeAfterEvent=!1,this.isPrinting&&(this.stopPrinting(e),e.updateStyles())}))}interceptEvents(e){return this.registerBeforeAfterPrintHooks(e),t=>{this.isPrintEvent(t)?t.matches&&!this.isPrinting?(this.startPrinting(e,this.getEventBreakpoints(t)),e.updateStyles()):t.matches||!this.isPrinting||this.isPrintingBeforeAfterEvent||(this.stopPrinting(e),e.updateStyles()):this.collectActivations(t)}}blockPropagation(){return e=>!(this.isPrinting||this.isPrintEvent(e))}startPrinting(e,t){this.isPrinting=!0,e.activatedBreakpoints=this.queue.addPrintBreakpoints(t)}stopPrinting(e){e.activatedBreakpoints=this.deactivations,this.deactivations=[],this.queue.clear(),this.isPrinting=!1}collectActivations(e){if(!this.isPrinting||this.isPrintingBeforeAfterEvent)if(e.matches)this.isPrintingBeforeAfterEvent||(this.deactivations=[]);else{const t=this.breakpoints.findByQuery(e.mediaQuery);t&&(this.deactivations.push(t),this.deactivations.sort(R))}}}return e.\u0275fac=function(t){return new(t||e)(i.ac(N),i.ac(b),i.ac(o.e))},e.\u0275prov=Object(i.Mb)({factory:function(){return new e(Object(i.ac)(N),Object(i.ac)(b),Object(i.ac)(o.e))},token:e,providedIn:"root"}),e})();class B{constructor(){this.printBreakpoints=[]}addPrintBreakpoints(e){return e.push(U),e.sort(R),e.forEach(e=>this.addBreakpoint(e)),this.printBreakpoints}addBreakpoint(e){e&&void 0===this.printBreakpoints.find(t=>t.mediaQuery===e.mediaQuery)&&(this.printBreakpoints=function(e){return!!e&&e.mediaQuery.startsWith("print")}(e)?[e,...this.printBreakpoints]:[...this.printBreakpoints,e])}clear(){this.printBreakpoints=[]}}function F(e){for(let t in e){let n=e[t]||"";switch(t){case"display":e.display="flex"===n?["-webkit-flex","flex"]:"inline-flex"===n?["-webkit-inline-flex","inline-flex"]:n;break;case"align-items":case"align-self":case"align-content":case"flex":case"flex-basis":case"flex-flow":case"flex-grow":case"flex-shrink":case"flex-wrap":case"justify-content":e["-webkit-"+t]=n;break;case"flex-direction":n=n||"row",e["-webkit-flex-direction"]=n,e["flex-direction"]=n;break;case"order":e.order=e["-webkit-"+t]=isNaN(+n)?"0":n}}return e}let z=(()=>{class e{constructor(e,t,n,i){this._serverStylesheet=e,this._serverModuleLoaded=t,this._platformId=n,this.layoutConfig=i}applyStyleToElement(e,t,n=null){let i={};"string"==typeof t&&(i[t]=n,t=i),i=this.layoutConfig.disableVendorPrefixes?t:F(t),this._applyMultiValueStyleToElement(i,e)}applyStyleToElements(e,t=[]){const n=this.layoutConfig.disableVendorPrefixes?e:F(e);t.forEach(e=>{this._applyMultiValueStyleToElement(n,e)})}getFlowDirection(e){let t=this.lookupStyle(e,"flex-direction");return[t||"row",this.lookupInlineStyle(e,"flex-direction")||Object(o.J)(this._platformId)&&this._serverModuleLoaded?t:""]}lookupAttributeValue(e,t){return e.getAttribute(t)||""}lookupInlineStyle(e,t){return Object(o.I)(this._platformId)?e.style.getPropertyValue(t):this._getServerStyle(e,t)}lookupStyle(e,t,n=!1){let i="";return e&&((i=this.lookupInlineStyle(e,t))||(Object(o.I)(this._platformId)?n||(i=getComputedStyle(e).getPropertyValue(t)):this._serverModuleLoaded&&(i=this._serverStylesheet.getStyleForElement(e,t)))),i?i.trim():""}_applyMultiValueStyleToElement(e,t){Object.keys(e).sort().forEach(n=>{const i=e[n],s=Array.isArray(i)?i:[i];s.sort();for(let e of s)e=e?e+"":"",Object(o.I)(this._platformId)||!this._serverModuleLoaded?Object(o.I)(this._platformId)?t.style.setProperty(n,e):this._setServerStyle(t,n,e):this._serverStylesheet.addStyleToElement(t,n,e)})}_setServerStyle(e,t,n){t=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();const i=this._readStyleAttribute(e);i[t]=n||"",this._writeStyleAttribute(e,i)}_getServerStyle(e,t){return this._readStyleAttribute(e)[t]||""}_readStyleAttribute(e){const t={},n=e.getAttribute("style");if(n){const e=n.split(/;+/g);for(let n=0;n<e.length;n++){const i=e[n].trim();if(i.length>0){const e=i.indexOf(":");if(-1===e)throw new Error("Invalid CSS style: "+i);t[i.substr(0,e).trim()]=i.substr(e+1).trim()}}}return t}_writeStyleAttribute(e,t){let n="";for(const i in t)t[i]&&(n+=i+":"+t[i]+";");e.setAttribute("style",n)}}return e.\u0275fac=function(t){return new(t||e)(i.ac(m),i.ac(v),i.ac(i.C),i.ac(b))},e.\u0275prov=Object(i.Mb)({factory:function(){return new e(Object(i.ac)(m),Object(i.ac)(v),Object(i.ac)(i.C),Object(i.ac)(b))},token:e,providedIn:"root"}),e})();class G{constructor(){this.shouldCache=!0}sideEffect(e,t,n){}}function Q(e,t="1",n="1"){let i=[t,n,e],o=e.indexOf("calc");if(o>0){i[2]=K(e.substring(o).trim());let t=e.substr(0,o).trim().split(" ");2==t.length&&(i[0]=t[0],i[1]=t[1])}else if(0==o)i[2]=K(e.trim());else{let o=e.split(" ");i=3===o.length?o:[t,n,e]}return i}function K(e){return e.replace(/[\s]/g,"").replace(/[\/\*\+\-]/g," $& ")}let H=(()=>{class e{constructor(e,t,n){this.matchMedia=e,this.breakpoints=t,this.hook=n,this.activatedBreakpoints=[],this.elementMap=new Map,this.elementKeyMap=new WeakMap,this.watcherMap=new WeakMap,this.updateMap=new WeakMap,this.clearMap=new WeakMap,this.subject=new s.a,this.observeActivations()}get activatedAlias(){return this.activatedBreakpoints[0]?this.activatedBreakpoints[0].alias:""}onMediaChange(e){const t=this.findByQuery(e.mediaQuery);t&&((e=O(e,t)).matches&&-1===this.activatedBreakpoints.indexOf(t)?(this.activatedBreakpoints.push(t),this.activatedBreakpoints.sort(R),this.updateStyles()):e.matches||-1===this.activatedBreakpoints.indexOf(t)||(this.activatedBreakpoints.splice(this.activatedBreakpoints.indexOf(t),1),this.activatedBreakpoints.sort(R),this.updateStyles()))}init(e,t,n,i,o=[]){q(this.updateMap,e,t,n),q(this.clearMap,e,t,i),this.buildElementKeyMap(e,t),this.watchExtraTriggers(e,t,o)}getValue(e,t,n){const i=this.elementMap.get(e);if(i){const e=void 0!==n?i.get(n):this.getActivatedValues(i,t);if(e)return e.get(t)}}hasValue(e,t){const n=this.elementMap.get(e);if(n){const e=this.getActivatedValues(n,t);if(e)return void 0!==e.get(t)||!1}return!1}setValue(e,t,n,i){let o=this.elementMap.get(e);if(o){const s=(o.get(i)||new Map).set(t,n);o.set(i,s),this.elementMap.set(e,o)}else o=(new Map).set(i,(new Map).set(t,n)),this.elementMap.set(e,o);const s=this.getValue(e,t);void 0!==s&&this.updateElement(e,t,s)}trackValue(e,t){return this.subject.asObservable().pipe(Object(l.a)(n=>n.element===e&&n.key===t))}updateStyles(){this.elementMap.forEach((e,t)=>{const n=new Set(this.elementKeyMap.get(t));let i=this.getActivatedValues(e);i&&i.forEach((e,i)=>{this.updateElement(t,i,e),n.delete(i)}),n.forEach(n=>{if(i=this.getActivatedValues(e,n),i){const e=i.get(n);this.updateElement(t,n,e)}else this.clearElement(t,n)})})}clearElement(e,t){const n=this.clearMap.get(e);if(n){const i=n.get(t);i&&(i(),this.subject.next({element:e,key:t,value:""}))}}updateElement(e,t,n){const i=this.updateMap.get(e);if(i){const o=i.get(t);o&&(o(n),this.subject.next({element:e,key:t,value:n}))}}releaseElement(e){const t=this.watcherMap.get(e);t&&(t.forEach(e=>e.unsubscribe()),this.watcherMap.delete(e));const n=this.elementMap.get(e);n&&(n.forEach((e,t)=>n.delete(t)),this.elementMap.delete(e))}triggerUpdate(e,t){const n=this.elementMap.get(e);if(n){const i=this.getActivatedValues(n,t);i&&(t?this.updateElement(e,t,i.get(t)):i.forEach((t,n)=>this.updateElement(e,n,t)))}}buildElementKeyMap(e,t){let n=this.elementKeyMap.get(e);n||(n=new Set,this.elementKeyMap.set(e,n)),n.add(t)}watchExtraTriggers(e,t,n){if(n&&n.length){let i=this.watcherMap.get(e);if(i||(i=new Map,this.watcherMap.set(e,i)),!i.get(t)){const o=Object(c.a)(...n).subscribe(()=>{const n=this.getValue(e,t);this.updateElement(e,t,n)});i.set(t,o)}}}findByQuery(e){return this.breakpoints.findByQuery(e)}getActivatedValues(e,t){for(let i=0;i<this.activatedBreakpoints.length;i++){const n=e.get(this.activatedBreakpoints[i].alias);if(n&&(void 0===t||n.has(t)))return n}const n=e.get("");return void 0===t||n&&n.has(t)?n:void 0}observeActivations(){const e=this.breakpoints.items.map(e=>e.mediaQuery);this.matchMedia.observe(this.hook.withPrintQuery(e)).pipe(Object(d.a)(this.hook.interceptEvents(this)),Object(l.a)(this.hook.blockPropagation())).subscribe(this.onMediaChange.bind(this))}}return e.\u0275fac=function(t){return new(t||e)(i.ac(D),i.ac(N),i.ac(W))},e.\u0275prov=Object(i.Mb)({factory:function(){return new e(Object(i.ac)(D),Object(i.ac)(N),Object(i.ac)(W))},token:e,providedIn:"root"}),e})();function q(e,t,n,i){if(void 0!==i){let o=e.get(t);o||(o=new Map,e.set(t,o)),o.set(n,i)}}},pLL0:function(e,t){t.pack=function(e){throw new TypeError("Not yet implemented")},t.unpack=function(e){throw new TypeError("Not yet implemented")}},rUL0:function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0;var s=function(e){function t(t,n,i,o,s){var r=e.call(this,!1,t,n)||this;return r.id=i,o!==i&&(r.name=o),r.reason=s,r}return o(t,e),t.prototype.callDefaultBehavior=function(){},t}(n("hzOQ").Event);t.RecordingEvent=s},ryRr:function(e,t,n){"use strict";t.__esModule=!0;var i=n("DPKQ"),o=n("9m68").OpenViduLogger.getInstance(),s=function(){function e(e,t){this.session=e,this.disposed=!1;var n="'Connection' created ";t?(n+="(remote) with 'connectionId' ["+t.id+"]",this.options=t,this.connectionId=t.id,this.creationTime=t.createdAt,t.metadata&&(this.data=t.metadata),t.streams&&this.initRemoteStreams(t.streams)):n+="(local)",o.info(n)}return e.prototype.sendIceCandidate=function(e){o.debug((this.stream.outboundStreamOpts?"Local":"Remote")+"candidate for"+this.connectionId,e),this.session.openvidu.sendRequest("onIceCandidate",{endpointName:this.connectionId,candidate:e.candidate,sdpMid:e.sdpMid,sdpMLineIndex:e.sdpMLineIndex},(function(e,t){e&&o.error("Error sending ICE candidate: "+JSON.stringify(e))}))},e.prototype.initRemoteStreams=function(e){var t=this;e.forEach((function(e){var n={id:e.id,createdAt:e.createdAt,connection:t,hasAudio:e.hasAudio,hasVideo:e.hasVideo,audioActive:e.audioActive,videoActive:e.videoActive,typeOfVideo:e.typeOfVideo,frameRate:e.frameRate,videoDimensions:e.videoDimensions?JSON.parse(e.videoDimensions):void 0,filter:e.filter?e.filter:void 0},o=new i.Stream(t.session,n);t.addStream(o)})),o.info("Remote 'Connection' with 'connectionId' ["+this.connectionId+"] is now configured for receiving Streams with options: ",this.stream.inboundStreamOpts)},e.prototype.addStream=function(e){e.connection=this,this.stream=e},e.prototype.removeStream=function(e){delete this.stream},e.prototype.dispose=function(){this.stream&&delete this.stream,this.disposed=!0},e}();t.Connection=s},suHS:function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0;var s=function(e){function t(t,n,i,o){var s=e.call(this,!1,t,"signal")||this;return n&&(s.type="signal:"+n),s.data=i,s.from=o,s}return o(t,e),t.prototype.callDefaultBehavior=function(){},t}(n("hzOQ").Event);t.SignalEvent=s},"t/6/":function(e,t,n){"use strict";t.__esModule=!0,t.start=t.run=t.TOKENS=t.State=void 0;var i=n("FlKs"),o=n("dlaP"),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(o),r="aaa|aarp|abarth|abb|abbott|abbvie|abc|able|abogado|abudhabi|ac|academy|accenture|accountant|accountants|aco|active|actor|ad|adac|ads|adult|ae|aeg|aero|aetna|af|afamilycompany|afl|africa|ag|agakhan|agency|ai|aig|aigo|airbus|airforce|airtel|akdn|al|alfaromeo|alibaba|alipay|allfinanz|allstate|ally|alsace|alstom|am|americanexpress|americanfamily|amex|amfam|amica|amsterdam|analytics|android|anquan|anz|ao|aol|apartments|app|apple|aq|aquarelle|ar|arab|aramco|archi|army|arpa|art|arte|as|asda|asia|associates|at|athleta|attorney|au|auction|audi|audible|audio|auspost|author|auto|autos|avianca|aw|aws|ax|axa|az|azure|ba|baby|baidu|banamex|bananarepublic|band|bank|bar|barcelona|barclaycard|barclays|barefoot|bargains|baseball|basketball|bauhaus|bayern|bb|bbc|bbt|bbva|bcg|bcn|bd|be|beats|beauty|beer|bentley|berlin|best|bestbuy|bet|bf|bg|bh|bharti|bi|bible|bid|bike|bing|bingo|bio|biz|bj|black|blackfriday|blanco|blockbuster|blog|bloomberg|blue|bm|bms|bmw|bn|bnl|bnpparibas|bo|boats|boehringer|bofa|bom|bond|boo|book|booking|boots|bosch|bostik|boston|bot|boutique|box|br|bradesco|bridgestone|broadway|broker|brother|brussels|bs|bt|budapest|bugatti|build|builders|business|buy|buzz|bv|bw|by|bz|bzh|ca|cab|cafe|cal|call|calvinklein|cam|camera|camp|cancerresearch|canon|capetown|capital|capitalone|car|caravan|cards|care|career|careers|cars|cartier|casa|case|caseih|cash|casino|cat|catering|catholic|cba|cbn|cbre|cbs|cc|cd|ceb|center|ceo|cern|cf|cfa|cfd|cg|ch|chanel|channel|chase|chat|cheap|chintai|chloe|christmas|chrome|chrysler|church|ci|cipriani|circle|cisco|citadel|citi|citic|city|cityeats|ck|cl|claims|cleaning|click|clinic|clinique|clothing|cloud|club|clubmed|cm|cn|co|coach|codes|coffee|college|cologne|com|comcast|commbank|community|company|compare|computer|comsec|condos|construction|consulting|contact|contractors|cooking|cookingchannel|cool|coop|corsica|country|coupon|coupons|courses|cr|credit|creditcard|creditunion|cricket|crown|crs|cruise|cruises|csc|cu|cuisinella|cv|cw|cx|cy|cymru|cyou|cz|dabur|dad|dance|data|date|dating|datsun|day|dclk|dds|de|deal|dealer|deals|degree|delivery|dell|deloitte|delta|democrat|dental|dentist|desi|design|dev|dhl|diamonds|diet|digital|direct|directory|discount|discover|dish|diy|dj|dk|dm|dnp|do|docs|doctor|dodge|dog|doha|domains|dot|download|drive|dtv|dubai|duck|dunlop|duns|dupont|durban|dvag|dvr|dz|earth|eat|ec|eco|edeka|edu|education|ee|eg|email|emerck|energy|engineer|engineering|enterprises|epost|epson|equipment|er|ericsson|erni|es|esq|estate|esurance|et|etisalat|eu|eurovision|eus|events|everbank|exchange|expert|exposed|express|extraspace|fage|fail|fairwinds|faith|family|fan|fans|farm|farmers|fashion|fast|fedex|feedback|ferrari|ferrero|fi|fiat|fidelity|fido|film|final|finance|financial|fire|firestone|firmdale|fish|fishing|fit|fitness|fj|fk|flickr|flights|flir|florist|flowers|fly|fm|fo|foo|food|foodnetwork|football|ford|forex|forsale|forum|foundation|fox|fr|free|fresenius|frl|frogans|frontdoor|frontier|ftr|fujitsu|fujixerox|fun|fund|furniture|futbol|fyi|ga|gal|gallery|gallo|gallup|game|games|gap|garden|gb|gbiz|gd|gdn|ge|gea|gent|genting|george|gf|gg|ggee|gh|gi|gift|gifts|gives|giving|gl|glade|glass|gle|global|globo|gm|gmail|gmbh|gmo|gmx|gn|godaddy|gold|goldpoint|golf|goo|goodhands|goodyear|goog|google|gop|got|gov|gp|gq|gr|grainger|graphics|gratis|green|gripe|grocery|group|gs|gt|gu|guardian|gucci|guge|guide|guitars|guru|gw|gy|hair|hamburg|hangout|haus|hbo|hdfc|hdfcbank|health|healthcare|help|helsinki|here|hermes|hgtv|hiphop|hisamitsu|hitachi|hiv|hk|hkt|hm|hn|hockey|holdings|holiday|homedepot|homegoods|homes|homesense|honda|honeywell|horse|hospital|host|hosting|hot|hoteles|hotels|hotmail|house|how|hr|hsbc|ht|htc|hu|hughes|hyatt|hyundai|ibm|icbc|ice|icu|id|ie|ieee|ifm|ikano|il|im|imamat|imdb|immo|immobilien|in|industries|infiniti|info|ing|ink|institute|insurance|insure|int|intel|international|intuit|investments|io|ipiranga|iq|ir|irish|is|iselect|ismaili|ist|istanbul|it|itau|itv|iveco|iwc|jaguar|java|jcb|jcp|je|jeep|jetzt|jewelry|jio|jlc|jll|jm|jmp|jnj|jo|jobs|joburg|jot|joy|jp|jpmorgan|jprs|juegos|juniper|kaufen|kddi|ke|kerryhotels|kerrylogistics|kerryproperties|kfh|kg|kh|ki|kia|kim|kinder|kindle|kitchen|kiwi|km|kn|koeln|komatsu|kosher|kp|kpmg|kpn|kr|krd|kred|kuokgroup|kw|ky|kyoto|kz|la|lacaixa|ladbrokes|lamborghini|lamer|lancaster|lancia|lancome|land|landrover|lanxess|lasalle|lat|latino|latrobe|law|lawyer|lb|lc|lds|lease|leclerc|lefrak|legal|lego|lexus|lgbt|li|liaison|lidl|life|lifeinsurance|lifestyle|lighting|like|lilly|limited|limo|lincoln|linde|link|lipsy|live|living|lixil|lk|loan|loans|locker|locus|loft|lol|london|lotte|lotto|love|lpl|lplfinancial|lr|ls|lt|ltd|ltda|lu|lundbeck|lupin|luxe|luxury|lv|ly|ma|macys|madrid|maif|maison|makeup|man|management|mango|map|market|marketing|markets|marriott|marshalls|maserati|mattel|mba|mc|mckinsey|md|me|med|media|meet|melbourne|meme|memorial|men|menu|meo|merckmsd|metlife|mg|mh|miami|microsoft|mil|mini|mint|mit|mitsubishi|mk|ml|mlb|mls|mm|mma|mn|mo|mobi|mobile|mobily|moda|moe|moi|mom|monash|money|monster|mopar|mormon|mortgage|moscow|moto|motorcycles|mov|movie|movistar|mp|mq|mr|ms|msd|mt|mtn|mtr|mu|museum|mutual|mv|mw|mx|my|mz|na|nab|nadex|nagoya|name|nationwide|natura|navy|nba|nc|ne|nec|net|netbank|netflix|network|neustar|new|newholland|news|next|nextdirect|nexus|nf|nfl|ng|ngo|nhk|ni|nico|nike|nikon|ninja|nissan|nissay|nl|no|nokia|northwesternmutual|norton|now|nowruz|nowtv|np|nr|nra|nrw|ntt|nu|nyc|nz|obi|observer|off|office|okinawa|olayan|olayangroup|oldnavy|ollo|om|omega|one|ong|onl|online|onyourside|ooo|open|oracle|orange|org|organic|origins|osaka|otsuka|ott|ovh|pa|page|panasonic|panerai|paris|pars|partners|parts|party|passagens|pay|pccw|pe|pet|pf|pfizer|pg|ph|pharmacy|phd|philips|phone|photo|photography|photos|physio|piaget|pics|pictet|pictures|pid|pin|ping|pink|pioneer|pizza|pk|pl|place|play|playstation|plumbing|plus|pm|pn|pnc|pohl|poker|politie|porn|post|pr|pramerica|praxi|press|prime|pro|prod|productions|prof|progressive|promo|properties|property|protection|pru|prudential|ps|pt|pub|pw|pwc|py|qa|qpon|quebec|quest|qvc|racing|radio|raid|re|read|realestate|realtor|realty|recipes|red|redstone|redumbrella|rehab|reise|reisen|reit|reliance|ren|rent|rentals|repair|report|republican|rest|restaurant|review|reviews|rexroth|rich|richardli|ricoh|rightathome|ril|rio|rip|rmit|ro|rocher|rocks|rodeo|rogers|room|rs|rsvp|ru|rugby|ruhr|run|rw|rwe|ryukyu|sa|saarland|safe|safety|sakura|sale|salon|samsclub|samsung|sandvik|sandvikcoromant|sanofi|sap|sapo|sarl|sas|save|saxo|sb|sbi|sbs|sc|sca|scb|schaeffler|schmidt|scholarships|school|schule|schwarz|science|scjohnson|scor|scot|sd|se|search|seat|secure|security|seek|select|sener|services|ses|seven|sew|sex|sexy|sfr|sg|sh|shangrila|sharp|shaw|shell|shia|shiksha|shoes|shop|shopping|shouji|show|showtime|shriram|si|silk|sina|singles|site|sj|sk|ski|skin|sky|skype|sl|sling|sm|smart|smile|sn|sncf|so|soccer|social|softbank|software|sohu|solar|solutions|song|sony|soy|space|spiegel|spot|spreadbetting|sr|srl|srt|st|stada|staples|star|starhub|statebank|statefarm|statoil|stc|stcgroup|stockholm|storage|store|stream|studio|study|style|su|sucks|supplies|supply|support|surf|surgery|suzuki|sv|swatch|swiftcover|swiss|sx|sy|sydney|symantec|systems|sz|tab|taipei|talk|taobao|target|tatamotors|tatar|tattoo|tax|taxi|tc|tci|td|tdk|team|tech|technology|tel|telecity|telefonica|temasek|tennis|teva|tf|tg|th|thd|theater|theatre|tiaa|tickets|tienda|tiffany|tips|tires|tirol|tj|tjmaxx|tjx|tk|tkmaxx|tl|tm|tmall|tn|to|today|tokyo|tools|top|toray|toshiba|total|tours|town|toyota|toys|tr|trade|trading|training|travel|travelchannel|travelers|travelersinsurance|trust|trv|tt|tube|tui|tunes|tushu|tv|tvs|tw|tz|ua|ubank|ubs|uconnect|ug|uk|unicom|university|uno|uol|ups|us|uy|uz|va|vacations|vana|vanguard|vc|ve|vegas|ventures|verisign|versicherung|vet|vg|vi|viajes|video|vig|viking|villas|vin|vip|virgin|visa|vision|vista|vistaprint|viva|vivo|vlaanderen|vn|vodka|volkswagen|volvo|vote|voting|voto|voyage|vu|vuelos|wales|walmart|walter|wang|wanggou|warman|watch|watches|weather|weatherchannel|webcam|weber|website|wed|wedding|weibo|weir|wf|whoswho|wien|wiki|williamhill|win|windows|wine|winners|wme|wolterskluwer|woodside|work|works|world|wow|ws|wtc|wtf|xbox|xerox|xfinity|xihuan|xin|xn--11b4c3d|xn--1ck2e1b|xn--1qqw23a|xn--2scrj9c|xn--30rr7y|xn--3bst00m|xn--3ds443g|xn--3e0b707e|xn--3hcrj9c|xn--3oq18vl8pn36a|xn--3pxu8k|xn--42c2d9a|xn--45br5cyl|xn--45brj9c|xn--45q11c|xn--4gbrim|xn--54b7fta0cc|xn--55qw42g|xn--55qx5d|xn--5su34j936bgsg|xn--5tzm5g|xn--6frz82g|xn--6qq986b3xl|xn--80adxhks|xn--80ao21a|xn--80aqecdr1a|xn--80asehdb|xn--80aswg|xn--8y0a063a|xn--90a3ac|xn--90ae|xn--90ais|xn--9dbq2a|xn--9et52u|xn--9krt00a|xn--b4w605ferd|xn--bck1b9a5dre4c|xn--c1avg|xn--c2br7g|xn--cck2b3b|xn--cg4bki|xn--clchc0ea0b2g2a9gcd|xn--czr694b|xn--czrs0t|xn--czru2d|xn--d1acj3b|xn--d1alf|xn--e1a4c|xn--eckvdtc9d|xn--efvy88h|xn--estv75g|xn--fct429k|xn--fhbei|xn--fiq228c5hs|xn--fiq64b|xn--fiqs8s|xn--fiqz9s|xn--fjq720a|xn--flw351e|xn--fpcrj9c3d|xn--fzc2c9e2c|xn--fzys8d69uvgm|xn--g2xx48c|xn--gckr3f0f|xn--gecrj9c|xn--gk3at1e|xn--h2breg3eve|xn--h2brj9c|xn--h2brj9c8c|xn--hxt814e|xn--i1b6b1a6a2e|xn--imr513n|xn--io0a7i|xn--j1aef|xn--j1amh|xn--j6w193g|xn--jlq61u9w7b|xn--jvr189m|xn--kcrx77d1x4a|xn--kprw13d|xn--kpry57d|xn--kpu716f|xn--kput3i|xn--l1acc|xn--lgbbat1ad8j|xn--mgb9awbf|xn--mgba3a3ejt|xn--mgba3a4f16a|xn--mgba7c0bbn0a|xn--mgbaakc7dvf|xn--mgbaam7a8h|xn--mgbab2bd|xn--mgbai9azgqp6j|xn--mgbayh7gpa|xn--mgbb9fbpob|xn--mgbbh1a|xn--mgbbh1a71e|xn--mgbc0a9azcg|xn--mgbca7dzdo|xn--mgberp4a5d4ar|xn--mgbgu82a|xn--mgbi4ecexp|xn--mgbpl2fh|xn--mgbt3dhd|xn--mgbtx2b|xn--mgbx4cd0ab|xn--mix891f|xn--mk1bu44c|xn--mxtq1m|xn--ngbc5azd|xn--ngbe9e0a|xn--ngbrx|xn--node|xn--nqv7f|xn--nqv7fs00ema|xn--nyqy26a|xn--o3cw4h|xn--ogbpf8fl|xn--p1acf|xn--p1ai|xn--pbt977c|xn--pgbs0dh|xn--pssy2u|xn--q9jyb4c|xn--qcka1pmc|xn--qxam|xn--rhqv96g|xn--rovu88b|xn--rvc1e0am3e|xn--s9brj9c|xn--ses554g|xn--t60b56a|xn--tckwe|xn--tiq49xqyj|xn--unup4y|xn--vermgensberater-ctb|xn--vermgensberatung-pwb|xn--vhquv|xn--vuq861b|xn--w4r85el8fhu5dnra|xn--w4rs40l|xn--wgbh1c|xn--wgbl6a|xn--xhq521b|xn--xkc2al3hye2a|xn--xkc2dl3a5ee0h|xn--y9a3aq|xn--yfro4i67o|xn--ygbi2ammx|xn--zfr164b|xperia|xxx|xyz|yachts|yahoo|yamaxun|yandex|ye|yodobashi|yoga|yokohama|you|youtube|yt|yun|za|zappos|zara|zero|zip|zippo|zm|zone|zuerich|zw".split("|"),a="0123456789".split(""),c="0123456789abcdefghijklmnopqrstuvwxyz".split(""),l=[" ","\f","\r","\t","\v","\xa0","\u1680","\u180e"],d=[],u=function(e){return new i.CharacterState(e)},g=u(),h=u(o.NUM),p=u(o.DOMAIN),m=u(),f=u(o.WS);g.on("@",u(o.AT)).on(".",u(o.DOT)).on("+",u(o.PLUS)).on("#",u(o.POUND)).on("?",u(o.QUERY)).on("/",u(o.SLASH)).on("_",u(o.UNDERSCORE)).on(":",u(o.COLON)).on("{",u(o.OPENBRACE)).on("[",u(o.OPENBRACKET)).on("<",u(o.OPENANGLEBRACKET)).on("(",u(o.OPENPAREN)).on("}",u(o.CLOSEBRACE)).on("]",u(o.CLOSEBRACKET)).on(">",u(o.CLOSEANGLEBRACKET)).on(")",u(o.CLOSEPAREN)).on("&",u(o.AMPERSAND)).on([",",";","!",'"',"'"],u(o.PUNCTUATION)),g.on("\n",u(o.NL)).on(l,f),f.on(l,f);for(var b=0;b<r.length;b++){var v=(0,i.stateify)(r[b],g,o.TLD,o.DOMAIN);d.push.apply(d,v)}var C=(0,i.stateify)("file",g,o.DOMAIN,o.DOMAIN),O=(0,i.stateify)("ftp",g,o.DOMAIN,o.DOMAIN),S=(0,i.stateify)("http",g,o.DOMAIN,o.DOMAIN),y=(0,i.stateify)("mailto",g,o.DOMAIN,o.DOMAIN);d.push.apply(d,C),d.push.apply(d,O),d.push.apply(d,S),d.push.apply(d,y);var M=C.pop(),x=O.pop(),_=S.pop(),P=y.pop(),w=u(o.DOMAIN),E=u(o.PROTOCOL),k=u(o.MAILTO);x.on("s",w).on(":",E),_.on("s",w).on(":",E),d.push(w),M.on(":",E),w.on(":",E),P.on(":",k);var I=(0,i.stateify)("localhost",g,o.LOCALHOST,o.DOMAIN);d.push.apply(d,I),g.on(a,h),h.on("-",m).on(a,h).on(c,p),p.on("-",m).on(c,p);for(var T=0;T<d.length;T++)d[T].on("-",m).on(c,p);m.on("-",m).on(a,p).on(c,p),g.defaultTransition=u(o.SYM);var A=g;t.State=i.CharacterState,t.TOKENS=s,t.run=function(e){for(var t=e.replace(/[A-Z]/g,(function(e){return e.toLowerCase()})),n=e.length,i=[],o=0;o<n;){for(var s=g,r=null,a=0,c=null,l=-1;o<n&&(r=s.next(t[o]));)(s=r).accepts()?(l=0,c=s):l>=0&&l++,a++,o++;if(!(l<0)){o-=l,a-=l;var d=c.emit();i.push(new d(e.substr(o-a,a)))}}return i},t.start=A},tInm:function(e,t,n){"use strict";t.__esModule=!0;var i=n("Yn0Z"),o=n("bDgZ"),s=n("9m68").OpenViduLogger.getInstance(),r=function(){function e(e){this.stream=e,this.chunks=[],this.connectionId=this.stream.connection?this.stream.connection.connectionId:"default-connection",this.id=this.stream.streamId+"_"+this.connectionId+"_localrecord",this.state=i.LocalRecorderState.READY}return e.prototype.record=function(e){var t=this;return new Promise((function(n,o){try{if("undefined"==typeof MediaRecorder)throw s.error("MediaRecorder not supported on your browser. See compatibility in https://caniuse.com/#search=MediaRecorder"),Error("MediaRecorder not supported on your browser. See compatibility in https://caniuse.com/#search=MediaRecorder");if(t.state!==i.LocalRecorderState.READY)throw Error("'LocalRecord.record()' needs 'LocalRecord.state' to be 'READY' (current value: '"+t.state+"'). Call 'LocalRecorder.clean()' or init a new LocalRecorder before");s.log("Starting local recording of stream '"+t.stream.streamId+"' of connection '"+t.connectionId+"'");var r={};"function"==typeof MediaRecorder.isTypeSupported?e?(MediaRecorder.isTypeSupported(e)||o(new Error('mimeType "'+e+'" is not supported')),r={mimeType:e}):s.log("No mimeType parameter provided. Using default codecs"):s.warn("MediaRecorder#isTypeSupported is not supported. Using default codecs"),t.mediaRecorder=new MediaRecorder(t.stream.getMediaStream(),r),t.mediaRecorder.start(10)}catch(a){o(a)}t.mediaRecorder.ondataavailable=function(e){t.chunks.push(e.data)},t.mediaRecorder.onerror=function(e){s.error("MediaRecorder error: ",e)},t.mediaRecorder.onstart=function(){s.log("MediaRecorder started (state="+t.mediaRecorder.state+")")},t.mediaRecorder.onstop=function(){t.onStopDefault()},t.mediaRecorder.onpause=function(){s.log("MediaRecorder paused (state="+t.mediaRecorder.state+")")},t.mediaRecorder.onresume=function(){s.log("MediaRecorder resumed (state="+t.mediaRecorder.state+")")},t.mediaRecorder.onwarning=function(e){s.log("MediaRecorder warning: "+e)},t.state=i.LocalRecorderState.RECORDING,n()}))},e.prototype.stop=function(){var e=this;return new Promise((function(t,n){try{if(e.state===i.LocalRecorderState.READY||e.state===i.LocalRecorderState.FINISHED)throw Error("'LocalRecord.stop()' needs 'LocalRecord.state' to be 'RECORDING' or 'PAUSED' (current value: '"+e.state+"'). Call 'LocalRecorder.start()' before");e.mediaRecorder.onstop=function(){e.onStopDefault(),t()},e.mediaRecorder.stop()}catch(o){n(o)}}))},e.prototype.pause=function(){var e=this;return new Promise((function(t,n){try{e.state!==i.LocalRecorderState.RECORDING&&n(Error("'LocalRecord.pause()' needs 'LocalRecord.state' to be 'RECORDING' (current value: '"+e.state+"'). Call 'LocalRecorder.start()' or 'LocalRecorder.resume()' before")),e.mediaRecorder.pause(),e.state=i.LocalRecorderState.PAUSED}catch(o){n(o)}}))},e.prototype.resume=function(){var e=this;return new Promise((function(t,n){try{if(e.state!==i.LocalRecorderState.PAUSED)throw Error("'LocalRecord.resume()' needs 'LocalRecord.state' to be 'PAUSED' (current value: '"+e.state+"'). Call 'LocalRecorder.pause()' before");e.mediaRecorder.resume(),e.state=i.LocalRecorderState.RECORDING}catch(o){n(o)}}))},e.prototype.preview=function(e){if(this.state!==i.LocalRecorderState.FINISHED)throw Error("'LocalRecord.preview()' needs 'LocalRecord.state' to be 'FINISHED' (current value: '"+this.state+"'). Call 'LocalRecorder.stop()' before");if(this.videoPreview=document.createElement("video"),this.videoPreview.id=this.id,this.videoPreview.autoplay=!0,"Safari"===o.name&&this.videoPreview.setAttribute("playsinline","true"),"string"==typeof e){var t=document.getElementById(e);t&&(this.videoPreview=t.appendChild(this.videoPreview))}else this.videoPreview=e.appendChild(this.videoPreview);return this.videoPreview.src=this.videoPreviewSrc,this.videoPreview},e.prototype.clean=function(){var e=this,t=function(){delete e.blob,e.chunks=[],delete e.mediaRecorder,e.state=i.LocalRecorderState.READY};this.state===i.LocalRecorderState.RECORDING||this.state===i.LocalRecorderState.PAUSED?this.stop().then((function(){return t()})).catch((function(){return t()})):t()},e.prototype.download=function(){if(this.state!==i.LocalRecorderState.FINISHED)throw Error("'LocalRecord.download()' needs 'LocalRecord.state' to be 'FINISHED' (current value: '"+this.state+"'). Call 'LocalRecorder.stop()' before");var e=document.createElement("a");e.style.display="none",document.body.appendChild(e);var t=window.URL.createObjectURL(this.blob);e.href=t,e.download=this.id+".webm",e.click(),window.URL.revokeObjectURL(t),document.body.removeChild(e)},e.prototype.getBlob=function(){if(this.state!==i.LocalRecorderState.FINISHED)throw Error("Call 'LocalRecord.stop()' before getting Blob file");return this.blob},e.prototype.uploadAsBinary=function(e,t){var n=this;return new Promise((function(o,s){if(n.state!==i.LocalRecorderState.FINISHED)s(Error("'LocalRecord.uploadAsBinary()' needs 'LocalRecord.state' to be 'FINISHED' (current value: '"+n.state+"'). Call 'LocalRecorder.stop()' before"));else{var r=new XMLHttpRequest;if(r.open("POST",e,!0),"object"==typeof t)for(var a=0,c=Object.keys(t);a<c.length;a++){var l=c[a];r.setRequestHeader(l,t[l])}r.onreadystatechange=function(){4===r.readyState&&("2"===r.status.toString().charAt(0)?o(r.responseText):s(r.status))},r.send(n.blob)}}))},e.prototype.uploadAsMultipartfile=function(e,t){var n=this;return new Promise((function(o,s){if(n.state!==i.LocalRecorderState.FINISHED)s(Error("'LocalRecord.uploadAsMultipartfile()' needs 'LocalRecord.state' to be 'FINISHED' (current value: '"+n.state+"'). Call 'LocalRecorder.stop()' before"));else{var r=new XMLHttpRequest;if(r.open("POST",e,!0),"object"==typeof t)for(var a=0,c=Object.keys(t);a<c.length;a++){var l=c[a];r.setRequestHeader(l,t[l])}var d=new FormData;d.append("file",n.blob,n.id+".webm"),r.onreadystatechange=function(){4===r.readyState&&("2"===r.status.toString().charAt(0)?o(r.responseText):s(r.status))},r.send(d)}}))},e.prototype.onStopDefault=function(){s.log("MediaRecorder stopped  (state="+this.mediaRecorder.state+")"),this.blob=new Blob(this.chunks,{type:"video/webm"}),this.chunks=[],this.videoPreviewSrc=window.URL.createObjectURL(this.blob),this.state=i.LocalRecorderState.FINISHED},e}();t.LocalRecorder=r},tMSY:function(e,t){function n(){}e.exports=n,n.mixin=function(e){var t=e.prototype||e;t.isWildEmitter=!0,t.on=function(e,t,n){this.callbacks=this.callbacks||{};var i=3===arguments.length,o=i?arguments[1]:void 0,s=i?arguments[2]:arguments[1];return s._groupName=o,(this.callbacks[e]=this.callbacks[e]||[]).push(s),this},t.once=function(e,t,n){var i=this,o=3===arguments.length,s=o?arguments[1]:void 0,r=o?arguments[2]:arguments[1];function a(){i.off(e,a),r.apply(this,arguments)}return this.on(e,s,a),this},t.releaseGroup=function(e){var t,n,i,o;for(t in this.callbacks=this.callbacks||{},this.callbacks)for(n=0,i=(o=this.callbacks[t]).length;n<i;n++)o[n]._groupName===e&&(o.splice(n,1),n--,i--);return this},t.off=function(e,t){this.callbacks=this.callbacks||{};var n,i=this.callbacks[e];return i?1===arguments.length?(delete this.callbacks[e],this):(-1!==(n=i.indexOf(t))&&(i.splice(n,1),0===i.length&&delete this.callbacks[e]),this):this},t.emit=function(e){this.callbacks=this.callbacks||{};var t,n,i,o=[].slice.call(arguments,1),s=this.callbacks[e],r=this.getWildcardCallbacks(e);if(s)for(t=0,n=(i=s.slice()).length;t<n&&i[t];++t)i[t].apply(this,o);if(r)for(n=r.length,t=0,n=(i=r.slice()).length;t<n&&i[t];++t)i[t].apply(this,[e].concat(o));return this},t.getWildcardCallbacks=function(e){this.callbacks=this.callbacks||{};var t,n,i=[];for(t in this.callbacks)n=t.split("*"),("*"===t||2===n.length&&e.slice(0,n[0].length)===n[0])&&(i=i.concat(this.callbacks[t]));return i}},n.mixin(n)},ttXH:function(e,t,n){var i,o=n("tMSY");"undefined"!=typeof window&&(i=window.AudioContext||window.webkitAudioContext);var s=null;e.exports=function(e,t){var n=new o;if(!i)return n;var r,a,c,l=(t=t||{}).smoothing||.1,d=t.interval||50,u=t.threshold,g=t.play,h=t.history||10,p=!0;s=t.audioContext||s||new i,(c=s.createAnalyser()).fftSize=512,c.smoothingTimeConstant=l,a=new Float32Array(c.frequencyBinCount),e.jquery&&(e=e[0]),e instanceof HTMLAudioElement||e instanceof HTMLVideoElement?(r=s.createMediaElementSource(e),void 0===g&&(g=!0),u=u||-50):(r=s.createMediaStreamSource(e),u=u||-50),r.connect(c),g&&c.connect(s.destination),n.speaking=!1,n.suspend=function(){return s.suspend()},n.resume=function(){return s.resume()},Object.defineProperty(n,"state",{get:function(){return s.state}}),s.onstatechange=function(){n.emit("state_change",s.state)},n.setThreshold=function(e){u=e},n.setInterval=function(e){d=e},n.stop=function(){p=!1,n.emit("volume_change",-100,u),n.speaking&&(n.speaking=!1,n.emit("stopped_speaking")),c.disconnect(),r.disconnect()},n.speakingHistory=[];for(var m=0;m<h;m++)n.speakingHistory.push(0);var f=function(){setTimeout((function(){if(p){var e=function(e,t){var n=-1/0;e.getFloatFrequencyData(t);for(var i=4,o=t.length;i<o;i++)t[i]>n&&t[i]<0&&(n=t[i]);return n}(c,a);n.emit("volume_change",e,u);var t=0;if(e>u&&!n.speaking){for(var i=n.speakingHistory.length-3;i<n.speakingHistory.length;i++)t+=n.speakingHistory[i];t>=2&&(n.speaking=!0,n.emit("speaking"))}else if(e<u&&n.speaking){for(i=0;i<n.speakingHistory.length;i++)t+=n.speakingHistory[i];0==t&&(n.speaking=!1,n.emit("stopped_speaking"))}n.speakingHistory.shift(),n.speakingHistory.push(0+(e>u)),f()}}),d)};return f(),n}},"txJ/":function(e,t){var n=Object.create||function(e){var t=function(){};return t.prototype=e,new t},i=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return n},o=Function.prototype.bind||function(e){var t=this;return function(){return t.apply(e,arguments)}};function s(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=n(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}e.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._maxListeners=void 0;var r,a=10;try{var c={};Object.defineProperty&&Object.defineProperty(c,"x",{value:0}),r=0===c.x}catch(S){r=!1}function l(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function d(e,t,n){if(t)e.call(n);else for(var i=e.length,o=O(e,i),s=0;s<i;++s)o[s].call(n)}function u(e,t,n,i){if(t)e.call(n,i);else for(var o=e.length,s=O(e,o),r=0;r<o;++r)s[r].call(n,i)}function g(e,t,n,i,o){if(t)e.call(n,i,o);else for(var s=e.length,r=O(e,s),a=0;a<s;++a)r[a].call(n,i,o)}function h(e,t,n,i,o,s){if(t)e.call(n,i,o,s);else for(var r=e.length,a=O(e,r),c=0;c<r;++c)a[c].call(n,i,o,s)}function p(e,t,n,i){if(t)e.apply(n,i);else for(var o=e.length,s=O(e,o),r=0;r<o;++r)s[r].apply(n,i)}function m(e,t,i,o){var s,r,a;if("function"!=typeof i)throw new TypeError('"listener" argument must be a function');if((r=e._events)?(r.newListener&&(e.emit("newListener",t,i.listener?i.listener:i),r=e._events),a=r[t]):(r=e._events=n(null),e._eventsCount=0),a){if("function"==typeof a?a=r[t]=o?[i,a]:[a,i]:o?a.unshift(i):a.push(i),!a.warned&&(s=l(e))&&s>0&&a.length>s){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=a.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",c.name,c.message)}}else a=r[t]=i,++e._eventsCount;return e}function f(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function b(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},s=o.call(f,i);return s.listener=n,i.wrapFn=s,s}function v(e,t,n){var i=e._events;if(!i)return[];var o=i[t];return o?"function"==typeof o?n?[o.listener||o]:[o]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(o):O(o,o.length):[]}function C(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function O(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}r?Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||e!=e)throw new TypeError('"defaultMaxListeners" must be a positive number');a=e}}):s.defaultMaxListeners=a,s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return l(this)},s.prototype.emit=function(e){var t,n,i,o,s,r,a="error"===e;if(r=this._events)a=a&&null==r.error;else if(!a)return!1;if(a){if(arguments.length>1&&(t=arguments[1]),t instanceof Error)throw t;var c=new Error('Unhandled "error" event. ('+t+")");throw c.context=t,c}if(!(n=r[e]))return!1;var l="function"==typeof n;switch(i=arguments.length){case 1:d(n,l,this);break;case 2:u(n,l,this,arguments[1]);break;case 3:g(n,l,this,arguments[1],arguments[2]);break;case 4:h(n,l,this,arguments[1],arguments[2],arguments[3]);break;default:for(o=new Array(i-1),s=1;s<i;s++)o[s-1]=arguments[s];p(n,l,this,o)}return!0},s.prototype.on=s.prototype.addListener=function(e,t){return m(this,e,t,!1)},s.prototype.prependListener=function(e,t){return m(this,e,t,!0)},s.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,b(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,b(this,e,t)),this},s.prototype.removeListener=function(e,t){var i,o,s,r,a;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(o=this._events))return this;if(!(i=o[e]))return this;if(i===t||i.listener===t)0==--this._eventsCount?this._events=n(null):(delete o[e],o.removeListener&&this.emit("removeListener",e,i.listener||t));else if("function"!=typeof i){for(s=-1,r=i.length-1;r>=0;r--)if(i[r]===t||i[r].listener===t){a=i[r].listener,s=r;break}if(s<0)return this;0===s?i.shift():function(e,t){for(var n=t,i=n+1,o=e.length;i<o;n+=1,i+=1)e[n]=e[i];e.pop()}(i,s),1===i.length&&(o[e]=i[0]),o.removeListener&&this.emit("removeListener",e,a||t)}return this},s.prototype.removeAllListeners=function(e){var t,o,s;if(!(o=this._events))return this;if(!o.removeListener)return 0===arguments.length?(this._events=n(null),this._eventsCount=0):o[e]&&(0==--this._eventsCount?this._events=n(null):delete o[e]),this;if(0===arguments.length){var r,a=i(o);for(s=0;s<a.length;++s)"removeListener"!==(r=a[s])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=n(null),this._eventsCount=0,this}if("function"==typeof(t=o[e]))this.removeListener(e,t);else if(t)for(s=t.length-1;s>=0;s--)this.removeListener(e,t[s]);return this},s.prototype.listeners=function(e){return v(this,e,!0)},s.prototype.rawListeners=function(e){return v(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):C.call(e,t)},s.prototype.listenerCount=C,s.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},vqFl:function(e){e.exports=JSON.parse('{"_args":[["openvidu-browser@2.15.0","C:\\\\Users\\\\Hrach\\\\Desktop\\\\metl_tv_frontend"]],"_from":"openvidu-browser@2.15.0","_id":"openvidu-browser@2.15.0","_inBundle":false,"_integrity":"sha512-agnyeYIf1ze5ynGqNw32zFedlov9JZzjoFQHNMwuAoFYc2/24Aajs9cyw3j0m7v8xmMkqWSOYvsu7kGc8z1mZg==","_location":"/openvidu-browser","_phantomChildren":{},"_requested":{"type":"version","registry":true,"raw":"openvidu-browser@2.15.0","name":"openvidu-browser","escapedName":"openvidu-browser","rawSpec":"2.15.0","saveSpec":null,"fetchSpec":"2.15.0"},"_requiredBy":["/","/openvidu-angular"],"_resolved":"https://registry.npmjs.org/openvidu-browser/-/openvidu-browser-2.15.0.tgz","_spec":"2.15.0","_where":"C:\\\\Users\\\\Hrach\\\\Desktop\\\\metl_tv_frontend","author":{"name":"OpenVidu"},"bugs":{"url":"https://github.com/OpenVidu/openvidu/issues"},"dependencies":{"@types/node":"13.13.2","@types/platform":"1.3.2","freeice":"2.2.2","hark":"1.2.3","platform":"1.3.5","uuid":"7.0.3","wolfy87-eventemitter":"5.2.9"},"description":"OpenVidu Browser","devDependencies":{"browserify":"16.5.1","grunt":"1.1.0","grunt-cli":"1.3.2","grunt-contrib-copy":"1.0.0","grunt-contrib-sass":"1.0.0","grunt-contrib-uglify":"4.0.1","grunt-contrib-watch":"1.1.0","grunt-postcss":"0.9.0","grunt-string-replace":"1.3.1","grunt-ts":"6.0.0-beta.22","terser":"4.6.11","tsify":"4.0.1","tslint":"6.1.1","typedoc":"0.17.4","typescript":"3.8.3"},"homepage":"https://github.com/OpenVidu/openvidu#readme","license":"Apache-2.0","main":"lib/index.js","name":"openvidu-browser","repository":{"type":"git","url":"git://github.com/OpenVidu/openvidu.git"},"scripts":{"browserify":"VERSION=${VERSION:-dev}; cd src && ../node_modules/browserify/bin/cmd.js Main.ts -p [ tsify ] --exclude kurento-browser-extensions --debug -o ../static/js/openvidu-browser-$VERSION.js -v","browserify-prod":"VERSION=${VERSION:-dev}; cd src && ../node_modules/browserify/bin/cmd.js --debug Main.ts -p [ tsify ] --exclude kurento-browser-extensions | ../node_modules/terser/bin/terser --source-map content=inline --output ../static/js/openvidu-browser-$VERSION.min.js","build":"cd src/OpenVidu && ./../../node_modules/typescript/bin/tsc && cd ../.. && ./node_modules/typescript/bin/tsc --declaration src/index.ts --outDir ./lib --sourceMap --lib dom,es5,es2015.promise,scripthost","docs":"./generate-docs.sh"},"types":"lib/index.d.ts","version":"2.15.0"}')},vqGb:function(e,t,n){"use strict";t.__esModule=!0,t.URL=t.TEXT=t.NL=t.EMAIL=t.MAILTOEMAIL=t.Base=void 0;var i=n("RvMX"),o=n("JUw6"),s=n("dlaP");function r(e){return e instanceof s.DOMAIN||e instanceof s.TLD}var a=(0,i.createTokenClass)();a.prototype={type:"token",isLink:!1,toString:function(){for(var e=[],t=0;t<this.v.length;t++)e.push(this.v[t].toString());return e.join("")},toHref:function(){return this.toString()},toObject:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"http";return{type:this.type,value:this.toString(),href:this.toHref(e)}}};var c=(0,o.inherits)(a,(0,i.createTokenClass)(),{type:"email",isLink:!0}),l=(0,o.inherits)(a,(0,i.createTokenClass)(),{type:"email",isLink:!0,toHref:function(){return"mailto:"+this.toString()}}),d=(0,o.inherits)(a,(0,i.createTokenClass)(),{type:"text"}),u=(0,o.inherits)(a,(0,i.createTokenClass)(),{type:"nl"}),g=(0,o.inherits)(a,(0,i.createTokenClass)(),{type:"url",isLink:!0,toHref:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"http",t=!1,n=!1,i=this.v,o=[],a=0;i[a]instanceof s.PROTOCOL;)t=!0,o.push(i[a].toString().toLowerCase()),a++;for(;i[a]instanceof s.SLASH;)n=!0,o.push(i[a].toString()),a++;for(;r(i[a]);)o.push(i[a].toString().toLowerCase()),a++;for(;a<i.length;a++)o.push(i[a].toString());return o=o.join(""),t||n||(o=e+"://"+o),o},hasProtocol:function(){return this.v[0]instanceof s.PROTOCOL}});t.Base=a,t.MAILTOEMAIL=c,t.EMAIL=l,t.NL=u,t.TEXT=d,t.URL=g},zkoq:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("fXoL"),o=n("FKr1");n("8LU1"),n("cH1L");let s=(()=>{class e{}return e.\u0275mod=i.Ob({type:e}),e.\u0275inj=i.Nb({factory:function(t){return new(t||e)},imports:[[o.k,o.i],o.k,o.i]}),e})()},znSr:function(e,t,n){"use strict";n.d(t,"c",(function(){return O})),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return b}));var i=n("fXoL"),o=n("ofXK"),s=n("pD6V"),r=(n("8LU1"),n("1G5W"),n("jhN1"));let a=(()=>{class e extends s.b{constructor(e,t,n,i,s,r,a){super(e,null,t,n),this.ngClassInstance=a,this.DIRECTIVE_KEY="ngClass",this.ngClassInstance||(this.ngClassInstance=new o.q(i,s,e,r)),this.init(),this.setValue("","")}set klass(e){this.ngClassInstance.klass=e,this.setValue(e,"")}updateWithValue(e){this.ngClassInstance.ngClass=e,this.ngClassInstance.ngDoCheck()}ngDoCheck(){this.ngClassInstance.ngDoCheck()}}return e.\u0275fac=function(t){return new(t||e)(i.Qb(i.l),i.Qb(s.i),i.Qb(s.f),i.Qb(i.t),i.Qb(i.u),i.Qb(i.F),i.Qb(o.q,10))},e.\u0275dir=i.Lb({type:e,inputs:{klass:["class","klass"]},features:[i.zb]}),e})();const c=["ngClass","ngClass.xs","ngClass.sm","ngClass.md","ngClass.lg","ngClass.xl","ngClass.lt-sm","ngClass.lt-md","ngClass.lt-lg","ngClass.lt-xl","ngClass.gt-xs","ngClass.gt-sm","ngClass.gt-md","ngClass.gt-lg"];let l=(()=>{class e extends a{constructor(){super(...arguments),this.inputs=c}}return e.\u0275fac=function(t){return d(t||e)},e.\u0275dir=i.Lb({type:e,selectors:[["","ngClass",""],["","ngClass.xs",""],["","ngClass.sm",""],["","ngClass.md",""],["","ngClass.lg",""],["","ngClass.xl",""],["","ngClass.lt-sm",""],["","ngClass.lt-md",""],["","ngClass.lt-lg",""],["","ngClass.lt-xl",""],["","ngClass.gt-xs",""],["","ngClass.gt-sm",""],["","ngClass.gt-md",""],["","ngClass.gt-lg",""]],inputs:{ngClass:"ngClass","ngClass.xs":"ngClass.xs","ngClass.sm":"ngClass.sm","ngClass.md":"ngClass.md","ngClass.lg":"ngClass.lg","ngClass.xl":"ngClass.xl","ngClass.lt-sm":"ngClass.lt-sm","ngClass.lt-md":"ngClass.lt-md","ngClass.lt-lg":"ngClass.lt-lg","ngClass.lt-xl":"ngClass.lt-xl","ngClass.gt-xs":"ngClass.gt-xs","ngClass.gt-sm":"ngClass.gt-sm","ngClass.gt-md":"ngClass.gt-md","ngClass.gt-lg":"ngClass.gt-lg"},features:[i.zb]}),e})();const d=i.Yb(l);class u{constructor(e,t,n=!0){this.key=e,this.value=t,this.key=n?e.replace(/['"]/g,"").trim():e.trim(),this.value=n?t.replace(/['"]/g,"").trim():t.trim(),this.value=this.value.replace(/;/,"")}}function g(e){let t=typeof e;return"object"===t?e.constructor===Array?"array":e.constructor===Set?"set":"object":t}function h(e){const[t,...n]=e.split(":");return new u(t,n.join(":"))}function p(e,t){return t.key&&(e[t.key]=t.value),e}let m=(()=>{class e extends s.b{constructor(e,t,n,i,s,r,a,c,l){super(e,null,t,n),this.sanitizer=i,this.ngStyleInstance=a,this.DIRECTIVE_KEY="ngStyle",this.ngStyleInstance||(this.ngStyleInstance=new o.w(e,s,r)),this.init();const d=this.nativeElement.getAttribute("style")||"";this.fallbackStyles=this.buildStyleMap(d),this.isServer=c&&Object(o.J)(l)}updateWithValue(e){const t=this.buildStyleMap(e);this.ngStyleInstance.ngStyle=Object.assign(Object.assign({},this.fallbackStyles),t),this.isServer&&this.applyStyleToElement(t),this.ngStyleInstance.ngDoCheck()}clearStyles(){this.ngStyleInstance.ngStyle=this.fallbackStyles,this.ngStyleInstance.ngDoCheck()}buildStyleMap(e){const t=e=>this.sanitizer.sanitize(i.J.STYLE,e)||"";if(e)switch(g(e)){case"string":return C(function(e,t=";"){return String(e).trim().split(t).map(e=>e.trim()).filter(e=>""!==e)}(e),t);case"array":return C(e,t);case"set":default:return function(e,t){let n=[];return"set"===g(e)?e.forEach(e=>n.push(e)):Object.keys(e).forEach(t=>{n.push(`${t}:${e[t]}`)}),function(e,t){return e.map(h).filter(e=>!!e).map(e=>(t&&(e.value=t(e.value)),e)).reduce(p,{})}(n,t)}(e,t)}return{}}ngDoCheck(){this.ngStyleInstance.ngDoCheck()}}return e.\u0275fac=function(t){return new(t||e)(i.Qb(i.l),i.Qb(s.i),i.Qb(s.f),i.Qb(r.b),i.Qb(i.u),i.Qb(i.F),i.Qb(o.w,10),i.Qb(s.g),i.Qb(i.C))},e.\u0275dir=i.Lb({type:e,features:[i.zb]}),e})();const f=["ngStyle","ngStyle.xs","ngStyle.sm","ngStyle.md","ngStyle.lg","ngStyle.xl","ngStyle.lt-sm","ngStyle.lt-md","ngStyle.lt-lg","ngStyle.lt-xl","ngStyle.gt-xs","ngStyle.gt-sm","ngStyle.gt-md","ngStyle.gt-lg"];let b=(()=>{class e extends m{constructor(){super(...arguments),this.inputs=f}}return e.\u0275fac=function(t){return v(t||e)},e.\u0275dir=i.Lb({type:e,selectors:[["","ngStyle",""],["","ngStyle.xs",""],["","ngStyle.sm",""],["","ngStyle.md",""],["","ngStyle.lg",""],["","ngStyle.xl",""],["","ngStyle.lt-sm",""],["","ngStyle.lt-md",""],["","ngStyle.lt-lg",""],["","ngStyle.lt-xl",""],["","ngStyle.gt-xs",""],["","ngStyle.gt-sm",""],["","ngStyle.gt-md",""],["","ngStyle.gt-lg",""]],inputs:{ngStyle:"ngStyle","ngStyle.xs":"ngStyle.xs","ngStyle.sm":"ngStyle.sm","ngStyle.md":"ngStyle.md","ngStyle.lg":"ngStyle.lg","ngStyle.xl":"ngStyle.xl","ngStyle.lt-sm":"ngStyle.lt-sm","ngStyle.lt-md":"ngStyle.lt-md","ngStyle.lt-lg":"ngStyle.lt-lg","ngStyle.lt-xl":"ngStyle.lt-xl","ngStyle.gt-xs":"ngStyle.gt-xs","ngStyle.gt-sm":"ngStyle.gt-sm","ngStyle.gt-md":"ngStyle.gt-md","ngStyle.gt-lg":"ngStyle.gt-lg"},features:[i.zb]}),e})();const v=i.Yb(b);function C(e,t){return e.map(h).filter(e=>!!e).map(e=>(t&&(e.value=t(e.value)),e)).reduce(p,{})}let O=(()=>{class e{}return e.\u0275mod=i.Ob({type:e}),e.\u0275inj=i.Nb({factory:function(t){return new(t||e)},imports:[[s.c]]}),e})()},zrcO:function(e,t,n){"use strict";n.r(t),n.d(t,"UsersModule",(function(){return en}));var i=n("ofXK"),o=n("tyNb"),s=n("mrSG"),r=n("3Pt+"),a=n("Esjb"),c=n("cLpZ"),l=n("vV3i"),d=n("wd/R"),u=n("VqRH"),g=n("fXoL"),h=n("lwos"),p=n("7dP1"),m=n("tVj7"),f=n("Cnuz"),b=n("5eHb"),v=n("PPbg"),C=n("0IaG"),O=n("FFj9"),S=n("Xa2L"),y=n("fZdh");function M(e,t){if(1&e&&(g.Rb(0,"img",24),g.jc(1,"getImgPath")),2&e){const e=g.ic();g.pc("src",g.lc(1,1,e.coverImg,"images"),g.Ec)}}function x(e,t){if(1&e&&g.Rb(0,"img",24),2&e){const e=g.ic();g.pc("src",e.coverImgSrc,g.Ec)}}function _(e,t){if(1&e){const e=g.Xb();g.Wb(0,"dropzone",25,26),g.ec("thumbnail",(function(t){return g.Bc(e),g.ic().onAddedFile(t)})),g.Vb()}if(2&e){const e=g.ic();g.pc("config",e.dropzoneConfig)("message","Click or drag an image to upload")}}function P(e,t){if(1&e&&(g.Rb(0,"img",27),g.jc(1,"getImgPath")),2&e){const e=g.ic();g.pc("src",g.lc(1,1,e.profileImg,"images"),g.Ec)}}function w(e,t){if(1&e&&g.Rb(0,"img",27),2&e){const e=g.ic();g.pc("src",e.avatarImgSrc,g.Ec)}}function E(e,t){1&e&&(g.Wb(0,"span",28),g.Mc(1,"First name is required"),g.Vb())}function k(e,t){1&e&&(g.Wb(0,"span",28),g.Mc(1," First name should contain only alphabetical characters "),g.Vb())}function I(e,t){1&e&&(g.Wb(0,"span",28),g.Mc(1,"Last name is required"),g.Vb())}function T(e,t){1&e&&(g.Wb(0,"span",28),g.Mc(1," Last name should contain only alphabetical characters "),g.Vb())}function A(e,t){1&e&&(g.Wb(0,"span",28),g.Mc(1,"User name is required"),g.Vb())}function V(e,t){1&e&&(g.Wb(0,"span",28),g.Mc(1," Please write alphabetical characters before numbers for username "),g.Vb())}function R(e,t){1&e&&(g.Wb(0,"span",28),g.Mc(1,"E-mail is required"),g.Vb())}function L(e,t){1&e&&(g.Wb(0,"span",28),g.Mc(1,"E-mail is "),g.Wb(2,"strong"),g.Mc(3,"invalid"),g.Vb(),g.Vb())}function N(e,t){1&e&&(g.Wb(0,"span",28),g.Mc(1,"Birth day is required"),g.Vb())}function D(e,t){1&e&&g.Rb(0,"mat-spinner",29),2&e&&g.pc("diameter",15)}let j=(()=>{class e{constructor(e,t,n,i,o,s,r,a,c,d){this.fb=e,this.loader=t,this.auth=n,this.usersService=i,this._userInfoService=o,this.toastr=s,this.userStore=r,this.router=a,this.dialog=c,this.uploadFile=d,this.isSubmitted=!1,this.subscriptions=[],this.currentDate=new Date,this.dropzoneConfig=l.a,this.dropzoneFiles=[],this.coverFile=[],this.coverShowImg=!1,this.avatarShowImg=!1,this._getUserInfo()}initForm(){this.profileForm=this.fb.group({id:[""],first_name:[{value:"",disabled:!0},[r.G.required,Object(a.a)(c.g)]],last_name:[{value:"",disabled:!0},[r.G.required,Object(a.a)(c.g)]],username:["",[r.G.required,Object(a.a)(c.f)]],email:["",[r.G.required,Object(a.a)(c.a)]],birthday:[""]})}ngOnInit(){this.initForm(),this.profileForm.patchValue(Object.assign(Object.assign({},this.authUser),{birthday:d(this.authUser.birthday).format("MM/DD/YYYY")}))}dateChanged(e){}_getUserInfo(){this._userInfoService._userInfo.subscribe(e=>{this.authUser=e,console.log(this.authUser)})}editImage(e,t){this.dialog.open(u.a,{maxWidth:"60vw",maxHeight:"70vh",height:"100%",width:"100%",data:{title:"Profile Image Cropper",shape:t,file:e.target.files[0]}}).afterClosed().subscribe(e=>{if(console.log(e),e){if("square"===e.shape){this.imageCoverFile=e.blob,this.coverShowImg=!0;const t=new FileReader;t.onload=e=>{this.coverImgSrc=e.target.result.toString()},t.readAsDataURL(this.imageCoverFile)}if("circle"===e.shape){this.imageAvatarFile=e.blob,this.avatarShowImg=!0;const t=new FileReader;t.onload=e=>{this.avatarImgSrc=e.target.result.toString()},t.readAsDataURL(this.imageAvatarFile)}}})}onAddedFile(e){this.dropzoneFiles.push(e[0]),this.profileForm.patchValue({avatar:e[0].name}),console.log(e)}addCoverImg(e){this.coverFile.push(e.target.files[0]),this.profileForm.patchValue({cover:e.target.files[0].name})}buildFormData(){const e=new FormData,t=this.profileForm.value,n=Object.entries(this.dropzoneFiles).length>0;Object.entries(this.coverFile);for(const i in this.profileForm.value)"birthday"===i?t.birthday&&e.append(i,d(new Date(this.profileForm.value[i])).format("YYYY-MM-DD")):"avatar"===i&&n||e.append(i,this.profileForm.value[i]);if(n){const t=this.dropzoneFiles[0],n=`avatar_${Date.now()}.jpg`;e.append("avatar",n),e.append("user_avatar_file",t,n)}return e}saveChanges(){return Object(s.a)(this,void 0,void 0,(function*(){if(console.log("++++++++"),this.coverShowImg){const e=new FormData;e.append("image",this.imageCoverFile),e.append("belonging","profile_cover_img"),e.append("duration",""),yield this.uploadFile.uploadFile(e,"image").subscribe(e=>{console.log(e),this.coverShowImg=!1,this.saveEditeProfile("cover",e.path)})}if(this.avatarShowImg){const e=new FormData;e.append("image",this.imageAvatarFile),e.append("belonging","profile_avatar_img"),e.append("duration",""),yield this.uploadFile.uploadFile(e,"image").subscribe(e=>{console.log(e),this.coverShowImg=!1,this.saveEditeProfile("avatar",e.path)})}this.avatarShowImg||this.coverShowImg||this.saveEditeProfile()}))}saveEditeProfile(e,t){const n=this.buildFormData();e&&t&&n.append(e,t),console.log(n),this.usersService.saveProfileChanges(n).subscribe(e=>Object(s.a)(this,void 0,void 0,(function*(){console.log(e);const t=e.hasOwnProperty("token")?null==e?void 0:e.token:"";t&&(localStorage.setItem("token",t),this.userStore.setAuthUser(t),this.toastr.success("The changes are saved successfully"),yield this.router.navigateByUrl("users/"+this.profileForm.value.username))})))}get firstName(){return this.profileForm.get("first_name")}get lastName(){return this.profileForm.get("last_name")}get email(){return this.profileForm.get("email")}get pass(){return this.profileForm.get("password")}get username(){return this.profileForm.get("username")}get confirmPass(){return this.profileForm.get("confirm_password")}get birthday(){return this.profileForm.get("birthday")}get profileImg(){return!!this.authUser&&this.authUser.avatar}get coverImg(){return!!this.authUser&&this.authUser.cover}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}}return e.\u0275fac=function(t){return new(t||e)(g.Qb(r.f),g.Qb(h.a),g.Qb(p.a),g.Qb(m.a),g.Qb(f.a),g.Qb(b.b),g.Qb(v.a),g.Qb(o.e),g.Qb(C.b),g.Qb(O.a))},e.\u0275cmp=g.Kb({type:e,selectors:[["app-profile"]],decls:37,vars:16,consts:[[1,"flex-wrap-reverse",3,"formGroup"],[1,"editPart"],["id","profile-cover-image",1,"editCoverDiv"],["class","editCover","alt","",3,"src",4,"ngIf"],[1,"coverImgEditDiv"],["src","assets/img/edit.svg","alt","",1,"remove-profile-img",3,"click"],["type","file","hidden","",3,"change"],["coverChangeImg",""],[1,"editPart1"],[1,"right-side","mx-auto","ml-xl-4","pl-lg-2"],[1,"userImg"],["id","dropzone","class","profileImgDropzone single",3,"config","message","thumbnail",4,"ngIf"],[1,"profile-img"],["class","profileImage","alt","",3,"src",4,"ngIf"],["avatarChangeImg",""],[1,"left-side","pr-lg-2"],["placeholder","First Name","formControlName","first_name",1,"login-input"],["class","error",4,"ngIf"],["placeholder","Last Name","formControlName","last_name",1,"login-input"],["placeholder","User name","formControlName","username",1,"login-input"],["placeholder","Email","formControlName","email",1,"login-input"],[1,"actions"],[1,"save-profile-changes",3,"click"],[3,"diameter",4,"ngIf"],["alt","",1,"editCover",3,"src"],["id","dropzone",1,"profileImgDropzone","single",3,"config","message","thumbnail"],["dropzone",""],["alt","",1,"profileImage",3,"src"],[1,"error"],[3,"diameter"]],template:function(e,t){if(1&e){const e=g.Xb();g.Wb(0,"form",0),g.Wb(1,"div",1),g.Wb(2,"div",2),g.Kc(3,M,2,4,"img",3),g.Kc(4,x,1,1,"img",3),g.Wb(5,"div",4),g.Wb(6,"img",5),g.ec("click",(function(){return g.Bc(e),g.xc(8).click()})),g.Vb(),g.Vb(),g.Wb(7,"input",6,7),g.ec("change",(function(e){return t.editImage(e,"square")})),g.Vb(),g.Vb(),g.Wb(9,"div",8),g.Wb(10,"div",9),g.Wb(11,"div",10),g.Kc(12,_,2,2,"dropzone",11),g.Wb(13,"div",12),g.Kc(14,P,2,4,"img",13),g.Kc(15,w,1,1,"img",13),g.Wb(16,"img",5),g.ec("click",(function(){return g.Bc(e),g.xc(18).click()})),g.Vb(),g.Wb(17,"input",6,14),g.ec("change",(function(e){return t.editImage(e,"circle")})),g.Vb(),g.Vb(),g.Vb(),g.Vb(),g.Wb(19,"div",15),g.Rb(20,"input",16),g.Kc(21,E,2,0,"span",17),g.Kc(22,k,2,0,"span",17),g.Rb(23,"input",18),g.Kc(24,I,2,0,"span",17),g.Kc(25,T,2,0,"span",17),g.Rb(26,"input",19),g.Kc(27,A,2,0,"span",17),g.Kc(28,V,2,0,"span",17),g.Rb(29,"input",20),g.Kc(30,R,2,0,"span",17),g.Kc(31,L,4,0,"span",17),g.Kc(32,N,2,0,"span",17),g.Wb(33,"div",21),g.Wb(34,"a",22),g.ec("click",(function(){return t.saveChanges()})),g.Mc(35,"Save changes"),g.Vb(),g.Kc(36,D,1,1,"mat-spinner",23),g.Vb(),g.Vb(),g.Vb(),g.Vb(),g.Vb()}2&e&&(g.pc("formGroup",t.profileForm),g.Cb(3),g.pc("ngIf",!t.coverShowImg),g.Cb(1),g.pc("ngIf",t.coverShowImg),g.Cb(8),g.pc("ngIf",!t.profileImg),g.Cb(2),g.pc("ngIf",!t.avatarShowImg),g.Cb(1),g.pc("ngIf",t.avatarShowImg),g.Cb(6),g.pc("ngIf",t.isSubmitted&&t.firstName.hasError("required")),g.Cb(1),g.pc("ngIf",t.isSubmitted&&t.firstName.hasError("patternInvalid")),g.Cb(2),g.pc("ngIf",t.isSubmitted&&t.lastName.hasError("required")),g.Cb(1),g.pc("ngIf",t.isSubmitted&&t.lastName.hasError("patternInvalid")),g.Cb(2),g.pc("ngIf",t.isSubmitted&&t.username.hasError("required")),g.Cb(1),g.pc("ngIf",t.isSubmitted&&t.username.hasError("patternInvalid")),g.Cb(2),g.pc("ngIf",t.isSubmitted&&t.email.hasError("required")),g.Cb(1),g.pc("ngIf",t.isSubmitted&&t.email.hasError("patternInvalid")),g.Cb(1),g.pc("ngIf",t.isSubmitted&&t.birthday.hasError("required")),g.Cb(4),g.pc("ngIf",t.loader.formProcessing))},directives:[r.I,r.t,r.k,i.t,r.c,r.s,r.i,l.b,S.c],pipes:[y.a],styles:[".login-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%;height:100vh}.login-logo[_ngcontent-%COMP%]{cursor:pointer}.login-content-right[_ngcontent-%COMP%]{background:#fff;width:57%}.login-content-left[_ngcontent-%COMP%]{width:43%;display:flex;flex-direction:column;align-items:center;justify-content:center;position:relative;background:url(back-login.53f102952f1c83155d3a.png)}.login-abs[_ngcontent-%COMP%]{position:absolute;right:0}.login-btn[_ngcontent-%COMP%]{background:#fff;color:#18b587!important}.login-btn[_ngcontent-%COMP%], .register-btn[_ngcontent-%COMP%]{border-radius:28px 0 0 28px;width:128px;height:57px;display:flex;justify-content:center;align-items:center;font-size:20px;font-family:Muli-Bold;transition:.3s ease-in-out}.register-btn[_ngcontent-%COMP%]{color:#fff!important;cursor:pointer}.register-btn[_ngcontent-%COMP%]:hover{background:#fff;color:#18b587!important}.login-content-right[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;padding-left:150px}.login-title[_ngcontent-%COMP%]{color:#545454;font-size:32px;font-family:Muli-Bold;margin-bottom:32px}.login-input[_ngcontent-%COMP%]{width:100%;height:51px;box-shadow:0 0 6px rgba(0,109,204,.18);padding:15px 32px;margin-bottom:8px;margin-top:20px;color:#8c8888;font-size:16px;font-family:Muli-Regular}.login-input[_ngcontent-%COMP%]:focus{box-shadow:0 0 6px #18b587}.forgot-password[_ngcontent-%COMP%]{text-align:right;color:#545454;font-size:16px;font-family:Muli-Regular;cursor:pointer;transition:.3s ease-in-out}.forgot-password[_ngcontent-%COMP%]:hover{color:#f53c6f}.login-block[_ngcontent-%COMP%]{width:430px}.login-submit[_ngcontent-%COMP%]{width:100%;height:51px;background:#f53c6f;padding:15px 32px;margin-bottom:32px;color:#fff!important;font-size:16px;font-family:Muli-Regular;display:flex;justify-content:center;align-items:center;margin-top:47px;transition:.3s ease-in-out;cursor:pointer}.login-submit[_ngcontent-%COMP%]:hover{background:#c52551}.register-block[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.register-select[_ngcontent-%COMP%]{width:200px;height:51px;box-shadow:0 0 6px rgba(0,109,204,.18);padding:15px 32px;margin-bottom:8px;margin-top:20px;color:#cecece;font-size:16px;font-family:Muli-Regular;outline:none;border:0}.register-select[_ngcontent-%COMP%]:focus{box-shadow:0 0 6px rgba(245,60,111,.14);border:.5px solid #f53c6f}.register-day[_ngcontent-%COMP%]{width:100px;height:51px;box-shadow:0 0 6px rgba(0,109,204,.18);padding:15px 32px;margin-bottom:8px;margin-top:20px;color:#cecece;font-size:16px;font-family:Muli-Regular;outline:none;border:0}.register-day[_ngcontent-%COMP%]:focus{box-shadow:0 0 6px rgba(245,60,111,.14);border:.5px solid #f53c6f}@media (max-width:1400px){.login-logo[_ngcontent-%COMP%]{width:250px;margin-left:100px}.login-content-left[_ngcontent-%COMP%]{align-items:start}}@media (max-width:1200px){.login-logo[_ngcontent-%COMP%]{margin-left:40px}.login-content-right[_ngcontent-%COMP%]{padding-left:80px}}@media (max-width:991px){.login-content-left[_ngcontent-%COMP%]{align-items:start;height:400px;width:100%}.login-content-right[_ngcontent-%COMP%]{padding-left:0;width:100%;align-items:center;margin-top:60px}.login-content[_ngcontent-%COMP%]{height:auto;flex-direction:column}}@media (max-width:480px){.register-block[_ngcontent-%COMP%]{flex-direction:column}.register-day[_ngcontent-%COMP%], .register-select[_ngcontent-%COMP%]{width:100%}.login-block[_ngcontent-%COMP%]{width:90%}.login-title[_ngcontent-%COMP%]{font-size:27px}.forgot-password[_ngcontent-%COMP%], .login-title[_ngcontent-%COMP%]{text-align:center}.login-btn[_ngcontent-%COMP%]{width:128px;margin-right:0}.login-btn[_ngcontent-%COMP%], .register-btn[_ngcontent-%COMP%]{height:45px;font-size:16px}.login-logo[_ngcontent-%COMP%]{width:150px}}.birthday-block[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{cursor:pointer}.actions[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:32px;margin-top:47px}.actions[_ngcontent-%COMP%]   .register-submit[_ngcontent-%COMP%]{width:100%;height:51px;background:#f53c6f;padding:15px 32px;color:#fff!important;font-size:16px;font-family:Muli-Regular;display:flex;justify-content:center;align-items:center;transition:.3s ease-in-out;cursor:pointer}.actions[_ngcontent-%COMP%]   .register-submit[_ngcontent-%COMP%]:hover{background:#c52551}.actions[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin-left:20px}@media screen and (max-width:1250px){form[_ngcontent-%COMP%]{flex-direction:column-reverse}}form[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]{flex:1;min-width:360px;width:100%;max-width:400px;margin:0 auto}@media only screen and (min-width:769px) and (max-width:1024px){form[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]{padding:0!important}}@media screen and (max-width:410px){form[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]{min-width:260px}}@media screen and (min-width:375px) and (max-width:510px){form[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]{flex:none!important;width:calc(100% - 5px)!important;min-width:270px!important}}@media screen and (min-width:320px) and (max-width:375px){form[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]{flex:none!important;width:calc(100% - 15px)!important;min-width:270px!important}}form[_ngcontent-%COMP%]   .save-profile-changes[_ngcontent-%COMP%]{width:100%;height:51px;background-color:#18b587;padding:15px 32px;color:#fff!important;font-size:16px;font-family:Muli-Regular;display:flex;justify-content:center;align-items:center;transition:.3s ease-in-out;cursor:pointer}form[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]   .profile-img[_ngcontent-%COMP%]{max-width:400%;width:100%;height:400px;border-radius:50%;position:relative}@media only screen and (max-width:1250px){form[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]   .profile-img[_ngcontent-%COMP%]{background-position:50% 50%!important}}@media only screen and (max-width:425px){form[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]   .profile-img[_ngcontent-%COMP%]{height:250px}}form[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]   .profile-img[_ngcontent-%COMP%]   .remove-profile-img[_ngcontent-%COMP%]{cursor:pointer;position:absolute;right:7px;top:6px;color:#fff;padding:5px;height:50px}@media only screen and (max-width:500px){form[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]   .profile-img[_ngcontent-%COMP%]   .remove-profile-img[_ngcontent-%COMP%]{height:40px}}.editPart[_ngcontent-%COMP%]{display:flex;flex-direction:column}.editPart1[_ngcontent-%COMP%]{display:flex!important;margin-top:20px}.editCover[_ngcontent-%COMP%]{width:100%;max-width:1200px;height:300px;-o-object-fit:cover;object-fit:cover}@media screen and (max-width:500px){.editCover[_ngcontent-%COMP%]{height:200px}}@media screen and (max-width:375px){.editCover[_ngcontent-%COMP%]{height:150px}}.editCoverDiv[_ngcontent-%COMP%]{position:relative}.coverImgEditDiv[_ngcontent-%COMP%]{position:absolute;top:10px;right:20px;height:50px;cursor:pointer}@media screen and (max-width:500px){.coverImgEditDiv[_ngcontent-%COMP%]{height:40px!important}}.coverImgEditDiv[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:40px!important}@media screen and (max-width:1250px){.left-side[_ngcontent-%COMP%]{margin-top:20px!important}}@media screen and (max-width:1200px){.editPart1[_ngcontent-%COMP%]{flex-direction:column;justify-content:center}}.profileImage[_ngcontent-%COMP%]{max-width:400%;width:100%;height:400px;border-radius:50%}"]}),e})();var U=n("PZzU"),W=n("9xOu"),B=n("A7+4"),F=n("tk/3");let z=(()=>{class e{constructor(e){this.httpClient=e}getToken(e){return this.httpClient.get(W.c+"users/session/get-token",{params:e})}getSession(){return this.httpClient.post(W.c+"api/sessions",{})}leaveSession(e){return this.httpClient.get(W.c+"users/session/leave",{params:e})}}return e.\u0275fac=function(t){return new(t||e)(g.ac(F.b))},e.\u0275prov=g.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var G=n("wDcp"),Q=n("il7l"),K=n("n/vF"),H=n("sAj1"),q=n("gHg8"),Y=n("8hAm"),Z=n("KUGs"),J=n("51Q/"),X=n("yEwS");const $=["video"];function ee(e,t){1&e&&g.Rb(0,"mat-spinner",2),2&e&&g.pc("diameter",100)}function te(e,t){if(1&e&&(g.Wb(0,"li",26),g.Mc(1),g.Vb()),2&e){const e=t.$implicit;g.Cb(1),g.Oc(" #",e.name," ")}}function ne(e,t){if(1&e){const e=g.Xb();g.Wb(0,"div",27),g.Wb(1,"div",28),g.Rb(2,"i",29),g.Wb(3,"span"),g.Mc(4),g.Vb(),g.Vb(),g.Wb(5,"div",30),g.ec("click",(function(){return g.Bc(e),g.ic(3).openSocialShareModal()})),g.Rb(6,"i",31),g.Wb(7,"p"),g.Mc(8,"Share"),g.Vb(),g.Vb(),g.Vb()}if(2&e){const e=g.ic(3);g.Cb(4),g.Nc(e.participants.length)}}function ie(e,t){if(1&e&&(g.Wb(0,"div",32),g.Wb(1,"span",33),g.Mc(2),g.Vb(),g.Wb(3,"span",34),g.Mc(4,"\xb7"),g.Vb(),g.Wb(5,"span",35),g.Mc(6),g.jc(7,"dateFromNow"),g.Vb(),g.Vb()),2&e){const e=g.ic(3);g.Cb(2),g.Oc("",e.participants.length," watching now"),g.Cb(4),g.Nc(g.kc(7,2,e.savedVideoSettings.created_at))}}function oe(e,t){1&e&&(g.Wb(0,"span",36),g.Mc(1,"Live"),g.Vb())}function se(e,t){if(1&e){const e=g.Xb();g.Wb(0,"app-chat-box",37),g.ec("sendMessage",(function(t){return g.Bc(e),g.ic(3).sendMessage(t)})),g.Vb()}if(2&e){const e=g.ic(3);g.pc("openViduToken",e.openViduToken)("messages",e.messages)("session",e.session)("videoId",e.videoId)("videoRecordingState",e.recordingState)}}function re(e,t){if(1&e){const e=g.Xb();g.Ub(0),g.Wb(1,"div",7),g.Wb(2,"div",8),g.Wb(3,"div",9),g.Wb(4,"app-video-js-record",10),g.ec("recordingStarted",(function(t){return g.Bc(e),g.ic(2).getRecordedVideoId(t)})),g.Vb(),g.Vb(),g.Wb(5,"div",11),g.Wb(6,"div",12),g.Wb(7,"div",13),g.Wb(8,"ul",14),g.Kc(9,te,2,1,"li",15),g.Vb(),g.Kc(10,ne,9,1,"div",16),g.Vb(),g.Wb(11,"h3"),g.Mc(12),g.Vb(),g.Kc(13,ie,8,4,"div",17),g.Kc(14,oe,2,0,"span",18),g.Vb(),g.Vb(),g.Wb(15,"div",19),g.Wb(16,"div"),g.Rb(17,"img",20),g.jc(18,"getImgPath"),g.Vb(),g.Wb(19,"div"),g.Wb(20,"p",21),g.Mc(21),g.Vb(),g.Wb(22,"p",22),g.Mc(23),g.Vb(),g.Vb(),g.Vb(),g.Rb(24,"app-stocks-marquee",23),g.Vb(),g.Wb(25,"div",24),g.Kc(26,se,1,5,"app-chat-box",25),g.Vb(),g.Vb(),g.Tb()}if(2&e){const e=g.ic(2);g.Cb(4),g.pc("openViduToken",e.openViduToken)("thumbnailFile",e.thumbnailFile)("videoSettings",e.videoSettings)("participants",e.participants),g.Cb(5),g.pc("ngForOf",e.videoSettings.tags),g.Cb(1),g.pc("ngIf",e.videoId),g.Cb(2),g.Nc(e.videoSettings.name),g.Cb(1),g.pc("ngIf",e.videoId),g.Cb(1),g.pc("ngIf",e.videoId),g.Cb(3),g.pc("src",g.lc(18,15,e.channelUser.channel.avatar,"images"),g.Ec),g.Cb(4),g.Nc(e.channelUser.channel.name),g.Cb(2),g.Oc("",e.channelUser.channel.subscribers_count+" subscriber"+(1===e.channelUser.channel.subscribers_count?"":"s")," "),g.Cb(1),g.pc("stocks",e.userStocks)("videoStreaming",!0),g.Cb(2),g.pc("ngIf",e.videoId)}}function ae(e,t){1&e&&(g.Wb(0,"div",38),g.Wb(1,"div",39),g.Rb(2,"img",40),g.Wb(3,"p",41),g.Wb(4,"b"),g.Mc(5,"There is no session data defined."),g.Vb(),g.Rb(6,"br"),g.Mc(7," Please return to the "),g.Wb(8,"a",42),g.Mc(9,"'Start live video' page"),g.Vb(),g.Vb(),g.Vb(),g.Vb())}function ce(e,t){if(1&e){const e=g.Xb();g.Wb(0,"div",43),g.Wb(1,"div",39),g.Rb(2,"img",44),g.Wb(3,"p",41),g.Wb(4,"b"),g.Mc(5,"There was a problem while loading streaming session."),g.Vb(),g.Rb(6,"br"),g.Wb(7,"small"),g.Mc(8,"Please "),g.Wb(9,"a",45),g.ec("click",(function(){return g.Bc(e),g.ic(2).reloadPage()})),g.Mc(10,"reload"),g.Vb(),g.Mc(11," the page or try again later."),g.Vb(),g.Vb(),g.Vb(),g.Wb(12,"div",46),g.Wb(13,"div",39),g.Rb(14,"img",47),g.Wb(15,"p",48),g.Wb(16,"b"),g.Mc(17,"There was a problem while loading streaming session."),g.Vb(),g.Rb(18,"br"),g.Wb(19,"small"),g.Mc(20,"Please "),g.Wb(21,"a",45),g.ec("click",(function(){return g.Bc(e),g.ic(2).reloadPage()})),g.Mc(22,"reload"),g.Vb(),g.Mc(23," the page or try again later."),g.Vb(),g.Vb(),g.Vb(),g.Vb(),g.Vb()}}function le(e,t){if(1&e&&(g.Wb(0,"div",3),g.Kc(1,re,27,18,"ng-container",4),g.Kc(2,ae,10,0,"div",5),g.Kc(3,ce,24,0,"div",6),g.Vb()),2&e){const e=g.ic();g.Cb(1),g.pc("ngIf",e.openViduToken),g.Cb(1),g.pc("ngIf",!e.sessionData&&!e.videoSettings),g.Cb(1),g.pc("ngIf",!e.openViduToken&&e.sessionData&&e.videoSettings)}}let de=(()=>{class e{constructor(e,t,n,i,o,s,r,a,c,l,d,u,g,h,p,m){this.ref=e,this.toastr=t,this.elRef=n,this.openViduService=i,this.subject=o,this._userInfoService=s,this.videoService=r,this.chatService=a,this.videoChatService=c,this.stocksService=l,this.router=d,this.route=u,this.dialog=g,this.loader=h,this.usersService=p,this.getUrlParts=m,this.videoJSPlayerOptions={autoplay:!0,controls:!0,fluid:!1,sources:[]},this.OPENVIDU_SERVER_URL="https://localhost:4443",this.OPENVIDU_SERVER_SECRET="MY_SECRET",this.subscribers=[],this.recordingState="idle",this.webcams=[],this.tags=[],this.participants=[],this.thumbnailUploaded=!1,this.apiUrl=W.c,this.sessionData={sessionName:"",myUserName:""},this.userStocks=[],this.messages=[],this.subscriptions=[],this._getUserInfo()}ngOnInit(){this.getUserChannel(),this.getVideoSessionData(),this.sessionData&&this.videoSettings&&this.joinSession(),this.subscriptions.push(this.subject.getVideoRecordingState().subscribe(e=>{"finished"===e.recordingState&&this.leaveSession(),e.viaSocket||this.sendRecordingState(e.recording)})),this.subscriptions.push(this.stocksService.getUserStocks({user_id:this.authUser.id}).subscribe(e=>{this.userStocks=(null==e?void 0:e.user_stocks)||[]}))}_getUserInfo(){this._userInfoService._userInfo.subscribe(e=>{this.authUser=e,console.log(this.authUser,"Video")})}beforeunloadHandler(){this.leaveSession(),"started"===this.recordingState&&this.removeLiveVideoByToken()}alertOfLeaving(){this.toastr.error("Please stop recording first")}getUserChannel(){this.subscriptions.push(this.usersService.getUserInfo({username:this.authUser.username}).subscribe(e=>{this.channelUser=e}))}getVideoSessionData(){const e=localStorage.getItem("session"),t=localStorage.getItem("video_settings");this.sessionData=e?JSON.parse(e):null,this.videoSettings=t?JSON.parse(t):null,console.log(this.videoSettings,this.sessionData)}joinSession(){this.OV=new U.OpenVidu,this.session=this.OV.initSession(),this.getStreamEvents(),this.loader.dataLoading=!0,this.subscriptions.push(this.openViduService.getToken({email:this.authUser.email,sessionName:this.sessionData.sessionName,role:"PUBLISHER"}).subscribe(e=>{console.log(e),this.openViduToken=e,this.receiveMessage(),this.receiveRecordingState(),this.session.connect(e,{clientData:this.sessionData,avatar:this.authUser.avatar,from_user:this.authUser}).then(()=>{if(this.loader.dataLoading=!1,e.includes("PUBLISHER")){const e=this.elRef.nativeElement.querySelector("video"),t=this.OV.initPublisher(e,{audioSource:void 0,videoSource:void 0,publishAudio:!0,publishVideo:!0,resolution:"640x480",frameRate:30,insertMode:"APPEND",mirror:!1});console.log(t),this.session.publish(t),this.mainStreamManager=t,this.publisher=t}}).catch(e=>{this.toastr.error("There was a problem white loading streaming session"),console.log(e)})}))}getStreamEvents(){this.session.on("streamCreated",e=>{this.elRef.nativeElement.querySelector("video"),this.thumbnailFile=this.videoSettings.thumbnail,this.session.subscribe(e.stream,void 0)}),this.session.on("connectionCreated",e=>{const t=JSON.parse(e.connection.data.replace(/}%\/%{/g,","));this.participants.push(t.clientData.myUserName)}),this.session.on("connectionDestroyed",e=>{const t=JSON.parse(e.connection.data.replace(/}%\/%{/g,","));this.participants=this.participants.filter(e=>e!==t.clientData.myUserName)}),this.session.on("streamDestroyed",e=>{this.deleteSubscriber(e.stream.streamManager),this.leaveSession()})}updateMainStreamManager(e){this.mainStreamManager=e}deleteSubscriber(e){console.log(this.subscribers)}getRecordedVideoId(e){this.savedVideoSettings=e,this.videoId=null==e?void 0:e.id;const{hostName:t}=this.getUrlParts.transform(window.location.href);this.shareUrl=`${t}users/video/watch?session=${this.sessionData.sessionName}&publisher=${this.authUser.username}&id=${this.videoId}`}leaveSession(){console.log("leaving session!!!"),this.session&&this.session.disconnect(),this.subscribers=[],delete this.publisher,delete this.session,delete this.OV,this.thumbnailFile=[],this.thumbnailUploaded=!1,this.sessionData&&this.subscriptions.push(this.openViduService.leaveSession({token:this.openViduToken,sessionName:this.sessionData.sessionName,role:"publisher"}).subscribe(()=>{}))}sendMessage(e){console.log(e),this.session.signal({data:e.message,to:[],type:"my-chat"}).then(()=>{this.subscriptions.push(this.videoChatService.saveVideoMessage(Object.assign({video_id:this.videoId},e)).subscribe(e=>{this.messages=e}))}).catch(e=>{console.error(e)})}sendRecordingState(e){this.session&&this.session.signal({data:e,to:[],type:"recording-state"}).then(()=>{})}receiveRecordingState(){this.session.on("signal:recording-state",e=>{this.recordingState=e.data?"started":"finished","finished"===this.recordingState&&(this.tags=[]),this.subject.setVideoRecordingState(Object.assign({recordingState:this.recordingState},{viaSocket:!0}))})}receiveMessage(){this.session.on("signal:my-chat",e=>{this.subject.setMsgData({message:e.data,from_user:e.from.data})})}removeLiveVideoByToken(){this.videoService.removeVideoByToken({token:this.openViduToken}).subscribe(()=>{})}reloadPage(){location.reload()}ngOnDestroy(){"started"===this.recordingState&&this.removeLiveVideoByToken(),this.leaveSession(),this.subscriptions.forEach(e=>e.unsubscribe())}openSocialShareModal(){if(console.log("modal"),console.log(this.recordingState),"started"===this.recordingState&&this.dialog.open(B.a,{width:"500px",height:"400px",data:{shareUrl:this.shareUrl}}).afterClosed().subscribe(e=>{}),"finished"===this.recordingState){const{hostName:e}=this.getUrlParts.transform(window.location.href);this.shareUrl=`${e}videos/play?id=${this.videoId}`,this.dialog.open(B.a,{width:"500px",height:"400px",data:{shareUrl:this.shareUrl}}).afterClosed().subscribe(e=>{})}}ngAfterViewInit(){}}return e.\u0275fac=function(t){return new(t||e)(g.Qb(g.h),g.Qb(b.b),g.Qb(g.l),g.Qb(z),g.Qb(G.a),g.Qb(f.a),g.Qb(O.a),g.Qb(Q.a),g.Qb(K.a),g.Qb(H.a),g.Qb(o.e),g.Qb(o.a),g.Qb(C.b),g.Qb(h.a),g.Qb(m.a),g.Qb(q.a))},e.\u0275cmp=g.Kb({type:e,selectors:[["app-video"]],viewQuery:function(e,t){var n;1&e&&g.Rc($,!0),2&e&&g.wc(n=g.fc())&&(t.videoEl=n.first)},hostBindings:function(e,t){1&e&&g.ec("beforeunload",(function(){return t.beforeunloadHandler()}),!1,g.Ac)},decls:2,vars:2,consts:[["class","session-loader",3,"diameter",4,"ngIf"],["id","video-stream-container",4,"ngIf"],[1,"session-loader",3,"diameter"],["id","video-stream-container"],[4,"ngIf"],["class","no-stored-session-data",4,"ngIf"],["class","stream-errors",4,"ngIf"],["id","video-chat-container",1,"videoContainerLivePartDiv"],[1,"left"],[1,"video-container","liveVideo"],[3,"openViduToken","thumbnailFile","videoSettings","participants","recordingStarted"],["id","video-info-row"],["id","video-info"],[1,"videoTagsAndActions"],["id","video-tags-list"],["class","tag",4,"ngFor","ngForOf"],["id","video-info-actions",4,"ngIf"],["class","details-row",4,"ngIf"],["class","live-now",4,"ngIf"],["id","channel-info"],["id","channel-avatar",1,"avatar",3,"src"],["id","channel-name"],[1,"subscribers-count"],[3,"stocks","videoStreaming"],[1,"chat-container"],[3,"openViduToken","messages","session","videoId","videoRecordingState","sendMessage",4,"ngIf"],[1,"tag"],["id","video-info-actions"],["id","participants-count"],[1,"fa","fa-users"],["id","share-wrap",3,"click"],[1,"fas","fa-share-alt"],[1,"details-row"],[1,"watchers-count"],[1,"dot"],[1,"date"],[1,"live-now"],[3,"openViduToken","messages","session","videoId","videoRecordingState","sendMessage"],[1,"no-stored-session-data"],[1,"d-flex","flex-column","justify-content-center","align-items-center","mx-auto","py-5","mt-5"],["src","assets/img/errorPage.svg","alt","no-stored-session-data-img","width","500","height","370"],[1,"text-center"],["routerLink","/users/video/start-live-video"],[1,"stream-errors"],["src","assets/img/errorLoading.svg","alt","no-stored-session-data-img","width","150","height","200"],[1,"reload",3,"click"],[1,"d-none"],["src","assets/img/dataError.svg","alt","stream-errors-img","width","334","height","471"],[1,"text-center","top"]],template:function(e,t){1&e&&(g.Kc(0,ee,1,1,"mat-spinner",0),g.Kc(1,le,4,3,"div",1)),2&e&&(g.pc("ngIf",t.loader.dataLoading),g.Cb(1),g.pc("ngIf",!t.loader.dataLoading))},directives:[i.t,S.c,Y.a,i.s,Z.a,J.a,o.h],pipes:[y.a,X.a],styles:[".session-container[_ngcontent-%COMP%]{height:100vh}#img-div[_ngcontent-%COMP%]{text-align:center}#img-div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:200px}.join-session-btn[_ngcontent-%COMP%]{background-color:#18b587;width:25%;margin-top:33px;border:none}#video-chat-container[_ngcontent-%COMP%]{display:flex}#video-chat-container[_ngcontent-%COMP%]   .video-container[_ngcontent-%COMP%]{flex:1;display:flex;align-items:flex-start}#video-chat-container[_ngcontent-%COMP%]   .chat-container[_ngcontent-%COMP%]{flex:0.5;margin-left:10px;display:flex}@media (max-width:750px){#video-chat-container[_ngcontent-%COMP%]   .chat-container[_ngcontent-%COMP%]{margin-left:0}}#video-chat-container[_ngcontent-%COMP%]   app-video-js-record[_ngcontent-%COMP%]{flex:1;position:relative;width:100%;overflow:hidden;padding:30% 0}#streaming-not-started-yet[_ngcontent-%COMP%]{width:500px;height:400px;display:flex;align-items:center;justify-content:center;font-family:Muli-Light;background:#efefef}.stream-container[_ngcontent-%COMP%]{overflow:hidden}.stream-errors[_ngcontent-%COMP%]{display:flex}@media (max-width:767px){.stream-errors[_ngcontent-%COMP%]{flex-direction:column}}.reload[_ngcontent-%COMP%]{text-decoration:underline;color:#000}#video-stream-container[_ngcontent-%COMP%]{height:100vh}#video-info-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:20px}#video-info-row[_ngcontent-%COMP%]   #video-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-family:Muli-Bold,sans-serif;margin-top:10px}#video-info-row[_ngcontent-%COMP%]   #video-info-actions[_ngcontent-%COMP%]{display:flex}#video-info-row[_ngcontent-%COMP%]   #video-info-actions[_ngcontent-%COMP%]   #participants-count[_ngcontent-%COMP%]{display:flex;align-items:center;color:#545454;font-size:12px}#video-info-row[_ngcontent-%COMP%]   #video-info-actions[_ngcontent-%COMP%]   #participants-count[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:Muli-Light,sans-serif}#video-info-row[_ngcontent-%COMP%]   #video-info-actions[_ngcontent-%COMP%]   #share-wrap[_ngcontent-%COMP%]{margin-left:10px}#channel-info[_ngcontent-%COMP%]{border-top:.5px solid #c9c9c9;border-bottom:.5px solid #c9c9c9;display:flex;flex-direction:row;margin-bottom:20px;margin-top:12px;padding:12px 0}#channel-info[_ngcontent-%COMP%]   #channel-name[_ngcontent-%COMP%]{font-family:Muli-Bold,sans-serif;color:#545454;font-size:16px;margin-bottom:4px;overflow:hidden;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical}#share-wrap[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer}#share-wrap[_ngcontent-%COMP%], #share-wrap[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;color:#545454}#share-wrap[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-left:5px;font-family:Muli-Light,sans-serif;margin-bottom:0!important}.left[_ngcontent-%COMP%]{flex:1}#video-tags-list[_ngcontent-%COMP%]{display:flex}#video-tags-list[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]{color:#0035c6;font-size:16px;font-family:Muli-Bold,sans-serif;margin-right:16px}.live-now[_ngcontent-%COMP%]{width:52px;height:20px;position:static}.details-row[_ngcontent-%COMP%]{display:flex;align-items:center}.details-row[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{margin:0 10px}.liveVideo[_ngcontent-%COMP%]{display:flex!important}@media (max-width:750px){.videoContainerLivePartDiv[_ngcontent-%COMP%]{flex-direction:column}}#video-info[_ngcontent-%COMP%], #video-info-row[_ngcontent-%COMP%]{width:100%}.videoTagsAndActions[_ngcontent-%COMP%]{display:flex;justify-content:space-between}"]}),e})();var ue=n("+xpX");const ge=["ovSessionComponent"];function he(e,t){if(1&e){const e=g.Xb();g.Wb(0,"div",2),g.Wb(1,"div",3),g.Wb(2,"h1"),g.Mc(3,"Join a video session"),g.Vb(),g.Wb(4,"form",4),g.Wb(5,"p"),g.Wb(6,"label"),g.Mc(7,"Participant"),g.Vb(),g.Rb(8,"input",5),g.Vb(),g.Wb(9,"p"),g.Wb(10,"label"),g.Mc(11,"Session"),g.Vb(),g.Rb(12,"input",6),g.Vb(),g.Wb(13,"p",7),g.Wb(14,"button",8),g.ec("click",(function(){return g.Bc(e),g.ic().joinSession()})),g.Mc(15,"Join!"),g.Vb(),g.Vb(),g.Vb(),g.Vb(),g.Vb()}if(2&e){const e=g.ic();g.Cb(4),g.pc("formGroup",e.joinSessionForm)}}function pe(e,t){if(1&e){const e=g.Xb();g.Wb(0,"div",9),g.Wb(1,"opv-session",10,11),g.ec("sessionCreated",(function(t){return g.Bc(e),g.ic().handlerSessionCreatedEvent(t)}))("publisherCreated",(function(t){return g.Bc(e),g.ic().handlerPublisherCreatedEvent(t)}))("error",(function(t){return g.Bc(e),g.ic().handlerErrorEvent(t)})),g.Vb(),g.Vb()}if(2&e){const e=g.ic();g.Cb(1),g.pc("sessionName",e.mySessionId)("user",e.myUserName)("tokens",e.tokens)}}let me=(()=>{class e{constructor(e,t,n,i){this.fb=e,this.openViduService=t,this.toastr=n,this.elRef=i,this.OPENVIDU_SERVER_URL="https://localhost/:4443",this.OPENVIDU_SERVER_SECRET="MY_SECRET",this.mySessionId="SessionA",this.myUserName="Participant"+Math.floor(100*Math.random()),this.tokens=[],this.session=!1,this.initForm()}ngOnInit(){}initForm(){this.joinSessionForm=this.fb.group({mySessionId:["SessionB"],myUserName:["Participant"+Math.floor(100*Math.random())]})}joinSession(){return Object(s.a)(this,void 0,void 0,(function*(){this.getToken()}))}getToken(){this.openViduService.getToken({email:"admin@gmail.com",sessionName:"SessionA"}).subscribe(e=>{console.log(e),this.tokens.push(e),this.session=!0,console.log("getToken ",this.tokens)},e=>{console.log(e)})}leaveSession(){}handlerSessionCreatedEvent(e){console.log("SESSION CREATED EVENT",e),e.on("streamCreated",e=>{console.log("stream created!!!")}),e.on("streamDestroyed",e=>{}),e.on("sessionDisconnected",e=>{this.session=!1,this.tokens=[]})}handlerPublisherCreatedEvent(e){e.on("streamCreated",e=>{console.log("Publisher streamCreated",e)})}handlerErrorEvent(e){console.log("error",e)}myMethod(){this.ovLocalUsers=this.ovSessionComponent.getLocalUsers(),this.ovLayout=this.ovSessionComponent.getOpenviduLayout(),this.ovLayoutOptions=this.ovSessionComponent.getOpenviduLayoutOptions()}ngOnDestroy(){this.leaveSession()}}return e.\u0275fac=function(t){return new(t||e)(g.Qb(r.f),g.Qb(z),g.Qb(b.b),g.Qb(g.l))},e.\u0275cmp=g.Kb({type:e,selectors:[["app-video-library"]],viewQuery:function(e,t){var n;1&e&&g.Rc(ge,!0),2&e&&g.wc(n=g.fc())&&(t.ovSessionComponent=n.first)},decls:2,vars:2,consts:[["id","join",4,"ngIf"],["id","session",4,"ngIf"],["id","join"],["id","join-dialog"],[1,"form-group",3,"formGroup"],["id","userName","formControlName","mySessionId","required","",1,"form-control"],["id","sessionId","formControlName","myUserName","required","",1,"form-control"],[1,"text-center"],["type","button",1,"btn","btn-lg","btn-success","join-session-btn",3,"click"],["id","session"],[3,"sessionName","user","tokens","sessionCreated","publisherCreated","error"],["ovSessionComponent",""]],template:function(e,t){1&e&&(g.Kc(0,he,16,1,"div",0),g.Kc(1,pe,3,3,"div",1)),2&e&&(g.pc("ngIf",!t.session),g.Cb(1),g.pc("ngIf",t.session))},directives:[i.t,r.I,r.t,r.k,r.c,r.s,r.i,r.D,ue.OpenviduSessionComponent],styles:["#join[_ngcontent-%COMP%]{text-align:center}#join[_ngcontent-%COMP%], #session[_ngcontent-%COMP%]{position:absolute;margin:auto;top:100px;bottom:0;left:0;right:0;height:70%;width:45%}"]}),e})();var fe=n("kmnG"),be=n("d3UM"),ve=n("NFeN"),Ce=n("FKr1"),Oe=n("t9lf");function Se(e,t){1&e&&(g.Wb(0,"div",5),g.Rb(1,"mat-spinner",6),g.Wb(2,"strong"),g.Mc(3,"Loading devices info"),g.Vb(),g.Vb()),2&e&&(g.Cb(1),g.pc("diameter",20))}function ye(e,t){if(1&e&&(g.Wb(0,"mat-option",20),g.Mc(1),g.Vb()),2&e){const e=t.$implicit;g.pc("value",e.label),g.Cb(1),g.Oc(" ",e.label," ")}}const Me=function(){return{kind:"videoinput"}};function xe(e,t){if(1&e){const e=g.Xb();g.Wb(0,"div",15),g.Wb(1,"span",14),g.Mc(2,"videocam"),g.Vb(),g.Wb(3,"mat-form-field",16),g.Wb(4,"mat-select",17),g.Kc(5,ye,2,2,"mat-option",18),g.jc(6,"filterDevices"),g.Vb(),g.Vb(),g.Wb(7,"mat-icon",19),g.ec("click",(function(){return g.Bc(e),g.ic(2).getConnectedDevices()})),g.Mc(8,"refresh"),g.Vb(),g.Vb()}if(2&e){const e=g.ic(2);g.Cb(5),g.pc("ngForOf",g.lc(6,1,e.userMediaDevices,g.sc(4,Me)))}}function _e(e,t){if(1&e){const e=g.Xb();g.Wb(0,"div",21),g.Wb(1,"mat-icon"),g.Mc(2,"videocam_off"),g.Vb(),g.Ub(3),g.Wb(4,"span"),g.Mc(5,"Can't find camera. Make sure it's connected and try again"),g.Vb(),g.Wb(6,"mat-icon",19),g.ec("click",(function(){return g.Bc(e),g.ic(2).getConnectedDevices()})),g.Mc(7,"refresh"),g.Vb(),g.Tb(),g.Vb()}}function Pe(e,t){if(1&e&&(g.Wb(0,"mat-option",20),g.Mc(1),g.Vb()),2&e){const e=t.$implicit;g.pc("value",e.label),g.Cb(1),g.Oc(" ",e.label," ")}}const we=function(){return{kind:"audioinput"}};function Ee(e,t){if(1&e){const e=g.Xb();g.Wb(0,"div",15),g.Wb(1,"span",14),g.Mc(2,"mic"),g.Vb(),g.Wb(3,"mat-form-field",16),g.Wb(4,"mat-select",22),g.Kc(5,Pe,2,2,"mat-option",18),g.jc(6,"filterDevices"),g.Vb(),g.Vb(),g.Wb(7,"mat-icon",19),g.ec("click",(function(){return g.Bc(e),g.ic(2).getConnectedDevices()})),g.Mc(8,"refresh"),g.Vb(),g.Vb()}if(2&e){const e=g.ic(2);g.Cb(5),g.pc("ngForOf",g.lc(6,1,e.userMediaDevices,g.sc(4,we)))}}function ke(e,t){if(1&e){const e=g.Xb();g.Wb(0,"div",21),g.Wb(1,"mat-icon"),g.Mc(2,"mic"),g.Vb(),g.Wb(3,"span"),g.Mc(4,"Can't find microphone. Make sure it's connected and try again"),g.Vb(),g.Wb(5,"mat-icon",19),g.ec("click",(function(){return g.Bc(e),g.ic(2).getConnectedDevices()})),g.Mc(6,"refresh"),g.Vb(),g.Vb()}}function Ie(e,t){if(1&e){const e=g.Xb();g.Wb(0,"form",7),g.Wb(1,"div",8),g.Wb(2,"div",9),g.Wb(3,"div",10),g.Kc(4,xe,9,5,"div",11),g.Kc(5,_e,8,0,"div",12),g.Vb(),g.Wb(6,"div",10),g.Kc(7,Ee,9,5,"div",11),g.Kc(8,ke,7,0,"div",12),g.Vb(),g.Vb(),g.Vb(),g.Wb(9,"button",13),g.ec("click",(function(){return g.Bc(e),g.ic().startLiveVideo()})),g.Wb(10,"span",14),g.Mc(11," video_call "),g.Vb(),g.Wb(12,"span"),g.Mc(13,"Start live video"),g.Vb(),g.Vb(),g.Vb()}if(2&e){const e=g.ic();g.pc("formGroup",e.deviceRecognitionForm),g.Cb(4),g.pc("ngIf",!e.videoDevice.hasError("required")),g.Cb(1),g.pc("ngIf",e.videoDevice.hasError("required")),g.Cb(2),g.pc("ngIf",!e.audioDevice.hasError("required")),g.Cb(1),g.pc("ngIf",e.audioDevice.hasError("required")),g.Cb(1),g.pc("disabled",!e.deviceRecognitionForm.valid)}}let Te=(()=>{class e{constructor(e,t,n,i){this.toastr=e,this.fb=t,this._userInfoService=n,this.router=i,this.deviceStatus="idle",this.checked=new g.o,this._getAuthInfo()}ngOnInit(){this.initForm()}_getAuthInfo(){this._userInfoService._userInfo.subscribe(e=>{this.authUser=e,console.log(this.authUser,"Check streaming requirements  AUTHUSER DATA")})}initForm(){this.deviceRecognitionForm=this.fb.group({video_device:["",r.G.required],audio_device:["",r.G.required]})}startLiveVideo(){return Object(s.a)(this,void 0,void 0,(function*(){this.checked.emit(!0)}))}ngAfterViewInit(){return Object(s.a)(this,void 0,void 0,(function*(){yield this.getConnectedDevices(!0)}))}getConnectedDevices(e=!1){return Object(s.a)(this,void 0,void 0,(function*(){navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then(()=>{this.deviceStatus="loading",navigator.mediaDevices.enumerateDevices().then(e=>{var t,n;this.deviceStatus="loaded",this.userMediaDevices=e,this.defaultVideoDevice=e.find(e=>"videoinput"===e.kind),this.deviceRecognitionForm.patchValue({video_device:null===(t=this.defaultVideoDevice)||void 0===t?void 0:t.label}),this.defaultAudioDevice=e.find(e=>"audioinput"===e.kind),this.deviceRecognitionForm.patchValue({audio_device:null===(n=this.defaultAudioDevice)||void 0===n?void 0:n.label})}).catch(e=>{this.deviceRecognitionForm.patchValue({audio_device:"",video_device:""}),this.toastr.error(e.message)})}).catch(e=>{console.log(e),this.deviceStatus="failed",this.deviceRecognitionForm.patchValue({audio_device:"",video_device:""}),console.log(this.deviceRecognitionForm.value),this.toastr.error(e.message)})}))}get audioDevice(){return this.deviceRecognitionForm.get("audio_device")}get videoDevice(){return this.deviceRecognitionForm.get("video_device")}}return e.\u0275fac=function(t){return new(t||e)(g.Qb(b.b),g.Qb(r.f),g.Qb(f.a),g.Qb(o.e))},e.\u0275cmp=g.Kb({type:e,selectors:[["app-check-requirements"]],outputs:{checked:"checked"},decls:13,vars:2,consts:[[1,"start-live-video-page"],[1,"text"],["href","https://www.copyright.gov/dmca-directory/","target","_blank"],["class","loader",4,"ngIf"],[3,"formGroup",4,"ngIf"],[1,"loader"],[3,"diameter"],[3,"formGroup"],["id","devices"],[1,"item-wrap"],[1,"item"],["class","info border",4,"ngIf"],["class","error-msg",4,"ngIf"],["type","button",1,"btn",3,"disabled","click"],[1,"material-icons"],[1,"info","border"],[2,"width","88%"],["formControlName","video_device"],[3,"value",4,"ngFor","ngForOf"],[1,"refresh",3,"click"],[3,"value"],[1,"error-msg"],["formControlName","audio_device"]],template:function(e,t){1&e&&(g.Wb(0,"div",0),g.Wb(1,"div",1),g.Wb(2,"h1"),g.Mc(3,"Start live video"),g.Vb(),g.Wb(4,"p"),g.Mc(5,"Start sharing your story and connecting with viewers. Get your webcam ready, check your lighting, and click below to go live! We ask that you keep in mind of the "),g.Wb(6,"a",2),g.Mc(7,"DMCA rules"),g.Vb(),g.Mc(8," and please do not play any music that is not owned by you while you stream. We will remove any videos that are in violation of the DMCA. "),g.Rb(9,"br"),g.Mc(10," Smile, you look great! "),g.Vb(),g.Kc(11,Se,4,1,"div",3),g.Kc(12,Ie,14,6,"form",4),g.Vb(),g.Vb()),2&e&&(g.Cb(11),g.pc("ngIf","loaded"!==t.deviceStatus&&"failed"!==t.deviceStatus),g.Cb(1),g.pc("ngIf","loaded"===t.deviceStatus||"failed"===t.deviceStatus))},directives:[i.t,S.c,r.I,r.t,r.k,fe.c,be.a,r.s,r.i,i.s,ve.a,Ce.n],pipes:[Oe.a],styles:[".start-live-video-page[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;max-width:810px;margin:160px auto 0;padding:144px 0 80px 280px;background-size:contain;background-position:0 0;background-repeat:no-repeat;background-image:url(/assets/img/live-video.png)}.start-live-video-page[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{max-width:532px}.start-live-video-page[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;color:#18b587}.start-live-video-page[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:16px;margin-bottom:0;font-size:16px;color:#545454}.start-live-video-page[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]{display:flex;padding:10px;align-items:center;justify-content:center}.start-live-video-page[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{margin-left:10px;color:#18b587}.start-live-video-page[_ngcontent-%COMP%]   .refresh[_ngcontent-%COMP%]{cursor:pointer}.start-live-video-page[_ngcontent-%COMP%]   .item-wrap[_ngcontent-%COMP%]{margin-top:16px}.start-live-video-page[_ngcontent-%COMP%]   .item-wrap[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{margin-bottom:8px}.start-live-video-page[_ngcontent-%COMP%]   .item-wrap[_ngcontent-%COMP%]   .item.d-flex[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-right:40px}.start-live-video-page[_ngcontent-%COMP%]   .item-wrap[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;justify-content:space-between;color:#18b587;font-size:14px;margin-bottom:2px}.start-live-video-page[_ngcontent-%COMP%]   .item-wrap[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .edit[_ngcontent-%COMP%]{font-size:16px;color:#545454;cursor:pointer}.start-live-video-page[_ngcontent-%COMP%]   .item-wrap[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .edit[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:20px;margin-left:4px}.start-live-video-page[_ngcontent-%COMP%]   .item-wrap[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;align-items:center}.start-live-video-page[_ngcontent-%COMP%]   .item-wrap[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info.border[_ngcontent-%COMP%]{border:0!important}.start-live-video-page[_ngcontent-%COMP%]   .item-wrap[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info.border[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:not(.material-icons){border-bottom:.5px solid #dcdcdc}.start-live-video-page[_ngcontent-%COMP%]   .item-wrap[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:not(.material-icons){flex:1}.start-live-video-page[_ngcontent-%COMP%]   .item-wrap[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{margin-right:8px}.start-live-video-page[_ngcontent-%COMP%]   .item-wrap[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{color:#545454;font-weight:600;font-size:16px}.start-live-video-page[_ngcontent-%COMP%]   .item-wrap[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:20px}.start-live-video-page[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-top:24px;padding:8px 32px;display:flex;align-items:center;background:#f53c6f;font-size:16px;color:#fff;border-radius:0;transition:.3s ease-in-out}.start-live-video-page[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:8px}.start-live-video-page[_ngcontent-%COMP%]   .error-msg[_ngcontent-%COMP%]{display:flex}"]}),e})();var Ae=n("FtGj"),Ve=n("fFb+"),Re=n("A5z7"),Le=n("qFsG"),Ne=n("/1cH"),De=n("QibW");const je=["chipsInput"],Ue=["tagList"];function We(e,t){1&e&&(g.Wb(0,"mat-error"),g.Mc(1,"The stream name is required"),g.Vb())}function Be(e,t){if(1&e){const e=g.Xb();g.Wb(0,"mat-chip",28),g.ec("removed",(function(){g.Bc(e);const n=t.$implicit;return g.ic().remove(n)})),g.Mc(1),g.Wb(2,"mat-icon",29),g.Mc(3,"cancel"),g.Vb(),g.Vb()}if(2&e){const e=t.$implicit;g.Cb(1),g.Oc(" ",e.name," ")}}function Fe(e,t){if(1&e&&(g.Wb(0,"mat-option",31),g.Mc(1),g.Vb()),2&e){const e=t.$implicit;g.pc("value",e),g.Cb(1),g.Oc(" ",null==e?null:e.tag_details.name," ")}}function ze(e,t){if(1&e&&(g.Wb(0,"mat-optgroup",30),g.Kc(1,Fe,2,2,"mat-option",19),g.Vb()),2&e){const e=t.$implicit;g.pc("label",e.name),g.Cb(1),g.pc("ngForOf",e.values)}}function Ge(e,t){1&e&&(g.Wb(0,"mat-error"),g.Mc(1,"Please provide some tags describing your live video "),g.Vb())}function Qe(e,t){1&e&&(g.Wb(0,"mat-error"),g.Mc(1,"Only 3 tags please"),g.Vb())}function Ke(e,t){if(1&e){const e=g.Xb();g.Wb(0,"mat-autocomplete",11,12),g.ec("optionSelected",(function(t){return g.Bc(e),g.ic().autocompleteSelect(t)})),g.Wb(2,"mat-option"),g.Mc(3," OK "),g.Vb(),g.Vb()}}function He(e,t){if(1&e&&(g.Wb(0,"option",31),g.Mc(1),g.Vb()),2&e){const e=t.$implicit;g.pc("value",e.id),g.Cb(1),g.Nc(e.name)}}function qe(e,t){1&e&&(g.Wb(0,"mat-error"),g.Mc(1," The stream category is required "),g.Vb())}function Ye(e,t){1&e&&(g.Wb(0,"mat-error"),g.Mc(1," The stream description is required "),g.Vb())}function Ze(e,t){if(1&e&&(g.Wb(0,"mat-radio-button",31),g.Mc(1),g.Wb(2,"mat-icon"),g.Mc(3),g.Vb(),g.Vb()),2&e){const e=t.$implicit;g.pc("value",e.name),g.Cb(1),g.Oc(" ",e.name," "),g.Cb(2),g.Nc(e.icon)}}function Je(e,t){1&e&&g.Rb(0,"mat-spinner",35),2&e&&g.pc("diameter",15)}function Xe(e,t){1&e&&(g.Wb(0,"mat-error"),g.Mc(1," The thumbnail is required "),g.Vb())}function $e(e,t){if(1&e){const e=g.Xb();g.Ub(0),g.Wb(1,"label",32),g.ec("click",(function(){return g.Bc(e),g.ic().uploadImg()})),g.Wb(2,"span",33),g.Mc(3,"backup"),g.Vb(),g.Mc(4," Upload Thumbnail "),g.Vb(),g.Kc(5,Je,1,1,"mat-spinner",34),g.Kc(6,Xe,2,0,"mat-error",4),g.Tb()}if(2&e){const e=g.ic();g.Cb(5),g.pc("ngIf",e.loader.fileProcessing),g.Cb(1),g.pc("ngIf",e.startStreamingForm.get("thumbnail").hasError("required")&&e.isSubmitted)}}function et(e,t){if(1&e){const e=g.Xb();g.Wb(0,"div",36),g.Wb(1,"mat-icon",37),g.ec("click",(function(){g.Bc(e);const t=g.ic();return t.removeUploadedThumbnail(t.thumbnailImage)})),g.Mc(2,"clear "),g.Vb(),g.Rb(3,"img",38),g.Vb()}if(2&e){const e=g.ic();g.Cb(3),g.qc("src",e.apiUrl+"uploads/images/"+e.imageName,g.Ec)}}let tt=(()=>{class e{constructor(e,t,n,i,o,s,r){this.videoService=e,this.toastr=t,this.fb=n,this.loader=i,this.dialog=o,this.uploadFile=s,this._userInfoService=r,this.isSubmitted=!1,this.thumbnailUploading=!1,this.thumbnailUploaded=!1,this.apiUrl=W.c,this.tags=[],this.sessionName="SessionA",this.separatorKeysCodes=[Ae.g,Ae.c],this.privacyTypes=[{name:"Public",icon:"public"},{name:"Private",icon:"lock"}],this.savedTags=[],this.count=0,this.limit=W.j,this.formReady=new g.o,this._getAuthInfo()}ngOnInit(){this.selectedPrivacy=this.privacyTypes[0],this.initForm(),this.getVideoCategories()}_getAuthInfo(){this._userInfoService._userInfo.subscribe(e=>{this.authUser=e,console.log(this.authUser,"Collect steaming details  AUTHUSER DATA")})}initForm(){this.startStreamingForm=this.fb.group({name:["",r.G.required],description:["",[r.G.required,r.G.maxLength(this.limit)]],category_id:["",r.G.required],tags:[[],r.G.required],sessionName:[this.sessionName],myUserName:[this.authUser.username],thumbnail:["",r.G.required],privacy:["Public"],status:["live"]})}getVideoCategories(){this.videoService.getVideoCategories().subscribe(e=>{this.videoCategories=e})}getVideoTags(){this.videoService.getVideoTags().subscribe(e=>{this.savedTags=e})}changedPrivacy(e){this.selectedPrivacy=this.privacyTypes.find(t=>t.name===e.value)}autocompleteSelect(e){console.log(e)}add(e){console.log("add");const t=e.input;if(this.tags.length<3){const t=e.value;(t||"").trim()&&(this.tags.push({name:t.trim()}),this.startStreamingForm.patchValue({tags:this.tags}))}t&&(t.value="")}resetValue(e){e.target.value&&this.tags.length>=3&&(e.target.value="")}remove(e){const t=this.tags.indexOf(e);t>=0&&(this.tags.splice(t,1),this.startStreamingForm.patchValue({tags:this.tags}))}uploadImg(){this.dialog.open(Ve.a,{maxWidth:"591px",maxHeight:"479px",height:"100%",width:"100%",data:{countUploadFile:"oneFile",type:"image"}}).afterClosed().subscribe(e=>{if(e){if(this.thumbnailUploading=!0,this.loader.fileProcessing=!0,"string"==typeof e)return this.thumbnailUploading=!1,this.loader.fileProcessing=!1,this.toastr.error(e);if(!e[0].type.includes("image"))return this.thumbnailUploading=!1,this.loader.fileProcessing=!1,this.toastr.error(e);{const t=new FormData,n="image";e.forEach(e=>{t.append("image",e.file),t.append("belonging","thumbnail_image"),t.append("duration","")}),this.uploadFile.uploadFile(t,n).subscribe(e=>{this.thumbnailImage=e.path,this.imageName=e.path,this.startStreamingForm.patchValue({thumbnail:this.imageName}),this.toastr.success(e.message),this.thumbnailUploading=!1,this.loader.fileProcessing=!1,this.thumbnailUploaded=!0})}}})}getThumbnailFile(e){}removeUploadedThumbnail(e){console.log(e),this.videoService.deleteFile(e,"image").subscribe(e=>{this.thumbnailImage="",this.toastr.success("The thumbnail has been removed successfully"),this.thumbnailUploaded=!1,this.startStreamingForm.patchValue({thumbnail:""})})}submit(){var e;this.isSubmitted=!0,this.startStreamingForm.valid&&this.tags.length<=3&&this.formReady.emit(Object.assign({categoryName:null===(e=this.videoCategories.find(e=>e.id===+this.startStreamingForm.value.category_id))||void 0===e?void 0:e.name},this.startStreamingForm.value))}resetTextArea(e){e.target.value.length>this.limit&&(e.target.value=e.target.value.slice(0,this.limit),this.startStreamingForm.value.description=e.target.value),this.count=e.target.value.length}get streamName(){return this.startStreamingForm.get("name")}get streamDesc(){return this.startStreamingForm.get("description")}get streamCategory(){return this.startStreamingForm.get("category_id")}get streamTags(){return this.startStreamingForm.get("tags")}autoCompleteTagsSelected(e){this.tags.length<3&&(this.tags.push({name:e.option.viewValue}),this.startStreamingForm.patchValue({tags:this.tags}))}}return e.\u0275fac=function(t){return new(t||e)(g.Qb(O.a),g.Qb(b.b),g.Qb(r.f),g.Qb(h.a),g.Qb(C.b),g.Qb(O.a),g.Qb(f.a))},e.\u0275cmp=g.Kb({type:e,selectors:[["app-stream-details-form"]],viewQuery:function(e,t){var n;1&e&&(g.Rc(je,!0),g.Rc(Ue,!0)),2&e&&(g.wc(n=g.fc())&&(t.chipsInput=n.first),g.wc(n=g.fc())&&(t.tagList=n.first))},outputs:{formReady:"formReady"},decls:40,vars:19,consts:[["id","start-streaming-form",3,"formGroup"],[1,"start-live-video"],["id","video-name"],["formControlName","name","placeholder","Video name",1,"liveVideo"],[4,"ngIf"],["id","video-tags"],["aria-label","Fruit selection","formControlName","tags"],["tagList",""],[3,"removed",4,"ngFor","ngForOf"],["type","text","placeholder","Tags...","matInput","","maxlength","10",1,"liveVideo",3,"matChipInputFor","matChipInputSeparatorKeyCodes","matAutocomplete","input","matChipInputTokenEnd"],["chipsInput",""],[3,"optionSelected"],["auto","matAutocomplete"],[3,"label",4,"ngFor","ngForOf"],["align","end"],[3,"optionSelected",4,"ngIf"],["id","video-categories"],["formControlName","category_id",1,"liveVideo"],["selected","","disabled","",3,"value"],[3,"value",4,"ngFor","ngForOf"],["id","video-description"],["formControlName","description","placeholder","Video description",3,"input"],["id","privacy"],["formControlName","privacy",3,"change"],["id","thumbnail"],["id","uploaded-thumbnail-container",4,"ngIf"],[1,"actions"],["type","button",1,"btn","btn-lg","btn-success","join-session-btn",3,"click"],[3,"removed"],["matChipRemove",""],[3,"label"],[3,"value"],["for","custom-thumbnail",3,"click"],[1,"material-icons"],[3,"diameter",4,"ngIf"],[3,"diameter"],["id","uploaded-thumbnail-container"],["id","remove-thumbnail",3,"click"],["id","uploaded-thumbnail",3,"src"]],template:function(e,t){if(1&e&&(g.Wb(0,"form",0),g.Wb(1,"div",1),g.Wb(2,"div",2),g.Rb(3,"input",3),g.Kc(4,We,2,0,"mat-error",4),g.Vb(),g.Wb(5,"div",5),g.Wb(6,"mat-form-field"),g.Wb(7,"mat-chip-list",6,7),g.Kc(9,Be,4,1,"mat-chip",8),g.Wb(10,"input",9,10),g.ec("input",(function(e){return t.resetValue(e)}))("matChipInputTokenEnd",(function(e){return t.add(e)})),g.Vb(),g.Vb(),g.Wb(12,"mat-autocomplete",11,12),g.ec("optionSelected",(function(e){return t.autoCompleteTagsSelected(e)})),g.Kc(14,ze,2,2,"mat-optgroup",13),g.Vb(),g.Wb(15,"mat-hint",14),g.Mc(16,"Please press 'Enter' after the tag name and write not more than 3 tags"),g.Vb(),g.Vb(),g.Kc(17,Ge,2,0,"mat-error",4),g.Kc(18,Qe,2,0,"mat-error",4),g.Vb(),g.Kc(19,Ke,4,0,"mat-autocomplete",15),g.Wb(20,"div",16),g.Wb(21,"select",17),g.Wb(22,"option",18),g.Mc(23,"Category"),g.Vb(),g.Kc(24,He,2,2,"option",19),g.Vb(),g.Kc(25,qe,2,0,"mat-error",4),g.Vb(),g.Wb(26,"div",20),g.Wb(27,"textarea",21),g.ec("input",(function(e){return t.resetTextArea(e)})),g.Vb(),g.Kc(28,Ye,2,0,"mat-error",4),g.Wb(29,"p"),g.Mc(30),g.Vb(),g.Vb(),g.Wb(31,"div",22),g.Wb(32,"mat-radio-group",23),g.ec("change",(function(e){return t.changedPrivacy(e)})),g.Kc(33,Ze,4,3,"mat-radio-button",19),g.Vb(),g.Vb(),g.Wb(34,"div",24),g.Kc(35,$e,7,2,"ng-container",4),g.Kc(36,et,4,1,"div",25),g.Vb(),g.Wb(37,"div",26),g.Wb(38,"button",27),g.ec("click",(function(){return t.submit()})),g.Mc(39," Start live video "),g.Vb(),g.Vb(),g.Vb(),g.Vb()),2&e){const e=g.xc(8),n=g.xc(13);g.pc("formGroup",t.startStreamingForm),g.Cb(4),g.pc("ngIf",t.streamName.hasError("required")&&t.isSubmitted),g.Cb(5),g.pc("ngForOf",t.tags),g.Cb(1),g.pc("matChipInputFor",e)("matChipInputSeparatorKeyCodes",t.separatorKeysCodes)("matAutocomplete",n),g.Cb(4),g.pc("ngForOf",t.savedTags),g.Cb(3),g.pc("ngIf",0===t.tags.length&&t.isSubmitted),g.Cb(1),g.pc("ngIf",t.tags.length>3&&t.isSubmitted),g.Cb(1),g.pc("ngIf",t.savedTags.length>0),g.Cb(3),g.pc("value",""),g.Cb(2),g.pc("ngForOf",t.videoCategories),g.Cb(1),g.pc("ngIf",t.streamCategory.hasError("required")&&t.isSubmitted),g.Cb(3),g.pc("ngIf",t.streamDesc.hasError("required")&&t.isSubmitted),g.Cb(2),g.Pc(" Max length symbols ",t.count," / ",t.limit," "),g.Cb(3),g.pc("ngForOf",t.privacyTypes),g.Cb(2),g.pc("ngIf",!t.thumbnailUploaded),g.Cb(1),g.pc("ngIf",t.thumbnailUploaded)}},directives:[r.I,r.t,r.k,r.c,r.s,r.i,i.t,fe.c,Re.d,i.s,Le.b,Re.c,Ne.d,Ne.a,fe.f,r.E,r.x,r.H,De.b,fe.b,Re.a,ve.a,Re.e,Ce.m,Ce.n,De.a,S.c],styles:[".start-live-video[_ngcontent-%COMP%]{width:100%;max-width:548px;margin:64px auto 0}#start-streaming-form[_ngcontent-%COMP%]{font-family:Muli-Regular}#start-streaming-form[_ngcontent-%COMP%]   #video-tags[_ngcontent-%COMP%]{margin-top:24px}#start-streaming-form[_ngcontent-%COMP%]   #video-name[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:18px;margin-top:24px;width:100%;height:51px;background:#fff 0 0 no-repeat padding-box;box-shadow:0 0 6px #eee;color:#8c8888;padding-left:5px;border:2px solid #8c8888}#start-streaming-form[_ngcontent-%COMP%]   #privacy[_ngcontent-%COMP%], #start-streaming-form[_ngcontent-%COMP%]   #video-categories[_ngcontent-%COMP%]{margin-top:24px}#start-streaming-form[_ngcontent-%COMP%]   #privacy[_ngcontent-%COMP%]   .liveVideo[_ngcontent-%COMP%], #start-streaming-form[_ngcontent-%COMP%]   #video-categories[_ngcontent-%COMP%]   .liveVideo[_ngcontent-%COMP%]{font-size:18px;padding-left:5px}#start-streaming-form[_ngcontent-%COMP%]   #privacy[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], #start-streaming-form[_ngcontent-%COMP%]   #video-categories[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;height:51px;background:#fff 0 0 no-repeat padding-box;box-shadow:0 0 6px #eee;padding-left:5px;border:2px solid #8c8888;font:normal normal normal 16px/20px Muli-Regular;color:#8c8888;outline:none}#start-streaming-form[_ngcontent-%COMP%]   #privacy[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]:disabled, #start-streaming-form[_ngcontent-%COMP%]   #video-categories[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]:disabled{color:silver}#start-streaming-form[_ngcontent-%COMP%]   #video-description[_ngcontent-%COMP%]{margin:24px 0}#start-streaming-form[_ngcontent-%COMP%]   #video-description[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{font-size:18px;padding-left:5px;border:2px solid #8c8888;width:100%;height:151px;background:#fff 0 0 no-repeat padding-box;box-shadow:0 0 6px #eee;opacity:1;outline:none;resize:none}#start-streaming-form[_ngcontent-%COMP%]   label[for=custom-thumbnail][_ngcontent-%COMP%]{margin:0;font-size:18px;padding:12px 16px;background:#eee 0 0 no-repeat padding-box;font:normal normal normal 18px/19px Muli-Regular;color:#8c8888;cursor:pointer}#start-streaming-form[_ngcontent-%COMP%]   label[for=custom-thumbnail][_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{vertical-align:text-bottom;margin-right:10px}#start-streaming-form[_ngcontent-%COMP%]   #thumbnail[_ngcontent-%COMP%]{display:flex;align-items:center}#start-streaming-form[_ngcontent-%COMP%]   #thumbnail[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin-left:20px}#start-streaming-form[_ngcontent-%COMP%]   #custom-thumbnail[_ngcontent-%COMP%]{display:none}#start-streaming-form[_ngcontent-%COMP%]   #uploaded-thumbnail-container[_ngcontent-%COMP%]{position:relative}#start-streaming-form[_ngcontent-%COMP%]   #uploaded-thumbnail-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{position:absolute;right:0}#start-streaming-form[_ngcontent-%COMP%]   #uploaded-thumbnail-container[_ngcontent-%COMP%]   #uploaded-thumbnail[_ngcontent-%COMP%]{max-width:100%;-o-object-fit:cover;object-fit:cover}#start-streaming-form[_ngcontent-%COMP%]   #uploaded-thumbnail-container[_ngcontent-%COMP%]   #remove-thumbnail[_ngcontent-%COMP%]{color:#545454;cursor:pointer}#start-streaming-form[_ngcontent-%COMP%]   #video-tags[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;font-size:18px}#start-streaming-form[_ngcontent-%COMP%]   #video-tags[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]   .liveVideo[_ngcontent-%COMP%]{font-size:18px}#start-streaming-form[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{margin-bottom:8px}#start-streaming-form[_ngcontent-%COMP%]   .item.d-flex[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-right:40px}#start-streaming-form[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;justify-content:space-between;color:#18b587;font-size:14px;margin-bottom:2px}#start-streaming-form[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .edit[_ngcontent-%COMP%]{font-size:16px;color:#545454;cursor:pointer}#start-streaming-form[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .edit[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:20px;margin-left:4px}#start-streaming-form[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;align-items:center}#start-streaming-form[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info.border[_ngcontent-%COMP%]{border:0!important}#start-streaming-form[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info.border[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:not(.material-icons){border-bottom:.5px solid #dcdcdc}#start-streaming-form[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:not(.material-icons){flex:1}#start-streaming-form[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{margin-right:8px}#start-streaming-form[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{color:#545454;font-weight:600;font-size:16px}#start-streaming-form[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:20px}#start-streaming-form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-top:32px;border:0;border-radius:0;padding:8px 32px;background:#f53c6f;box-shadow:0 0 6px rgba(0,109,204,.18);font-family:Muli-Light;font-size:16px;color:#fff}"]}),e})();function nt(e,t){if(1&e){const e=g.Xb();g.Wb(0,"app-check-requirements",2),g.ec("checked",(function(){return g.Bc(e),g.ic().requirementsChecked=!0})),g.Vb()}}function it(e,t){if(1&e){const e=g.Xb();g.Wb(0,"app-stream-details-form",3),g.ec("formReady",(function(t){return g.Bc(e),g.ic().getPublisherData(t)})),g.Vb()}}let ot=(()=>{class e{constructor(e,t){this.subject=e,this.router=t,this.sessionData={sessionName:"",myUserName:""},this.requirementsChecked=!1}ngOnInit(){}getPublisherData(e){return Object(s.a)(this,void 0,void 0,(function*(){this.sessionData={sessionName:e.sessionName,myUserName:e.myUserName},this.videoSettings=e,this.subject.setSessionData(this.sessionData),localStorage.setItem("session",JSON.stringify(this.sessionData)),localStorage.setItem("video_settings",JSON.stringify(this.videoSettings)),yield this.router.navigate(["users/video/publish"])}))}}return e.\u0275fac=function(t){return new(t||e)(g.Qb(G.a),g.Qb(o.e))},e.\u0275cmp=g.Kb({type:e,selectors:[["app-publisher-flow"]],decls:2,vars:2,consts:[[3,"checked",4,"ngIf"],[3,"formReady",4,"ngIf"],[3,"checked"],[3,"formReady"]],template:function(e,t){1&e&&(g.Kc(0,nt,1,0,"app-check-requirements",0),g.Kc(1,it,1,0,"app-stream-details-form",1)),2&e&&(g.pc("ngIf",!t.requirementsChecked),g.Cb(1),g.pc("ngIf",t.requirementsChecked))},directives:[i.t,Te,tt],styles:[""]}),e})();const st=["videoElement"];function rt(e,t){1&e&&(g.Wb(0,"div",3),g.Wb(1,"h2"),g.Mc(2,"Live video ended"),g.Vb(),g.Vb())}let at=(()=>{class e{constructor(e){this.subject=e,this.videoJSPlayerOptions={width:640,height:480,autoplay:!0,controls:!0,fluid:!1,sources:[]}}ngOnInit(){this.subject.getVideoRecordingState().subscribe(e=>{if(console.log("STATE!!!!"+e.recordingState),this.recordingState=e.recordingState,"finished"===this.recordingState){let e=document.getElementById("live-video");console.log(e)}})}ngAfterViewInit(){this._streamManager.addVideoElement(this.elementRef.nativeElement);const e=document.getElementById("live-video");console.log(e),e.setAttribute("controls","controls"),e.controls=!0}set streamManager(e){this._streamManager=e,this.elementRef&&this._streamManager.addVideoElement(this.elementRef.nativeElement)}}return e.\u0275fac=function(t){return new(t||e)(g.Qb(G.a))},e.\u0275cmp=g.Kb({type:e,selectors:[["app-ov-video"]],viewQuery:function(e,t){var n;1&e&&g.Rc(st,!0),2&e&&g.wc(n=g.fc())&&(t.elementRef=n.first)},inputs:{streamManager:"streamManager"},decls:3,vars:1,consts:[["controls","","muted","","id","live-video","width","640","height","480"],["videoElement",""],["id","live-session-finished",4,"ngIf"],["id","live-session-finished"]],template:function(e,t){1&e&&(g.Rb(0,"video",0,1),g.Kc(2,rt,3,0,"div",2)),2&e&&(g.Cb(2),g.pc("ngIf","finished"===t.recordingState))},directives:[i.t],styles:["#live-session-finished[_ngcontent-%COMP%]{position:absolute;top:-3px;left:15px;width:640px;height:100%;color:#fff;-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px);display:flex;align-items:center;justify-content:center}"]}),e})(),ct=(()=>{class e{constructor(e){this.toastr=e}ngOnInit(){}getNicknameTag(){return JSON.parse(this.streamManager.stream.connection.data.replace(/}%\/%{/g,",")).clientData.myUserName}}return e.\u0275fac=function(t){return new(t||e)(g.Qb(b.b))},e.\u0275cmp=g.Kb({type:e,selectors:[["app-user-video"]],inputs:{streamManager:"streamManager"},decls:2,vars:1,consts:[[3,"streamManager"]],template:function(e,t){1&e&&(g.Wb(0,"div"),g.Rb(1,"app-ov-video",0),g.Vb()),2&e&&(g.Cb(1),g.pc("streamManager",t.streamManager))},directives:[at],styles:["ov-video[_ngcontent-%COMP%]{width:100%;height:auto;float:left;cursor:pointer}div[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;background:#f8f8f8;padding-left:5px;padding-right:5px;color:#777;font-weight:700;border-bottom-right-radius:4px}p[_ngcontent-%COMP%]{margin:0}"]}),e})();function lt(e,t){1&e&&g.Rb(0,"mat-spinner",4),2&e&&g.pc("diameter",100)}function dt(e,t){if(1&e&&(g.Wb(0,"li",26),g.Mc(1),g.Vb()),2&e){const e=t.$implicit;g.Cb(1),g.Oc(" #",e.name," ")}}function ut(e,t){if(1&e&&(g.Wb(0,"div",27),g.Wb(1,"span",28),g.Mc(2),g.Vb(),g.Wb(3,"span",29),g.Mc(4,"\xb7"),g.Vb(),g.Wb(5,"span",30),g.Mc(6),g.jc(7,"dateFromNow"),g.Vb(),g.Vb()),2&e){const e=g.ic(5);g.Cb(2),g.Oc("",e.participants.length," watching now"),g.Cb(4),g.Oc("Started streaming ",g.kc(7,2,e.videoSettings.created_at),"")}}function gt(e,t){1&e&&(g.Wb(0,"span",31),g.Mc(1,"Live"),g.Vb())}function ht(e,t){1&e&&(g.Wb(0,"p"),g.Mc(1,"Stream destroyed."),g.Vb())}function pt(e,t){if(1&e){const e=g.Xb();g.Ub(0),g.Wb(1,"div",10),g.Wb(2,"div",11),g.Wb(3,"div",12),g.Wb(4,"ul",13),g.Kc(5,dt,2,1,"li",14),g.Vb(),g.Wb(6,"div",15),g.Wb(7,"div",16),g.Rb(8,"i",17),g.Wb(9,"span"),g.Mc(10),g.Vb(),g.Vb(),g.Wb(11,"div",18),g.ec("click",(function(){return g.Bc(e),g.ic(4).openSocialShareModal()})),g.Rb(12,"i",19),g.Wb(13,"p"),g.Mc(14,"Share"),g.Vb(),g.Vb(),g.Vb(),g.Vb(),g.Wb(15,"h3"),g.Mc(16),g.Vb(),g.Kc(17,ut,8,4,"div",20),g.Kc(18,gt,2,0,"span",21),g.Vb(),g.Vb(),g.Wb(19,"div",22),g.Wb(20,"div"),g.Rb(21,"img",23),g.jc(22,"getImgPath"),g.Vb(),g.Wb(23,"div"),g.Wb(24,"p",24),g.Mc(25),g.Vb(),g.Wb(26,"p",25),g.Mc(27),g.Vb(),g.Vb(),g.Vb(),g.Kc(28,ht,2,0,"p",3),g.Tb()}if(2&e){const e=g.ic(4);g.Cb(5),g.pc("ngForOf",e.videoSettings.tags),g.Cb(5),g.Nc(e.participants.length),g.Cb(6),g.Nc(e.videoSettings.name),g.Cb(1),g.pc("ngIf",e.videoId),g.Cb(1),g.pc("ngIf",e.videoId),g.Cb(3),g.pc("src",g.lc(22,9,e.channelInfo.avatar,"images"),g.Ec),g.Cb(4),g.Nc(e.channelInfo.name),g.Cb(2),g.Oc("",e.channelInfo.subscribers_count+" subscriber"+(1===e.channelInfo.subscribers_count?"":"s")," "),g.Cb(1),g.pc("ngIf",e.streamDestroyed)}}function mt(e,t){if(1&e){const e=g.Xb();g.Wb(0,"div",7),g.Wb(1,"div",8),g.Wb(2,"app-user-video",9),g.ec("click",(function(){g.Bc(e);const n=t.$implicit;return g.ic(3).updateMainStreamManager(n)})),g.Vb(),g.Vb(),g.Kc(3,pt,29,12,"ng-container",3),g.Vb()}if(2&e){const e=t.$implicit,n=g.ic(3);g.Cb(2),g.pc("streamManager",e),g.Cb(1),g.pc("ngIf",n.streamCreated&&n.openViduToken&&n.videoFound)}}function ft(e,t){if(1&e){const e=g.Xb();g.Wb(0,"app-chat-box",32),g.ec("sendMessage",(function(t){return g.Bc(e),g.ic(3).sendMessage(t)})),g.Vb()}if(2&e){const e=g.ic(3);g.pc("openViduToken",e.openViduToken)("session",e.session)("videoRecordingState",e.recordingState)("messages",e.messages)("videoId",e.videoId)}}function bt(e,t){if(1&e&&(g.Ub(0),g.Kc(1,mt,4,2,"div",5),g.Kc(2,ft,1,5,"app-chat-box",6),g.Tb()),2&e){const e=g.ic(2);g.Cb(1),g.pc("ngForOf",e.subscribers),g.Cb(1),g.pc("ngIf",e.videoId)}}function vt(e,t){1&e&&(g.Wb(0,"p"),g.Mc(1,"Video streaming session is not found."),g.Vb())}function Ct(e,t){1&e&&(g.Ub(0),g.Wb(1,"p"),g.Mc(2,"The session does not exist."),g.Vb(),g.Tb())}function Ot(e,t){1&e&&(g.Ub(0),g.Wb(1,"p"),g.Mc(2,"There was a problem creating the video stream."),g.Vb(),g.Tb())}function St(e,t){if(1&e&&(g.Wb(0,"div",1),g.Kc(1,lt,1,1,"mat-spinner",2),g.Kc(2,bt,3,2,"ng-container",3),g.Kc(3,vt,2,0,"p",3),g.Kc(4,Ct,3,0,"ng-container",3),g.Kc(5,Ot,3,0,"ng-container",3),g.Vb()),2&e){const e=g.ic();g.Cb(1),g.pc("ngIf",e.loader.dataLoading),g.Cb(1),g.pc("ngIf",e.streamCreated),g.Cb(1),g.pc("ngIf",!e.videoFound&&!e.loader.dataLoading),g.Cb(1),g.pc("ngIf",!e.openViduToken&&!e.loader.dataLoading&&e.videoFound),g.Cb(1),g.pc("ngIf",!e.streamCreated&&!e.loader.dataLoading&&e.videoFound)}}let yt=(()=>{class e{constructor(e,t,n,i,o,s,r,a,c,l,d){this._userInfoService=e,this.route=t,this.openViduService=n,this.videoService=i,this.chatService=o,this.subject=s,this.loader=r,this.toastr=a,this.dialog=c,this.elRef=l,this.getUrlParts=d,this.recordingState="started",this.sessionData={sessionName:"",myUserName:""},this.streamDestroyed=!1,this.participants=[],this.subscribers=[],this.tags=[],this.messages=[],this._getAuthInfo()}ngOnInit(){this.getSessionData(),this.getRecordingState(),this.joinSession();const{hostName:e}=this.getUrlParts.transform(window.location.href);this.shareUrl=`${e}users/video/watch?session=${this.sessionData.sessionName}&publisher=${this.authUser.username}&id=${this.videoId}`,this.subject.publish.subscribe(e=>{console.log(e),this.publisher.publishAudio(e)})}_getAuthInfo(){this._userInfoService._userInfo.subscribe(e=>{this.authUser=e,console.log(this.authUser,"Join video streaming  AUTHUSER DATA")})}openSocialShareModal(){console.log("modal"),this.dialog.open(B.a,{width:"500px",height:"400px",data:{shareUrl:this.shareUrl}}).afterClosed().subscribe(e=>{})}beforeunloadHandler(){this.leaveSession()}getRecordingState(){this.subject.getVideoRecordingState().subscribe(e=>{"finished"===e.recordingState&&this.leaveSession()})}getSessionData(){const e=this.route.snapshot.queryParams;e&&e.hasOwnProperty("session")&&(this.sessionData.sessionName=e.session,this.sessionData.myUserName=this.authUser.username,this.recordingState="started",this.videoId=e.id,this.videoService.getVideoById({id:this.videoId}).subscribe(e=>{this.videoFound="live"===(null==e?void 0:e.status),this.videoSettings=e,this.channelInfo=null==e?void 0:e.channel,console.log("video!!!",e)}))}joinSession(){this.OV=new U.OpenVidu,this.session=this.OV.initSession(),this.loader.dataLoading=!0,this.getStreamEvents(),this.openViduService.getToken({email:this.authUser.email,sessionName:this.sessionData.sessionName,role:"SUBSCRIBER"}).subscribe(e=>{this.openViduToken=e,this.receiveMessage(),this.recordingState="started",this.receiveRecordingState(),this.session.connect(e,{clientData:this.sessionData,avatar:this.authUser.avatar,from_user:this.authUser}).then(()=>{this.loader.dataLoading=!1}).catch(e=>{this.toastr.error("There was a problem white loading streaming session")})})}getStreamEvents(){this.session.on("streamCreated",e=>{this.streamCreated=!0,this.elRef.nativeElement.querySelector("video");const t=this.session.subscribe(e.stream,void 0);this.subscribers.push(t)}),this.session.on("connectionCreated",e=>{console.log("connection created!!!");const t=JSON.parse(e.connection.data.replace(/}%\/%{/g,","));this.participants.push(t.clientData.myUserName),this.videoService.updateParticipantsCount({video_id:this.videoId,participants:this.participants.length}).subscribe()}),this.session.on("connectionDestroyed",e=>{const t=JSON.parse(e.connection.data.replace(/}%\/%{/g,","));this.participants=this.participants.filter(e=>e!==t.clientData.myUserName)}),this.session.on("streamDestroyed",e=>{this.streamDestroyed=!0,this.openViduToken=null,this.leaveSession()})}receiveRecordingState(){this.session.on("signal:recording-state",e=>{Object.assign({event:e},{socket:!0}),this.recordingState=e.data?"started":"finished","finished"===this.recordingState&&(this.tags=[]),this.subject.setVideoRecordingState(Object.assign({recordingState:this.recordingState},{viaSocket:!0}))})}receiveMessage(){this.session.on("signal:my-chat",e=>{this.subject.setMsgData({message:e.data,from:e.from.data})})}sendMessage(e){console.log(e),this.session.signal({data:e.message,to:[],type:"my-chat"}).then(()=>{this.chatService.saveVideoMessage(Object.assign({video_id:this.videoId},e)).subscribe(e=>{this.messages=e})}).catch(e=>{console.error(e)})}updateMainStreamManager(e){this.mainStreamManager=e}leaveSession(){this.session&&this.session.disconnect(),this.sessionData&&this.openViduService.leaveSession({token:this.openViduToken,sessionName:this.sessionData.sessionName,role:"subscriber"}).subscribe(()=>{})}ngOnDestroy(){this.leaveSession()}}return e.\u0275fac=function(t){return new(t||e)(g.Qb(f.a),g.Qb(o.a),g.Qb(z),g.Qb(O.a),g.Qb(Q.a),g.Qb(G.a),g.Qb(h.a),g.Qb(b.b),g.Qb(C.b),g.Qb(g.l),g.Qb(q.a))},e.\u0275cmp=g.Kb({type:e,selectors:[["app-join-video-streaming"]],viewQuery:function(e,t){var n;1&e&&g.Rc(J.a,!0),2&e&&g.wc(n=g.fc())&&(t.chatBox=n.first)},hostBindings:function(e,t){1&e&&g.ec("beforeunload",(function(){return t.beforeunloadHandler()}),!1,g.Ac)},decls:1,vars:1,consts:[["id","video-chat-container",4,"ngIf"],["id","video-chat-container"],["class","session-loader",3,"diameter",4,"ngIf"],[4,"ngIf"],[1,"session-loader",3,"diameter"],["class","stream-container col-md-6 col-xs-6",4,"ngFor","ngForOf"],[3,"openViduToken","session","videoRecordingState","messages","videoId","sendMessage",4,"ngIf"],[1,"stream-container","col-md-6","col-xs-6"],[1,"video-container"],[3,"streamManager","click"],["id","video-info-row"],["id","video-info"],[1,"videoTagsAndActions"],["id","video-tags-list"],["class","tag",4,"ngFor","ngForOf"],["id","video-info-actions"],["id","participants-count"],[1,"fa","fa-users"],["id","share-wrap",3,"click"],[1,"fas","fa-share-alt"],["class","details-row",4,"ngIf"],["class","live-now",4,"ngIf"],["id","channel-info"],["id","channel-avatar",1,"avatar",3,"src"],["id","channel-name"],[1,"subscribers-count"],[1,"tag"],[1,"details-row"],[1,"watchers-count"],[1,"dot"],[1,"date"],[1,"live-now"],[3,"openViduToken","session","videoRecordingState","messages","videoId","sendMessage"]],template:function(e,t){1&e&&g.Kc(0,St,6,5,"div",0),2&e&&g.pc("ngIf",t.openViduToken&&t.videoFound)},directives:[i.t,S.c,i.s,ct,J.a],pipes:[y.a,X.a],styles:["#video-chat-container[_ngcontent-%COMP%]{display:flex;height:100vh}@media (max-width:1300px){#video-chat-container[_ngcontent-%COMP%]{flex-direction:column}}#video-tags-list[_ngcontent-%COMP%]{display:flex}#video-tags-list[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]{color:#0035c6;font-size:16px;font-family:Muli-Bold,sans-serif;margin-right:16px}.live-now[_ngcontent-%COMP%]{width:52px;height:20px;position:static}.details-row[_ngcontent-%COMP%]{display:flex;align-items:center}.details-row[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{margin:0 10px}#channel-info[_ngcontent-%COMP%]{border-top:.5px solid #c9c9c9;border-bottom:.5px solid #c9c9c9;display:flex;flex-direction:row;margin-bottom:20px;margin-top:12px;padding:12px 0}#channel-info[_ngcontent-%COMP%]   #channel-name[_ngcontent-%COMP%]{font-family:Muli-Bold,sans-serif;color:#545454;font-size:16px;margin-bottom:4px;overflow:hidden;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical}#video-info-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:20px}@media (max-width:1300px){#video-info-row[_ngcontent-%COMP%]{max-width:640px;width:100%}}#video-info-row[_ngcontent-%COMP%]   #video-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-family:Muli-Bold,sans-serif;margin-top:10px}#video-info-row[_ngcontent-%COMP%]   #video-info-actions[_ngcontent-%COMP%]{display:flex}#video-info-row[_ngcontent-%COMP%]   #video-info-actions[_ngcontent-%COMP%]   #participants-count[_ngcontent-%COMP%]{display:flex;align-items:center;color:#545454;font-size:12px}#video-info-row[_ngcontent-%COMP%]   #video-info-actions[_ngcontent-%COMP%]   #participants-count[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:Muli-Light,sans-serif}#video-info-row[_ngcontent-%COMP%]   #video-info-actions[_ngcontent-%COMP%]   #share-wrap[_ngcontent-%COMP%]{display:flex;margin-left:10px;align-items:center;cursor:pointer;font-size:12px;color:#545454}#video-info-row[_ngcontent-%COMP%]   #video-info-actions[_ngcontent-%COMP%]   #share-wrap[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-left:5px;color:#545454;font-size:12px;font-family:Muli-Light,sans-serif;margin-bottom:0!important}#video-info[_ngcontent-%COMP%], #video-info-row[_ngcontent-%COMP%]{width:100%}.videoTagsAndActions[_ngcontent-%COMP%]{display:flex;justify-content:space-between}"]}),e})(),Mt=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=g.Kb({type:e,selectors:[["app-subscriber-flow"]],decls:1,vars:0,template:function(e,t){1&e&&g.Rb(0,"app-join-video-streaming")},directives:[yt],styles:[""]}),e})(),xt=(()=>{class e{canDeactivate(e,t,n,i){return"started"!==e.recordingState||(e.alertOfLeaving(),!1)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=g.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var _t=n("MeVE");let Pt=(()=>{class e{constructor(e,t){this._userInfoService=e,this.userStore=t,this._getAuthInfo()}ngOnInit(){}_getAuthInfo(){this._userInfoService._userInfo.subscribe(e=>{this.authUser=e,console.log(this.authUser,"Show Notifications  AUTHUSER DATA")})}}return e.\u0275fac=function(t){return new(t||e)(g.Qb(f.a),g.Qb(v.a))},e.\u0275cmp=g.Kb({type:e,selectors:[["app-show-notifications"]],decls:2,vars:4,consts:[[3,"notificationsCategory","authUser"]],template:function(e,t){1&e&&(g.Rb(0,"app-notifications-list",0),g.Rb(1,"app-notifications-list",0)),2&e&&(g.pc("notificationsCategory","new")("authUser",t.authUser),g.Cb(1),g.pc("notificationsCategory","early")("authUser",t.authUser))},directives:[_t.a],styles:[""]}),e})();var wt=n("iing"),Et=n("yUsM"),kt=n("WHgu"),It=n("STbY");function Tt(e,t){if(1&e){const e=g.Xb();g.Wb(0,"a",31),g.ec("click",(function(){return g.Bc(e),g.ic(3).connectWithUser()})),g.Wb(1,"mat-icon"),g.Mc(2,"person_add"),g.Vb(),g.Wb(3,"span"),g.Mc(4,"Connect"),g.Vb(),g.Vb()}}function At(e,t){if(1&e&&(g.Wb(0,"a",32),g.Wb(1,"mat-icon"),g.Mc(2,"check"),g.Vb(),g.Wb(3,"span"),g.Mc(4,"Waiting for confirmation"),g.Vb(),g.Vb()),2&e){g.ic();const e=g.xc(4);g.pc("matMenuTriggerFor",e)}}function Vt(e,t){if(1&e&&(g.Wb(0,"button",33),g.Wb(1,"mat-icon"),g.Mc(2,"check"),g.Vb(),g.Wb(3,"span"),g.Mc(4,"Connected"),g.Vb(),g.Vb()),2&e){g.ic();const e=g.xc(12);g.pc("matMenuTriggerFor",e)}}function Rt(e,t){if(1&e){const e=g.Xb();g.Wb(0,"a",34),g.ec("click",(function(){return g.Bc(e),g.ic(3).toggleBottomChatBox()})),g.Wb(1,"mat-icon"),g.Mc(2,"chat"),g.Vb(),g.Wb(3,"span"),g.Mc(4,"Message"),g.Vb(),g.Vb()}}function Lt(e,t){if(1&e){const e=g.Xb();g.Ub(0),g.Kc(1,Tt,5,0,"a",24),g.Kc(2,At,5,1,"a",25),g.Wb(3,"mat-menu",null,26),g.Wb(5,"button",27),g.ec("click",(function(){g.Bc(e);const t=g.ic(2);return t.cancelUsersConnecting(t.usersConnection)})),g.Wb(6,"mat-icon"),g.Mc(7,"close"),g.Vb(),g.Wb(8,"span"),g.Mc(9,"Cancel"),g.Vb(),g.Vb(),g.Vb(),g.Kc(10,Vt,5,1,"button",28),g.Wb(11,"mat-menu",null,29),g.Wb(13,"button",27),g.ec("click",(function(){return g.Bc(e),g.ic(2).disconnectUser()})),g.Wb(14,"mat-icon"),g.Mc(15,"close"),g.Vb(),g.Wb(16,"span"),g.Mc(17,"Disconnect"),g.Vb(),g.Vb(),g.Vb(),g.Kc(18,Rt,5,0,"a",30),g.Tb()}if(2&e){const e=g.ic(2);g.Cb(1),g.pc("ngIf","idle"===e.usersConnectionStatus),g.Cb(1),g.pc("ngIf","pending"===e.usersConnectionStatus),g.Cb(8),g.pc("ngIf","connected"===e.usersConnectionStatus),g.Cb(8),g.pc("ngIf",e.isMessageBtnShown())}}function Nt(e,t){if(1&e&&(g.Wb(0,"button",35),g.Wb(1,"mat-icon"),g.Mc(2,"edit"),g.Vb(),g.Mc(3," Edit profile "),g.Vb()),2&e){const e=g.ic(2);g.pc("routerLink","/users/"+e.authUser.username+"/edit")}}function Dt(e,t){if(1&e&&(g.Wb(0,"li",36),g.Wb(1,"a",37),g.Mc(2),g.Vb(),g.Vb()),2&e){const e=t.$implicit,n=g.ic(2);g.pc("hidden",!n.ownProfile&&e.ownPageOnly),g.Cb(1),g.pc("routerLink","/users/"+n.profileUser.username+"/tab/"+e.link),g.Cb(1),g.Nc(e.name)}}function jt(e,t){if(1&e){const e=g.Xb();g.Wb(0,"div",38),g.Wb(1,"router-outlet",39),g.ec("activate",(function(t){return g.Bc(e),g.ic(2).onOutletLoaded(t)})),g.Vb(),g.Vb()}}function Ut(e,t){if(1&e&&(g.Wb(0,"div",1),g.Wb(1,"table"),g.Wb(2,"tr"),g.Wb(3,"td",2),g.Mc(4,"My Profile"),g.Vb(),g.Wb(5,"td",3),g.Mc(6,"My Channel"),g.Vb(),g.Vb(),g.Vb(),g.Wb(7,"div",4),g.Rb(8,"img",5),g.jc(9,"getImgPath"),g.Vb(),g.Wb(10,"div",6),g.Wb(11,"div",7),g.Wb(12,"div",8),g.Wb(13,"div",9),g.Wb(14,"div",10),g.Wb(15,"label",11),g.Rb(16,"img",12),g.jc(17,"getImgPath"),g.Vb(),g.Vb(),g.Wb(18,"div"),g.Wb(19,"strong",13),g.Mc(20),g.Vb(),g.Wb(21,"p",14),g.Mc(22),g.Vb(),g.Vb(),g.Vb(),g.Wb(23,"div",15),g.Kc(24,Lt,19,4,"ng-container",16),g.Kc(25,Nt,4,1,"button",17),g.Vb(),g.Vb(),g.Rb(26,"div",8),g.Vb(),g.Rb(27,"div",18),g.Vb(),g.Wb(28,"div",6),g.Wb(29,"div",19),g.Wb(30,"ul",20),g.Kc(31,Dt,3,3,"li",21),g.Vb(),g.Vb(),g.Rb(32,"div",22),g.Vb(),g.Kc(33,jt,2,0,"div",23),g.Vb()),2&e){const e=g.ic();g.Cb(3),g.pc("routerLink","/users/"+(null==e.authUser?null:e.authUser.username))("routerLinkActive","active"),g.Cb(2),g.pc("routerLink","/channels/"+(null==e.authUser?null:e.authUser.username)),g.Cb(3),g.pc("src",g.lc(9,11,null==e.profileUser?null:e.profileUser.cover,"images"),g.Ec),g.Cb(8),g.pc("src",g.lc(17,14,null==e.profileUser?null:e.profileUser.avatar,"images"),g.Ec),g.Cb(4),g.Nc((null==e.profileUser?null:e.profileUser.first_name)+" "+(null==e.profileUser?null:e.profileUser.last_name)),g.Cb(2),g.Oc("",e.connectionsCount+" connection"+(1===e.connectionsCount?"":"s")," "),g.Cb(2),g.pc("ngIf",!e.ownProfile),g.Cb(1),g.pc("ngIf",e.ownProfile),g.Cb(6),g.pc("ngForOf",e.profileTabs),g.Cb(2),g.pc("ngIf",e.authUser&&e.connections.length>0&&e.profileUserStocks)}}let Wt=(()=>{class e{constructor(e,t,n,i,o,s,r,a,c){this._userInfoService=e,this.userStore=t,this.usersConnectionsStore=n,this.groupsMessagesStore=i,this.usersService=o,this.socketService=s,this.stocksService=r,this.route=a,this.router=c,this.profileTabs=W.s,this.subscriptions=[],this.connectionsCount=0,this.connections=[],this.connectionRequests=[],this.ownProfile=!1,this.usersConnectionStatus="idle",this.attemptedToConnect=!1,this.isBlocked=!1}ngOnInit(){this.passedUsername=this.route.snapshot.params.username,this._getAuthInfo(),this.getUserInfo(),this.ownProfile&&this.trackUserConnections()}trackAuthUserChanges(){this.subscriptions.push(this.userStore.authUser$.subscribe(e=>{this.authUser=e}))}_getAuthInfo(){this._userInfoService._userInfo.subscribe(e=>{this.authUser=e,console.log(this.authUser,"dsadsadas")})}getUserInfo(){this.ownProfile=this.authUser.username===this.passedUsername,this.passedUsername&&this.subscriptions.push(this.usersService.getUserInfo({username:this.passedUsername,own_channel:this.ownProfile}).subscribe(e=>{e&&(this.profileUser=e,this.checkIfUsersConnected(),this.getAcceptedDeclinedRequests(),this.getConnectWithUser(),this.getDisconnectUsers(),this.cancelledUsersConnecting(),this.getBlockUnblockUser(),this.getConnectionsChanges(),this.ownProfile?this.profileUserStocks=[]:(this.getProfileUserStocks(),this.connectionsCount=this.profileUser.users_connections.filter(e=>e.confirmed).length,console.log(this.profileUser)))}))}trackUserConnections(){this.subscriptions.push(this.usersConnectionsStore.usersMessages$.subscribe(e=>{this.connectionsCount=e.filter(e=>1===e.users_connections[0].confirmed).length,this.connections=e.filter(e=>1===e.users_connections[0].confirmed),this.connectionRequests=e.filter(e=>0===e.users_connections[0].confirmed)}))}getConnectionsChanges(){this.subscriptions.push(this.usersConnectionsStore.usersMessages$.subscribe(e=>{var t;this.usersConnection=null===(t=e.find(e=>e.id===this.profileUser.id))||void 0===t?void 0:t.users_connections[0]}))}getAcceptedDeclinedRequests(){this.subscriptions.push(this.socketService.acceptedConnection().subscribe(e=>{const{notification:t,profile_user_contacts:n}=e;(t.to_user.id===this.authUser.id&&t.from_user.id===this.profileUser.id||t.to_user.id===this.profileUser.id&&t.from_user.id===this.authUser.id)&&(this.usersConnectionStatus="connected",this.isBlocked=!1),t.from_user.id!==this.authUser.id&&(this.connectionsCount=n.length)})),this.subscriptions.push(this.socketService.declinedConnection().subscribe(()=>{console.log("declined"),this.usersConnectionStatus="idle"}))}checkIfUsersConnected(){this.usersService.checkIfUsersConnected({user_id:this.authUser.id,channel_user_id:this.profileUser.id}).subscribe(e=>{this.usersConnection=e,e&&(this.connections=e.connection_users.filter(e=>e.id!==this.authUser.id),this.usersConnectionStatus=e.confirmed?"connected":"pending",this.isBlocked=!!e.is_blocked)})}connectWithUser(){this.attemptedToConnect=!0,this.usersConnectionStatus="pending",this.socketService.connectWithUser({from_user:this.authUser,to_user:this.profileUser,msg:`<strong>${this.authUser.first_name+" "+this.authUser.last_name}</strong>\n                has sent a connection request to you`})}getConnectWithUser(){this.socketService.getConnectWithUser().subscribe(e=>{this.usersConnection=e.connection})}cancelUsersConnecting(e){console.log(e),this.socketService.cancelUsersConnecting({authUser:this.authUser,channelUser:this.profileUser,connection_id:e.id})}cancelledUsersConnecting(){this.socketService.cancelledUsersConnecting().subscribe(e=>{console.log(e,"cancelled"),this.usersConnectionStatus="idle"})}disconnectUser(){console.log(this.usersConnection),this.socketService.disconnectUsers({to_user:this.profileUser,from_user:this.authUser,connection_id:this.usersConnection.id,msg:`<strong>${this.authUser.first_name} ${this.authUser.last_name}</strong> has broken the connection between you two`}),this.usersConnectionStatus="idle"}getDisconnectUsers(){this.subscriptions.push(this.socketService.getDisconnectUsers().subscribe(e=>{const{to_user:t,profile_user_contacts:n}=e;console.log(t.users_connections),this.connectionsCount=n.length,this.usersConnectionStatus="idle"}))}getBlockUnblockUser(){this.subscriptions.push(this.socketService.getBlockUnblockUser().subscribe(e=>{console.log("get block/unblock",e),this.isBlocked=!0}))}isMessageBtnShown(){return/connected|test/.test(this.usersConnectionStatus)&&!this.isBlocked}toggleBottomChatBox(){const e=this.usersConnectionsStore.usersMessages.find(e=>e.id===this.profileUser.id);e&&(this.usersConnectionsStore.showBottomChatBox=!0,this.groupsMessagesStore.showBottomChatBox=!1,this.usersConnectionsStore.changeUser(e))}getProfileUserStocks(){this.stocksService.getUserStocks({user_id:this.profileUser.id}).subscribe(e=>{this.profileUserStocks=null==e?void 0:e.user_stocks})}onOutletLoaded(e){this.connections&&(e.connections=this.connections,e.connectionRequests=this.connectionRequests,e.authUser=this.authUser,e.profileUser=this.profileUser,this.profileUserStocks&&(e.profileUserStocks=this.profileUserStocks))}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}}return e.\u0275fac=function(t){return new(t||e)(g.Qb(f.a),g.Qb(v.a),g.Qb(wt.a),g.Qb(Et.a),g.Qb(m.a),g.Qb(kt.a),g.Qb(H.a),g.Qb(o.a),g.Qb(o.e))},e.\u0275cmp=g.Kb({type:e,selectors:[["app-show-profile"]],decls:1,vars:1,consts:[["id","profile-wrap",4,"ngIf"],["id","profile-wrap"],[1,"myProfile",3,"routerLink","routerLinkActive"],[1,"myChannel",3,"routerLink"],["id","profile-cover-image"],[3,"src"],[1,"row"],["id","user-details"],[1,"details-row"],["id","details-block"],[1,"avatar-container"],["for",""],["id","profile-image",1,"avatar",2,"cursor","unset",3,"src"],["id","user-full-name"],[1,"connections-count"],["id","profile-actions-block"],[4,"ngIf"],["type","button","id","edit-profile",3,"routerLink",4,"ngIf"],["id","group-actions"],["id","group-tabs"],[1,"nav-tabs"],["class","nav-item",3,"hidden",4,"ngFor","ngForOf"],["id","search-in-current-tab"],["class","tab-content",4,"ngIf"],["class","add-friend-btn",3,"click",4,"ngIf"],["class","waiting-for-confirmation-btn",3,"matMenuTriggerFor",4,"ngIf"],["pendingMenu","matMenu"],["mat-menu-item","",3,"click"],["class","users-connected-btn",3,"matMenuTriggerFor",4,"ngIf"],["menu","matMenu"],["class","toggle-chat-box-btn",3,"click",4,"ngIf"],[1,"add-friend-btn",3,"click"],[1,"waiting-for-confirmation-btn",3,"matMenuTriggerFor"],[1,"users-connected-btn",3,"matMenuTriggerFor"],[1,"toggle-chat-box-btn",3,"click"],["type","button","id","edit-profile",3,"routerLink"],[1,"nav-item",3,"hidden"],["routerLinkActive","active",1,"nav-link",3,"routerLink"],[1,"tab-content"],[3,"activate"]],template:function(e,t){1&e&&g.Kc(0,Ut,34,17,"div",0),2&e&&g.pc("ngIf",t.profileUser)},directives:[i.t,o.f,o.g,i.s,It.e,It.b,ve.a,It.d,o.h,o.j],pipes:[y.a],styles:["#group-tabs[_ngcontent-%COMP%], .stocks-watchlist[_ngcontent-%COMP%]{margin-top:40px}.nav-tabs[_ngcontent-%COMP%]{border-bottom:0;display:flex;flex-wrap:wrap;padding-left:0;list-style:none}.nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{color:#fff!important;width:156px;font-size:12px;box-shadow:0 0 6px rgba(0,0,0,.06);font-family:Muli-Bold;margin-bottom:25px}.nav-link[_ngcontent-%COMP%]{padding:5px;height:31px;background:#fff;color:#545454!important;display:flex;justify-content:center;align-items:center}.nav-link[_ngcontent-%COMP%]:hover{border:0}.nav-link.active[_ngcontent-%COMP%]{background:#f53c6f!important;color:#fff!important}.dropdown[_ngcontent-%COMP%]{cursor:pointer}.dropdown[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{width:100%;padding:0 12px;color:#777;font-size:14px}.dropdown[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]{color:#777;font-size:14px;font-family:Muli-Light}.watchlist-search[_ngcontent-%COMP%]{display:flex;position:relative;width:100%;height:31px;background:#fff 0 0 no-repeat padding-box;margin-right:3px}.watchlist-search.bordered[_ngcontent-%COMP%]{box-shadow:0 3px 8px rgba(0,0,0,.24)}.watchlist-search[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;color:#6a6a6a;right:11px;top:10px}.watchlist-search[_ngcontent-%COMP%]   .watchlist-input[_ngcontent-%COMP%]{font-family:Muli-Light;background:#fff;color:#545454;font-size:16px;padding-left:10px}#profile-wrap[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{margin-bottom:20px}#profile-wrap[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:100px;height:35px;text-align:center;cursor:pointer}#profile-wrap[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   .myProfile[_ngcontent-%COMP%]{margin-right:15px}#profile-wrap[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{background-color:#f53c6f;color:#fff}#profile-cover-image[_ngcontent-%COMP%]{margin-bottom:20px}#profile-cover-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:300px;width:100%;-o-object-fit:cover;object-fit:cover}#details-block[_ngcontent-%COMP%], #profile-actions-block[_ngcontent-%COMP%]{display:flex;align-items:center}#user-full-name[_ngcontent-%COMP%]{display:block}.connections-count[_ngcontent-%COMP%]{margin-top:4px;color:#545454;font-size:14px;font-family:Muli-Light,sans-serif}.details-row[_ngcontent-%COMP%]{justify-content:space-between}#edit-profile[_ngcontent-%COMP%], .details-row[_ngcontent-%COMP%]{display:flex;align-items:center}#edit-profile[_ngcontent-%COMP%]{width:119px;height:36px;padding:15px 32px;color:#fff!important;font-size:16px;font-family:Muli-Light;justify-content:center;transition:.3s ease-in-out;background:#18b587;width:170px}@media (max-width:425px){#edit-profile[_ngcontent-%COMP%]{max-width:170px!important;width:100%!important;padding:15px;white-space:nowrap}}@media (max-width:425px) and (max-width:390px){#edit-profile[_ngcontent-%COMP%]{padding:15px 8px}}#user-details[_ngcontent-%COMP%]{width:98%;margin:auto}.users-connected-btn[_ngcontent-%COMP%]{margin-left:16px;margin-right:16px}.toggle-chat-box-btn[_ngcontent-%COMP%], .users-connected-btn[_ngcontent-%COMP%]{width:119px;height:36px;padding:15px 32px;color:#fff!important;font-size:16px;font-family:Muli-Light;display:flex;justify-content:center;align-items:center;transition:.3s ease-in-out;background:#18b587}.add-friend-btn[_ngcontent-%COMP%]{width:119px;background:#18b587;background-color:#f53c6f}.add-friend-btn[_ngcontent-%COMP%], .waiting-for-confirmation-btn[_ngcontent-%COMP%]{height:36px;color:#fff!important;font-size:16px;font-family:Muli-Light;display:flex;justify-content:center;align-items:center;transition:.3s ease-in-out;padding:0;margin-right:16px}.waiting-for-confirmation-btn[_ngcontent-%COMP%]{width:119px;background:#18b587;width:210px;background-color:#b3b3b3}"]}),e})();function Bt(e,t){if(1&e&&(g.Ub(0),g.Wb(1,"div",2),g.Wb(2,"div",3),g.Wb(3,"div",4),g.Rb(4,"img",5),g.jc(5,"getImgPath"),g.Vb(),g.Wb(6,"div",6),g.Wb(7,"div",7),g.Mc(8),g.Vb(),g.Vb(),g.Vb(),g.Wb(9,"div",8),g.Wb(10,"button",9),g.Rb(11,"i",10),g.Vb(),g.Wb(12,"mat-menu",null,11),g.Wb(14,"button",12),g.Rb(15,"img",13),g.Mc(16," Disconnection "),g.Vb(),g.Vb(),g.Vb(),g.Vb(),g.Tb()),2&e){const e=t.$implicit,n=g.xc(13);g.Cb(4),g.pc("src",g.lc(5,5,e.avatar,"user_avatars"),g.Ec),g.Cb(3),g.pc("routerLink","/users/"+e.username),g.Cb(1),g.Nc(e.first_name+" "+e.last_name),g.Cb(2),g.pc("matMenuTriggerFor",n),g.Cb(4),g.pc("disableRipple",!0)}}let Ft=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=g.Kb({type:e,selectors:[["app-connections-tab"]],inputs:{authUser:"authUser",connections:"connections"},decls:2,vars:1,consts:[[1,"connections-container"],[4,"ngFor","ngForOf"],[1,"connection"],[1,"left"],[1,"img","user-avatar"],[1,"avatar",3,"src"],[1,"text"],[1,"name",3,"routerLink"],[1,"right"],[1,"show-actions",3,"matMenuTriggerFor"],[1,"fas","fa-ellipsis-h"],["menu","matMenu"],["mat-menu-item","",3,"disableRipple"],["src","assets/img/iconDis.png","alt","",1,"iconDis"]],template:function(e,t){1&e&&(g.Wb(0,"div",0),g.Kc(1,Bt,17,8,"ng-container",1),g.Vb()),2&e&&(g.Cb(1),g.pc("ngForOf",t.connections))},directives:[i.s,o.f,It.d,It.e,It.b],pipes:[y.a],styles:[".connections-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:41px;width:100%;max-width:1122px}@media only screen and (max-width:768px){.connections-container[_ngcontent-%COMP%]{display:block;margin-top:60px}}.connections-container[_ngcontent-%COMP%]   .subTabsContainer[_ngcontent-%COMP%]{display:flex;width:100%;max-width:1122px}.connections-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;background:#fff 0 0 no-repeat padding-box;border:1px solid #d8d8d8;opacity:1;padding:23px 21px;max-width:493px;width:100%;margin-bottom:15px;margin-right:15px}@media only screen and (max-width:1440px){.connections-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]{margin-top:15px}}@media only screen and (max-width:1024px){.connections-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]{padding:11px 10px}}.connections-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{display:flex}.connections-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]{position:relative;margin:auto}.connections-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:60px!important;height:60px;margin-right:21px}@media only screen and (max-width:500px){.connections-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:40px!important;height:40px!important}}@media only screen and (max-width:320px){.connections-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{margin-right:11px!important;width:35px!important;height:35px!important}}.connections-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{display:flex;align-items:center;font-family:Muli-Regular,sans-serif;letter-spacing:0;color:#5b5b5b;opacity:1}@media only screen and (max-width:320px){.connections-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:15px!important}}.connections-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{cursor:pointer}.connections-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(.connection-actions   button)[_ngcontent-%COMP%]{background:transparent;width:28px;height:6px;opacity:1}.connections-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .connection-actions[_ngcontent-%COMP%]{display:flex;width:200px;justify-content:space-around;margin-left:50px}@media only screen and (max-width:500px){.connections-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .connection-actions[_ngcontent-%COMP%]{margin-left:20px;width:80%}}.connections-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .connection-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:119px;height:36px;padding:15px 32px;color:#fff!important;font-size:16px;font-family:Muli-Light;display:flex;justify-content:center;align-items:center;transition:.3s ease-in-out;background:#18b587;font-size:14px}.iconDis[_ngcontent-%COMP%]{width:18px!important;height:18px!important}"]}),e})();function zt(e,t){if(1&e){const e=g.Xb();g.Ub(0),g.Wb(1,"div",2),g.Wb(2,"div",3),g.Wb(3,"div",4),g.Rb(4,"img",5),g.jc(5,"getImgPath"),g.Vb(),g.Wb(6,"div",6),g.Wb(7,"div",7),g.Mc(8),g.Vb(),g.Vb(),g.Vb(),g.Wb(9,"div",8),g.Wb(10,"div",9),g.Wb(11,"button",10),g.ec("click",(function(){g.Bc(e);const n=t.$implicit;return g.ic().confirmConnection(n)})),g.Wb(12,"span"),g.Mc(13,"Confirm"),g.Vb(),g.Vb(),g.Wb(14,"button",11),g.ec("click",(function(){g.Bc(e);const n=t.$implicit;return g.ic().declineConnection(n)})),g.Wb(15,"strong"),g.Mc(16,"Decline"),g.Vb(),g.Vb(),g.Vb(),g.Vb(),g.Vb(),g.Tb()}if(2&e){const e=t.$implicit;g.Cb(4),g.pc("src",g.lc(5,2,e.avatar,"user_avatars"),g.Ec),g.Cb(4),g.Nc(e.first_name+" "+e.last_name)}}let Gt=(()=>{class e{constructor(){this.connectionRequests=[]}ngOnInit(){}confirmConnection(e){}declineConnection(e){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=g.Kb({type:e,selectors:[["app-connection-requests-tab"]],inputs:{authUser:"authUser",connectionRequests:"connectionRequests"},decls:2,vars:1,consts:[[1,"connection-requests-container"],[4,"ngFor","ngForOf"],[1,"connection"],[1,"left"],[1,"img","user-avatar"],[1,"avatar",3,"src"],[1,"text"],[1,"name"],[1,"right"],[1,"connection-actions"],[1,"confirm-connection-btn",3,"click"],[1,"decline-connection-btn",3,"click"]],template:function(e,t){1&e&&(g.Wb(0,"div",0),g.Kc(1,zt,17,5,"ng-container",1),g.Vb()),2&e&&(g.Cb(1),g.pc("ngForOf",t.connectionRequests))},directives:[i.s],pipes:[y.a],styles:[".connection-requests-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:41px;width:100%;max-width:1122px}@media only screen and (max-width:768px){.connection-requests-container[_ngcontent-%COMP%]{display:block;margin-top:60px}}.connection-requests-container[_ngcontent-%COMP%]   .subTabsContainer[_ngcontent-%COMP%]{display:flex;width:100%;max-width:1122px}.connection-requests-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;background:#fff 0 0 no-repeat padding-box;border:1px solid #d8d8d8;opacity:1;padding:23px 21px;max-width:493px;width:100%;margin-bottom:15px;margin-right:15px}@media only screen and (max-width:1440px){.connection-requests-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]{margin-top:15px}}@media only screen and (max-width:1024px){.connection-requests-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]{padding:11px 10px}}.connection-requests-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{display:flex}.connection-requests-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]{position:relative;margin:auto}.connection-requests-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:60px!important;height:60px;margin-right:21px}@media only screen and (max-width:500px){.connection-requests-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:40px!important;height:40px!important}}@media only screen and (max-width:320px){.connection-requests-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{margin-right:11px!important;width:35px!important;height:35px!important}}.connection-requests-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{display:flex;align-items:center;font-family:Muli-Regular;letter-spacing:0;color:#5b5b5b;opacity:1}@media only screen and (max-width:320px){.connection-requests-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:15px!important}}.connection-requests-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(.connection-actions   button)[_ngcontent-%COMP%]{background:transparent;width:28px;height:6px;opacity:1}.connection-requests-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .connection-actions[_ngcontent-%COMP%]{display:flex;width:200px;justify-content:space-around;margin-left:50px}@media only screen and (max-width:500px){.connection-requests-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .connection-actions[_ngcontent-%COMP%]{margin-left:20px;width:80%}}.connection-requests-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .connection-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:119px;height:36px;padding:15px 32px;color:#fff!important;font-size:16px;font-family:Muli-Light;display:flex;justify-content:center;align-items:center;transition:.3s ease-in-out;background:#18b587;font-size:14px}.connection-requests-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .connection-actions[_ngcontent-%COMP%]   .confirm-connection-btn[_ngcontent-%COMP%]{background:#18b587 0 0 no-repeat padding-box;opacity:1;text-align:left;font:normal normal normal 13px/19px Muli-Regular;letter-spacing:0;color:#fff}@media only screen and (max-width:500px){.connection-requests-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .connection-actions[_ngcontent-%COMP%]   .confirm-connection-btn[_ngcontent-%COMP%]{padding:15px 25px!important;width:60px!important}}.connection-requests-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .connection-actions[_ngcontent-%COMP%]   .decline-connection-btn[_ngcontent-%COMP%]{background-color:transparent;text-align:left;font:normal normal normal 13px/19px Muli-Regular;letter-spacing:0;color:#5b5b5b!important;opacity:1}@media only screen and (max-width:500px){.connection-requests-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .connection-actions[_ngcontent-%COMP%]   .decline-connection-btn[_ngcontent-%COMP%]{padding:15px 25px!important;width:60px!important}}"]}),e})();var Qt=n("pLZG"),Kt=n("RSRA"),Ht=n("WKnA");function qt(e,t){1&e&&(g.Wb(0,"small",2),g.Mc(1," No stocks added to watchlist"),g.Vb())}function Yt(e,t){if(1&e){const e=g.Xb();g.Wb(0,"app-stock-tiles",3),g.ec("updatedStocksList",(function(t){return g.Bc(e),g.ic().saveUpdatedStocksList(t)}))("updatedStocksPriority",(function(t){return g.Bc(e),g.ic().updateStocksPriority(t)})),g.Vb()}if(2&e){const e=g.ic();g.pc("stocks",e.filteredStocks)("userStocks",e.userStocks)("followingAllowed",!0)}}const Zt=[{path:"video",children:[{path:"check-streaming-requirements",component:ot,data:{title:"Streaming requirements check"}},{path:"start-live-video",component:ot,data:{title:"Devices and requirements check"}},{path:"publish",component:de,canDeactivate:[xt],data:{title:"Start live streaming"}},{path:"watch",component:Mt,data:{title:"Watch live stream"}},{path:"openvidu-test",component:me}]},{path:"notifications",component:Pt},{path:":username",children:[{path:"",component:Wt},{path:"edit",component:j,pathMatch:"full",data:{title:"User profile-form"}},{path:"tab",component:Wt,children:[{path:"watchlist",component:(()=>{class e{constructor(e,t){this.stocksStore=e,this.stocksService=t,this.subscriptions=[],this.userStocks=[],this.filteredStocks=[],this.stocksLoading=!1}ngOnInit(){this.authUser.id===this.profileUser.id?this.trackUserStocks():this.getProfileUserStocks()}trackUserStocks(){this.stocksLoading=!0,this.subscriptions.push(this.stocksStore.userStocks$.pipe(Object(Qt.a)(e=>!e.initial)).subscribe(e=>{this.userStocks=e.stocks,this.filteredStocks=this.userStocks,this.stocksLoading=!1}))}getProfileUserStocks(){console.log("OK",this.profileUserStocks),this.userStocks=this.profileUserStocks,this.filteredStocks=this.userStocks,this.stocksLoading=!1}saveUpdatedStocksList(e){this.subscriptions.push(this.stocksService.updateFollowedStocks(Object.assign({user_id:this.authUser.id},{stocks:e})).subscribe(e=>{this.userStocks=(null==e?void 0:e.user_stocks)||[],this.stocksStore.setUserStocks({stocks:this.userStocks,empty:0===this.userStocks.length})}))}updateStocksPriority(e){const t={order_type:"custom",rows:JSON.stringify(e),user_id:this.authUser.id};this.stocksStore.setUserStocks({stocks:e,dragdrop:!0}),this.stocksService.updateUserStocksPriority(t).subscribe(e=>{localStorage.setItem("token",e.hasOwnProperty("token")?e.token:"")})}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}}return e.\u0275fac=function(t){return new(t||e)(g.Qb(Kt.a),g.Qb(H.a))},e.\u0275cmp=g.Kb({type:e,selectors:[["app-watchlist-tab"]],inputs:{authUser:"authUser",profileUser:"profileUser",profileUserStocks:"profileUserStocks"},decls:2,vars:2,consts:[["class","error",4,"ngIf"],[3,"stocks","userStocks","followingAllowed","updatedStocksList","updatedStocksPriority",4,"ngIf"],[1,"error"],[3,"stocks","userStocks","followingAllowed","updatedStocksList","updatedStocksPriority"]],template:function(e,t){1&e&&(g.Kc(0,qt,2,0,"small",0),g.Kc(1,Yt,1,3,"app-stock-tiles",1)),2&e&&(g.pc("ngIf",0===(null==t.userStocks?null:t.userStocks.length)),g.Cb(1),g.pc("ngIf",(null==t.userStocks?null:t.userStocks.length)>0))},directives:[i.t,Ht.a],styles:[""]}),e})()},{path:"connections",component:Ft},{path:"requests",component:Gt},{path:"cards",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=g.Kb({type:e,selectors:[["app-cards-tab"]],decls:2,vars:0,template:function(e,t){1&e&&(g.Wb(0,"p"),g.Mc(1,"cards-tab works!"),g.Vb())},styles:[""]}),e})()}]}]}];let Jt=(()=>{class e{}return e.\u0275mod=g.Ob({type:e}),e.\u0275inj=g.Nb({factory:function(t){return new(t||e)},imports:[[o.i.forChild(Zt)],o.i]}),e})();var Xt=n("PCNd");let $t=(()=>{class e{}return e.\u0275mod=g.Ob({type:e}),e.\u0275inj=g.Nb({factory:function(t){return new(t||e)},imports:[[i.c,Xt.a,o.i]]}),e})();n("uhAG");let en=(()=>{class e{}return e.\u0275mod=g.Ob({type:e}),e.\u0275inj=g.Nb({factory:function(t){return new(t||e)},imports:[[i.c,Jt,ue.OpenviduSessionModule,Xt.a,$t]]}),e})()}}]);
//# sourceMappingURL=users-users-module-es2015.8f6e04ea62c950b28e5b.js.map