function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,n,e){return n&&_defineProperties(t.prototype,n),e&&_defineProperties(t,e),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"55j5":function(t,n,e){"use strict";e.r(n),e.d(n,"ChannelsModule",(function(){return gn}));var i=e("ofXK"),c=e("tyNb"),s=e("mrSG"),a=e("9xOu"),o=e("3Pt+"),r=e("pLZG"),l=e("fXoL"),u=e("FFj9"),b=e("wDcp"),h=e("ZP/m"),g=e("sAj1"),d=e("Rnal"),f=e("Xa2L"),p=e("WKnA");function v(t,n){1&t&&l.Sb(0,"mat-spinner",4),2&t&&l.uc("diameter",20)}function m(t,n){1&t&&(l.Xb(0,"small",5),l.Qc(1," No stocks added to watchlist"),l.Wb())}function C(t,n){if(1&t){var e=l.Yb();l.Xb(0,"app-stock-tiles",6),l.jc("updatedStocksList",(function(t){return l.Gc(e),l.nc(2).saveUpdatedStocksList(t)}))("updatedStocksPriority",(function(t){return l.Gc(e),l.nc(2).updateStocksPriority(t)})),l.Wb()}if(2&t){var i=l.nc(2);l.uc("stocks",i.filteredStocks)("userStocks",i.userStocks)("followingAllowed",!0)}}function k(t,n){if(1&t&&(l.Xb(0,"div"),l.Oc(1,v,1,1,"mat-spinner",1),l.Oc(2,m,2,0,"small",2),l.Oc(3,C,1,3,"app-stock-tiles",3),l.Wb()),2&t){var e=l.nc();l.Cb(1),l.uc("ngIf","loading"===e.stocksLoading),l.Cb(1),l.uc("ngIf",0===(null==e.userStocks?null:e.userStocks.length)&&"finished"===e.stocksLoading),l.Cb(1),l.uc("ngIf",(null==e.userStocks?null:e.userStocks.length)>0)}}var O,M=((O=function(){function t(n,e,i,c,s,o,r,l){_classCallCheck(this,t),this.videoService=n,this.subjectService=e,this.router=i,this.getExactParams=c,this.stocksService=s,this.getAuthUser=o,this.subject=r,this.cdr=l,this.apiUrl=a.c,this.subscriptions=[],this.userStocks=[],this.filteredStocks=[],this.stocksLoading="idle"}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.authUser=this.getAuthUser.transform(),this.search=localStorage.getItem("searchStock"),this.stocksLoading="loading",this.subscriptions.push(this.subject.currentUserStocks.pipe(Object(r.a)((function(t){return!t.initial}))).subscribe((function(n){t.userStocks=n.stocks,t.filteredStocks=t.userStocks,t.stocksLoading="finished"})))}},{key:"getSearchResults",value:function(t){this.search=t,this.filteredStocks=t.search?this.userStocks.filter((function(n){return n.name.toLowerCase().includes(t.search)})):this.userStocks}},{key:"saveUpdatedStocksList",value:function(t){var n=this;this.stocksLoading="loading",this.subscriptions.push(this.stocksService.updateFollowedStocks(Object.assign({user_id:this.authUser.id},{stocks:t})).subscribe((function(t){n.userStocks=(null==t?void 0:t.user_stocks)||[],n.subject.changeUserStocks({stocks:n.userStocks,empty:0===n.userStocks.length}),n.stocksLoading="finished",n.cdr.detectChanges()})))}},{key:"updateStocksPriority",value:function(t){var n={order_type:"custom",rows:JSON.stringify(t),user_id:this.authUser.id};this.subject.changeUserStocks({stocks:t,dragdrop:!0}),this.stocksService.updateUserStocksPriority(n).subscribe((function(t){localStorage.setItem("token",t.hasOwnProperty("token")?t.token:"")}))}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach((function(t){return t.unsubscribe()}))}}]),t}()).\u0275fac=function(t){return new(t||O)(l.Rb(u.a),l.Rb(b.a),l.Rb(c.d),l.Rb(h.a),l.Rb(g.a),l.Rb(d.a),l.Rb(b.a),l.Rb(l.h))},O.\u0275cmp=l.Lb({type:O,selectors:[["app-watchlist-tab"]],inputs:{channelUser:"channelUser"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"diameter",4,"ngIf"],["class","error",4,"ngIf"],[3,"stocks","userStocks","followingAllowed","updatedStocksList","updatedStocksPriority",4,"ngIf"],[3,"diameter"],[1,"error"],[3,"stocks","userStocks","followingAllowed","updatedStocksList","updatedStocksPriority"]],template:function(t,n){1&t&&l.Oc(0,k,4,3,"div",0),2&t&&l.uc("ngIf",n.filteredStocks&&n.channelUser.username===n.authUser.username)},directives:[i.u,f.c,p.a],styles:[""]}),O),_=e("sMQj"),P=e("86ia");function y(t,n){if(1&t){var e=l.Yb();l.Xb(0,"app-video-filters",2),l.jc("filter",(function(t){return l.Gc(e),l.nc().getFilteredVideos(t)})),l.Wb()}}var U,S=((U=function(){function t(n,e,i,c){_classCallCheck(this,t),this.router=n,this.videoService=e,this.subjectService=i,this.getExactParams=c,this.apiUrl=a.c,this.showFilters=!1,this.search="",this.filters=null,this.userVideos=[],this.videosLoaded=!1}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.subjectService.getToggleFiltersData().subscribe((function(n){t.showFilters=n}))}},{key:"getUserVideos",value:function(t){var n=this;(t=this.getExactParams.transform(t)).user_id=this.channelUser.id,this.videoService.getUserVideos(t).subscribe((function(t){n.videosLoaded=!0,n.channelUser.videos=null==t?void 0:t.videos}))}},{key:"getSearchResults",value:function(t){this.search=t,this.getUserVideos({search:this.search,filters:this.filters})}},{key:"getFilteredVideos",value:function(t){this.filters=t,this.getUserVideos({search:this.search,filters:this.filters})}}]),t}()).\u0275fac=function(t){return new(t||U)(l.Rb(c.d),l.Rb(u.a),l.Rb(b.a),l.Rb(h.a))},U.\u0275cmp=l.Lb({type:U,selectors:[["app-videos-tab"]],inputs:{channelUser:"channelUser",authUser:"authUser"},decls:2,vars:3,consts:[[3,"filter",4,"ngIf"],[3,"videos","removable"],[3,"filter"]],template:function(t,n){1&t&&(l.Oc(0,y,1,0,"app-video-filters",0),l.Sb(1,"app-videos-list-holder",1)),2&t&&(l.uc("ngIf",n.showFilters),l.Cb(1),l.uc("videos",n.channelUser.videos)("removable",n.authUser.username===n.channelUser.username))},directives:[i.u,_.a,P.a],styles:[""]}),U),W=e("T2Au"),w=e("dJ++"),x=e("wgiU"),I=e("CPAS"),X=e("0IaG"),F=e("NFeN"),T=e("fZdh");function R(t,n){if(1&t){var e=l.Yb();l.Xb(0,"app-video-filters",4),l.jc("filter",(function(t){return l.Gc(e),l.nc().getFilteredPlaylists(t)})),l.Wb()}}function j(t,n){1&t&&(l.Vb(0),l.Xb(1,"mat-icon"),l.Qc(2,"visibility_off"),l.Wb(),l.Xb(3,"span"),l.Qc(4,"Private"),l.Wb(),l.Ub())}function Q(t,n){1&t&&(l.Vb(0),l.Xb(1,"mat-icon"),l.Qc(2,"visibility_on"),l.Wb(),l.Xb(3,"span"),l.Qc(4,"Public"),l.Wb(),l.Ub())}function L(t,n){if(1&t){var e=l.Yb();l.Xb(0,"tr"),l.Xb(1,"td"),l.Xb(2,"div",9),l.Xb(3,"img",10),l.jc("click",(function(){l.Gc(e);var t=n.$implicit;return l.nc(3).goToEditPage(t)})),l.oc(4,"getImgPath"),l.Wb(),l.Xb(5,"div",11),l.Xb(6,"h3"),l.Qc(7),l.Wb(),l.Xb(8,"p"),l.Qc(9),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Xb(10,"td"),l.Oc(11,j,5,0,"ng-container",2),l.Oc(12,Q,5,0,"ng-container",2),l.Wb(),l.Xb(13,"td"),l.Xb(14,"span"),l.Qc(15),l.oc(16,"date"),l.Wb(),l.Wb(),l.Xb(17,"td"),l.Xb(18,"span"),l.Qc(19),l.oc(20,"date"),l.Wb(),l.Wb(),l.Xb(21,"td"),l.Xb(22,"span"),l.Qc(23),l.Wb(),l.Wb(),l.Xb(24,"td"),l.Xb(25,"span",12),l.jc("click",(function(){l.Gc(e);var t=n.$implicit;return l.nc(3).goToEditPage(t)})),l.Qc(26,"create"),l.Wb(),l.Xb(27,"mat-icon",13),l.jc("click",(function(){l.Gc(e);var t=n.$implicit,i=l.nc(3);return i.removePlaylist(t.id,i.channelUser.id)})),l.Qc(28,"delete"),l.Wb(),l.Wb(),l.Wb()}if(2&t){var i=n.$implicit;l.Cb(3),l.uc("src",l.pc(4,8,i.thumbnail),l.Ic),l.Cb(4),l.Rc(i.name),l.Cb(2),l.Rc(i.description),l.Cb(2),l.uc("ngIf",i.privacy),l.Cb(1),l.uc("ngIf",!i.privacy),l.Cb(3),l.Rc(l.qc(16,10,i.created_at,"d MMM, yyyy")),l.Cb(4),l.Rc(l.qc(20,13,i.updated_at,"d MMM, yyyy")),l.Cb(4),l.Rc(i.videos.length)}}function G(t,n){if(1&t&&(l.Xb(0,"table",7),l.Xb(1,"tr"),l.Xb(2,"th"),l.Qc(3,"Playlist"),l.Wb(),l.Xb(4,"th"),l.Qc(5,"Visibility"),l.Wb(),l.Xb(6,"th"),l.Qc(7,"Created at"),l.Wb(),l.Xb(8,"th"),l.Qc(9,"Last updated"),l.Wb(),l.Xb(10,"th"),l.Qc(11,"Video count"),l.Wb(),l.Sb(12,"th"),l.Wb(),l.Oc(13,L,29,16,"tr",8),l.Wb()),2&t){var e=l.nc(2);l.Cb(13),l.uc("ngForOf",e.playlists)("ngForTrackBy",e.trackByElement)}}function B(t,n){if(1&t){var e=l.Yb();l.Vb(0),l.Xb(1,"button",5),l.jc("click",(function(){return l.Gc(e),l.nc().openAddPlaylistModal()})),l.Qc(2,"Add New Playlist"),l.Wb(),l.Oc(3,G,14,2,"table",6),l.Ub()}if(2&t){var i=l.nc();l.Cb(3),l.uc("ngIf",i.playlists.length>0)}}function V(t,n){if(1&t){var e=l.Yb();l.Vb(0),l.Xb(1,"div",16),l.Xb(2,"div",17),l.jc("click",(function(){l.Gc(e);var t=n.$implicit;return l.nc(2).openPlaylistPage(t,null==t.videos[0]?null:t.videos[0].id)})),l.Sb(3,"img",18),l.oc(4,"getImgPath"),l.Xb(5,"div",19),l.Xb(6,"p",20),l.Xb(7,"span",21),l.Qc(8,"playlist_play"),l.Wb(),l.Wb(),l.Xb(9,"p"),l.Qc(10),l.Wb(),l.Xb(11,"p",22),l.Qc(12),l.Wb(),l.Wb(),l.Wb(),l.Xb(13,"div",11),l.Xb(14,"h2"),l.Qc(15),l.Wb(),l.Xb(16,"p"),l.Qc(17),l.Wb(),l.Wb(),l.Wb(),l.Ub()}if(2&t){var i=n.$implicit;l.Cb(3),l.uc("src",l.pc(4,5,i.thumbnail),l.Ic),l.Cb(7),l.Rc(i.name),l.Cb(2),l.Rc(i.videos.length+(1===i.videos.length?" video":" videos")),l.Cb(3),l.Rc(i.name),l.Cb(2),l.Rc(i.description)}}function A(t,n){if(1&t&&(l.Vb(0),l.Xb(1,"div",14),l.Oc(2,V,18,7,"ng-container",15),l.Wb(),l.Ub()),2&t){var e=l.nc();l.Cb(2),l.uc("ngForOf",e.playlists)}}function E(t,n){1&t&&(l.Xb(0,"div",23),l.Xb(1,"small",24),l.Qc(2,"No playlists found for this channel"),l.Wb(),l.Wb())}var Y,D=((Y=function(){function t(n,e,i,c,s){_classCallCheck(this,t),this.router=n,this.playlistsService=e,this.subjectService=i,this.dialog=c,this.getExactParams=s,this.playlists=[],this.apiUrl=a.c,this.showFilters=!1,this.search="",this.filters=null,this.subscriptions=[],this.trackByElement=x.a}return _createClass(t,[{key:"ngOnInit",value:function(){this.search=localStorage.getItem("search"),this.getPlaylists({search:this.search,filters:this.filters}),this.getFiltersToggleState()}},{key:"getFiltersToggleState",value:function(){var t=this;this.subscriptions.push(this.subjectService.getToggleFiltersData().subscribe((function(n){t.showFilters=n})))}},{key:"getPlaylists",value:function(t){var n=this;t=this.getExactParams.transform(t),this.playlistsService.get(Object.assign({channel_id:this.channelUser.channel.id,user_id:this.authUser.id},t)).subscribe((function(t){n.playlists=t}))}},{key:"openAddPlaylistModal",value:function(){var t=this;this.dialog.open(W.a,{data:{channel_id:this.channelUser.channel.id}}).afterClosed().subscribe((function(n){t.getPlaylists({search:t.search,filters:t.filters})}))}},{key:"openPlaylistPage",value:function(t,n){this.router.navigate(["videos/play"],{queryParams:{id:n,playlist_id:t.id}})}},{key:"getSearchResults",value:function(t){this.search=t,this.getPlaylists({search:t,filters:this.filters})}},{key:"getFilteredPlaylists",value:function(t){this.filters=t,this.getPlaylists({search:this.search,filters:t})}},{key:"goToEditPage",value:function(t){this.router.navigate(["playlists/single/"+t.id])}},{key:"removePlaylist",value:function(t,n){var e=this;this.dialog.open(w.a).afterClosed().subscribe((function(i){i&&e.playlistsService.removePlaylist({id:t,channel_id:n}).subscribe((function(t){e.getPlaylists({search:e.search,filters:e.filters})}))}))}}]),t}()).\u0275fac=function(t){return new(t||Y)(l.Rb(c.d),l.Rb(I.a),l.Rb(b.a),l.Rb(X.b),l.Rb(h.a))},Y.\u0275cmp=l.Lb({type:Y,selectors:[["app-playlists-tab"]],inputs:{channelUser:"channelUser",authUser:"authUser"},decls:5,vars:4,consts:[[3,"filter",4,"ngIf"],[1,"playlist-tab"],[4,"ngIf"],["id","no-playlists-found",4,"ngIf"],[3,"filter"],[1,"btn","new-playlist",3,"click"],["class","table-responsive",4,"ngIf"],[1,"table-responsive"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"img-info"],[1,"thumbnail",3,"src","click"],[1,"info"],[1,"material-icons",3,"click"],[3,"click"],[1,"playlists-items"],[4,"ngFor","ngForOf"],[1,"item"],[1,"top-wrap",3,"click"],[1,"thumbnail",3,"src"],[1,"overlay-info"],[1,"icon"],[1,"material-icons"],[1,"video-count"],["id","no-playlists-found"],[1,"error"]],template:function(t,n){1&t&&(l.Oc(0,R,1,0,"app-video-filters",0),l.Xb(1,"div",1),l.Oc(2,B,4,1,"ng-container",2),l.Oc(3,A,3,1,"ng-container",2),l.Oc(4,E,3,0,"div",3),l.Wb()),2&t&&(l.uc("ngIf",n.showFilters),l.Cb(2),l.uc("ngIf",n.authUser.username===n.channelUser.username),l.Cb(1),l.uc("ngIf",n.authUser.username!==n.channelUser.username),l.Cb(1),l.uc("ngIf",0===n.playlists.length))},directives:[i.u,P.a,i.t,F.a],pipes:[T.a,i.f],styles:[".playlist-tab[_ngcontent-%COMP%]   .new-playlist[_ngcontent-%COMP%]{background:#18b587;border-radius:0;color:#fff;padding:8px 24px}.playlist-tab[_ngcontent-%COMP%]   #no-playlists-found[_ngcontent-%COMP%]{margin-top:20px}.playlist-tab[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{display:table;margin:24px 0;width:100%}.playlist-tab[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table-row}.playlist-tab[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   .td[_ngcontent-%COMP%]{border-bottom:0}.playlist-tab[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{text-align:right}.playlist-tab[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child   .material-icons[_ngcontent-%COMP%]{transition:.3s}.playlist-tab[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child   .material-icons[_ngcontent-%COMP%]:hover{color:#18b587}.playlist-tab[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .playlist-tab[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle;color:#545454;font-family:Muli-Bold,sans-serif;white-space:nowrap;font-size:16px;padding:12px 0}.playlist-tab[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child   .material-icons[_ngcontent-%COMP%], .playlist-tab[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child   .material-icons[_ngcontent-%COMP%]{margin:0}.playlist-tab[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%], .playlist-tab[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{margin-right:12px!important;vertical-align:middle;cursor:pointer}.playlist-tab[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .img-info[_ngcontent-%COMP%], .playlist-tab[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .img-info[_ngcontent-%COMP%]{display:flex;align-items:flex-start}.playlist-tab[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .img-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .playlist-tab[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .img-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:144px;cursor:pointer}.playlist-tab[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .img-info[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%], .playlist-tab[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .img-info[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{margin-left:24px}.playlist-tab[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .img-info[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .playlist-tab[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .img-info[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{max-width:240px;font-size:16px;font-family:Muli-Bold;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden}.playlist-tab[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .img-info[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .playlist-tab[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .img-info[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{max-width:240px;font-size:12px;font-weight:400;-webkit-line-clamp:2;display:-webkit-box;-webkit-box-orient:vertical;overflow:hidden}@media screen and (max-width:991px){.playlist-tab[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{display:block;overflow-x:auto}}.playlists-items[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.playlists-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{flex:0 0 calc(33.3% - 21px);margin-right:32px;margin-bottom:32px;cursor:pointer}.playlists-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:nth-child(3n+3){margin-right:0}.playlists-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .top-wrap[_ngcontent-%COMP%]{position:relative;height:216px}.playlists-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .top-wrap[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;-o-object-fit:cover;object-fit:cover}.playlists-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .top-wrap[_ngcontent-%COMP%]   .overlay-info[_ngcontent-%COMP%]{padding:16px;position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.38)}.playlists-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .top-wrap[_ngcontent-%COMP%]   .overlay-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;font-size:16px;font-weight:700;margin-bottom:8px}.playlists-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{margin-top:24px}.playlists-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#545454;font-size:16px;font-weight:700}.playlists-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:8px;margin-bottom:0;color:#545454;font-size:15px;font-weight:500}@media screen and (max-width:991px){.playlists-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{flex:0 0 calc(50% - 21px)}}@media screen and (max-width:767px){.playlists-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{flex:0 0 100%}}"]}),Y),q=e("fm3l"),z=e("tVj7"),H=e("1m4N"),N=e("HHsJ"),$=e("7dP1"),J=e("lwos"),K=e("JEAd"),Z=e("iing"),tt=e("5eHb"),nt=e("il7l"),et=e("Y9zH"),it=e("PPbg"),ct=e("yUsM"),st=e("224n"),at=e("WHgu"),ot=e("kUS0"),rt=e("bTqV"),lt=e("kmnG"),ut=e("qFsG"),bt=e("STbY");function ht(t,n){if(1&t){var e=l.Yb();l.Xb(0,"div",20),l.Xb(1,"input",21),l.jc("change",(function(t){return l.Gc(e),l.nc().coverChangeEvent(t)})),l.Wb(),l.Sb(2,"input",22),l.Xb(3,"ngx-photo-editor",23),l.jc("imageCropped",(function(t){return l.Gc(e),l.nc().coverCropped(t)})),l.Wb(),l.Wb()}if(2&t){var i=l.nc();l.uc("hidden",!0),l.Cb(3),l.uc("imageChanedEvent",i.coverChangedEvent)("autoCrop",!1)("viewMode",3)}}function gt(t,n){if(1&t){var e=l.Yb();l.Xb(0,"button",24),l.jc("click",(function(){return l.Gc(e),l.nc().removeCover()})),l.Xb(1,"mat-icon"),l.Qc(2,"clear"),l.Wb(),l.Wb()}}function dt(t,n){1&t&&(l.Xb(0,"mat-icon",25),l.Qc(1,"add"),l.Wb())}function ft(t,n){if(1&t){var e=l.Yb();l.Xb(0,"mat-icon",26),l.jc("click",(function(){return l.Gc(e),l.nc().removeAvatar()})),l.Qc(1,"clear "),l.Wb()}}function pt(t,n){if(1&t){var e=l.Yb();l.Xb(0,"div",20),l.Xb(1,"input",27),l.jc("change",(function(t){return l.Gc(e),l.nc().profileChangeEvent(t)})),l.Wb(),l.Sb(2,"input",28),l.Xb(3,"ngx-photo-editor",29),l.jc("imageCropped",(function(t){return l.Gc(e),l.nc().profileCropped(t)})),l.Wb(),l.Wb()}if(2&t){var i=l.nc();l.uc("hidden",!0),l.Cb(3),l.uc("imageChanedEvent",i.profileChangedEvent)("aspectRatio",4/3)("viewMode",1)("resizeToWidth",500)}}function vt(t,n){if(1&t&&(l.Xb(0,"p",30),l.Qc(1),l.Wb()),2&t){var e=l.nc();l.Cb(1),l.Rc(e.channelUser.channel.name)}}function mt(t,n){if(1&t){var e=l.Yb();l.Xb(0,"mat-form-field"),l.Xb(1,"input",31),l.jc("keyup.enter",(function(t){return l.Gc(e),t.preventDefault()})),l.Wb(),l.Wb()}}function Ct(t,n){1&t&&(l.Xb(0,"div",32),l.Sb(1,"mat-spinner",33),l.Wb()),2&t&&(l.Cb(1),l.uc("diameter",50))}function kt(t,n){if(1&t){var e=l.Yb();l.Xb(0,"a",44),l.jc("click",(function(){return l.Gc(e),l.nc(2).connectWithUser()})),l.Xb(1,"mat-icon"),l.Qc(2,"person_add"),l.Wb(),l.Xb(3,"span"),l.Qc(4,"Connect"),l.Wb(),l.Wb()}}function Ot(t,n){if(1&t&&(l.Xb(0,"a",45),l.Xb(1,"mat-icon"),l.Qc(2,"check"),l.Wb(),l.Xb(3,"span"),l.Qc(4,"Waiting for confirmation"),l.Wb(),l.Wb()),2&t){l.nc();var e=l.Cc(4);l.uc("matMenuTriggerFor",e)}}function Mt(t,n){if(1&t&&(l.Xb(0,"button",46),l.Xb(1,"mat-icon"),l.Qc(2,"check"),l.Wb(),l.Xb(3,"span"),l.Qc(4,"Connected"),l.Wb(),l.Wb()),2&t){l.nc();var e=l.Cc(12);l.uc("matMenuTriggerFor",e)}}function _t(t,n){if(1&t){var e=l.Yb();l.Xb(0,"a",47),l.jc("click",(function(){return l.Gc(e),l.nc(2).toggleBottomChatBox()})),l.Xb(1,"mat-icon"),l.Qc(2,"chat"),l.Wb(),l.Xb(3,"span"),l.Qc(4,"Message"),l.Wb(),l.Wb()}}function Pt(t,n){if(1&t){var e=l.Yb();l.Xb(0,"a",48),l.jc("click",(function(){l.Gc(e);var t=l.nc(2);return t.subscribeToChannel(t.channelUser.channel)})),l.Xb(1,"mat-icon"),l.Qc(2,"favorite_border"),l.Wb(),l.Xb(3,"span"),l.Qc(4,"Subscribe"),l.Wb(),l.Wb()}}function yt(t,n){if(1&t){var e=l.Yb();l.Xb(0,"a",49),l.jc("click",(function(){l.Gc(e);var t=l.nc(2);return t.subscribeToChannel(t.channelUser.channel)})),l.Xb(1,"mat-icon"),l.Qc(2,"favorite"),l.Wb(),l.Xb(3,"span"),l.Qc(4,"Subscribed"),l.Wb(),l.Wb()}}function Ut(t,n){if(1&t){var e=l.Yb();l.Xb(0,"div",34),l.Oc(1,kt,5,0,"a",35),l.Oc(2,Ot,5,1,"a",36),l.Xb(3,"mat-menu",null,37),l.Xb(5,"button",38),l.jc("click",(function(){l.Gc(e);var t=l.nc();return t.cancelUsersConnecting(t.usersConnection)})),l.Xb(6,"mat-icon"),l.Qc(7,"close"),l.Wb(),l.Xb(8,"span"),l.Qc(9,"Cancel"),l.Wb(),l.Wb(),l.Wb(),l.Oc(10,Mt,5,1,"button",39),l.Xb(11,"mat-menu",null,40),l.Xb(13,"button",38),l.jc("click",(function(){return l.Gc(e),l.nc().disconnectUser()})),l.Xb(14,"mat-icon"),l.Qc(15,"close"),l.Wb(),l.Xb(16,"span"),l.Qc(17,"Disconnect"),l.Wb(),l.Wb(),l.Wb(),l.Oc(18,_t,5,0,"a",41),l.Oc(19,Pt,5,0,"a",42),l.Oc(20,yt,5,0,"a",43),l.Wb()}if(2&t){var i=l.nc();l.Cb(1),l.uc("ngIf","idle"===i.usersConnectionStatus),l.Cb(1),l.uc("ngIf","pending"===i.usersConnectionStatus),l.Cb(8),l.uc("ngIf","connected"===i.usersConnectionStatus),l.Cb(8),l.uc("ngIf",i.isMessageBtnShown()),l.Cb(1),l.uc("ngIf",!i.subscribedToChannel),l.Cb(1),l.uc("ngIf",i.subscribedToChannel)}}function St(t,n){if(1&t){var e=l.Yb();l.Xb(0,"button",54),l.jc("click",(function(){return l.Gc(e),l.nc(2).toggleEditMode()})),l.Xb(1,"mat-icon"),l.Qc(2,"edit"),l.Wb(),l.Qc(3," Edit channel "),l.Wb()}}function Wt(t,n){if(1&t){var e=l.Yb();l.Xb(0,"button",55),l.jc("click",(function(){return l.Gc(e),l.nc(2).toggleEditMode()})),l.Xb(1,"mat-icon"),l.Qc(2,"cancel"),l.Wb(),l.Qc(3," Cancel "),l.Wb()}}function wt(t,n){if(1&t){var e=l.Yb();l.Xb(0,"button",56),l.jc("click",(function(){return l.Gc(e),l.nc(2).saveChanges()})),l.Xb(1,"mat-icon"),l.Qc(2,"save"),l.Wb(),l.Qc(3," Save changes "),l.Wb()}}function xt(t,n){if(1&t&&(l.Xb(0,"div",50),l.Oc(1,St,4,0,"button",51),l.Oc(2,Wt,4,0,"button",52),l.Oc(3,wt,4,0,"button",53),l.Wb()),2&t){var e=l.nc();l.Cb(1),l.uc("ngIf",!e.editMode),l.Cb(1),l.uc("ngIf",e.editMode),l.Cb(1),l.uc("ngIf",e.editMode)}}var It,Xt=function(t){return{opacity:t}},Ft=((It=function(){function t(n,e,i,c,s,o,r,l,u,b,h,g){_classCallCheck(this,t),this.usersService=n,this.userStore=e,this.base64ToFile=i,this.getAuthUser=c,this.channelService=s,this.subject=o,this.usersConnectionsStore=r,this.groupsMessagesStore=l,this.notificationsStore=u,this.socketService=b,this.loader=h,this.fb=g,this.apiUrl=a.c,this.subscribedToChannel=!1,this.subscribersCount=0,this.changingImage=!1,this.editMode=!1,this.subscriptions=[],this.attemptedToConnect=!1,this.isBlocked=!1,this.usersConnectionStatus="idle"}return _createClass(t,[{key:"ngOnInit",value:function(){this.channelUser&&(this.checkChannelSubscription(),this.initChannelForm(),this.checkIfUsersConnected(),this.getAcceptedDeclinedRequests(),this.getConnectWithUser(),this.getDisconnectUsers(),this.cancelledUsersConnecting(),this.getBlockUnblockUser(),this.getConnectionsChanges())}},{key:"getConnectionsChanges",value:function(){var t=this;this.subscriptions.push(this.usersConnectionsStore.usersMessages$.subscribe((function(n){console.log("connection changed!!!",n,t.channelUser.id)})))}},{key:"getAcceptedDeclinedRequests",value:function(){var t=this;this.subscriptions.push(this.socketService.acceptedConnection().subscribe((function(n){(n.to_user.id===t.authUser.id&&n.from_user.id===t.channelUser.id||n.to_user.id===t.channelUser.id&&n.from_user.id===t.authUser.id)&&(t.usersConnectionStatus="connected",t.isBlocked=!1)}))),this.subscriptions.push(this.socketService.declinedConnection().subscribe((function(n){console.log("declined"),t.usersConnectionStatus="idle"})))}},{key:"initChannelForm",value:function(){this.channelForm=this.fb.group({id:[""],avatar:[""],cover:[""],name:["",o.F.required],username:[""]}),this.channelForm.patchValue({name:this.channelUser.channel.name,id:this.channelUser.channel.id,username:this.channelUser.username,avatar:this.channelUser.channel.avatar,cover:this.channelUser.channel.cover})}},{key:"checkIfUsersConnected",value:function(){var t=this;this.usersService.checkIfUsersConnected({user_id:this.authUser.id,channel_user_id:this.channelUser.id}).subscribe((function(n){t.usersConnection=n,n&&(t.usersConnectionStatus=n.confirmed?"connected":"pending",t.isBlocked=!!n.is_blocked)}))}},{key:"coverChangeEvent",value:function(t){this.coverChangedEvent=t}},{key:"profileChangeEvent",value:function(t){this.profileChangedEvent=t}},{key:"detectImageChange",value:function(){(this.profileChangedEvent||this.coverChangedEvent)&&(this.loader.dataLoading=!1,this.changingImage=!1,console.log("Avatar changed"),console.log(this.changingImage))}},{key:"profileCropped",value:function(t){var n=this;this.changingImage=!0,this.profileBase64=t.base64;var e="avatar_".concat(Date.now(),".jpg"),i=new FormData;this.channelForm.patchValue({avatar:e}),i.append("avatar_file",this.base64ToFile.transform(t.base64),e),i.append("avatar",e),i.append("id",this.authUser.id),this.subscriptions.push(this.usersService.changeProfileImage(i).subscribe((function(t){n.changeAuthUserInfo(t)})))}},{key:"coverCropped",value:function(t){var n=this;this.coverBase64=t.base64,this.changingImage=!0;var e=new FormData,i="cover_".concat(Date.now(),".jpg");this.channelForm.patchValue({cover:i}),e.append("cover_file",this.base64ToFile.transform(t.base64),i),e.append("cover",i),e.append("id",this.authUser.id),this.loader.dataLoading=!0,this.subscriptions.push(this.usersService.changeCoverImage(e).subscribe((function(t){n.changeAuthUserInfo(t)})))}},{key:"removeCover",value:function(){this.channelUser.channel.cover="",this.channelForm.patchValue({cover:this.channelUser.channel.cover})}},{key:"removeAvatar",value:function(){this.channelUser.channel.avatar="",this.channelForm.patchValue({avatar:this.channelUser.channel.avatar})}},{key:"subscribeToChannel",value:function(t){var n=this;this.subscriptions.push(this.channelService.subscribeToChannel({user_id:this.authUser.id,channel_id:t.id}).subscribe((function(t){n.subscribedToChannel="Subscribed"===t.status,n.subscribersCount=t.subscribers_count,n.subscriptions.push(n.channelService.getUserChannelSubscriptions({user_id:n.authUser.id}).subscribe((function(t){n.subject.setUserSubscriptions(t)})))})))}},{key:"checkChannelSubscription",value:function(){var t=this;this.subscriptions.push(this.channelService.checkChannelSubscription({user_id:this.authUser.id,channel_id:this.channelUser.channel.id}).subscribe((function(n){t.subscribedToChannel="Subscribed"===n.status,t.subscribersCount=n.subscribers_count})))}},{key:"changeAuthUserInfo",value:function(t){localStorage.setItem("token",t.token),this.authUser=this.getAuthUser.transform(),this.channelUser=this.authUser,this.changingImage=!1;var n=t.hasOwnProperty("token")?null==t?void 0:t.token:"";n&&(localStorage.setItem("token",n),this.userStore.setAuthUser(n))}},{key:"toggleEditMode",value:function(){this.editMode=!this.editMode}},{key:"saveChanges",value:function(){var t=this;console.log("save changes!!!"),console.log(this.channelForm.value),console.log("save changes!!!"),this.channelForm.valid&&this.subscriptions.push(this.channelService.changeChannelDetails(this.channelForm.value).subscribe((function(n){t.editMode=!1,t.changeAuthUserInfo(n)})))}},{key:"toggleBottomChatBox",value:function(){var t=this,n=this.usersConnectionsStore.usersMessages.find((function(n){return n.id===t.channelUser.id}));n&&(this.usersConnectionsStore.showBottomChatBox=!0,this.groupsMessagesStore.showBottomChatBox=!1,this.usersConnectionsStore.changeUser(n))}},{key:"connectWithUser",value:function(){this.attemptedToConnect=!0,this.usersConnectionStatus="pending",this.socketService.connectWithUser({from_user:this.authUser,to_user:this.channelUser,msg:"<strong>".concat(this.authUser.first_name+" "+this.authUser.last_name,"</strong>\n                has sent a connection request to you")})}},{key:"getConnectWithUser",value:function(){var t=this;this.socketService.getConnectWithUser().subscribe((function(n){t.usersConnection=n.connection}))}},{key:"cancelUsersConnecting",value:function(t){this.socketService.cancelUsersConnecting({authUser:this.authUser,channelUser:this.channelUser,connection_id:t.id})}},{key:"cancelledUsersConnecting",value:function(){var t=this;this.socketService.cancelledUsersConnecting().subscribe((function(n){console.log(n,"cancelled"),t.usersConnectionStatus="idle"}))}},{key:"disconnectUser",value:function(){this.socketService.disconnectUsers({to_user:this.channelUser,from_user:this.authUser,connection_id:this.usersConnection.id,msg:"<strong>".concat(this.authUser.first_name," ").concat(this.authUser.last_name,"</strong> has broken the connection between you two")}),this.usersConnectionStatus="idle"}},{key:"getDisconnectUsers",value:function(){var t=this;this.subscriptions.push(this.socketService.getDisconnectUsers().subscribe((function(n){t.usersConnectionStatus="idle"})))}},{key:"getBlockUnblockUser",value:function(){var t=this;this.subscriptions.push(this.socketService.getBlockUnblockUser().subscribe((function(n){console.log("get block/unblock",n),t.isBlocked=!0})))}},{key:"isMessageBtnShown",value:function(){return/connected|test/.test(this.usersConnectionStatus)&&!this.isBlocked}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach((function(t){return t.unsubscribe()}))}}]),t}()).\u0275fac=function(t){return new(t||It)(l.Rb(z.a),l.Rb(it.a),l.Rb(H.a),l.Rb(d.a),l.Rb(N.a),l.Rb(b.a),l.Rb(Z.a),l.Rb(ct.a),l.Rb(st.a),l.Rb(at.a),l.Rb(J.a),l.Rb(o.f))},It.\u0275cmp=l.Lb({type:It,selectors:[["app-channel-profile"]],inputs:{channelUser:"channelUser",authUser:"authUser"},decls:25,vars:23,consts:[[3,"formGroup"],[1,"profile-block"],[3,"hidden",4,"ngIf"],[1,"cover-image-container"],["for","cover-image-input"],["id","cover-image",3,"src","load"],["mat-icon-button","","type","button","class","remove-cover-btn",3,"click",4,"ngIf"],[1,"sub-block"],["id","channel-name-avatar"],[1,"avatar-container"],["for","profile-image-input"],["id","profile-image",1,"avatar",3,"ngStyle","src","load"],["id","add-photo-btn",4,"ngIf"],["class","remove-avatar-btn",3,"click",4,"ngIf"],["class","channel-name","id","channel-name",4,"ngIf"],[4,"ngIf"],[1,"subscribers-count"],["class","loader",4,"ngIf"],["id","connection-status-buttons",4,"ngIf"],["class","d-flex align-items-center",4,"ngIf"],[3,"hidden"],["type","file","id","cover-image-input",3,"change"],["type","hidden","formControlName","cover"],[3,"imageChanedEvent","autoCrop","viewMode","imageCropped"],["mat-icon-button","","type","button",1,"remove-cover-btn",3,"click"],["id","add-photo-btn"],[1,"remove-avatar-btn",3,"click"],["type","file","id","profile-image-input",3,"change"],["type","hidden","formControlName","avatar"],[3,"imageChanedEvent","aspectRatio","viewMode","resizeToWidth","imageCropped"],["id","channel-name",1,"channel-name"],["matInput","","formControlName","name","id","channel-name-input",3,"keyup.enter"],[1,"loader"],[3,"diameter"],["id","connection-status-buttons"],["class","add-friend-btn",3,"click",4,"ngIf"],["class","waiting-for-confirmation-btn",3,"matMenuTriggerFor",4,"ngIf"],["pendingMenu","matMenu"],["mat-menu-item","",3,"click"],["class","users-connected-btn",3,"matMenuTriggerFor",4,"ngIf"],["menu","matMenu"],["class","toggle-chat-box-btn",3,"click",4,"ngIf"],["class","subscribe-btn",3,"click",4,"ngIf"],["class","subscribe-btn subscribed",3,"click",4,"ngIf"],[1,"add-friend-btn",3,"click"],[1,"waiting-for-confirmation-btn",3,"matMenuTriggerFor"],[1,"users-connected-btn",3,"matMenuTriggerFor"],[1,"toggle-chat-box-btn",3,"click"],[1,"subscribe-btn",3,"click"],[1,"subscribe-btn","subscribed",3,"click"],[1,"d-flex","align-items-center"],["class","btn","type","button","id","edit-channel",3,"click",4,"ngIf"],["class","btn","type","button","id","cancel-changes",3,"click",4,"ngIf"],["class","btn","type","button","id","save-channel-details",3,"click",4,"ngIf"],["type","button","id","edit-channel",1,"btn",3,"click"],["type","button","id","cancel-changes",1,"btn",3,"click"],["type","button","id","save-channel-details",1,"btn",3,"click"]],template:function(t,n){1&t&&(l.Xb(0,"form",0),l.Xb(1,"div",1),l.Oc(2,ht,4,4,"div",2),l.Xb(3,"div",3),l.Xb(4,"label",4),l.Xb(5,"img",5),l.jc("load",(function(){return n.detectImageChange()})),l.oc(6,"getImgPath"),l.Wb(),l.Wb(),l.Oc(7,gt,3,0,"button",6),l.Wb(),l.Wb(),l.Xb(8,"div",7),l.Xb(9,"div",8),l.Xb(10,"div",9),l.Xb(11,"label",10),l.Xb(12,"img",11),l.jc("load",(function(){return n.detectImageChange()})),l.oc(13,"getImgPath"),l.Wb(),l.Oc(14,dt,2,0,"mat-icon",12),l.Wb(),l.Oc(15,ft,2,0,"mat-icon",13),l.Wb(),l.Oc(16,pt,4,5,"div",2),l.Xb(17,"div"),l.Oc(18,vt,2,1,"p",14),l.Oc(19,mt,2,0,"mat-form-field",15),l.Xb(20,"p",16),l.Qc(21),l.Wb(),l.Wb(),l.Wb(),l.Oc(22,Ct,2,1,"div",17),l.Oc(23,Ut,21,6,"div",18),l.Oc(24,xt,4,3,"div",19),l.Wb(),l.Wb()),2&t&&(l.uc("formGroup",n.channelForm),l.Cb(2),l.uc("ngIf",n.channelUser.username===n.authUser.username),l.Cb(3),l.uc("src",l.qc(6,15,null==n.channelUser.channel?null:n.channelUser.channel.cover,"covers"),l.Ic),l.Cb(2),l.uc("ngIf",n.editMode&&n.channelUser.channel.cover),l.Cb(5),l.uc("ngStyle",l.yc(21,Xt,n.editMode?.5:1))("src",l.qc(13,18,n.channelUser.channel.avatar,"avatars"),l.Ic),l.Cb(2),l.uc("ngIf",n.editMode&&!n.channelUser.channel.avatar),l.Cb(1),l.uc("ngIf",n.editMode&&n.channelUser.channel.avatar),l.Cb(1),l.uc("ngIf",n.channelUser.username===n.authUser.username),l.Cb(2),l.uc("ngIf",!n.editMode),l.Cb(1),l.uc("ngIf",n.editMode),l.Cb(2),l.Sc("",n.subscribersCount+" subscriber"+(1===n.subscribersCount?"":"s")," "),l.Cb(1),l.uc("ngIf",n.changingImage),l.Cb(1),l.uc("ngIf",n.channelUser.username!==n.authUser.username),l.Cb(1),l.uc("ngIf",n.channelUser.username===n.authUser.username))},directives:[o.H,o.s,o.j,i.u,i.x,o.c,o.r,o.i,ot.a,rt.b,F.a,lt.c,ut.b,f.c,bt.e,bt.b,bt.d],pipes:[T.a],styles:[".sub-bell[_ngcontent-%COMP%]{color:#f53c6f;margin-right:16px}.subscribe-btn[_ngcontent-%COMP%], .users-connected-btn[_ngcontent-%COMP%]{margin-left:16px;margin-right:16px}.subscribe-btn[_ngcontent-%COMP%], .toggle-chat-box-btn[_ngcontent-%COMP%], .users-connected-btn[_ngcontent-%COMP%]{width:119px;height:36px;padding:15px 32px;color:#fff!important;font-size:16px;font-family:Muli-Light;display:flex;justify-content:center;align-items:center;transition:.3s ease-in-out;background:#18b587}.add-friend-btn[_ngcontent-%COMP%]{width:119px;background:#18b587;background-color:#f53c6f}.add-friend-btn[_ngcontent-%COMP%], .waiting-for-confirmation-btn[_ngcontent-%COMP%]{height:36px;color:#fff!important;font-size:16px;font-family:Muli-Light;display:flex;justify-content:center;align-items:center;transition:.3s ease-in-out;padding:0;margin-right:16px}.waiting-for-confirmation-btn[_ngcontent-%COMP%]{width:119px;background:#18b587;width:210px;background-color:#b3b3b3}.loader[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:52px;margin-left:10px;margin-top:-17px}#add-photo-btn[_ngcontent-%COMP%]{position:absolute;left:9px;top:10px;cursor:pointer}.cover-image-container[_ngcontent-%COMP%]{position:relative}.cover-image-container[_ngcontent-%COMP%]   .remove-cover-btn[_ngcontent-%COMP%]{position:absolute;right:0}.cover-image-container[_ngcontent-%COMP%]   .remove-cover-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{background-color:#000;color:#fff;border-radius:20px;font-size:16px}label[for=cover-image-input][_ngcontent-%COMP%]{width:100%}#edit-channel[_ngcontent-%COMP%], #save-channel-details[_ngcontent-%COMP%]{background:#18b587}#cancel-changes[_ngcontent-%COMP%], #edit-channel[_ngcontent-%COMP%], #save-channel-details[_ngcontent-%COMP%]{border-radius:0;color:#fff;padding:8px 24px;display:flex;align-items:center}#cancel-changes[_ngcontent-%COMP%]{background:#c9c9c9;margin-right:20px}.avatar-container[_ngcontent-%COMP%]{position:relative}.avatar-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:0}.avatar-container[_ngcontent-%COMP%]   .remove-avatar-btn[_ngcontent-%COMP%]{width:13px;height:13px;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);color:#000;font-size:16px;cursor:pointer}.subscribed[_ngcontent-%COMP%]{background-color:#b3b3b3!important}#channel-name-avatar[_ngcontent-%COMP%], #connection-status-buttons[_ngcontent-%COMP%]{display:flex;align-items:center}"]}),It),Tt=e("IK1q"),Rt=e("IG0y"),jt=e("MFHO");function Qt(t,n){1&t&&(l.Xb(0,"h2"),l.Qc(1,"Description"),l.Wb())}function Lt(t,n){if(1&t){var e=l.Yb();l.Xb(0,"button",10),l.jc("click",(function(){return l.Gc(e),l.nc().editModeOn()})),l.Qc(1,"Edit "),l.Wb()}}function Gt(t,n){1&t&&(l.Xb(0,"mat-error"),l.Qc(1," Not more than 100 characters please "),l.Wb())}var Bt,Vt=((Bt=function(){function t(n,e,i,c){_classCallCheck(this,t),this.fb=n,this.channelService=e,this.getAuthUser=i,this.fixLineBreaks=c,this.editMode=!1,this.authUser=this.getAuthUser.transform()}return _createClass(t,[{key:"ngOnInit",value:function(){this.aboutForm=this.fb.group({description:["",[o.F.required,o.F.maxLength(a.g)]],id:["",o.F.required],username:["",o.F.required]}),this.aboutForm.patchValue({username:this.channelUser.username,id:this.channelUser.channel.id,description:this.fixLineBreaks.transform(this.channelUser.channel.description)})}},{key:"editModeOn",value:function(){this.editMode=!0}},{key:"saveChannelDescription",value:function(){var t=this;this.aboutForm.valid&&this.channelService.saveDescription(this.aboutForm.value).subscribe((function(n){t.channelUser=n,document.querySelector(".description").innerHTML=t.channelUser.channel.description,t.editMode=!1}))}},{key:"ngAfterViewInit",value:function(){document.querySelector(".description").innerHTML=this.channelUser.channel.description}}]),t}()).\u0275fac=function(t){return new(t||Bt)(l.Rb(o.f),l.Rb(N.a),l.Rb(d.a),l.Rb(jt.a))},Bt.\u0275cmp=l.Lb({type:Bt,selectors:[["app-about-tab"]],inputs:{channelUser:"channelUser"},decls:17,vars:11,consts:[[1,"about-tab"],[1,"info"],[4,"ngIf"],[1,"date"],["class","btn",3,"click",4,"ngIf"],[1,"description",3,"hidden"],[1,"edit-form-controls",3,"hidden"],["id","channel-about-form",3,"formGroup"],["rows","15","formControlName","description"],[1,"save",3,"click"],[1,"btn",3,"click"]],template:function(t,n){1&t&&(l.Xb(0,"div",0),l.Xb(1,"div",1),l.Oc(2,Qt,2,0,"h2",2),l.Xb(3,"div",3),l.Xb(4,"span"),l.Qc(5),l.oc(6,"date"),l.Wb(),l.Oc(7,Lt,2,0,"button",4),l.Wb(),l.Wb(),l.Xb(8,"div",5),l.Xb(9,"p"),l.Qc(10),l.Wb(),l.Wb(),l.Xb(11,"div",6),l.Xb(12,"form",7),l.Sb(13,"textarea",8),l.Xb(14,"button",9),l.jc("click",(function(){return n.saveChannelDescription()})),l.Qc(15,"Save"),l.Wb(),l.Oc(16,Gt,2,0,"mat-error",2),l.Wb(),l.Wb(),l.Wb()),2&t&&(l.Cb(2),l.uc("ngIf",null==n.channelUser.channel?null:n.channelUser.channel.description),l.Cb(3),l.Sc("Joined ",l.qc(6,8,n.channelUser.channel.created_at,"d MMM, yyyy"),""),l.Cb(2),l.uc("ngIf",!n.editMode&&n.authUser.username===n.channelUser.username),l.Cb(1),l.uc("hidden",n.editMode),l.Cb(2),l.Rc(n.channelUser.channel.description),l.Cb(1),l.uc("hidden",!n.editMode),l.Cb(1),l.uc("formGroup",n.aboutForm),l.Cb(4),l.uc("ngIf",n.aboutForm.get("description").hasError("maxlength")))},directives:[i.u,o.H,o.s,o.j,o.c,o.r,o.i,lt.b],pipes:[i.f],styles:[".about-tab[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.about-tab[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:16px;color:#18b587;font-family:Muli-Bold}.about-tab[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{margin-top:0;display:flex;align-items:center}.about-tab[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px;color:#545454;font-family:Muli-Bold}@media screen and (max-width:400px){.about-tab[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:center}}.about-tab[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-left:24px;background:#18b587;color:#fff;padding:4px 18px;border-radius:0}.about-tab[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{margin-top:24px;padding:24px;background:#f4f4f4;color:#545454;font-size:16px}.about-tab[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%}.about-tab[_ngcontent-%COMP%]   .save[_ngcontent-%COMP%]{margin-top:24px;background:#c9c9c9;color:#545454;padding:4px 18px;border-radius:0}.about-tab[_ngcontent-%COMP%]   .save.active[_ngcontent-%COMP%]{background:#18b587;color:#fff}"]}),Bt);function At(t,n){1&t&&l.Sb(0,"mat-spinner",4),2&t&&l.uc("diameter",15)}function Et(t,n){if(1&t){var e=l.Yb();l.Xb(0,"app-user-tags",17),l.jc("tagSelected",(function(t){return l.Gc(e),l.nc(2).getVideosByTag(t)})),l.Wb()}}function Yt(t,n){if(1&t&&l.Sb(0,"app-channel-profile",18),2&t){var e=l.nc(2);l.uc("channelUser",e.channelUser)("authUser",e.authUser)}}function Dt(t,n){if(1&t){var e=l.Yb();l.Xb(0,"li",19),l.Xb(1,"a",20),l.jc("click",(function(){l.Gc(e);var t=n.$implicit;return l.nc(2).changeActiveTab(t)})),l.Qc(2),l.Wb(),l.Wb()}if(2&t){var i=n.$implicit,c=l.nc(2);l.Cb(1),l.Hb("active",i===c.activeTab),l.wc("id","",i.link,"-tab"),l.uc("href","#"+i.link,l.Ic),l.Cb(1),l.Rc(i.name)}}function qt(t,n){1&t&&l.Sb(0,"mat-spinner",4),2&t&&l.uc("diameter",15)}function zt(t,n){if(1&t){var e=l.Yb();l.Xb(0,"button",25),l.jc("click",(function(){return l.Gc(e),l.nc(3).toggleFilters()})),l.Xb(1,"mat-icon"),l.Qc(2,"tune"),l.Wb(),l.Wb()}if(2&t){var i=l.nc(3);l.Hb("filters-active",i.showFilters)}}function Ht(t,n){if(1&t){var e=l.Yb();l.Xb(0,"app-search-videos-form",26),l.jc("search",(function(t){return l.Gc(e),l.nc(3).searchVideos(t)})),l.Wb()}}function Nt(t,n){if(1&t&&(l.Xb(0,"div",21),l.Xb(1,"div",22),l.Oc(2,zt,3,2,"button",23),l.Wb(),l.Oc(3,Ht,1,0,"app-search-videos-form",24),l.Wb()),2&t){var e=l.nc(2);l.Cb(2),l.uc("ngIf","About"!==e.activeTab.name&&"Watchlist"!==e.activeTab.name),l.Cb(1),l.uc("ngIf","About"!==e.activeTab.name&&"Watchlist"!==e.activeTab.name)}}function $t(t,n){if(1&t){var e=l.Yb();l.Xb(0,"div",30),l.jc("click",(function(){return l.Gc(e),l.nc(3).openModal()})),l.Xb(1,"button",31),l.Xb(2,"mat-icon"),l.Qc(3,"add_circle_outline"),l.Wb(),l.Wb(),l.Wb()}}function Jt(t,n){if(1&t){var e=l.Yb();l.Xb(0,"app-search-stocks-form",34),l.jc("search",(function(t){return l.Gc(e),l.nc(4).searchInUserStocks(t)})),l.Wb()}2&t&&l.uc("whiteForm",!0)("returnSearchText",!0)}function Kt(t,n){if(1&t&&(l.Xb(0,"div",32),l.Oc(1,Jt,1,2,"app-search-stocks-form",33),l.Wb()),2&t){var e=l.nc(3);l.Hb("bordered",(null==e.userStocks?null:e.userStocks.length)>0),l.Cb(1),l.uc("ngIf","Watchlist"===e.activeTab.name&&(null==e.userStocks?null:e.userStocks.length)>0)}}function Zt(t,n){if(1&t&&(l.Xb(0,"div",27),l.Oc(1,$t,4,0,"div",28),l.Oc(2,Kt,2,3,"div",29),l.Wb()),2&t){var e=l.nc(2);l.Cb(1),l.uc("ngIf","Watchlist"===e.activeTab.name),l.Cb(1),l.uc("ngIf","About"!==e.activeTab.name)}}function tn(t,n){if(1&t&&l.Sb(0,"app-watchlist-tab",35),2&t){var e=l.nc(2);l.uc("channelUser",e.channelUser)}}function nn(t,n){if(1&t&&l.Sb(0,"app-videos-tab",18),2&t){var e=l.nc(2);l.uc("channelUser",e.channelUser)("authUser",e.authUser)}}function en(t,n){if(1&t&&l.Sb(0,"app-playlists-tab",18),2&t){var e=l.nc(2);l.uc("channelUser",e.channelUser)("authUser",e.authUser)}}function cn(t,n){if(1&t&&l.Sb(0,"app-about-tab",35),2&t){var e=l.nc(2);l.uc("channelUser",e.channelUser)}}function sn(t,n){if(1&t&&(l.Vb(0),l.Oc(1,Et,1,0,"app-user-tags",5),l.Oc(2,Yt,1,2,"app-channel-profile",6),l.Xb(3,"div",7),l.Xb(4,"div",8),l.Xb(5,"ul",9),l.Oc(6,Dt,3,5,"li",10),l.Wb(),l.Xb(7,"div",11),l.Xb(8,"div",12),l.Oc(9,qt,1,1,"mat-spinner",0),l.Wb(),l.Wb(),l.Xb(10,"div",13),l.Oc(11,Nt,4,2,"div",14),l.Oc(12,Zt,3,2,"div",15),l.Wb(),l.Wb(),l.Oc(13,tn,1,1,"app-watchlist-tab",16),l.Oc(14,nn,1,2,"app-videos-tab",6),l.Oc(15,en,1,2,"app-playlists-tab",6),l.Oc(16,cn,1,1,"app-about-tab",16),l.Wb(),l.Ub()),2&t){var e=l.nc();l.Cb(1),l.uc("ngIf",e.auth.loggedIn()),l.Cb(1),l.uc("ngIf",e.channelUser),l.Cb(4),l.uc("ngForOf",e.allTabs)("ngForTrackBy",e.trackByElement),l.Cb(3),l.uc("ngIf","loading"===e.loader.stocksLoading.status&&"watchlist"===e.activeTab.name),l.Cb(2),l.uc("ngIf","Videos"===e.activeTab.name),l.Cb(1),l.uc("ngIf","Watchlist"===e.activeTab.name),l.Cb(1),l.uc("ngIf","Watchlist"===e.activeTab.name),l.Cb(1),l.uc("ngIf","Videos"===e.activeTab.name),l.Cb(1),l.uc("ngIf","Playlists"===e.activeTab.name),l.Cb(1),l.uc("ngIf","About"===e.activeTab.name)}}function an(t,n){1&t&&(l.Xb(0,"div",36),l.Xb(1,"p"),l.Qc(2,"Channel with such name is not found"),l.Wb(),l.Wb())}var on,rn,ln,un=[{path:"show",component:(on=function(){function t(n,e,i,c,s,r,l,u,b,h,g,d,f,p,v,m,C,k,O){_classCallCheck(this,t),this.videoService=n,this.getAuthUser=e,this.router=i,this.usersService=c,this.base64ToFile=s,this.route=r,this.fb=l,this.subjectService=u,this.channelService=b,this.playlistsService=h,this.subject=g,this.auth=d,this.dialog=f,this.loader=p,this.updateStocks=v,this.stocksService=m,this.usersMessagesStore=C,this.toastr=k,this.chatService=O,this.allTabs=a.o,this.apiUrl=a.c,this.playlists=[],this.editMode=!1,this.showFilters=!1,this.filters=null,this.dataLoading="idle",this.userStocks=[],this.filteredStocks=[],this.subscriptions=[],this.trackByElement=x.a,this.showChatBox=!1,this.authUser=this.getAuthUser.transform(),this.passedUsername=this.route.snapshot.queryParams.username,this.passedTab=this.route.snapshot.queryParams.tab,this.searchVideosForm=this.fb.group({search:["",o.F.required]})}return _createClass(t,[{key:"ngOnInit",value:function(){var t,n=this;this.activeTab=(null===(t=a.o.filter((function(t){return t.name.toLowerCase()===n.passedTab})))||void 0===t?void 0:t[0])||a.o[0],this.getUserInfo(),this.subject.currentUserStocks.subscribe((function(t){n.userStocks=t.stocks,n.filteredStocks=n.userStocks}))}},{key:"toggleFilters",value:function(){this.showFilters=!this.showFilters,this.subject.setToggleFiltersData(this.showFilters)}},{key:"getUserInfo",value:function(){var t=this;this.loader.channelLoading.status="loading",this.passedUsername&&this.usersService.getUserInfo({username:this.passedUsername,own_channel:+(this.authUser.username===this.passedUsername)}).subscribe((function(n){n&&(t.channelUser=n),t.loader.channelLoading.status="finished"}))}},{key:"changeActiveTab",value:function(t){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.activeTab=t,this.showFilters=!1,n.next=4,this.router.navigate(["/channels/show"],{queryParams:{tab:t.name.toLowerCase(),username:this.passedUsername}});case 4:this.subject.setToggleFiltersData(this.showFilters),"Videos"===this.activeTab.name&&this.getUserInfo();case 6:case"end":return n.stop()}}),n,this)})))}},{key:"searchInUserStocks",value:function(t){localStorage.setItem("searchStock",t.search),this.watchListTab.getSearchResults(t)}},{key:"searchVideos",value:function(t){localStorage.setItem("search",t.search),this.showFilters=!1,this.subject.setToggleFiltersData(this.showFilters),"Videos"===this.activeTab.name?this.searchInUserVideos(t.search):"Playlists"===this.activeTab.name&&this.searchInPlaylists(t.search)}},{key:"searchInVideosByAuthor",value:function(t){}},{key:"searchInUserVideos",value:function(t){this.videosTab&&this.videosTab.getSearchResults(t)}},{key:"searchInPlaylists",value:function(t){this.playlistsTab&&this.playlistsTab.getSearchResults(t)}},{key:"getVideosByTag",value:function(t){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.router.navigate(["videos"],{queryParams:{tag:t}});case 2:case"end":return n.stop()}}),n,this)})))}},{key:"openModal",value:function(){this.dialog.open(q.a,{maxWidth:"100vw",maxHeight:"100vh",height:"100%",width:"100%",panelClass:"stocks-lists-modal"}).afterClosed().subscribe((function(t){}))}},{key:"isStockFollowed",value:function(t){return!!this.userStocks.find((function(n){return n.name===t.name}))}},{key:"updateFollowedStocksList",value:function(t){var n=this,e=this.updateStocks.transform(this.userStocks,t,this.isStockFollowed(t));e&&(this.loader.stocksLoading.status="loading",this.subscriptions.push(this.stocksService.updateFollowedStocks(Object.assign({user_id:this.authUser.id},{stocks:e})).subscribe((function(t){n.userStocks=(null==t?void 0:t.user_stocks)||[],n.loader.stocksLoading.status="finished",n.subject.changeUserStocks({stocks:n.userStocks,empty:0===n.userStocks.length})}))))}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach((function(t){return t.unsubscribe()}))}}]),t}(),on.\u0275fac=function(t){return new(t||on)(l.Rb(u.a),l.Rb(d.a),l.Rb(c.d),l.Rb(z.a),l.Rb(H.a),l.Rb(c.a),l.Rb(o.f),l.Rb(b.a),l.Rb(N.a),l.Rb(I.a),l.Rb(b.a),l.Rb($.a),l.Rb(X.b),l.Rb(J.a),l.Rb(K.a),l.Rb(g.a),l.Rb(Z.a),l.Rb(tt.c),l.Rb(nt.a))},on.\u0275cmp=l.Lb({type:on,selectors:[["app-show-channel"]],viewQuery:function(t,n){var e;1&t&&(l.Vc(M,!0),l.Vc(S,!0),l.Vc(D,!0)),2&t&&(l.Bc(e=l.kc())&&(n.watchListTab=e.first),l.Bc(e=l.kc())&&(n.videosTab=e.first),l.Bc(e=l.kc())&&(n.playlistsTab=e.first))},decls:4,vars:3,consts:[[3,"diameter",4,"ngIf"],[1,"profile-list"],[4,"ngIf"],["class","channel-not-found",4,"ngIf"],[3,"diameter"],[3,"tagSelected",4,"ngIf"],[3,"channelUser","authUser",4,"ngIf"],[1,"stocks-watchlist","pWatchlist"],[1,"profile-list","user-profile-block"],["id","channel-tabs-list","role","tablist",1,"nav","nav-tabs"],["class","nav-item",4,"ngFor","ngForOf","ngForTrackBy"],[1,"loader-wrapper"],[1,"spinner-container"],[1,"search-wrapper"],["class","left-side",4,"ngIf"],["class","right-side",4,"ngIf"],[3,"channelUser",4,"ngIf"],[3,"tagSelected"],[3,"channelUser","authUser"],[1,"nav-item"],["data-toggle","tab","role","tab","aria-controls","pWatch","aria-selected","true",1,"nav-link",3,"id","href","click"],[1,"left-side"],[1,"toggle-filters-btn"],["class","filter-toggle-btn","type","button",3,"filters-active","click",4,"ngIf"],["class","child-inp",3,"search",4,"ngIf"],["type","button",1,"filter-toggle-btn",3,"click"],[1,"child-inp",3,"search"],[1,"right-side"],["class","open-add-stock-modal",3,"click",4,"ngIf"],["class","watchlist-search d-",3,"bordered",4,"ngIf"],[1,"open-add-stock-modal",3,"click"],["type","button"],[1,"watchlist-search","d-"],["class","d-block search-stocks-component",3,"whiteForm","returnSearchText","search",4,"ngIf"],[1,"d-block","search-stocks-component",3,"whiteForm","returnSearchText","search"],[3,"channelUser"],[1,"channel-not-found"]],template:function(t,n){1&t&&(l.Oc(0,At,1,1,"mat-spinner",0),l.Xb(1,"div",1),l.Oc(2,sn,17,11,"ng-container",2),l.Oc(3,an,3,0,"div",3),l.Wb()),2&t&&(l.uc("ngIf","loading"===n.loader.channelLoading.status),l.Cb(2),l.uc("ngIf",n.channelUser),l.Cb(1),l.uc("ngIf",!n.channelUser&&"finished"===n.loader.channelLoading.status))},directives:[i.u,f.c,i.t,et.a,Ft,F.a,Tt.a,Rt.a,M,S,D,Vt],styles:[".profile-block[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .search-stocks-component[_ngcontent-%COMP%]{width:100%}.child-inp-auto[_ngcontent-%COMP%]{background:#0d1b3e}.search-wrapper[_ngcontent-%COMP%]{width:50%}.search-wrapper[_ngcontent-%COMP%]   .toggle-filters-btn[_ngcontent-%COMP%]{display:flex;padding-top:4px;height:31px}.search-wrapper[_ngcontent-%COMP%]   .toggle-filters-btn[_ngcontent-%COMP%]   .filter-toggle-btn[_ngcontent-%COMP%]{background-color:unset;height:23px}.search-wrapper[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%], .search-wrapper[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]{display:grid;width:100%;grid-template-columns:-webkit-max-content minmax(auto,300px);grid-template-columns:max-content minmax(auto,300px);grid-gap:20px;margin-bottom:20px}#search-videos-form[_ngcontent-%COMP%]{display:flex}#search-videos-form[_ngcontent-%COMP%]   .filters-active[_ngcontent-%COMP%]{background-color:#18b587!important;color:#fff}.open-add-stock-modal[_ngcontent-%COMP%]{display:flex;align-items:center;height:31px}@media only screen and (max-width:374px){.open-add-stock-modal[_ngcontent-%COMP%]{margin-right:5px!important}}.open-add-stock-modal[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:unset;height:23px}#channel-tabs-list[_ngcontent-%COMP%]{width:100%}@media (max-width:991px){#channel-tabs-list[_ngcontent-%COMP%]{max-width:624px;width:100%}}"]}),on),data:{title:"Channel page"}}],bn=((rn=function t(){_classCallCheck(this,t)}).\u0275mod=l.Pb({type:rn}),rn.\u0275inj=l.Ob({factory:function(t){return new(t||rn)},imports:[[c.f.forChild(un)],c.f]}),rn),hn=e("PCNd"),gn=((ln=function t(){_classCallCheck(this,t)}).\u0275mod=l.Pb({type:ln}),ln.\u0275inj=l.Ob({factory:function(t){return new(t||ln)},imports:[[i.c,bn,hn.a,ot.b]]}),ln)}}]);
//# sourceMappingURL=channels-channels-module-es5.541cc19fcd28e50e59cb.js.map