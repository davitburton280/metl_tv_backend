function _createForOfIteratorHelper(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,r=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw r}}}}function _toArray(e){return _arrayWithHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableRest()}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],i=!0,o=!1,r=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(c){o=!0,r=c}finally{try{i||null==a.return||a.return()}finally{if(o)throw r}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _get(e,t,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=_superPropBase(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,i=_getPrototypeOf(e);if(t){var o=_getPrototypeOf(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"+27z":function(e,t){function n(e,t,n){var i={audio:!1,video:{mandatory:{chromeMediaSource:e?"screen":"desktop",maxWidth:window.screen.width>1920?window.screen.width:1920,maxHeight:window.screen.height>1080?window.screen.height:1080},optional:[]}};return n&&(i.audio={mandatory:{chromeMediaSource:e?"screen":"desktop"},optional:[]}),t&&(i.video.mandatory.chromeMediaSourceId=t,i.audio&&i.audio.mandatory&&(i.audio.mandatory.chromeMediaSourceId=t)),i}function i(e){o?o.isLoaded?o.contentWindow.postMessage(e?e.forEach?{captureCustomSourceId:e}:{captureSourceIdWithAudio:!0}:{captureSourceId:!0},"*"):setTimeout((function(){i(e)}),100):r((function(){i(e)}))}var o;function r(e){o?e():((o=document.createElement("iframe")).onload=function(){o.isLoaded=!0,e()},o.src="https://openvidu.github.io/openvidu-screen-sharing-chrome-extension/",o.style.display="none",(document.body||document.documentElement).appendChild(o))}function s(){o?o.isLoaded?o.contentWindow.postMessage({getChromeExtensionStatus:!0},"*"):setTimeout(s,100):r(s)}window.getScreenId=function(e,t,o){-1===navigator.userAgent.indexOf("Edge")||!navigator.msSaveOrOpenBlob&&!navigator.msSaveBlob?navigator.mozGetUserMedia?t(null,"firefox",{video:{mozMediaSource:e,mediaSource:e}}):(window.addEventListener("message",(function e(i){i.data&&(i.data.chromeMediaSourceId&&("PermissionDeniedError"===i.data.chromeMediaSourceId?t("permission-denied"):t(null,i.data.chromeMediaSourceId,n(null,i.data.chromeMediaSourceId,i.data.canRequestAudioTrack)),window.removeEventListener("message",e)),i.data.chromeExtensionStatus&&(t(i.data.chromeExtensionStatus,null,n(i.data.chromeExtensionStatus)),window.removeEventListener("message",e)))})),o?setTimeout((function(){i(o)}),100):setTimeout(i,100)):t({video:!0})},window.getScreenConstraints=function(e){r((function(){getScreenId((function(t,n,i){i||(i={video:!0}),e(t,i.video)}))}))},window.getChromeExtensionStatus=function(e){navigator.mozGetUserMedia?e("installed-enabled"):(window.addEventListener("message",(function t(n){n.data&&n.data.chromeExtensionStatus&&(e(n.data.chromeExtensionStatus),window.removeEventListener("message",t))})),setTimeout(s,100))},t.getScreenId=getScreenId},"+FKC":function(e,t,n){"use strict";t.__esModule=!0;var i=n("bDgZ"),o=n("9m68").OpenViduLogger.getInstance(),r=function(){function e(e){this.stream=e,this.webRtcStatsEnabled=!1,this.statsInterval=1,this.stats={inbound:{audio:{bytesReceived:0,packetsReceived:0,packetsLost:0},video:{bytesReceived:0,packetsReceived:0,packetsLost:0,framesDecoded:0,nackCount:0}},outbound:{audio:{bytesSent:0,packetsSent:0},video:{bytesSent:0,packetsSent:0,framesEncoded:0,nackCount:0}}}}return e.prototype.isEnabled=function(){return this.webRtcStatsEnabled},e.prototype.initWebRtcStats=function(){var e=this,t=localStorage.getItem("elastest-instrumentation");if(t){o.warn("WebRtc stats enabled for stream "+this.stream.streamId+" of connection "+this.stream.connection.connectionId),this.webRtcStatsEnabled=!0;var n=JSON.parse(t);return this.statsInterval=n.webrtc.interval,o.warn("localStorage item: "+JSON.stringify(n)),void(this.webRtcStatsIntervalId=setInterval((function(){e.sendStatsToHttpEndpoint(n)}),1e3*this.statsInterval))}o.debug("WebRtc stats not enabled")},e.prototype.stopWebRtcStats=function(){this.webRtcStatsEnabled&&(clearInterval(this.webRtcStatsIntervalId),o.warn("WebRtc stats stopped for disposed stream "+this.stream.streamId+" of connection "+this.stream.connection.connectionId))},e.prototype.getSelectedIceCandidateInfo=function(){var e=this;return new Promise((function(t,n){e.getStatsAgnostic(e.stream.getRTCPeerConnection(),(function(o){if(-1!==i.name.indexOf("Chrome")||-1!==i.name.indexOf("Opera")){var r=void 0,s=void 0,a=void 0,c={},l={};for(var u in o){var d=o[u];"localcandidate"===d.type?c[d.id]=d:"remotecandidate"===d.type?l[d.id]=d:"googCandidatePair"===d.type&&"true"===d.googActiveConnection&&(a=d,r=d.localCandidateId,s=d.remoteCandidateId)}var p=c[r];if(p){var h=e.stream.getLocalIceCandidateList().filter((function(e){return!!e.candidate&&e.candidate.indexOf(p.ipAddress)>=0&&e.candidate.indexOf(p.portNumber)>=0&&e.candidate.indexOf(p.priority)>=0}));p.raw=h[0]?h[0].candidate:"ERROR: Cannot find local candidate in list of sent ICE candidates"}else p="ERROR: No active local ICE candidate. Probably ICE-TCP is being used";var f=l[s];f?(h=e.stream.getRemoteIceCandidateList().filter((function(e){return!!e.candidate&&e.candidate.indexOf(f.ipAddress)>=0&&e.candidate.indexOf(f.portNumber)>=0&&e.candidate.indexOf(f.priority)>=0})),f.raw=h[0]?h[0].candidate:"ERROR: Cannot find remote candidate in list of received ICE candidates"):f="ERROR: No active remote ICE candidate. Probably ICE-TCP is being used",t({googCandidatePair:a,localCandidate:p,remoteCandidate:f})}else n("Selected ICE candidate info only available for Chrome")}),(function(e){n(e)}))}))},e.prototype.sendStatsToHttpEndpoint=function(e){var t=this,n=function(n){var i=new XMLHttpRequest,r=e.webrtc.httpEndpoint;i.open("POST",r,!0),i.setRequestHeader("Content-type","application/json"),i.onreadystatechange=function(){4===i.readyState&&200===i.status&&o.log("WebRtc stats successfully sent to "+r+" for stream "+t.stream.streamId+" of connection "+t.stream.connection.connectionId)},i.send(n)};this.getStatsAgnostic(this.stream.getRTCPeerConnection(),(function(o){if(-1!==i.name.indexOf("Firefox"))o.forEach((function(i){var o={};if("inbound-rtp"===i.type&&null!==i.nackCount&&!1===i.isRemote&&i.id.startsWith("inbound")&&i.remoteId.startsWith("inbound")){var r="webrtc_inbound_"+i.mediaType+"_"+i.ssrc,s={bytesReceived:(i.bytesReceived-t.stats.inbound[i.mediaType].bytesReceived)/t.statsInterval,jitter:1e3*i.jitter,packetsReceived:(i.packetsReceived-t.stats.inbound[i.mediaType].packetsReceived)/t.statsInterval,packetsLost:(i.packetsLost-t.stats.inbound[i.mediaType].packetsLost)/t.statsInterval},a={bytesReceived:"bytes",jitter:"ms",packetsReceived:"packets",packetsLost:"packets"};"video"===i.mediaType&&(s.framesDecoded=(i.framesDecoded-t.stats.inbound.video.framesDecoded)/t.statsInterval,s.nackCount=(i.nackCount-t.stats.inbound.video.nackCount)/t.statsInterval,a.framesDecoded="frames",a.nackCount="packets",t.stats.inbound.video.framesDecoded=i.framesDecoded,t.stats.inbound.video.nackCount=i.nackCount),t.stats.inbound[i.mediaType].bytesReceived=i.bytesReceived,t.stats.inbound[i.mediaType].packetsReceived=i.packetsReceived,t.stats.inbound[i.mediaType].packetsLost=i.packetsLost,(o={"@timestamp":new Date(i.timestamp).toISOString(),exec:e.exec,component:e.component,stream:"webRtc",et_type:r,stream_type:"composed_metrics",units:a})[r]=s,n(JSON.stringify(o))}else"outbound-rtp"===i.type&&!1===i.isRemote&&i.id.toLowerCase().includes("outbound")&&(r="webrtc_outbound_"+i.mediaType+"_"+i.ssrc,s={bytesSent:(i.bytesSent-t.stats.outbound[i.mediaType].bytesSent)/t.statsInterval,packetsSent:(i.packetsSent-t.stats.outbound[i.mediaType].packetsSent)/t.statsInterval},a={bytesSent:"bytes",packetsSent:"packets"},"video"===i.mediaType&&(s.framesEncoded=(i.framesEncoded-t.stats.outbound.video.framesEncoded)/t.statsInterval,a.framesEncoded="frames",t.stats.outbound.video.framesEncoded=i.framesEncoded),t.stats.outbound[i.mediaType].bytesSent=i.bytesSent,t.stats.outbound[i.mediaType].packetsSent=i.packetsSent,(o={"@timestamp":new Date(i.timestamp).toISOString(),exec:e.exec,component:e.component,stream:"webRtc",et_type:r,stream_type:"composed_metrics",units:a})[r]=s,n(JSON.stringify(o)))}));else if(-1!==i.name.indexOf("Chrome")||-1!==i.name.indexOf("Opera"))for(var r=0,s=Object.keys(o);r<s.length;r++){var a=o[s[r]];if("ssrc"===a.type){var c={};if("bytesReceived"in a&&("audio"===a.mediaType&&"audioOutputLevel"in a||"video"===a.mediaType&&"qpSum"in a)){var l="webrtc_inbound_"+a.mediaType+"_"+a.ssrc,u={bytesReceived:(a.bytesReceived-t.stats.inbound[a.mediaType].bytesReceived)/t.statsInterval,jitter:a.googJitterBufferMs,packetsReceived:(a.packetsReceived-t.stats.inbound[a.mediaType].packetsReceived)/t.statsInterval,packetsLost:(a.packetsLost-t.stats.inbound[a.mediaType].packetsLost)/t.statsInterval},d={bytesReceived:"bytes",jitter:"ms",packetsReceived:"packets",packetsLost:"packets"};"video"===a.mediaType&&(u.framesDecoded=(a.framesDecoded-t.stats.inbound.video.framesDecoded)/t.statsInterval,u.nackCount=(a.googNacksSent-t.stats.inbound.video.nackCount)/t.statsInterval,d.framesDecoded="frames",d.nackCount="packets",t.stats.inbound.video.framesDecoded=a.framesDecoded,t.stats.inbound.video.nackCount=a.googNacksSent),t.stats.inbound[a.mediaType].bytesReceived=a.bytesReceived,t.stats.inbound[a.mediaType].packetsReceived=a.packetsReceived,t.stats.inbound[a.mediaType].packetsLost=a.packetsLost,(c={"@timestamp":new Date(a.timestamp).toISOString(),exec:e.exec,component:e.component,stream:"webRtc",et_type:l,stream_type:"composed_metrics",units:d})[l]=u,n(JSON.stringify(c))}else"bytesSent"in a&&(l="webrtc_outbound_"+a.mediaType+"_"+a.ssrc,u={bytesSent:(a.bytesSent-t.stats.outbound[a.mediaType].bytesSent)/t.statsInterval,packetsSent:(a.packetsSent-t.stats.outbound[a.mediaType].packetsSent)/t.statsInterval},d={bytesSent:"bytes",packetsSent:"packets"},"video"===a.mediaType&&(u.framesEncoded=(a.framesEncoded-t.stats.outbound.video.framesEncoded)/t.statsInterval,d.framesEncoded="frames",t.stats.outbound.video.framesEncoded=a.framesEncoded),t.stats.outbound[a.mediaType].bytesSent=a.bytesSent,t.stats.outbound[a.mediaType].packetsSent=a.packetsSent,(c={"@timestamp":new Date(a.timestamp).toISOString(),exec:e.exec,component:e.component,stream:"webRtc",et_type:l,stream_type:"composed_metrics",units:d})[l]=u,n(JSON.stringify(c)))}}}),(function(e){o.log(e)}))},e.prototype.standardizeReport=function(e){o.log(e);var t={};return-1!==i.name.indexOf("Firefox")?(Object.keys(e).forEach((function(t){o.log(e[t])})),e):(e.result().forEach((function(e){var n={id:e.id,timestamp:e.timestamp,type:e.type};e.names().forEach((function(t){n[t]=e.stat(t)})),t[n.id]=n})),t)},e.prototype.getStatsAgnostic=function(e,t,n){var o=this;return-1!==i.name.indexOf("Firefox")?e.getStats(null).then((function(e){var n=o.standardizeReport(e);t(n)})).catch(n):-1!==i.name.indexOf("Chrome")||-1!==i.name.indexOf("Opera")?e.getStats((function(e){var n=o.standardizeReport(e);t(n)}),null,n):void 0},e}();t.WebRtcStats=r},"+ig+":function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0;var r=function(e){function t(t,n,i){var o=e.call(this,!1,t,n)||this;return o.data=i,o}return o(t,e),t.prototype.callDefaultBehavior=function(){},t}(n("hzOQ").Event);t.FilterEvent=r},"+xpX":function(e,t,n){"use strict";n.d(t,"OpenviduSessionComponent",(function(){return _t})),n.d(t,"OpenviduSessionModule",(function(){return Ut}));var i=n("mrSG"),o=n("fXoL"),r=n("2Vo4"),s=n("z6cu"),a=n("PZzU"),c=n("dNgK"),l=n("bTqV"),u=n("NFeN"),d=n("Qu3c"),p=n("ofXK"),h=n("3Pt+"),f=n("znSr"),g=n("0IaG"),m=n("tk/3"),v=n("tyNb"),b=n("XhcP"),_=n("TIDz"),y=n("kmnG"),C=n("qFsG"),O=n("/t3+"),S=n("XiUz"),k=n("TU8p"),x=n("Xa2L"),M=n("d3UM"),w=n("FKr1"),E=n("JIr8"),P=n("Wp6s"),I=n("zkoq"),R=n("5RNC"),T=n("YUcS"),A=["chatScroll"],D=["chatInput"];function L(e,t){if(1&e&&(o.Wb(0,"div",13),o.Rb(1,"img",14),o.Wb(2,"div",15),o.Wb(3,"div",16),o.Wb(4,"p"),o.Kc(5),o.Vb(),o.Vb(),o.Wb(6,"div",17),o.Rb(7,"span",18),o.Rb(8,"p",19),o.jc(9,"linkify"),o.Vb(),o.Vb(),o.Vb()),2&e){var n=t.$implicit;o.pc("ngClass",n.isLocal?"right":"left"),o.Cb(1),o.pc("src",n.userAvatar,o.Dc),o.Cb(4),o.Lc(n.nickname),o.Cb(3),o.pc("innerHTML",o.kc(9,4,n.message),o.Cc)}}var j=["chatComponent"],N=["sidenav"];function V(e,t){if(1&e){var n=o.Xb();o.Wb(0,"app-room-config",4),o.ec("join",(function(){return o.Bc(n),o.ic(2).onConfigRoomJoin()}))("leaveSession",(function(){return o.Bc(n),o.ic(2).leaveSession()}))("publisherCreated",(function(e){return o.Bc(n),o.ic(2).emitPublisher(e)})),o.Vb()}if(2&e){var i=o.ic(2);o.pc("ovSettings",i.ovSettings)("externalConfig",i.externalConfig)}}function U(e,t){1&e&&o.Rb(0,"div",14)}function B(e,t){if(1&e&&(o.Wb(0,"mat-sidenav",15,16),o.Rb(2,"chat-component",17,18),o.Vb()),2&e){var n=o.ic(3);o.Gb("boundsLight",n.lightTheme),o.qc("mode",n.sidenavMode),o.Cb(2),o.pc("lightTheme",n.lightTheme)}}function W(e,t){if(1&e){var n=o.Xb();o.Wb(0,"div",19),o.Wb(1,"stream-component",20),o.ec("nicknameClicked",(function(e){return o.Bc(n),o.ic(3).onNicknameUpdate(e)}))("replaceScreenTrackClicked",(function(e){return o.Bc(n),o.ic(3).onReplaceScreenTrack(e)}))("toggleVideoSizeClicked",(function(e){return o.Bc(n),o.ic(3).onToggleVideoSize(e)})),o.Vb(),o.Vb()}if(2&e){var i=t.$implicit;o.Hc("display",null!=i.streamManager&&null!=i.streamManager.stream&&i.streamManager.stream.videoActive?"block":"none"),o.Cb(1),o.pc("user",i)("videoSizeBig",i.videoSizeBig)}}function F(e,t){if(1&e){var n=o.Xb();o.Wb(0,"div",21),o.Wb(1,"stream-component",22),o.ec("toggleVideoSizeClicked",(function(e){return o.Bc(n),o.ic(3).onToggleVideoSize(e)})),o.Vb(),o.Vb()}if(2&e){var i=t.$implicit;o.Hc("display",null!=i.streamManager&&null!=i.streamManager.stream&&i.streamManager.stream.videoActive?"block":"none"),o.Cb(1),o.pc("user",i)("videoSizeBig",i.videoSizeBig)}}function z(e,t){if(1&e){var n=o.Xb();o.Wb(0,"div"),o.Ic(1,U,1,0,"div",5),o.Wb(2,"app-toolbar",6),o.ec("camButtonClicked",(function(){return o.Bc(n),o.ic(2).toggleCam()}))("micButtonClicked",(function(){return o.Bc(n),o.ic(2).toggleMic()}))("screenShareClicked",(function(){return o.Bc(n),o.ic(2).toggleScreenShare()}))("layoutButtonClicked",(function(){return o.Bc(n),o.ic(2).toggleSpeakerLayout()}))("leaveSessionButtonClicked",(function(){return o.Bc(n),o.ic(2).leaveSession()})),o.Vb(),o.Wb(3,"mat-sidenav-container",7),o.Ic(4,B,4,4,"mat-sidenav",8),o.jc(5,"hasChat"),o.Wb(6,"mat-sidenav-content",9),o.Wb(7,"div",10),o.Ic(8,W,2,4,"div",11),o.Ic(9,F,2,4,"div",12),o.Vb(),o.Vb(),o.Vb(),o.Rb(10,"app-footer",13),o.Vb()}if(2&e){var i=o.ic(2);o.Cb(1),o.pc("ngIf",i.isConnectionLost),o.Cb(1),o.pc("lightTheme",i.lightTheme)("compact",i.compact)("mySessionId",i.mySessionId)("ovSettings",i.ovSettings)("hasVideoDevices",i.hasVideoDevices)("hasAudioDevices",i.hasAudioDevices)("isWebcamVideoEnabled",i.oVSessionService.hasWebcamVideoActive())("isWebcamAudioEnabled",i.toolbarMicIconEnabled())("isScreenEnabled",i.oVSessionService.isScreenShareEnabled())("isAutoLayout",i.isAutoLayout)("isConnectionLost",i.isConnectionLost),o.Cb(1),o.Gb("boundsLight",i.lightTheme),o.Cb(1),o.pc("ngIf",o.kc(5,21,i.ovSettings)),o.Cb(3),o.Gb("boundsLight",i.lightTheme),o.Cb(1),o.pc("ngForOf",i.localUsers),o.Cb(1),o.pc("ngForOf",i.remoteUsers),o.Cb(1),o.pc("lightTheme",i.lightTheme)("participants",i.remoteUsers)}}function q(e,t){if(1&e&&(o.Wb(0,"div",1),o.Ic(1,V,1,2,"app-room-config",2),o.Ic(2,z,11,23,"div",3),o.Vb()),2&e){var n=o.ic();o.Gb("boundsLight",n.lightTheme),o.Cb(1),o.pc("ngIf",n.showConfigRoomCard),o.Cb(1),o.pc("ngIf",n.localUsers&&n.localUsers.length>0)}}var G=["videoRoom"];function K(e,t){if(1&e){var n=o.Xb();o.Wb(0,"app-video-room",1,2),o.ec("_session",(function(e){return o.Bc(n),o.ic().emitSession(e)}))("_publisher",(function(e){return o.Bc(n),o.ic().emitPublisher(e)}))("_error",(function(e){return o.Bc(n),o.ic().emitErrorEvent(e)}))("_leaveSession",(function(e){return o.Bc(n),o.ic().emitLeaveSessionEvent(e)}))("_joinSession",(function(e){return o.Bc(n),o.ic().emitJoinSessionEvent(e)})),o.Vb()}if(2&e){var i=o.ic();o.pc("externalConfig",i.angularLibrary)}}var Q=["nicknameInput"],Y=["streamComponent"];function H(e,t){1&e&&(o.Wb(0,"span"),o.Kc(1," (edit)"),o.Vb())}function J(e,t){if(1&e){var n=o.Xb();o.Wb(0,"div",15),o.ec("click",(function(){return o.Bc(n),o.ic(2).toggleNicknameForm()})),o.Wb(1,"span",16),o.Kc(2),o.Vb(),o.Ic(3,H,2,0,"span",17),o.Vb()}if(2&e){var i=o.ic(2);o.Cb(2),o.Lc(i._user.nickname),o.Cb(1),o.pc("ngIf",!i._user.streamManager.remote)}}function Z(e,t){1&e&&(o.Wb(0,"mat-error"),o.Kc(1," Nickname is "),o.Wb(2,"strong"),o.Kc(3,"required"),o.Vb(),o.Vb())}function X(e,t){1&e&&(o.Wb(0,"mat-error"),o.Kc(1," Nickname is "),o.Wb(2,"strong"),o.Kc(3,"too long!"),o.Vb(),o.Vb())}function ee(e,t){if(1&e){var n=o.Xb();o.Wb(0,"div",18),o.Wb(1,"button",19),o.ec("click",(function(){return o.Bc(n),o.ic(2).toggleNicknameForm()})),o.Wb(2,"mat-icon",20),o.Kc(3,"highlight_off"),o.Vb(),o.Vb(),o.Wb(4,"form",21),o.Wb(5,"mat-form-field",22),o.Wb(6,"input",23,24),o.ec("keypress",(function(e){return o.Bc(n),o.ic(2).eventKeyPress(e)})),o.Vb(),o.Ic(8,Z,4,0,"mat-error",17),o.Ic(9,X,4,0,"mat-error",17),o.Vb(),o.Vb(),o.Vb()}if(2&e){var i=o.ic(2);o.Gb("fullscreen",i.isFullscreen),o.Cb(6),o.rc("placeholder","Nick: ",i._user.nickname,""),o.pc("formControl",i.nicknameFormControl)("errorStateMatcher",i.matcher),o.Cb(2),o.pc("ngIf",i.nicknameFormControl.hasError("required")),o.Cb(1),o.pc("ngIf",i.nicknameFormControl.hasError("maxlength"))}}function te(e,t){1&e&&(o.Wb(0,"div",25),o.Wb(1,"mat-icon"),o.Kc(2,"mic_off"),o.Vb(),o.Vb())}function ne(e,t){1&e&&(o.Wb(0,"div",26),o.Wb(1,"mat-icon"),o.Kc(2,"videocam_off"),o.Vb(),o.Vb())}function ie(e,t){1&e&&(o.Wb(0,"mat-icon",30),o.Kc(1,"volume_up"),o.Vb())}function oe(e,t){1&e&&(o.Wb(0,"mat-icon",31),o.Kc(1,"volume_off"),o.Vb())}function re(e,t){if(1&e){var n=o.Xb();o.Wb(0,"button",27),o.ec("click",(function(){return o.Bc(n),o.ic(2).toggleSound()})),o.Ic(1,ie,2,0,"mat-icon",28),o.Ic(2,oe,2,0,"mat-icon",29),o.Vb()}if(2&e){var i=o.ic(2);o.Cb(1),o.pc("ngIf",!i.mutedSound),o.Cb(1),o.pc("ngIf",i.mutedSound)}}function se(e,t){if(1&e){var n=o.Xb();o.Wb(0,"button",32),o.ec("click",(function(){return o.Bc(n),o.ic(2).replaceScreenTrack()})),o.Wb(1,"mat-icon",33),o.Kc(2,"picture_in_picture"),o.Vb(),o.Vb()}}function ae(e,t){if(1&e){var n=o.Xb();o.Wb(0,"div",1,2),o.ec("dblclick",(function(){return o.Bc(n),o.ic().toggleVideoSize()})),o.Wb(2,"div",3),o.Ic(3,J,4,2,"div",4),o.Ic(4,ee,10,7,"div",5),o.Vb(),o.Wb(5,"ov-video",6),o.ec("toggleVideoSizeEvent",(function(e){return o.Bc(n),o.ic().toggleVideoSize(e)})),o.Vb(),o.Wb(6,"div",7),o.Ic(7,te,3,0,"div",8),o.Ic(8,ne,3,0,"div",9),o.Vb(),o.Wb(9,"div",10),o.Wb(10,"button",11),o.ec("click",(function(){return o.Bc(n),o.ic().toggleVideoSize()})),o.Wb(11,"mat-icon"),o.Kc(12),o.Vb(),o.Vb(),o.Wb(13,"button",12),o.ec("click",(function(){return o.Bc(n),o.ic().toggleFullscreen()})),o.Wb(14,"mat-icon"),o.Kc(15),o.Vb(),o.Vb(),o.Ic(16,re,3,2,"button",13),o.Ic(17,se,3,0,"button",14),o.Vb(),o.Vb()}if(2&e){var i=o.ic();o.pc("id","container-"+i._user.streamManager.stream.streamId),o.Cb(2),o.Gb("fullscreen",i.isFullscreen),o.Cb(1),o.pc("ngIf",!i.toggleNickname),o.Cb(1),o.pc("ngIf",i.toggleNickname&&!i._user.streamManager.remote),o.Cb(1),o.pc("streamManager",i._user.streamManager)("mutedSound",i.mutedSound),o.Cb(2),o.pc("ngIf",!i._user.streamManager.stream.audioActive),o.Cb(1),o.pc("ngIf",!i._user.streamManager.stream.videoActive),o.Cb(4),o.Lc(i.videoSizeIcon),o.Cb(3),o.Lc(i.fullscreenIcon),o.Cb(1),o.pc("ngIf",i._user.streamManager.remote),o.Cb(1),o.pc("ngIf",!i._user.streamManager.remote&&i._user.isScreen())}}var ce=["videoElement"];function le(e,t){1&e&&(o.Wb(0,"mat-icon",14),o.Kc(1,"mic"),o.Vb())}function ue(e,t){1&e&&(o.Wb(0,"mat-icon",15),o.Kc(1,"mic_off"),o.Vb())}function de(e,t){if(1&e){var n=o.Xb();o.Wb(0,"button",11),o.ec("click",(function(){return o.Bc(n),o.ic().toggleMicrophone()})),o.Ic(1,le,2,0,"mat-icon",12),o.Ic(2,ue,2,0,"mat-icon",13),o.Vb()}if(2&e){var i=o.ic();o.pc("disabled",i.isConnectionLost),o.Cb(1),o.pc("ngIf",i.isWebcamAudioEnabled),o.Cb(1),o.pc("ngIf",!i.isWebcamAudioEnabled)}}function pe(e,t){1&e&&(o.Wb(0,"mat-icon",19),o.Kc(1,"videocam"),o.Vb())}function he(e,t){1&e&&(o.Wb(0,"mat-icon",20),o.Kc(1,"videocam_off"),o.Vb())}function fe(e,t){if(1&e){var n=o.Xb();o.Wb(0,"button",16),o.ec("click",(function(){return o.Bc(n),o.ic().toggleCamera()})),o.Ic(1,pe,2,0,"mat-icon",17),o.Ic(2,he,2,0,"mat-icon",18),o.Vb()}if(2&e){var i=o.ic();o.pc("disabled",i.isConnectionLost),o.Cb(1),o.pc("ngIf",i.isWebcamVideoEnabled),o.Cb(1),o.pc("ngIf",!i.isWebcamVideoEnabled)}}function ge(e,t){1&e&&(o.Wb(0,"mat-icon",24),o.Kc(1,"stop_screen_share"),o.Vb())}function me(e,t){1&e&&(o.Wb(0,"mat-icon",25),o.Kc(1,"screen_share"),o.Vb())}function ve(e,t){if(1&e){var n=o.Xb();o.Wb(0,"button",21),o.ec("click",(function(){return o.Bc(n),o.ic().toggleScreenShare()})),o.Ic(1,ge,2,0,"mat-icon",22),o.Ic(2,me,2,0,"mat-icon",23),o.Vb()}if(2&e){var i=o.ic();o.pc("disabled",i.isConnectionLost),o.Cb(1),o.pc("ngIf",!i.isScreenEnabled),o.Cb(1),o.pc("ngIf",i.isScreenEnabled)}}function be(e,t){if(1&e){var n=o.Xb();o.Wb(0,"button",26),o.ec("click",(function(){return o.Bc(n),o.ic().toggleFullscreen()})),o.Wb(1,"mat-icon",27),o.Kc(2),o.Vb(),o.Vb()}if(2&e){var i=o.ic();o.pc("disabled",i.isConnectionLost),o.Cb(2),o.Lc(i.fullscreenIcon)}}function _e(e,t){1&e&&(o.Wb(0,"mat-icon",30),o.Kc(1,"voice_over_off"),o.Vb())}function ye(e,t){1&e&&(o.Wb(0,"mat-icon",31),o.Kc(1,"record_voice_over"),o.Vb())}function Ce(e,t){if(1&e){var n=o.Xb();o.Wb(0,"button",26),o.ec("click",(function(){return o.Bc(n),o.ic().toggleSpeakerLayout()})),o.Ic(1,_e,2,0,"mat-icon",28),o.Ic(2,ye,2,0,"mat-icon",29),o.Vb()}if(2&e){var i=o.ic();o.pc("disabled",i.isConnectionLost),o.Cb(1),o.pc("ngIf",!i.isAutoLayout),o.Cb(1),o.pc("ngIf",i.isAutoLayout)}}function Oe(e,t){if(1&e){var n=o.Xb();o.Wb(0,"button",32),o.ec("click",(function(){return o.Bc(n),o.ic().leaveSession()})),o.Wb(1,"mat-icon",33),o.Kc(2,"power_settings_new"),o.Vb(),o.Vb()}}function Se(e,t){if(1&e){var n=o.Xb();o.Wb(0,"button",26),o.ec("click",(function(){return o.Bc(n),o.ic().toggleChat()})),o.Wb(1,"mat-icon",34),o.Kc(2,"chat"),o.Vb(),o.Vb()}if(2&e){var i=o.ic();o.pc("disabled",i.isConnectionLost),o.Cb(1),o.qc("matBadge",i.newMessagesNum),o.pc("matBadgeHidden",0===i.newMessagesNum)}}var ke=function(e,t){return{titleContent:!0,titleContentLight:e,titleContentDark:t}};function xe(e,t){if(1&e&&(o.Wb(0,"div",3),o.Wb(1,"span",4),o.Kc(2),o.Vb(),o.Vb()),2&e){var n=o.ic();o.pc("ngClass",o.uc(2,ke,n.lightTheme,!n.lightTheme)),o.Cb(2),o.Lc(n.sessionId)}}var Me=["bodyCard"];function we(e,t){if(1&e&&o.Rb(0,"ov-video",38),2&e){var n=o.ic(),i=n.$implicit,r=n.index,s=o.ic(2);o.pc("streamManager",i.streamManager)("className",s.localUsers.length>1&&0===r?"ovVideoSmall":"")}}function Ee(e,t){1&e&&(o.Wb(0,"div",39),o.Wb(1,"span"),o.Kc(2,"Oops! Camera is not available"),o.Vb(),o.Vb())}function Pe(e,t){if(1&e&&(o.Wb(0,"div"),o.Ic(1,we,1,2,"ov-video",36),o.Ic(2,Ee,3,0,"div",37),o.Vb()),2&e){var n=t.$implicit,i=o.ic(2);o.Cb(1),o.pc("ngIf",n.isCamera()&&i.hasVideoDevices||n.isScreen()),o.Cb(1),o.pc("ngIf",n.isCamera()&&!i.hasVideoDevices)}}function Ie(e,t){1&e&&(o.Wb(0,"div",46),o.Wb(1,"span"),o.Kc(2,"Press Avatar Button"),o.Vb(),o.Vb())}function Re(e,t){if(1&e&&o.Rb(0,"img",47),2&e){var n=o.ic(3);o.pc("src",n.videoAvatar,o.Dc)}}function Te(e,t){1&e&&o.Rb(0,"mat-spinner",48),2&e&&o.pc("diameter",70)}function Ae(e,t){if(1&e&&o.Rb(0,"img",47),2&e){var n=o.ic(3);o.pc("src",n.randomAvatar,o.Dc)}}function De(e,t){if(1&e){var n=o.Xb();o.Wb(0,"div",40),o.Wb(1,"div",41),o.Wb(2,"div",42),o.ec("click",(function(){return o.Bc(n),o.ic(2).setAvatar("video")})),o.Ic(3,Ie,3,0,"div",43),o.Ic(4,Re,1,1,"img",44),o.Vb(),o.Wb(5,"div",42),o.ec("click",(function(){return o.Bc(n),o.ic(2).setAvatar("random")})),o.Ic(6,Te,1,1,"mat-spinner",45),o.Ic(7,Ae,1,1,"img",44),o.Vb(),o.Vb(),o.Vb()}if(2&e){var i=o.ic(2);o.Cb(2),o.Hc("background","video"===i.avatarSelected?"lightgreen":"transparent",o.Jb),o.Cb(1),o.pc("ngIf",!i.videoAvatar),o.Cb(1),o.pc("ngIf",i.videoAvatar),o.Cb(1),o.Hc("background","random"===i.avatarSelected?"lightgreen":"transparent",o.Jb),o.Cb(1),o.pc("ngIf",!i.randomAvatar),o.Cb(1),o.pc("ngIf",i.randomAvatar)}}function Le(e,t){1&e&&(o.Wb(0,"mat-error"),o.Kc(1," Nickname is "),o.Wb(2,"strong"),o.Kc(3,"required"),o.Vb(),o.Vb())}function je(e,t){1&e&&(o.Wb(0,"mat-error"),o.Kc(1," Nickname is "),o.Wb(2,"strong"),o.Kc(3,"too long!"),o.Vb(),o.Vb())}function Ne(e,t){1&e&&(o.Wb(0,"mat-icon",55),o.Kc(1,"mic"),o.Vb())}function Ve(e,t){1&e&&(o.Wb(0,"mat-icon",56),o.Kc(1,"mic_off"),o.Vb())}function Ue(e,t){if(1&e&&(o.Wb(0,"mat-option",57),o.Kc(1),o.Vb()),2&e){var n=t.$implicit;o.pc("value",n.device),o.Cb(1),o.Mc(" ",n.label," ")}}function Be(e,t){if(1&e){var n=o.Xb();o.Wb(0,"div",24),o.Wb(1,"div",25),o.Wb(2,"div",26),o.Wb(3,"button",49),o.ec("click",(function(){return o.Bc(n),o.ic(2).toggleMic()})),o.Ic(4,Ne,2,0,"mat-icon",50),o.Ic(5,Ve,2,0,"mat-icon",51),o.Vb(),o.Vb(),o.Wb(6,"div",29),o.Wb(7,"mat-form-field",52),o.Wb(8,"mat-select",53),o.ec("selectionChange",(function(e){return o.Bc(n),o.ic(2).onMicrophoneSelected(e)})),o.Ic(9,Ue,2,2,"mat-option",54),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Vb()}if(2&e){var i=o.ic(2);o.Cb(4),o.pc("ngIf",i.isAudioActive),o.Cb(1),o.pc("ngIf",!i.isAudioActive),o.Cb(3),o.pc("ngModel",i.isAudioActive&&i.micSelected?i.micSelected.device:"None"),o.Cb(1),o.pc("ngForOf",i.microphones)}}function We(e,t){1&e&&(o.Wb(0,"mat-icon",62),o.Kc(1,"videocam"),o.Vb())}function Fe(e,t){1&e&&(o.Wb(0,"mat-icon",63),o.Kc(1,"videocam_off"),o.Vb())}function ze(e,t){if(1&e&&(o.Wb(0,"mat-option",57),o.Kc(1),o.Vb()),2&e){var n=t.$implicit;o.pc("value",n.device),o.Cb(1),o.Mc(" ",n.label," ")}}function qe(e,t){if(1&e){var n=o.Xb();o.Wb(0,"div",24),o.Wb(1,"div",25),o.Wb(2,"div",26),o.Wb(3,"button",58),o.ec("click",(function(){return o.Bc(n),o.ic(2).toggleCam()})),o.Ic(4,We,2,0,"mat-icon",59),o.Ic(5,Fe,2,0,"mat-icon",60),o.Vb(),o.Vb(),o.Wb(6,"div",29),o.Wb(7,"mat-form-field",52),o.Wb(8,"mat-select",61),o.ec("selectionChange",(function(e){return o.Bc(n),o.ic(2).onCameraSelected(e)})),o.Ic(9,ze,2,2,"mat-option",54),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Vb()}if(2&e){var i=o.ic(2);o.Cb(4),o.pc("ngIf",i.isVideoActive),o.Cb(1),o.pc("ngIf",!i.isVideoActive),o.Cb(3),o.pc("ngModel",i.isVideoActive&&i.camSelected?i.camSelected.device:"None"),o.Cb(1),o.pc("ngForOf",i.cameras)}}function Ge(e,t){1&e&&(o.Wb(0,"mat-icon",68),o.Kc(1,"screen_share"),o.Vb())}function Ke(e,t){1&e&&(o.Wb(0,"mat-icon",69),o.Kc(1," stop_screen_share"),o.Vb())}function Qe(e,t){if(1&e){var n=o.Xb();o.Wb(0,"div",24),o.Wb(1,"div",25),o.Wb(2,"div",26),o.Wb(3,"button",64),o.ec("click",(function(){return o.Bc(n),o.ic(2).toggleScreenShare()})),o.Ic(4,Ge,2,0,"mat-icon",65),o.Ic(5,Ke,2,0,"mat-icon",66),o.Vb(),o.Vb(),o.Wb(6,"div",29),o.Wb(7,"mat-form-field",52),o.Rb(8,"input",67),o.Vb(),o.Vb(),o.Vb(),o.Vb()}if(2&e){var i=o.ic(2);o.Cb(4),o.pc("ngIf",i.oVSessionService.isScreenShareEnabled()),o.Cb(1),o.pc("ngIf",!i.oVSessionService.isScreenShareEnabled()),o.Cb(3),o.pc("ngModel",i.oVSessionService.isScreenShareEnabled()?"Screen":"None")}}function Ye(e,t){if(1&e){var n=o.Xb();o.Wb(0,"div",2),o.Wb(1,"div",3),o.Wb(2,"div",4),o.Wb(3,"div",5),o.Wb(4,"div",6),o.Rb(5,"img",7),o.Vb(),o.Wb(6,"h3",8),o.Kc(7),o.Vb(),o.Wb(8,"button",9),o.ec("click",(function(){return o.Bc(n),o.ic().close()})),o.Wb(9,"mat-icon",10),o.Kc(10,"highlight_off"),o.Vb(),o.Vb(),o.Vb(),o.Wb(11,"div",11,12),o.Wb(13,"div",13),o.Wb(14,"div",14),o.Wb(15,"div",15),o.Ic(16,Pe,3,2,"div",16),o.Vb(),o.Wb(17,"div",17),o.Wb(18,"button",18),o.ec("click",(function(){return o.Bc(n),o.ic().takePhoto()})),o.Wb(19,"mat-icon",19),o.Kc(20,"photo_camera"),o.Vb(),o.Wb(21,"span",20),o.Kc(22,"Capture Avatar"),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Wb(23,"div",21),o.Wb(24,"div",22),o.Wb(25,"h3"),o.Kc(26,"Avatar"),o.Vb(),o.Vb(),o.Ic(27,De,8,8,"div",23),o.Wb(28,"div",24),o.Wb(29,"div",25),o.Wb(30,"div",26),o.Wb(31,"button",27),o.ec("click",(function(){return o.Bc(n),o.ic().setNicknameForm()})),o.Wb(32,"mat-icon",28),o.Kc(33,"person"),o.Vb(),o.Vb(),o.Vb(),o.Wb(34,"div",29),o.Wb(35,"form",30),o.Wb(36,"mat-form-field"),o.Wb(37,"input",31),o.ec("keypress",(function(e){return o.Bc(n),o.ic().eventKeyPress(e)})),o.Vb(),o.Ic(38,Le,4,0,"mat-error",32),o.Ic(39,je,4,0,"mat-error",32),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Ic(40,Be,10,4,"div",33),o.jc(41,"hasAudio"),o.Ic(42,qe,10,4,"div",33),o.jc(43,"hasVideo"),o.Ic(44,Qe,9,3,"div",33),o.jc(45,"hasScreenSharing"),o.Vb(),o.Vb(),o.Vb(),o.Wb(46,"div",34),o.Wb(47,"button",35),o.ec("click",(function(){return o.Bc(n),o.ic().joinSession()})),o.Kc(48,"JOIN"),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Vb()}if(2&e){var i=o.ic();o.Cb(7),o.Lc(i.mySessionId),o.Cb(9),o.pc("ngForOf",i.localUsers),o.Cb(11),o.pc("ngIf",i.hasVideoDevices),o.Cb(10),o.pc("formControl",i.nicknameFormControl)("errorStateMatcher",i.matcher),o.Cb(1),o.pc("ngIf",i.nicknameFormControl.hasError("required")),o.Cb(1),o.pc("ngIf",i.nicknameFormControl.hasError("maxlength")),o.Cb(1),o.pc("ngIf",i.hasAudioDevices&&o.kc(41,10,i.ovSettings)),o.Cb(2),o.pc("ngIf",i.hasVideoDevices&&o.kc(43,12,i.ovSettings)),o.Cb(2),o.pc("ngIf",o.kc(45,14,i.ovSettings))}}var He=function(e){return{display:e}},Je=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"updateLayout",value:function(){var e=this;setTimeout((function(){if("none"!==e.layoutContainer.style.display){var t=e.layoutContainer.id;t||(t="OT_"+e.cheapUUID(),e.layoutContainer.id=t);var n,i,o=e.getHeight(e.layoutContainer)-e.getCSSNumber(e.layoutContainer,"borderTop")-e.getCSSNumber(e.layoutContainer,"borderBottom"),r=e.getWidth(e.layoutContainer)-e.getCSSNumber(e.layoutContainer,"borderLeft")-e.getCSSNumber(e.layoutContainer,"borderRight"),s=o/r,a=0,c=0,l=0,u=0,d=Array.prototype.filter.call(e.layoutContainer.querySelectorAll("#"+t+">."+e.opts.bigClass),e.filterDisplayNone),p=Array.prototype.filter.call(e.layoutContainer.querySelectorAll("#"+t+">*:not(."+e.opts.bigClass+")"),e.filterDisplayNone);if(d.length>0&&p.length>0)s>e.getVideoRatio(d[0])?(n=r,l=o-(c=i=Math.floor(o*e.opts.bigPercentage))):(i=o,u=r-(a=n=Math.floor(r*e.opts.bigPercentage))),e.opts.bigFirst?(e.arrange(d,n,i,0,0,e.opts.bigFixedRatio,e.opts.bigMinRatio,e.opts.bigMaxRatio,e.opts.animate),e.arrange(p,r-a,o-c,a,c,e.opts.fixedRatio,e.opts.minRatio,e.opts.maxRatio,e.opts.animate)):(e.arrange(p,r-a,o-c,0,0,e.opts.fixedRatio,e.opts.minRatio,e.opts.maxRatio,e.opts.animate),e.arrange(d,n,i,u,l,e.opts.bigFixedRatio,e.opts.bigMinRatio,e.opts.bigMaxRatio,e.opts.animate));else d.length>0&&0===p.length?e.arrange(d,r,o,0,0,e.opts.bigFixedRatio,e.opts.bigMinRatio,e.opts.bigMaxRatio,e.opts.animate):e.arrange(p,r-a,o-c,a,c,e.opts.fixedRatio,e.opts.minRatio,e.opts.maxRatio,e.opts.animate)}}),50)}},{key:"initLayoutContainer",value:function(e,t){this.opts={maxRatio:null!=t.maxRatio?t.maxRatio:1.5,minRatio:null!=t.minRatio?t.minRatio:9/16,fixedRatio:null!=t.fixedRatio&&t.fixedRatio,animate:null!=t.animate&&t.animate,bigClass:null!=t.bigClass?t.bigClass:"OT_big",bigPercentage:null!=t.bigPercentage?t.bigPercentage:.8,bigFixedRatio:null!=t.bigFixedRatio&&t.bigFixedRatio,bigMaxRatio:null!=t.bigMaxRatio?t.bigMaxRatio:1.5,bigMinRatio:null!=t.bigMinRatio?t.bigMinRatio:9/16,bigFirst:null==t.bigFirst||t.bigFirst},this.layoutContainer="string"==typeof e?$(e):e}},{key:"setLayoutOptions",value:function(e){this.opts=e}},{key:"fixAspectRatio",value:function(e,t){var n=e.querySelector(".OT_root");if(n){var i=n.style.width;n.style.width=t+"px",n.style.width=i||""}}},{key:"positionElement",value:function(e,t,n,i,o,r){var s=this,a={left:t+"px",top:n+"px",width:i+"px",height:o+"px"};this.fixAspectRatio(e,i),r&&$?($(e).stop(),$(e).animate(a,r.duration||200,r.easing||"swing",(function(){s.fixAspectRatio(e,i),r.complete&&r.complete.call(s)}))):$(e).css(a),this.fixAspectRatio(e,i)}},{key:"getVideoRatio",value:function(e){if(!e)return 3/4;var t=e.querySelector("video");return t&&t.videoHeight&&t.videoWidth?t.videoHeight/t.videoWidth:e.videoHeight&&e.videoWidth?e.videoHeight/e.videoWidth:3/4}},{key:"getCSSNumber",value:function(e,t){var n=$(e).css(t);return n?parseInt(n,10):0}},{key:"cheapUUID",value:function(){return(1e8*Math.random()).toFixed(0)}},{key:"getHeight",value:function(e){var t=$(e).css("height");return t?parseInt(t,10):0}},{key:"getWidth",value:function(e){var t=$(e).css("width");return t?parseInt(t,10):0}},{key:"getBestDimensions",value:function(e,t,n,i,o,r){for(var s,a,c,l,u,d,p,h=1;h<=n;h++){var f=h,g=Math.ceil(n/f);(p=(d=Math.floor(o/g))/(u=Math.floor(i/f)))>t?d=u*(p=t):p<e&&(u=d/(p=e));var m=u*d*n;(void 0===s||m>s)&&(s=m,r=d,l=u,a=f,c=g)}return{maxArea:s,targetCols:a,targetRows:c,targetHeight:r,targetWidth:l,ratio:r/l}}},{key:"arrange",value:function(e,t,n,i,o,r,s,a,c){var l,u,d=e.length;if(r){var p=this.getVideoRatio(e.length>0?e[0]:null);u=this.getBestDimensions(p,p,d,t,n,l)}else u=this.getBestDimensions(s,a,d,t,n,l);for(var h,f=0,g=0,m=[],v=0;v<e.length;v++){v%u.targetCols==0&&(h={children:[],width:0,height:0},m.push(h));var b=e[v];h.children.push(b);var _=u.targetWidth;l=u.targetHeight,r&&(_=l/this.getVideoRatio(b)),h.width+=_,h.height=l}for(var y=0,C=0,O=0;O<m.length;O++)(h=m[O]).width>t?(h.height=Math.floor(h.height*(t/h.width)),h.width=t):h.width<t&&(C+=1),y+=h.height;if(y<n&&C>0){var S=n-y;y=0;for(var k=0;k<m.length;k++){if((h=m[k]).width<t){var x=S/C;x/h.height>(t-h.width)/h.width&&(x=Math.floor((t-h.width)/h.width*h.height)),h.width+=Math.floor(x/h.height*h.width),h.height+=x,S-=x,C-=1}y+=h.height}}g=(n-y)/2;for(var M=0;M<m.length;M++){f=(t-(h=m[M]).width)/2;for(var w=0;w<h.children.length;w++){var E=h.children[w],P=u.targetWidth;l=h.height,r&&(P=Math.floor(l/this.getVideoRatio(E))),E.style.position="absolute";var I=P-this.getCSSNumber(E,"paddingLeft")-this.getCSSNumber(E,"paddingRight")-this.getCSSNumber(E,"marginLeft")-this.getCSSNumber(E,"marginRight")-this.getCSSNumber(E,"borderLeft")-this.getCSSNumber(E,"borderRight"),R=l-this.getCSSNumber(E,"paddingTop")-this.getCSSNumber(E,"paddingBottom")-this.getCSSNumber(E,"marginTop")-this.getCSSNumber(E,"marginBottom")-this.getCSSNumber(E,"borderTop")-this.getCSSNumber(E,"borderBottom");this.positionElement(E,f+i,g+o,I,R,c),f+=P}g+=l}}},{key:"filterDisplayNone",value:function(e){return"none"!==e.style.display}}]),e}(),Ze=function(e){return e.CAMERA="CAMERA",e.SCREEN="SCREEN",e.CUSTOM="CUSTOM",e}({}),Xe=function(e){return e.WINDOW="window",e.SCREEN="screen",e}({}),$e=function(){function e(t,n,i){_classCallCheck(this,e),this.connectionId=t||"",this.nickname=i||"OpenVidu",this.streamManager=n||null}return _createClass(e,[{key:"isAudioActive",value:function(){var e,t;return null===(t=null===(e=this.streamManager)||void 0===e?void 0:e.stream)||void 0===t?void 0:t.audioActive}},{key:"isVideoActive",value:function(){var e,t;return null===(t=null===(e=this.streamManager)||void 0===e?void 0:e.stream)||void 0===t?void 0:t.videoActive}},{key:"getConnectionId",value:function(){var e,t,n;return null===(n=null===(t=null===(e=this.streamManager)||void 0===e?void 0:e.stream)||void 0===t?void 0:t.connection)||void 0===n?void 0:n.connectionId}},{key:"getNickname",value:function(){return this.nickname}},{key:"getStreamManager",value:function(){return this.streamManager}},{key:"getAvatar",value:function(){return this.videoAvatar?this.videoAvatar.toDataURL():this.randomAvatar}},{key:"isLocal",value:function(){return!this.isRemote()}},{key:"isRemote",value:function(){var e;return null===(e=this.streamManager)||void 0===e?void 0:e.remote}},{key:"isScreen",value:function(){var e,t;return(null===(t=null===(e=this.streamManager)||void 0===e?void 0:e.stream)||void 0===t?void 0:t.typeOfVideo)===Ze.SCREEN}},{key:"isCamera",value:function(){var e,t;return(null===(t=null===(e=this.streamManager)||void 0===e?void 0:e.stream)||void 0===t?void 0:t.typeOfVideo)===Ze.CAMERA||this.isLocal()&&!this.isScreen()}},{key:"setStreamManager",value:function(e){this.streamManager=e}},{key:"setNickname",value:function(e){this.nickname=e}},{key:"isVideoSizeBig",value:function(){return this.videoSizeBig}},{key:"setVideoSizeBig",value:function(e){this.videoSizeBig=e}},{key:"setUserAvatar",value:function(e){var t=this;return new Promise((function(n){if(e)t.randomAvatar=e,n();else{t.createVideoAvatar();var i=document.getElementById("video-"+t.getStreamManager().stream.streamId);t.videoAvatar.getContext("2d").drawImage(i,200,120,285,285,0,0,100,100),n()}}))}},{key:"removeVideoAvatar",value:function(){this.videoAvatar=null}},{key:"createVideoAvatar",value:function(){this.videoAvatar=document.createElement("canvas"),this.videoAvatar.className="user-img",this.videoAvatar.width=100,this.videoAvatar.height=100}}]),e}(),et=function(e){return e.RANDOM="random",e.VIDEO="video",e}({}),tt=function(){var e=function(){function e(){_classCallCheck(this,e),this.log=window.console,this.LOG_FNS=[],this.MSG_PREFIXES=[["[","]"],["[","] WARN: "],["[","] ERROR: "]],this.LOG_FNS=[this.log.log,this.log.warn,this.log.error]}return _createClass(e,[{key:"get",value:function(e){var t=this,n=this.LOG_FNS.map((function(n,i){return n.bind(t.log,t.MSG_PREFIXES[i][0]+e+t.MSG_PREFIXES[i][1])}));return{d:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];n[0].apply(this.log,arguments)},w:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];n[1].apply(this.log,arguments)},e:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];n[2].apply(this.log,arguments)}}}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Object(o.Mb)({factory:function(){return new e},token:e,providedIn:"root"}),e}(),nt=function(){var e=function(){function e(t){_classCallCheck(this,e),this.loggerSrv=t,this._OVUsers=new r.a([]),this.OV=null,this.OVScreen=null,this.webcamSession=null,this.screenSession=null,this.webcamUser=null,this.screenUser=null,this.videoSource=void 0,this.audioSource=void 0,this.sessionId="",this.screenMediaStream=null,this.webcamMediaStream=null,this.log=this.loggerSrv.get("OpenViduSessionService"),this.OV=new a.OpenVidu,this.OVScreen=new a.OpenVidu,this.OVUsers=this._OVUsers.asObservable(),this.webcamUser=new $e,this._OVUsers.next([this.webcamUser])}return _createClass(e,[{key:"initSessions",value:function(){this.webcamSession=this.OV.initSession(),this.screenSession=this.OVScreen.initSession()}},{key:"getWebcamSession",value:function(){return this.webcamSession}},{key:"getConnectedUserSession",value:function(){return this.isWebCamEnabled()?this.getWebcamSession():this.getScreenSession()}},{key:"getScreenSession",value:function(){return this.screenSession}},{key:"connectWebcamSession",value:function(e){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e,!t.t0){t.next=4;break}return t.next=4,this.webcamSession.connect(e,{clientData:this.getWebcamUserName(),avatar:this.getWebCamAvatar()});case 4:case"end":return t.stop()}}),t,this)})))}},{key:"connectScreenSession",value:function(e){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e,!t.t0){t.next=4;break}return t.next=4,this.screenSession.connect(e,{clientData:this.getScreenUserName(),avatar:this.getWebCamAvatar()});case 4:case"end":return t.stop()}}),t,this)})))}},{key:"publishWebcam",value:function(){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.webcamSession.capabilities.publish){e.next=6;break}if(!(t=this.webcamUser.getStreamManager())){e.next=6;break}return e.next=5,this.webcamSession.publish(t);case 5:return e.abrupt("return",e.sent);case 6:this.log.w("User cannot publish");case 7:case"end":return e.stop()}}),e,this)})))}},{key:"publishScreen",value:function(){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.screenSession.capabilities.publish){e.next=6;break}if(!(t=this.screenUser.getStreamManager())){e.next=6;break}return e.next=5,this.screenSession.publish(t);case 5:return e.abrupt("return",e.sent);case 6:this.log.w("User cannot publish");case 7:case"end":return e.stop()}}),e,this)})))}},{key:"unpublishWebcam",value:function(){var e=this.webcamUser.getStreamManager();e&&(this.publishScreenAudio(this.hasWebcamAudioActive()),this.webcamSession.unpublish(e))}},{key:"unpublishScreen",value:function(){var e=this.screenUser.getStreamManager();e&&this.screenSession.unpublish(e)}},{key:"enableWebcamUser",value:function(){this._OVUsers.next([this.webcamUser,this.screenUser])}},{key:"disableWebcamUser",value:function(){this._OVUsers.next([this.screenUser])}},{key:"enableScreenUser",value:function(e){var t,n,i=null===(n=null===(t=this.screenSession)||void 0===t?void 0:t.connection)||void 0===n?void 0:n.connectionId;this.screenUser=new $e(i,e,this.getScreenUserName()),this.screenUser.setUserAvatar(this.webcamUser.getAvatar()),this.isWebCamEnabled()?this._OVUsers.next([this.webcamUser,this.screenUser]):(this.log.d("ENABLED SCREEN SHARE"),this._OVUsers.next([this.screenUser]))}},{key:"disableScreenUser",value:function(){this.destryoScreenUser(),this._OVUsers.next([this.webcamUser])}},{key:"initCamPublisher",value:function(e,t){var n=this.initPublisher(e,t);return this.webcamUser.setStreamManager(n),n}},{key:"publishVideo",value:function(e){this.webcamUser.getStreamManager().publishVideo(e),this._OVUsers.next(this._OVUsers.getValue())}},{key:"publishWebcamAudio",value:function(e){var t,n=null===(t=this.webcamUser)||void 0===t?void 0:t.getStreamManager();n&&n.publishAudio(e)}},{key:"publishScreenAudio",value:function(e){var t,n=null===(t=this.screenUser)||void 0===t?void 0:t.getStreamManager();n&&n.publishAudio(e)}},{key:"replaceTrack",value:function(e,t){var n=this,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return new Promise((function(o,r){e&&(n.log.d("Replacing video track "+e),n.videoSource=e),t&&(n.log.d("Replacing audio track "+t),n.audioSource=t),n.destryoWebcamUser();var s=n.createProperties(n.videoSource,n.audioSource,n.hasWebcamVideoActive(),n.hasWebcamAudioActive(),i),a=n.initCamPublisher(void 0,s);a.once("streamPlaying",(function(){n.webcamUser.setStreamManager(a),o()})),a.once("accessDenied",(function(){r()}))}))}},{key:"replaceScreenTrack",value:function(){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Xe.SCREEN,n=!this.isWebCamEnabled(),i=this.createProperties(t,void 0,!0,n,!1),this.stopScreenTracks(),e.next=4,this.OVScreen.getUserMedia(i);case 4:return this.screenMediaStream=e.sent,e.next=7,this.screenUser.getStreamManager().replaceTrack(this.screenMediaStream.getVideoTracks()[0]);case 7:case"end":return e.stop()}}),e,this)})))}},{key:"initScreenPublisher",value:function(e,t){return this.log.d("init screen properties",t),this.initPublisher(e,t)}},{key:"destroyUsers",value:function(){this.destryoScreenUser(),this.destryoWebcamUser()}},{key:"disconnect",value:function(){var e=this;this.webcamSession&&(this.log.d("Disconnecting screen session"),this.webcamSession.disconnect(),this.webcamSession=null),this.screenSession&&setTimeout((function(){e.log.d("Disconnecting screen session"),e.screenSession.disconnect(),e.stopScreenTracks(),e.screenSession=null}),50),this.destroyUsers(),this.screenUser=null,this.videoSource=void 0,this.audioSource=void 0,this.sessionId="",this.webcamUser=new $e,this._OVUsers.next([this.webcamUser])}},{key:"isWebCamEnabled",value:function(){return this._OVUsers.getValue()[0].isCamera()}},{key:"isOnlyScreenConnected",value:function(){return this._OVUsers.getValue()[0].isScreen()}},{key:"hasWebcamVideoActive",value:function(){return this.webcamUser.isVideoActive()}},{key:"hasWebcamAudioActive",value:function(){var e;return null===(e=this.webcamUser)||void 0===e?void 0:e.isAudioActive()}},{key:"hasScreenAudioActive",value:function(){var e;return null===(e=this.screenUser)||void 0===e?void 0:e.isAudioActive()}},{key:"areBothConnected",value:function(){return 2===this._OVUsers.getValue().length}},{key:"isOnlyWebcamConnected",value:function(){return this.isWebCamEnabled()&&!this.areBothConnected()}},{key:"isScreenShareEnabled",value:function(){return this.areBothConnected()||this.isOnlyScreenConnected()}},{key:"isMyOwnConnection",value:function(e){var t,n;return(null===(t=this.webcamUser)||void 0===t?void 0:t.getConnectionId())===e||(null===(n=this.screenUser)||void 0===n?void 0:n.getConnectionId())===e}},{key:"createProperties",value:function(e,t,n,i,o){return{videoSource:e,audioSource:t,publishVideo:n,publishAudio:i,mirror:o}}},{key:"setSessionId",value:function(e){this.sessionId=e}},{key:"getSessionId",value:function(){return this.sessionId}},{key:"setWebcamAvatar",value:function(){this.webcamUser.setUserAvatar()}},{key:"setAvatar",value:function(e,t){(e===et.RANDOM&&t||et.VIDEO&&t)&&e===et.RANDOM&&this.webcamUser.setUserAvatar(t)}},{key:"setWebcamName",value:function(e){this.webcamUser.setNickname(e)}},{key:"getWebCamAvatar",value:function(){return this.webcamUser.getAvatar()}},{key:"getWebcamUserName",value:function(){return this.webcamUser.getNickname()}},{key:"getScreenUserName",value:function(){return this.getWebcamUserName()+"_SCREEN"}},{key:"resetUsersZoom",value:function(){var e,t;null===(e=this.webcamUser)||void 0===e||e.setVideoSizeBig(!1),null===(t=this.screenUser)||void 0===t||t.setVideoSizeBig(!1)}},{key:"toggleZoom",value:function(e){this.webcamUser.getConnectionId()!==e?this.screenUser.setVideoSizeBig(!this.screenUser.isVideoSizeBig()):this.webcamUser.setVideoSizeBig(!this.webcamUser.isVideoSizeBig())}},{key:"initPublisher",value:function(e,t){return this.OV.initPublisher(e,t)}},{key:"destryoScreenUser",value:function(){var e;(null===(e=this.screenUser)||void 0===e?void 0:e.getStreamManager())&&(this.screenUser.getStreamManager().stream.disposeWebRtcPeer(),this.screenUser.getStreamManager().stream.disposeMediaStream())}},{key:"destryoWebcamUser",value:function(){var e;(null===(e=this.webcamUser)||void 0===e?void 0:e.getStreamManager())&&(this.webcamUser.getStreamManager().stream.disposeWebRtcPeer(),this.webcamUser.getStreamManager().stream.disposeMediaStream())}},{key:"stopScreenTracks",value:function(){this.screenMediaStream&&(this.stopAudioTracks(this.screenMediaStream),this.stopVideoTracks(this.screenMediaStream))}},{key:"stopAudioTracks",value:function(e){var t,n;null===(t=e)||void 0===t||t.getAudioTracks().forEach((function(e){e.stop(),e.enabled=!1})),null===(n=this.webcamMediaStream)||void 0===n||n.getAudioTracks().forEach((function(e){e.stop()}))}},{key:"stopVideoTracks",value:function(e){var t;null===(t=e)||void 0===t||t.getVideoTracks().forEach((function(e){e.stop()}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.ac(tt))},e.\u0275prov=Object(o.Mb)({factory:function(){return new e(Object(o.ac)(tt))},token:e,providedIn:"root"}),e}(),it=function(){var e=function(){function e(t){_classCallCheck(this,e),this.loggerSrv=t,this._remoteUsers=new r.a([]),this.users=[],this.log=this.loggerSrv.get("RemoteService"),this.remoteUsers=this._remoteUsers.asObservable()}return _createClass(e,[{key:"updateUsers",value:function(){this._remoteUsers.next(this.users)}},{key:"add",value:function(e,t){var n,i,o="",r="",s=e.stream.connection.connectionId;try{o=null===(n=JSON.parse(e.stream.connection.data))||void 0===n?void 0:n.clientData,r=null===(i=JSON.parse(e.stream.connection.data))||void 0===i?void 0:i.avatar}catch(c){o="Unknown"}var a=new $e(s,t,o);a.setUserAvatar(r),this.users.push(a),this.updateUsers()}},{key:"removeUserByConnectionId",value:function(e){this.log.w("Deleting user: ",e);var t=this.getRemoteUserByConnectionId(e),n=this.users.indexOf(t,0);n>-1&&(this.users.splice(n,1),this.updateUsers())}},{key:"someoneIsSharingScreen",value:function(){return this.users.some((function(e){return e.isScreen()}))}},{key:"toggleUserZoom",value:function(e){var t=this.getRemoteUserByConnectionId(e);t.setVideoSizeBig(!t.isVideoSizeBig())}},{key:"resetUsersZoom",value:function(){this.users.forEach((function(e){return e.setVideoSizeBig(!1)}))}},{key:"setUserZoom",value:function(e,t){var n;null===(n=this.getRemoteUserByConnectionId(e))||void 0===n||n.setVideoSizeBig(t)}},{key:"getRemoteUserByConnectionId",value:function(e){return this.users.find((function(t){return t.getConnectionId()===e}))}},{key:"updateNickname",value:function(e,t){var n;null===(n=this.getRemoteUserByConnectionId(e))||void 0===n||n.setNickname(t),this._remoteUsers.next(this.users)}},{key:"clean",value:function(){this._remoteUsers=new r.a([]),this.remoteUsers=this._remoteUsers.asObservable(),this.users=[]}},{key:"getUserAvatar",value:function(e){return this.getRemoteUserByConnectionId(e).getAvatar()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.ac(tt))},e.\u0275prov=Object(o.Mb)({factory:function(){return new e(Object(o.ac)(tt))},token:e,providedIn:"root"}),e}(),ot=function(){var e=function(){function e(t){_classCallCheck(this,e),this.snackBar=t}return _createClass(e,[{key:"newMessage",value:function(e,t){this.launchNotification(e+" sent a message","OPEN","messageSnackbar",3e3).onAction().subscribe((function(){t()}))}},{key:"launchNotification",value:function(e,t,n,i){return this.snackBar.open(e,t,{duration:i,verticalPosition:"top",horizontalPosition:"end",panelClass:n})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.ac(c.a))},e.\u0275prov=Object(o.Mb)({factory:function(){return new e(Object(o.ac)(c.a))},token:e,providedIn:"root"}),e}(),rt=function(){var e=function(){function e(t,n,i,o){_classCallCheck(this,e),this.loggerSrv=t,this.oVSessionService=n,this.remoteUsersService=i,this.notificationService=o,this._messageList=new r.a([]),this._toggleChat=new r.a(!1),this.messageList=[],this.messagesUnread=0,this._messagesUnread=new r.a(0),this.log=this.loggerSrv.get("ChatService"),this.messagesObs=this._messageList.asObservable(),this.toggleChatObs=this._toggleChat.asObservable(),this.messagesUnreadObs=this._messagesUnread.asObservable()}return _createClass(e,[{key:"setChatComponent",value:function(e){this.chatComponent=e}},{key:"subscribeToChat",value:function(){var e=this;this.oVSessionService.getWebcamSession().on("signal:chat",(function(t){var n=t.from.connectionId,i=JSON.parse(t.data),o=e.oVSessionService.isMyOwnConnection(n);e.messageList.push({isLocal:o,nickname:i.nickname,message:i.message,userAvatar:o?e.oVSessionService.getWebCamAvatar():e.remoteUsersService.getUserAvatar(n)}),e.isChatOpened()||(e.addMessageUnread(),e.notificationService.newMessage(i.nickname.toUpperCase(),e.toggleChat.bind(e))),e._messageList.next(e.messageList)}))}},{key:"sendMessage",value:function(e){if(""!==(e=e.replace(/ +(?= )/g,""))&&" "!==e){var t={message:e,nickname:this.oVSessionService.getWebcamUserName()};this.oVSessionService.getConnectedUserSession().signal({data:JSON.stringify(t),type:"chat"})}}},{key:"toggleChat",value:function(){var e=this;this.log.d("Toggling chat"),this.chatComponent.toggle().then((function(){e.chatOpened=e.chatComponent.opened,e._toggleChat.next(e.chatOpened),e.chatOpened&&(e.messagesUnread=0,e._messagesUnread.next(e.messagesUnread))}))}},{key:"isChatOpened",value:function(){return this.chatOpened}},{key:"addMessageUnread",value:function(){this.messagesUnread++,this._messagesUnread.next(this.messagesUnread)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.ac(tt),o.ac(nt),o.ac(it),o.ac(ot))},e.\u0275prov=Object(o.Mb)({factory:function(){return new e(Object(o.ac)(tt),Object(o.ac)(nt),Object(o.ac)(it),Object(o.ac)(ot))},token:e,providedIn:"root"}),e}(),st=function(){var e=function(){function e(t){_classCallCheck(this,e),this.chatService=t,this.messageList=[]}return _createClass(e,[{key:"onKeydownHandler",value:function(e){console.log(e),this.chatOpened&&this.close()}},{key:"ngOnInit",value:function(){this.subscribeToMessages(),this.subscribeToToggleChat()}},{key:"ngOnDestroy",value:function(){this.chatMessageSubscription&&this.chatMessageSubscription.unsubscribe(),this.chatToggleSubscription&&this.chatToggleSubscription.unsubscribe()}},{key:"eventKeyPress",value:function(e){e&&13===e.keyCode&&this.sendMessage()}},{key:"sendMessage",value:function(){this.chatService.sendMessage(this.message),this.message=""}},{key:"scrollToBottom",value:function(){var e=this;setTimeout((function(){try{e.chatScroll.nativeElement.scrollTop=e.chatScroll.nativeElement.scrollHeight}catch(t){}}),20)}},{key:"close",value:function(){this.chatService.toggleChat()}},{key:"subscribeToMessages",value:function(){var e=this;this.chatMessageSubscription=this.chatService.messagesObs.subscribe((function(t){e.messageList=t}))}},{key:"subscribeToToggleChat",value:function(){var e=this;this.chatToggleSubscription=this.chatService.toggleChatObs.subscribe((function(t){e.chatOpened=t,e.chatOpened&&(e.scrollToBottom(),setTimeout((function(){e.chatInput.nativeElement.focus()})))}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.Qb(rt))},e.\u0275cmp=o.Kb({type:e,selectors:[["chat-component"]],viewQuery:function(e,t){var n;1&e&&(o.Pc(A,!0),o.Pc(D,!0)),2&e&&(o.wc(n=o.fc())&&(t.chatScroll=n.first),o.wc(n=o.fc())&&(t.chatInput=n.first))},hostBindings:function(e,t){1&e&&o.ec("keydown.escape",(function(e){return t.onKeydownHandler(e)}),!1,o.zc)},inputs:{lightTheme:"lightTheme"},decls:17,vars:4,consts:[["id","chatContainer"],["id","chatComponent"],["id","chatToolbar"],["mat-icon-button","","id","closeButton",3,"click"],["matTooltip","Close","color","warn"],[1,"message-wrap"],["chatScroll",""],["class","message",3,"ngClass",4,"ngFor","ngForOf"],["id","messageInput"],["placeholder","Send a message","autocomplete","off","id","chatInput",3,"ngModel","keypress","ngModelChange"],["chatInput",""],["mat-mini-fab","","id","sendButton",3,"click"],["matTooltip","Send"],[1,"message",3,"ngClass"],[1,"user-img",3,"src"],[1,"msg-detail"],[1,"msg-info"],[1,"msg-content"],[1,"triangle"],[1,"text",3,"innerHTML"]],template:function(e,t){1&e&&(o.Wb(0,"div",0),o.Wb(1,"div",1),o.Wb(2,"div",2),o.Wb(3,"span"),o.Kc(4," CHAT"),o.Vb(),o.Wb(5,"button",3),o.ec("click",(function(){return t.close()})),o.Wb(6,"mat-icon",4),o.Kc(7,"highlight_off"),o.Vb(),o.Vb(),o.Vb(),o.Wb(8,"div",5,6),o.Ic(10,L,10,6,"div",7),o.Vb(),o.Wb(11,"div",8),o.Wb(12,"input",9,10),o.ec("keypress",(function(e){return t.eventKeyPress(e)}))("ngModelChange",(function(e){return t.message=e})),o.Vb(),o.Wb(14,"button",11),o.ec("click",(function(){return t.sendMessage()})),o.Wb(15,"mat-icon",12),o.Kc(16,"send"),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Vb()),2&e&&(o.Cb(1),o.Gb("chatComponentLight",t.lightTheme),o.Cb(9),o.pc("ngForOf",t.messageList),o.Cb(2),o.pc("ngModel",t.message))},directives:function(){return[l.a,u.a,d.a,p.l,h.c,h.p,h.s,p.k,f.a]},pipes:function(){return[yt]},styles:["#chatContainer[_ngcontent-%COMP%]{position:absolute;z-index:0;width:100%;height:calc(100% - 20px)}input[_ngcontent-%COMP%]{font-family:Ubuntu,sans-serif}#chatToolbar[_ngcontent-%COMP%]{height:30px;background-color:#3d3d3d;box-sizing:border-box;font-weight:700;font-size:14px;text-align:center;padding-top:4px;border-top-left-radius:6px;border-top-right-radius:6px;color:#fff}#closeButton[_ngcontent-%COMP%]{position:absolute;right:0;top:-5px}#chatComponent[_ngcontent-%COMP%]{background-color:#b8b8b8;position:absolute;z-index:99999;top:0;left:0;right:0;bottom:0;margin:auto;height:calc(100% - 30px);width:calc(100% - 30px);border-radius:20px}.message-wrap[_ngcontent-%COMP%]{padding:0 15px;height:calc(100% - 80px);overflow:auto}.message[_ngcontent-%COMP%]{position:relative;padding:7px 0}.user-img[_ngcontent-%COMP%]{position:absolute;border-radius:45px;width:60px;height:60px;top:15px}.msg-detail[_ngcontent-%COMP%]{width:calc(100% - 65px);display:inline-block}.msg-detail[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:15px}.msg-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.8em;color:#000;font-style:italic}.msg-content[_ngcontent-%COMP%]{position:relative;margin-top:5px;border-radius:5px;padding:8px;color:#000;width:auto;max-width:95%}span.triangle[_ngcontent-%COMP%]{border-radius:2px;height:8px;width:8px;top:12px;display:block;transform:rotate(45deg);position:absolute}.text[_ngcontent-%COMP%]{word-break:break-all}.message.left[_ngcontent-%COMP%]   .msg-detail[_ngcontent-%COMP%]   .msg-info[_ngcontent-%COMP%]{text-align:left}.message.left[_ngcontent-%COMP%]   .msg-detail[_ngcontent-%COMP%]{padding-left:65px}.message.left[_ngcontent-%COMP%]   .user-img[_ngcontent-%COMP%]{left:-5px;border:1px solid #f0f0f094}.message.left[_ngcontent-%COMP%]   .msg-detail[_ngcontent-%COMP%]   .msg-content[_ngcontent-%COMP%]{background-color:#f0f0f0;float:left}.message.left[_ngcontent-%COMP%]   .msg-detail[_ngcontent-%COMP%]   .msg-content[_ngcontent-%COMP%]   span.triangle[_ngcontent-%COMP%]{background-color:#f0f0f0;border-bottom-width:0;border-left-width:0;left:-5px}.message.right[_ngcontent-%COMP%]   .msg-detail[_ngcontent-%COMP%]   .msg-info[_ngcontent-%COMP%]{text-align:right}.message.right[_ngcontent-%COMP%]   .user-img[_ngcontent-%COMP%]{right:-5px;border:1px solid #c8ffe8ab}.message.right[_ngcontent-%COMP%]   .msg-detail[_ngcontent-%COMP%]   .msg-content[_ngcontent-%COMP%]{background-color:#c8ffe8;float:right}.message.right[_ngcontent-%COMP%]   .msg-detail[_ngcontent-%COMP%]   .msg-content[_ngcontent-%COMP%]   span.triangle[_ngcontent-%COMP%]{background-color:#c8ffe8;border-bottom-width:0;border-left-width:0;right:-5px}#messageInput[_ngcontent-%COMP%]{position:absolute;bottom:0;width:100%;background-color:#fff;text-align:center;padding:10px 0;height:30px;border-bottom-left-radius:6px;border-bottom-right-radius:6px}#messageInput[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:90%;height:100%;border:none;outline:0;font-size:14px;margin-left:-6%}#sendButton[_ngcontent-%COMP%]{background-color:#81e9b0;position:absolute;right:10px;top:0;bottom:0;margin:auto;border:1px solid #7ae2a9;box-shadow:none!important}#sendButton[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-left:3px!important;margin-bottom:2px!important}[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#6b6b6b}.chatComponentLight[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#eee!important}"]}),e}(),at=function(){function e(){_classCallCheck(this,e),this.ovSettings={chat:!0,autopublish:!1,toolbarButtons:{video:!0,audio:!0,fullscreen:!0,screenShare:!0,layoutSpeaking:!0,exit:!0}}}return _createClass(e,[{key:"set",value:function(e){this.ovSettings=e}},{key:"isAutoPublish",value:function(){return this.ovSettings.autopublish}},{key:"hasVideo",value:function(){return this.ovSettings.toolbarButtons.video}},{key:"hasScreenSharing",value:function(){return this.ovSettings.toolbarButtons.screenShare}},{key:"hasLayoutSpeaking",value:function(){return this.ovSettings.toolbarButtons.layoutSpeaking}},{key:"hasFullscreen",value:function(){return this.ovSettings.toolbarButtons.fullscreen}},{key:"hasAudio",value:function(){return this.ovSettings.toolbarButtons.audio}},{key:"hasChat",value:function(){return this.ovSettings.chat}},{key:"hasExit",value:function(){return this.ovSettings.toolbarButtons.exit}},{key:"setScreenSharing",value:function(e){this.ovSettings.toolbarButtons.screenShare=e}}]),e}(),ct=function(e){return e.ROOT_CLASS="OT_root",e}({}),lt=function(e){return e.BIG_ELEMENT_CLASS="OV_big",e}({}),ut=function(e){return e.DARK="dark",e.LIGHT="light",e}({}),dt=function(e){return e.FRONT="FRONT",e.BACK="BACK",e}({}),pt=function(){var e=function(){function e(t,n){_classCallCheck(this,e),this.dialogRef=t,this.data=n}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.Qb(g.d),o.Qb(g.a))},e.\u0275cmp=o.Kb({type:e,selectors:[["app-dialog-error"]],decls:5,vars:2,consts:[["mat-dialog-title",""]],template:function(e,t){1&e&&(o.Wb(0,"div"),o.Wb(1,"h1",0),o.Kc(2),o.Vb(),o.Wb(3,"span"),o.Kc(4),o.Vb(),o.Vb()),2&e&&(o.Cb(2),o.Lc(t.data.header),o.Cb(2),o.Mc(" ",t.data.message," "))},directives:[g.e],styles:["h1[_ngcontent-%COMP%]{color:#a30101}"]}),e}(),ht=function(){var e=function(){function e(t){_classCallCheck(this,e),this.dialog=t}return _createClass(e,[{key:"toggleFullscreen",value:function(e){var t=window.document,n=t.getElementById(e);t.fullscreenElement||t.mozFullScreenElement||t.webkitFullscreenElement||t.msFullscreenElement?t.exitFullscreen?t.exitFullscreen():t.msExitFullscreen?t.msExitFullscreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.webkitExitFullscreen&&t.webkitExitFullscreen():n.requestFullscreen?n.requestFullscreen():n.msRequestFullscreen?n.msRequestFullscreen():n.mozRequestFullScreen?n.mozRequestFullScreen():n.webkitRequestFullscreen&&n.webkitRequestFullscreen()}},{key:"getOpenViduAvatar",value:function(){return"https://openvidu.io/img/logos/openvidu_globe_bg_transp_cropped.png"}},{key:"handlerScreenShareError",value:function(e){e&&"SCREEN_SHARING_NOT_SUPPORTED"===e.name?alert("Your browser does not support screen sharing"):e&&"SCREEN_EXTENSION_DISABLED"===e.name&&alert("You need to enable screen sharing extension")}},{key:"getOpenviduLayoutOptions",value:function(){return{maxRatio:1.5,minRatio:.6,fixedRatio:!1,bigClass:lt.BIG_ELEMENT_CLASS,bigPercentage:.85,bigFixedRatio:!1,bigMaxRatio:1.5,bigMinRatio:9/16,bigFirst:!0,animate:!0}}},{key:"generateNickname",value:function(){return"OpenVidu_User"+Math.floor(100*Math.random())}},{key:"isFF",value:function(){return/Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent)}},{key:"isMobile",value:function(){return this.isAndroid()||this.isIos()}},{key:"showErrorMessage",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.dialogRef=this.dialog.open(pt,{data:{header:e,message:t},disableClose:n})}},{key:"closeDialog",value:function(){this.dialogRef.close()}},{key:"getHTMLElementByClassName",value:function(e,t){for(;e&&e!==document.body;){if(e.className.includes(t))return e;e=e.parentElement}return null}},{key:"toggleBigElementClass",value:function(e){var t,n;(null===(t=e)||void 0===t?void 0:t.className.includes(lt.BIG_ELEMENT_CLASS))?null===(n=e)||void 0===n||n.classList.remove(lt.BIG_ELEMENT_CLASS):e.classList.add(lt.BIG_ELEMENT_CLASS)}},{key:"removeAllBigElementClass",value:function(){for(var e=document.getElementsByClassName(lt.BIG_ELEMENT_CLASS);e.length>0;)this.toggleBigElementClass(e[0])}},{key:"isAndroid",value:function(){return/\b(\w*Android\w*)\b/.test(navigator.userAgent)&&/\b(\w*Mobile\w*)\b/.test(navigator.userAgent)}},{key:"isIos",value:function(){return/\b(\w*iOS\w*)\b/.test(navigator.userAgent)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.ac(g.b))},e.\u0275prov=Object(o.Mb)({factory:function(){return new e(Object(o.ac)(g.b))},token:e,providedIn:"root"}),e}(),ft=function(){var e=function(){function e(t){_classCallCheck(this,e),this.loggerSrv=t,this.storage=window.localStorage,this.log=this.loggerSrv.get("StorageService")}return _createClass(e,[{key:"set",value:function(e,t){var n=JSON.stringify({item:t});this.log.d('Storing on localStorage "'+e+'" with value "'+n+'"'),this.storage.setItem(e,n)}},{key:"get",value:function(e){var t,n=JSON.parse(this.storage.getItem(e));return(null===(t=n)||void 0===t?void 0:t.item)?n.item:null}},{key:"clear",value:function(){this.log.d("Clearing localStorage"),this.storage.clear()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.ac(tt))},e.\u0275prov=Object(o.Mb)({factory:function(){return new e(Object(o.ac)(tt))},token:e,providedIn:"root"}),e}(),gt=function(){var e=function(){function e(t,n,i){_classCallCheck(this,e),this.loggerSrv=t,this.utilSrv=n,this.storageSrv=i,this.VIDEO_DEVICE="openviduCallVideoDevice",this.AUDIO_DEVICE="openviduCallAudioDevice",this.OV=null,this.cameras=[],this.microphones=[],this.log=this.loggerSrv.get("DevicesService"),this.OV=new a.OpenVidu}return _createClass(e,[{key:"initDevices",value:function(){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initOpenViduDevices();case 2:this.devices.length>0?this.log.d("Devices found: ",this.devices):this.log.w("No devices found!"),this.resetDevicesArray(),this.hasAudioDeviceAvailable()&&(this.initAudioDevices(),this.micSelected=this.getMicSelected()),this.hasVideoDeviceAvailable()&&(this.initVideoDevices(),this.camSelected=this.cameras.find((function(e){return e.type===dt.FRONT})));case 6:case"end":return e.stop()}}),e,this)})))}},{key:"initOpenViduDevices",value:function(){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.OV.getDevices();case 2:this.devices=e.sent;case 3:case"end":return e.stop()}}),e,this)})))}},{key:"initAudioDevices",value:function(){var e=this;this.devices.filter((function(e){return"audioinput"===e.kind})).forEach((function(t){e.microphones.push({label:t.label,device:t.deviceId})}))}},{key:"initVideoDevices",value:function(){var e=this;this.devices.filter((function(e){return"videoinput"===e.kind})).forEach((function(t,n){var i={label:t.label,device:t.deviceId,type:dt.BACK};e.utilSrv.isMobile()?i.label.toLowerCase().includes(dt.FRONT.toLowerCase())&&(i.type=dt.FRONT):0===n&&(i.type=dt.FRONT),e.cameras.push(i)})),this.log.d("Camera selected",this.camSelected)}},{key:"getCamSelected",value:function(){if(0!==this.cameras.length)return this.getCamFromStorage()||this.camSelected||this.cameras[0];this.log.e("No video devices found!")}},{key:"getCamFromStorage",value:function(){var e,t=this.storageSrv.get(this.VIDEO_DEVICE);if(t=this.getCameraByDeviceField(null===(e=t)||void 0===e?void 0:e.device))return t}},{key:"getMicSelected",value:function(){if(0!==this.microphones.length)return this.getMicFromStogare()||this.micSelected||this.microphones[0];this.log.e("No audio devices found!")}},{key:"getMicFromStogare",value:function(){var e,t=this.storageSrv.get(this.AUDIO_DEVICE);if(t=this.getMicrophoneByDeviceField(null===(e=t)||void 0===e?void 0:e.device))return t}},{key:"setCamSelected",value:function(e){this.camSelected=this.getCameraByDeviceField(e),this.saveCamToStorage(this.camSelected)}},{key:"saveCamToStorage",value:function(e){this.storageSrv.set(this.VIDEO_DEVICE,e)}},{key:"setMicSelected",value:function(e){this.micSelected=this.getMicrophoneByDeviceField(e),this.saveMicToStorage(this.micSelected)}},{key:"saveMicToStorage",value:function(e){this.storageSrv.set(this.AUDIO_DEVICE,e)}},{key:"needUpdateVideoTrack",value:function(e){return this.getCamSelected().device!==e}},{key:"needUpdateAudioTrack",value:function(e){return this.getMicSelected().device!==e}},{key:"getCameras",value:function(){return this.cameras}},{key:"getMicrophones",value:function(){return this.microphones}},{key:"hasVideoDeviceAvailable",value:function(){var e;return!!(null===(e=this.devices)||void 0===e?void 0:e.find((function(e){return"videoinput"===e.kind})))}},{key:"hasAudioDeviceAvailable",value:function(){var e;return!!(null===(e=this.devices)||void 0===e?void 0:e.find((function(e){return"audioinput"===e.kind})))}},{key:"cameraNeedsMirror",value:function(e){var t;return(null===(t=this.getCameraByDeviceField(e))||void 0===t?void 0:t.type)===dt.FRONT}},{key:"areEmptyLabels",value:function(){return!!this.cameras.find((function(e){return""===e.label}))||!!this.microphones.find((function(e){return""===e.label}))}},{key:"getCameraByDeviceField",value:function(e){return this.cameras.find((function(t){return t.device===e||t.label===e}))}},{key:"getMicrophoneByDeviceField",value:function(e){return this.microphones.find((function(t){return t.device===e||t.label===e}))}},{key:"resetDevicesArray",value:function(){this.cameras=[{label:"None",device:null,type:null}],this.microphones=[{label:"None",device:null,type:null}]}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.ac(tt),o.ac(ht),o.ac(ft))},e.\u0275prov=Object(o.Mb)({factory:function(){return new e(Object(o.ac)(tt),Object(o.ac)(ht),Object(o.ac)(ft))},token:e,providedIn:"root"}),e}(),mt=function(){var e=function(){function e(t,n){_classCallCheck(this,e),this.http=t,this.loggerSrv=n,this.log=this.loggerSrv.get("NetworkService"),this.baseHref="/"+(window.location.pathname.split("/")[1]?window.location.pathname.split("/")[1]+"/":"")}return _createClass(e,[{key:"getToken",value:function(e,t,n){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function i(){var o;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!t||!n){i.next=7;break}return i.next=3,this.createSession(e,t,n);case 3:return o=i.sent,i.next=6,this.createToken(o,t,n);case 6:return i.abrupt("return",i.sent);case 7:return i.prev=7,this.log.d("Getting token from backend"),i.next=11,this.http.post(this.baseHref+"call",{sessionId:e}).toPromise();case 11:return i.abrupt("return",i.sent);case 14:if(i.prev=14,i.t0=i.catch(7),404!==i.t0.status){i.next=18;break}throw{status:i.t0.status,message:"Cannot connect with backend. "+i.t0.url+" not found"};case 18:throw i.t0;case 19:case"end":return i.stop()}}),i,this,[[7,14]])})))}},{key:"createSession",value:function(e,t,n){var i=this;return new Promise((function(o,r){var a=JSON.stringify({customSessionId:e}),c={headers:new m.e({Authorization:"Basic "+btoa("OPENVIDUAPP:"+n),"Content-Type":"application/json"})};return i.http.post(t+"/api/sessions",a,c).pipe(Object(E.a)((function(t){return 409===t.status&&o(e),"Unknown Error"===t.statusText&&r({status:401,message:"ERR_CERT_AUTHORITY_INVALID"}),Object(s.a)(t)}))).subscribe((function(e){o(e.id)}))}))}},{key:"createToken",value:function(e,t,n){var i=this;return new Promise((function(o,r){var a=JSON.stringify({session:e}),c={headers:new m.e({Authorization:"Basic "+btoa("OPENVIDUAPP:"+n),"Content-Type":"application/json"})};return i.http.post(t+"/api/tokens",a,c).pipe(Object(E.a)((function(e){return r(e),Object(s.a)(e)}))).subscribe((function(e){i.log.d(e),o(e.token)}))}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.ac(m.b),o.ac(tt))},e.\u0275prov=Object(o.Mb)({factory:function(){return new e(Object(o.ac)(m.b),Object(o.ac)(tt))},token:e,providedIn:"root"}),e}(),vt=function(){var e=function(){function e(t,n,i,r,s,a,c,l){_classCallCheck(this,e),this.networkSrv=t,this.router=n,this.utilsSrv=i,this.remoteUsersService=r,this.oVSessionService=s,this.oVDevicesService=a,this.loggerSrv=c,this.chatService=l,this._session=new o.o,this._publisher=new o.o,this._error=new o.o,this._joinSession=new o.o,this._leaveSession=new o.o,this.compact=!1,this.sidenavMode="side",this.showConfigRoomCard=!0,this.localUsers=[],this.remoteUsers=[],this.isAutoLayout=!1,this.log=this.loggerSrv.get("VideoRoomComponent")}return _createClass(e,[{key:"beforeunloadHandler",value:function(){this.leaveSession()}},{key:"sizeChange",value:function(){this.openviduLayout&&(this.updateOpenViduLayout(),this.checkSizeComponent())}},{key:"ngOnInit",value:function(){var e;return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.lightTheme=(null===(e=this.externalConfig)||void 0===e?void 0:e.getTheme())===ut.LIGHT,this.ovSettings=this.externalConfig?this.externalConfig.getOvSettings():new at,this.ovSettings.setScreenSharing(this.ovSettings.hasScreenSharing()&&!this.utilsSrv.isMobile());case 1:case"end":return t.stop()}}),t,this)})))}},{key:"ngOnDestroy",value:function(){var e;null===(e=this.session)||void 0===e||e.off("reconnecting"),this.remoteUsersService.clean(),this.session=null,this.sessionScreen=null,this.localUsers=[],this.remoteUsers=[],this.openviduLayout=null,this.oVUsersSubscription&&this.oVUsersSubscription.unsubscribe(),this.remoteUsersSubscription&&this.remoteUsersSubscription.unsubscribe(),this.chatSubscription&&this.chatSubscription.unsubscribe()}},{key:"onConfigRoomJoin",value:function(){var e=this;this.hasVideoDevices=this.oVDevicesService.hasVideoDeviceAvailable(),this.hasAudioDevices=this.oVDevicesService.hasAudioDeviceAvailable(),this.showConfigRoomCard=!1,this.subscribeToLocalUsers(),this.subscribeToRemoteUsers(),this.mySessionId=this.oVSessionService.getSessionId(),setTimeout((function(){e.openviduLayout=new Je,e.openviduLayoutOptions=e.utilsSrv.getOpenviduLayoutOptions(),e.openviduLayout.initLayoutContainer(document.getElementById("layout"),e.openviduLayoutOptions),e.checkSizeComponent(),e.joinToSession()}),50)}},{key:"joinToSession",value:function(){this.oVSessionService.initSessions(),this.session=this.oVSessionService.getWebcamSession(),this._session.emit(this.session),this.sessionScreen=this.oVSessionService.getScreenSession(),this.subscribeToStreamCreated(),this.subscribeToStreamDestroyed(),this.subscribeToStreamPropertyChange(),this.subscribeToNicknameChanged(),this.chatService.setChatComponent(this.chatSidenav),this.chatService.subscribeToChat(),this.subscribeToChatComponent(),this.subscribeToReconnection(),this.connectToSession()}},{key:"leaveSession",value:function(){this.log.d("Leaving session..."),this.oVSessionService.disconnect(),this._leaveSession.emit()}},{key:"onNicknameUpdate",value:function(e){this.oVSessionService.setWebcamName(e),this.sendNicknameSignal(e)}},{key:"toggleMic",value:function(){this.oVSessionService.isWebCamEnabled()?this.oVSessionService.publishWebcamAudio(!this.oVSessionService.hasWebcamAudioActive()):this.oVSessionService.publishScreenAudio(!this.oVSessionService.hasScreenAudioActive())}},{key:"toggleCam",value:function(){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!this.oVSessionService.hasWebcamVideoActive(),!this.oVSessionService.areBothConnected()){e.next=3;break}return e.abrupt("return",(this.oVSessionService.publishVideo(t),this.oVSessionService.disableWebcamUser(),void this.oVSessionService.unpublishWebcam()));case 3:if(!this.oVSessionService.isOnlyScreenConnected()){e.next=10;break}return n=this.oVSessionService.hasScreenAudioActive(),e.next=7,this.oVSessionService.publishWebcam();case 7:this.oVSessionService.publishScreenAudio(!1),this.oVSessionService.publishWebcamAudio(n),this.oVSessionService.enableWebcamUser();case 10:this.oVSessionService.publishVideo(t);case 11:case"end":return e.stop()}}),e,this)})))}},{key:"toggleScreenShare",value:function(){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.oVSessionService.areBothConnected()){e.next=2;break}return e.abrupt("return",void this.removeScreen());case 2:if(!this.oVSessionService.isOnlyWebcamConnected()){e.next=5;break}return t=this.initScreenPublisher(),e.abrupt("return",(t.once("accessAllowed",(function(e){t.stream.getMediaStream().getVideoTracks()[0].addEventListener("ended",(function(){i.log.d("Clicked native stop button. Stopping screen sharing"),i.toggleScreenShare()})),i.log.d("ACCESS ALOWED screenPublisher"),i.oVSessionService.enableScreenUser(t),i.oVSessionService.publishScreen(),i.oVSessionService.hasWebcamVideoActive()||(i.oVSessionService.disableWebcamUser(),i.oVSessionService.unpublishWebcam())})),void t.once("accessDenied",(function(e){i.log.w("ScreenShare: Access Denied")}))));case 5:return n=this.oVSessionService.hasScreenAudioActive(),e.next=8,this.oVSessionService.publishWebcam();case 8:this.oVSessionService.publishScreenAudio(!1),this.oVSessionService.publishWebcamAudio(n),this.oVSessionService.enableWebcamUser(),this.removeScreen();case 12:case"end":return e.stop()}}),e,this)})))}},{key:"toggleSpeakerLayout",value:function(){if(!this.oVSessionService.isScreenShareEnabled())return this.isAutoLayout=!this.isAutoLayout,this.log.d("Automatic Layout ",this.isAutoLayout?"Disabled":"Enabled"),this.isAutoLayout?void this.subscribeToSpeechDetection():(this.log.d("Unsubscribe to speech detection"),this.session.off("publisherStartSpeaking"),this.resetAllBigElements(),void this.updateOpenViduLayout());this.log.w("Screen is enabled. Speech detection has been rejected")}},{key:"onReplaceScreenTrack",value:function(e){this.oVSessionService.replaceScreenTrack()}},{key:"checkSizeComponent",value:function(){var e;this.compact=(null===(e=document.getElementById("room-container"))||void 0===e?void 0:e.offsetWidth)<=790,this.sidenavMode=this.compact?"over":"side"}},{key:"onToggleVideoSize",value:function(e){var t,n=e.element;e.resetAll&&this.resetAllBigElements(),this.utilsSrv.toggleBigElementClass(n),(null===(t=e)||void 0===t?void 0:t.connectionId)&&(this.oVSessionService.isMyOwnConnection(e.connectionId)?this.oVSessionService.toggleZoom(e.connectionId):this.remoteUsersService.toggleUserZoom(e.connectionId)),this.updateOpenViduLayout()}},{key:"toolbarMicIconEnabled",value:function(){return this.oVSessionService.isWebCamEnabled()?this.oVSessionService.hasWebcamAudioActive():this.oVSessionService.hasScreenAudioActive()}},{key:"connectToSession",value:function(){var e,t;return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var i,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.externalConfig&&this.externalConfig.hasTokens()&&(this.log.d("Received external tokens from "+this.externalConfig.getComponentName()),i=this.externalConfig.getWebcamToken(),o=(null===(e=this.ovSettings)||void 0===e?void 0:e.hasScreenSharing())?this.externalConfig.getScreenToken():void 0),n.t0=i,n.t0){n.next=6;break}return n.next=5,this.getToken();case 5:n.t0=n.sent;case 6:if(i=n.t0,n.t1=!o&&(null===(t=this.ovSettings)||void 0===t?void 0:t.hasScreenSharing()),!n.t1){n.next=12;break}return n.next=11,this.getToken();case 11:o=n.sent;case 12:if(n.t2=i||o,!n.t2){n.next=19;break}return n.next=16,this.connectBothSessions(i,o);case 16:this.oVSessionService.areBothConnected()?(this.oVSessionService.publishWebcam(),this.oVSessionService.publishScreen()):this.oVSessionService.isOnlyScreenConnected()?this.oVSessionService.publishScreen():this.oVSessionService.publishWebcam(),this._joinSession.emit(),this.updateOpenViduLayout();case 19:case"end":return n.stop()}}),n,this)})))}},{key:"connectBothSessions",value:function(e,t){var n,o;return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function i(){var r=this;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,this.oVSessionService.connectWebcamSession(e);case 3:return i.next=5,this.oVSessionService.connectScreenSession(t);case 5:this.localUsers[0].getStreamManager().on("streamPlaying",(function(){r.localUsers[0].getStreamManager().videos[0].video.parentElement.classList.remove("custom-class")})),i.next=11;break;case 8:i.prev=8,i.t0=i.catch(0),this._error.emit({error:i.t0.error,messgae:i.t0.message,code:i.t0.code,status:i.t0.status}),this.log.e("There was an error connecting to the session:",i.t0.code,i.t0.message),this.utilsSrv.showErrorMessage("There was an error connecting to the session:",(null===(n=i.t0)||void 0===n?void 0:n.error)||(null===(o=i.t0)||void 0===o?void 0:o.message));case 11:case"end":return i.stop()}}),i,this,[[0,8]])})))}},{key:"subscribeToStreamCreated",value:function(){var e=this;this.session.on("streamCreated",(function(t){if(!e.oVSessionService.isMyOwnConnection(t.stream.connection.connectionId)){var n=e.session.subscribe(t.stream,void 0);e.remoteUsersService.add(t,n),e.sendNicknameSignal(e.oVSessionService.getWebcamUserName(),t.stream.connection)}}))}},{key:"subscribeToStreamDestroyed",value:function(){var e=this;this.session.on("streamDestroyed",(function(t){e.remoteUsersService.removeUserByConnectionId(t.stream.connection.connectionId)}))}},{key:"emitPublisher",value:function(e){this._publisher.emit(e)}},{key:"subscribeToStreamPropertyChange",value:function(){var e=this;this.session.on("streamPropertyChanged",(function(t){e.oVSessionService.isMyOwnConnection(t.stream.connection.connectionId)||"videoActive"===t.changedProperty&&e.remoteUsersService.updateUsers()}))}},{key:"subscribeToNicknameChanged",value:function(){var e=this;this.session.on("signal:nicknameChanged",(function(t){var n=t.from.connectionId;if(!e.oVSessionService.isMyOwnConnection(n)){var i=JSON.parse(t.data).nickname;e.remoteUsersService.updateNickname(n,i)}}))}},{key:"subscribeToSpeechDetection",value:function(){var e=this;this.log.d("Subscribe to speech detection",this.session),this.session.on("publisherStartSpeaking",(function(t){var n=e.remoteUsersService.someoneIsSharingScreen();if(!e.oVSessionService.isScreenShareEnabled()&&!n){var i=e.utilsSrv.getHTMLElementByClassName(t.connection.stream.streamManager.videos[0].video,ct.ROOT_CLASS);e.resetAllBigElements(),e.remoteUsersService.setUserZoom(t.connection.connectionId,!0),e.onToggleVideoSize({element:i})}}))}},{key:"removeScreen",value:function(){this.oVSessionService.disableScreenUser(),this.oVSessionService.unpublishScreen()}},{key:"subscribeToChatComponent",value:function(){var e=this;this.chatSubscription=this.chatService.toggleChatObs.subscribe((function(t){e.updateOpenViduLayout(e.externalConfig?300:0)}))}},{key:"subscribeToReconnection",value:function(){var e=this;this.session.on("reconnecting",(function(){e.log.w("Connection lost: Reconnecting"),e.isConnectionLost=!0,e.utilsSrv.showErrorMessage("Connection Problem","Oops! Trying to reconnect to the session ...",!0)})),this.session.on("reconnected",(function(){e.log.w("Connection lost: Reconnected"),e.isConnectionLost=!1,e.utilsSrv.closeDialog()})),this.session.on("sessionDisconnected",(function(t){"networkDisconnect"===t.reason&&(e.utilsSrv.closeDialog(),e.leaveSession())}))}},{key:"initScreenPublisher",value:function(){var e=Xe.SCREEN,t=!(this.oVSessionService.isWebCamEnabled()&&this.oVSessionService.hasWebcamVideoActive())&&this.oVSessionService.hasWebcamAudioActive(),n=this.oVSessionService.createProperties(e,void 0,!0,t,!1);try{return this.oVSessionService.initScreenPublisher(void 0,n)}catch(i){this.log.e(i),this.utilsSrv.handlerScreenShareError(i)}}},{key:"getToken",value:function(){var e,t;return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.log.d("Generating tokens..."),n.prev=1,n.next=4,this.networkSrv.getToken(this.mySessionId,null===(e=this.externalConfig)||void 0===e?void 0:e.getOvServerUrl(),null===(t=this.externalConfig)||void 0===t?void 0:t.getOvSecret());case 4:return n.abrupt("return",n.sent);case 7:n.prev=7,n.t0=n.catch(1),this._error.emit({error:n.t0.error,messgae:n.t0.message,code:n.t0.code,status:n.t0.status}),this.log.e("There was an error getting the token:",n.t0.status,n.t0.message),this.utilsSrv.showErrorMessage("There was an error getting the token:",n.t0.error||n.t0.message);case 10:case"end":return n.stop()}}),n,this,[[1,7]])})))}},{key:"sendNicknameSignal",value:function(e,t){var n={data:JSON.stringify({nickname:e}),type:"nicknameChanged",to:t?[t]:void 0};this.session.signal(n)}},{key:"updateOpenViduLayout",value:function(e){var t=this;if(this.openviduLayout){if(!e)return void this.openviduLayout.updateLayout();setTimeout((function(){t.openviduLayout.updateLayout()}),e)}}},{key:"resetAllBigElements",value:function(){this.utilsSrv.removeAllBigElementClass(),this.remoteUsersService.resetUsersZoom(),this.oVSessionService.resetUsersZoom()}},{key:"subscribeToLocalUsers",value:function(){var e=this;this.oVUsersSubscription=this.oVSessionService.OVUsers.subscribe((function(t){e.localUsers=t,e.updateOpenViduLayout()}))}},{key:"subscribeToRemoteUsers",value:function(){var e=this;this.remoteUsersSubscription=this.remoteUsersService.remoteUsers.subscribe((function(t){e.remoteUsers=_toConsumableArray(t),e.updateOpenViduLayout()}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.Qb(mt),o.Qb(v.e),o.Qb(ht),o.Qb(it),o.Qb(nt),o.Qb(gt),o.Qb(tt),o.Qb(rt))},e.\u0275cmp=o.Kb({type:e,selectors:[["app-video-room"]],viewQuery:function(e,t){var n;1&e&&(o.Pc(j,!0),o.Pc(N,!0)),2&e&&(o.wc(n=o.fc())&&(t.chatComponent=n.first),o.wc(n=o.fc())&&(t.chatSidenav=n.first))},hostBindings:function(e,t){1&e&&o.ec("beforeunload",(function(){return t.beforeunloadHandler()}),!1,o.Ac)("resize",(function(){return t.sizeChange()}),!1,o.Ac)},inputs:{externalConfig:"externalConfig"},outputs:{_session:"_session",_publisher:"_publisher",_error:"_error",_joinSession:"_joinSession",_leaveSession:"_leaveSession"},decls:1,vars:1,consts:[["id","videoRoomNavBar",3,"boundsLight",4,"ngIf"],["id","videoRoomNavBar"],[3,"ovSettings","externalConfig","join","leaveSession","publisherCreated",4,"ngIf"],[4,"ngIf"],[3,"ovSettings","externalConfig","join","leaveSession","publisherCreated"],["class","reconnecting-container",4,"ngIf"],[3,"lightTheme","compact","mySessionId","ovSettings","hasVideoDevices","hasAudioDevices","isWebcamVideoEnabled","isWebcamAudioEnabled","isScreenEnabled","isAutoLayout","isConnectionLost","camButtonClicked","micButtonClicked","screenShareClicked","layoutButtonClicked","leaveSessionButtonClicked"],["id","room-container","fullscreen","",1,"sidenav-container"],["position","end","class","sidenav-chat","fixedInViewport","true","fixedTopGap","40","fixedBottomGap","0",3,"mode","boundsLight",4,"ngIf"],[1,"sidenav-main"],["id","layout",1,"bounds"],["class","OT_root OT_publisher custom-class","id","localUser",3,"display",4,"ngFor","ngForOf"],["class","OT_root OT_publisher custom-class","id","remoteUsers",3,"display",4,"ngFor","ngForOf"],[3,"lightTheme","participants"],[1,"reconnecting-container"],["position","end","fixedInViewport","true","fixedTopGap","40","fixedBottomGap","0",1,"sidenav-chat",3,"mode"],["sidenav",""],[3,"lightTheme"],["chatComponent",""],["id","localUser",1,"OT_root","OT_publisher","custom-class"],[3,"user","videoSizeBig","nicknameClicked","replaceScreenTrackClicked","toggleVideoSizeClicked"],["id","remoteUsers",1,"OT_root","OT_publisher","custom-class"],[3,"user","videoSizeBig","toggleVideoSizeClicked"]],template:function(e,t){1&e&&o.Ic(0,q,3,4,"div",0),2&e&&o.pc("ngIf",!!t.ovSettings)},directives:function(){return[p.m,Vt,Lt,b.b,b.c,p.l,Nt,b.a,st,At]},pipes:function(){return[Ct]},styles:["#videoRoomNavBar[_ngcontent-%COMP%]{min-width:400px;background-color:#494949;height:100%}.stream-container[_ngcontent-%COMP%]{padding:0}.reconnecting-container[_ngcontent-%COMP%]{width:100%;height:100%;z-index:1000;background-color:#000;opacity:80%;position:absolute}.sidenav-container[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;min-height:-webkit-fill-available;overflow:hidden}.sidenav-chat[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:450px;background-color:#494949;border-left:none;position:absolute}.mat-drawer-container[_ngcontent-%COMP%]{background-color:#494949}.sidenav-main[_ngcontent-%COMP%]{height:100%;overflow:hidden;min-height:-webkit-fill-available;min-height:-moz-available}.bounds[_ngcontent-%COMP%]{background-color:#494949;position:absolute;left:0;right:0;top:40px;bottom:25px;min-width:400px!important;width:inherit}.boundsLight[_ngcontent-%COMP%]{background-color:#dfdfdf!important}.custom-class[_ngcontent-%COMP%]{min-height:0!important}.OT_root[_ngcontent-%COMP%], .OT_root[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{color:#fff;margin:0;padding:0;border:0;font-size:100%;font-family:Ubuntu,sans-serif;vertical-align:baseline}.OT_dialog-centering[_ngcontent-%COMP%]{display:table;width:100%;height:100%}.OT_dialog-centering-child[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle}.OT_dialog[_ngcontent-%COMP%]{position:relative;box-sizing:border-box;margin-right:auto;margin-left:auto;color:#fff;font-family:Ubuntu,sans-serif;font-size:13px;line-height:1.4}.OT_dialog[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{font-family:inherit;box-sizing:inherit}.OT_closeButton[_ngcontent-%COMP%]{color:#999;cursor:pointer;font-size:32px;line-height:36px;position:absolute;right:18px;top:0}.OT_dialog-messages[_ngcontent-%COMP%]{text-align:center}.OT_dialog-messages-main[_ngcontent-%COMP%]{margin-bottom:36px;line-height:36px;font-weight:300;font-size:24px}.OT_dialog-messages-minor[_ngcontent-%COMP%]{margin-bottom:18px;font-size:13px;line-height:18px;color:#a4a4a4}.OT_dialog-messages-minor[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#fff}.OT_dialog-actions-card[_ngcontent-%COMP%]{display:inline-block}.OT_dialog-button-title[_ngcontent-%COMP%]{margin-bottom:18px;line-height:18px;font-weight:300;text-align:center;font-size:14px;color:#999}.OT_dialog-button-title[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#999}.OT_dialog-button-title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .OT_dialog-button-title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active, .OT_dialog-button-title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:link{color:#02a1de}.OT_dialog-button-title[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#fff;font-weight:100;display:block}.OT_dialog-button[_ngcontent-%COMP%]{display:inline-block;margin-bottom:18px;padding:0 1em;background-color:#1ca3dc;text-align:center;cursor:pointer}.OT_dialog-button[_ngcontent-%COMP%]:disabled{cursor:not-allowed;opacity:.5}.OT_dialog-button-large[_ngcontent-%COMP%]{line-height:36px;padding-top:9px;padding-bottom:9px;font-weight:100;font-size:24px}.OT_dialog-button-small[_ngcontent-%COMP%]{line-height:18px;padding-top:9px;padding-bottom:9px;background-color:#444;color:#999;font-size:16px}.OT_dialog-progress-bar[_ngcontent-%COMP%]{display:inline-block;width:100%;margin-top:5px;margin-bottom:41px;border:1px solid #4e4e4e;height:8px}.OT_dialog-progress-bar-fill[_ngcontent-%COMP%]{height:100%;background-color:#29a4da}.OT_dialog-plugin-upgrading[_ngcontent-%COMP%]   .OT_dialog-plugin-upgrade-percentage[_ngcontent-%COMP%]{line-height:54px;font-size:48px;font-weight:100}.OT_centered[_ngcontent-%COMP%]{position:fixed;left:50%;top:50%;margin:0}.OT_dialog-hidden[_ngcontent-%COMP%]{display:none}.OT_dialog-button-block[_ngcontent-%COMP%]{display:block}.OT_dialog-no-natural-margin[_ngcontent-%COMP%]{margin-bottom:0}.OT_publisher[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]{position:relative;min-width:48px;min-height:48px}.OT_publisher[_ngcontent-%COMP%]   .OT_video-element[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_video-element[_ngcontent-%COMP%]{display:block;position:absolute;width:100%;height:100%;transform-origin:0 0}.OT_publisher.OT_mirrored[_ngcontent-%COMP%]   .OT_video-element[_ngcontent-%COMP%]{transform:scale(-1,1);transform-origin:50% 50%}.OT_subscriber_error[_ngcontent-%COMP%]{background-color:#000;color:#fff;text-align:center}.OT_subscriber_error[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{padding:20px}.OT_publisher[_ngcontent-%COMP%]   .OT_archiving[_ngcontent-%COMP%], .OT_publisher[_ngcontent-%COMP%]   .OT_archiving-light-box[_ngcontent-%COMP%], .OT_publisher[_ngcontent-%COMP%]   .OT_archiving-status[_ngcontent-%COMP%], .OT_publisher[_ngcontent-%COMP%]   .OT_bar[_ngcontent-%COMP%], .OT_publisher[_ngcontent-%COMP%]   .OT_name[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_archiving[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_archiving-light-box[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_archiving-status[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_bar[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_name[_ngcontent-%COMP%]{-ms-box-sizing:border-box;box-sizing:border-box;top:0;left:0;right:0;display:block;height:34px;position:absolute}.OT_publisher[_ngcontent-%COMP%]   .OT_bar[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_bar[_ngcontent-%COMP%]{background:rgba(0,0,0,.4)}.OT_publisher[_ngcontent-%COMP%]   .OT_edge-bar-item[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_edge-bar-item[_ngcontent-%COMP%]{z-index:1;transition-property:top,bottom,opacity;transition-duration:.5s;transition-timing-function:ease-in}.OT_publisher[_ngcontent-%COMP%]   .OT_name[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_name[_ngcontent-%COMP%]{background-color:transparent;color:#fff;font-size:15px;line-height:34px;font-weight:400;padding:0 4px 0 36px}.OT_publisher[_ngcontent-%COMP%]   .OT_archiving-status[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_archiving-status[_ngcontent-%COMP%]{background:rgba(0,0,0,.4);top:auto;bottom:0;left:34px;padding:0 4px;color:rgba(255,255,255,.8);font-size:15px;line-height:34px;font-weight:400}.OT_micro[_ngcontent-%COMP%]   .OT_archiving-status[_ngcontent-%COMP%], .OT_micro[_ngcontent-%COMP%]:hover   .OT_archiving-status[_ngcontent-%COMP%], .OT_mini[_ngcontent-%COMP%]   .OT_archiving-status[_ngcontent-%COMP%], .OT_mini[_ngcontent-%COMP%]:hover   .OT_archiving-status[_ngcontent-%COMP%]{display:none}.OT_publisher[_ngcontent-%COMP%]   .OT_archiving-light-box[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_archiving-light-box[_ngcontent-%COMP%]{background:rgba(0,0,0,.4);top:auto;bottom:0;right:auto;width:34px;height:34px}.OT_archiving-light[_ngcontent-%COMP%]{width:7px;height:7px;border-radius:30px;position:absolute;top:14px;left:14px;background-color:#575757;box-shadow:0 0 5px 1px #575757}.OT_archiving-light.OT_active[_ngcontent-%COMP%]{background-color:#970d13;animation:1.3s ease-in infinite OT_pulse;-webkit-animation:1.3s ease-in OT_pulse;-moz-animation:1.3s ease-in infinite OT_pulse;-webkit-animation-iteration-count:infinite}@-webkit-keyframes OT_pulse{0%,100%,80%{box-shadow:0 0 0 0 #c70019}30%,50%{box-shadow:0 0 5px 1px #c70019}}.OT_bar.OT_mode-mini[_ngcontent-%COMP%], .OT_bar.OT_mode-mini-auto[_ngcontent-%COMP%], .OT_mini[_ngcontent-%COMP%]   .OT_bar[_ngcontent-%COMP%]{bottom:0;height:auto}.OT_mini[_ngcontent-%COMP%]   .OT_name.OT_mode-auto[_ngcontent-%COMP%], .OT_mini[_ngcontent-%COMP%]   .OT_name.OT_mode-off[_ngcontent-%COMP%], .OT_mini[_ngcontent-%COMP%]   .OT_name.OT_mode-on[_ngcontent-%COMP%], .OT_mini[_ngcontent-%COMP%]:hover   .OT_name.OT_mode-auto[_ngcontent-%COMP%]{display:none}.OT_publisher[_ngcontent-%COMP%]   .OT_name[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_name[_ngcontent-%COMP%]{left:10px;right:37px;height:34px;padding-left:0}.OT_publisher[_ngcontent-%COMP%]   .OT_mute[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_mute[_ngcontent-%COMP%]{border:none;cursor:pointer;display:block;position:absolute;text-align:center;text-indent:-9999em;background-color:transparent;background-repeat:no-repeat;right:0;top:0;border-left:1px solid rgba(255,255,255,.2);height:36px;width:37px}.OT_mini[_ngcontent-%COMP%]   .OT_mute[_ngcontent-%COMP%], .OT_publisher.OT_mini[_ngcontent-%COMP%]   .OT_mute.OT_mode-auto.OT_mode-on-hold[_ngcontent-%COMP%], .OT_subscriber.OT_mini[_ngcontent-%COMP%]   .OT_mute.OT_mode-auto.OT_mode-on-hold[_ngcontent-%COMP%]{top:50%;left:50%;right:auto;margin-top:-18px;margin-left:-18.5px;border-left:none}.OT_publisher[_ngcontent-%COMP%]   .OT_mute[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAcCAMAAAC02HQrAAAA1VBMVEUAAAD3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pn3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pn3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj39/j3+Pj3+Pn4+Pk/JRMlAAAAQ3RSTlMABAUHCQoLDhAQERwdHiAjLjAxOD9ASFBRVl1mbnZ6fH2LjI+QkaWqrrC1uLzAwcXJycrL1NXj5Ofo6u3w9fr7/P3+d4M3+QAAAQBJREFUGBlVwYdCglAABdCLlr5Unijm3hMUtBzlBLSr//9JgUToOQgVJgceJgU8aHgMeA38K50ZOpcQmTPwcyXn+JM8M3JJIqQypiIkeXelTyIkGZPwKS1NMia1lgKTVkaE3oQQGYsmHNqSMWnTgUFbMiZtGlD2dpaxrL1XgM0i4ZK8MeAmFhsAs29MGZniawagS63oMOQUNXYB5D0D1RMDpyoMLw/fiE2og/V+PVDR5AiBl0/2Uwik+vx4xV3a5G5Ye68Nd1czjUjZckm6VhmPciRzeCZICjwTJAViQq+3e+St167rAoHK8sLYZVkBYPCZAZ/eGa+2R5LH7Wrc0YFf/O9J3yBDFaoAAAAASUVORK5CYII=);background-position:9px 5px}.OT_publisher[_ngcontent-%COMP%]   .OT_mute.OT_active[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAdCAYAAABFRCf7AAADcElEQVRIiaWVXWhcRRTHf7NNd2aDtUKMIjTpg4ufFIuiUOmDEWm0Vi3VYhXRqIggQh4sWJFSig9+oOhTKSpIRUWMIBIr2kptoTbgU6ooxCiIjR+14kcJmf9sNceHnd3ebnc3Uv9wuXfOzPzmnDMz5zozGwdWAbc65w5RUJQ8cC2wDJgFJioh/MJCMrNxq2vOzK4HmIvRRemxKP0RJWt53o7S+d2Yzsx6gQ+AIUDAnUqpBLzXZd4RYFUlhB/bdZacc3PAOmAcCMC7wfvFwLNdoAPAyx09bXyYWRl4E7gDmAdGlNKFwLYu8GolhO9O87RJd64GbMrgEvB68P4osMWdXLtVV7czlooNpVRWSs8DO7NpR/B+3rBHsvetCgtCMTxwQCm9BbyQrc8F7/uBex3uRCeXO0PrUZ4NfKyUPgWeyj3bg/crDNsIRGwBaJQGorQ3Svdn2wHgc2BUKb0DPJHtjwfvbwRucc7tz+N+i9LFUdoXpfVN36I0CVwBTFI/q9e1LPxT8P4qYEdu70q12mYzWw1MYQzjeJF6zq+shHC4B7jklOBPP/TzSunh4P0DwKvAfb5c9krpe+CcwsEoZdbhEvBM9wxRAl5RShcA9wAngE3B+8tLpdLuwrhp4MNmK0pfRWkySr7NXS8+L5nZbWZWy/Vin1IaitJnUTqvwevJ71lgSSWEFKUfHG7Q2m/xqFJaGry/GXgfGPLl8mJgrXPur2JoUC8Qy3OpG+sAbGhEKT0ErAWOA6uBPWbW1wr9BOgFbgKezot0kAPYqJQA1gC/A9cA+82svzksSn1R+jNKX0SpnM/e1x3yqig92JhrZivM7FjO8bSZLSuCR/Ok16K0KMNHojQWpYko7Y7S1igN5PE3ROl4lNaZ2UVmNpPBU01orvZvZPCeKFXbBR+lEKVtUapFaSZKg9njqpl9aWYTrmXCImA7sCWb9lK/jj9TrwkrgA1AH3AQuKsSwkzbrLfxpgpsBtYDxf/R3xm2ExirhNCuHHZXTsmRwiat+S/zSt06eysVA/4pmGr/G3qm6ik28v29FKgCg8BS6pvS0KNRGgZ+Bb4FpsxsOkfUlMuwDcBWYOUZOHYM2AU8WQmhBifDv70O7PjX7KZ+4G7g3FM8zd6uBIaBy4AqxnIcZwFLCovPAhE4Sj38b4BDwEeVEFKD9S94Khjn486v3QAAAABJRU5ErkJggg==);background-position:9px 4px}.OT_subscriber[_ngcontent-%COMP%]   .OT_mute[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAATCAYAAAB7u5a2AAABx0lEQVQ4jaWUv48NURiGn3ONmCs32ZBd28ht1gqyZAkF21ylQkEiSp2ehpDlD1BoFGqqVdJohYKI7MaPxMoVNghCWMF+7ybLUewnOXfcMWO9yeQ857zne8+XmZOBGjJpr0kvTIomvTZpS526UCO4DUwD64FjwCFgqZnnR+oc8LfgzKQ73vGsr42ZtGjSQFV9o8KfBCacZwCaef4YmAf2rzjcpN3A2WSpm/AssKcqPDNpDBjs410CViXzTwk/A7b1C4wxDgOngAsZcAXY2buDfp/6S4F3lDS8DjgBzDWAjX/Y/e/QgYS/AhsKHa+OMQ6GEJ4Cj4BOAxgq6aCowyZtdf4OtAr+FHDO+R4wWnVbihr3cQnICt4boO38GWj9a/icjwOACt4m4K3zEPA+AxaAtTWCnwN3lzHkEL8V/OPAGud9wK2GF9XR1Wae/1zG2AI+pGYI4VUIoRtjHAc2A9cz4LRPevYCZ+i9/4sJt4GXJU10gaPAzdI2TTro/5Tfz8XEe2LSZGmxq/SDNvP8BnA5WRrx4BwYBe6vONx1EnjovGvBLAAd4Adwuyq8UiaNmDTvr+a8SQ9MuvbfwckBHZPe+QEfTdpep+4XZmPBHiHgz74AAAAASUVORK5CYII=);background-position:8px 7px}.OT_subscriber[_ngcontent-%COMP%]   .OT_mute.OT_active[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAUCAYAAACXtf2DAAACtklEQVQ4jZ2VSYiURxTHf+/T9Nc9iRrBuYySmIsXUU9iFMEFERRBvAjJLUQi5ioiHvSScfTmgqC4XAT1ZIgLuJHkICaaQAgKI2hAUBT30bjUq7bbv4eukXK029F3+eqtv/fqK6qQdEnSNUmT6CDB/bvgfjO4N9zj2RD8007xg1IABkwEzkma0qb4PGAPMBZYLtSD8eNwAEjqTlNI0gNJM4YU7w7ut4O7gvuhZFsR3C8NC5BBLiTIY0mzM8AvqbiC++pk+zLpE95XuwAws3vAQuBPYDRwWtL84P4tsDSLv5oaug4EYOawAMF9jMdoLxqNZcDvQA04UVYqL4G/svj7AF21mhJscrvCksYBFO7xc2AAGGg2mrdjvf4rcAyomNn+slLZmUEGBgsYdh945xZJmgvckDSrEJpK6ySBgV6q12O8ABwGPjGzfWWlsjdN9rpjoSfA+DYDXARGAksK4Is3XC1Ub4z1f4CDQGFmu6tleQSYk0U+p7WVeefLJc00s4fAeWB6Qeunvj0m2ugx9gO7kmlrtSxvBfcy6fXUZS6rgG/S+jLQUwCVNmMC9HqM14EtSe+rluWazN8YEv8IqKZ1E1qnaIDO0ucx3gX6kv6TpM3AM+D/IbGjgP60/gq4WQA33gMA2OQxPgHWJX1ttSwL4FAeZGYLgB2SasBs4A8L7qOBf9M0uXQB3a+TMYSmVctyDrA9mfcBK82smSdKWgCcAaa1bTm4fxbc/8uuCQX3RanAD5Ka6Wo5IGnE0HxJPZ03pQX5Org3MsD3AO5xXLPZXJ9BjkrqdFg6QjZkgG3Jtsw93pG0VFI9QU5K6voYQBHcTydAfwheBI9HgvvPAJIWS3qeIL9JGvUxkO7gfi1BrqTvwkG/pPmSnibIqTzXPgAyEVgBjAEu1qrVPbk/PVTHgb/NbPGg/RVIzOQqzSTBaQAAAABJRU5ErkJggg==);background-position:7px 7px}.OT_publisher[_ngcontent-%COMP%]   .OT_edge-bar-item.OT_mode-auto[_ngcontent-%COMP%], .OT_publisher[_ngcontent-%COMP%]   .OT_edge-bar-item.OT_mode-mini-auto[_ngcontent-%COMP%], .OT_publisher[_ngcontent-%COMP%]   .OT_edge-bar-item.OT_mode-off[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_edge-bar-item.OT_mode-auto[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_edge-bar-item.OT_mode-mini-auto[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_edge-bar-item.OT_mode-off[_ngcontent-%COMP%]{top:-25px;opacity:0}.OT_publisher[_ngcontent-%COMP%]   .OT_edge-bar-item.OT_mode-off[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_edge-bar-item.OT_mode-off[_ngcontent-%COMP%]{display:none}.OT_mini[_ngcontent-%COMP%]   .OT_mute.OT_mode-auto[_ngcontent-%COMP%], .OT_publisher[_ngcontent-%COMP%]   .OT_mute.OT_mode-mini-auto[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_mute.OT_mode-mini-auto[_ngcontent-%COMP%]{top:50%}.OT_publisher[_ngcontent-%COMP%]   .OT_edge-bar-item.OT_edge-bottom.OT_mode-auto[_ngcontent-%COMP%], .OT_publisher[_ngcontent-%COMP%]   .OT_edge-bar-item.OT_edge-bottom.OT_mode-mini-auto[_ngcontent-%COMP%], .OT_publisher[_ngcontent-%COMP%]   .OT_edge-bar-item.OT_edge-bottom.OT_mode-off[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_edge-bar-item.OT_edge-bottom.OT_mode-auto[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_edge-bar-item.OT_edge-bottom.OT_mode-mini-auto[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_edge-bar-item.OT_edge-bottom.OT_mode-off[_ngcontent-%COMP%]{top:auto;bottom:-25px}.OT_publisher[_ngcontent-%COMP%]   .OT_edge-bar-item.OT_mode-auto.OT_mode-on-hold[_ngcontent-%COMP%], .OT_publisher[_ngcontent-%COMP%]   .OT_edge-bar-item.OT_mode-on[_ngcontent-%COMP%], .OT_publisher[_ngcontent-%COMP%]:hover   .OT_edge-bar-item.OT_mode-auto[_ngcontent-%COMP%], .OT_publisher[_ngcontent-%COMP%]:hover   .OT_edge-bar-item.OT_mode-mini-auto[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_edge-bar-item.OT_mode-auto.OT_mode-on-hold[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_edge-bar-item.OT_mode-on[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]:hover   .OT_edge-bar-item.OT_mode-auto[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]:hover   .OT_edge-bar-item.OT_mode-mini-auto[_ngcontent-%COMP%]{top:0;opacity:1}.OT_mini[_ngcontent-%COMP%]   .OT_mute.OT_mode-on[_ngcontent-%COMP%], .OT_mini[_ngcontent-%COMP%]:hover   .OT_mute.OT_mode-auto[_ngcontent-%COMP%], .OT_mute.OT_mode-mini[_ngcontent-%COMP%], .OT_root[_ngcontent-%COMP%]:hover   .OT_mute.OT_mode-mini-auto[_ngcontent-%COMP%]{top:50%}.OT_publisher[_ngcontent-%COMP%]   .OT_edge-bar-item.OT_edge-bottom.OT_mode-on[_ngcontent-%COMP%], .OT_publisher[_ngcontent-%COMP%]:hover   .OT_edge-bar-item.OT_edge-bottom.OT_mode-auto[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_edge-bar-item.OT_edge-bottom.OT_mode-on[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]:hover   .OT_edge-bar-item.OT_edge-bottom.OT_mode-auto[_ngcontent-%COMP%]{top:auto;bottom:0;opacity:1}.OT_root[_ngcontent-%COMP%]   .OT_video-loading[_ngcontent-%COMP%]{position:absolute;z-index:1;width:100%;height:100%;display:none;background-color:rgba(0,0,0,.75)}.OT_root[_ngcontent-%COMP%]   .OT_video-loading[_ngcontent-%COMP%]   .OT_video-loading-spinner[_ngcontent-%COMP%]{background:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0yMCAtMjAgMjQwIDI0MCI+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJhIiB4Mj0iMCIgeTI9IjEiPjxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iI2ZmZiIgc3RvcC1vcGFjaXR5PSIwIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9IjAiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iYiIgeDE9IjEiIHgyPSIwIiB5Mj0iMSI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9IjAiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmZmYiIHN0b3Atb3BhY2l0eT0iLjA4Ii8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImMiIHgxPSIxIiB4Mj0iMCIgeTE9IjEiPjxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iI2ZmZiIgc3RvcC1vcGFjaXR5PSIuMDgiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmZmYiIHN0b3Atb3BhY2l0eT0iLjE2Ii8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImQiIHgyPSIwIiB5MT0iMSI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9Ii4xNiIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI2ZmZiIgc3RvcC1vcGFjaXR5PSIuMzMiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iZSIgeDI9IjEiIHkxPSIxIj48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiNmZmYiIHN0b3Atb3BhY2l0eT0iLjMzIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9Ii42NiIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJmIiB4Mj0iMSIgeTI9IjEiPjxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iI2ZmZiIgc3RvcC1vcGFjaXR5PSIuNjYiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmZmYiLz48L2xpbmVhckdyYWRpZW50PjxtYXNrIGlkPSJnIj48ZyBmaWxsPSJub25lIiBzdHJva2Utd2lkdGg9IjQwIj48cGF0aCBzdHJva2U9InVybCgjYSkiIGQ9Ik04Ni42LTUwYTEwMCAxMDAgMCAwIDEgMCAxMDAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwMCAxMDApIi8+PHBhdGggc3Ryb2tlPSJ1cmwoI2IpIiBkPSJNODYuNiA1MEExMDAgMTAwIDAgMCAxIDAgMTAwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMDAgMTAwKSIvPjxwYXRoIHN0cm9rZT0idXJsKCNjKSIgZD0iTTAgMTAwYTEwMCAxMDAgMCAwIDEtODYuNi01MCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTAwIDEwMCkiLz48cGF0aCBzdHJva2U9InVybCgjZCkiIGQ9Ik0tODYuNiA1MGExMDAgMTAwIDAgMCAxIDAtMTAwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMDAgMTAwKSIvPjxwYXRoIHN0cm9rZT0idXJsKCNlKSIgZD0iTS04Ni42LTUwQTEwMCAxMDAgMCAwIDEgMC0xMDAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwMCAxMDApIi8+PHBhdGggc3Ryb2tlPSJ1cmwoI2YpIiBkPSJNMC0xMDBhMTAwIDEwMCAwIDAgMSA4Ni42IDUwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMDAgMTAwKSIvPjwvZz48L21hc2s+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHg9Ii0yMCIgeT0iLTIwIiBtYXNrPSJ1cmwoI2cpIiBmaWxsPSIjZmZmIi8+PC9zdmc+) no-repeat;position:absolute;width:32px;height:32px;left:50%;top:50%;margin-left:-16px;margin-top:-16px;-webkit-animation:2s linear infinite OT_spin;animation:2s linear infinite OT_spin}@-webkit-keyframes OT_spin{100%{-webkit-transform:rotate(360deg)}}@keyframes OT_spin{100%{transform:rotate(360deg)}}.OT_publisher.OT_loading[_ngcontent-%COMP%]   .OT_video-loading[_ngcontent-%COMP%], .OT_subscriber.OT_loading[_ngcontent-%COMP%]   .OT_video-loading[_ngcontent-%COMP%]{display:block}.OT_video-centering[_ngcontent-%COMP%]{display:table;width:100%;height:100%}.OT_video-container[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle}.OT_video-poster[_ngcontent-%COMP%]{position:absolute;z-index:1;width:100%;height:100%;display:none;opacity:.25;background-repeat:no-repeat;background-image:url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgNDcxIDQ2NCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48bGluZWFyR3JhZGllbnQgaWQ9ImEiIHgyPSIwIiB5Mj0iMSI+PHN0b3Agb2Zmc2V0PSI2Ni42NiUiIHN0b3AtY29sb3I9IiNmZmYiLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZmYiIHN0b3Atb3BhY2l0eT0iMCIvPjwvbGluZWFyR3JhZGllbnQ+PHBhdGggZmlsbD0idXJsKCNhKSIgZD0iTTc5IDMwOGMxNC4yNS02LjUgNTQuMjUtMTkuNzUgNzEtMjkgOS0zLjI1IDI1LTIxIDI1LTIxczMuNzUtMTMgMy0yMmMtMS43NS02Ljc1LTE1LTQzLTE1LTQzLTIuNSAzLTQuNzQxIDMuMjU5LTcgMS0zLjI1LTcuNS0yMC41LTQ0LjUtMTYtNTcgMS4yNS03LjUgMTAtNiAxMC02LTExLjI1LTMzLjc1LTgtNjctOC02N3MuMDczLTcuMzQ2IDYtMTVjLTMuNDguNjM3LTkgNC05IDQgMi41NjMtMTEuNzI3IDE1LTIxIDE1LTIxIC4xNDgtLjMxMi0xLjMyMS0xLjQ1NC0xMCAxIDEuNS0yLjc4IDE2LjY3NS04LjY1NCAzMC0xMSAzLjc4Ny05LjM2MSAxMi43ODItMTcuMzk4IDIyLTIyLTIuMzY1IDMuMTMzLTMgNi0zIDZzMTUuNjQ3LTguMDg4IDQxLTZjLTE5Ljc1IDItMjQgNi0yNCA2czc0LjUtMTAuNzUgMTA0IDM3YzcuNSA5LjUgMjQuNzUgNTUuNzUgMTAgODkgMy43NS0xLjUgNC41LTQuNSA5IDEgLjI1IDE0Ljc1LTExLjUgNjMtMTkgNjItMi43NSAxLTQtMy00LTMtMTAuNzUgMjkuNS0xNCAzOC0xNCAzOC0yIDQuMjUtMy43NSAxOC41LTEgMjIgMS4yNSA0LjUgMjMgMjMgMjMgMjNsMTI3IDUzYzM3IDM1IDIzIDEzNSAyMyAxMzVMMCA0NjRzLTMtOTYuNzUgMTQtMTIwYzUuMjUtNi4yNSAyMS43NS0xOS43NSA2NS0zNnoiLz48L3N2Zz4=);background-size:auto 76%}.OT_fit-mode-cover[_ngcontent-%COMP%]   .OT_video-element[_ngcontent-%COMP%]{-o-object-fit:cover;object-fit:cover}@media only screen and (orientation:portrait){.OT_subscriber.OT_ForceContain.OT_fit-mode-cover[_ngcontent-%COMP%]   .OT_video-element[_ngcontent-%COMP%]{-o-object-fit:contain!important;object-fit:contain!important}}.OT_fit-mode-contain[_ngcontent-%COMP%]   .OT_video-element[_ngcontent-%COMP%]{-o-object-fit:contain;object-fit:contain}.OT_fit-mode-cover[_ngcontent-%COMP%]   .OT_video-poster[_ngcontent-%COMP%]{background-position:center bottom}.OT_fit-mode-contain[_ngcontent-%COMP%]   .OT_video-poster[_ngcontent-%COMP%]{background-position:center}.OT_audio-level-meter[_ngcontent-%COMP%]{position:absolute;width:25%;max-width:224px;min-width:21px;top:0;right:0;overflow:hidden}.OT_audio-level-meter[_ngcontent-%COMP%]:before{content:'';display:block;padding-top:100%}.OT_audio-level-meter__bar[_ngcontent-%COMP%]{position:absolute;width:192%;height:192%;top:-96%;right:-96%;border-radius:50%;background-color:rgba(0,0,0,.8)}.OT_audio-level-meter__audio-only-img[_ngcontent-%COMP%]{position:absolute;top:22%;right:15%;width:40%;opacity:.7;background:url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgNzkgODYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI2ZmZiI+PHBhdGggZD0iTTkuNzU3IDQwLjkyNGMzLjczOC01LjE5MSAxMi43MTEtNC4zMDggMTIuNzExLTQuMzA4IDIuMjIzIDMuMDE0IDUuMTI2IDI0LjU4NiAzLjYyNCAyOC43MTgtMS40MDEgMS4zMDEtMTEuNjExIDEuNjI5LTEzLjM4LTEuNDM2LTEuMjI2LTguODA0LTIuOTU1LTIyLjk3NS0yLjk1NS0yMi45NzV6bTU4Ljc4NSAwYy0zLjczNy01LjE5MS0xMi43MTEtNC4zMDgtMTIuNzExLTQuMzA4LTIuMjIzIDMuMDE0LTUuMTI2IDI0LjU4Ni0zLjYyNCAyOC43MTggMS40MDEgMS4zMDEgMTEuNjExIDEuNjI5IDEzLjM4LTEuNDM2IDEuMjI2LTguODA0IDIuOTU1LTIyLjk3NSAyLjk1NS0yMi45NzV6Ii8+PHBhdGggZD0iTTY4LjY0NyA1OC42Yy43MjktNC43NTMgMi4zOC05LjU2MSAyLjM4LTE0LjgwNCAwLTIxLjQxMi0xNC4xMTUtMzguNzctMzEuNTI4LTM4Ljc3LTE3LjQxMiAwLTMxLjUyNyAxNy4zNTgtMzEuNTI3IDM4Ljc3IDAgNC41NDEuNTE1IDguOTM2IDEuODAyIDEyLjk1IDEuNjk4IDUuMjk1LTUuNTQyIDYuOTkxLTYuNjE2IDIuMDczQzIuNDEgNTUuMzk0IDAgNTEuNzg3IDAgNDguMTAzIDAgMjEuNTM2IDE3LjY4NSAwIDM5LjUgMCA2MS4zMTYgMCA3OSAyMS41MzYgNzkgNDguMTAzYzAgLjcxOC0yLjg5OSA5LjY5My0zLjI5MiAxMS40MDgtLjc1NCAzLjI5My03Ljc1MSAzLjU4OS03LjA2MS0uOTEyeiIvPjxwYXRoIGQ9Ik01LjA4NCA1MS4zODVjLS44MDQtMy43ODIuNTY5LTcuMzM1IDMuMTM0LTcuOTIxIDIuNjM2LS42MDMgNS40ODUgMi4xNSA2LjI4OSA2LjEzMi43OTcgMy45NDgtLjc1MiA3LjQ1Ny0zLjM4OCA3Ljg1OS0yLjU2Ni4zOTEtNS4yMzctMi4zMTgtNi4wMzQtNi4wN3ptNjguODM0IDBjLjgwNC0zLjc4Mi0uNTY4LTcuMzM1LTMuMTMzLTcuOTIxLTIuNjM2LS42MDMtNS40ODUgMi4xNS02LjI4OSA2LjEzMi0uNzk3IDMuOTQ4Ljc1MiA3LjQ1NyAzLjM4OSA3Ljg1OSAyLjU2NS4zOTEgNS4yMzctMi4zMTggNi4wMzQtNi4wN3ptLTIuMDM4IDguMjg4Yy0uOTI2IDE5LjY1OS0xNS4xMTIgMjQuNzU5LTI1Ljg1OSAyMC40NzUtNS40MDUtLjYwNi0zLjAzNCAxLjI2Mi0zLjAzNCAxLjI2MiAxMy42NjEgMy41NjIgMjYuMTY4IDMuNDk3IDMxLjI3My0yMC41NDktLjU4NS00LjUxMS0yLjM3OS0xLjE4Ny0yLjM3OS0xLjE4N3oiLz48cGF0aCBkPSJNNDEuNjYyIDc4LjQyMmw3LjU1My41NWMxLjE5Mi4xMDcgMi4xMiAxLjE1MyAyLjA3MiAyLjMzNWwtLjEwOSAyLjczOGMtLjA0NyAxLjE4Mi0xLjA1MSAyLjA1NC0yLjI0MyAxLjk0NmwtNy41NTMtLjU1Yy0xLjE5MS0uMTA3LTIuMTE5LTEuMTUzLTIuMDcyLTIuMzM1bC4xMDktMi43MzdjLjA0Ny0xLjE4MiAxLjA1Mi0yLjA1NCAyLjI0My0xLjk0N3oiLz48L2c+PC9zdmc+) center no-repeat}.OT_audio-level-meter__audio-only-img[_ngcontent-%COMP%]:before{content:'';display:block;padding-top:100%}.OT_audio-level-meter__value[_ngcontent-%COMP%]{position:absolute;border-radius:50%;background-image:radial-gradient(circle,#97ce00 0,rgba(151,206,0,0) 100%)}.OT_audio-level-meter.OT_mode-off[_ngcontent-%COMP%]{display:none}.OT_audio-level-meter.OT_mode-on[_ngcontent-%COMP%], .OT_audio-only[_ngcontent-%COMP%]   .OT_audio-level-meter.OT_mode-auto[_ngcontent-%COMP%]{display:block}.OT_audio-only.OT_publisher[_ngcontent-%COMP%]   .OT_video-element[_ngcontent-%COMP%], .OT_audio-only.OT_subscriber[_ngcontent-%COMP%]   .OT_video-element[_ngcontent-%COMP%]{display:none}.OT_video-disabled-indicator[_ngcontent-%COMP%]{opacity:1;border:none;display:none;position:absolute;background-color:transparent;background-repeat:no-repeat;background-position:bottom right;pointer-events:none;top:0;left:0;bottom:3px;right:3px}.OT_video-disabled[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFIAAAAoCAYAAABtla08AAAINUlEQVR42u2aaUxUVxTHcRBmAAEBRVTK4sKwDIsg+wCK7CqIw1CN1YobbbS2qYlJ06Qx1UpdqMbYWq2pSzWmH6ytNbXWJY1Lq7VuqBERtW64V0XFLYae0/xvcp3MMAMzDz6IyT/ge2ce5/7ucpY3Ts3NzZ1ygF57AJ0gO0G2jyZPmdbFyclJSAV1EeoEaUUSLGdSV5KLLFxzFmA7QVqGqDqjixhWkxCVeyRVl38wM6bwj6yYItYK47BAuu9B0gCqs6Ng2r494KQtkj/Dz2jHraw6qw2fdSE4rNmcCPCvZONP8iF1I6kdBdMaQJWZLeJqRWa2kPJAxXY+GxE+zxLI03GRh8lGSwoi9WCY8FWlCEh+8JOnT7MfPGjMuXX7Tt61hoaCi/9cKmKdv3BxeEtim/UbNpnbQiqF4MmT7kqrbr4lkMcTo46TTSpJB5g+8NHuVWnWuaampvhmO/7duHmrGluoO4C6OsJZGRrkDIld43ZqUOTnlkDSmXmabAoBU0vqBf+6KgFSxQ9++uzZ8rZApM81TJ8xM5me0Z/UF7PuBmdVdkGEb5gYDeQmyZNW3SJLIP9Kj64lGyMpmxRN6sOfIbkoAhKOdnv2/PmB1kB88eLFo+olyyrps3rSINIAzLonnqlqK8R9w+L86vtrt5L2nhug3Vc3ULu/Liz8AOuXESlZZONH6kmr7gtLIA9lRNeRzVukAvj3BslLnJNKgfScO69K+/Lly0ZbQW7e8tNK+pwBjqaSIjDrXgJkW1ciAZvbQjQ+RDahpBBKd5ZZsqN758hmImk4KQHnpDd8UwSkCyJarx07d4+3BeKJmlMHyX4qaRxpBCmNFE4KENvHDpAutVERn1kCVBMfeRRgYvZnx62wZPdnZkw92VQA5GClQXYRBze2S+iJmpPVVoJLA9l9QKokjcWKTCT1R5rhLg70NuSsziT16diIKkuAjibrTpJNDkn/e17CahtAjlAWJAYkb29Sb1LE9Rs391kILk8mVkyuIpuZcLKUlEmKkra1WuSTNuesEPzwoEploSVAh9Oiz+BIyd9dOHhtx4OEpFpVg6gbNK3yXX1j48N6U5Dz5i/gc/FDrMY3sTLiSMEkXxGxzUEUAGnbxlPaksMlHUXWAlHS8URCPseSohZbCSLjSSU7ixLXdzhIWVKq4Y7t2a/2bN0qGeKly1fYsVmk6RgIDz4J0bonyUOcjeYqm/8hRoYbWkigV2NH9CHAS60EkUkkw47hSRs6FqT1LR5AVcsrueXlK1d5AO+RpmBrZZEiefByytPCanRGNLZY0uF52gNDYr9sCRB8MHY0SJu2OJWKS2WQV65e4y31DmkCImEi0hBfufRime0RIhpbKen0/Ny9OYNW2ghyYytABjNIaxNuKttAWk6HPLn0k0FevdZwFinPWFIuKZbUV16NVko6jbWSDoPO3pOf8K0jQWLSQ0S9bdpkYck+m7vfWpAiHfKgBsZiGSSt0FqcTeU8WETqAHE2CgcAVd3Gkm4MD3xXYeI6B4NMItvKbcUpQ9gP+KMWnSsW+TaYJtoo+avBWLoKoK0CCSDud+7eXWQGZAXqV3YoQjQCfixJ8+fzj9ta3JHhlUeJ8wJOY2ws6eRKpPS3oqTvHAESEz9ya0naXL5WH6pt3FqSOhTHkTcKEXc6k1POh4Q9YJu/03TT4a8PoGMFI4i2EqSbOZAYaBkpCyD92RkG6KCSbjI/H0HEISBnlOZPFdcEzI2GTO4KBZICGKyAKLTEmJOB2txf5MbgohBINCl4FTqmpJMB2W+HiRn1Q2l6lXyPmiEP6VVE2TfGoaMYrHyPdtAnyI0jEOn9RLWmNEhvBBE7SjpFQZaShtLK+1S+T12lRwxUvrZlVPp8jE1PikeO7C/nyEqBDCB1t7+kUx4kKUWclea0yZC5BIGpiJSNSD9QgFR0RQKkL6KxHSWdsiARHJNYewoGrzG1/bk4dTPSunL2EyDjcbb7MQ+lQfZmkKiN7SjpFAM5CWAyGcwyY84YsZ1lUcbRNNtQMAdtQWGvQ0DyVjzYAKQfQFodeAeC1C8vzymXIZqD+ZEh/2OyLSalS/3VbnJZ+VqDXGjMrTCFuK4s66vVZUNfqaDolcbjOcb899sLpEE+I20GifywXe2QR3KElu99PzqjGufhREqB1pjCnG3IL3fY1v733r2FMsiGhutn0LAoJWWIGbPxjKwgjUbF0m52mPhigrpdXOecEq9pR6MkHbu2LOtrcZ9y3d0ODTb15y9MePz48aF79+8fvXnr9sljx2u2I7KNxDuaMPGVECoRs7mC4eT7SIruFNfNHK15MKuM2evwNq+4qjxvGnd5CHwNNynawW4cOlUZdG8b55IIJHmkItwrZHH6QxB3OSL9kTtAGpIvZiQB3Z4SKBfXQtEE9sashWAW87Bt3sYZNR6zn4uzJwWDKUKXfaKCdqUoBpLxSjYe9nqGiwWRBGipuGZ3Qm76itYLbbJI/PEhUApfw73uOIy9xfse3M9F9BuFJHcYrseSouGkHtCVtkuGTTikI8XgZzhg9SeF4VqcvSWiaSvNHQ8JwkNjIfEHemCmNLD1RaEfLs18mlgNuN6PFALHo7CyU5W2g00gFAQF4ozvibH04muwDbWraSFAyt/AAMzewgGR8uCeWn77xzBxPxgzPRCDDMZ14bQ/3jqGKGoHf2Hjgx3kw5LbaJDYWb52t9FMgw4AuWNWukNeuOYqOsmQi2jgws4PA/DD/z0B2x0/veCs4naw0cgybezid7X9jV3rX2RSs0wfLkll4pBGcgifg+NYxe1kJ2ycTaRq66uG/wBOl0vjcw70xwAAAABJRU5ErkJggg==);background-size:33px auto}.OT_video-disabled-warning[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFIAAAAoCAYAAABtla08AAAGMElEQVR4Ae2aA7D0yBaAc7oH12vbRmlLaxYWb23btm3btm2899a2bWuYtPZ01cmtU9lJrib315yqr9I3Oem/5/s7acwEnehEJzoxCcX2O+wEeIgRBDDaGjAZOgQ6ihRpLklHZDJIXK1WWymMIhGGkVBKCWMM+Iv/f/b5t7faYtM/sGgIS7j8RNLjceUVl41GvGN1BFiHy9sgtRWaYbhvuVQ6o1VOvV5/tLe3dyssKoZuh8xClkDEi2MMS6ZjR0cScxdK/+HgnJsmLccYOx0e/PUGUqfTJDEHkV5go9lcMQoj4R8RpSIRRUr4a9baTJFCCNfqESKJ7RYJibK0xoi05EhFRTxMi1Rit6xHAuLaKRLwEVi6q1x+EhlVpd3d3Wfh4VQkQhRhxthYLg7SRGqdLlIp7UVOHf+JhEhEMscUolVje3p63saeeOFoKsT7fjj++BNuw2I/0ouUENmGaQcQEilQvUU6xuWC0kqmVWCt8df6kG7WLoFA20VSCOyNh0RKPT+SyrTWtQsvuvTYCy84z3+oAdbgAiLGIvHjTz6bFuu/B3lKKfVkFKknwih6EnnipZdfXQZzepAupXSGSCfwUGZtkrx3t/0dSQGnnXbmdocdetArQoj+4VR23wMP3bj/vnv9Sv/rBmkish09ca655thHSrlWq4TFF1vkNDxsgjiUnPqZnHPABIq47jx7pPMcecShfz7x1DO7D6eit99576X1113nVd8rqLGAuDaNitJonTGIqHgQGQjDsJglMrUH5iDSEQbRa6y2yrNvv/PuWVmV/PTzLz8steTit1B9FtGJeZrJksmWdBzBMcami4xUkaY1A1Qe94WIaPGBApJhaERrLrXkElf8+NPPz6YMLs1DDjn0Wn9PnI/UiQadM4jNEkhzVsEGE8nIHESM1j5/KqRX+/IEiOQ/yifNBlEkpnb00cccesbpp13T3983H88/48xzrrvm6it/8U5JXgX5G6nSvSq1R5LATR7aYGkwMG1RSwkWABH+4jUb3vT/uJ1Z0xpjraTBRltrxUQhksIRmgTJyy69+Pv99tv3qYX6FxgU+fU33352xGEHf5wisU7nNWJpZRMkAjZ6aIN1mwV7h29Jo2wCHlveu/GV169z65E+T6koexCh6c+EEiky3lnxQKFjUeVyOeI5AOBzIiayRhJryd7YYnkIHgvB0qk9Tdql6N3XH4bRUIOIIIKJSiRb0hkSEpZKRd1CpEq8GxtIyCVmDSgFl94GacTgaJw1rUlYhYng0c4ewaUsmKRIJjpiqMSOCh9QeI+UYECmtQIsxEu6OorEcv6Rl0gu0woh8MhFkmSCTXVI4pC704WCFRJvSRNJSzrMMEZO2iKZTCHAZYnmvXCny7ed5vfZK3viHSBdIFCKEFj2+nt+73nw8m2uedcLJlktA++VNMEPaR45aYukcKnnCfY3/DFbZS8t7eHxNgsPM0N1hXhJJwwM1QbpoQFlog2R13a/zBxEYHAQEUYUM6qiVwEyBYoM6JFNF2kFLelI5KQf+fVI4dJFCguDS7oAyx2R6SFQJKRedSDj/cMg/RXQ6ZE05GSIDAaXdCi1I3L021SQWNJ1RLY5OiIdL4/yvuw8ADfWPFrSciaMyH8tEQPwf1uGG54g5+KlJGTmsrxsQdl5PKidnPFe2QS///7Hu+VS6WX/HYnf0sevGL7lXydwod2/9DykZq0s5yff0sgSWCigNOH7TPHL7ufj+/TH8P/+qYpL4HkBDiRYpEXeM8/89/9zzjn7EtY64dfd1nqccM7Bs8+9MKy8555/8TnKS+5MufH6EZVASkgPzf+mJXroet17JirU0ALST3nT0y5ONyLpeo1y64ih+vuQfsoTOeRFSJXa+SvyB90TUmdw49EjLaKpMQ0mzEeTzkWsd/oI6fzfiKM8gWg6X6OjpXstu5ZHnmIb0GFiu29MIUfUewkmVrEN3RqVQ/bY8FzNcquMBv/pCNUZ5pHHem01KdN/I/DG66/lLhKSvTO5M84kav5C5z2ZfyAivi9i9VGd45RH7UWJbjwGG/7NYsRECt7jiOToHedKAui8SW4CsxyRc54mKH/8f7ELhCCACyNcIl/wI+FaAJyc8yzRtinQPzWzuFZrFHq/AAAAAElFTkSuQmCC);background-size:33px auto}.OT_video-disabled-indicator.OT_active[_ngcontent-%COMP%]{display:block}.OT_audio-blocked-indicator[_ngcontent-%COMP%]{opacity:1;border:none;display:none;position:absolute;background-color:transparent;background-repeat:no-repeat;background-position:center;pointer-events:none;top:0;left:0;bottom:0;right:0}.OT_audio-blocked[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMTUwIiBoZWlnaHQ9IjkwIj48ZGVmcz48cGF0aCBkPSJNNjcgMTJMNi40NDggNzIuNTUyIDAgMzFWMThMMjYgMGw0MSAxMnptMyA3bDYgNDctMjkgMTgtMzUuNTAyLTYuNDk4TDcwIDE5eiIgaWQ9ImEiLz48L2RlZnM+PHJlY3Qgd2lkdGg9IjE1MCIgaGVpZ2h0PSI5MCIgcng9IjM1IiByeT0iNDUiIG9wYWNpdHk9Ii41Ii8+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzNikiPjxtYXNrIGlkPSJiIiBmaWxsPSIjZmZmIj48dXNlIHhsaW5rOmhyZWY9IiNhIi8+PC9tYXNrPjxwYXRoIGQ9Ik0zOS4yNDkgNTEuMzEyYy42OTcgMTAuMzcgMi43ODUgMTcuODk3IDUuMjUxIDE3Ljg5NyAzLjAzOCAwIDUuNS0xMS40MTcgNS41LTI1LjVzLTIuNDYyLTI1LjUtNS41LTI1LjVjLTIuNTEgMC00LjYyOCA3Ljc5Ny01LjI4NyAxOC40NTNBOC45ODkgOC45ODkgMCAwIDEgNDMgNDRhOC45ODggOC45ODggMCAwIDEtMy43NTEgNy4zMTJ6TTIwLjk4NSAzMi4yMjRsMTUuNzQ2LTE2Ljg3N2E3LjM4NSA3LjM4NSAwIDAgMSAxMC4zNzQtLjQyQzUxLjcwMiAxOS4xMTQgNTQgMjkuMjA4IDU0IDQ1LjIwOGMwIDE0LjUyNy0yLjM0MyAyMy44OC03LjAzIDI4LjA1OGE3LjI4IDcuMjggMCAwIDEtMTAuMTY4LS40NjhMMjAuNDA1IDU1LjIyNEgxMmE1IDUgMCAwIDEtNS01di0xM2E1IDUgMCAwIDEgNS01aDguOTg1eiIgZmlsbD0iI0ZGRiIgbWFzaz0idXJsKCNiKSIvPjwvZz48cGF0aCBkPSJNMTA2LjUgMTMuNUw0NC45OTggNzUuMDAyIiBzdHJva2U9IiNGRkYiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+PC9nPjwvc3ZnPg==);background-size:90px auto}.OT_container-audio-blocked[_ngcontent-%COMP%]{cursor:pointer}.OT_container-audio-blocked[_ngcontent-%COMP%]   .OT_mute[_ngcontent-%COMP%], .OT_container-audio-blocked.OT_mini[_ngcontent-%COMP%]   .OT_edge-bar-item[_ngcontent-%COMP%]{display:none}.OT_audio-blocked-indicator.OT_active[_ngcontent-%COMP%]{display:block}.OT_video-unsupported[_ngcontent-%COMP%]{opacity:1;border:none;display:none;position:absolute;background-color:transparent;background-repeat:no-repeat;background-position:center;background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOTciIGhlaWdodD0iOTAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxwYXRoIGQ9Ik03MCAxMkw5LjQ0OCA3Mi41NTIgMCA2MmwzLTQ0TDI5IDBsNDEgMTJ6bTggMmwxIDUyLTI5IDE4LTM1LjUwMi02LjQ5OEw3OCAxNHoiIGlkPSJhIi8+PC9kZWZzPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOCAzKSI+PG1hc2sgaWQ9ImIiIGZpbGw9IiNmZmYiPjx1c2UgeGxpbms6aHJlZj0iI2EiLz48L21hc2s+PHBhdGggZD0iTTkuMTEgMjAuOTY4SDQ4LjFhNSA1IDAgMCAxIDUgNVY1OC4xOGE1IDUgMCAwIDEtNSA1SDkuMTFhNSA1IDAgMCAxLTUtNVYyNS45N2E1IDUgMCAwIDEgNS01em00Ny4wOCAxMy4zOTRjMC0uMzQ1IDUuNDcyLTMuMTU5IDE2LjQxNS04LjQ0M2EzIDMgMCAwIDEgNC4zMDQgMi43MDJ2MjYuODM1YTMgMyAwIDAgMS00LjMwNSAyLjcwMWMtMTAuOTQyLTUuMjg2LTE2LjQxMy04LjEtMTYuNDEzLTguNDQ2VjM0LjM2MnoiIGZpbGw9IiNGRkYiIG1hc2s9InVybCgjYikiLz48L2c+PHBhdGggZD0iTTgxLjUgMTYuNUwxOS45OTggNzguMDAyIiBzdHJva2U9IiNGRkYiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+PC9nPjwvc3ZnPg==);background-size:58px auto;pointer-events:none;top:0;left:0;bottom:0;right:0;margin-top:-30px}.OT_video-unsupported-bar[_ngcontent-%COMP%]{display:none;position:absolute;width:192%;height:192%;top:-96%;left:-96%;border-radius:50%;background-color:rgba(0,0,0,.8)}.OT_video-unsupported-img[_ngcontent-%COMP%]{display:none;position:absolute;top:11%;left:15%;width:70%;opacity:.7;background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOTciIGhlaWdodD0iOTAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxwYXRoIGQ9Ik03MCAxMkw5LjQ0OCA3Mi41NTIgMCA2MmwzLTQ0TDI5IDBsNDEgMTJ6bTggMmwxIDUyLTI5IDE4LTM1LjUwMi02LjQ5OEw3OCAxNHoiIGlkPSJhIi8+PC9kZWZzPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOCAzKSI+PG1hc2sgaWQ9ImIiIGZpbGw9IiNmZmYiPjx1c2UgeGxpbms6aHJlZj0iI2EiLz48L21hc2s+PHBhdGggZD0iTTkuMTEgMjAuOTY4SDQ4LjFhNSA1IDAgMCAxIDUgNVY1OC4xOGE1IDUgMCAwIDEtNSA1SDkuMTFhNSA1IDAgMCAxLTUtNVYyNS45N2E1IDUgMCAwIDEgNS01em00Ny4wOCAxMy4zOTRjMC0uMzQ1IDUuNDcyLTMuMTU5IDE2LjQxNS04LjQ0M2EzIDMgMCAwIDEgNC4zMDQgMi43MDJ2MjYuODM1YTMgMyAwIDAgMS00LjMwNSAyLjcwMWMtMTAuOTQyLTUuMjg2LTE2LjQxMy04LjEtMTYuNDEzLTguNDQ2VjM0LjM2MnoiIGZpbGw9IiNGRkYiIG1hc2s9InVybCgjYikiLz48L2c+PHBhdGggZD0iTTgxLjUgMTYuNUwxOS45OTggNzguMDAyIiBzdHJva2U9IiNGRkYiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+PC9nPjwvc3ZnPg==);background-repeat:no-repeat;background-position:center;background-size:100% auto}.OT_video-unsupported-img[_ngcontent-%COMP%]:before{content:'';display:block;padding-top:93%}.OT_video-unsupported-text[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;text-align:center;height:100%;margin-top:40px}@media only screen and (max-width:600px){#videoRoomNavBar[_ngcontent-%COMP%]{width:100%}}"]}),e}(),bt=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this)).NAME="Angular Library",e}return _createClass(n,[{key:"setTokens",value:function(e){var t;e&&(this.ovSettings.setScreenSharing(this.ovSettings.hasScreenSharing()&&(null===(t=e)||void 0===t?void 0:t.length)>1),_get(_getPrototypeOf(n.prototype),"setTokens",this).call(this,e))}},{key:"getComponentName",value:function(){return this.NAME}}]),n}(function(){function e(){_classCallCheck(this,e),this.theme=ut.DARK,this.ovSettings=new at}return _createClass(e,[{key:"getComponentName",value:function(){}},{key:"getOvSettings",value:function(){return this.ovSettings}},{key:"getSessionName",value:function(){return this.sessionName}},{key:"getOvServerUrl",value:function(){return this.ovServerUrl}},{key:"getOvSecret",value:function(){return this.ovSecret}},{key:"getTheme",value:function(){return this.theme}},{key:"getNickname",value:function(){return this.nickname}},{key:"getTokens",value:function(){return this.tokens}},{key:"getScreenToken",value:function(){return this.tokens[1]}},{key:"getWebcamToken",value:function(){return this.tokens[0]}},{key:"setOvSettings",value:function(e){e&&this.ovSettings.set(e)}},{key:"setSessionName",value:function(e){this.sessionName=e}},{key:"setOvServerUrl",value:function(e){this.ovServerUrl=e}},{key:"setOvSecret",value:function(e){this.ovSecret=e}},{key:"setTheme",value:function(e){Object.values(ut).includes(e)&&(this.theme=e===ut.DARK?ut.DARK:ut.LIGHT)}},{key:"setNickname",value:function(e){this.nickname=e}},{key:"setTokens",value:function(e){this.tokens=e}},{key:"canJoinToSession",value:function(){return this.canOVCallGenerateToken()||this.hasReceivedToken()}},{key:"hasTokens",value:function(){var e;return(null===(e=this.tokens)||void 0===e?void 0:e.length)>0}},{key:"canOVCallGenerateToken",value:function(){return!!(this.sessionName&&this.ovServerUrl&&this.ovSecret&&this.nickname)}},{key:"hasReceivedToken",value:function(){return!!this.tokens&&this.tokens.length>0&&!!this.nickname}}]),e}()),_t=function(){var e=function(){function e(t){_classCallCheck(this,e),this.loggerSrv=t,this.display=!1,this.sessionCreated=new o.o,this.publisherCreated=new o.o,this.error=new o.o,this.joinSession=new o.o,this.leaveSession=new o.o,this.log=this.loggerSrv.get("OpenviduSessionComponent")}return _createClass(e,[{key:"ngOnInit",value:function(){this.angularLibrary=new bt,this.angularLibrary.setOvSettings(this.ovSettings),this.angularLibrary.setSessionName(this.sessionName),this.angularLibrary.setOvServerUrl(this.openviduServerUrl),this.angularLibrary.setOvSecret(this.openviduSecret),this.angularLibrary.setTheme(this.theme),this.angularLibrary.setNickname(this.user),this.angularLibrary.setTokens(this.tokens),this.angularLibrary.canJoinToSession()?this.display=!0:this.log.e("Cannot join to session.")}},{key:"emitSession",value:function(e){var t=this;e.on("sessionDisconnected",(function(e){return t.display=!1})),e.on("connectionCreated",(function(e){setTimeout((function(){var n,i,o;(null===(o=null===(i=null===(n=e.connection)||void 0===n?void 0:n.stream)||void 0===i?void 0:i.streamManager)||void 0===o?void 0:o.remote)||t.videoRoom.checkSizeComponent()}),700)})),this.sessionCreated.emit(e)}},{key:"emitPublisher",value:function(e){this.publisherCreated.emit(e)}},{key:"emitErrorEvent",value:function(e){var t=this;setTimeout((function(){return t.error.emit(e)}),20)}},{key:"getSession",value:function(){return this.log.w("getSession method is DEPRECATED. Please consider to use sessionCreated event"),this.videoRoom.session}},{key:"getLocalUsers",value:function(){return this.videoRoom.localUsers}},{key:"getOpenviduLayout",value:function(){return this.videoRoom.openviduLayout}},{key:"getOpenviduLayoutOptions",value:function(){return this.videoRoom.openviduLayoutOptions}},{key:"emitJoinSessionEvent",value:function(e){this.joinSession.observers.length>0&&this.log.w("joinSession event is DEPRECATED. Please consider to use sessionCreated event"),this.joinSession.emit(e)}},{key:"emitLeaveSessionEvent",value:function(e){this.leaveSession.observers.length>0&&this.log.w("leaveSession event is DEPRECATED. Please consider to use sessionCreated event"),this.leaveSession.emit(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.Qb(tt))},e.\u0275cmp=o.Kb({type:e,selectors:[["opv-session"]],viewQuery:function(e,t){var n;1&e&&o.Pc(G,!0),2&e&&o.wc(n=o.fc())&&(t.videoRoom=n.first)},inputs:{ovSettings:"ovSettings",sessionName:"sessionName",user:"user",openviduServerUrl:"openviduServerUrl",openviduSecret:"openviduSecret",tokens:"tokens",theme:"theme"},outputs:{sessionCreated:"sessionCreated",publisherCreated:"publisherCreated",error:"error",joinSession:"joinSession",leaveSession:"leaveSession"},decls:1,vars:1,consts:[[3,"externalConfig","_session","_publisher","_error","_leaveSession","_joinSession",4,"ngIf"],[3,"externalConfig","_session","_publisher","_error","_leaveSession","_joinSession"],["videoRoom",""]],template:function(e,t){1&e&&o.Ic(0,K,2,1,"app-video-room",0),2&e&&o.pc("ngIf",t.display)},directives:[p.m,vt],encapsulation:2}),e}(),yt=function(){var e=function(){function e(t){_classCallCheck(this,e),this.linkifyService=t}return _createClass(e,[{key:"transform",value:function(e){return e?this.linkifyService.linkify(e):e}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.Qb(_.b))},e.\u0275pipe=o.Pb({name:"linkify",type:e,pure:!0}),e}(),Ct=function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"transform",value:function(e){return!e||e.hasChat()}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=o.Pb({name:"hasChat",type:e,pure:!0}),e}(),Ot=function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"transform",value:function(e){return!e||e.hasAudio()}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=o.Pb({name:"hasAudio",type:e,pure:!0}),e}(),St=function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"transform",value:function(e){return!e||e.hasVideo()}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=o.Pb({name:"hasVideo",type:e,pure:!0}),e}(),kt=function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"transform",value:function(e){return!e||e.isAutoPublish()}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=o.Pb({name:"isAutoPublish",type:e,pure:!0}),e}(),xt=function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"transform",value:function(e){return!e||e.hasScreenSharing()}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=o.Pb({name:"hasScreenSharing",type:e,pure:!0}),e}(),Mt=function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"transform",value:function(e){return!e||e.hasFullscreen()}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=o.Pb({name:"hasFullscreen",type:e,pure:!0}),e}(),wt=function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"transform",value:function(e){return!e||e.hasLayoutSpeaking()}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=o.Pb({name:"hasLayoutSpeaking",type:e,pure:!0}),e}(),Et=function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"transform",value:function(e){return!e||e.hasExit()}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=o.Pb({name:"hasExit",type:e,pure:!0}),e}(),Pt=function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"transform",value:function(e){var t="";return e.forEach((function(e){t+="\u2022 "+e+"\n"})),t}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=o.Pb({name:"tooltipList",type:e,pure:!0}),e}(),It=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"isErrorState",value:function(e,t){return!!(e&&e.invalid&&(e.dirty||e.touched||t&&t.submitted))}}]),e}(),Rt=function(e){return e.BIG="zoom_in",e.NORMAL="zoom_out",e}({}),Tt=function(e){return e.BIG="fullscreen",e.NORMAL="fullscreen_exit",e}({}),At=function(){var e=function(){function e(t){_classCallCheck(this,e),this.utilsSrv=t,this.videoSizeIcon=Rt.BIG,this.fullscreenIcon=Tt.BIG,this.nicknameClicked=new o.o,this.replaceScreenTrackClicked=new o.o,this.toggleVideoSizeClicked=new o.o}return _createClass(e,[{key:"sizeChange",value:function(e){var t=window.screen.height,n=window.screen.width,i=window.innerHeight;n!==window.innerWidth&&t!==i&&(this.isFullscreen=!1,this.videoSizeIcon=Rt.BIG)}},{key:"ngOnInit",value:function(){this.matcher=new It}},{key:"toggleVideoSize",value:function(e){var t=this.utilsSrv.getHTMLElementByClassName(this.streamComponent.element.nativeElement,ct.ROOT_CLASS);this.toggleVideoSizeClicked.emit({element:t,connectionId:this._user.getConnectionId(),resetAll:e})}},{key:"toggleFullscreen",value:function(){this.utilsSrv.toggleFullscreen("container-"+this._user.getStreamManager().stream.streamId),this.toggleFullscreenIcon()}},{key:"toggleSound",value:function(){this.mutedSound=!this.mutedSound}},{key:"toggleNicknameForm",value:function(){this._user.isLocal()&&(this.toggleNickname=!this.toggleNickname)}},{key:"eventKeyPress",value:function(e){e&&13===e.keyCode&&this.nicknameFormControl.valid&&(this.nicknameClicked.emit(this.nicknameFormControl.value),this.toggleNicknameForm())}},{key:"replaceScreenTrack",value:function(){this.replaceScreenTrackClicked.emit()}},{key:"checkVideoSizeBigIcon",value:function(e){this.videoSizeIcon=e?Rt.NORMAL:Rt.BIG}},{key:"toggleFullscreenIcon",value:function(){this.fullscreenIcon=this.fullscreenIcon===Tt.BIG?Tt.NORMAL:Tt.BIG}},{key:"videoSizeBig",set:function(e){this.checkVideoSizeBigIcon(e)}},{key:"user",set:function(e){this._user=e,this.nicknameFormControl=new h.f(this._user.getNickname(),[h.x.maxLength(25),h.x.required])}},{key:"nicknameInputElement",set:function(e){setTimeout((function(){var t;null===(t=e)||void 0===t||t.nativeElement.focus()}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.Qb(ht))},e.\u0275cmp=o.Kb({type:e,selectors:[["stream-component"]],viewQuery:function(e,t){var n;1&e&&(o.Pc(Q,!0),o.Pc(Y,!0,o.P)),2&e&&(o.wc(n=o.fc())&&(t.nicknameInputElement=n.first),o.wc(n=o.fc())&&(t.streamComponent=n.first))},hostBindings:function(e,t){1&e&&o.ec("resize",(function(e){return t.sizeChange(e)}),!1,o.Ac)},inputs:{videoSizeBig:"videoSizeBig",user:"user"},outputs:{nicknameClicked:"nicknameClicked",replaceScreenTrackClicked:"replaceScreenTrackClicked",toggleVideoSizeClicked:"toggleVideoSizeClicked"},decls:1,vars:1,consts:[["class","OT_widget-container",3,"id","dblclick",4,"ngIf"],[1,"OT_widget-container",3,"id","dblclick"],["streamComponent",""],[1,"nickname"],["class","nicknameContainer","selected","",3,"click",4,"ngIf"],["id","dialogNickname",3,"fullscreen",4,"ngIf"],[3,"streamManager","mutedSound","toggleVideoSizeEvent"],[1,"statusIcons"],["id","statusMic",4,"ngIf"],["id","statusCam",4,"ngIf"],[1,"videoButtons"],["mat-icon-button","","id","videoZoomButton",3,"click"],["mat-icon-button","","id","fullscreenButton",3,"click"],["mat-icon-button","","id","volumeButton",3,"click",4,"ngIf"],["mat-icon-button","","id","changeScreenButton",3,"click",4,"ngIf"],["selected","",1,"nicknameContainer",3,"click"],["id","nickname"],[4,"ngIf"],["id","dialogNickname"],["mat-icon-button","","id","closeButton",3,"click"],["matTooltip","Close"],["id","nicknameForm"],["color","primary"],["matInput","","autocomplete","off",3,"placeholder","formControl","errorStateMatcher","keypress"],["nicknameInput",""],["id","statusMic"],["id","statusCam"],["mat-icon-button","","id","volumeButton",3,"click"],["matTooltip","Mute sound",4,"ngIf"],["color","warn","matTooltip","Unmute sound",4,"ngIf"],["matTooltip","Mute sound"],["color","warn","matTooltip","Unmute sound"],["mat-icon-button","","id","changeScreenButton",3,"click"],["matTooltip","Choose screen"]],template:function(e,t){1&e&&o.Ic(0,ae,18,13,"div",0),2&e&&o.pc("ngIf",t._user)},directives:function(){return[p.m,Dt,l.a,u.a,d.a,h.z,h.q,h.r,y.c,C.b,h.c,h.p,h.g,y.b]},styles:[".nickname[_ngcontent-%COMP%]{padding:0;position:absolute;z-index:999;border-radius:5px;color:#fff;font-family:Ubuntu,sans-serif}.nicknameContainer[_ngcontent-%COMP%]{background-color:#424242;padding:5px;color:#fff;font-weight:700}#dialogNickname[_ngcontent-%COMP%]{background-color:#0000005e;border-radius:5px}#closeButton[_ngcontent-%COMP%]{position:absolute;top:-3px;right:0;z-index:999}#nicknameForm[_ngcontent-%COMP%]{padding:10px}.fullscreen[_ngcontent-%COMP%]{top:40px}mat-error[_ngcontent-%COMP%]{text-align:center;color:#353535}video[_ngcontent-%COMP%]{-o-object-fit:cover;object-fit:cover;width:100%;height:100%;color:#fff;margin:0;padding:0;border:0;font-size:100%}.statusIcons[_ngcontent-%COMP%]{bottom:0;left:5px;width:40px;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;position:absolute;color:#fff}.statusIcons[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{vertical-align:-webkit-baseline-middle;vertical-align:-moz-middle-with-baseline;font-size:20px}.videoButtons[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:24px}.videoButtons[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]{line-height:0}#camStatus[_ngcontent-%COMP%]{bottom:43px}#statusCam[_ngcontent-%COMP%], #statusMic[_ngcontent-%COMP%]{text-align:center;width:28px;height:28px;border-radius:50%;background:#c71100;margin:5px auto}.videoButtons[_ngcontent-%COMP%]{right:0;position:absolute;bottom:0;z-index:9999999;width:50px;text-align:center}.videoButtons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#000;width:30px;height:30px;margin:1px}.OT_widget-container[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;overflow:hidden}  .mat-focused .mat-form-field-label,   .mat-form-field-appearance-legacy .mat-form-field-label, mat-error[_ngcontent-%COMP%]{color:#cacaca!important}  .mat-form-field-appearance-legacy .mat-form-field-underline,   .mat-form-field.mat-focused .mat-form-field-ripple{background-color:#cacaca!important}input[_ngcontent-%COMP%]{caret-color:#fff!important}"]}),e}(),Dt=function(){var e=function(){function e(){_classCallCheck(this,e),this.toggleVideoSizeEvent=new o.o}return _createClass(e,[{key:"ngAfterViewInit",value:function(){var e=this;setTimeout((function(){e._streamManager&&e._videoElement&&e._streamManager.addVideoElement(e._videoElement.nativeElement)}))}},{key:"enableVideoSizeBig",value:function(){var e=this;setTimeout((function(){e.toggleVideoSizeEvent.emit(!0)}),590)}},{key:"videoElement",set:function(e){this._videoElement=e}},{key:"streamManager",set:function(e){var t=this;setTimeout((function(){t._streamManager=e,t._videoElement&&t._streamManager&&(t._streamManager.stream.typeOfVideo===Ze.SCREEN?(t._videoElement.nativeElement.style.objectFit="contain",t._videoElement.nativeElement.style.background="#272727",t.enableVideoSizeBig()):t._videoElement.nativeElement.style.objectFit="cover",t._streamManager.addVideoElement(t._videoElement.nativeElement))}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Kb({type:e,selectors:[["ov-video"]],viewQuery:function(e,t){var n;1&e&&o.Pc(ce,!0),2&e&&o.wc(n=o.fc())&&(t.videoElement=n.first)},inputs:{streamManager:"streamManager",mutedSound:"mutedSound"},outputs:{toggleVideoSizeEvent:"toggleVideoSizeEvent"},decls:2,vars:2,consts:[[3,"muted"],["videoElement",""]],template:function(e,t){1&e&&o.Rb(0,"video",0,1),2&e&&(o.pc("muted",t.mutedSound),o.Db("id",t.streamManager&&t._streamManager.stream?"video-"+t._streamManager.stream.streamId:"video-undefined"))},styles:[".nickname[_ngcontent-%COMP%]{padding:0;position:absolute;z-index:999;border-radius:5px;color:#fff;font-family:Ubuntu,sans-serif}.nicknameContainer[_ngcontent-%COMP%]{background-color:#424242;padding:5px;color:#fff;font-weight:700}#dialogNickname[_ngcontent-%COMP%]{background-color:#0000005e;border-radius:5px}#closeButton[_ngcontent-%COMP%]{position:absolute;top:-3px;right:0;z-index:999}#nicknameForm[_ngcontent-%COMP%]{padding:10px}.fullscreen[_ngcontent-%COMP%]{top:40px}mat-error[_ngcontent-%COMP%]{text-align:center;color:#353535}video[_ngcontent-%COMP%]{-o-object-fit:cover;object-fit:cover;width:100%;height:100%;color:#fff;margin:0;padding:0;border:0;font-size:100%}.statusIcons[_ngcontent-%COMP%]{bottom:0;left:5px;width:40px;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;position:absolute;color:#fff}.statusIcons[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{vertical-align:-webkit-baseline-middle;vertical-align:-moz-middle-with-baseline;font-size:20px}.videoButtons[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:24px}.videoButtons[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]{line-height:0}#camStatus[_ngcontent-%COMP%]{bottom:43px}#statusCam[_ngcontent-%COMP%], #statusMic[_ngcontent-%COMP%]{text-align:center;width:28px;height:28px;border-radius:50%;background:#c71100;margin:5px auto}.videoButtons[_ngcontent-%COMP%]{right:0;position:absolute;bottom:0;z-index:9999999;width:50px;text-align:center}.videoButtons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#000;width:30px;height:30px;margin:1px}.OT_widget-container[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;overflow:hidden}  .mat-focused .mat-form-field-label,   .mat-form-field-appearance-legacy .mat-form-field-label, mat-error[_ngcontent-%COMP%]{color:#cacaca!important}  .mat-form-field-appearance-legacy .mat-form-field-underline,   .mat-form-field.mat-focused .mat-form-field-ripple{background-color:#cacaca!important}input[_ngcontent-%COMP%]{caret-color:#fff!important}"]}),e}(),Lt=function(){var e=function(){function e(t,n){var i=this;_classCallCheck(this,e),this.utilsSrv=t,this.chatService=n,this.micButtonClicked=new o.o,this.camButtonClicked=new o.o,this.screenShareClicked=new o.o,this.layoutButtonClicked=new o.o,this.leaveSessionButtonClicked=new o.o,this.fullscreenIcon=Tt.BIG,this.logoUrl="https://raw.githubusercontent.com/OpenVidu/openvidu-call/master/openvidu-call-front/src/assets/images/",this.participantsNames=[],this.chatServiceSubscription=this.chatService.messagesUnreadObs.subscribe((function(e){i.newMessagesNum=e}))}return _createClass(e,[{key:"ngOnDestroy",value:function(){this.chatServiceSubscription.unsubscribe()}},{key:"sizeChange",value:function(e){var t=window.screen.height,n=window.screen.width,i=window.innerHeight;n!==window.innerWidth&&t!==i&&(this.fullscreenIcon=Tt.BIG)}},{key:"ngOnInit",value:function(){this.logoUrl+=this.lightTheme?"openvidu_logo_grey.png":"openvidu_logo.png"}},{key:"toggleMicrophone",value:function(){this.micButtonClicked.emit()}},{key:"toggleCamera",value:function(){this.camButtonClicked.emit()}},{key:"toggleScreenShare",value:function(){this.screenShareClicked.emit()}},{key:"toggleSpeakerLayout",value:function(){this.layoutButtonClicked.emit()}},{key:"leaveSession",value:function(){this.leaveSessionButtonClicked.emit()}},{key:"toggleChat",value:function(){this.chatService.toggleChat()}},{key:"toggleFullscreen",value:function(){this.utilsSrv.toggleFullscreen("videoRoomNavBar"),this.fullscreenIcon=this.fullscreenIcon===Tt.BIG?Tt.NORMAL:Tt.BIG}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.Qb(ht),o.Qb(rt))},e.\u0275cmp=o.Kb({type:e,selectors:[["app-toolbar"]],hostBindings:function(e,t){1&e&&o.ec("resize",(function(e){return t.sizeChange(e)}),!1,o.Ac)},inputs:{lightTheme:"lightTheme",mySessionId:"mySessionId",compact:"compact",showNotification:"showNotification",ovSettings:"ovSettings",isWebcamVideoEnabled:"isWebcamVideoEnabled",isWebcamAudioEnabled:"isWebcamAudioEnabled",isScreenEnabled:"isScreenEnabled",isAutoLayout:"isAutoLayout",isConnectionLost:"isConnectionLost",hasVideoDevices:"hasVideoDevices",hasAudioDevices:"hasAudioDevices"},outputs:{micButtonClicked:"micButtonClicked",camButtonClicked:"camButtonClicked",screenShareClicked:"screenShareClicked",layoutButtonClicked:"layoutButtonClicked",leaveSessionButtonClicked:"leaveSessionButtonClicked"},decls:20,vars:27,consts:[["id","header","role","heading","fxLayout","","fxLayoutAlign","center","fxLayoutGap","10px",1,"container"],["fxFlex","20%"],[3,"lightTheme","sessionId","compact","logoUrl"],["fxFlex","70%","fxFlexOrder","2"],["align","center",1,"buttonsContainer"],["id","navMicrophoneButton","mat-icon-button","",3,"disabled","click",4,"ngIf"],["id","navCameraButton","mat-icon-button","",3,"disabled","click",4,"ngIf"],["id","navScreenButton","mat-icon-button","",3,"disabled","click",4,"ngIf"],["mat-icon-button","",3,"disabled","click",4,"ngIf"],["mat-icon-button","","id","navLeaveButton",3,"click",4,"ngIf"],["fxFlex","10%","fxFlexOrder","3","align","end"],["id","navMicrophoneButton","mat-icon-button","",3,"disabled","click"],["matTooltip","Mute your audio",4,"ngIf"],["color","warn","matTooltip","Unmute your audio",4,"ngIf"],["matTooltip","Mute your audio"],["color","warn","matTooltip","Unmute your audio"],["id","navCameraButton","mat-icon-button","",3,"disabled","click"],["matTooltip","Mute your cam",4,"ngIf"],["color","warn","matTooltip","Unmute your cam",4,"ngIf"],["matTooltip","Mute your cam"],["color","warn","matTooltip","Unmute your cam"],["id","navScreenButton","mat-icon-button","",3,"disabled","click"],["matTooltip","Screen share","color","warn",4,"ngIf"],["matTooltip","Stop sharing",4,"ngIf"],["matTooltip","Screen share","color","warn"],["matTooltip","Stop sharing"],["mat-icon-button","",3,"disabled","click"],["matTooltip","Fullscreen"],["matTooltip","Enable speaker layout","color","warn",4,"ngIf"],["matTooltip","Disable speaker layout",4,"ngIf"],["matTooltip","Enable speaker layout","color","warn"],["matTooltip","Disable speaker layout"],["mat-icon-button","","id","navLeaveButton",3,"click"],["color","warn","matTooltip","Leave the session"],["matBadgePosition","above before","matTooltip","Chat","matBadgeColor","accent",3,"matBadge","matBadgeHidden"]],template:function(e,t){1&e&&(o.Wb(0,"mat-toolbar",0),o.Wb(1,"div",1),o.Rb(2,"app-toolbar-logo",2),o.Vb(),o.Wb(3,"div",3),o.Wb(4,"div",4),o.Ic(5,de,3,3,"button",5),o.jc(6,"hasAudio"),o.Ic(7,fe,3,3,"button",6),o.jc(8,"hasVideo"),o.Ic(9,ve,3,3,"button",7),o.jc(10,"hasScreenSharing"),o.Ic(11,be,3,2,"button",8),o.jc(12,"hasFullscreen"),o.Ic(13,Ce,3,3,"button",8),o.jc(14,"hasLayoutSpeaking"),o.Ic(15,Oe,3,0,"button",9),o.jc(16,"hasExit"),o.Vb(),o.Vb(),o.Wb(17,"div",10),o.Ic(18,Se,3,3,"button",8),o.jc(19,"hasChat"),o.Vb(),o.Vb()),2&e&&(o.Gb("headerLight",t.lightTheme),o.Cb(2),o.pc("lightTheme",t.lightTheme)("sessionId",t.mySessionId)("compact",t.compact)("logoUrl",t.logoUrl),o.Cb(3),o.pc("ngIf",t.hasAudioDevices&&o.kc(6,13,t.ovSettings)),o.Cb(2),o.pc("ngIf",!t.ovSettings||t.hasVideoDevices&&o.kc(8,15,t.ovSettings)),o.Cb(2),o.pc("ngIf",o.kc(10,17,t.ovSettings)),o.Cb(2),o.pc("ngIf",o.kc(12,19,t.ovSettings)),o.Cb(2),o.pc("ngIf",o.kc(14,21,t.ovSettings)),o.Cb(2),o.pc("ngIf",o.kc(16,23,t.ovSettings)),o.Cb(3),o.pc("ngIf",o.kc(19,25,t.ovSettings)))},directives:function(){return[O.a,S.d,S.c,S.e,S.a,jt,S.b,p.m,l.a,u.a,d.a,k.a]},pipes:function(){return[Ot,St,xt,Mt,wt,Et,Ct]},styles:["#header[_ngcontent-%COMP%]{color:#fff;height:40px;background-color:#333;padding:0 14px 0 0;position:absolute;top:0;left:0;z-index:999999;min-width:400px!important}.buttonsContainer[_ngcontent-%COMP%]{position:absolute;left:0;right:0}.headerLight[_ngcontent-%COMP%]{color:#706969!important;background-color:#eee!important}#navSessionInfo[_ngcontent-%COMP%]{height:100%;display:inline-flex}#navChatButton[_ngcontent-%COMP%]   .mat-badge-medium.mat-badge-overlap.mat-badge-before[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{left:-17px}#navChatButton[_ngcontent-%COMP%]   .mat-badge-medium.mat-badge-above[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{top:-6px}.mat-icon-button[disabled][_ngcontent-%COMP%]{color:#fff}.titleContent[_ngcontent-%COMP%]{font-family:Ubuntu,sans-serif;max-width:100px;margin:5px -18px;padding:0 15px;font-size:16px;overflow:hidden;text-overflow:ellipsis}.titleContentDark[_ngcontent-%COMP%]{background-color:#494949;color:#fff}.titleContentLight[_ngcontent-%COMP%]{background-color:#dfdfdf!important;color:#000}#header_img[_ngcontent-%COMP%]{max-width:135px;margin-right:10px;margin-top:-3px}#point[_ngcontent-%COMP%]{width:10px;height:10px;position:absolute;top:12px;right:33px;border-radius:50%;background-color:#ffa600;border:1px solid #000;z-index:99999}.pointLight[_ngcontent-%COMP%]{border:1px solid #fff!important}.tooltipList[_ngcontent-%COMP%]{white-space:pre}@media (max-width:600px){#navSessionInfo[_ngcontent-%COMP%]{display:none}}"]}),e}(),jt=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Kb({type:e,selectors:[["app-toolbar-logo"]],inputs:{lightTheme:"lightTheme",compact:"compact",sessionId:"sessionId",logoUrl:"logoUrl"},decls:4,vars:2,consts:[["id","navSessionInfo"],["id","header_img","alt","OpenVidu Logo",3,"src"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],["id","session-title"]],template:function(e,t){1&e&&(o.Wb(0,"div",0),o.Wb(1,"a"),o.Rb(2,"img",1),o.Vb(),o.Ic(3,xe,3,5,"div",2),o.Vb()),2&e&&(o.Cb(2),o.pc("src",t.logoUrl,o.Dc),o.Cb(1),o.pc("ngIf",!t.compact&&t.sessionId))},directives:[p.m,p.k,f.a],styles:["#header[_ngcontent-%COMP%]{color:#fff;height:40px;background-color:#333;padding:0 14px 0 0;position:absolute;top:0;left:0;z-index:999999;min-width:400px!important}.buttonsContainer[_ngcontent-%COMP%]{position:absolute;left:0;right:0}.headerLight[_ngcontent-%COMP%]{color:#706969!important;background-color:#eee!important}#navSessionInfo[_ngcontent-%COMP%]{height:100%;display:inline-flex}#navChatButton[_ngcontent-%COMP%]   .mat-badge-medium.mat-badge-overlap.mat-badge-before[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{left:-17px}#navChatButton[_ngcontent-%COMP%]   .mat-badge-medium.mat-badge-above[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{top:-6px}.mat-icon-button[disabled][_ngcontent-%COMP%]{color:#fff}.titleContent[_ngcontent-%COMP%]{font-family:Ubuntu,sans-serif;max-width:100px;margin:5px -18px;padding:0 15px;font-size:16px;overflow:hidden;text-overflow:ellipsis}.titleContentDark[_ngcontent-%COMP%]{background-color:#494949;color:#fff}.titleContentLight[_ngcontent-%COMP%]{background-color:#dfdfdf!important;color:#000}#header_img[_ngcontent-%COMP%]{max-width:135px;margin-right:10px;margin-top:-3px}#point[_ngcontent-%COMP%]{width:10px;height:10px;position:absolute;top:12px;right:33px;border-radius:50%;background-color:#ffa600;border:1px solid #000;z-index:99999}.pointLight[_ngcontent-%COMP%]{border:1px solid #fff!important}.tooltipList[_ngcontent-%COMP%]{white-space:pre}@media (max-width:600px){#navSessionInfo[_ngcontent-%COMP%]{display:none}}"]}),e}(),Nt=function(){var e=function(){function e(){_classCallCheck(this,e),this.participantsNames=[]}return _createClass(e,[{key:"sizeChange",value:function(e){}},{key:"ngOnInit",value:function(){}},{key:"participants",set:function(e){var t=this;this.participantsNames=[],e.forEach((function(e){e.isCamera()&&t.participantsNames.push(e.getNickname())})),this.participantsNames=_toConsumableArray(this.participantsNames)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Kb({type:e,selectors:[["app-footer"]],hostBindings:function(e,t){1&e&&o.ec("resize",(function(e){return t.sizeChange(e)}),!1,o.Ac)},inputs:{participants:"participants",lightTheme:"lightTheme"},decls:9,vars:6,consts:[["fxLayout","","fxLayout.xs","row","fxLayoutAlign","center center","fxLayoutGap","2px","id","footer","role","heading",1,"container"],[1,"participantsButtonContainer"],["mat-icon-button","","matTooltip","Remote participants",1,""],["matBadgeSize","small","matBadgePosition","above after","matBadgeColor","accent",3,"matBadge"],["fxFlex","calc(100% - 40px)","fxFlexOrder","2"],[1,"participantNames"]],template:function(e,t){1&e&&(o.Wb(0,"mat-toolbar",0),o.Wb(1,"div",1),o.Wb(2,"button",2),o.Wb(3,"mat-icon",3),o.Kc(4,"people"),o.Vb(),o.Vb(),o.Vb(),o.Wb(5,"div",4),o.Wb(6,"span",5),o.Kc(7),o.jc(8,"tooltipList"),o.Vb(),o.Vb(),o.Vb()),2&e&&(o.Gb("headerLight",t.lightTheme),o.Cb(3),o.qc("matBadge",null==t.participantsNames?null:t.participantsNames.length),o.Cb(4),o.Lc(o.kc(8,4,t.participantsNames)))},directives:[O.a,S.d,S.c,S.e,l.a,d.a,u.a,k.a,S.a,S.b],pipes:[Pt],styles:["#footer[_ngcontent-%COMP%]{color:#fff;height:25px;background-color:#333;padding:0 14px 0 0;position:absolute;bottom:0;left:0;z-index:999999;min-width:400px!important}.footerLight[_ngcontent-%COMP%]{color:#706969!important;background-color:#eee!important}.participantNames[_ngcontent-%COMP%]{font-size:small;height:inherit}.participantsButton[_ngcontent-%COMP%]{position:absolute;left:5px;top:none;height:-webkit-fill-available;height:-moz-available}.participantsButtonContainer[_ngcontent-%COMP%]{height:-webkit-fill-available;height:-moz-available}.mat-icon-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], .participantsButtonContainer[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{line-height:18px}"]}),e}(),Vt=function(){var e=function(){function e(t,n,i,r,s,a){_classCallCheck(this,e),this.route=t,this.utilsSrv=n,this.oVSessionService=i,this.oVDevicesService=r,this.loggerSrv=s,this.storageSrv=a,this.USER_NICKNAME="openviduCallNickname",this.join=new o.o,this.leaveSession=new o.o,this.publisherCreated=new o.o,this.isVideoActive=!0,this.isAudioActive=!0,this.localUsers=[],this.nicknameFormControl=new h.f("",[h.x.maxLength(25),h.x.required]),this.matcher=new It,this.log=this.loggerSrv.get("RoomConfigComponent")}return _createClass(e,[{key:"beforeunloadHandler",value:function(){this.close()}},{key:"ngOnInit",value:function(){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.subscribeToUsers(),this.setNicknameForm(),this.setRandomAvatar(),this.columns=window.innerWidth>900?2:1,this.setSessionName(),e.next=7,this.oVDevicesService.initDevices();case 7:this.setDevicesInfo(),this.initwebcamPublisher();case 9:case"end":return e.stop()}}),e,this)})))}},{key:"ngOnDestroy",value:function(){this.oVUsersSubscription.unsubscribe()}},{key:"onCameraSelected",value:function(e){var t;return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var i,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(i=null===(t=e)||void 0===t?void 0:t.value)){n.next=9;break}if(!this.oVDevicesService.needUpdateVideoTrack(i)){n.next=8;break}return o=this.oVDevicesService.cameraNeedsMirror(i),n.next=6,this.oVSessionService.replaceTrack(i,null,o);case 6:this.oVDevicesService.setCamSelected(i),this.camSelected=this.oVDevicesService.getCamSelected();case 8:return n.abrupt("return",(this.oVSessionService.publishVideo(!0),void(this.isVideoActive=!0)));case 9:this.oVSessionService.publishVideo(!1),this.isVideoActive=!1;case 10:case"end":return n.stop()}}),n,this)})))}},{key:"onMicrophoneSelected",value:function(e){var t;return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var i,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(i=null===(t=e)||void 0===t?void 0:t.value)){n.next=10;break}if(!this.oVDevicesService.needUpdateAudioTrack(i)){n.next=9;break}return console.log(this.camSelected),o=this.oVDevicesService.cameraNeedsMirror(this.camSelected.device),n.next=7,this.oVSessionService.replaceTrack(null,i,o);case 7:this.oVDevicesService.setMicSelected(i),this.micSelected=this.oVDevicesService.getMicSelected();case 9:return n.abrupt("return",(this.publishAudio(!0),void(this.isAudioActive=!0)));case 10:this.publishAudio(!1),this.isAudioActive=!1;case 11:case"end":return n.stop()}}),n,this)})))}},{key:"toggleCam",value:function(){this.isVideoActive=!this.isVideoActive,this.oVSessionService.publishVideo(this.isVideoActive),this.oVSessionService.areBothConnected()?(this.oVSessionService.disableWebcamUser(),this.oVSessionService.publishScreenAudio(this.isAudioActive)):this.oVSessionService.isOnlyScreenConnected()&&this.oVSessionService.enableWebcamUser()}},{key:"toggleScreenShare",value:function(){var e=this;if(this.oVSessionService.areBothConnected())this.oVSessionService.disableScreenUser();else{if(this.oVSessionService.isOnlyWebcamConnected()){var t=this.initScreenPublisher();return t.on("accessAllowed",(function(n){t.stream.getMediaStream().getVideoTracks()[0].addEventListener("ended",(function(){e.log.d("Clicked native stop button. Stopping screen sharing"),e.toggleScreenShare()})),e.oVSessionService.enableScreenUser(t),e.oVSessionService.hasWebcamVideoActive()||e.oVSessionService.disableWebcamUser()})),void t.on("accessDenied",(function(t){e.log.w("ScreenShare: Access Denied")}))}this.oVSessionService.enableWebcamUser(),this.oVSessionService.disableScreenUser()}}},{key:"toggleMic",value:function(){this.isAudioActive=!this.isAudioActive,this.publishAudio(this.isAudioActive)}},{key:"takePhoto",value:function(){this.oVSessionService.setWebcamAvatar(),this.videoAvatar=this.oVSessionService.getWebCamAvatar(),this.oVSessionService.setAvatar(et.VIDEO)}},{key:"setNicknameForm",value:function(){if(this.externalConfig)this.nicknameFormControl.setValue(this.externalConfig.getNickname());else{var e=this.storageSrv.get(this.USER_NICKNAME)||this.utilsSrv.generateNickname();this.nicknameFormControl.setValue(e)}}},{key:"eventKeyPress",value:function(e){e&&13===e.keyCode&&this.nicknameFormControl.valid&&this.joinSession()}},{key:"onResize",value:function(e){this.columns=e.target.innerWidth>900?2:1}},{key:"joinSession",value:function(){this.nicknameFormControl.valid&&(this.oVSessionService.setWebcamName(this.nicknameFormControl.value),this.storageSrv.set(this.USER_NICKNAME,this.nicknameFormControl.value),this.join.emit()),this.scrollToBottom()}},{key:"close",value:function(){this.leaveSession.emit(),this.showConfigCard=!1}},{key:"setAvatar",value:function(e){var t=e===et.VIDEO?et.VIDEO:et.RANDOM;(t===et.RANDOM&&this.randomAvatar||t===et.VIDEO&&this.videoAvatar)&&(this.avatarSelected=t)}},{key:"setDevicesInfo",value:function(){this.hasVideoDevices=this.oVDevicesService.hasVideoDeviceAvailable(),this.hasAudioDevices=this.oVDevicesService.hasAudioDeviceAvailable(),this.microphones=this.oVDevicesService.getMicrophones(),this.cameras=this.oVDevicesService.getCameras(),this.camSelected=this.oVDevicesService.getCamSelected(),this.micSelected=this.oVDevicesService.getMicSelected()}},{key:"setSessionName",value:function(){var e=this;this.route.params.subscribe((function(t){e.mySessionId=e.externalConfig?e.externalConfig.getSessionName():t.roomName,e.oVSessionService.setSessionId(e.mySessionId)}))}},{key:"setRandomAvatar",value:function(){this.randomAvatar=this.utilsSrv.getOpenViduAvatar(),this.oVSessionService.setAvatar(et.RANDOM,this.randomAvatar),this.avatarSelected=et.RANDOM}},{key:"scrollToBottom",value:function(){try{this.bodyCard.nativeElement.scrollTop=this.bodyCard.nativeElement.scrollHeight}catch(e){}}},{key:"initScreenPublisher",value:function(){var e=Xe.SCREEN,t=this.oVSessionService.isWebCamEnabled()&&this.oVSessionService.hasWebcamVideoActive(),n=this.oVSessionService.createProperties(e,void 0,!0,!t&&this.isAudioActive,!1);try{return this.oVSessionService.initScreenPublisher(void 0,n)}catch(i){this.log.e(i),this.utilsSrv.handlerScreenShareError(i)}}},{key:"publishAudio",value:function(e){this.oVSessionService.isWebCamEnabled()?this.oVSessionService.publishWebcamAudio(e):this.oVSessionService.publishScreenAudio(e)}},{key:"subscribeToUsers",value:function(){var e=this;this.oVUsersSubscription=this.oVSessionService.OVUsers.subscribe((function(t){e.localUsers=t}))}},{key:"initwebcamPublisher",value:function(){var e,t,n=(null===(e=this.micSelected)||void 0===e?void 0:e.device)||void 0,i=(null===(t=this.camSelected)||void 0===t?void 0:t.device)||void 0,o=this.oVSessionService.createProperties(!!this.hasVideoDevices&&i,!!this.hasAudioDevices&&n,!!this.hasVideoDevices&&this.isVideoActive,!!this.hasAudioDevices&&this.isAudioActive,this.camSelected&&this.camSelected.type===dt.FRONT),r=this.oVSessionService.initCamPublisher(void 0,o);this.handlePublisherSuccess(r),this.handlePublisherError(r)}},{key:"emitPublisher",value:function(e){this.publisherCreated.emit(e)}},{key:"handlePublisherSuccess",value:function(e){var t=this;e.once("accessAllowed",(function(){return Object(i.a)(t,void 0,void 0,regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.oVDevicesService.areEmptyLabels()){t.next=8;break}return t.next=3,this.oVDevicesService.initDevices();case 3:if(!this.hasAudioDevices){t.next=6;break}n=e.stream.getMediaStream().getAudioTracks()[0].label,this.oVDevicesService.setMicSelected(n);case 6:this.hasVideoDevices&&(i=e.stream.getMediaStream().getVideoTracks()[0].label,this.oVDevicesService.setCamSelected(i)),this.setDevicesInfo();case 8:this.emitPublisher(e),this.ovSettings.isAutoPublish()?this.joinSession():this.showConfigCard=!0;case 9:case"end":return t.stop()}}),t,this)})))}))}},{key:"handlePublisherError",value:function(e){var t=this;e.once("accessDenied",(function(e){var n;"DEVICE_ACCESS_DENIED"===e.name&&(n="Access to media devices was not allowed."),"NO_INPUT_SOURCE_SET"===e.name&&(n="No video or audio devices have been found. Please, connect at least one."),t.utilsSrv.showErrorMessage(e.name.replace(/_/g," "),n,!0),t.log.e(e.message)}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.Qb(v.a),o.Qb(ht),o.Qb(nt),o.Qb(gt),o.Qb(tt),o.Qb(ft))},e.\u0275cmp=o.Kb({type:e,selectors:[["app-room-config"]],viewQuery:function(e,t){var n;1&e&&o.Pc(Me,!0),2&e&&o.wc(n=o.fc())&&(t.bodyCard=n.first)},hostBindings:function(e,t){1&e&&o.ec("beforeunload",(function(){return t.beforeunloadHandler()}),!1,o.Ac)},inputs:{externalConfig:"externalConfig",ovSettings:"ovSettings"},outputs:{join:"join",leaveSession:"leaveSession",publisherCreated:"publisherCreated"},decls:3,vars:6,consts:[["id","roomConfig",3,"ngStyle"],["class","modal",4,"ngIf"],[1,"modal"],[1,"modal-dialog","modal-xl"],[1,"modal-content","cardContainer"],[1,"modal-header","cardHeader"],[1,"headerLogo"],["id","header_img","alt","OpenVidu Logo","src","https://raw.githubusercontent.com/OpenVidu/openvidu-call/master/openvidu-call-front/src/assets/images/openvidu_logo_grey.png"],[1,"headerTitle"],["mat-mini-fab","","id","closeButton",1,"closeButton",3,"click"],["color","warn","matTooltip","Close"],[1,"modal-body"],["bodyCard",""],[1,"row","align-items-center"],[1,"col-sm-6","col-md-6","col-lg-6","leftSection"],[1,"videoContainer"],[4,"ngFor","ngForOf"],[1,"avatarButton"],["mat-stroked-button","",3,"click"],["matTooltip","Take Photo"],[2,"margin-left","5px"],[1,"col-sm-6","col-md-6","col-lg-6","rightSection"],[1,"avatarContainer"],["fxLayout","row","fxFill","","id","avatarSection",4,"ngIf"],["fxLayout","row","fxFill","","id","devicesSection"],["fxLayout","","fxFlex",""],["fxFlex","20","fxLayoutAlign","center center",1,"one"],["mat-mini-fab","",1,"deviceButton",3,"click"],["matTooltip","Nickname"],["fxFlex","80","fxLayoutAlign","center center",1,"two"],["id","nicknameForm",1,"alternate-theme"],["matInput","","placeholder","Nickname","autocomplete","off",3,"formControl","errorStateMatcher","keypress"],[4,"ngIf"],["fxLayout","row","fxFill","","id","devicesSection",4,"ngIf"],[1,"modal-footer",2,"justify-content","center"],["mat-flat-button","","color","accent","form","nicknameForm","id","joinButton",3,"click"],[3,"streamManager","className",4,"ngIf"],["class","cameraMessageContainer",4,"ngIf"],[3,"streamManager","className"],[1,"cameraMessageContainer"],["fxLayout","row","fxFill","","id","avatarSection"],["fxFlex","100","fxLayoutAlign","center center",1,""],["id","avatarContainer",3,"click"],["id","imgText",4,"ngIf"],["id","avatarImg",3,"src",4,"ngIf"],["id","imgText","color","accent",3,"diameter",4,"ngIf"],["id","imgText"],["id","avatarImg",3,"src"],["id","imgText","color","accent",3,"diameter"],["mat-mini-fab","","id","configCardMicrophoneButton",1,"deviceButton",3,"click"],["matTooltip","Microphone Enabled",4,"ngIf"],["color","warn","matTooltip","Microphone Disabled",4,"ngIf"],[1,"alternate-theme"],["placeholder","Microphone Options",3,"ngModel","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["matTooltip","Microphone Enabled"],["color","warn","matTooltip","Microphone Disabled"],[3,"value"],["mat-mini-fab","","id","configCardCameraButton",1,"deviceButton",3,"click"],["matTooltip","Camera Enabled",4,"ngIf"],["color","warn","matTooltip","Camera Disabled",4,"ngIf"],["placeholder","Camera Options",3,"ngModel","selectionChange"],["matTooltip","Camera Enabled"],["color","warn","matTooltip","Camera Disabled"],["mat-mini-fab","","id","configCardScreenButton",1,"deviceButton",3,"click"],["matTooltip","Screen Share Enabled",4,"ngIf"],["color","warn","matTooltip","Screen Share Disabled",4,"ngIf"],["matInput","","disabled","","placeholder","Screen",3,"ngModel"],["matTooltip","Screen Share Enabled"],["color","warn","matTooltip","Screen Share Disabled"]],template:function(e,t){1&e&&(o.Wb(0,"div",0),o.jc(1,"isAutoPublish"),o.Ic(2,Ye,49,16,"div",1),o.Vb()),2&e&&(o.pc("ngStyle",o.tc(4,He,o.kc(1,2,t.ovSettings)?"none":"block")),o.Cb(2),o.pc("ngIf",t.showConfigCard))},directives:[p.n,f.b,p.m,l.a,u.a,d.a,p.l,S.d,S.f,S.a,S.c,h.z,h.q,h.r,y.c,C.b,h.c,h.p,h.g,Dt,x.b,y.b,M.a,h.s,w.n],pipes:[kt,Ot,St,xt],styles:[".cardHeader[_ngcontent-%COMP%]{background-color:#ccc;border-radius:14px 14px 0 0;text-align:center;height:50px}.headerLogo[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:inherit}.headerTitle[_ngcontent-%COMP%]{font-size:large;margin:auto}.videoContainer[_ngcontent-%COMP%]{width:100%;height:calc(100% - 50px);text-align:center;margin:auto}.avatarButton[_ngcontent-%COMP%]{text-align:center;margin-top:10px}.videoContainer[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline}.ovVideoSmall[_ngcontent-%COMP%]{position:absolute;width:30%;left:15px;bottom:46px}.cameraMessageContainer[_ngcontent-%COMP%]{height:100%;width:100%;text-align:center;border:2px solid;font-size:large;display:table}.cameraMessageContainer[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle}.deviceButton[_ngcontent-%COMP%]{box-shadow:none;background-color:#f5f5f5}.rightSection[_ngcontent-%COMP%]{padding-left:0!important;text-align:center}.avatarContainer[_ngcontent-%COMP%]{background-color:#f5f5f5;height:40px;text-align:center;display:flex}.avatarContainer[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:auto}.closeButton[_ngcontent-%COMP%]{position:absolute;top:5px;right:7px;box-shadow:none;background-color:transparent}#roomConfig[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%}#header_img[_ngcontent-%COMP%]{max-width:150px}#sessionInfo[_ngcontent-%COMP%]{margin-top:0}#joinButton[_ngcontent-%COMP%]{margin:15px;width:80%}#photoButton[_ngcontent-%COMP%]{margin:10px;text-align:center}#avatarContainer[_ngcontent-%COMP%]{border:1px solid #b6b6b6;width:100px;height:100px;margin:10px;position:relative;cursor:pointer;display:inline-block}#devicesSection[_ngcontent-%COMP%]{margin:15px 0}#avatarSection[_ngcontent-%COMP%], #devicesSection[_ngcontent-%COMP%]{height:-webkit-fit-content!important;height:-moz-fit-content!important;height:fit-content!important;min-height:auto!important}#imgText[_ngcontent-%COMP%]{display:table}#avatarImg[_ngcontent-%COMP%], #imgText[_ngcontent-%COMP%]{text-align:center;position:absolute;margin:auto;top:25%;left:0;right:0;bottom:25%}#avatarImg[_ngcontent-%COMP%]{height:83%;width:83%}#avatarContainer[_ngcontent-%COMP%], #avatarImg[_ngcontent-%COMP%]{border-radius:25%}#optionsContent[_ngcontent-%COMP%]{position:initial}#nicknameForm[_ngcontent-%COMP%], mat-form-field[_ngcontent-%COMP%]{width:100%}mat-card[_ngcontent-%COMP%]{max-width:85%!important;position:absolute;top:0;bottom:0;left:0;right:0;max-height:90%;margin:auto;padding:20px;overflow:auto;border:2px solid #fff;border-right:4px solid #fff}@media only screen and (max-width:959px){mat-card[_ngcontent-%COMP%]{max-width:80%!important;max-height:80%!important}}  .mat-option-text{color:#000!important}  .mat-slider-thumb{visibility:hidden}  .mat-slider-vertical .mat-slider-track-background,   .mat-slider-vertical .mat-slider-track-fill,   .mat-slider-vertical .mat-slider-track-wrapper{width:10px!important}[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#b8afaf;border-radius:4px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#888}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#e1e1e1;border-radius:4px}*[_ngcontent-%COMP%], [_ngcontent-%COMP%]:after, [_ngcontent-%COMP%]:before{box-sizing:border-box}.container[_ngcontent-%COMP%]{padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media (min-width:768px){.container[_ngcontent-%COMP%]{width:750px}}@media (min-width:992px){.container[_ngcontent-%COMP%]{width:970px}}@media (min-width:1200px){.container[_ngcontent-%COMP%]{width:1170px}}.container-fluid[_ngcontent-%COMP%]{padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}.row[_ngcontent-%COMP%]{margin-right:-15px;margin-left:-15px}.row-no-gutters[_ngcontent-%COMP%]{margin-right:0;margin-left:0}.row-no-gutters[_ngcontent-%COMP%]   [class*=col-][_ngcontent-%COMP%]{padding-right:0;padding-left:0}.col-lg-1[_ngcontent-%COMP%], .col-lg-10[_ngcontent-%COMP%], .col-lg-11[_ngcontent-%COMP%], .col-lg-12[_ngcontent-%COMP%], .col-lg-2[_ngcontent-%COMP%], .col-lg-3[_ngcontent-%COMP%], .col-lg-4[_ngcontent-%COMP%], .col-lg-5[_ngcontent-%COMP%], .col-lg-6[_ngcontent-%COMP%], .col-lg-7[_ngcontent-%COMP%], .col-lg-8[_ngcontent-%COMP%], .col-lg-9[_ngcontent-%COMP%], .col-md-1[_ngcontent-%COMP%], .col-md-10[_ngcontent-%COMP%], .col-md-11[_ngcontent-%COMP%], .col-md-12[_ngcontent-%COMP%], .col-md-2[_ngcontent-%COMP%], .col-md-3[_ngcontent-%COMP%], .col-md-4[_ngcontent-%COMP%], .col-md-5[_ngcontent-%COMP%], .col-md-6[_ngcontent-%COMP%], .col-md-7[_ngcontent-%COMP%], .col-md-8[_ngcontent-%COMP%], .col-md-9[_ngcontent-%COMP%], .col-sm-1[_ngcontent-%COMP%], .col-sm-10[_ngcontent-%COMP%], .col-sm-11[_ngcontent-%COMP%], .col-sm-12[_ngcontent-%COMP%], .col-sm-2[_ngcontent-%COMP%], .col-sm-3[_ngcontent-%COMP%], .col-sm-4[_ngcontent-%COMP%], .col-sm-5[_ngcontent-%COMP%], .col-sm-6[_ngcontent-%COMP%], .col-sm-7[_ngcontent-%COMP%], .col-sm-8[_ngcontent-%COMP%], .col-sm-9[_ngcontent-%COMP%], .col-xs-1[_ngcontent-%COMP%], .col-xs-10[_ngcontent-%COMP%], .col-xs-11[_ngcontent-%COMP%], .col-xs-12[_ngcontent-%COMP%], .col-xs-2[_ngcontent-%COMP%], .col-xs-3[_ngcontent-%COMP%], .col-xs-4[_ngcontent-%COMP%], .col-xs-5[_ngcontent-%COMP%], .col-xs-6[_ngcontent-%COMP%], .col-xs-7[_ngcontent-%COMP%], .col-xs-8[_ngcontent-%COMP%], .col-xs-9[_ngcontent-%COMP%]{position:relative;min-height:1px;padding-right:15px;padding-left:15px}.col-xs-1[_ngcontent-%COMP%], .col-xs-10[_ngcontent-%COMP%], .col-xs-11[_ngcontent-%COMP%], .col-xs-12[_ngcontent-%COMP%], .col-xs-2[_ngcontent-%COMP%], .col-xs-3[_ngcontent-%COMP%], .col-xs-4[_ngcontent-%COMP%], .col-xs-5[_ngcontent-%COMP%], .col-xs-6[_ngcontent-%COMP%], .col-xs-7[_ngcontent-%COMP%], .col-xs-8[_ngcontent-%COMP%], .col-xs-9[_ngcontent-%COMP%]{float:left}.col-xs-12[_ngcontent-%COMP%]{width:100%}.col-xs-11[_ngcontent-%COMP%]{width:91.66666667%}.col-xs-10[_ngcontent-%COMP%]{width:83.33333333%}.col-xs-9[_ngcontent-%COMP%]{width:75%}.col-xs-8[_ngcontent-%COMP%]{width:66.66666667%}.col-xs-7[_ngcontent-%COMP%]{width:58.33333333%}.col-xs-6[_ngcontent-%COMP%]{width:50%}.col-xs-5[_ngcontent-%COMP%]{width:41.66666667%}.col-xs-4[_ngcontent-%COMP%]{width:33.33333333%}.col-xs-3[_ngcontent-%COMP%]{width:25%}.col-xs-2[_ngcontent-%COMP%]{width:16.66666667%}.col-xs-1[_ngcontent-%COMP%]{width:8.33333333%}.col-xs-pull-12[_ngcontent-%COMP%]{right:100%}.col-xs-pull-11[_ngcontent-%COMP%]{right:91.66666667%}.col-xs-pull-10[_ngcontent-%COMP%]{right:83.33333333%}.col-xs-pull-9[_ngcontent-%COMP%]{right:75%}.col-xs-pull-8[_ngcontent-%COMP%]{right:66.66666667%}.col-xs-pull-7[_ngcontent-%COMP%]{right:58.33333333%}.col-xs-pull-6[_ngcontent-%COMP%]{right:50%}.col-xs-pull-5[_ngcontent-%COMP%]{right:41.66666667%}.col-xs-pull-4[_ngcontent-%COMP%]{right:33.33333333%}.col-xs-pull-3[_ngcontent-%COMP%]{right:25%}.col-xs-pull-2[_ngcontent-%COMP%]{right:16.66666667%}.col-xs-pull-1[_ngcontent-%COMP%]{right:8.33333333%}.col-xs-pull-0[_ngcontent-%COMP%]{right:auto}.col-xs-push-12[_ngcontent-%COMP%]{left:100%}.col-xs-push-11[_ngcontent-%COMP%]{left:91.66666667%}.col-xs-push-10[_ngcontent-%COMP%]{left:83.33333333%}.col-xs-push-9[_ngcontent-%COMP%]{left:75%}.col-xs-push-8[_ngcontent-%COMP%]{left:66.66666667%}.col-xs-push-7[_ngcontent-%COMP%]{left:58.33333333%}.col-xs-push-6[_ngcontent-%COMP%]{left:50%}.col-xs-push-5[_ngcontent-%COMP%]{left:41.66666667%}.col-xs-push-4[_ngcontent-%COMP%]{left:33.33333333%}.col-xs-push-3[_ngcontent-%COMP%]{left:25%}.col-xs-push-2[_ngcontent-%COMP%]{left:16.66666667%}.col-xs-push-1[_ngcontent-%COMP%]{left:8.33333333%}.col-xs-push-0[_ngcontent-%COMP%]{left:auto}.col-xs-offset-12[_ngcontent-%COMP%]{margin-left:100%}.col-xs-offset-11[_ngcontent-%COMP%]{margin-left:91.66666667%}.col-xs-offset-10[_ngcontent-%COMP%]{margin-left:83.33333333%}.col-xs-offset-9[_ngcontent-%COMP%]{margin-left:75%}.col-xs-offset-8[_ngcontent-%COMP%]{margin-left:66.66666667%}.col-xs-offset-7[_ngcontent-%COMP%]{margin-left:58.33333333%}.col-xs-offset-6[_ngcontent-%COMP%]{margin-left:50%}.col-xs-offset-5[_ngcontent-%COMP%]{margin-left:41.66666667%}.col-xs-offset-4[_ngcontent-%COMP%]{margin-left:33.33333333%}.col-xs-offset-3[_ngcontent-%COMP%]{margin-left:25%}.col-xs-offset-2[_ngcontent-%COMP%]{margin-left:16.66666667%}.col-xs-offset-1[_ngcontent-%COMP%]{margin-left:8.33333333%}.col-xs-offset-0[_ngcontent-%COMP%]{margin-left:0}@media (min-width:768px){.col-sm-1[_ngcontent-%COMP%], .col-sm-10[_ngcontent-%COMP%], .col-sm-11[_ngcontent-%COMP%], .col-sm-12[_ngcontent-%COMP%], .col-sm-2[_ngcontent-%COMP%], .col-sm-3[_ngcontent-%COMP%], .col-sm-4[_ngcontent-%COMP%], .col-sm-5[_ngcontent-%COMP%], .col-sm-6[_ngcontent-%COMP%], .col-sm-7[_ngcontent-%COMP%], .col-sm-8[_ngcontent-%COMP%], .col-sm-9[_ngcontent-%COMP%]{float:left}.col-sm-12[_ngcontent-%COMP%]{width:100%}.col-sm-11[_ngcontent-%COMP%]{width:91.66666667%}.col-sm-10[_ngcontent-%COMP%]{width:83.33333333%}.col-sm-9[_ngcontent-%COMP%]{width:75%}.col-sm-8[_ngcontent-%COMP%]{width:66.66666667%}.col-sm-7[_ngcontent-%COMP%]{width:58.33333333%}.col-sm-6[_ngcontent-%COMP%]{width:50%}.col-sm-5[_ngcontent-%COMP%]{width:41.66666667%}.col-sm-4[_ngcontent-%COMP%]{width:33.33333333%}.col-sm-3[_ngcontent-%COMP%]{width:25%}.col-sm-2[_ngcontent-%COMP%]{width:16.66666667%}.col-sm-1[_ngcontent-%COMP%]{width:8.33333333%}.col-sm-pull-12[_ngcontent-%COMP%]{right:100%}.col-sm-pull-11[_ngcontent-%COMP%]{right:91.66666667%}.col-sm-pull-10[_ngcontent-%COMP%]{right:83.33333333%}.col-sm-pull-9[_ngcontent-%COMP%]{right:75%}.col-sm-pull-8[_ngcontent-%COMP%]{right:66.66666667%}.col-sm-pull-7[_ngcontent-%COMP%]{right:58.33333333%}.col-sm-pull-6[_ngcontent-%COMP%]{right:50%}.col-sm-pull-5[_ngcontent-%COMP%]{right:41.66666667%}.col-sm-pull-4[_ngcontent-%COMP%]{right:33.33333333%}.col-sm-pull-3[_ngcontent-%COMP%]{right:25%}.col-sm-pull-2[_ngcontent-%COMP%]{right:16.66666667%}.col-sm-pull-1[_ngcontent-%COMP%]{right:8.33333333%}.col-sm-pull-0[_ngcontent-%COMP%]{right:auto}.col-sm-push-12[_ngcontent-%COMP%]{left:100%}.col-sm-push-11[_ngcontent-%COMP%]{left:91.66666667%}.col-sm-push-10[_ngcontent-%COMP%]{left:83.33333333%}.col-sm-push-9[_ngcontent-%COMP%]{left:75%}.col-sm-push-8[_ngcontent-%COMP%]{left:66.66666667%}.col-sm-push-7[_ngcontent-%COMP%]{left:58.33333333%}.col-sm-push-6[_ngcontent-%COMP%]{left:50%}.col-sm-push-5[_ngcontent-%COMP%]{left:41.66666667%}.col-sm-push-4[_ngcontent-%COMP%]{left:33.33333333%}.col-sm-push-3[_ngcontent-%COMP%]{left:25%}.col-sm-push-2[_ngcontent-%COMP%]{left:16.66666667%}.col-sm-push-1[_ngcontent-%COMP%]{left:8.33333333%}.col-sm-push-0[_ngcontent-%COMP%]{left:auto}.col-sm-offset-12[_ngcontent-%COMP%]{margin-left:100%}.col-sm-offset-11[_ngcontent-%COMP%]{margin-left:91.66666667%}.col-sm-offset-10[_ngcontent-%COMP%]{margin-left:83.33333333%}.col-sm-offset-9[_ngcontent-%COMP%]{margin-left:75%}.col-sm-offset-8[_ngcontent-%COMP%]{margin-left:66.66666667%}.col-sm-offset-7[_ngcontent-%COMP%]{margin-left:58.33333333%}.col-sm-offset-6[_ngcontent-%COMP%]{margin-left:50%}.col-sm-offset-5[_ngcontent-%COMP%]{margin-left:41.66666667%}.col-sm-offset-4[_ngcontent-%COMP%]{margin-left:33.33333333%}.col-sm-offset-3[_ngcontent-%COMP%]{margin-left:25%}.col-sm-offset-2[_ngcontent-%COMP%]{margin-left:16.66666667%}.col-sm-offset-1[_ngcontent-%COMP%]{margin-left:8.33333333%}.col-sm-offset-0[_ngcontent-%COMP%]{margin-left:0}}@media (min-width:992px){.col-md-1[_ngcontent-%COMP%], .col-md-10[_ngcontent-%COMP%], .col-md-11[_ngcontent-%COMP%], .col-md-12[_ngcontent-%COMP%], .col-md-2[_ngcontent-%COMP%], .col-md-3[_ngcontent-%COMP%], .col-md-4[_ngcontent-%COMP%], .col-md-5[_ngcontent-%COMP%], .col-md-6[_ngcontent-%COMP%], .col-md-7[_ngcontent-%COMP%], .col-md-8[_ngcontent-%COMP%], .col-md-9[_ngcontent-%COMP%]{float:left}.col-md-12[_ngcontent-%COMP%]{width:100%}.col-md-11[_ngcontent-%COMP%]{width:91.66666667%}.col-md-10[_ngcontent-%COMP%]{width:83.33333333%}.col-md-9[_ngcontent-%COMP%]{width:75%}.col-md-8[_ngcontent-%COMP%]{width:66.66666667%}.col-md-7[_ngcontent-%COMP%]{width:58.33333333%}.col-md-6[_ngcontent-%COMP%]{width:50%}.col-md-5[_ngcontent-%COMP%]{width:41.66666667%}.col-md-4[_ngcontent-%COMP%]{width:33.33333333%}.col-md-3[_ngcontent-%COMP%]{width:25%}.col-md-2[_ngcontent-%COMP%]{width:16.66666667%}.col-md-1[_ngcontent-%COMP%]{width:8.33333333%}.col-md-pull-12[_ngcontent-%COMP%]{right:100%}.col-md-pull-11[_ngcontent-%COMP%]{right:91.66666667%}.col-md-pull-10[_ngcontent-%COMP%]{right:83.33333333%}.col-md-pull-9[_ngcontent-%COMP%]{right:75%}.col-md-pull-8[_ngcontent-%COMP%]{right:66.66666667%}.col-md-pull-7[_ngcontent-%COMP%]{right:58.33333333%}.col-md-pull-6[_ngcontent-%COMP%]{right:50%}.col-md-pull-5[_ngcontent-%COMP%]{right:41.66666667%}.col-md-pull-4[_ngcontent-%COMP%]{right:33.33333333%}.col-md-pull-3[_ngcontent-%COMP%]{right:25%}.col-md-pull-2[_ngcontent-%COMP%]{right:16.66666667%}.col-md-pull-1[_ngcontent-%COMP%]{right:8.33333333%}.col-md-pull-0[_ngcontent-%COMP%]{right:auto}.col-md-push-12[_ngcontent-%COMP%]{left:100%}.col-md-push-11[_ngcontent-%COMP%]{left:91.66666667%}.col-md-push-10[_ngcontent-%COMP%]{left:83.33333333%}.col-md-push-9[_ngcontent-%COMP%]{left:75%}.col-md-push-8[_ngcontent-%COMP%]{left:66.66666667%}.col-md-push-7[_ngcontent-%COMP%]{left:58.33333333%}.col-md-push-6[_ngcontent-%COMP%]{left:50%}.col-md-push-5[_ngcontent-%COMP%]{left:41.66666667%}.col-md-push-4[_ngcontent-%COMP%]{left:33.33333333%}.col-md-push-3[_ngcontent-%COMP%]{left:25%}.col-md-push-2[_ngcontent-%COMP%]{left:16.66666667%}.col-md-push-1[_ngcontent-%COMP%]{left:8.33333333%}.col-md-push-0[_ngcontent-%COMP%]{left:auto}.col-md-offset-12[_ngcontent-%COMP%]{margin-left:100%}.col-md-offset-11[_ngcontent-%COMP%]{margin-left:91.66666667%}.col-md-offset-10[_ngcontent-%COMP%]{margin-left:83.33333333%}.col-md-offset-9[_ngcontent-%COMP%]{margin-left:75%}.col-md-offset-8[_ngcontent-%COMP%]{margin-left:66.66666667%}.col-md-offset-7[_ngcontent-%COMP%]{margin-left:58.33333333%}.col-md-offset-6[_ngcontent-%COMP%]{margin-left:50%}.col-md-offset-5[_ngcontent-%COMP%]{margin-left:41.66666667%}.col-md-offset-4[_ngcontent-%COMP%]{margin-left:33.33333333%}.col-md-offset-3[_ngcontent-%COMP%]{margin-left:25%}.col-md-offset-2[_ngcontent-%COMP%]{margin-left:16.66666667%}.col-md-offset-1[_ngcontent-%COMP%]{margin-left:8.33333333%}.col-md-offset-0[_ngcontent-%COMP%]{margin-left:0}}@media (min-width:1200px){.col-lg-1[_ngcontent-%COMP%], .col-lg-10[_ngcontent-%COMP%], .col-lg-11[_ngcontent-%COMP%], .col-lg-12[_ngcontent-%COMP%], .col-lg-2[_ngcontent-%COMP%], .col-lg-3[_ngcontent-%COMP%], .col-lg-4[_ngcontent-%COMP%], .col-lg-5[_ngcontent-%COMP%], .col-lg-6[_ngcontent-%COMP%], .col-lg-7[_ngcontent-%COMP%], .col-lg-8[_ngcontent-%COMP%], .col-lg-9[_ngcontent-%COMP%]{float:left}.col-lg-12[_ngcontent-%COMP%]{width:100%}.col-lg-11[_ngcontent-%COMP%]{width:91.66666667%}.col-lg-10[_ngcontent-%COMP%]{width:83.33333333%}.col-lg-9[_ngcontent-%COMP%]{width:75%}.col-lg-8[_ngcontent-%COMP%]{width:66.66666667%}.col-lg-7[_ngcontent-%COMP%]{width:58.33333333%}.col-lg-6[_ngcontent-%COMP%]{width:50%}.col-lg-5[_ngcontent-%COMP%]{width:41.66666667%}.col-lg-4[_ngcontent-%COMP%]{width:33.33333333%}.col-lg-3[_ngcontent-%COMP%]{width:25%}.col-lg-2[_ngcontent-%COMP%]{width:16.66666667%}.col-lg-1[_ngcontent-%COMP%]{width:8.33333333%}.col-lg-pull-12[_ngcontent-%COMP%]{right:100%}.col-lg-pull-11[_ngcontent-%COMP%]{right:91.66666667%}.col-lg-pull-10[_ngcontent-%COMP%]{right:83.33333333%}.col-lg-pull-9[_ngcontent-%COMP%]{right:75%}.col-lg-pull-8[_ngcontent-%COMP%]{right:66.66666667%}.col-lg-pull-7[_ngcontent-%COMP%]{right:58.33333333%}.col-lg-pull-6[_ngcontent-%COMP%]{right:50%}.col-lg-pull-5[_ngcontent-%COMP%]{right:41.66666667%}.col-lg-pull-4[_ngcontent-%COMP%]{right:33.33333333%}.col-lg-pull-3[_ngcontent-%COMP%]{right:25%}.col-lg-pull-2[_ngcontent-%COMP%]{right:16.66666667%}.col-lg-pull-1[_ngcontent-%COMP%]{right:8.33333333%}.col-lg-pull-0[_ngcontent-%COMP%]{right:auto}.col-lg-push-12[_ngcontent-%COMP%]{left:100%}.col-lg-push-11[_ngcontent-%COMP%]{left:91.66666667%}.col-lg-push-10[_ngcontent-%COMP%]{left:83.33333333%}.col-lg-push-9[_ngcontent-%COMP%]{left:75%}.col-lg-push-8[_ngcontent-%COMP%]{left:66.66666667%}.col-lg-push-7[_ngcontent-%COMP%]{left:58.33333333%}.col-lg-push-6[_ngcontent-%COMP%]{left:50%}.col-lg-push-5[_ngcontent-%COMP%]{left:41.66666667%}.col-lg-push-4[_ngcontent-%COMP%]{left:33.33333333%}.col-lg-push-3[_ngcontent-%COMP%]{left:25%}.col-lg-push-2[_ngcontent-%COMP%]{left:16.66666667%}.col-lg-push-1[_ngcontent-%COMP%]{left:8.33333333%}.col-lg-push-0[_ngcontent-%COMP%]{left:auto}.col-lg-offset-12[_ngcontent-%COMP%]{margin-left:100%}.col-lg-offset-11[_ngcontent-%COMP%]{margin-left:91.66666667%}.col-lg-offset-10[_ngcontent-%COMP%]{margin-left:83.33333333%}.col-lg-offset-9[_ngcontent-%COMP%]{margin-left:75%}.col-lg-offset-8[_ngcontent-%COMP%]{margin-left:66.66666667%}.col-lg-offset-7[_ngcontent-%COMP%]{margin-left:58.33333333%}.col-lg-offset-6[_ngcontent-%COMP%]{margin-left:50%}.col-lg-offset-5[_ngcontent-%COMP%]{margin-left:41.66666667%}.col-lg-offset-4[_ngcontent-%COMP%]{margin-left:33.33333333%}.col-lg-offset-3[_ngcontent-%COMP%]{margin-left:25%}.col-lg-offset-2[_ngcontent-%COMP%]{margin-left:16.66666667%}.col-lg-offset-1[_ngcontent-%COMP%]{margin-left:8.33333333%}.col-lg-offset-0[_ngcontent-%COMP%]{margin-left:0}}.modal-open[_ngcontent-%COMP%]{overflow:hidden}.modal[_ngcontent-%COMP%]{top:0;right:0;bottom:0;left:0;z-index:1050;overflow:hidden;-webkit-overflow-scrolling:touch;outline:0;display:block;height:100%}.modal.fade[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{transform:translate(0,-25%);transition:transform .3s ease-out}.modal.in[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{transform:translate(0,0)}.modal-open[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]{overflow-x:hidden;overflow-y:auto}.modal-dialog[_ngcontent-%COMP%]{width:auto;margin:30px;padding:100px 0;position:absolute;top:40%;left:50%;transform:translate(-50%,-50%)}.modal-content[_ngcontent-%COMP%]{position:relative;background-color:#fff;-webkit-background-clip:padding-box;background-clip:padding-box;border:1px solid rgba(0,0,0,.2);border-radius:15px;box-shadow:0 3px 9px rgba(0,0,0,.5);outline:0}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;right:0;bottom:0;left:0;z-index:1040;background-color:#000}.modal-backdrop.fade[_ngcontent-%COMP%]{opacity:0}.modal-backdrop.in[_ngcontent-%COMP%]{opacity:.5}.modal-header[_ngcontent-%COMP%]{padding:15px;border-bottom:1px solid #e5e5e5}.modal-header[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{margin-top:-2px}.modal-title[_ngcontent-%COMP%]{margin:0;line-height:1.42857143}.modal-body[_ngcontent-%COMP%]{position:relative;padding:15px}.modal-footer[_ngcontent-%COMP%]{padding:1px;text-align:center;border-top:1px solid #e5e5e5}.modal-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%] + .btn[_ngcontent-%COMP%]{margin-bottom:0;margin-left:5px}.modal-footer[_ngcontent-%COMP%]   .btn-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%] + .btn[_ngcontent-%COMP%]{margin-left:-1px}.modal-footer[_ngcontent-%COMP%]   .btn-block[_ngcontent-%COMP%] + .btn-block[_ngcontent-%COMP%]{margin-left:0}.modal-scrollbar-measure[_ngcontent-%COMP%]{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}@media (max-width:600px){.headerTitle[_ngcontent-%COMP%]{display:none}.headerLogo[_ngcontent-%COMP%]{right:0}}@media (max-width:767px){.row[_ngcontent-%COMP%]{height:100%}.leftSection[_ngcontent-%COMP%]{height:60%}.rightSection[_ngcontent-%COMP%]{padding-right:0!important}.headerTitle[_ngcontent-%COMP%]{font-size:medium}.modal-content[_ngcontent-%COMP%]{max-height:100%;height:100%}.modal-dialog[_ngcontent-%COMP%]{height:calc(100% - 10px);margin:5px;padding:0;position:relative;top:0;left:0;transform:none}.modal-body[_ngcontent-%COMP%]{padding:10px 20px;overflow:auto;height:calc(100% - 120px);overflow:-moz-scrollbars-vertical;overflow-x:hidden;overflow-y:scroll}.modal[_ngcontent-%COMP%]{max-height:100%}.videoContainer[_ngcontent-%COMP%]{width:60%}}@media (min-width:768px){.ovVideoSmall[_ngcontent-%COMP%]{width:40%}.row[_ngcontent-%COMP%]{display:flex!important}.modal-dialog[_ngcontent-%COMP%]{width:90%;margin:55px auto}.modal-content[_ngcontent-%COMP%]{box-shadow:0 5px 15px rgba(0,0,0,.5)}.modal-sm[_ngcontent-%COMP%]{width:300px}}@media (min-width:992px){.modal-lg[_ngcontent-%COMP%]{width:75%}}@media (min-width:1440px){.modal-xl[_ngcontent-%COMP%]{width:75%}}"]}),e}(),Ut=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=o.Ob({type:e}),e.\u0275inj=o.Nb({factory:function(t){return new(t||e)},providers:[mt,nt,ht,it,gt,tt,rt,ot,ft],imports:[[p.c,m.c,h.k,h.u,l.b,P.a,O.b,u.b,C.c,y.e,g.c,d.b,k.b,I.a,M.b,w.o,x.a,R.a,b.d,c.b,T.a,_.a.forRoot()]]}),e}()},"/dLB":function(e,t,n){"use strict";var i;t.__esModule=!0,(i=t.VideoInsertMode||(t.VideoInsertMode={})).AFTER="AFTER",i.APPEND="APPEND",i.BEFORE="BEFORE",i.PREPEND="PREPEND",i.REPLACE="REPLACE"},"/u9M":function(e,t,n){"use strict";t.__esModule=!0;var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n("LXjW")),o=i.tokenize,r=i.options.Options;function s(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function a(e){return e.replace(/"/g,"&quot;")}function c(e){if(!e)return"";var t=[];for(var n in e)t.push(n+'="'+a(e[n]+"")+'"');return t.join(" ")}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=new r(t);for(var n=o(e),i=[],l=0;l<n.length;l++){var u=n[l];if("nl"===u.type&&t.nl2br)i.push("<br>\n");else if(u.isLink&&t.check(u)){var d=t.resolve(u),p=d.formatted,h=d.formattedHref,f=d.tagName,g=d.className,m=d.target,v=d.attributes,b="<"+f+' href="'+a(h)+'"';g&&(b+=' class="'+a(g)+'"'),m&&(b+=' target="'+a(m)+'"'),v&&(b+=" "+c(v)),b+=">"+s(p)+"</"+f+">",i.push(b)}else i.push(s(u.toString()))}return i.join("")}if(!String.prototype.linkify)try{Object.defineProperty(String.prototype,"linkify",{set:function(){},get:function(){return function(e){return l(this,e)}}})}catch(u){String.prototype.linkify||(String.prototype.linkify=function(e){return l(this,e)})}t.default=l},"0srX":function(e,t,n){"use strict";n.r(t),n.d(t,"v1",(function(){return h})),n.d(t,"v3",(function(){return C})),n.d(t,"v4",(function(){return O})),n.d(t,"v5",(function(){return x}));var i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),o=new Uint8Array(16);function r(){if(!i)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(o)}for(var s=[],a=0;a<256;++a)s[a]=(a+256).toString(16).substr(1);var c,l,u=function(e,t){var n=t||0;return[s[e[n++]],s[e[n++]],s[e[n++]],s[e[n++]],"-",s[e[n++]],s[e[n++]],"-",s[e[n++]],s[e[n++]],"-",s[e[n++]],s[e[n++]],"-",s[e[n++]],s[e[n++]],s[e[n++]],s[e[n++]],s[e[n++]],s[e[n++]]].join("")},d=0,p=0,h=function(e,t,n){var i=t&&n||0,o=t||[],s=(e=e||{}).node||c,a=void 0!==e.clockseq?e.clockseq:l;if(null==s||null==a){var h=e.random||(e.rng||r)();null==s&&(s=c=[1|h[0],h[1],h[2],h[3],h[4],h[5]]),null==a&&(a=l=16383&(h[6]<<8|h[7]))}var f=void 0!==e.msecs?e.msecs:(new Date).getTime(),g=void 0!==e.nsecs?e.nsecs:p+1,m=f-d+(g-p)/1e4;if(m<0&&void 0===e.clockseq&&(a=a+1&16383),(m<0||f>d)&&void 0===e.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");d=f,p=g,l=a;var v=(1e4*(268435455&(f+=122192928e5))+g)%4294967296;o[i++]=v>>>24&255,o[i++]=v>>>16&255,o[i++]=v>>>8&255,o[i++]=255&v;var b=f/4294967296*1e4&268435455;o[i++]=b>>>8&255,o[i++]=255&b,o[i++]=b>>>24&15|16,o[i++]=b>>>16&255,o[i++]=a>>>8|128,o[i++]=255&a;for(var _=0;_<6;++_)o[i+_]=s[_];return t||u(o)},f=function(e,t,n){var i=function(e,i,o,r){var s=o&&r||0;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=new Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(e)),"string"==typeof i&&(i=function(e){var t=[];return e.replace(/[a-fA-F0-9]{2}/g,(function(e){t.push(parseInt(e,16))})),t}(i)),!Array.isArray(e))throw TypeError("value must be an array of bytes");if(!Array.isArray(i)||16!==i.length)throw TypeError("namespace must be uuid string or an Array of 16 byte values");var a=n(i.concat(e));if(a[6]=15&a[6]|t,a[8]=63&a[8]|128,o)for(var c=0;c<16;++c)o[s+c]=a[c];return o||u(a)};try{i.name=e}catch(o){}return i.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",i.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",i};function g(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function m(e,t,n,i,o,r){return g((s=g(g(t,e),g(i,r)))<<(a=o)|s>>>32-a,n);var s,a}function v(e,t,n,i,o,r,s){return m(t&n|~t&i,e,t,o,r,s)}function b(e,t,n,i,o,r,s){return m(t&i|n&~i,e,t,o,r,s)}function _(e,t,n,i,o,r,s){return m(t^n^i,e,t,o,r,s)}function y(e,t,n,i,o,r,s){return m(n^(t|~i),e,t,o,r,s)}var C=f("v3",48,(function(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Array(t.length);for(var n=0;n<t.length;n++)e[n]=t.charCodeAt(n)}return function(e){var t,n,i,o=[],r=32*e.length;for(t=0;t<r;t+=8)n=e[t>>5]>>>t%32&255,i=parseInt("0123456789abcdef".charAt(n>>>4&15)+"0123456789abcdef".charAt(15&n),16),o.push(i);return o}(function(e,t){var n,i,o,r,s;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var a=1732584193,c=-271733879,l=-1732584194,u=271733878;for(n=0;n<e.length;n+=16)i=a,o=c,r=l,s=u,a=v(a,c,l,u,e[n],7,-680876936),u=v(u,a,c,l,e[n+1],12,-389564586),l=v(l,u,a,c,e[n+2],17,606105819),c=v(c,l,u,a,e[n+3],22,-1044525330),a=v(a,c,l,u,e[n+4],7,-176418897),u=v(u,a,c,l,e[n+5],12,1200080426),l=v(l,u,a,c,e[n+6],17,-1473231341),c=v(c,l,u,a,e[n+7],22,-45705983),a=v(a,c,l,u,e[n+8],7,1770035416),u=v(u,a,c,l,e[n+9],12,-1958414417),l=v(l,u,a,c,e[n+10],17,-42063),c=v(c,l,u,a,e[n+11],22,-1990404162),a=v(a,c,l,u,e[n+12],7,1804603682),u=v(u,a,c,l,e[n+13],12,-40341101),l=v(l,u,a,c,e[n+14],17,-1502002290),a=b(a,c=v(c,l,u,a,e[n+15],22,1236535329),l,u,e[n+1],5,-165796510),u=b(u,a,c,l,e[n+6],9,-1069501632),l=b(l,u,a,c,e[n+11],14,643717713),c=b(c,l,u,a,e[n],20,-373897302),a=b(a,c,l,u,e[n+5],5,-701558691),u=b(u,a,c,l,e[n+10],9,38016083),l=b(l,u,a,c,e[n+15],14,-660478335),c=b(c,l,u,a,e[n+4],20,-405537848),a=b(a,c,l,u,e[n+9],5,568446438),u=b(u,a,c,l,e[n+14],9,-1019803690),l=b(l,u,a,c,e[n+3],14,-187363961),c=b(c,l,u,a,e[n+8],20,1163531501),a=b(a,c,l,u,e[n+13],5,-1444681467),u=b(u,a,c,l,e[n+2],9,-51403784),l=b(l,u,a,c,e[n+7],14,1735328473),a=_(a,c=b(c,l,u,a,e[n+12],20,-1926607734),l,u,e[n+5],4,-378558),u=_(u,a,c,l,e[n+8],11,-2022574463),l=_(l,u,a,c,e[n+11],16,1839030562),c=_(c,l,u,a,e[n+14],23,-35309556),a=_(a,c,l,u,e[n+1],4,-1530992060),u=_(u,a,c,l,e[n+4],11,1272893353),l=_(l,u,a,c,e[n+7],16,-155497632),c=_(c,l,u,a,e[n+10],23,-1094730640),a=_(a,c,l,u,e[n+13],4,681279174),u=_(u,a,c,l,e[n],11,-358537222),l=_(l,u,a,c,e[n+3],16,-722521979),c=_(c,l,u,a,e[n+6],23,76029189),a=_(a,c,l,u,e[n+9],4,-640364487),u=_(u,a,c,l,e[n+12],11,-421815835),l=_(l,u,a,c,e[n+15],16,530742520),a=y(a,c=_(c,l,u,a,e[n+2],23,-995338651),l,u,e[n],6,-198630844),u=y(u,a,c,l,e[n+7],10,1126891415),l=y(l,u,a,c,e[n+14],15,-1416354905),c=y(c,l,u,a,e[n+5],21,-57434055),a=y(a,c,l,u,e[n+12],6,1700485571),u=y(u,a,c,l,e[n+3],10,-1894986606),l=y(l,u,a,c,e[n+10],15,-1051523),c=y(c,l,u,a,e[n+1],21,-2054922799),a=y(a,c,l,u,e[n+8],6,1873313359),u=y(u,a,c,l,e[n+15],10,-30611744),l=y(l,u,a,c,e[n+6],15,-1560198380),c=y(c,l,u,a,e[n+13],21,1309151649),a=y(a,c,l,u,e[n+4],6,-145523070),u=y(u,a,c,l,e[n+11],10,-1120210379),l=y(l,u,a,c,e[n+2],15,718787259),c=y(c,l,u,a,e[n+9],21,-343485551),a=g(a,i),c=g(c,o),l=g(l,r),u=g(u,s);return[a,c,l,u]}(function(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;var i=8*e.length;for(t=0;t<i;t+=8)n[t>>5]|=(255&e[t/8])<<t%32;return n}(e),8*e.length))})),O=function(e,t,n){var i=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||r)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var s=0;s<16;++s)t[i+s]=o[s];return t||u(o)};function S(e,t,n,i){switch(e){case 0:return t&n^~t&i;case 1:return t^n^i;case 2:return t&n^t&i^n&i;case 3:return t^n^i}}function k(e,t){return e<<t|e>>>32-t}var x=f("v5",80,(function(e){var t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var i=unescape(encodeURIComponent(e));e=new Array(i.length);for(var o=0;o<i.length;o++)e[o]=i.charCodeAt(o)}e.push(128);var r=Math.ceil((e.length/4+2)/16),s=new Array(r);for(o=0;o<r;o++){s[o]=new Array(16);for(var a=0;a<16;a++)s[o][a]=e[64*o+4*a]<<24|e[64*o+4*a+1]<<16|e[64*o+4*a+2]<<8|e[64*o+4*a+3]}for(s[r-1][14]=8*(e.length-1)/Math.pow(2,32),s[r-1][14]=Math.floor(s[r-1][14]),s[r-1][15]=8*(e.length-1)&4294967295,o=0;o<r;o++){for(var c=new Array(80),l=0;l<16;l++)c[l]=s[o][l];for(l=16;l<80;l++)c[l]=k(c[l-3]^c[l-8]^c[l-14]^c[l-16],1);var u=n[0],d=n[1],p=n[2],h=n[3],f=n[4];for(l=0;l<80;l++){var g=Math.floor(l/20),m=k(u,5)+S(g,d,p,h)+f+t[g]+c[l]>>>0;f=h,h=p,p=k(d,30)>>>0,d=u,u=m}n[0]=n[0]+u>>>0,n[1]=n[1]+d>>>0,n[2]=n[2]+p>>>0,n[3]=n[3]+h>>>0,n[4]=n[4]+f>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]}))},"0wxW":function(e,t,n){var i=n("de4E"),o=n("pLL0");t.JsonRPC=i,t.XmlRPC=o},"1Kca":function(e,t,n){"use strict";var i=n("dY/r");e.exports=function(e){var t,o={stun:(e||{}).stun||n("KFtI"),turn:(e||{}).turn||n("hw9W")},r=(e||{}).turnCount||0;function s(e,t){for(var n,r=[],s=[].concat(o[e]);s.length&&r.length<t;)n=Math.random()*s.length|0,r=r.concat(s.splice(n,1));return r.map((function(t){return"string"==typeof t||t instanceof String?i(e+":"+t):t}))}return t=[].concat(s("stun",(e||{}).stunCount||2)),r&&(t=t.concat(s("turn",r))),t}},"5kmN":function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0;var r=n("1Kca"),s=n("0srX"),a=n("bDgZ"),c=n("9m68").OpenViduLogger.getInstance(),l=function(){function e(e){var t=this;this.configuration=e,this.remoteCandidatesQueue=[],this.localCandidatesQueue=[],this.iceCandidateList=[],this.candidategatheringdone=!1,this.configuration.iceServers=this.configuration.iceServers&&this.configuration.iceServers.length>0?this.configuration.iceServers:r(),this.pc=new RTCPeerConnection({iceServers:this.configuration.iceServers}),this.id=e.id?e.id:this.generateUniqueId(),this.pc.onicecandidate=function(e){if(e.candidate){var n=e.candidate;n?(t.localCandidatesQueue.push({candidate:n.candidate}),t.candidategatheringdone=!1,t.configuration.onicecandidate(e.candidate)):t.candidategatheringdone||(t.candidategatheringdone=!0)}},this.pc.onsignalingstatechange=function(){if("stable"===t.pc.signalingState)for(;t.iceCandidateList.length>0;){var e=t.iceCandidateList.shift();t.pc.addIceCandidate(e)}},this.start()}return e.prototype.start=function(){var e=this;return new Promise((function(t,n){if("closed"===e.pc.signalingState&&n('The peer connection object is in "closed" state. This is most likely due to an invocation of the dispose method before accepting in the dialogue'),e.configuration.mediaStream){for(var i=0,o=e.configuration.mediaStream.getTracks();i<o.length;i++)e.pc.addTrack(o[i],e.configuration.mediaStream);t()}}))},e.prototype.dispose=function(){if(c.debug("Disposing WebRtcPeer"),this.pc){if("closed"===this.pc.signalingState)return;this.pc.close(),this.remoteCandidatesQueue=[],this.localCandidatesQueue=[]}},e.prototype.generateOffer=function(){var e=this;return new Promise((function(t,n){var i,o=!0;e.configuration.mediaConstraints&&(i="boolean"!=typeof e.configuration.mediaConstraints.audio||e.configuration.mediaConstraints.audio,o="boolean"!=typeof e.configuration.mediaConstraints.video||e.configuration.mediaConstraints.video);var r={offerToReceiveAudio:"sendonly"!==e.configuration.mode&&i,offerToReceiveVideo:"sendonly"!==e.configuration.mode&&o};c.debug("RTCPeerConnection constraints: "+JSON.stringify(r)),"Safari"===a.name&&-1!==a.ua.indexOf("Safari")?(i&&e.pc.addTransceiver("audio",{direction:e.configuration.mode}),o&&e.pc.addTransceiver("video",{direction:e.configuration.mode}),e.pc.createOffer().then((function(t){return c.debug("Created SDP offer"),e.pc.setLocalDescription(t)})).then((function(){var i=e.pc.localDescription;i?(c.debug("Local description set",i.sdp),t(i.sdp)):n("Local description is not defined")})).catch((function(e){return n(e)}))):e.pc.createOffer(r).then((function(t){return c.debug("Created SDP offer"),e.pc.setLocalDescription(t)})).then((function(){var i=e.pc.localDescription;i?(c.debug("Local description set",i.sdp),t(i.sdp)):n("Local description is not defined")})).catch((function(e){return n(e)}))}))},e.prototype.processAnswer=function(e,t){var n=this;return new Promise((function(i,o){var r={type:"answer",sdp:e};c.debug("SDP answer received, setting remote description"),"closed"===n.pc.signalingState&&o("RTCPeerConnection is closed"),n.setRemoteDescription(r,t,i,o)}))},e.prototype.setRemoteDescription=function(e,t,n,i){var o=this;a.isIonicIos?t?setTimeout((function(){c.info("setRemoteDescription run after timeout for Ionic iOS device"),o.pc.setRemoteDescription(new RTCSessionDescription(e)).then((function(){return n()})).catch((function(e){return i(e)}))}),250):this.pc.setRemoteDescription(new RTCSessionDescription(e)).then((function(){return n()})).catch((function(e){return i(e)})):this.pc.setRemoteDescription(e).then((function(){return n()})).catch((function(e){return i(e)}))},e.prototype.addIceCandidate=function(e){var t=this;return new Promise((function(n,i){switch(c.debug("Remote ICE candidate received",e),t.remoteCandidatesQueue.push(e),t.pc.signalingState){case"closed":i(new Error("PeerConnection object is closed"));break;case"stable":t.pc.remoteDescription?t.pc.addIceCandidate(e).then((function(){return n()})).catch((function(e){return i(e)})):(t.iceCandidateList.push(e),n());break;default:t.iceCandidateList.push(e),n()}}))},e.prototype.addIceConnectionStateChangeListener=function(e){var t=this;this.pc.oniceconnectionstatechange=function(){switch(t.pc.iceConnectionState){case"disconnected":c.warn("IceConnectionState of RTCPeerConnection "+t.id+" ("+e+') change to "disconnected". Possible network disconnection');break;case"failed":c.error("IceConnectionState of RTCPeerConnection "+t.id+" ("+e+') to "failed"');break;case"closed":c.log("IceConnectionState of RTCPeerConnection "+t.id+" ("+e+') change to "closed"');break;case"new":c.log("IceConnectionState of RTCPeerConnection "+t.id+" ("+e+') change to "new"');break;case"checking":c.log("IceConnectionState of RTCPeerConnection "+t.id+" ("+e+') change to "checking"');break;case"connected":c.log("IceConnectionState of RTCPeerConnection "+t.id+" ("+e+') change to "connected"');break;case"completed":c.log("IceConnectionState of RTCPeerConnection "+t.id+" ("+e+') change to "completed"')}}},e.prototype.generateUniqueId=function(){return s.v4()},e}();t.WebRtcPeer=l;var u=function(e){function t(t){return t.mode="recvonly",e.call(this,t)||this}return o(t,e),t}(l);t.WebRtcPeerRecvonly=u;var d=function(e){function t(t){return t.mode="sendonly",e.call(this,t)||this}return o(t,e),t}(l);t.WebRtcPeerSendonly=d;var p=function(e){function t(t){return t.mode="sendrecv",e.call(this,t)||this}return o(t,e),t}(l);t.WebRtcPeerSendrecv=p},"6+/i":function(e,t,n){var i;!function(t){"use strict";function o(){}var r=o.prototype,s=t.EventEmitter;function a(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function c(e){return function(){return this[e].apply(this,arguments)}}r.getListeners=function(e){var t,n,i=this._getEvents();if(e instanceof RegExp)for(n in t={},i)i.hasOwnProperty(n)&&e.test(n)&&(t[n]=i[n]);else t=i[e]||(i[e]=[]);return t},r.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},r.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&((t={})[e]=n),t||n},r.addListener=function(e,t){if(!function e(t){return"function"==typeof t||t instanceof RegExp||!(!t||"object"!=typeof t)&&e(t.listener)}(t))throw new TypeError("listener must be a function");var n,i=this.getListenersAsObject(e),o="object"==typeof t;for(n in i)i.hasOwnProperty(n)&&-1===a(i[n],t)&&i[n].push(o?t:{listener:t,once:!1});return this},r.on=c("addListener"),r.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},r.once=c("addOnceListener"),r.defineEvent=function(e){return this.getListeners(e),this},r.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},r.removeListener=function(e,t){var n,i,o=this.getListenersAsObject(e);for(i in o)o.hasOwnProperty(i)&&-1!==(n=a(o[i],t))&&o[i].splice(n,1);return this},r.off=c("removeListener"),r.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},r.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},r.manipulateListeners=function(e,t,n){var i,o,r=e?this.removeListener:this.addListener,s=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(i=n.length;i--;)r.call(this,t,n[i]);else for(i in t)t.hasOwnProperty(i)&&(o=t[i])&&("function"==typeof o?r.call(this,i,o):s.call(this,i,o));return this},r.removeEvent=function(e){var t,n=typeof e,i=this._getEvents();if("string"===n)delete i[e];else if(e instanceof RegExp)for(t in i)i.hasOwnProperty(t)&&e.test(t)&&delete i[t];else delete this._events;return this},r.removeAllListeners=c("removeEvent"),r.emitEvent=function(e,t){var n,i,o,r,s=this.getListenersAsObject(e);for(r in s)if(s.hasOwnProperty(r))for(n=s[r].slice(0),o=0;o<n.length;o++)!0===(i=n[o]).once&&this.removeListener(e,i.listener),i.listener.apply(this,t||[])===this._getOnceReturnValue()&&this.removeListener(e,i.listener);return this},r.trigger=c("emitEvent"),r.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},r.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},r._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},r._getEvents=function(){return this._events||(this._events={})},o.noConflict=function(){return t.EventEmitter=s,o},void 0===(i=(function(){return o}).call(t,n,t,e))||(e.exports=i)}("undefined"!=typeof window?window:this||{})},"74bm":function(e,t,n){"use strict";t.__esModule=!0;var i=n("BwMD"),o=n("Tt94"),r=n("9m68").OpenViduLogger.getInstance(),s=function(){function e(e,t){this.handlers={},this.type=e,this.options=t}return e.prototype.execMethod=function(e,t){var n=this;return new Promise((function(s,a){var c;if(r.info("Executing filter method to stream "+n.stream.streamId),"string"!=typeof t)try{c=JSON.stringify(t)}catch(u){var l="'params' property must be a JSON formatted object";r.error(l),a(l)}else c=t;n.stream.session.openvidu.sendRequest("execFilterMethod",{streamId:n.stream.streamId,method:e,params:c},(function(t,l){if(t)r.error("Error executing filter method for Stream "+n.stream.streamId,t),a(401===t.code?new o.OpenViduError(o.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to execute a filter method"):t);else{r.info("Filter method successfully executed on Stream "+n.stream.streamId);var u=Object.assign({},n.stream.filter);n.stream.filter.lastExecMethod={method:e,params:JSON.parse(c)},n.stream.session.emitEvent("streamPropertyChanged",[new i.StreamPropertyChangedEvent(n.stream.session,n.stream,"filter",n.stream.filter,u,"execFilterMethod")]),n.stream.streamManager.emitEvent("streamPropertyChanged",[new i.StreamPropertyChangedEvent(n.stream.streamManager,n.stream,"filter",n.stream.filter,u,"execFilterMethod")]),s()}}))}))},e.prototype.addEventListener=function(e,t){var n=this;return new Promise((function(i,s){r.info("Adding filter event listener to event "+e+" to stream "+n.stream.streamId),n.stream.session.openvidu.sendRequest("addFilterEventListener",{streamId:n.stream.streamId,eventType:e},(function(a,c){a?(r.error("Error adding filter event listener to event "+e+"for Stream "+n.stream.streamId,a),s(401===a.code?new o.OpenViduError(o.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to add a filter event listener"):a)):(n.handlers[e]=t,r.info("Filter event listener to event "+e+" successfully applied on Stream "+n.stream.streamId),i())}))}))},e.prototype.removeEventListener=function(e){var t=this;return new Promise((function(n,i){r.info("Removing filter event listener to event "+e+" to stream "+t.stream.streamId),t.stream.session.openvidu.sendRequest("removeFilterEventListener",{streamId:t.stream.streamId,eventType:e},(function(s,a){s?(r.error("Error removing filter event listener to event "+e+"for Stream "+t.stream.streamId,s),i(401===s.code?new o.OpenViduError(o.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to add a filter event listener"):s)):(delete t.handlers[e],r.info("Filter event listener to event "+e+" successfully removed on Stream "+t.stream.streamId),n())}))}))},e}();t.Filter=s},"8KVD":function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0;var r=function(e){function t(t,n,i,o,r){var s=e.call(this,t,n,i)||this;return s.connection=o,s.reason=r,s}return o(t,e),t.prototype.callDefaultBehavior=function(){},t}(n("hzOQ").Event);t.ConnectionEvent=r},"9m68":function(e,t,n){"use strict";t.__esModule=!0;var i=function(){function e(){this.logger=window.console,this.LOG_FNS=[this.logger.log,this.logger.debug,this.logger.info,this.logger.warn,this.logger.error],this.isProdMode=!1}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.isProdMode||this.LOG_FNS[0].apply(this.logger,arguments)},e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.isProdMode||this.LOG_FNS[1].apply(this.logger,arguments)},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.isProdMode||this.LOG_FNS[2].apply(this.logger,arguments)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.isProdMode||this.LOG_FNS[3].apply(this.logger,arguments)},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.LOG_FNS[4].apply(this.logger,arguments)},e.prototype.enableProdMode=function(){this.isProdMode=!0},e}();t.OpenViduLogger=i},AeG9:function(e,t,n){var i=!1;if(Object.defineProperty)try{Object.defineProperty({},"x",{})}catch(h){i=!0}Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,i=function(){},o=function(){return n.apply(this instanceof i&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return i.prototype=this.prototype,o.prototype=new i,o});var o=n("txJ/").EventEmitter,r=n("HgqT"),s=n("0wxW"),a=n("gUCu");function c(e){if(e){if(e instanceof Function)return{send:e};if(e.send instanceof Function)return e;if(e.postMessage instanceof Function)return e.send=e.postMessage,e;if(e.write instanceof Function)return e.send=e.write,e;if(void 0===e.onmessage&&!(e.pause instanceof Function))throw new SyntaxError("Transport is not a function nor a valid object")}}function l(e,t){i?(this.method=e,this.params=t):(Object.defineProperty(this,"method",{value:e,enumerable:!0}),Object.defineProperty(this,"params",{value:t,enumerable:!0}))}function u(e,t,n,s){var u=this;if(!e)throw new SyntaxError("Packer is not defined");if(!e.pack||!e.unpack)throw new SyntaxError("Packer is invalid");var d=function(e){if(!e)return{};for(var t in e){var n=e[t];"string"==typeof n&&(e[t]={response:n})}return e}(e.responseMethods);if(t instanceof Function){if(null!=n)throw new SyntaxError("There can't be parameters after onRequest");s=t,n=void 0,t=void 0}if(t&&t.send instanceof Function){if(n&&!(n instanceof Function))throw new SyntaxError("Only a function can be after transport");s=n,n=t,t=void 0}if(n instanceof Function){if(null!=s)throw new SyntaxError("There can't be parameters after onRequest");s=n,n=void 0}if(n&&n.send instanceof Function&&s&&!(s instanceof Function))throw new SyntaxError("Only a function can be after transport");t=t||{},o.call(this),s&&this.on("request",s),i?this.peerID=t.peerID:Object.defineProperty(this,"peerID",{value:t.peerID});var p=t.max_retries||0;function f(e){u.decode(e.data||e)}this.getTransport=function(){return n},this.setTransport=function(e){n&&(n.removeEventListener?n.removeEventListener("message",f):n.removeListener&&n.removeListener("data",f)),e&&(e.addEventListener?e.addEventListener("message",f):e.addListener&&e.addListener("data",f)),n=c(e)},i||Object.defineProperty(this,"transport",{get:this.getTransport.bind(this),set:this.setTransport.bind(this)}),this.setTransport(n);var g=t.request_timeout||5e3,m=t.ping_request_timeout||g,v=t.response_timeout||5e3,b=t.duplicates_timeout||5e3,_=0,y=new a,C=new a,O=new a,S={};function k(e,t){var n=setTimeout((function(){O.remove(e,t)}),b);O.set(n,e,t)}function x(t,n,o,r,s){l.call(this,t,n),this.getTransport=function(){return s},this.setTransport=function(e){s=c(e)},i||Object.defineProperty(this,"transport",{get:this.getTransport.bind(this),set:this.setTransport.bind(this)});var a=C.get(o,r);s||u.getTransport()||(i?this.duplicated=Boolean(a):Object.defineProperty(this,"duplicated",{value:Boolean(a)}));var p=d[t];this.pack=e.pack.bind(e,this,o),this.reply=function(t,n,i){if(t instanceof Function||t&&t.send instanceof Function){if(null!=n)throw new SyntaxError("There can't be parameters after callback");i=t,n=null,t=void 0}else if(n instanceof Function||n&&n.send instanceof Function){if(null!=i)throw new SyntaxError("There can't be parameters after callback");i=n,n=null}var s;return i=c(i),a&&clearTimeout(a.timeout),null!=r&&(t&&(t.dest=r),n&&(n.dest=r)),t||null!=n?(null!=u.peerID&&(t?t.from=u.peerID:n.from=u.peerID),s=e.pack(s=p?null==p.error&&t?{error:t}:{method:t?p.error:p.response,params:t||n}:{error:t,result:n},o)):s=a?a.message:e.pack({result:null},o),function(e,t,n){var i={message:e,timeout:setTimeout((function(){C.remove(t,n)}),v)};C.set(i,t,n)}(s,o,r),(i=i||this.getTransport()||u.getTransport())?i.send(s):s}}function M(e){var t=S[e];if(t){delete S[e];var n=y.pop(t.id,t.dest);n&&(clearTimeout(n.timeout),k(t.id,t.dest))}}r(x,l),this.cancel=function(e){if(e)return M(e);for(var e in S)M(e)},this.close=function(){var e=this.getTransport();e&&e.close&&e.close(4003,"Cancel request"),this.cancel(),O.forEach(clearTimeout),C.forEach((function(e){clearTimeout(e.timeout)}))},this.encode=function(t,n,i,o,r){if(n instanceof Function){if(null!=i)throw new SyntaxError("There can't be parameters after callback");r=n,o=void 0,i=void 0,n=void 0}else if(i instanceof Function){if(null!=o)throw new SyntaxError("There can't be parameters after callback");r=i,o=void 0,i=void 0}else if(o instanceof Function){if(null!=r)throw new SyntaxError("There can't be parameters after callback");r=o,o=void 0}null!=u.peerID&&((n=n||{}).from=u.peerID),null!=i&&((n=n||{}).dest=i);var s={method:t,params:n};if(r){var a=function(e,t){u.cancel(s),r(e,t)},l=function(e){return C.timeout=setTimeout(f,("ping"===t?m:g)*Math.pow(2,b++)),S[s]={id:v,dest:i},y.set(C,v,i),(e=e||k||u.getTransport())?e.send(s):s},h=function(e){e=c(e),console.warn(b+" retry for request message:",s);var t=O.pop(v,i);return clearTimeout(t),l(e)},f=function(){if(b<p)return h(o);var e=new Error("Request has timed out");e.request=s,e.retry=h,a(e)},v=_++,b=0,C={message:s=e.pack(s,v),callback:a,responseMethods:d[t]||{}},k=c(o);return l(o)}return s=e.pack(s),(o=o||this.getTransport())?o.send(s):s},this.decode=function(t,n){if(!t)throw new TypeError("Message is not defined");try{t=e.unpack(t)}catch(h){return console.debug(h,t)}var i=t.id,o=t.ack,r=t.method,s=t.params||{},a=s.from,d=s.dest;if(null==u.peerID||a!=u.peerID){if(null==i&&null==o){var p=new l(r,s);if(u.emit("request",p))return;return p}if(r){if(null==d||d==u.peerID){if(v=y.get(o,a)){var f=v.responseMethods;return r==f.error?S(v,s):r==f.response?S(v,null,s):_()}if(b=O.get(o,a))return M(b)}return _()}var g=t.error,m=t.result;if(!(g&&g.dest&&g.dest!=u.peerID||m&&m.dest&&m.dest!=u.peerID)){var v,b;if(!(v=y.get(o,a)))return(b=O.get(o,a))?M(b):console.warn("No callback was defined for this message",t);S(v,g,m)}}function _(){if(n=c(n)||u.getTransport()){var e=C.get(i,a);if(e)return n.send(e.message)}var t=new x(r,s,null!=i?i:o,a,n);if(!u.emit("request",t))return t}function S(e,t,n){e.callback(t,n)}function M(e){console.warn("Response already processed",t),clearTimeout(e),k(o,a)}}}r(u,o),u.RpcNotification=l,e.exports=u;var d=n("SYuc"),p=n("ee8k");(u.clients=d).transports=p,u.packers=s},BwMD:function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0;var r=function(e){function t(t,n,i,o,r,s){var a=e.call(this,!1,t,"streamPropertyChanged")||this;return a.stream=n,a.changedProperty=i,a.newValue=o,a.oldValue=r,a.reason=s,a}return o(t,e),t.prototype.callDefaultBehavior=function(){},t}(n("hzOQ").Event);t.StreamPropertyChangedEvent=r},DPKQ:function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0;var r=n("74bm"),s=n("bk74"),a=n("Dztv"),c=n("5kmN"),l=n("+FKC"),u=n("e8ps"),d=n("HxXY"),p=n("BwMD"),h=n("Tt94"),f=n("ttXH"),g=n("bDgZ"),m=n("9m68").OpenViduLogger.getInstance(),v=function(e){function t(t,n){var i=e.call(this)||this;return i.isSubscribeToRemote=!1,i.isLocalStreamReadyToPublish=!1,i.isLocalStreamPublished=!1,i.publishedOnce=!1,i.publisherStartSpeakingEventEnabled=!1,i.publisherStartSpeakingEventEnabledOnce=!1,i.publisherStopSpeakingEventEnabled=!1,i.publisherStopSpeakingEventEnabledOnce=!1,i.volumeChangeEventEnabled=!1,i.volumeChangeEventEnabledOnce=!1,i.session=t,n.hasOwnProperty("id")?(i.inboundStreamOpts=n,i.streamId=i.inboundStreamOpts.id,i.creationTime=i.inboundStreamOpts.createdAt,i.hasAudio=i.inboundStreamOpts.hasAudio,i.hasVideo=i.inboundStreamOpts.hasVideo,i.hasAudio&&(i.audioActive=i.inboundStreamOpts.audioActive),i.hasVideo&&(i.videoActive=i.inboundStreamOpts.videoActive,i.typeOfVideo=i.inboundStreamOpts.typeOfVideo?i.inboundStreamOpts.typeOfVideo:void 0,i.frameRate=-1===i.inboundStreamOpts.frameRate?void 0:i.inboundStreamOpts.frameRate,i.videoDimensions=i.inboundStreamOpts.videoDimensions),i.inboundStreamOpts.filter&&Object.keys(i.inboundStreamOpts.filter).length>0&&(i.inboundStreamOpts.filter.lastExecMethod&&0===Object.keys(i.inboundStreamOpts.filter.lastExecMethod).length&&delete i.inboundStreamOpts.filter.lastExecMethod,i.filter=i.inboundStreamOpts.filter)):(i.outboundStreamOpts=n,i.hasAudio=i.isSendAudio(),i.hasVideo=i.isSendVideo(),i.hasAudio&&(i.audioActive=!!i.outboundStreamOpts.publisherProperties.publishAudio),i.hasVideo&&(i.videoActive=!!i.outboundStreamOpts.publisherProperties.publishVideo,i.frameRate=i.outboundStreamOpts.publisherProperties.frameRate,i.typeOfVideo="undefined"!=typeof MediaStreamTrack&&i.outboundStreamOpts.publisherProperties.videoSource instanceof MediaStreamTrack?"CUSTOM":i.isSendScreen()?"SCREEN":"CAMERA"),i.outboundStreamOpts.publisherProperties.filter&&(i.filter=i.outboundStreamOpts.publisherProperties.filter)),i.ee.on("mediastream-updated",(function(){i.streamManager.updateMediaStream(i.mediaStream),m.debug("Video srcObject ["+i.mediaStream+"] updated in stream ["+i.streamId+"]")})),i}return o(t,e),t.prototype.on=function(t,n){return e.prototype.onAux.call(this,t,"Event '"+t+"' triggered by stream '"+this.streamId+"'",n),this},t.prototype.once=function(t,n){return e.prototype.onceAux.call(this,t,"Event '"+t+"' triggered once by stream '"+this.streamId+"'",n),this},t.prototype.off=function(t,n){return e.prototype.off.call(this,t,n),this},t.prototype.applyFilter=function(e,t){var n=this;return new Promise((function(i,o){m.info("Applying filter to stream "+n.streamId),"string"!=typeof(t=t||{})&&(t=JSON.stringify(t)),n.session.openvidu.sendRequest("applyFilter",{streamId:n.streamId,type:e,options:t},(function(s,a){if(s)m.error("Error applying filter for Stream "+n.streamId,s),o(401===s.code?new h.OpenViduError(h.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to apply a filter"):s);else{m.info("Filter successfully applied on Stream "+n.streamId);var c=n.filter;n.filter=new r.Filter(e,t),n.filter.stream=n,n.session.emitEvent("streamPropertyChanged",[new p.StreamPropertyChangedEvent(n.session,n,"filter",n.filter,c,"applyFilter")]),n.streamManager.emitEvent("streamPropertyChanged",[new p.StreamPropertyChangedEvent(n.streamManager,n,"filter",n.filter,c,"applyFilter")]),i(n.filter)}}))}))},t.prototype.removeFilter=function(){var e=this;return new Promise((function(t,n){m.info("Removing filter of stream "+e.streamId),e.session.openvidu.sendRequest("removeFilter",{streamId:e.streamId},(function(i,o){if(i)m.error("Error removing filter for Stream "+e.streamId,i),n(401===i.code?new h.OpenViduError(h.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to remove a filter"):i);else{m.info("Filter successfully removed from Stream "+e.streamId);var r=e.filter;delete e.filter,e.session.emitEvent("streamPropertyChanged",[new p.StreamPropertyChangedEvent(e.session,e,"filter",e.filter,r,"applyFilter")]),e.streamManager.emitEvent("streamPropertyChanged",[new p.StreamPropertyChangedEvent(e.streamManager,e,"filter",e.filter,r,"applyFilter")]),t()}}))}))},t.prototype.getRTCPeerConnection=function(){return this.webRtcPeer.pc},t.prototype.getMediaStream=function(){return this.mediaStream},t.prototype.setMediaStream=function(e){this.mediaStream=e},t.prototype.updateMediaStreamInVideos=function(){this.ee.emitEvent("mediastream-updated",[])},t.prototype.getWebRtcPeer=function(){return this.webRtcPeer},t.prototype.subscribeToMyRemote=function(e){this.isSubscribeToRemote=e},t.prototype.setOutboundStreamOptions=function(e){this.outboundStreamOpts=e},t.prototype.subscribe=function(){var e=this;return new Promise((function(t,n){e.initWebRtcPeerReceive(!1).then((function(){t()})).catch((function(e){n(e)}))}))},t.prototype.publish=function(){var e=this;return new Promise((function(t,n){e.isLocalStreamReadyToPublish?e.initWebRtcPeerSend(!1).then((function(){t()})).catch((function(e){n(e)})):e.ee.once("stream-ready-to-publish",(function(){e.publish().then((function(){t()})).catch((function(e){n(e)}))}))}))},t.prototype.disposeWebRtcPeer=function(){this.webRtcPeer&&(this.webRtcPeer.dispose(),this.stopWebRtcStats()),m.info((this.outboundStreamOpts?"Outbound ":"Inbound ")+"WebRTCPeer from 'Stream' with id ["+this.streamId+"] is now closed")},t.prototype.disposeMediaStream=function(){this.mediaStream&&(this.mediaStream.getAudioTracks().forEach((function(e){e.stop()})),this.mediaStream.getVideoTracks().forEach((function(e){e.stop()})),delete this.mediaStream),this.localMediaStreamWhenSubscribedToRemote&&(this.localMediaStreamWhenSubscribedToRemote.getAudioTracks().forEach((function(e){e.stop()})),this.localMediaStreamWhenSubscribedToRemote.getVideoTracks().forEach((function(e){e.stop()})),delete this.localMediaStreamWhenSubscribedToRemote),this.speechEvent&&(this.speechEvent.stop&&this.speechEvent.stop(),delete this.speechEvent),m.info((this.outboundStreamOpts?"Local ":"Remote ")+"MediaStream from 'Stream' with id ["+this.streamId+"] is now disposed")},t.prototype.displayMyRemote=function(){return this.isSubscribeToRemote},t.prototype.isSendAudio=function(){return!!this.outboundStreamOpts&&null!==this.outboundStreamOpts.publisherProperties.audioSource&&!1!==this.outboundStreamOpts.publisherProperties.audioSource},t.prototype.isSendVideo=function(){return!!this.outboundStreamOpts&&null!==this.outboundStreamOpts.publisherProperties.videoSource&&!1!==this.outboundStreamOpts.publisherProperties.videoSource},t.prototype.isSendScreen=function(){var e="screen"===this.outboundStreamOpts.publisherProperties.videoSource;return"Electron"===g.name&&(e="string"==typeof this.outboundStreamOpts.publisherProperties.videoSource&&this.outboundStreamOpts.publisherProperties.videoSource.startsWith("screen:")),!!this.outboundStreamOpts&&e},t.prototype.enableStartSpeakingEvent=function(){var e=this;this.setSpeechEventIfNotExists(),this.publisherStartSpeakingEventEnabled||(this.publisherStartSpeakingEventEnabled=!0,this.speechEvent.on("speaking",(function(){e.session.emitEvent("publisherStartSpeaking",[new u.PublisherSpeakingEvent(e.session,"publisherStartSpeaking",e.connection,e.streamId)]),e.publisherStartSpeakingEventEnabledOnce=!1})))},t.prototype.enableOnceStartSpeakingEvent=function(){var e=this;this.setSpeechEventIfNotExists(),this.publisherStartSpeakingEventEnabledOnce||(this.publisherStartSpeakingEventEnabledOnce=!0,this.speechEvent.once("speaking",(function(){e.publisherStartSpeakingEventEnabledOnce&&e.session.emitEvent("publisherStartSpeaking",[new u.PublisherSpeakingEvent(e.session,"publisherStartSpeaking",e.connection,e.streamId)]),e.disableStartSpeakingEvent(!0)})))},t.prototype.disableStartSpeakingEvent=function(e){if(this.speechEvent){if(this.publisherStartSpeakingEventEnabledOnce=!1,e){if(this.publisherStartSpeakingEventEnabled)return}else this.publisherStartSpeakingEventEnabled=!1;this.volumeChangeEventEnabled||this.volumeChangeEventEnabledOnce||this.publisherStopSpeakingEventEnabled||this.publisherStopSpeakingEventEnabledOnce?this.speechEvent.off("speaking"):(this.speechEvent.stop(),delete this.speechEvent)}},t.prototype.enableStopSpeakingEvent=function(){var e=this;this.setSpeechEventIfNotExists(),this.publisherStopSpeakingEventEnabled||(this.publisherStopSpeakingEventEnabled=!0,this.speechEvent.on("stopped_speaking",(function(){e.session.emitEvent("publisherStopSpeaking",[new u.PublisherSpeakingEvent(e.session,"publisherStopSpeaking",e.connection,e.streamId)]),e.publisherStopSpeakingEventEnabledOnce=!1})))},t.prototype.enableOnceStopSpeakingEvent=function(){var e=this;this.setSpeechEventIfNotExists(),this.publisherStopSpeakingEventEnabledOnce||(this.publisherStopSpeakingEventEnabledOnce=!0,this.speechEvent.once("stopped_speaking",(function(){e.publisherStopSpeakingEventEnabledOnce&&e.session.emitEvent("publisherStopSpeaking",[new u.PublisherSpeakingEvent(e.session,"publisherStopSpeaking",e.connection,e.streamId)]),e.disableStopSpeakingEvent(!0)})))},t.prototype.disableStopSpeakingEvent=function(e){if(this.speechEvent){if(this.publisherStopSpeakingEventEnabledOnce=!1,e){if(this.publisherStopSpeakingEventEnabled)return}else this.publisherStopSpeakingEventEnabled=!1;this.volumeChangeEventEnabled||this.volumeChangeEventEnabledOnce||this.publisherStartSpeakingEventEnabled||this.publisherStartSpeakingEventEnabledOnce?this.speechEvent.off("stopped_speaking"):(this.speechEvent.stop(),delete this.speechEvent)}},t.prototype.enableVolumeChangeEvent=function(e){var t=this;this.setSpeechEventIfNotExists()?this.volumeChangeEventEnabled&&!e||(this.volumeChangeEventEnabled=!0,this.speechEvent.on("volume_change",(function(e){var n={newValue:e,oldValue:t.speechEvent.oldVolumeValue};t.speechEvent.oldVolumeValue=e,t.streamManager.emitEvent("streamAudioVolumeChange",[new d.StreamManagerEvent(t.streamManager,"streamAudioVolumeChange",n)])}))):this.volumeChangeEventEnabled=!0},t.prototype.enableOnceVolumeChangeEvent=function(e){var t=this;this.setSpeechEventIfNotExists()?this.volumeChangeEventEnabledOnce&&!e||(this.volumeChangeEventEnabledOnce=!0,this.speechEvent.once("volume_change",(function(e){var n={newValue:e,oldValue:t.speechEvent.oldVolumeValue};t.speechEvent.oldVolumeValue=e,t.disableVolumeChangeEvent(!0),t.streamManager.emitEvent("streamAudioVolumeChange",[new d.StreamManagerEvent(t.streamManager,"streamAudioVolumeChange",n)])}))):this.volumeChangeEventEnabledOnce=!0},t.prototype.disableVolumeChangeEvent=function(e){if(this.speechEvent){if(this.volumeChangeEventEnabledOnce=!1,e){if(this.volumeChangeEventEnabled)return}else this.volumeChangeEventEnabled=!1;this.publisherStartSpeakingEventEnabled||this.publisherStartSpeakingEventEnabledOnce||this.publisherStopSpeakingEventEnabled||this.publisherStopSpeakingEventEnabledOnce?this.speechEvent.off("volume_change"):(this.speechEvent.stop(),delete this.speechEvent)}},t.prototype.isLocal=function(){return!this.inboundStreamOpts&&!!this.outboundStreamOpts},t.prototype.getSelectedIceCandidate=function(){var e=this;return new Promise((function(t,n){e.webRtcStats.getSelectedIceCandidateInfo().then((function(e){return t(e)})).catch((function(e){return n(e)}))}))},t.prototype.getRemoteIceCandidateList=function(){return this.webRtcPeer.remoteCandidatesQueue},t.prototype.getLocalIceCandidateList=function(){return this.webRtcPeer.localCandidatesQueue},t.prototype.streamIceConnectionStateBroken=function(){if(!this.getWebRtcPeer()||!this.getRTCPeerConnection())return!1;if(this.isLocal&&this.session.openvidu.advancedConfiguration.forceMediaReconnectionAfterNetworkDrop)return m.warn('OpenVidu Browser advanced configuration option "forceMediaReconnectionAfterNetworkDrop" is enabled. Publisher stream '+this.streamId+"will force a reconnection"),!0;var e=this.getRTCPeerConnection().iceConnectionState;return"disconnected"===e||"failed"===e},t.prototype.setSpeechEventIfNotExists=function(){if(this.mediaStream){if(!this.speechEvent){var e=this.harkOptions?this.harkOptions:this.session.openvidu.advancedConfiguration.publisherSpeakingEventsOptions||{};e.interval="number"==typeof e.interval?e.interval:100,e.threshold="number"==typeof e.threshold?e.threshold:-50,this.speechEvent=f(this.mediaStream,e)}return!0}return!1},t.prototype.initWebRtcPeerSend=function(e){var t=this;return new Promise((function(n,i){e||t.initHarkEvents();var o={audio:t.isSendAudio(),video:t.isSendVideo()},r={mediaStream:t.mediaStream,mediaConstraints:o,onicecandidate:t.connection.sendIceCandidate.bind(t.connection),iceServers:t.getIceServersConf(),simulcast:!1};e&&t.disposeWebRtcPeer(),t.webRtcPeer=t.displayMyRemote()?new c.WebRtcPeerSendrecv(r):new c.WebRtcPeerSendonly(r),t.webRtcPeer.addIceConnectionStateChangeListener("publisher of "+t.connection.connectionId),t.webRtcPeer.generateOffer().then((function(o){!function(o){m.debug("Sending SDP offer to publish as "+t.streamId,o);var r,s=e?"reconnectStream":"publishVideo";if(e)r={stream:t.streamId};else{var a="";t.isSendVideo()&&(a="undefined"!=typeof MediaStreamTrack&&t.outboundStreamOpts.publisherProperties.videoSource instanceof MediaStreamTrack?"CUSTOM":t.isSendScreen()?"SCREEN":"CAMERA"),r={doLoopback:t.displayMyRemote()||!1,hasAudio:t.isSendAudio(),hasVideo:t.isSendVideo(),audioActive:t.audioActive,videoActive:t.videoActive,typeOfVideo:a,frameRate:t.frameRate?t.frameRate:-1,videoDimensions:JSON.stringify(t.videoDimensions),filter:t.outboundStreamOpts.publisherProperties.filter}}r.sdpOffer=o,t.session.openvidu.sendRequest(s,r,(function(o,r){o?i(401===o.code?new h.OpenViduError(h.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to publish"):"Error on publishVideo: "+JSON.stringify(o)):t.webRtcPeer.processAnswer(r.sdpAnswer,!1).then((function(){t.streamId=r.id,t.creationTime=r.createdAt,t.isLocalStreamPublished=!0,t.publishedOnce=!0,t.displayMyRemote()&&(t.localMediaStreamWhenSubscribedToRemote=t.mediaStream,t.remotePeerSuccessfullyEstablished()),t.ee.emitEvent(e?"stream-reconnected-by-publisher":"stream-created-by-publisher",[]),t.initWebRtcStats(),m.info("'Publisher' ("+t.streamId+") successfully "+(e?"reconnected":"published")+" to session"),n()})).catch((function(e){i(e)}))}))}(o)})).catch((function(e){i(new Error("(publish) SDP offer error: "+JSON.stringify(e)))}))}))},t.prototype.initWebRtcPeerReceive=function(e){var t=this;return new Promise((function(n,i){var o={audio:t.inboundStreamOpts.hasAudio,video:t.inboundStreamOpts.hasVideo};m.debug("'Session.subscribe(Stream)' called. Constraints of generate SDP offer",o);var r={onicecandidate:t.connection.sendIceCandidate.bind(t.connection),mediaConstraints:o,iceServers:t.getIceServersConf(),simulcast:!1};t.webRtcPeer=new c.WebRtcPeerRecvonly(r),t.webRtcPeer.addIceConnectionStateChangeListener(t.streamId),t.webRtcPeer.generateOffer().then((function(o){!function(o){m.debug("Sending SDP offer to subscribe to "+t.streamId,o);var r=e?"reconnectStream":"receiveVideoFrom",s={sdpOffer:o};s[e?"stream":"sender"]=t.streamId,t.session.openvidu.sendRequest(r,s,(function(o,r){o?i(new Error("Error on recvVideoFrom: "+JSON.stringify(o))):(t.session.isFirstIonicIosSubscriber&&(t.session.isFirstIonicIosSubscriber=!1,setTimeout((function(){t.session.countDownForIonicIosSubscribersActive=!1}),400)),t.webRtcPeer.processAnswer(r.sdpAnswer,t.session.countDownForIonicIosSubscribersActive).then((function(){m.info("'Subscriber' ("+t.streamId+") successfully "+(e?"reconnected":"subscribed")),t.remotePeerSuccessfullyEstablished(),t.initWebRtcStats(),n()})).catch((function(e){i(e)})))}))}(o)})).catch((function(e){i(new Error("(subscribe) SDP offer error: "+JSON.stringify(e)))}))}))},t.prototype.remotePeerSuccessfullyEstablished=function(){var e;this.mediaStream=new MediaStream;for(var t=0,n=this.webRtcPeer.pc.getReceivers();t<n.length;t++)(e=n[t]).track&&this.mediaStream.addTrack(e.track);if(m.debug("Peer remote stream",this.mediaStream),this.mediaStream){if(this.streamManager instanceof s.Subscriber){if(this.mediaStream.getAudioTracks()[0]){var i=!!this.streamManager.properties.subscribeToAudio;this.mediaStream.getAudioTracks()[0].enabled=i}this.mediaStream.getVideoTracks()[0]&&(i=!!this.streamManager.properties.subscribeToVideo,this.mediaStream.getVideoTracks()[0].enabled=i)}this.updateMediaStreamInVideos(),this.initHarkEvents()}},t.prototype.initHarkEvents=function(){this.mediaStream.getAudioTracks()[0]&&(this.streamManager.remote&&(this.session.startSpeakingEventsEnabled&&this.enableStartSpeakingEvent(),this.session.startSpeakingEventsEnabledOnce&&this.enableOnceStartSpeakingEvent(),this.session.stopSpeakingEventsEnabled&&this.enableStopSpeakingEvent(),this.session.stopSpeakingEventsEnabledOnce&&this.enableOnceStopSpeakingEvent()),this.volumeChangeEventEnabled&&this.enableVolumeChangeEvent(!0),this.volumeChangeEventEnabledOnce&&this.enableOnceVolumeChangeEvent(!0))},t.prototype.initWebRtcStats=function(){this.webRtcStats=new l.WebRtcStats(this),this.webRtcStats.initWebRtcStats()},t.prototype.stopWebRtcStats=function(){this.webRtcStats&&this.webRtcStats.isEnabled()&&this.webRtcStats.stopWebRtcStats()},t.prototype.getIceServersConf=function(){return this.session.openvidu.advancedConfiguration.iceServers?"freeice"===this.session.openvidu.advancedConfiguration.iceServers?void 0:this.session.openvidu.advancedConfiguration.iceServers:this.session.openvidu.iceServers?this.session.openvidu.iceServers:void 0},t.prototype.gatherStatsForPeer=function(){var e=this;return new Promise((function(t,n){e.isLocal()?e.getRTCPeerConnection().getSenders().forEach((function(t){return t.getStats().then((function(t){t.forEach((function(t){if(e.isReportWanted(t)){var n={};n.type=t.type,n.timestamp=t.timestamp,n.id=t.id,"outbound-rtp"===t.type&&(n.ssrc=t.ssrc,n.firCount=t.firCount,n.pliCount=t.pliCount,n.nackCount=t.nackCount,n.qpSum=t.qpSum,n.mediaType=t.kind?t.kind:t.mediaType?t.mediaType:-1!==t.id.indexOf("VideoStream")?"video":"audio","video"===n.mediaType&&(n.framesEncoded=t.framesEncoded),n.packetsSent=t.packetsSent,n.bytesSent=t.bytesSent),"candidate-pair"===t.type&&void 0!==t.totalRoundTripTime&&(n.availableOutgoingBitrate=t.availableOutgoingBitrate,n.rtt=t.currentRoundTripTime,n.averageRtt=t.totalRoundTripTime/t.responsesReceived),m.log(n)}}))}))})):e.getRTCPeerConnection().getReceivers().forEach((function(t){return t.getStats().then((function(t){t.forEach((function(t){if(e.isReportWanted(t)){var n={};n.type=t.type,n.timestamp=t.timestamp,n.id=t.id,"inbound-rtp"===t.type&&(n.ssrc=t.ssrc,n.firCount=t.firCount,n.pliCount=t.pliCount,n.nackCount=t.nackCount,n.qpSum=t.qpSum,n.mediaType=t.kind?t.kind:t.mediaType?t.mediaType:-1!==t.id.indexOf("VideoStream")?"video":"audio","video"===n.mediaType&&(n.framesDecoded=t.framesDecoded),n.packetsReceived=t.packetsReceived,n.packetsLost=t.packetsLost,n.jitter=t.jitter,n.bytesReceived=t.bytesReceived),"candidate-pair"===t.type&&void 0!==t.totalRoundTripTime&&(n.availableIncomingBitrate=t.availableIncomingBitrate,n.rtt=t.currentRoundTripTime,n.averageRtt=t.totalRoundTripTime/t.responsesReceived),m.log(n)}}))}))}))}))},t.prototype.isReportWanted=function(e){return"inbound-rtp"===e.type&&!this.isLocal()||"outbound-rtp"===e.type&&this.isLocal()||"candidate-pair"===e.type&&e.nominated&&e.bytesSent>0},t}(a.EventDispatcher);t.Stream=v},Dztv:function(e,t,n){"use strict";t.__esModule=!0;var i=n("6+/i"),o=n("9m68").OpenViduLogger.getInstance(),r=function(){function e(){this.userHandlerArrowHandler=new WeakMap,this.ee=new i}return e.prototype.off=function(e,t){if(t){var n=this.userHandlerArrowHandler.get(t);n&&this.ee.off(e,n),this.userHandlerArrowHandler.delete(t)}else this.ee.removeAllListeners(e);return this},e.prototype.onAux=function(e,t,n){var i=function(e){e?o.info(t,e):o.info(t),n(e)};return this.userHandlerArrowHandler.set(n,i),this.ee.on(e,i),this},e.prototype.onceAux=function(e,t,n){var i=this,r=function(e){e?o.info(t,e):o.info(t),n(e),i.userHandlerArrowHandler.delete(n)};return this.userHandlerArrowHandler.set(n,r),this.ee.once(e,r),this},e}();t.EventDispatcher=r},EDod:function(e,t,n){var i=n("AeG9"),o=n("cUzU");Date.now=Date.now||function(){return+new Date};var r=console;e.exports=function(e){var t,n=this,s=e.ws,a=-1,c=0,l=!0,u=!1,d="DISCONNECTED",p=s.onreconnecting,h=s.onreconnected,f=s.onconnected,g=s.onerror;e.rpc.pull=function(e,t){t.reply(null,"push")},s.onreconnecting=function(){r.debug("--------- ONRECONNECTING -----------"),"RECONNECTING"!==d?(C(),d="RECONNECTING",p&&p()):r.error("Websocket already in RECONNECTING state when receiving a new ONRECONNECTING message. Ignoring it")},s.onreconnected=function(){r.debug("--------- ONRECONNECTED -----------"),"CONNECTED"!==d?(d="CONNECTED",b(),h&&h()):r.error("Websocket already in CONNECTED state when receiving a new ONRECONNECTED message. Ignoring it")},s.onconnected=function(){r.debug("--------- ONCONNECTED -----------"),"CONNECTED"!==d?(d="CONNECTED",l=!0,y(),f&&f()):r.error("Websocket already in CONNECTED state when receiving a new ONCONNECTED message. Ignoring it")},s.onerror=function(e){r.debug("--------- ONERROR -----------"),d="DISCONNECTED",C(),g&&g(e)};var m=new o(s);r.debug("Connecting websocket to URI: "+s.uri);var v=new i(i.packers.JsonRPC,{request_timeout:e.rpc.requestTimeout,ping_request_timeout:e.rpc.heartbeatRequestTimeout},m,(function(t){r.debug("Received request: "+JSON.stringify(t));try{var n=e.rpc[t.method];void 0===n?r.error("Method "+t.method+" not registered in client"):n(t.params,t)}catch(i){r.error("Exception processing request: "+JSON.stringify(t)),r.error(i)}}));function b(){r.debug("notReconnectIfNumLessThan = "+c+" (old="+a+")"),a=c}function _(){if(l){var t=null;0!=c&&c!=a||(t={interval:e.heartbeat||5e3}),c++,n.send("ping",t,(i=c,function(e,t){e&&(r.debug("Error in ping request #"+i+" ("+e.message+")"),i>a&&(l=!1,b(),r.debug("Server did not respond to ping message #"+i+". Reconnecting... "),m.reconnectWs()))}))}else r.debug("Trying to send ping, but ping is not enabled");var i}function y(){u||(r.debug("Starting ping (if configured)"),u=!0,null!=e.heartbeat&&(t=setInterval(_,e.heartbeat),_()))}function C(){clearInterval(t),u=!1,l=!1,c=-1,v.cancel()}this.send=function(e,t,n){"ping"!==e&&r.debug("Request: method:"+e+" params:"+JSON.stringify(t));var i=Date.now();v.encode(e,t,(function(o,s){if(o){try{r.error("ERROR:"+o.message+" in Request: method:"+e+" params:"+JSON.stringify(t)+" request:"+o.request),o.data&&r.error("ERROR DATA:"+JSON.stringify(o.data))}catch(a){}o.requestTime=i}n&&(null!=s&&"pong"!==s.value&&r.debug("Response: "+JSON.stringify(s)),n(o,s))}))},this.close=function(n,i){r.debug("Closing  with code: "+n+" because: "+i),null!=t&&(r.debug("Clearing ping interval"),clearInterval(t)),u=!1,l=!1,e.sendCloseMessage?(r.debug("Sending close message"),this.send("closeSession",null,(function(e,t){e&&r.error("Error sending close message: "+JSON.stringify(e)),m.close(n,i)}))):m.close(n,i)},this.forceClose=function(e){m.forceClose(e)},this.reconnect=function(){m.reconnectWs()},this.resetPing=function(){l=!0,c=0,y()}}},EcWD:function(e,t){var n,i,o="screen";if("undefined"!=typeof window&&"undefined"!=typeof navigator&&void 0!==navigator.userAgent){var r=void 0!==window.InstallTrigger;window.opera||navigator.userAgent.indexOf(" OPR/"),window,window.addEventListener("message",(function(e){e.origin==window.location.origin&&function(e){if("PermissionDeniedError"==e){if(i)return i("PermissionDeniedError");throw new Error("PermissionDeniedError")}"rtcmulticonnection-extension-loaded"==e&&(o="desktop"),e.sourceId&&i&&i(n=e.sourceId,!0===e.canRequestAudioTrack)}(e.data)}))}function s(e){if(!e)throw'"callback" parameter is mandatory.';if(n)return e(n);i=e,window.postMessage("get-sourceId","*")}function a(e,t){if(n="",r)return e(null,{mozMediaSource:"window",mediaSource:"window"});var a={mandatory:{chromeMediaSource:o,maxWidth:screen.width>1920?screen.width:1920,maxHeight:screen.height>1080?screen.height:1080},optional:[]};"desktop"!=o||n?("desktop"==o&&(a.mandatory.chromeMediaSourceId=n),e(null,a)):t?function(e){if(!e)throw'"callback" parameter is mandatory.';if(n)return e(n);i=e,window.postMessage("audio-plus-tab","*")}((function(t,n){a.mandatory.chromeMediaSourceId=t,n&&(a.canRequestAudioTrack=!0),e("PermissionDeniedError"==t?t:null,a)})):s((function(t){a.mandatory.chromeMediaSourceId=t,e("PermissionDeniedError"==t?t:null,a)}))}t.getScreenConstraints=a,t.getScreenConstraintsWithAudio=function(e){a(e,!0)},t.isChromeExtensionAvailable=function(e){if(e){if("desktop"==o)return e(!0);window.postMessage("are-you-there","*"),setTimeout((function(){e("screen"!=o)}),2e3)}},t.getChromeExtensionStatus=function(e,t){if(r)return t("not-chrome");2!=arguments.length&&(t=e,e="lfcgfepafnobdloecchnfaclibenjold");var n=document.createElement("img");n.src="chrome-extension://"+e+"/icon.png",n.onload=function(){o="screen",window.postMessage("are-you-there","*"),setTimeout((function(){t("screen"==o?"installed-disabled":"installed-enabled")}),2e3)},n.onerror=function(){t("not-installed")}},t.getSourceId=s},FlKs:function(e,t,n){"use strict";t.__esModule=!0,t.stateify=t.TokenState=t.CharacterState=void 0;var i=n("JUw6"),o=function(e){this.j=[],this.T=e||null};o.prototype={defaultTransition:!1,on:function(e,t){if(e instanceof Array){for(var n=0;n<e.length;n++)this.j.push([e[n],t]);return this}return this.j.push([e,t]),this},next:function(e){for(var t=0;t<this.j.length;t++){var n=this.j[t],i=n[1];if(this.test(e,n[0]))return i}return this.defaultTransition},accepts:function(){return!!this.T},test:function(e,t){return e===t},emit:function(){return this.T}};var r=(0,i.inherits)(o,(function(e){this.j=[],this.T=e||null}),{test:function(e,t){return e===t||t instanceof RegExp&&t.test(e)}}),s=(0,i.inherits)(o,(function(e){this.j=[],this.T=e||null}),{jump:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.next(new e(""));return n===this.defaultTransition?(n=new this.constructor(t),this.on(e,n)):t&&(n.T=t),n},test:function(e,t){return e instanceof t}});t.CharacterState=r,t.TokenState=s,t.stateify=function(e,t,n,i){for(var o=0,s=e.length,a=t,c=[],l=void 0;o<s&&(l=a.next(e[o]));)a=l,o++;if(o>=s)return[];for(;o<s-1;)l=new r(i),c.push(l),a.on(e[o],l),a=l,o++;return l=new r(n),c.push(l),a.on(e[s-1],l),c}},HgqT:function(e,t){e.exports="function"==typeof Object.create?function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},HxXY:function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0;var r=function(e){function t(t,n,i){var o=e.call(this,!1,t,n)||this;return o.value=i,o}return o(t,e),t.prototype.callDefaultBehavior=function(){},t}(n("hzOQ").Event);t.StreamManagerEvent=r},IXxz:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){var t=e.scanner.TOKENS,n=e.parser,i=n.State,o=e.parser.start,r=t.DOMAIN,s=t.LOCALHOST,a=t.NUM,c=t.SLASH,l=t.TLD,u=t.UNDERSCORE,d=t.DOT,p=t.AT;function h(e){this.v=e}e.inherits(n.TOKENS.Base,h,{type:"mention",isLink:!0,toHref:function(){return"/"+this.toString().substr(1)}});var f=o.jump(t.AT),g=new i,m=new i(h),v=new i,b=new i;f.on(u,g),g.on(u,g).on(d,g),f.on(r,m).on(s,m).on(l,m).on(a,m),g.on(r,m).on(s,m).on(l,m).on(a,m),m.on(r,m).on(s,m).on(l,m).on(a,m).on(u,m),m.on(c,v).on(d,v).on(p,v),v.on(u,b),b.on(u,b),v.on(r,m).on(s,m).on(l,m).on(a,m),b.on(r,m).on(s,m).on(l,m).on(a,m)}},JTMn:function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0;var r=n("ryRr"),s=n("74bm"),a=n("bk74"),c=n("Dztv"),l=n("8KVD"),u=n("+ig+"),d=n("rUL0"),p=n("ksJj"),h=n("suHS"),f=n("Te8r"),g=n("BwMD"),m=n("Tt94"),v=n("/dLB"),b=n("bDgZ"),_=n("9m68").OpenViduLogger.getInstance(),y=function(e){function t(t){var n=e.call(this)||this;return n.streamManagers=[],n.remoteStreamsCreated={},n.isFirstIonicIosSubscriber=!0,n.countDownForIonicIosSubscribersActive=!0,n.remoteConnections={},n.startSpeakingEventsEnabled=!1,n.startSpeakingEventsEnabledOnce=!1,n.stopSpeakingEventsEnabled=!1,n.stopSpeakingEventsEnabledOnce=!1,n.openvidu=t,n}return o(t,e),t.prototype.connect=function(e,t){var n=this;return new Promise((function(i,o){n.processToken(e),n.openvidu.checkSystemRequirements()?(n.options={sessionId:n.sessionId,participantId:e,metadata:t?n.stringClientMetadata(t):""},n.connectAux(e).then((function(){i()})).catch((function(e){o(e)}))):o(new m.OpenViduError(m.OpenViduErrorName.BROWSER_NOT_SUPPORTED,"Browser "+b.name+" (version "+b.version+") for "+b.os.family+" is not supported in OpenVidu"))}))},t.prototype.disconnect=function(){this.leave(!1,"disconnect")},t.prototype.subscribe=function(e,t,n,i){var o,r={};r=n&&"function"!=typeof n?{insertMode:void 0!==n.insertMode?"string"==typeof n.insertMode?v.VideoInsertMode[n.insertMode]:r.insertMode:v.VideoInsertMode.APPEND,subscribeToAudio:void 0===n.subscribeToAudio||n.subscribeToAudio,subscribeToVideo:void 0===n.subscribeToVideo||n.subscribeToVideo}:{insertMode:v.VideoInsertMode.APPEND,subscribeToAudio:!0,subscribeToVideo:!0},n&&"function"==typeof n?o=n:i&&(o=i),_.info("Subscribing to "+e.connection.connectionId),e.subscribe().then((function(){_.info("Subscribed correctly to "+e.connection.connectionId),void 0!==o&&o(void 0)})).catch((function(e){void 0!==o&&o(e)}));var s=new a.Subscriber(e,t,r);return s.targetElement&&e.streamManager.createVideoElement(s.targetElement,r.insertMode),s},t.prototype.subscribeAsync=function(e,t,n){var i=this;return new Promise((function(o,r){var s,a=function(e){e?r(e):o(s)};s=n?i.subscribe(e,t,n,a):i.subscribe(e,t,a)}))},t.prototype.unsubscribe=function(e){var t=e.stream.connection.connectionId;_.info("Unsubscribing from "+t),this.openvidu.sendRequest("unsubscribeFromVideo",{sender:e.stream.connection.connectionId},(function(n,i){n?_.error("Error unsubscribing from "+t,n):_.info("Unsubscribed correctly from "+t),e.stream.disposeWebRtcPeer(),e.stream.disposeMediaStream()})),e.stream.streamManager.removeAllVideos()},t.prototype.publish=function(e){var t=this;return new Promise((function(n,i){e.session=t,e.stream.session=t,e.stream.publishedOnce?e.initialize().then((function(){t.connection.addStream(e.stream),e.reestablishStreamPlayingEvent(),e.stream.publish().then((function(){n()})).catch((function(e){i(e)}))})).catch((function(e){i(e)})):(t.connection.addStream(e.stream),e.stream.publish().then((function(){n()})).catch((function(e){i(e)})))}))},t.prototype.unpublish=function(e){var t=e.stream;if(t.connection)if(t.connection===this.connection){_.info("Unpublishing local media ("+t.connection.connectionId+")"),this.openvidu.sendRequest("unpublishVideo",(function(e,t){e?_.error(e):_.info("Media unpublished correctly")})),t.disposeWebRtcPeer(),delete t.connection.stream;var n=new f.StreamEvent(!0,e,"streamDestroyed",e.stream,"unpublish");e.emitEvent("streamDestroyed",[n]),n.callDefaultBehavior()}else _.error("The associated Connection object of this Publisher is not your local Connection.Only moderators can force unpublish on remote Streams via 'forceUnpublish' method",t);else _.error("The associated Connection object of this Publisher is null",t)},t.prototype.forceDisconnect=function(e){var t=this;return new Promise((function(n,i){_.info("Forcing disconnect for connection "+e.connectionId),t.openvidu.sendRequest("forceDisconnect",{connectionId:e.connectionId},(function(t,o){t?(_.error("Error forcing disconnect for Connection "+e.connectionId,t),i(401===t.code?new m.OpenViduError(m.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to force a disconnection"):t)):(_.info("Forcing disconnect correctly for Connection "+e.connectionId),n())}))}))},t.prototype.forceUnpublish=function(e){var t=this;return new Promise((function(n,i){_.info("Forcing unpublish for stream "+e.streamId),t.openvidu.sendRequest("forceUnpublish",{streamId:e.streamId},(function(t,o){t?(_.error("Error forcing unpublish for Stream "+e.streamId,t),i(401===t.code?new m.OpenViduError(m.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to force an unpublishing"):t)):(_.info("Forcing unpublish correctly for Stream "+e.streamId),n())}))}))},t.prototype.signal=function(e){var t=this;return new Promise((function(n,i){var o={};if(e.to&&e.to.length>0){var r=[];e.to.forEach((function(e){e.connectionId&&r.push(e.connectionId)})),o.to=r}else o.to=[];o.data=e.data?e.data:"";var s=e.type?e.type:"signal";s&&"signal:"!==s.substring(0,7)&&(s="signal:"+s),o.type=s,t.openvidu.sendRequest("sendMessage",{message:JSON.stringify(o)},(function(e,t){e?i(e):n()}))}))},t.prototype.on=function(t,n){if(e.prototype.onAux.call(this,t,"Event '"+t+"' triggered by 'Session'",n),"publisherStartSpeaking"===t)for(var i in this.startSpeakingEventsEnabled=!0,this.remoteConnections)(o=this.remoteConnections[i].stream)&&o.hasAudio&&o.enableStartSpeakingEvent();if("publisherStopSpeaking"===t)for(var i in this.stopSpeakingEventsEnabled=!0,this.remoteConnections){var o;(o=this.remoteConnections[i].stream)&&o.hasAudio&&o.enableStopSpeakingEvent()}return this},t.prototype.once=function(t,n){if(e.prototype.onceAux.call(this,t,"Event '"+t+"' triggered once by 'Session'",n),"publisherStartSpeaking"===t)for(var i in this.startSpeakingEventsEnabledOnce=!0,this.remoteConnections)(o=this.remoteConnections[i].stream)&&o.hasAudio&&o.enableOnceStartSpeakingEvent();if("publisherStopSpeaking"===t)for(var i in this.stopSpeakingEventsEnabledOnce=!0,this.remoteConnections){var o;(o=this.remoteConnections[i].stream)&&o.hasAudio&&o.enableOnceStopSpeakingEvent()}return this},t.prototype.off=function(t,n){if(e.prototype.off.call(this,t,n),"publisherStartSpeaking"===t&&0===this.ee.getListeners(t).length)for(var i in this.startSpeakingEventsEnabled=!1,this.remoteConnections)(o=this.remoteConnections[i].stream)&&o.disableStartSpeakingEvent(!1);if("publisherStopSpeaking"===t&&0===this.ee.getListeners(t).length)for(var i in this.stopSpeakingEventsEnabled=!1,this.remoteConnections){var o;(o=this.remoteConnections[i].stream)&&o.disableStopSpeakingEvent(!1)}return this},t.prototype.onParticipantJoined=function(e){var t=this;this.getConnection(e.id,"").then((function(t){_.warn("Connection "+e.id+" already exists in connections list")})).catch((function(n){var i=new r.Connection(t,e);t.remoteConnections[e.id]=i,t.ee.emitEvent("connectionCreated",[new l.ConnectionEvent(!1,t,"connectionCreated",i,"")])}))},t.prototype.onParticipantLeft=function(e){var t=this;this.getRemoteConnection(e.connectionId,"Remote connection "+e.connectionId+" unknown when 'onParticipantLeft'. Existing remote connections: "+JSON.stringify(Object.keys(this.remoteConnections))).then((function(n){if(n.stream){var i=n.stream,o=new f.StreamEvent(!0,t,"streamDestroyed",i,e.reason);t.ee.emitEvent("streamDestroyed",[o]),o.callDefaultBehavior(),delete t.remoteStreamsCreated[i.streamId],0===Object.keys(t.remoteStreamsCreated).length&&(t.isFirstIonicIosSubscriber=!0,t.countDownForIonicIosSubscribersActive=!0)}delete t.remoteConnections[n.connectionId],t.ee.emitEvent("connectionDestroyed",[new l.ConnectionEvent(!1,t,"connectionDestroyed",n,e.reason)])})).catch((function(e){_.error(e)}))},t.prototype.onParticipantPublished=function(e){var t,n=this,i=function(e){n.remoteConnections[e.connectionId]=e,n.remoteStreamsCreated[e.stream.streamId]||n.ee.emitEvent("streamCreated",[new f.StreamEvent(!1,n,"streamCreated",e.stream,"")]),n.remoteStreamsCreated[e.stream.streamId]=!0};this.getRemoteConnection(e.id,"Remote connection '"+e.id+"' unknown when 'onParticipantPublished'. Existing remote connections: "+JSON.stringify(Object.keys(this.remoteConnections))).then((function(n){t=n,e.metadata=n.data,t.options=e,t.initRemoteStreams(e.streams),i(t)})).catch((function(o){t=new r.Connection(n,e),i(t)}))},t.prototype.onParticipantUnpublished=function(e){var t=this;e.connectionId===this.connection.connectionId?this.stopPublisherStream(e.reason):this.getRemoteConnection(e.connectionId,"Remote connection '"+e.connectionId+"' unknown when 'onParticipantUnpublished'. Existing remote connections: "+JSON.stringify(Object.keys(this.remoteConnections))).then((function(n){var i=new f.StreamEvent(!0,t,"streamDestroyed",n.stream,e.reason);t.ee.emitEvent("streamDestroyed",[i]),i.callDefaultBehavior();var o=n.stream.streamId;delete t.remoteStreamsCreated[o],0===Object.keys(t.remoteStreamsCreated).length&&(t.isFirstIonicIosSubscriber=!0,t.countDownForIonicIosSubscribersActive=!0),n.removeStream(o)})).catch((function(e){_.error(e)}))},t.prototype.onParticipantEvicted=function(e){e.connectionId===this.connection.connectionId&&this.sessionId&&!this.connection.disposed&&this.leave(!0,e.reason)},t.prototype.onNewMessage=function(e){var t=this;_.info("New signal: "+JSON.stringify(e));var n=e.type?e.type.replace(/^(signal:)/,""):void 0;e.from?this.getConnection(e.from,"Connection '"+e.from+"' unknow when 'onNewMessage'. Existing remote connections: "+JSON.stringify(Object.keys(this.remoteConnections))+". Existing local connection: "+this.connection.connectionId).then((function(i){t.ee.emitEvent("signal",[new h.SignalEvent(t,n,e.data,i)]),"signal"!==e.type&&t.ee.emitEvent(e.type,[new h.SignalEvent(t,n,e.data,i)])})).catch((function(e){_.error(e)})):(this.ee.emitEvent("signal",[new h.SignalEvent(this,n,e.data,void 0)]),"signal"!==e.type&&this.ee.emitEvent(e.type,[new h.SignalEvent(this,n,e.data,void 0)]))},t.prototype.onStreamPropertyChanged=function(e){var t=this,n=function(n){if(n.stream&&n.stream.streamId===e.streamId){var i=n.stream,o=void 0;switch(e.property){case"audioActive":o=i.audioActive,e.newValue="true"===e.newValue,i.audioActive=e.newValue;break;case"videoActive":o=i.videoActive,e.newValue="true"===e.newValue,i.videoActive=e.newValue;break;case"videoDimensions":o=i.videoDimensions,e.newValue=JSON.parse(JSON.parse(e.newValue)),i.videoDimensions=e.newValue;break;case"filter":o=i.filter,e.newValue=Object.keys(e.newValue).length>0?e.newValue:void 0,void 0!==e.newValue?(i.filter=new s.Filter(e.newValue.type,e.newValue.options),i.filter.stream=i,e.newValue.lastExecMethod&&(i.filter.lastExecMethod=e.newValue.lastExecMethod)):delete i.filter,e.newValue=i.filter}t.ee.emitEvent("streamPropertyChanged",[new g.StreamPropertyChangedEvent(t,i,e.property,e.newValue,o,e.reason)]),i.streamManager&&i.streamManager.emitEvent("streamPropertyChanged",[new g.StreamPropertyChangedEvent(i.streamManager,i,e.property,e.newValue,o,e.reason)])}else _.error("No stream with streamId '"+e.streamId+"' found for connection '"+e.connectionId+"' on 'streamPropertyChanged' event")};e.connectionId===this.connection.connectionId?n(this.connection):this.getRemoteConnection(e.connectionId,"Remote connection "+e.connectionId+" unknown when 'onStreamPropertyChanged'. Existing remote connections: "+JSON.stringify(Object.keys(this.remoteConnections))).then((function(e){n(e)})).catch((function(e){_.error(e)}))},t.prototype.recvIceCandidate=function(e){var t={candidate:e.candidate,component:e.component,foundation:e.foundation,port:e.port,priority:e.priority,protocol:e.protocol,relatedAddress:e.relatedAddress,relatedPort:e.relatedPort,sdpMid:e.sdpMid,sdpMLineIndex:e.sdpMLineIndex,tcpType:e.tcpType,usernameFragment:e.usernameFragment,type:e.type,toJSON:function(){return{candidate:e.candidate}}};this.getConnection(e.senderConnectionId,"Connection not found for connectionId "+e.senderConnectionId+" owning endpoint "+e.endpointName+". Ice candidate will be ignored: "+t).then((function(n){var i=n.stream;i.getWebRtcPeer().addIceCandidate(t).catch((function(t){_.error("Error adding candidate for "+i.streamId+" stream of endpoint "+e.endpointName+": "+t)}))})).catch((function(e){_.error(e)}))},t.prototype.onSessionClosed=function(e){_.info("Session closed: "+JSON.stringify(e));var t=e.sessionId;void 0!==t?this.ee.emitEvent("session-closed",[{session:t}]):_.warn("Session undefined on session closed",e)},t.prototype.onLostConnection=function(e){_.warn("Lost connection in Session "+this.sessionId),this.sessionId&&!this.connection.disposed&&this.leave(!0,e)},t.prototype.onRecoveredConnection=function(){_.info("Recovered connection in Session "+this.sessionId),this.reconnectBrokenStreams(),this.ee.emitEvent("reconnected",[])},t.prototype.onMediaError=function(e){_.error("Media error: "+JSON.stringify(e));var t=e.error;t?this.ee.emitEvent("error-media",[{error:t}]):_.warn("Received undefined media error. Params:",e)},t.prototype.onRecordingStarted=function(e){this.ee.emitEvent("recordingStarted",[new d.RecordingEvent(this,"recordingStarted",e.id,e.name)])},t.prototype.onRecordingStopped=function(e){this.ee.emitEvent("recordingStopped",[new d.RecordingEvent(this,"recordingStopped",e.id,e.name,e.reason)])},t.prototype.onFilterEventDispatched=function(e){var t=e.connectionId;this.getConnection(t,"No connection found for connectionId "+t).then((function(t){_.info("Filter event dispatched");var n=t.stream;n.filter.handlers[e.eventType](new u.FilterEvent(n.filter,e.eventType,e.data))}))},t.prototype.reconnectBrokenStreams=function(){_.info("Re-establishing media connections...");var e=!1;this.connection.stream&&this.connection.stream.streamIceConnectionStateBroken()&&(_.warn("Re-establishing Publisher "+this.connection.stream.streamId),this.connection.stream.initWebRtcPeerSend(!0),e=!0);for(var t=0,n=Object.values(this.remoteConnections);t<n.length;t++){var i=n[t];i.stream&&i.stream.streamIceConnectionStateBroken()&&(_.warn("Re-establishing Subscriber "+i.stream.streamId),i.stream.initWebRtcPeerReceive(!0),e=!0)}e||_.info("There were no media streams in need of a reconnection")},t.prototype.emitEvent=function(e,t){this.ee.emitEvent(e,t)},t.prototype.leave=function(e,t){var n=this;if(_.info("Leaving Session (forced="+(e=!!e)+")"),this.connection){if(this.connection.disposed||e?this.openvidu.closeWs():this.openvidu.sendRequest("leaveRoom",(function(e,t){e&&_.error(e),n.openvidu.closeWs()})),this.stopPublisherStream(t),!this.connection.disposed){var i=new p.SessionDisconnectedEvent(this,t);this.ee.emitEvent("sessionDisconnected",[i]),i.callDefaultBehavior()}}else _.warn("You were not connected to the session "+this.sessionId)},t.prototype.initializeParams=function(e){return{token:e||"",session:this.sessionId,platform:b.description?b.description:"unknown",metadata:this.options.metadata?this.options.metadata:"",secret:this.openvidu.getSecret(),recorder:this.openvidu.getRecorder()}},t.prototype.connectAux=function(e){var t=this;return new Promise((function(n,i){t.openvidu.startWs((function(o){if(o)i(o);else{var s=t.initializeParams(e);t.openvidu.sendRequest("joinRoom",s,(function(e,o){if(e)i(e);else{t.capabilities={subscribe:!0,publish:"SUBSCRIBER"!==t.openvidu.role,forceUnpublish:"MODERATOR"===t.openvidu.role,forceDisconnect:"MODERATOR"===t.openvidu.role},t.connection=new r.Connection(t),t.connection.connectionId=o.id,t.connection.creationTime=o.createdAt,t.connection.data=o.metadata,t.connection.rpcSessionId=o.sessionId;var s={connections:new Array,streams:new Array};o.value.forEach((function(e){var n=new r.Connection(t,e);t.remoteConnections[n.connectionId]=n,s.connections.push(n),n.stream&&(t.remoteStreamsCreated[n.stream.streamId]=!0,s.streams.push(n.stream))})),t.ee.emitEvent("connectionCreated",[new l.ConnectionEvent(!1,t,"connectionCreated",t.connection,"")]),s.connections.forEach((function(e){t.ee.emitEvent("connectionCreated",[new l.ConnectionEvent(!1,t,"connectionCreated",e,"")])})),s.streams.forEach((function(e){t.ee.emitEvent("streamCreated",[new f.StreamEvent(!1,t,"streamCreated",e,"")])})),n()}}))}}))}))},t.prototype.stopPublisherStream=function(e){this.connection.stream&&(this.connection.stream.disposeWebRtcPeer(),this.connection.stream.isLocalStreamPublished&&this.connection.stream.ee.emitEvent("local-stream-destroyed",[e]))},t.prototype.stringClientMetadata=function(e){return"string"!=typeof e?JSON.stringify(e):e},t.prototype.getConnection=function(e,t){var n=this;return new Promise((function(i,o){var r=n.remoteConnections[e];r?i(r):n.connection.connectionId===e?i(n.connection):o(new m.OpenViduError(m.OpenViduErrorName.GENERIC_ERROR,t))}))},t.prototype.getRemoteConnection=function(e,t){var n=this;return new Promise((function(i,o){var r=n.remoteConnections[e];r?i(r):o(new m.OpenViduError(m.OpenViduErrorName.GENERIC_ERROR,t))}))},t.prototype.processToken=function(e){var t=e.match(/^(wss?\:)\/\/(([^:\/?#]*)(?:\:([0-9]+))?)([\/]{0,1}[^?#]*)(\?[^#]*|)(#.*|)$/);if(t){var n={protocol:t[1],host:t[2],hostname:t[3],port:t[4],pathname:t[5],search:t[6],hash:t[7]},i=e.split("?"),o=decodeURI(i[1]).split("&").map((function(e){return e.split("=")})).reduce((function(e,t){return e[t[0]]=t[1],e}),{});this.sessionId=o.sessionId;var r=o.secret,s=o.recorder,a=o.coturnIp,c=o.turnUsername,l=o.turnCredential,u=o.role,d=o.webrtcStatsInterval,p=o.version;if(r&&(this.openvidu.secret=r),s&&(this.openvidu.recorder=!0),c&&l){var h="turn:"+a+":3478";this.openvidu.iceServers=[{urls:["stun:"+a+":3478"]},{urls:[h,h+"?transport=tcp"],username:c,credential:l}],_.log("STUN/TURN server IP: "+a),_.log("TURN temp credentials ["+c+":"+l+"]")}u&&(this.openvidu.role=u),d&&(this.openvidu.webrtcStatsInterval=+d),p&&(_.info("openvidu-server version: "+p),p!==this.openvidu.libraryVersion&&_.error("OpenVidu Server ("+p+") and OpenVidu Browser ("+this.openvidu.libraryVersion+") versions do NOT match. There may be incompatibilities")),this.openvidu.wsUri="wss://"+n.host+"/openvidu",this.openvidu.httpUri="https://"+n.host}else _.error('Token "'+e+'" is not valid')},t}(c.EventDispatcher);t.Session=y},JUw6:function(e,t,n){"use strict";t.__esModule=!0,t.inherits=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=Object.create(e.prototype);for(var o in n)i[o]=n[o];return i.constructor=t,t.prototype=i,t}},KFtI:function(e){e.exports=JSON.parse('["stun.l.google.com:19302","stun1.l.google.com:19302","stun2.l.google.com:19302","stun3.l.google.com:19302","stun4.l.google.com:19302","stun.ekiga.net","stun.ideasip.com","stun.schlund.de","stun.stunprotocol.org:3478","stun.voiparound.com","stun.voipbuster.com","stun.voipstunt.com","stun.voxgratia.org"]')},LXjW:function(e,t,n){"use strict";t.__esModule=!0,t.tokenize=t.test=t.scanner=t.parser=t.options=t.inherits=t.find=void 0;var i=n("JUw6"),o=a(n("MW5i")),r=a(n("t/6/")),s=a(n("QSjB"));function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)});var c=function(e){return s.run(r.run(e))};t.find=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=c(e),i=[],o=0;o<n.length;o++){var r=n[o];!r.isLink||t&&r.type!==t||i.push(r.toObject())}return i},t.inherits=i.inherits,t.options=o,t.parser=s,t.scanner=r,t.test=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=c(e);return 1===n.length&&n[0].isLink&&(!t||n[0].type===t)},t.tokenize=c},MW5i:function(e,t,n){"use strict";t.__esModule=!0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o={defaultProtocol:"http",events:null,format:s,formatHref:s,nl2br:!1,tagName:"a",target:function(e,t){return"url"===t?"_blank":null},validate:!0,ignoreTags:[],attributes:null,className:"linkified"};function r(e){this.defaultProtocol=(e=e||{}).hasOwnProperty("defaultProtocol")?e.defaultProtocol:o.defaultProtocol,this.events=e.hasOwnProperty("events")?e.events:o.events,this.format=e.hasOwnProperty("format")?e.format:o.format,this.formatHref=e.hasOwnProperty("formatHref")?e.formatHref:o.formatHref,this.nl2br=e.hasOwnProperty("nl2br")?e.nl2br:o.nl2br,this.tagName=e.hasOwnProperty("tagName")?e.tagName:o.tagName,this.target=e.hasOwnProperty("target")?e.target:o.target,this.validate=e.hasOwnProperty("validate")?e.validate:o.validate,this.ignoreTags=[],this.attributes=e.attributes||e.linkAttributes||o.attributes,this.className=e.hasOwnProperty("className")?e.className:e.linkClass||o.className;for(var t=e.hasOwnProperty("ignoreTags")?e.ignoreTags:o.ignoreTags,n=0;n<t.length;n++)this.ignoreTags.push(t[n].toUpperCase())}function s(e){return e}t.defaults=o,t.Options=r,t.contains=function(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return!0;return!1},r.prototype={resolve:function(e){var t=e.toHref(this.defaultProtocol);return{formatted:this.get("format",e.toString(),e),formattedHref:this.get("formatHref",t,e),tagName:this.get("tagName",t,e),className:this.get("className",t,e),target:this.get("target",t,e),events:this.getObject("events",t,e),attributes:this.getObject("attributes",t,e)}},check:function(e){return this.get("validate",e.toString(),e)},get:function(e,t,n){var r=void 0,s=this[e];if(!s)return s;switch(void 0===s?"undefined":i(s)){case"function":return s(t,n.type);case"object":return"function"==typeof(r=s.hasOwnProperty(n.type)?s[n.type]:o[e])?r(t,n.type):r}return s},getObject:function(e,t,n){var i=this[e];return"function"==typeof i?i(t,n.type):i}}},OWZb:function OWZb(module,exports,__webpack_require__){var factory;window,factory=function factory(__WEBPACK_EXTERNAL_MODULE_recordrtc__,__WEBPACK_EXTERNAL_MODULE_video_js__){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,(function(t){return e[t]}).bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}({"./node_modules/@babel/runtime/helpers/assertThisInitialized.js":function node_modulesBabelRuntimeHelpersAssertThisInitializedJs(module,exports){eval("function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;\n\n//# sourceURL=webpack://VideojsRecord/./node_modules/@babel/runtime/helpers/assertThisInitialized.js?")},"./node_modules/@babel/runtime/helpers/asyncToGenerator.js":function node_modulesBabelRuntimeHelpersAsyncToGeneratorJs(module,exports){eval('function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nmodule.exports = _asyncToGenerator;\n\n//# sourceURL=webpack://VideojsRecord/./node_modules/@babel/runtime/helpers/asyncToGenerator.js?')},"./node_modules/@babel/runtime/helpers/classCallCheck.js":function node_modulesBabelRuntimeHelpersClassCallCheckJs(module,exports){eval('function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError("Cannot call a class as a function");\n  }\n}\n\nmodule.exports = _classCallCheck;\n\n//# sourceURL=webpack://VideojsRecord/./node_modules/@babel/runtime/helpers/classCallCheck.js?')},"./node_modules/@babel/runtime/helpers/createClass.js":function node_modulesBabelRuntimeHelpersCreateClassJs(module,exports){eval('function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if ("value" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;\n\n//# sourceURL=webpack://VideojsRecord/./node_modules/@babel/runtime/helpers/createClass.js?')},"./node_modules/@babel/runtime/helpers/get.js":function node_modulesBabelRuntimeHelpersGetJs(module,exports,__webpack_require__){eval('var superPropBase = __webpack_require__(/*! ./superPropBase */ "./node_modules/@babel/runtime/helpers/superPropBase.js");\n\nfunction _get(target, property, receiver) {\n  if (typeof Reflect !== "undefined" && Reflect.get) {\n    module.exports = _get = Reflect.get;\n  } else {\n    module.exports = _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nmodule.exports = _get;\n\n//# sourceURL=webpack://VideojsRecord/./node_modules/@babel/runtime/helpers/get.js?')},"./node_modules/@babel/runtime/helpers/getPrototypeOf.js":function node_modulesBabelRuntimeHelpersGetPrototypeOfJs(module,exports){eval("function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;\n\n//# sourceURL=webpack://VideojsRecord/./node_modules/@babel/runtime/helpers/getPrototypeOf.js?")},"./node_modules/@babel/runtime/helpers/inherits.js":function node_modulesBabelRuntimeHelpersInheritsJs(module,exports,__webpack_require__){eval('var setPrototypeOf = __webpack_require__(/*! ./setPrototypeOf */ "./node_modules/@babel/runtime/helpers/setPrototypeOf.js");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== "function" && superClass !== null) {\n    throw new TypeError("Super expression must either be null or a function");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;\n\n//# sourceURL=webpack://VideojsRecord/./node_modules/@babel/runtime/helpers/inherits.js?')},"./node_modules/@babel/runtime/helpers/interopRequireDefault.js":function node_modulesBabelRuntimeHelpersInteropRequireDefaultJs(module,exports){eval('function _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    "default": obj\n  };\n}\n\nmodule.exports = _interopRequireDefault;\n\n//# sourceURL=webpack://VideojsRecord/./node_modules/@babel/runtime/helpers/interopRequireDefault.js?')},"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js":function node_modulesBabelRuntimeHelpersPossibleConstructorReturnJs(module,exports,__webpack_require__){eval('var _typeof = __webpack_require__(/*! ../helpers/typeof */ "./node_modules/@babel/runtime/helpers/typeof.js");\n\nvar assertThisInitialized = __webpack_require__(/*! ./assertThisInitialized */ "./node_modules/@babel/runtime/helpers/assertThisInitialized.js");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === "object" || typeof call === "function")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;\n\n//# sourceURL=webpack://VideojsRecord/./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js?')},"./node_modules/@babel/runtime/helpers/setPrototypeOf.js":function node_modulesBabelRuntimeHelpersSetPrototypeOfJs(module,exports){eval("function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;\n\n//# sourceURL=webpack://VideojsRecord/./node_modules/@babel/runtime/helpers/setPrototypeOf.js?")},"./node_modules/@babel/runtime/helpers/superPropBase.js":function node_modulesBabelRuntimeHelpersSuperPropBaseJs(module,exports,__webpack_require__){eval('var getPrototypeOf = __webpack_require__(/*! ./getPrototypeOf */ "./node_modules/@babel/runtime/helpers/getPrototypeOf.js");\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n\nmodule.exports = _superPropBase;\n\n//# sourceURL=webpack://VideojsRecord/./node_modules/@babel/runtime/helpers/superPropBase.js?')},"./node_modules/@babel/runtime/helpers/typeof.js":function node_modulesBabelRuntimeHelpersTypeofJs(module,exports){eval('function _typeof(obj) {\n  "@babel/helpers - typeof";\n\n  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;\n\n//# sourceURL=webpack://VideojsRecord/./node_modules/@babel/runtime/helpers/typeof.js?')},"./node_modules/@babel/runtime/regenerator/index.js":function node_modulesBabelRuntimeRegeneratorIndexJs(module,exports,__webpack_require__){eval('module.exports = __webpack_require__(/*! regenerator-runtime */ "./node_modules/regenerator-runtime/runtime.js");\n\n\n//# sourceURL=webpack://VideojsRecord/./node_modules/@babel/runtime/regenerator/index.js?')},"./node_modules/add-zero/index.js":function node_modulesAddZeroIndexJs(module,exports,__webpack_require__){eval("var __WEBPACK_AMD_DEFINE_RESULT__;(function(exports) {\n\n  'use strict';\n\n  function addZero(value, digits) {\n    digits = digits || 2;\n\n    var isNegative = Number(value) < 0;\n    var buffer = value.toString();\n    var size = 0;\n\n    // Strip minus sign if number is negative\n    if(isNegative) {\n      buffer = buffer.slice(1);\n    }\n\n    size = digits - buffer.length + 1;\n    buffer = new Array(size).join('0').concat(buffer);\n\n    // Adds back minus sign if needed\n    return (isNegative ? '-' : '') + buffer;\n  }\n\n  if(true) {\n    !(__WEBPACK_AMD_DEFINE_RESULT__ = (function() { return addZero; }).call(exports, __webpack_require__, exports, module),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  } else {}\n\n})(this);\n\n\n//# sourceURL=webpack://VideojsRecord/./node_modules/add-zero/index.js?")},"./node_modules/global/window.js":function node_modulesGlobalWindowJs(module,exports,__webpack_require__){eval('/* WEBPACK VAR INJECTION */(function(global) {var win;\n\nif (typeof window !== "undefined") {\n    win = window;\n} else if (typeof global !== "undefined") {\n    win = global;\n} else if (typeof self !== "undefined"){\n    win = self;\n} else {\n    win = {};\n}\n\nmodule.exports = win;\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js")))\n\n//# sourceURL=webpack://VideojsRecord/./node_modules/global/window.js?')},"./node_modules/parse-ms/index.js":function node_modulesParseMsIndexJs(module,exports,__webpack_require__){"use strict";eval("\nmodule.exports = milliseconds => {\n\tif (typeof milliseconds !== 'number') {\n\t\tthrow new TypeError('Expected a number');\n\t}\n\n\tconst roundTowardsZero = milliseconds > 0 ? Math.floor : Math.ceil;\n\n\treturn {\n\t\tdays: roundTowardsZero(milliseconds / 86400000),\n\t\thours: roundTowardsZero(milliseconds / 3600000) % 24,\n\t\tminutes: roundTowardsZero(milliseconds / 60000) % 60,\n\t\tseconds: roundTowardsZero(milliseconds / 1000) % 60,\n\t\tmilliseconds: roundTowardsZero(milliseconds) % 1000,\n\t\tmicroseconds: roundTowardsZero(milliseconds * 1000) % 1000,\n\t\tnanoseconds: roundTowardsZero(milliseconds * 1e6) % 1000\n\t};\n};\n\n\n//# sourceURL=webpack://VideojsRecord/./node_modules/parse-ms/index.js?")},"./node_modules/regenerator-runtime/runtime.js":function node_modulesRegeneratorRuntimeRuntimeJs(module,exports,__webpack_require__){eval('/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  "use strict";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === "function" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || "@@iterator";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || "@@asyncIterator";\n  var toStringTagSymbol = $Symbol.toStringTag || "@@toStringTag";\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there\'s no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don\'t have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: "normal", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: "throw", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = "suspendedStart";\n  var GenStateSuspendedYield = "suspendedYield";\n  var GenStateExecuting = "executing";\n  var GenStateCompleted = "completed";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don\'t natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = "GeneratorFunction";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    ["next", "throw", "return"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === "function" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === "GeneratorFunction"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = "GeneratorFunction";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, "__await")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === "throw") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === "object" &&\n            hasOwn.call(value, "__await")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke("next", value, resolve, reject);\n          }, function(err) {\n            invoke("throw", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke("throw", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error("Generator is already running");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === "throw") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === "next") {\n          // Setting context._sent for legacy support of Babel\'s\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === "throw") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === "return") {\n          context.abrupt("return", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === "normal") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === "throw") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = "throw";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === "throw") {\n        // Note: ["return"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator["return"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = "return";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === "throw") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // "return" to "throw", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = "throw";\n        context.arg = new TypeError(\n          "The iterator does not provide a \'throw\' method");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === "throw") {\n      context.method = "throw";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = "throw";\n      context.arg = new TypeError("iterator result is not an object");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was "throw" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was "next", forget context.arg since it has been\n      // "consumed" by the delegate iterator. If context.method was\n      // "return", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== "return") {\n        context.method = "next";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = "Generator";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers\' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn\'t happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return "[object Generator]";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = "normal";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: "root" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === "function") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel\'s\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = "next";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === "t" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === "throw") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = "throw";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = "next";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === "root") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle("end");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, "catchLoc");\n          var hasFinally = hasOwn.call(entry, "finallyLoc");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error("try statement without catch or finally");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, "finallyLoc") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === "break" ||\n           type === "continue") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = "next";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === "throw") {\n        throw record.arg;\n      }\n\n      if (record.type === "break" ||\n          record.type === "continue") {\n        this.next = record.arg;\n      } else if (record.type === "return") {\n        this.rval = this.arg = record.arg;\n        this.method = "return";\n        this.next = "end";\n      } else if (record.type === "normal" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    "catch": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === "throw") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error("illegal catch attempt");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === "next") {\n        // Deliberately forget the last sent value so that we don\'t\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n   true ? module.exports : undefined\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you\'ve misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you\'re not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function("r", "regeneratorRuntime = r")(runtime);\n}\n\n\n//# sourceURL=webpack://VideojsRecord/./node_modules/regenerator-runtime/runtime.js?')},"./node_modules/webpack/buildin/global.js":function node_modulesWebpackBuildinGlobalJs(module,exports){eval('var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function("return this")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === "object") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it\'s\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n\n\n//# sourceURL=webpack://VideojsRecord/(webpack)/buildin/global.js?')},"./src/css/videojs.record.scss":function srcCssVideojsRecordScss(module,exports,__webpack_require__){eval("// extracted by mini-css-extract-plugin\n\n//# sourceURL=webpack://VideojsRecord/./src/css/videojs.record.scss?")},"./src/js/controls/animation-display.js":function srcJsControlsAnimationDisplayJs(module,exports,__webpack_require__){"use strict";eval('\n\nvar _interopRequireDefault = __webpack_require__(/*! @babel/runtime/helpers/interopRequireDefault */ "./node_modules/@babel/runtime/helpers/interopRequireDefault.js");\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\nexports.default = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ "./node_modules/@babel/runtime/helpers/classCallCheck.js"));\n\nvar _createClass2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/createClass */ "./node_modules/@babel/runtime/helpers/createClass.js"));\n\nvar _get2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/get */ "./node_modules/@babel/runtime/helpers/get.js"));\n\nvar _inherits2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/inherits */ "./node_modules/@babel/runtime/helpers/inherits.js"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/getPrototypeOf.js"));\n\nvar _video = _interopRequireDefault(__webpack_require__(/*! video.js */ "video.js"));\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar Component = _video.default.getComponent(\'Component\');\n\nvar AnimationDisplay = function (_Component) {\n  (0, _inherits2.default)(AnimationDisplay, _Component);\n\n  var _super = _createSuper(AnimationDisplay);\n\n  function AnimationDisplay() {\n    (0, _classCallCheck2.default)(this, AnimationDisplay);\n    return _super.apply(this, arguments);\n  }\n\n  (0, _createClass2.default)(AnimationDisplay, [{\n    key: "createEl",\n    value: function createEl() {\n      return (0, _get2.default)((0, _getPrototypeOf2.default)(AnimationDisplay.prototype), "createEl", this).call(this, \'div\', {\n        className: \'vjs-animation-display\',\n        innerHTML: \'<img />\'\n      });\n    }\n  }]);\n  return AnimationDisplay;\n}(Component);\n\nComponent.registerComponent(\'AnimationDisplay\', AnimationDisplay);\nvar _default = AnimationDisplay;\nexports.default = _default;\nmodule.exports = exports.default;\n\n//# sourceURL=webpack://VideojsRecord/./src/js/controls/animation-display.js?')},"./src/js/controls/camera-button.js":function srcJsControlsCameraButtonJs(module,exports,__webpack_require__){"use strict";eval('\n\nvar _interopRequireDefault = __webpack_require__(/*! @babel/runtime/helpers/interopRequireDefault */ "./node_modules/@babel/runtime/helpers/interopRequireDefault.js");\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\nexports.default = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ "./node_modules/@babel/runtime/helpers/classCallCheck.js"));\n\nvar _createClass2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/createClass */ "./node_modules/@babel/runtime/helpers/createClass.js"));\n\nvar _get2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/get */ "./node_modules/@babel/runtime/helpers/get.js"));\n\nvar _inherits2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/inherits */ "./node_modules/@babel/runtime/helpers/inherits.js"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/getPrototypeOf.js"));\n\nvar _video = _interopRequireDefault(__webpack_require__(/*! video.js */ "video.js"));\n\nvar _event = _interopRequireDefault(__webpack_require__(/*! ../event */ "./src/js/event.js"));\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar Button = _video.default.getComponent(\'Button\');\n\nvar Component = _video.default.getComponent(\'Component\');\n\nvar CameraButton = function (_Button) {\n  (0, _inherits2.default)(CameraButton, _Button);\n\n  var _super = _createSuper(CameraButton);\n\n  function CameraButton() {\n    (0, _classCallCheck2.default)(this, CameraButton);\n    return _super.apply(this, arguments);\n  }\n\n  (0, _createClass2.default)(CameraButton, [{\n    key: "buildCSSClass",\n    value: function buildCSSClass() {\n      return \'vjs-camera-button vjs-control vjs-button vjs-icon-photo-camera\';\n    }\n  }, {\n    key: "enable",\n    value: function enable() {\n      (0, _get2.default)((0, _getPrototypeOf2.default)(CameraButton.prototype), "enable", this).call(this);\n      this.on(this.player_, _event.default.START_RECORD, this.onStart);\n      this.on(this.player_, _event.default.STOP_RECORD, this.onStop);\n    }\n  }, {\n    key: "disable",\n    value: function disable() {\n      (0, _get2.default)((0, _getPrototypeOf2.default)(CameraButton.prototype), "disable", this).call(this);\n      this.off(this.player_, _event.default.START_RECORD, this.onStart);\n      this.off(this.player_, _event.default.STOP_RECORD, this.onStop);\n    }\n  }, {\n    key: "show",\n    value: function show() {\n      if (this.layoutExclude && this.layoutExclude === true) {\n        return;\n      }\n\n      (0, _get2.default)((0, _getPrototypeOf2.default)(CameraButton.prototype), "show", this).call(this);\n    }\n  }, {\n    key: "handleClick",\n    value: function handleClick(event) {\n      var recorder = this.player_.record();\n\n      if (!recorder.isProcessing()) {\n        recorder.start();\n      } else {\n        recorder.retrySnapshot();\n        this.onStop();\n        this.player_.trigger(_event.default.RETRY);\n      }\n    }\n  }, {\n    key: "onStart",\n    value: function onStart(event) {\n      this.removeClass(\'vjs-icon-photo-camera\');\n      this.addClass(\'vjs-icon-replay\');\n      this.controlText(\'Retry\');\n    }\n  }, {\n    key: "onStop",\n    value: function onStop(event) {\n      this.removeClass(\'vjs-icon-replay\');\n      this.addClass(\'vjs-icon-photo-camera\');\n      this.controlText(\'Image\');\n    }\n  }]);\n  return CameraButton;\n}(Button);\n\nCameraButton.prototype.controlText_ = \'Image\';\nComponent.registerComponent(\'CameraButton\', CameraButton);\nvar _default = CameraButton;\nexports.default = _default;\nmodule.exports = exports.default;\n\n//# sourceURL=webpack://VideojsRecord/./src/js/controls/camera-button.js?')},"./src/js/controls/device-button.js":function srcJsControlsDeviceButtonJs(module,exports,__webpack_require__){"use strict";eval('\n\nvar _interopRequireDefault = __webpack_require__(/*! @babel/runtime/helpers/interopRequireDefault */ "./node_modules/@babel/runtime/helpers/interopRequireDefault.js");\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\nexports.default = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ "./node_modules/@babel/runtime/helpers/classCallCheck.js"));\n\nvar _createClass2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/createClass */ "./node_modules/@babel/runtime/helpers/createClass.js"));\n\nvar _get2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/get */ "./node_modules/@babel/runtime/helpers/get.js"));\n\nvar _inherits2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/inherits */ "./node_modules/@babel/runtime/helpers/inherits.js"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/getPrototypeOf.js"));\n\nvar _video = _interopRequireDefault(__webpack_require__(/*! video.js */ "video.js"));\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar Button = _video.default.getComponent(\'Button\');\n\nvar Component = _video.default.getComponent(\'Component\');\n\nvar DeviceButton = function (_Button) {\n  (0, _inherits2.default)(DeviceButton, _Button);\n\n  var _super = _createSuper(DeviceButton);\n\n  function DeviceButton() {\n    (0, _classCallCheck2.default)(this, DeviceButton);\n    return _super.apply(this, arguments);\n  }\n\n  (0, _createClass2.default)(DeviceButton, [{\n    key: "handleClick",\n    value: function handleClick(event) {\n      this.player_.record().getDevice();\n    }\n  }, {\n    key: "show",\n    value: function show() {\n      if (this.layoutExclude && this.layoutExclude === true) {\n        return;\n      }\n\n      (0, _get2.default)((0, _getPrototypeOf2.default)(DeviceButton.prototype), "show", this).call(this);\n    }\n  }]);\n  return DeviceButton;\n}(Button);\n\nDeviceButton.prototype.controlText_ = \'Device\';\nComponent.registerComponent(\'DeviceButton\', DeviceButton);\nvar _default = DeviceButton;\nexports.default = _default;\nmodule.exports = exports.default;\n\n//# sourceURL=webpack://VideojsRecord/./src/js/controls/device-button.js?')},"./src/js/controls/picture-in-picture-toggle.js":function srcJsControlsPictureInPictureToggleJs(module,exports,__webpack_require__){"use strict";eval('\n\nvar _interopRequireDefault = __webpack_require__(/*! @babel/runtime/helpers/interopRequireDefault */ "./node_modules/@babel/runtime/helpers/interopRequireDefault.js");\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\nexports.default = void 0;\n\nvar _regenerator = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/regenerator */ "./node_modules/@babel/runtime/regenerator/index.js"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ "./node_modules/@babel/runtime/helpers/asyncToGenerator.js"));\n\nvar _classCallCheck2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ "./node_modules/@babel/runtime/helpers/classCallCheck.js"));\n\nvar _createClass2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/createClass */ "./node_modules/@babel/runtime/helpers/createClass.js"));\n\nvar _get2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/get */ "./node_modules/@babel/runtime/helpers/get.js"));\n\nvar _inherits2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/inherits */ "./node_modules/@babel/runtime/helpers/inherits.js"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/getPrototypeOf.js"));\n\nvar _video = _interopRequireDefault(__webpack_require__(/*! video.js */ "video.js"));\n\nvar _event = _interopRequireDefault(__webpack_require__(/*! ../event */ "./src/js/event.js"));\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar Button = _video.default.getComponent(\'Button\');\n\nvar Component = _video.default.getComponent(\'Component\');\n\nvar PictureInPictureToggle = function (_Button) {\n  (0, _inherits2.default)(PictureInPictureToggle, _Button);\n\n  var _super = _createSuper(PictureInPictureToggle);\n\n  function PictureInPictureToggle(player, options) {\n    var _this;\n\n    (0, _classCallCheck2.default)(this, PictureInPictureToggle);\n    _this = _super.call(this, player, options);\n\n    _this.on(_this.player_, _event.default.ENTER_PIP, _this.onStart);\n\n    _this.on(_this.player_, _event.default.LEAVE_PIP, _this.onStop);\n\n    return _this;\n  }\n\n  (0, _createClass2.default)(PictureInPictureToggle, [{\n    key: "buildCSSClass",\n    value: function buildCSSClass() {\n      return \'vjs-pip-button vjs-control vjs-button vjs-icon-picture-in-picture-start\';\n    }\n  }, {\n    key: "show",\n    value: function show() {\n      if (this.layoutExclude && this.layoutExclude === true) {\n        return;\n      }\n\n      (0, _get2.default)((0, _getPrototypeOf2.default)(PictureInPictureToggle.prototype), "show", this).call(this);\n    }\n  }, {\n    key: "handleClick",\n    value: function () {\n      var _handleClick = (0, _asyncToGenerator2.default)(_regenerator.default.mark(function _callee(event) {\n        var recorder;\n        return _regenerator.default.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                recorder = this.player_.record();\n                this.disable();\n                _context.prev = 2;\n\n                if (!(recorder.mediaElement !== document.pictureInPictureElement)) {\n                  _context.next = 8;\n                  break;\n                }\n\n                _context.next = 6;\n                return recorder.mediaElement.requestPictureInPicture();\n\n              case 6:\n                _context.next = 10;\n                break;\n\n              case 8:\n                _context.next = 10;\n                return document.exitPictureInPicture();\n\n              case 10:\n                _context.next = 15;\n                break;\n\n              case 12:\n                _context.prev = 12;\n                _context.t0 = _context["catch"](2);\n                this.player_.trigger(_event.default.ERROR, _context.t0);\n\n              case 15:\n                _context.prev = 15;\n                this.enable();\n                return _context.finish(15);\n\n              case 18:\n              case "end":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[2, 12, 15, 18]]);\n      }));\n\n      function handleClick(_x) {\n        return _handleClick.apply(this, arguments);\n      }\n\n      return handleClick;\n    }()\n  }, {\n    key: "onStart",\n    value: function onStart(event) {\n      this.removeClass(\'vjs-icon-picture-in-picture-start\');\n      this.addClass(\'vjs-icon-picture-in-picture-stop\');\n    }\n  }, {\n    key: "onStop",\n    value: function onStop(event) {\n      this.removeClass(\'vjs-icon-picture-in-picture-stop\');\n      this.addClass(\'vjs-icon-picture-in-picture-start\');\n    }\n  }]);\n  return PictureInPictureToggle;\n}(Button);\n\nPictureInPictureToggle.prototype.controlText_ = \'Picture in Picture\';\nComponent.registerComponent(\'PictureInPictureToggle\', PictureInPictureToggle);\nvar _default = PictureInPictureToggle;\nexports.default = _default;\nmodule.exports = exports.default;\n\n//# sourceURL=webpack://VideojsRecord/./src/js/controls/picture-in-picture-toggle.js?')},"./src/js/controls/record-canvas.js":function srcJsControlsRecordCanvasJs(module,exports,__webpack_require__){"use strict";eval('\n\nvar _interopRequireDefault = __webpack_require__(/*! @babel/runtime/helpers/interopRequireDefault */ "./node_modules/@babel/runtime/helpers/interopRequireDefault.js");\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\nexports.default = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ "./node_modules/@babel/runtime/helpers/classCallCheck.js"));\n\nvar _createClass2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/createClass */ "./node_modules/@babel/runtime/helpers/createClass.js"));\n\nvar _get2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/get */ "./node_modules/@babel/runtime/helpers/get.js"));\n\nvar _inherits2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/inherits */ "./node_modules/@babel/runtime/helpers/inherits.js"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/getPrototypeOf.js"));\n\nvar _video = _interopRequireDefault(__webpack_require__(/*! video.js */ "video.js"));\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar Component = _video.default.getComponent(\'Component\');\n\nvar RecordCanvas = function (_Component) {\n  (0, _inherits2.default)(RecordCanvas, _Component);\n\n  var _super = _createSuper(RecordCanvas);\n\n  function RecordCanvas() {\n    (0, _classCallCheck2.default)(this, RecordCanvas);\n    return _super.apply(this, arguments);\n  }\n\n  (0, _createClass2.default)(RecordCanvas, [{\n    key: "createEl",\n    value: function createEl() {\n      return (0, _get2.default)((0, _getPrototypeOf2.default)(RecordCanvas.prototype), "createEl", this).call(this, \'div\', {\n        className: \'vjs-record-canvas\',\n        innerHTML: \'<canvas></canvas>\'\n      });\n    }\n  }]);\n  return RecordCanvas;\n}(Component);\n\nComponent.registerComponent(\'RecordCanvas\', RecordCanvas);\nvar _default = RecordCanvas;\nexports.default = _default;\nmodule.exports = exports.default;\n\n//# sourceURL=webpack://VideojsRecord/./src/js/controls/record-canvas.js?')},"./src/js/controls/record-indicator.js":function srcJsControlsRecordIndicatorJs(module,exports,__webpack_require__){"use strict";eval('\n\nvar _interopRequireDefault = __webpack_require__(/*! @babel/runtime/helpers/interopRequireDefault */ "./node_modules/@babel/runtime/helpers/interopRequireDefault.js");\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\nexports.default = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ "./node_modules/@babel/runtime/helpers/classCallCheck.js"));\n\nvar _createClass2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/createClass */ "./node_modules/@babel/runtime/helpers/createClass.js"));\n\nvar _get2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/get */ "./node_modules/@babel/runtime/helpers/get.js"));\n\nvar _inherits2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/inherits */ "./node_modules/@babel/runtime/helpers/inherits.js"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/getPrototypeOf.js"));\n\nvar _video = _interopRequireDefault(__webpack_require__(/*! video.js */ "video.js"));\n\nvar _event = _interopRequireDefault(__webpack_require__(/*! ../event */ "./src/js/event.js"));\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar Component = _video.default.getComponent(\'Component\');\n\nvar RecordIndicator = function (_Component) {\n  (0, _inherits2.default)(RecordIndicator, _Component);\n\n  var _super = _createSuper(RecordIndicator);\n\n  function RecordIndicator(player, options) {\n    var _this;\n\n    (0, _classCallCheck2.default)(this, RecordIndicator);\n    _this = _super.call(this, player, options);\n\n    _this.enable();\n\n    return _this;\n  }\n\n  (0, _createClass2.default)(RecordIndicator, [{\n    key: "createEl",\n    value: function createEl() {\n      var props = {\n        className: \'vjs-record-indicator vjs-control\',\n        dir: \'ltr\'\n      };\n      var attr = {\n        \'data-label\': this.localize(\'REC\')\n      };\n      return (0, _get2.default)((0, _getPrototypeOf2.default)(RecordIndicator.prototype), "createEl", this).call(this, \'div\', props, attr);\n    }\n  }, {\n    key: "enable",\n    value: function enable() {\n      this.on(this.player_, _event.default.START_RECORD, this.show);\n      this.on(this.player_, _event.default.STOP_RECORD, this.hide);\n    }\n  }, {\n    key: "disable",\n    value: function disable() {\n      this.off(this.player_, _event.default.START_RECORD, this.show);\n      this.off(this.player_, _event.default.STOP_RECORD, this.hide);\n    }\n  }, {\n    key: "show",\n    value: function show() {\n      if (this.layoutExclude && this.layoutExclude === true) {\n        return;\n      }\n\n      (0, _get2.default)((0, _getPrototypeOf2.default)(RecordIndicator.prototype), "show", this).call(this);\n    }\n  }]);\n  return RecordIndicator;\n}(Component);\n\nComponent.registerComponent(\'RecordIndicator\', RecordIndicator);\nvar _default = RecordIndicator;\nexports.default = _default;\nmodule.exports = exports.default;\n\n//# sourceURL=webpack://VideojsRecord/./src/js/controls/record-indicator.js?')},"./src/js/controls/record-toggle.js":function srcJsControlsRecordToggleJs(module,exports,__webpack_require__){"use strict";eval('\n\nvar _interopRequireDefault = __webpack_require__(/*! @babel/runtime/helpers/interopRequireDefault */ "./node_modules/@babel/runtime/helpers/interopRequireDefault.js");\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\nexports.default = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ "./node_modules/@babel/runtime/helpers/classCallCheck.js"));\n\nvar _createClass2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/createClass */ "./node_modules/@babel/runtime/helpers/createClass.js"));\n\nvar _get2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/get */ "./node_modules/@babel/runtime/helpers/get.js"));\n\nvar _inherits2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/inherits */ "./node_modules/@babel/runtime/helpers/inherits.js"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/getPrototypeOf.js"));\n\nvar _video = _interopRequireDefault(__webpack_require__(/*! video.js */ "video.js"));\n\nvar _event = _interopRequireDefault(__webpack_require__(/*! ../event */ "./src/js/event.js"));\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar Button = _video.default.getComponent(\'Button\');\n\nvar Component = _video.default.getComponent(\'Component\');\n\nvar RecordToggle = function (_Button) {\n  (0, _inherits2.default)(RecordToggle, _Button);\n\n  var _super = _createSuper(RecordToggle);\n\n  function RecordToggle() {\n    (0, _classCallCheck2.default)(this, RecordToggle);\n    return _super.apply(this, arguments);\n  }\n\n  (0, _createClass2.default)(RecordToggle, [{\n    key: "buildCSSClass",\n    value: function buildCSSClass() {\n      return \'vjs-record-button vjs-control vjs-button vjs-icon-record-start\';\n    }\n  }, {\n    key: "enable",\n    value: function enable() {\n      (0, _get2.default)((0, _getPrototypeOf2.default)(RecordToggle.prototype), "enable", this).call(this);\n      this.on(this.player_, _event.default.START_RECORD, this.onStart);\n      this.on(this.player_, _event.default.STOP_RECORD, this.onStop);\n    }\n  }, {\n    key: "disable",\n    value: function disable() {\n      (0, _get2.default)((0, _getPrototypeOf2.default)(RecordToggle.prototype), "disable", this).call(this);\n      this.off(this.player_, _event.default.START_RECORD, this.onStart);\n      this.off(this.player_, _event.default.STOP_RECORD, this.onStop);\n    }\n  }, {\n    key: "show",\n    value: function show() {\n      if (this.layoutExclude && this.layoutExclude === true) {\n        return;\n      }\n\n      (0, _get2.default)((0, _getPrototypeOf2.default)(RecordToggle.prototype), "show", this).call(this);\n    }\n  }, {\n    key: "handleClick",\n    value: function handleClick(event) {\n      var recorder = this.player_.record();\n\n      if (!recorder.isRecording()) {\n        recorder.start();\n      } else {\n        recorder.stop();\n      }\n    }\n  }, {\n    key: "onStart",\n    value: function onStart(event) {\n      this.removeClass(\'vjs-icon-record-start\');\n      this.addClass(\'vjs-icon-record-stop\');\n      this.controlText(\'Stop\');\n    }\n  }, {\n    key: "onStop",\n    value: function onStop(event) {\n      this.removeClass(\'vjs-icon-record-stop\');\n      this.addClass(\'vjs-icon-record-start\');\n      this.controlText(\'Record\');\n    }\n  }]);\n  return RecordToggle;\n}(Button);\n\nRecordToggle.prototype.controlText_ = \'Record\';\nComponent.registerComponent(\'RecordToggle\', RecordToggle);\nvar _default = RecordToggle;\nexports.default = _default;\nmodule.exports = exports.default;\n\n//# sourceURL=webpack://VideojsRecord/./src/js/controls/record-toggle.js?')},"./src/js/defaults.js":function srcJsDefaultsJs(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar pluginDefaultOptions = {\n  image: false,\n  audio: false,\n  video: false,\n  animation: false,\n  screen: false,\n  maxLength: 10,\n  maxFileSize: 0,\n  displayMilliseconds: false,\n  frameWidth: 320,\n  frameHeight: 240,\n  debug: false,\n  pip: false,\n  autoMuteDevice: false,\n  videoBitRate: 1200,\n  videoEngine: 'recordrtc',\n  videoFrameRate: 30,\n  videoMimeType: 'video/webm',\n  videoRecorderType: 'auto',\n  videoWorkerURL: '',\n  videoWebAssemblyURL: '',\n  audioEngine: 'recordrtc',\n  audioRecorderType: 'auto',\n  audioMimeType: 'auto',\n  audioBufferSize: 4096,\n  audioSampleRate: 44100,\n  audioBitRate: 128,\n  audioChannels: 2,\n  audioWorkerURL: '',\n  audioWebAssemblyURL: '',\n  audioBufferUpdate: false,\n  animationFrameRate: 200,\n  animationQuality: 10,\n  imageOutputType: 'dataURL',\n  imageOutputFormat: 'image/png',\n  imageOutputQuality: 0.92,\n  timeSlice: 0,\n  convertEngine: '',\n  convertWorkerURL: '',\n  convertOptions: [],\n  hotKeys: false,\n  pluginLibraryOptions: {}\n};\nvar _default = pluginDefaultOptions;\nexports.default = _default;\nmodule.exports = exports.default;\n\n//# sourceURL=webpack://VideojsRecord/./src/js/defaults.js?")},"./src/js/engine/convert-engine.js":function srcJsEngineConvertEngineJs(module,exports,__webpack_require__){"use strict";eval('\n\nvar _interopRequireDefault = __webpack_require__(/*! @babel/runtime/helpers/interopRequireDefault */ "./node_modules/@babel/runtime/helpers/interopRequireDefault.js");\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\nexports.FFMPEGJS = exports.TSEBML = exports.CONVERT_PLUGINS = exports.ConvertEngine = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ "./node_modules/@babel/runtime/helpers/classCallCheck.js"));\n\nvar _createClass2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/createClass */ "./node_modules/@babel/runtime/helpers/createClass.js"));\n\nvar _inherits2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/inherits */ "./node_modules/@babel/runtime/helpers/inherits.js"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/getPrototypeOf.js"));\n\nvar _video = _interopRequireDefault(__webpack_require__(/*! video.js */ "video.js"));\n\nvar _fileUtil = __webpack_require__(/*! ../utils/file-util */ "./src/js/utils/file-util.js");\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar Component = _video.default.getComponent(\'Component\');\n\nvar TSEBML = \'ts-ebml\';\nexports.TSEBML = TSEBML;\nvar FFMPEGJS = \'ffmpeg.js\';\nexports.FFMPEGJS = FFMPEGJS;\nvar CONVERT_PLUGINS = [TSEBML, FFMPEGJS];\nexports.CONVERT_PLUGINS = CONVERT_PLUGINS;\n\nvar ConvertEngine = function (_Component) {\n  (0, _inherits2.default)(ConvertEngine, _Component);\n\n  var _super = _createSuper(ConvertEngine);\n\n  function ConvertEngine(player, options) {\n    (0, _classCallCheck2.default)(this, ConvertEngine);\n    options.evented = true;\n    return _super.call(this, player, options);\n  }\n\n  (0, _createClass2.default)(ConvertEngine, [{\n    key: "setup",\n    value: function setup(mediaType, debug) {\n      this.mediaType = mediaType;\n      this.debug = debug;\n    }\n  }, {\n    key: "loadBlob",\n    value: function loadBlob(data) {\n      return (0, _fileUtil.blobToArrayBuffer)(data);\n    }\n  }, {\n    key: "addFileInfo",\n    value: function addFileInfo(fileObj, now) {\n      (0, _fileUtil.addFileInfo)(fileObj, now);\n    }\n  }]);\n  return ConvertEngine;\n}(Component);\n\nexports.ConvertEngine = ConvertEngine;\n_video.default.ConvertEngine = ConvertEngine;\nComponent.registerComponent(\'ConvertEngine\', ConvertEngine);\n\n//# sourceURL=webpack://VideojsRecord/./src/js/engine/convert-engine.js?')},"./src/js/engine/engine-loader.js":function srcJsEngineEngineLoaderJs(module,exports,__webpack_require__){"use strict";eval('\n\nvar _interopRequireDefault = __webpack_require__(/*! @babel/runtime/helpers/interopRequireDefault */ "./node_modules/@babel/runtime/helpers/interopRequireDefault.js");\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\nexports.getConvertEngine = exports.getVideoEngine = exports.isAudioPluginActive = exports.getAudioEngine = void 0;\n\nvar _video = _interopRequireDefault(__webpack_require__(/*! video.js */ "video.js"));\n\nvar _recordRtc = _interopRequireDefault(__webpack_require__(/*! ./record-rtc */ "./src/js/engine/record-rtc.js"));\n\nvar _convertEngine = __webpack_require__(/*! ./convert-engine */ "./src/js/engine/convert-engine.js");\n\nvar _recordEngine = __webpack_require__(/*! ./record-engine */ "./src/js/engine/record-engine.js");\n\nvar getAudioEngine = function getAudioEngine(audioEngine) {\n  var AudioEngineClass;\n\n  switch (audioEngine) {\n    case _recordEngine.RECORDRTC:\n      AudioEngineClass = _recordRtc.default;\n      break;\n\n    case _recordEngine.LIBVORBISJS:\n      AudioEngineClass = _video.default.LibVorbisEngine;\n      break;\n\n    case _recordEngine.RECORDERJS:\n      AudioEngineClass = _video.default.RecorderjsEngine;\n      break;\n\n    case _recordEngine.LAMEJS:\n      AudioEngineClass = _video.default.LamejsEngine;\n      break;\n\n    case _recordEngine.OPUSRECORDER:\n      AudioEngineClass = _video.default.OpusRecorderEngine;\n      break;\n\n    case _recordEngine.VMSG:\n      AudioEngineClass = _video.default.VmsgEngine;\n      break;\n\n    default:\n      throw new Error(\'Unknown audioEngine: \' + audioEngine);\n  }\n\n  return AudioEngineClass;\n};\n\nexports.getAudioEngine = getAudioEngine;\n\nvar getVideoEngine = function getVideoEngine(videoEngine) {\n  var VideoEngineClass;\n\n  switch (videoEngine) {\n    case _recordEngine.RECORDRTC:\n      VideoEngineClass = _recordRtc.default;\n      break;\n\n    case _recordEngine.WEBMWASM:\n      VideoEngineClass = _video.default.WebmWasmEngine;\n      break;\n\n    default:\n      throw new Error(\'Unknown videoEngine: \' + videoEngine);\n  }\n\n  return VideoEngineClass;\n};\n\nexports.getVideoEngine = getVideoEngine;\n\nvar isAudioPluginActive = function isAudioPluginActive(audioEngine) {\n  return _recordEngine.AUDIO_PLUGINS.indexOf(audioEngine) > -1;\n};\n\nexports.isAudioPluginActive = isAudioPluginActive;\n\nvar getConvertEngine = function getConvertEngine(convertEngine) {\n  var ConvertEngineClass;\n\n  switch (convertEngine) {\n    case \'\':\n      break;\n\n    case _convertEngine.TSEBML:\n      ConvertEngineClass = _video.default.TsEBMLEngine;\n      break;\n\n    case _convertEngine.FFMPEGJS:\n      ConvertEngineClass = _video.default.FFmpegjsEngine;\n      break;\n\n    default:\n      throw new Error(\'Unknown convertEngine: \' + convertEngine);\n  }\n\n  return ConvertEngineClass;\n};\n\nexports.getConvertEngine = getConvertEngine;\n\n//# sourceURL=webpack://VideojsRecord/./src/js/engine/engine-loader.js?')},"./src/js/engine/record-engine.js":function srcJsEngineRecordEngineJs(module,exports,__webpack_require__){"use strict";eval('\n\nvar _interopRequireDefault = __webpack_require__(/*! @babel/runtime/helpers/interopRequireDefault */ "./node_modules/@babel/runtime/helpers/interopRequireDefault.js");\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\nexports.WEBMWASM = exports.VMSG = exports.OPUSRECORDER = exports.LAMEJS = exports.RECORDERJS = exports.LIBVORBISJS = exports.RECORDRTC = exports.VIDEO_PLUGINS = exports.AUDIO_PLUGINS = exports.RECORD_PLUGINS = exports.RecordEngine = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ "./node_modules/@babel/runtime/helpers/classCallCheck.js"));\n\nvar _createClass2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/createClass */ "./node_modules/@babel/runtime/helpers/createClass.js"));\n\nvar _inherits2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/inherits */ "./node_modules/@babel/runtime/helpers/inherits.js"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/getPrototypeOf.js"));\n\nvar _video = _interopRequireDefault(__webpack_require__(/*! video.js */ "video.js"));\n\nvar _event = _interopRequireDefault(__webpack_require__(/*! ../event */ "./src/js/event.js"));\n\nvar _fileUtil = __webpack_require__(/*! ../utils/file-util */ "./src/js/utils/file-util.js");\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar Component = _video.default.getComponent(\'Component\');\n\nvar RECORDRTC = \'recordrtc\';\nexports.RECORDRTC = RECORDRTC;\nvar LIBVORBISJS = \'libvorbis.js\';\nexports.LIBVORBISJS = LIBVORBISJS;\nvar RECORDERJS = \'recorder.js\';\nexports.RECORDERJS = RECORDERJS;\nvar LAMEJS = \'lamejs\';\nexports.LAMEJS = LAMEJS;\nvar OPUSRECORDER = \'opus-recorder\';\nexports.OPUSRECORDER = OPUSRECORDER;\nvar VMSG = \'vmsg\';\nexports.VMSG = VMSG;\nvar WEBMWASM = \'webm-wasm\';\nexports.WEBMWASM = WEBMWASM;\nvar AUDIO_PLUGINS = [LIBVORBISJS, RECORDERJS, LAMEJS, OPUSRECORDER, VMSG];\nexports.AUDIO_PLUGINS = AUDIO_PLUGINS;\nvar VIDEO_PLUGINS = [WEBMWASM];\nexports.VIDEO_PLUGINS = VIDEO_PLUGINS;\nvar RECORD_PLUGINS = AUDIO_PLUGINS.concat(VIDEO_PLUGINS);\nexports.RECORD_PLUGINS = RECORD_PLUGINS;\n\nvar RecordEngine = function (_Component) {\n  (0, _inherits2.default)(RecordEngine, _Component);\n\n  var _super = _createSuper(RecordEngine);\n\n  function RecordEngine(player, options) {\n    (0, _classCallCheck2.default)(this, RecordEngine);\n    options.evented = true;\n    return _super.call(this, player, options);\n  }\n\n  (0, _createClass2.default)(RecordEngine, [{\n    key: "dispose",\n    value: function dispose() {\n      if (this.recordedData !== undefined) {\n        URL.revokeObjectURL(this.recordedData);\n      }\n    }\n  }, {\n    key: "destroy",\n    value: function destroy() {}\n  }, {\n    key: "addFileInfo",\n    value: function addFileInfo(fileObj) {\n      (0, _fileUtil.addFileInfo)(fileObj);\n    }\n  }, {\n    key: "onStopRecording",\n    value: function onStopRecording(data) {\n      this.recordedData = data;\n      this.addFileInfo(this.recordedData);\n      this.dispose();\n      this.trigger(_event.default.RECORD_COMPLETE);\n    }\n  }, {\n    key: "saveAs",\n    value: function saveAs(name) {\n      var fileName = name[Object.keys(name)[0]];\n      (0, _fileUtil.downloadBlob)(fileName, this.recordedData);\n    }\n  }]);\n  return RecordEngine;\n}(Component);\n\nexports.RecordEngine = RecordEngine;\n_video.default.RecordEngine = RecordEngine;\nComponent.registerComponent(\'RecordEngine\', RecordEngine);\n\n//# sourceURL=webpack://VideojsRecord/./src/js/engine/record-engine.js?')},"./src/js/engine/record-mode.js":function srcJsEngineRecordModeJs(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.AUDIO_SCREEN = exports.SCREEN_ONLY = exports.ANIMATION = exports.AUDIO_VIDEO = exports.VIDEO_ONLY = exports.AUDIO_ONLY = exports.IMAGE_ONLY = exports.getRecorderMode = void 0;\nvar IMAGE_ONLY = 'image_only';\nexports.IMAGE_ONLY = IMAGE_ONLY;\nvar AUDIO_ONLY = 'audio_only';\nexports.AUDIO_ONLY = AUDIO_ONLY;\nvar VIDEO_ONLY = 'video_only';\nexports.VIDEO_ONLY = VIDEO_ONLY;\nvar AUDIO_VIDEO = 'audio_video';\nexports.AUDIO_VIDEO = AUDIO_VIDEO;\nvar AUDIO_SCREEN = 'audio_screen';\nexports.AUDIO_SCREEN = AUDIO_SCREEN;\nvar ANIMATION = 'animation';\nexports.ANIMATION = ANIMATION;\nvar SCREEN_ONLY = 'screen_only';\nexports.SCREEN_ONLY = SCREEN_ONLY;\n\nvar getRecorderMode = function getRecorderMode(image, audio, video, animation, screen) {\n  if (isModeEnabled(image)) {\n    return IMAGE_ONLY;\n  } else if (isModeEnabled(animation)) {\n    return ANIMATION;\n  } else if (isModeEnabled(audio) && isModeEnabled(video)) {\n    return AUDIO_VIDEO;\n  } else if (isModeEnabled(audio) && isModeEnabled(screen)) {\n    return AUDIO_SCREEN;\n  } else if (!isModeEnabled(audio) && isModeEnabled(screen)) {\n    return SCREEN_ONLY;\n  } else if (isModeEnabled(audio) && !isModeEnabled(video)) {\n    return AUDIO_ONLY;\n  } else if (!isModeEnabled(audio) && isModeEnabled(video)) {\n    return VIDEO_ONLY;\n  }\n};\n\nexports.getRecorderMode = getRecorderMode;\n\nvar isModeEnabled = function isModeEnabled(mode) {\n  return mode === Object(mode) || mode === true;\n};\n\n//# sourceURL=webpack://VideojsRecord/./src/js/engine/record-mode.js?")},"./src/js/engine/record-rtc.js":function srcJsEngineRecordRtcJs(module,exports,__webpack_require__){"use strict";eval('\n\nvar _interopRequireDefault = __webpack_require__(/*! @babel/runtime/helpers/interopRequireDefault */ "./node_modules/@babel/runtime/helpers/interopRequireDefault.js");\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\nexports.default = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ "./node_modules/@babel/runtime/helpers/classCallCheck.js"));\n\nvar _createClass2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/createClass */ "./node_modules/@babel/runtime/helpers/createClass.js"));\n\nvar _get2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/get */ "./node_modules/@babel/runtime/helpers/get.js"));\n\nvar _inherits2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/inherits */ "./node_modules/@babel/runtime/helpers/inherits.js"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/getPrototypeOf.js"));\n\nvar _video = _interopRequireDefault(__webpack_require__(/*! video.js */ "video.js"));\n\nvar _recordrtc = _interopRequireDefault(__webpack_require__(/*! recordrtc */ "recordrtc"));\n\nvar _event = _interopRequireDefault(__webpack_require__(/*! ../event */ "./src/js/event.js"));\n\nvar _recordEngine = __webpack_require__(/*! ./record-engine */ "./src/js/engine/record-engine.js");\n\nvar _detectBrowser = __webpack_require__(/*! ../utils/detect-browser */ "./src/js/utils/detect-browser.js");\n\nvar _recordMode = __webpack_require__(/*! ./record-mode */ "./src/js/engine/record-mode.js");\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar Component = _video.default.getComponent(\'Component\');\n\nvar RecordRTCEngine = function (_RecordEngine) {\n  (0, _inherits2.default)(RecordRTCEngine, _RecordEngine);\n\n  var _super = _createSuper(RecordRTCEngine);\n\n  function RecordRTCEngine() {\n    (0, _classCallCheck2.default)(this, RecordRTCEngine);\n    return _super.apply(this, arguments);\n  }\n\n  (0, _createClass2.default)(RecordRTCEngine, [{\n    key: "setup",\n    value: function setup(stream, mediaType, debug) {\n      this.inputStream = stream;\n      this.mediaType = mediaType;\n      this.debug = debug;\n\n      if (\'screen\' in this.mediaType) {\n        this.mediaType.video = true;\n      }\n\n      if (this.recorderType !== undefined) {\n        this.mediaType.video = this.recorderType;\n      }\n\n      this.engine = new _recordrtc.default.MRecordRTC();\n      this.engine.mediaType = this.mediaType;\n      this.engine.disableLogs = !this.debug;\n      this.engine.mimeType = this.mimeType;\n      this.engine.bufferSize = this.bufferSize;\n      this.engine.sampleRate = this.sampleRate;\n      this.engine.numberOfAudioChannels = this.audioChannels;\n      this.engine.video = this.video;\n      this.engine.canvas = this.canvas;\n      this.engine.bitrate = this.bitRate;\n      this.engine.quality = this.quality;\n      this.engine.frameRate = this.frameRate;\n\n      if (this.timeSlice !== undefined) {\n        this.engine.timeSlice = this.timeSlice;\n        this.engine.onTimeStamp = this.onTimeStamp.bind(this);\n      }\n\n      this.engine.workerPath = this.workerPath;\n      this.engine.webAssemblyPath = this.videoWebAssemblyURL;\n      this.engine.addStream(this.inputStream);\n    }\n  }, {\n    key: "dispose",\n    value: function dispose() {\n      (0, _get2.default)((0, _getPrototypeOf2.default)(RecordRTCEngine.prototype), "dispose", this).call(this);\n      this.destroy();\n    }\n  }, {\n    key: "destroy",\n    value: function destroy() {\n      if (this.engine && typeof this.engine.destroy === \'function\') {\n        this.engine.destroy();\n      }\n    }\n  }, {\n    key: "start",\n    value: function start() {\n      this.engine.startRecording();\n    }\n  }, {\n    key: "stop",\n    value: function stop() {\n      this.engine.stopRecording(this.onStopRecording.bind(this));\n    }\n  }, {\n    key: "pause",\n    value: function pause() {\n      this.engine.pauseRecording();\n    }\n  }, {\n    key: "resume",\n    value: function resume() {\n      this.engine.resumeRecording();\n    }\n  }, {\n    key: "saveAs",\n    value: function saveAs(name) {\n      if (this.engine && name !== undefined) {\n        this.engine.save(name);\n      }\n    }\n  }, {\n    key: "onStopRecording",\n    value: function onStopRecording(audioVideoURL, type) {\n      var _this = this;\n\n      URL.revokeObjectURL(audioVideoURL);\n      var recordType = this.player().record().getRecordType();\n      this.engine.getBlob(function (recording) {\n        switch (recordType) {\n          case _recordMode.AUDIO_ONLY:\n            if (recording.audio !== undefined) {\n              _this.recordedData = recording.audio;\n            }\n\n            break;\n\n          case _recordMode.VIDEO_ONLY:\n          case _recordMode.AUDIO_VIDEO:\n          case _recordMode.AUDIO_SCREEN:\n          case _recordMode.SCREEN_ONLY:\n            if (recording.video !== undefined) {\n              _this.recordedData = recording.video;\n            }\n\n            break;\n\n          case _recordMode.ANIMATION:\n            if (recording.gif !== undefined) {\n              _this.recordedData = recording.gif;\n            }\n\n            break;\n        }\n\n        _this.addFileInfo(_this.recordedData);\n\n        _this.trigger(_event.default.RECORD_COMPLETE);\n      });\n    }\n  }, {\n    key: "onTimeStamp",\n    value: function onTimeStamp(current, all) {\n      this.player().currentTimestamp = current;\n      this.player().allTimestamps = all;\n      var internal;\n\n      switch (this.player().record().getRecordType()) {\n        case _recordMode.AUDIO_ONLY:\n          internal = this.engine.audioRecorder;\n          break;\n\n        case _recordMode.ANIMATION:\n          internal = this.engine.gifRecorder;\n          break;\n\n        default:\n          internal = this.engine.videoRecorder;\n      }\n\n      var maxFileSizeReached = false;\n\n      if (internal) {\n        internal = internal.getInternalRecorder();\n      }\n\n      if (internal instanceof _recordrtc.default.MediaStreamRecorder === true) {\n        this.player().recordedData = internal.getArrayOfBlobs();\n        this.addFileInfo(this.player().recordedData[this.player_.recordedData.length - 1]);\n\n        if (this.maxFileSize > 0) {\n          var currentSize = new Blob(this.player().recordedData).size;\n\n          if (currentSize >= this.maxFileSize) {\n            maxFileSizeReached = true;\n          }\n        }\n      }\n\n      this.player().trigger(_event.default.TIMESTAMP);\n\n      if (maxFileSizeReached) {\n        this.player().record().stop();\n      }\n    }\n  }]);\n  return RecordRTCEngine;\n}(_recordEngine.RecordEngine);\n\n_video.default.RecordRTCEngine = RecordRTCEngine;\nComponent.registerComponent(\'RecordRTCEngine\', RecordRTCEngine);\nvar _default = RecordRTCEngine;\nexports.default = _default;\nmodule.exports = exports.default;\n\n//# sourceURL=webpack://VideojsRecord/./src/js/engine/record-rtc.js?')},"./src/js/event.js":function srcJsEventJs(module,exports,__webpack_require__){"use strict";eval("\n\nvar _interopRequireDefault = __webpack_require__(/*! @babel/runtime/helpers/interopRequireDefault */ \"./node_modules/@babel/runtime/helpers/interopRequireDefault.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ \"./node_modules/@babel/runtime/helpers/classCallCheck.js\"));\n\nvar Event = function Event() {\n  (0, _classCallCheck2.default)(this, Event);\n};\n\nEvent.READY = 'ready';\nEvent.ERROR = 'error';\nEvent.PLAYING = 'playing';\nEvent.LOADEDMETADATA = 'loadedmetadata';\nEvent.LOADSTART = 'loadstart';\nEvent.USERINACTIVE = 'userinactive';\nEvent.TIMEUPDATE = 'timeupdate';\nEvent.DURATIONCHANGE = 'durationchange';\nEvent.ENDED = 'ended';\nEvent.PAUSE = 'pause';\nEvent.PLAY = 'play';\nEvent.DEVICE_READY = 'deviceReady';\nEvent.DEVICE_ERROR = 'deviceError';\nEvent.START_RECORD = 'startRecord';\nEvent.STOP_RECORD = 'stopRecord';\nEvent.FINISH_RECORD = 'finishRecord';\nEvent.RECORD_COMPLETE = 'recordComplete';\nEvent.PROGRESS_RECORD = 'progressRecord';\nEvent.TIMESTAMP = 'timestamp';\nEvent.ENUMERATE_READY = 'enumerateReady';\nEvent.ENUMERATE_ERROR = 'enumerateError';\nEvent.AUDIO_BUFFER_UPDATE = 'audioBufferUpdate';\nEvent.AUDIO_OUTPUT_READY = 'audioOutputReady';\nEvent.START_CONVERT = 'startConvert';\nEvent.FINISH_CONVERT = 'finishConvert';\nEvent.ENTER_PIP = 'enterPIP';\nEvent.LEAVE_PIP = 'leavePIP';\nEvent.RETRY = 'retry';\nEvent.ENTERPICTUREINPICTURE = 'enterpictureinpicture';\nEvent.LEAVEPICTUREINPICTURE = 'leavepictureinpicture';\nObject.freeze(Event);\nvar _default = Event;\nexports.default = _default;\nmodule.exports = exports.default;\n\n//# sourceURL=webpack://VideojsRecord/./src/js/event.js?")},"./src/js/hot-keys.js":function srcJsHotKeysJs(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _recordMode = __webpack_require__(/*! ./engine/record-mode */ \"./src/js/engine/record-mode.js\");\n\nvar X_KEY = 88;\nvar P_KEY = 80;\nvar C_KEY = 67;\n\nvar defaultKeyHandler = function defaultKeyHandler(event) {\n  switch (event.which) {\n    case X_KEY:\n      switch (this.player_.record().getRecordType()) {\n        case _recordMode.IMAGE_ONLY:\n          this.player_.cameraButton.trigger('click');\n          break;\n\n        default:\n          this.player_.recordToggle.trigger('click');\n      }\n\n      break;\n\n    case P_KEY:\n      if (this.player_.record().pictureInPicture === true) {\n        this.player_.pipToggle.trigger('click');\n      }\n\n      break;\n\n    case C_KEY:\n      if (this.player_.controlBar.playToggle && this.player_.controlBar.playToggle.contentEl()) {\n        player.controlBar.playToggle.trigger('click');\n      }\n\n      break;\n  }\n};\n\nvar _default = defaultKeyHandler;\nexports.default = _default;\nmodule.exports = exports.default;\n\n//# sourceURL=webpack://VideojsRecord/./src/js/hot-keys.js?")},"./src/js/utils/browser-shim.js":function srcJsUtilsBrowserShimJs(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar setSrcObject = function setSrcObject(stream, element) {\n  if ('srcObject' in element) {\n    element.srcObject = stream;\n  } else if ('mozSrcObject' in element) {\n    element.mozSrcObject = stream;\n  } else {\n    element.srcObject = stream;\n  }\n};\n\nvar _default = setSrcObject;\nexports.default = _default;\nmodule.exports = exports.default;\n\n//# sourceURL=webpack://VideojsRecord/./src/js/utils/browser-shim.js?")},"./src/js/utils/compare-version.js":function srcJsUtilsCompareVersionJs(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar compareVersion = function compareVersion(v1, v2) {\n  if (typeof v1 !== 'string') return false;\n  if (typeof v2 !== 'string') return false;\n  v1 = v1.split('.');\n  v2 = v2.split('.');\n  var k = Math.min(v1.length, v2.length);\n  var i = 0;\n\n  for (i; i < k; ++i) {\n    v1[i] = parseInt(v1[i], 10);\n    v2[i] = parseInt(v2[i], 10);\n    if (v1[i] > v2[i]) return 1;\n    if (v1[i] < v2[i]) return -1;\n  }\n\n  return v1.length === v2.length ? 0 : v1.length < v2.length ? -1 : 1;\n};\n\nvar _default = compareVersion;\nexports.default = _default;\nmodule.exports = exports.default;\n\n//# sourceURL=webpack://VideojsRecord/./src/js/utils/compare-version.js?")},"./src/js/utils/detect-browser.js":function srcJsUtilsDetectBrowserJs(module,exports,__webpack_require__){"use strict";eval("\n\nvar _interopRequireDefault = __webpack_require__(/*! @babel/runtime/helpers/interopRequireDefault */ \"./node_modules/@babel/runtime/helpers/interopRequireDefault.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isFirefox = exports.isSafari = exports.isChrome = exports.isOpera = exports.isEdge = exports.detectBrowser = void 0;\n\nvar _window = _interopRequireDefault(__webpack_require__(/*! global/window */ \"./node_modules/global/window.js\"));\n\nvar detectBrowser = function detectBrowser() {\n  var result = {};\n  result.browser = null;\n  result.version = null;\n  result.minVersion = null;\n\n  if (typeof _window.default === 'undefined' || !_window.default.navigator) {\n    result.browser = 'Not a supported browser.';\n    return result;\n  }\n\n  if (navigator.mozGetUserMedia) {\n    result.browser = 'firefox';\n    result.version = extractVersion(navigator.userAgent, /Firefox\\/(\\d+)\\./, 1);\n    result.minVersion = 31;\n  } else if (navigator.webkitGetUserMedia) {\n    result.browser = 'chrome';\n    result.version = extractVersion(navigator.userAgent, /Chrom(e|ium)\\/(\\d+)\\./, 2);\n    result.minVersion = 38;\n  } else if (navigator.mediaDevices && navigator.userAgent.match(/Edge\\/(\\d+).(\\d+)$/)) {\n    result.browser = 'edge';\n    result.version = extractVersion(navigator.userAgent, /Edge\\/(\\d+).(\\d+)$/, 2);\n    result.minVersion = 10547;\n  } else if (_window.default.RTCPeerConnection && navigator.userAgent.match(/AppleWebKit\\/(\\d+)\\./)) {\n    result.browser = 'safari';\n    result.version = extractVersion(navigator.userAgent, /AppleWebKit\\/(\\d+)\\./, 1);\n  } else {\n    result.browser = 'Not a supported browser.';\n    return result;\n  }\n\n  return result;\n};\n\nexports.detectBrowser = detectBrowser;\n\nvar extractVersion = function extractVersion(uastring, expr, pos) {\n  var match = uastring.match(expr);\n  return match && match.length >= pos && parseInt(match[pos], 10);\n};\n\nvar isEdge = function isEdge() {\n  return detectBrowser().browser === 'edge';\n};\n\nexports.isEdge = isEdge;\n\nvar isSafari = function isSafari() {\n  return detectBrowser().browser === 'safari';\n};\n\nexports.isSafari = isSafari;\n\nvar isOpera = function isOpera() {\n  return !!_window.default.opera || navigator.userAgent.indexOf('OPR/') !== -1;\n};\n\nexports.isOpera = isOpera;\n\nvar isChrome = function isChrome() {\n  return detectBrowser().browser === 'chrome';\n};\n\nexports.isChrome = isChrome;\n\nvar isFirefox = function isFirefox() {\n  return detectBrowser().browser === 'firefox';\n};\n\nexports.isFirefox = isFirefox;\n\n//# sourceURL=webpack://VideojsRecord/./src/js/utils/detect-browser.js?")},"./src/js/utils/file-util.js":function srcJsUtilsFileUtilJs(module,exports,__webpack_require__){"use strict";eval("\n\nvar _interopRequireDefault = __webpack_require__(/*! @babel/runtime/helpers/interopRequireDefault */ \"./node_modules/@babel/runtime/helpers/interopRequireDefault.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.addFileInfo = exports.blobToArrayBuffer = exports.downloadBlob = void 0;\n\nvar _mime = _interopRequireDefault(__webpack_require__(/*! ./mime */ \"./src/js/utils/mime.js\"));\n\nvar downloadBlob = function downloadBlob(fileName, data) {\n  if (typeof navigator.msSaveOrOpenBlob !== 'undefined') {\n    return navigator.msSaveOrOpenBlob(data, fileName);\n  } else if (typeof navigator.msSaveBlob !== 'undefined') {\n    return navigator.msSaveBlob(data, fileName);\n  }\n\n  var hyperlink = document.createElement('a');\n  hyperlink.href = URL.createObjectURL(data);\n  hyperlink.download = fileName;\n  hyperlink.style = 'display:none;opacity:0;color:transparent;';\n  (document.body || document.documentElement).appendChild(hyperlink);\n\n  if (typeof hyperlink.click === 'function') {\n    hyperlink.click();\n  } else {\n    hyperlink.target = '_blank';\n    hyperlink.dispatchEvent(new MouseEvent('click', {\n      view: window,\n      bubbles: true,\n      cancelable: true\n    }));\n  }\n\n  URL.revokeObjectURL(hyperlink.href);\n};\n\nexports.downloadBlob = downloadBlob;\n\nvar blobToArrayBuffer = function blobToArrayBuffer(fileObj) {\n  return new Promise(function (resolve, reject) {\n    var reader = new FileReader();\n\n    reader.onloadend = function () {\n      resolve(reader.result);\n    };\n\n    reader.onerror = function (ev) {\n      reject(ev.error);\n    };\n\n    reader.readAsArrayBuffer(fileObj);\n  });\n};\n\nexports.blobToArrayBuffer = blobToArrayBuffer;\n\nvar addFileInfo = function addFileInfo(fileObj, dateObj, fileExtension) {\n  if (fileObj instanceof Blob || fileObj instanceof File) {\n    if (dateObj === undefined) {\n      dateObj = new Date();\n    }\n\n    try {\n      fileObj.lastModified = dateObj.getTime();\n      fileObj.lastModifiedDate = dateObj;\n    } catch (e) {\n      if (e instanceof TypeError) {} else {\n        throw e;\n      }\n    }\n\n    if (fileExtension === undefined) {\n      fileExtension = '.' + (0, _mime.default)(fileObj.type);\n    }\n\n    try {\n      fileObj.name = dateObj.getTime() + fileExtension;\n    } catch (e) {\n      if (e instanceof TypeError) {} else {\n        throw e;\n      }\n    }\n  }\n};\n\nexports.addFileInfo = addFileInfo;\n\n//# sourceURL=webpack://VideojsRecord/./src/js/utils/file-util.js?")},"./src/js/utils/format-time.js":function srcJsUtilsFormatTimeJs(module,exports,__webpack_require__){"use strict";eval('\n\nvar _interopRequireDefault = __webpack_require__(/*! @babel/runtime/helpers/interopRequireDefault */ "./node_modules/@babel/runtime/helpers/interopRequireDefault.js");\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\nexports.default = void 0;\n\nvar _parseMs = _interopRequireDefault(__webpack_require__(/*! parse-ms */ "./node_modules/parse-ms/index.js"));\n\nvar _addZero = _interopRequireDefault(__webpack_require__(/*! add-zero */ "./node_modules/add-zero/index.js"));\n\nvar formatTime = function formatTime(seconds, guide) {\n  var displayMilliseconds = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  seconds = seconds < 0 ? 0 : seconds;\n\n  if (isNaN(seconds) || seconds === Infinity) {\n    seconds = 0;\n  }\n\n  var inputTime = (0, _parseMs.default)(seconds * 1000);\n  var guideTime = inputTime;\n\n  if (guide !== undefined) {\n    guideTime = (0, _parseMs.default)(guide * 1000);\n  }\n\n  var hr = (0, _addZero.default)(inputTime.hours);\n  var min = (0, _addZero.default)(inputTime.minutes);\n  var sec = (0, _addZero.default)(inputTime.seconds);\n  var ms = (0, _addZero.default)(inputTime.milliseconds, 3);\n\n  if (inputTime.days > 0 || guideTime.days > 0) {\n    var day = (0, _addZero.default)(inputTime.days);\n    return "".concat(day, ":").concat(hr, ":").concat(min, ":").concat(sec);\n  }\n\n  if (inputTime.hours > 0 || guideTime.hours > 0) {\n    return "".concat(hr, ":").concat(min, ":").concat(sec);\n  }\n\n  if (displayMilliseconds) {\n    return "".concat(min, ":").concat(sec, ":").concat(ms);\n  }\n\n  return "".concat(min, ":").concat(sec);\n};\n\nvar _default = formatTime;\nexports.default = _default;\nmodule.exports = exports.default;\n\n//# sourceURL=webpack://VideojsRecord/./src/js/utils/format-time.js?')},"./src/js/utils/mime.js":function srcJsUtilsMimeJs(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar EXTRACT_TYPE_REGEXP = /^\\s*([^;\\s]*)(?:;|\\s|$)/;\nvar Mimetypes = {\n  'video/ogg': 'ogv',\n  'video/mp4': 'mp4',\n  'video/x-matroska': 'mkv',\n  'video/webm': 'webm',\n  'audio/mp4': 'm4a',\n  'audio/mpeg': 'mp3',\n  'audio/aac': 'aac',\n  'audio/flac': 'flac',\n  'audio/ogg': 'oga',\n  'audio/wav': 'wav',\n  'audio/webm': 'webm',\n  'application/x-mpegURL': 'm3u8',\n  'image/jpeg': 'jpg',\n  'image/gif': 'gif',\n  'image/png': 'png',\n  'image/svg+xml': 'svg',\n  'image/webp': 'webp'\n};\n\nvar getExtension = function getExtension(mimeType) {\n  var match = EXTRACT_TYPE_REGEXP.exec(mimeType);\n  var result = match && match[1].toLowerCase();\n  return Mimetypes[result];\n};\n\nvar _default = getExtension;\nexports.default = _default;\nmodule.exports = exports.default;\n\n//# sourceURL=webpack://VideojsRecord/./src/js/utils/mime.js?")},"./src/js/videojs.record.js":function srcJsVideojsRecordJs(module,exports,__webpack_require__){"use strict";eval('\n\nvar _interopRequireDefault = __webpack_require__(/*! @babel/runtime/helpers/interopRequireDefault */ "./node_modules/@babel/runtime/helpers/interopRequireDefault.js");\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\nexports.Record = void 0;\n\nvar _typeof2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/typeof */ "./node_modules/@babel/runtime/helpers/typeof.js"));\n\nvar _classCallCheck2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ "./node_modules/@babel/runtime/helpers/classCallCheck.js"));\n\nvar _createClass2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/createClass */ "./node_modules/@babel/runtime/helpers/createClass.js"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/assertThisInitialized */ "./node_modules/@babel/runtime/helpers/assertThisInitialized.js"));\n\nvar _get2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/get */ "./node_modules/@babel/runtime/helpers/get.js"));\n\nvar _inherits2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/inherits */ "./node_modules/@babel/runtime/helpers/inherits.js"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/possibleConstructorReturn */ "./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/getPrototypeOf */ "./node_modules/@babel/runtime/helpers/getPrototypeOf.js"));\n\nvar _video = _interopRequireDefault(__webpack_require__(/*! video.js */ "video.js"));\n\nvar _animationDisplay = _interopRequireDefault(__webpack_require__(/*! ./controls/animation-display */ "./src/js/controls/animation-display.js"));\n\nvar _recordCanvas = _interopRequireDefault(__webpack_require__(/*! ./controls/record-canvas */ "./src/js/controls/record-canvas.js"));\n\nvar _deviceButton = _interopRequireDefault(__webpack_require__(/*! ./controls/device-button */ "./src/js/controls/device-button.js"));\n\nvar _cameraButton = _interopRequireDefault(__webpack_require__(/*! ./controls/camera-button */ "./src/js/controls/camera-button.js"));\n\nvar _recordToggle = _interopRequireDefault(__webpack_require__(/*! ./controls/record-toggle */ "./src/js/controls/record-toggle.js"));\n\nvar _recordIndicator = _interopRequireDefault(__webpack_require__(/*! ./controls/record-indicator */ "./src/js/controls/record-indicator.js"));\n\nvar _pictureInPictureToggle = _interopRequireDefault(__webpack_require__(/*! ./controls/picture-in-picture-toggle */ "./src/js/controls/picture-in-picture-toggle.js"));\n\nvar _event = _interopRequireDefault(__webpack_require__(/*! ./event */ "./src/js/event.js"));\n\nvar _hotKeys = _interopRequireDefault(__webpack_require__(/*! ./hot-keys */ "./src/js/hot-keys.js"));\n\nvar _defaults = _interopRequireDefault(__webpack_require__(/*! ./defaults */ "./src/js/defaults.js"));\n\nvar _formatTime = _interopRequireDefault(__webpack_require__(/*! ./utils/format-time */ "./src/js/utils/format-time.js"));\n\nvar _browserShim = _interopRequireDefault(__webpack_require__(/*! ./utils/browser-shim */ "./src/js/utils/browser-shim.js"));\n\nvar _compareVersion = _interopRequireDefault(__webpack_require__(/*! ./utils/compare-version */ "./src/js/utils/compare-version.js"));\n\nvar _detectBrowser = __webpack_require__(/*! ./utils/detect-browser */ "./src/js/utils/detect-browser.js");\n\nvar _engineLoader = __webpack_require__(/*! ./engine/engine-loader */ "./src/js/engine/engine-loader.js");\n\nvar _recordMode = __webpack_require__(/*! ./engine/record-mode */ "./src/js/engine/record-mode.js");\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar Plugin = _video.default.getPlugin(\'plugin\');\n\nvar Player = _video.default.getComponent(\'Player\');\n\nvar AUTO = \'auto\';\n\nvar Record = function (_Plugin) {\n  (0, _inherits2.default)(Record, _Plugin);\n\n  var _super = _createSuper(Record);\n\n  function Record(player, options) {\n    var _this;\n\n    (0, _classCallCheck2.default)(this, Record);\n    _this = _super.call(this, player, options);\n\n    Player.prototype.play = function play() {\n      var retval = this.techGet_(\'play\');\n\n      if (retval !== undefined && typeof retval.then === \'function\') {\n        retval.then(null, function (e) {});\n      }\n\n      return retval;\n    };\n\n    player.addClass(\'vjs-record\');\n\n    _this.loadOptions();\n\n    _this.resetState();\n\n    _video.default.setFormatTime(function (seconds, guide) {\n      return (0, _formatTime.default)(seconds, guide, _this.displayMilliseconds);\n    });\n\n    var deviceIcon = \'av-perm\';\n\n    switch (_this.getRecordType()) {\n      case _recordMode.IMAGE_ONLY:\n      case _recordMode.VIDEO_ONLY:\n      case _recordMode.ANIMATION:\n        deviceIcon = \'video-perm\';\n        break;\n\n      case _recordMode.AUDIO_ONLY:\n        deviceIcon = \'audio-perm\';\n        break;\n\n      case _recordMode.SCREEN_ONLY:\n        deviceIcon = \'screen-perm\';\n        break;\n\n      case _recordMode.AUDIO_SCREEN:\n        deviceIcon = \'sv-perm\';\n        break;\n    }\n\n    _deviceButton.default.prototype.buildCSSClass = function () {\n      return \'vjs-record vjs-device-button vjs-control vjs-icon-\' + deviceIcon;\n    };\n\n    player.deviceButton = new _deviceButton.default(player, options);\n    player.addChild(player.deviceButton);\n    player.recordIndicator = new _recordIndicator.default(player, options);\n    player.recordIndicator.hide();\n    player.addChild(player.recordIndicator);\n    player.recordCanvas = new _recordCanvas.default(player, options);\n    player.recordCanvas.hide();\n    player.addChild(player.recordCanvas);\n    player.animationDisplay = new _animationDisplay.default(player, options);\n    player.animationDisplay.hide();\n    player.addChild(player.animationDisplay);\n    player.cameraButton = new _cameraButton.default(player, options);\n    player.cameraButton.hide();\n    player.recordToggle = new _recordToggle.default(player, options);\n    player.recordToggle.hide();\n    var oldVideoJS = _video.default.VERSION === undefined || (0, _compareVersion.default)(_video.default.VERSION, \'7.6.0\') === -1;\n\n    if (!(\'exitPictureInPicture\' in document)) {\n      _this.pictureInPicture = false;\n    } else if (oldVideoJS) {\n      player.pipToggle = new _pictureInPictureToggle.default(player, options);\n      player.pipToggle.hide();\n    }\n\n    if (_this.pictureInPicture === true) {\n      _this.onEnterPiPHandler = _this.onEnterPiP.bind((0, _assertThisInitialized2.default)(_this));\n      _this.onLeavePiPHandler = _this.onLeavePiP.bind((0, _assertThisInitialized2.default)(_this));\n    }\n\n    if (_this.player.options_.controlBar) {\n      var customUIElements = [\'deviceButton\', \'recordIndicator\', \'cameraButton\', \'recordToggle\'];\n\n      if (player.pipToggle) {\n        customUIElements.push(\'pipToggle\');\n      }\n\n      customUIElements.forEach(function (element) {\n        if (_this.player.options_.controlBar[element] !== undefined) {\n          _this.player[element].layoutExclude = true;\n\n          _this.player[element].hide();\n        }\n      });\n    }\n\n    _this.player.one(_event.default.READY, _this.setupUI.bind((0, _assertThisInitialized2.default)(_this)));\n\n    return _this;\n  }\n\n  (0, _createClass2.default)(Record, [{\n    key: "loadOptions",\n    value: function loadOptions() {\n      var newOptions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      var recordOptions = _video.default.mergeOptions(_defaults.default, this.player.options_.plugins.record, newOptions);\n\n      this.recordImage = recordOptions.image;\n      this.recordAudio = recordOptions.audio;\n      this.recordVideo = recordOptions.video;\n      this.recordAnimation = recordOptions.animation;\n      this.recordScreen = recordOptions.screen;\n      this.maxLength = recordOptions.maxLength;\n      this.maxFileSize = recordOptions.maxFileSize;\n      this.displayMilliseconds = recordOptions.displayMilliseconds;\n      this.debug = recordOptions.debug;\n      this.pictureInPicture = recordOptions.pip;\n      this.recordTimeSlice = recordOptions.timeSlice;\n      this.autoMuteDevice = recordOptions.autoMuteDevice;\n      this.pluginLibraryOptions = recordOptions.pluginLibraryOptions;\n      this.videoFrameWidth = recordOptions.frameWidth;\n      this.videoFrameHeight = recordOptions.frameHeight;\n      this.videoFrameRate = recordOptions.videoFrameRate;\n      this.videoBitRate = recordOptions.videoBitRate;\n      this.videoEngine = recordOptions.videoEngine;\n      this.videoRecorderType = recordOptions.videoRecorderType;\n      this.videoMimeType = recordOptions.videoMimeType;\n      this.videoWorkerURL = recordOptions.videoWorkerURL;\n      this.videoWebAssemblyURL = recordOptions.videoWebAssemblyURL;\n      this.convertEngine = recordOptions.convertEngine;\n      this.convertWorkerURL = recordOptions.convertWorkerURL;\n      this.convertOptions = recordOptions.convertOptions;\n      this.audioEngine = recordOptions.audioEngine;\n      this.audioRecorderType = recordOptions.audioRecorderType;\n      this.audioWorkerURL = recordOptions.audioWorkerURL;\n      this.audioWebAssemblyURL = recordOptions.audioWebAssemblyURL;\n      this.audioBufferSize = recordOptions.audioBufferSize;\n      this.audioSampleRate = recordOptions.audioSampleRate;\n      this.audioBitRate = recordOptions.audioBitRate;\n      this.audioChannels = recordOptions.audioChannels;\n      this.audioMimeType = recordOptions.audioMimeType;\n      this.audioBufferUpdate = recordOptions.audioBufferUpdate;\n      this.imageOutputType = recordOptions.imageOutputType;\n      this.imageOutputFormat = recordOptions.imageOutputFormat;\n      this.imageOutputQuality = recordOptions.imageOutputQuality;\n      this.animationFrameRate = recordOptions.animationFrameRate;\n      this.animationQuality = recordOptions.animationQuality;\n    }\n  }, {\n    key: "setupUI",\n    value: function setupUI() {\n      var _this2 = this;\n\n      this.player.controlBar.addChild(this.player.cameraButton);\n      this.player.controlBar.el().insertBefore(this.player.cameraButton.el(), this.player.controlBar.el().firstChild);\n      this.player.controlBar.el().insertBefore(this.player.recordToggle.el(), this.player.controlBar.el().firstChild);\n\n      if (this.pictureInPicture === true) {\n        if (this.player.controlBar.pictureInPictureToggle === undefined && this.player.pipToggle !== undefined) {\n          this.player.controlBar.addChild(this.player.pipToggle);\n        } else if (this.player.controlBar.pictureInPictureToggle !== undefined) {\n          this.player.pipToggle = this.player.controlBar.pictureInPictureToggle;\n          this.player.pipToggle.hide();\n        }\n      }\n\n      if (this.player.controlBar.remainingTimeDisplay !== undefined) {\n        this.player.controlBar.remainingTimeDisplay.el().style.display = \'none\';\n      }\n\n      if (this.player.controlBar.liveDisplay !== undefined) {\n        this.player.controlBar.liveDisplay.el().style.display = \'none\';\n      }\n\n      this.player.loop(false);\n\n      switch (this.getRecordType()) {\n        case _recordMode.AUDIO_ONLY:\n          this.surfer = this.player.wavesurfer();\n          break;\n\n        case _recordMode.IMAGE_ONLY:\n        case _recordMode.VIDEO_ONLY:\n        case _recordMode.AUDIO_VIDEO:\n        case _recordMode.ANIMATION:\n        case _recordMode.SCREEN_ONLY:\n        case _recordMode.AUDIO_SCREEN:\n          if (this.player.bigPlayButton !== undefined) {\n            this.player.bigPlayButton.hide();\n          }\n\n          this.player.one(_event.default.LOADEDMETADATA, function () {\n            _this2.setDuration(_this2.maxLength);\n          });\n          this.player.one(_event.default.LOADSTART, function () {\n            _this2.setDuration(_this2.maxLength);\n          });\n\n          if (this.player.usingNativeControls_ === true) {\n            if (this.player.tech_.el_ !== undefined) {\n              this.player.tech_.el_.controls = false;\n            }\n          }\n\n          this.player.removeTechControlsListeners_();\n\n          if (this.player.options_.controls) {\n            if (this.player.controlBar.progressControl !== undefined) {\n              this.player.controlBar.progressControl.hide();\n            }\n\n            this.player.on(_event.default.USERINACTIVE, function (event) {\n              _this2.player.userActive(true);\n            });\n            this.player.controlBar.show();\n            this.player.controlBar.el().style.display = \'flex\';\n          }\n\n          break;\n      }\n\n      this.player.off(_event.default.TIMEUPDATE);\n      this.player.off(_event.default.DURATIONCHANGE);\n      this.player.off(_event.default.LOADEDMETADATA);\n      this.player.off(_event.default.LOADSTART);\n      this.player.off(_event.default.ENDED);\n      this.setDuration(this.maxLength);\n\n      if (this.player.options_.plugins.record && this.player.options_.plugins.record.hotKeys && this.player.options_.plugins.record.hotKeys !== false) {\n        var handler = this.player.options_.plugins.record.hotKeys;\n\n        if (handler === true) {\n          handler = _hotKeys.default;\n        }\n\n        this.player.options_.userActions = {\n          hotkeys: handler\n        };\n      }\n\n      if (this.player.controlBar.playToggle !== undefined) {\n        this.player.controlBar.playToggle.hide();\n      }\n    }\n  }, {\n    key: "isRecording",\n    value: function isRecording() {\n      return this._recording;\n    }\n  }, {\n    key: "isProcessing",\n    value: function isProcessing() {\n      return this._processing;\n    }\n  }, {\n    key: "isDestroyed",\n    value: function isDestroyed() {\n      var destroyed = this.player === null;\n\n      if (destroyed === false) {\n        destroyed = this.player.children() === null;\n      }\n\n      return destroyed;\n    }\n  }, {\n    key: "getDevice",\n    value: function getDevice() {\n      var _this3 = this;\n\n      if (this.deviceReadyCallback === undefined) {\n        this.deviceReadyCallback = this.onDeviceReady.bind(this);\n      }\n\n      if (this.deviceErrorCallback === undefined) {\n        this.deviceErrorCallback = this.onDeviceError.bind(this);\n      }\n\n      if (this.engineStopCallback === undefined) {\n        this.engineStopCallback = this.onRecordComplete.bind(this);\n      }\n\n      if (this.streamVisibleCallback === undefined) {\n        this.streamVisibleCallback = this.onStreamVisible.bind(this);\n      }\n\n      if (this.getRecordType() === _recordMode.SCREEN_ONLY || this.getRecordType() === _recordMode.AUDIO_SCREEN) {\n        if (navigator.mediaDevices === undefined || navigator.mediaDevices.getDisplayMedia === undefined) {\n          this.player.trigger(_event.default.ERROR, \'This browser does not support navigator.mediaDevices.getDisplayMedia\');\n          return;\n        }\n      } else {\n        if (navigator.mediaDevices === undefined || navigator.mediaDevices.getUserMedia === undefined) {\n          this.player.trigger(_event.default.ERROR, \'This browser does not support navigator.mediaDevices.getUserMedia\');\n          return;\n        }\n      }\n\n      switch (this.getRecordType()) {\n        case _recordMode.AUDIO_ONLY:\n          this.mediaType = {\n            audio: this.audioRecorderType === AUTO ? true : this.audioRecorderType,\n            video: false\n          };\n          this.surfer.surfer.microphone.un(_event.default.DEVICE_READY, this.deviceReadyCallback);\n          this.surfer.surfer.microphone.un(_event.default.DEVICE_ERROR, this.deviceErrorCallback);\n          this.surfer.surfer.microphone.on(_event.default.DEVICE_READY, this.deviceReadyCallback);\n          this.surfer.surfer.microphone.on(_event.default.DEVICE_ERROR, this.deviceErrorCallback);\n          this.surfer.setupPlaybackEvents(false);\n          this.surfer.liveMode = true;\n          this.surfer.surfer.microphone.paused = false;\n\n          if (this.surfer.surfer.backend.ac.state === \'suspended\') {\n            this.surfer.surfer.backend.ac.resume();\n          }\n\n          if (this.audioBufferUpdate === true) {\n            this.surfer.surfer.microphone.reloadBufferFunction = function (event) {\n              if (!_this3.surfer.surfer.microphone.paused) {\n                _this3.surfer.surfer.empty();\n\n                _this3.surfer.surfer.loadDecodedBuffer(event.inputBuffer);\n\n                _this3.player.recordedData = event.inputBuffer;\n\n                _this3.player.trigger(_event.default.AUDIO_BUFFER_UPDATE);\n              }\n            };\n          }\n\n          this.surfer.surfer.microphone.start();\n          break;\n\n        case _recordMode.IMAGE_ONLY:\n        case _recordMode.VIDEO_ONLY:\n          if (this.getRecordType() === _recordMode.IMAGE_ONLY) {\n            this.player.el().firstChild.addEventListener(_event.default.PLAYING, this.streamVisibleCallback);\n          }\n\n          this.mediaType = {\n            audio: false,\n            video: this.videoRecorderType === AUTO ? true : this.videoRecorderType\n          };\n          navigator.mediaDevices.getUserMedia({\n            audio: false,\n            video: this.getRecordType() === _recordMode.IMAGE_ONLY ? this.recordImage : this.recordVideo\n          }).then(this.onDeviceReady.bind(this)).catch(this.onDeviceError.bind(this));\n          break;\n\n        case _recordMode.AUDIO_SCREEN:\n          this.mediaType = {\n            audio: this.audioRecorderType === AUTO ? true : this.audioRecorderType,\n            video: this.videoRecorderType === AUTO ? true : this.videoRecorderType\n          };\n          var audioScreenConstraints = {};\n\n          if (this.recordScreen === true) {\n            audioScreenConstraints = {\n              video: true\n            };\n          } else if ((0, _typeof2.default)(this.recordScreen) === \'object\' && this.recordScreen.constructor === Object) {\n            audioScreenConstraints = this.recordScreen;\n          }\n\n          navigator.mediaDevices.getDisplayMedia(audioScreenConstraints).then(function (screenStream) {\n            navigator.mediaDevices.getUserMedia({\n              audio: _this3.recordAudio\n            }).then(function (mic) {\n              screenStream.addTrack(mic.getTracks()[0]);\n\n              _this3.onDeviceReady.bind(_this3)(screenStream);\n            }).catch(_this3.onDeviceError.bind(_this3));\n          }).catch(this.onDeviceError.bind(this));\n          break;\n\n        case _recordMode.AUDIO_VIDEO:\n          this.mediaType = {\n            audio: this.audioRecorderType === AUTO ? true : this.audioRecorderType,\n            video: this.videoRecorderType === AUTO ? true : this.videoRecorderType\n          };\n          navigator.mediaDevices.getUserMedia({\n            audio: this.recordAudio,\n            video: this.recordVideo\n          }).then(this.onDeviceReady.bind(this)).catch(this.onDeviceError.bind(this));\n          break;\n\n        case _recordMode.ANIMATION:\n          this.mediaType = {\n            audio: false,\n            video: false,\n            gif: true\n          };\n          navigator.mediaDevices.getUserMedia({\n            audio: false,\n            video: this.recordAnimation\n          }).then(this.onDeviceReady.bind(this)).catch(this.onDeviceError.bind(this));\n          break;\n\n        case _recordMode.SCREEN_ONLY:\n          this.mediaType = {\n            audio: false,\n            video: false,\n            screen: true,\n            gif: false\n          };\n          var screenOnlyConstraints = {};\n\n          if (this.recordScreen === true) {\n            screenOnlyConstraints = {\n              video: true\n            };\n          } else if ((0, _typeof2.default)(this.recordScreen) === \'object\' && this.recordScreen.constructor === Object) {\n            screenOnlyConstraints = this.recordScreen;\n          }\n\n          navigator.mediaDevices.getDisplayMedia(screenOnlyConstraints).then(this.onDeviceReady.bind(this)).catch(this.onDeviceError.bind(this));\n          break;\n      }\n    }\n  }, {\n    key: "onDeviceReady",\n    value: function onDeviceReady(stream) {\n      var _this4 = this;\n\n      this._deviceActive = true;\n      this.stream = stream;\n      this.player.deviceButton.hide();\n      this.setDuration(this.maxLength);\n      this.setCurrentTime(0);\n\n      if (this.player.controlBar.playToggle !== undefined) {\n        this.player.controlBar.playToggle.hide();\n      }\n\n      this.off(this.player, _event.default.TIMEUPDATE, this.playbackTimeUpdate);\n      this.off(this.player, _event.default.ENDED, this.playbackTimeUpdate);\n\n      if (this.getRecordType() !== _recordMode.IMAGE_ONLY) {\n        if (this.getRecordType() !== _recordMode.AUDIO_ONLY && (0, _engineLoader.isAudioPluginActive)(this.audioEngine)) {\n          throw new Error(\'Currently \' + this.audioEngine + \' is only supported in audio-only mode.\');\n        }\n\n        var EngineClass, engineType;\n\n        switch (this.getRecordType()) {\n          case _recordMode.AUDIO_ONLY:\n            EngineClass = (0, _engineLoader.getAudioEngine)(this.audioEngine);\n            engineType = this.audioEngine;\n            break;\n\n          default:\n            EngineClass = (0, _engineLoader.getVideoEngine)(this.videoEngine);\n            engineType = this.videoEngine;\n        }\n\n        try {\n          this.engine = new EngineClass(this.player, this.player.options_);\n        } catch (err) {\n          throw new Error(\'Could not load \' + engineType + \' plugin\');\n        }\n\n        this.engine.on(_event.default.RECORD_COMPLETE, this.engineStopCallback);\n        this.engine.bufferSize = this.audioBufferSize;\n        this.engine.sampleRate = this.audioSampleRate;\n        this.engine.bitRate = this.audioBitRate;\n        this.engine.audioChannels = this.audioChannels;\n        this.engine.audioWorkerURL = this.audioWorkerURL;\n        this.engine.audioWebAssemblyURL = this.audioWebAssemblyURL;\n        this.engine.mimeType = {\n          video: this.videoMimeType,\n          gif: \'image/gif\'\n        };\n\n        if (this.audioMimeType !== null && this.audioMimeType !== AUTO) {\n          this.engine.mimeType.audio = this.audioMimeType;\n        }\n\n        this.engine.videoWorkerURL = this.videoWorkerURL;\n        this.engine.videoWebAssemblyURL = this.videoWebAssemblyURL;\n        this.engine.videoBitRate = this.videoBitRate;\n        this.engine.videoFrameRate = this.videoFrameRate;\n        this.engine.video = {\n          width: this.videoFrameWidth,\n          height: this.videoFrameHeight\n        };\n        this.engine.canvas = {\n          width: this.videoFrameWidth,\n          height: this.videoFrameHeight\n        };\n        this.engine.quality = this.animationQuality;\n        this.engine.frameRate = this.animationFrameRate;\n\n        if (this.recordTimeSlice && this.recordTimeSlice > 0) {\n          this.engine.timeSlice = this.recordTimeSlice;\n          this.engine.maxFileSize = this.maxFileSize;\n        }\n\n        this.engine.pluginLibraryOptions = this.pluginLibraryOptions;\n        this.engine.setup(this.stream, this.mediaType, this.debug);\n\n        if (this.convertEngine !== \'\') {\n          var ConvertEngineClass = (0, _engineLoader.getConvertEngine)(this.convertEngine);\n\n          try {\n            this.converter = new ConvertEngineClass(this.player, this.player.options_);\n          } catch (err) {\n            throw new Error(\'Could not load \' + this.convertEngine + \' plugin\');\n          }\n\n          this.converter.convertWorkerURL = this.convertWorkerURL;\n          this.converter.convertOptions = this.convertOptions;\n          this.converter.pluginLibraryOptions = this.pluginLibraryOptions;\n          this.converter.setup(this.mediaType, this.debug);\n        }\n\n        var uiElements = [\'currentTimeDisplay\', \'timeDivider\', \'durationDisplay\'];\n        uiElements.forEach(function (element) {\n          element = _this4.player.controlBar[element];\n\n          if (element !== undefined) {\n            element.el().style.display = \'block\';\n            element.show();\n          }\n        });\n        this.player.recordToggle.show();\n      } else {\n        this.player.recordIndicator.disable();\n        this.retrySnapshot();\n      }\n\n      if (this.getRecordType() !== _recordMode.AUDIO_ONLY) {\n        this.mediaElement = this.player.el().firstChild;\n        this.mediaElement.controls = false;\n        this.mediaElement.muted = true;\n        this.displayVolumeControl(false);\n\n        if (this.pictureInPicture === true) {\n          this.player.pipToggle.show();\n          this.mediaElement.removeEventListener(_event.default.ENTERPICTUREINPICTURE, this.onEnterPiPHandler);\n          this.mediaElement.removeEventListener(_event.default.LEAVEPICTUREINPICTURE, this.onLeavePiPHandler);\n          this.mediaElement.addEventListener(_event.default.ENTERPICTUREINPICTURE, this.onEnterPiPHandler);\n          this.mediaElement.addEventListener(_event.default.LEAVEPICTUREINPICTURE, this.onLeavePiPHandler);\n        }\n\n        this.load(this.stream);\n        this.player.one(_event.default.LOADEDMETADATA, function () {\n          _this4.mediaElement.play();\n\n          _this4.player.trigger(_event.default.DEVICE_READY);\n        });\n      } else {\n        this.player.trigger(_event.default.DEVICE_READY);\n      }\n    }\n  }, {\n    key: "onDeviceError",\n    value: function onDeviceError(code) {\n      this._deviceActive = false;\n\n      if (!this.isDestroyed()) {\n        this.player.deviceErrorCode = code;\n        this.player.trigger(_event.default.DEVICE_ERROR);\n      }\n    }\n  }, {\n    key: "start",\n    value: function start() {\n      var _this5 = this;\n\n      if (!this.isProcessing()) {\n        if (this.stream && this.stream.active === false) {\n          this.getDevice();\n          return;\n        }\n\n        this._recording = true;\n\n        if (this.player.controlBar.playToggle !== undefined) {\n          this.player.controlBar.playToggle.hide();\n        }\n\n        this.off(this.player, _event.default.TIMEUPDATE, this.playbackTimeUpdate);\n        this.off(this.player, _event.default.ENDED, this.playbackTimeUpdate);\n\n        switch (this.getRecordType()) {\n          case _recordMode.AUDIO_ONLY:\n            this.surfer.setupPlaybackEvents(false);\n            this.surfer.surfer.microphone.paused = false;\n            this.surfer.liveMode = true;\n            this.surfer.surfer.microphone.play();\n            break;\n\n          case _recordMode.VIDEO_ONLY:\n          case _recordMode.AUDIO_VIDEO:\n          case _recordMode.AUDIO_SCREEN:\n          case _recordMode.SCREEN_ONLY:\n            this.startVideoPreview();\n            break;\n\n          case _recordMode.ANIMATION:\n            this.player.recordCanvas.hide();\n            this.player.animationDisplay.hide();\n            this.mediaElement.style.display = \'block\';\n            this.captureFrame().then(function (result) {\n              _this5.startVideoPreview();\n            });\n            break;\n        }\n\n        if (this.autoMuteDevice) {\n          this.muteTracks(false);\n        }\n\n        switch (this.getRecordType()) {\n          case _recordMode.IMAGE_ONLY:\n            this.createSnapshot();\n            this.player.trigger(_event.default.START_RECORD);\n            break;\n\n          case _recordMode.VIDEO_ONLY:\n          case _recordMode.AUDIO_VIDEO:\n          case _recordMode.AUDIO_SCREEN:\n          case _recordMode.ANIMATION:\n          case _recordMode.SCREEN_ONLY:\n            this.player.one(_event.default.LOADEDMETADATA, function () {\n              _this5.startRecording();\n            });\n            break;\n\n          default:\n            this.startRecording();\n        }\n      }\n    }\n  }, {\n    key: "startRecording",\n    value: function startRecording() {\n      this.paused = false;\n      this.pauseTime = this.pausedTime = 0;\n      this.startTime = performance.now();\n      var COUNTDOWN_SPEED = 100;\n      this.countDown = this.player.setInterval(this.onCountDown.bind(this), COUNTDOWN_SPEED);\n\n      if (this.engine !== undefined) {\n        this.engine.dispose();\n      }\n\n      this.engine.start();\n      this.player.trigger(_event.default.START_RECORD);\n    }\n  }, {\n    key: "stop",\n    value: function stop() {\n      if (!this.isProcessing()) {\n        this._recording = false;\n        this._processing = true;\n\n        if (this.getRecordType() !== _recordMode.IMAGE_ONLY) {\n          this.player.trigger(_event.default.STOP_RECORD);\n          this.player.clearInterval(this.countDown);\n\n          if (this.engine) {\n            this.engine.stop();\n          }\n\n          if (this.autoMuteDevice) {\n            this.muteTracks(true);\n          }\n        } else {\n          if (this.player.recordedData) {\n            this.player.trigger(_event.default.FINISH_RECORD);\n          }\n        }\n      }\n    }\n  }, {\n    key: "stopDevice",\n    value: function stopDevice() {\n      if (this.isRecording()) {\n        this.player.one(_event.default.FINISH_RECORD, this.stopStream.bind(this));\n        this.stop();\n      } else {\n        this.stopStream();\n      }\n    }\n  }, {\n    key: "stopStream",\n    value: function stopStream() {\n      if (this.stream) {\n        this._deviceActive = false;\n\n        if (this.getRecordType() === _recordMode.AUDIO_ONLY) {\n          this.surfer.surfer.microphone.stopDevice();\n          return;\n        }\n\n        this.stream.getTracks().forEach(function (stream) {\n          stream.stop();\n        });\n      }\n    }\n  }, {\n    key: "pause",\n    value: function pause() {\n      if (!this.paused) {\n        this.pauseTime = performance.now();\n        this.paused = true;\n        this.engine.pause();\n      }\n    }\n  }, {\n    key: "resume",\n    value: function resume() {\n      if (this.paused) {\n        this.pausedTime += performance.now() - this.pauseTime;\n        this.engine.resume();\n        this.paused = false;\n      }\n    }\n  }, {\n    key: "onRecordComplete",\n    value: function onRecordComplete() {\n      var _this6 = this;\n\n      this.player.recordedData = this.engine.recordedData;\n\n      if (this.player.controlBar.playToggle !== undefined) {\n        this.player.controlBar.playToggle.removeClass(\'vjs-ended\');\n        this.player.controlBar.playToggle.show();\n      }\n\n      if (this.converter !== undefined) {\n        this.converter.convert(this.player.recordedData);\n      }\n\n      this.player.trigger(_event.default.FINISH_RECORD);\n\n      if (this.isDestroyed()) {\n        return;\n      }\n\n      switch (this.getRecordType()) {\n        case _recordMode.AUDIO_ONLY:\n          this.surfer.pause();\n          this.surfer.setupPlaybackEvents(true);\n          this.player.loadingSpinner.show();\n          this.surfer.surfer.once(_event.default.READY, function () {\n            _this6._processing = false;\n          });\n          this.load(this.player.recordedData);\n          break;\n\n        case _recordMode.VIDEO_ONLY:\n        case _recordMode.AUDIO_VIDEO:\n        case _recordMode.AUDIO_SCREEN:\n        case _recordMode.SCREEN_ONLY:\n          this.player.one(_event.default.PAUSE, function () {\n            _this6._processing = false;\n\n            _this6.player.loadingSpinner.hide();\n\n            _this6.setDuration(_this6.streamDuration);\n\n            _this6.on(_this6.player, _event.default.TIMEUPDATE, _this6.playbackTimeUpdate);\n\n            _this6.on(_this6.player, _event.default.ENDED, _this6.playbackTimeUpdate);\n\n            if (_this6.getRecordType() === _recordMode.AUDIO_VIDEO || _this6.getRecordType() === _recordMode.AUDIO_SCREEN) {\n              _this6.mediaElement.muted = false;\n\n              _this6.displayVolumeControl(true);\n            }\n\n            _this6.load(_this6.player.recordedData);\n          });\n          this.player.pause();\n          break;\n\n        case _recordMode.ANIMATION:\n          this._processing = false;\n          this.player.loadingSpinner.hide();\n          this.setDuration(this.streamDuration);\n          this.mediaElement.style.display = \'none\';\n          this.player.recordCanvas.show();\n          this.player.pause();\n          this.on(this.player, _event.default.PLAY, this.showAnimation);\n          this.on(this.player, _event.default.PAUSE, this.hideAnimation);\n          break;\n      }\n    }\n  }, {\n    key: "onCountDown",\n    value: function onCountDown() {\n      if (!this.paused) {\n        var now = performance.now();\n        var duration = this.maxLength;\n        var currentTime = (now - (this.startTime + this.pausedTime)) / 1000;\n        this.streamDuration = currentTime;\n\n        if (currentTime >= duration) {\n          currentTime = duration;\n          this.stop();\n        }\n\n        this.setDuration(duration);\n        this.setCurrentTime(currentTime, duration);\n        this.player.trigger(_event.default.PROGRESS_RECORD);\n      }\n    }\n  }, {\n    key: "getCurrentTime",\n    value: function getCurrentTime() {\n      var currentTime = isNaN(this.streamCurrentTime) ? 0 : this.streamCurrentTime;\n\n      if (this.getRecordType() === _recordMode.AUDIO_ONLY) {\n        currentTime = this.surfer.getCurrentTime();\n      }\n\n      return currentTime;\n    }\n  }, {\n    key: "setCurrentTime",\n    value: function setCurrentTime(currentTime, duration) {\n      currentTime = isNaN(currentTime) ? 0 : currentTime;\n      duration = isNaN(duration) ? 0 : duration;\n\n      switch (this.getRecordType()) {\n        case _recordMode.AUDIO_ONLY:\n          this.surfer.setCurrentTime(currentTime, duration);\n          break;\n\n        case _recordMode.VIDEO_ONLY:\n        case _recordMode.AUDIO_VIDEO:\n        case _recordMode.AUDIO_SCREEN:\n        case _recordMode.ANIMATION:\n        case _recordMode.SCREEN_ONLY:\n          if (this.player.controlBar.currentTimeDisplay && this.player.controlBar.currentTimeDisplay.contentEl() && this.player.controlBar.currentTimeDisplay.contentEl().lastChild) {\n            this.streamCurrentTime = Math.min(currentTime, duration);\n            this.player.controlBar.currentTimeDisplay.formattedTime_ = this.player.controlBar.currentTimeDisplay.contentEl().lastChild.textContent = (0, _formatTime.default)(this.streamCurrentTime, duration, this.displayMilliseconds);\n          }\n\n          break;\n      }\n    }\n  }, {\n    key: "getDuration",\n    value: function getDuration() {\n      var duration = isNaN(this.streamDuration) ? 0 : this.streamDuration;\n      return duration;\n    }\n  }, {\n    key: "setDuration",\n    value: function setDuration(duration) {\n      duration = isNaN(duration) ? 0 : duration;\n\n      switch (this.getRecordType()) {\n        case _recordMode.AUDIO_ONLY:\n          this.surfer.setDuration(duration);\n          break;\n\n        case _recordMode.VIDEO_ONLY:\n        case _recordMode.AUDIO_VIDEO:\n        case _recordMode.AUDIO_SCREEN:\n        case _recordMode.ANIMATION:\n        case _recordMode.SCREEN_ONLY:\n          if (this.player.controlBar.durationDisplay && this.player.controlBar.durationDisplay.contentEl() && this.player.controlBar.durationDisplay.contentEl().lastChild) {\n            this.player.controlBar.durationDisplay.formattedTime_ = this.player.controlBar.durationDisplay.contentEl().lastChild.textContent = (0, _formatTime.default)(duration, duration, this.displayMilliseconds);\n          }\n\n          break;\n      }\n    }\n  }, {\n    key: "load",\n    value: function load(url) {\n      switch (this.getRecordType()) {\n        case _recordMode.AUDIO_ONLY:\n          this.surfer.load(url);\n          break;\n\n        case _recordMode.IMAGE_ONLY:\n        case _recordMode.VIDEO_ONLY:\n        case _recordMode.AUDIO_VIDEO:\n        case _recordMode.AUDIO_SCREEN:\n        case _recordMode.ANIMATION:\n        case _recordMode.SCREEN_ONLY:\n          if (url instanceof Blob || url instanceof File) {\n            this.mediaElement.srcObject = null;\n            this.mediaElement.src = URL.createObjectURL(url);\n          } else {\n            (0, _browserShim.default)(url, this.mediaElement);\n          }\n\n          break;\n      }\n    }\n  }, {\n    key: "saveAs",\n    value: function saveAs(name) {\n      if (this.engine && name !== undefined) {\n        this.engine.saveAs(name);\n      }\n    }\n  }, {\n    key: "dispose",\n    value: function dispose() {\n      this.player.off(_event.default.READY);\n      this.player.off(_event.default.USERINACTIVE);\n      this.player.off(_event.default.LOADEDMETADATA);\n\n      if (this.engine) {\n        this.engine.dispose();\n        this.engine.destroy();\n        this.engine.off(_event.default.RECORD_COMPLETE, this.engineStopCallback);\n      }\n\n      this.stop();\n      this.stopDevice();\n      this.removeRecording();\n      this.player.clearInterval(this.countDown);\n\n      if (this.getRecordType() === _recordMode.AUDIO_ONLY) {\n        if (this.surfer) {\n          this.surfer.destroy();\n        }\n      } else if (this.getRecordType() === _recordMode.IMAGE_ONLY) {\n        if (this.mediaElement && this.streamVisibleCallback) {\n          this.mediaElement.removeEventListener(_event.default.PLAYING, this.streamVisibleCallback);\n        }\n      }\n\n      this.resetState();\n      (0, _get2.default)((0, _getPrototypeOf2.default)(Record.prototype), "dispose", this).call(this);\n    }\n  }, {\n    key: "destroy",\n    value: function destroy() {\n      this.player.dispose();\n    }\n  }, {\n    key: "reset",\n    value: function reset() {\n      var _this7 = this;\n\n      if (this.engine) {\n        this.engine.dispose();\n        this.engine.off(_event.default.RECORD_COMPLETE, this.engineStopCallback);\n      }\n\n      this.stop();\n      this.stopDevice();\n      this.player.clearInterval(this.countDown);\n      this.removeRecording();\n      this.loadOptions();\n      this.resetState();\n      this.setDuration(this.maxLength);\n      this.setCurrentTime(0);\n      this.player.reset();\n\n      switch (this.getRecordType()) {\n        case _recordMode.AUDIO_ONLY:\n          if (this.surfer && this.surfer.surfer) {\n            this.surfer.surfer.empty();\n          }\n\n          break;\n\n        case _recordMode.IMAGE_ONLY:\n        case _recordMode.ANIMATION:\n          this.player.recordCanvas.hide();\n          this.player.cameraButton.hide();\n          break;\n      }\n\n      if (this.player.controlBar.playToggle !== undefined) {\n        this.player.controlBar.playToggle.hide();\n      }\n\n      this.player.deviceButton.show();\n      this.player.recordToggle.hide();\n      this.player.one(_event.default.LOADEDMETADATA, function () {\n        _this7.setDuration(_this7.maxLength);\n      });\n    }\n  }, {\n    key: "resetState",\n    value: function resetState() {\n      this._recording = false;\n      this._processing = false;\n      this._deviceActive = false;\n      this.devices = [];\n    }\n  }, {\n    key: "removeRecording",\n    value: function removeRecording() {\n      if (this.mediaElement && this.mediaElement.src.startsWith(\'blob:\') === true) {\n        URL.revokeObjectURL(this.mediaElement.src);\n        this.mediaElement.src = \'\';\n      }\n    }\n  }, {\n    key: "exportImage",\n    value: function exportImage() {\n      var format = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \'image/png\';\n      var quality = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n\n      if (this.getRecordType() === _recordMode.AUDIO_ONLY) {\n        return this.surfer.surfer.exportImage(format, quality, \'blob\');\n      } else {\n        var recordCanvas = this.player.recordCanvas.el().firstChild;\n        this.drawCanvas(recordCanvas, this.mediaElement);\n        return new Promise(function (resolve) {\n          recordCanvas.toBlob(resolve, format, quality);\n        });\n      }\n    }\n  }, {\n    key: "muteTracks",\n    value: function muteTracks(mute) {\n      if ((this.getRecordType() === _recordMode.AUDIO_ONLY || this.getRecordType() === _recordMode.AUDIO_SCREEN || this.getRecordType() === _recordMode.AUDIO_VIDEO) && this.stream.getAudioTracks().length > 0) {\n        this.stream.getAudioTracks()[0].enabled = !mute;\n      }\n\n      if (this.getRecordType() !== _recordMode.AUDIO_ONLY && this.stream.getVideoTracks().length > 0) {\n        this.stream.getVideoTracks()[0].enabled = !mute;\n      }\n    }\n  }, {\n    key: "getRecordType",\n    value: function getRecordType() {\n      return (0, _recordMode.getRecorderMode)(this.recordImage, this.recordAudio, this.recordVideo, this.recordAnimation, this.recordScreen);\n    }\n  }, {\n    key: "createSnapshot",\n    value: function createSnapshot() {\n      var _this8 = this;\n\n      this.captureFrame().then(function (result) {\n        if (_this8.imageOutputType === \'blob\') {\n          result.toBlob(function (blob) {\n            _this8.player.recordedData = blob;\n\n            _this8.displaySnapshot();\n          });\n        } else if (_this8.imageOutputType === \'dataURL\') {\n          _this8.player.recordedData = result.toDataURL(_this8.imageOutputFormat, _this8.imageOutputQuality);\n\n          _this8.displaySnapshot();\n        }\n      }, this.imageOutputFormat, this.imageOutputQuality);\n    }\n  }, {\n    key: "displaySnapshot",\n    value: function displaySnapshot() {\n      this.mediaElement.style.display = \'none\';\n      this.player.recordCanvas.show();\n      this.stop();\n    }\n  }, {\n    key: "retrySnapshot",\n    value: function retrySnapshot() {\n      this._processing = false;\n      this.player.recordCanvas.hide();\n      this.player.el().firstChild.style.display = \'block\';\n    }\n  }, {\n    key: "captureFrame",\n    value: function captureFrame() {\n      var _this9 = this;\n\n      var detected = (0, _detectBrowser.detectBrowser)();\n      var recordCanvas = this.player.recordCanvas.el().firstChild;\n      recordCanvas.width = this.player.width();\n      recordCanvas.height = this.player.height();\n      return new Promise(function (resolve, reject) {\n        if (detected.browser === \'chrome\' && detected.version >= 60 && (typeof ImageCapture === "undefined" ? "undefined" : (0, _typeof2.default)(ImageCapture)) === (typeof Function === "undefined" ? "undefined" : (0, _typeof2.default)(Function))) {\n          try {\n            var track = _this9.stream.getVideoTracks()[0];\n\n            var imageCapture = new ImageCapture(track);\n            imageCapture.grabFrame().then(function (imageBitmap) {\n              _this9.drawCanvas(recordCanvas, imageBitmap);\n\n              resolve(recordCanvas);\n            }).catch(function (error) {});\n          } catch (err) {}\n        }\n\n        _this9.drawCanvas(recordCanvas, _this9.mediaElement);\n\n        resolve(recordCanvas);\n      });\n    }\n  }, {\n    key: "drawCanvas",\n    value: function drawCanvas(canvas, element) {\n      canvas.getContext(\'2d\').drawImage(element, 0, 0, canvas.width, canvas.height);\n    }\n  }, {\n    key: "startVideoPreview",\n    value: function startVideoPreview() {\n      this.off(_event.default.TIMEUPDATE);\n      this.off(_event.default.DURATIONCHANGE);\n      this.off(_event.default.LOADEDMETADATA);\n      this.off(_event.default.PLAY);\n      this.mediaElement.muted = true;\n      this.displayVolumeControl(false);\n      this.removeRecording();\n      this.load(this.stream);\n      this.mediaElement.play();\n    }\n  }, {\n    key: "showAnimation",\n    value: function showAnimation() {\n      var animationDisplay = this.player.animationDisplay.el().firstChild;\n      animationDisplay.width = this.player.width();\n      animationDisplay.height = this.player.height();\n      this.player.recordCanvas.hide();\n      (0, _browserShim.default)(this.player.recordedData, animationDisplay);\n      this.player.animationDisplay.show();\n    }\n  }, {\n    key: "hideAnimation",\n    value: function hideAnimation() {\n      this.player.recordCanvas.show();\n      this.player.animationDisplay.hide();\n    }\n  }, {\n    key: "playbackTimeUpdate",\n    value: function playbackTimeUpdate() {\n      this.setCurrentTime(this.player.currentTime(), this.streamDuration);\n    }\n  }, {\n    key: "enumerateDevices",\n    value: function enumerateDevices() {\n      var _this10 = this;\n\n      if (!navigator.mediaDevices || !navigator.mediaDevices.enumerateDevices) {\n        this.player.enumerateErrorCode = \'enumerateDevices() not supported.\';\n        this.player.trigger(_event.default.ENUMERATE_ERROR);\n        return;\n      }\n\n      navigator.mediaDevices.enumerateDevices(this).then(function (devices) {\n        _this10.devices = [];\n        devices.forEach(function (device) {\n          _this10.devices.push(device);\n        });\n\n        _this10.player.trigger(_event.default.ENUMERATE_READY);\n      }).catch(function (err) {\n        _this10.player.enumerateErrorCode = err;\n\n        _this10.player.trigger(_event.default.ENUMERATE_ERROR);\n      });\n    }\n  }, {\n    key: "setVideoInput",\n    value: function setVideoInput(deviceId) {\n      if (this.recordVideo === Object(this.recordVideo)) {\n        this.recordVideo.deviceId = {\n          exact: deviceId\n        };\n      } else if (this.recordVideo === true) {\n        this.recordVideo = {\n          deviceId: {\n            exact: deviceId\n          }\n        };\n      }\n\n      this.stopDevice();\n      this.getDevice();\n    }\n  }, {\n    key: "setAudioInput",\n    value: function setAudioInput(deviceId) {\n      if (this.recordAudio === Object(this.recordAudio)) {\n        this.recordAudio.deviceId = {\n          exact: deviceId\n        };\n      } else if (this.recordAudio === true) {\n        this.recordAudio = {\n          deviceId: {\n            exact: deviceId\n          }\n        };\n      }\n\n      switch (this.getRecordType()) {\n        case _recordMode.AUDIO_ONLY:\n          this.surfer.surfer.microphone.constraints = {\n            video: false,\n            audio: this.recordAudio\n          };\n          break;\n      }\n\n      this.stopDevice();\n      this.getDevice();\n    }\n  }, {\n    key: "setAudioOutput",\n    value: function setAudioOutput(deviceId) {\n      var _this11 = this;\n\n      var errorMessage;\n\n      switch (this.getRecordType()) {\n        case _recordMode.AUDIO_ONLY:\n          this.surfer.surfer.setSinkId(deviceId).then(function (result) {\n            _this11.player.trigger(_event.default.AUDIO_OUTPUT_READY);\n\n            return;\n          }).catch(function (err) {\n            errorMessage = err;\n          });\n          break;\n\n        default:\n          var element = player.tech_.el_;\n\n          if (deviceId) {\n            if (typeof element.sinkId !== \'undefined\') {\n              element.setSinkId(deviceId).then(function (result) {\n                _this11.player.trigger(_event.default.AUDIO_OUTPUT_READY);\n\n                return;\n              }).catch(function (err) {\n                errorMessage = err;\n              });\n            } else {\n              errorMessage = \'Browser does not support audio output device selection.\';\n            }\n          } else {\n            errorMessage = "Invalid deviceId: ".concat(deviceId);\n          }\n\n          break;\n      }\n\n      this.player.trigger(_event.default.ERROR, errorMessage);\n    }\n  }, {\n    key: "displayVolumeControl",\n    value: function displayVolumeControl(display) {\n      if (this.player.controlBar.volumePanel !== undefined) {\n        if (display === true) {\n          display = \'flex\';\n        } else {\n          display = \'none\';\n        }\n\n        this.player.controlBar.volumePanel.el().style.display = display;\n      }\n    }\n  }, {\n    key: "onStreamVisible",\n    value: function onStreamVisible(event) {\n      this.mediaElement.removeEventListener(_event.default.PLAYING, this.streamVisibleCallback);\n      this.player.cameraButton.onStop();\n      this.player.cameraButton.show();\n    }\n  }, {\n    key: "onEnterPiP",\n    value: function onEnterPiP(event) {\n      this.player.trigger(_event.default.ENTER_PIP, event);\n    }\n  }, {\n    key: "onLeavePiP",\n    value: function onLeavePiP(event) {\n      this.player.trigger(_event.default.LEAVE_PIP);\n    }\n  }]);\n  return Record;\n}(Plugin);\n\nexports.Record = Record;\nRecord.VERSION = "4.1.0";\n_video.default.Record = Record;\n\nif (_video.default.getPlugin(\'record\') === undefined) {\n  _video.default.registerPlugin(\'record\', Record);\n}\n\n//# sourceURL=webpack://VideojsRecord/./src/js/videojs.record.js?')},0:function _(module,exports,__webpack_require__){eval('__webpack_require__(/*! /Users/thijstriemstra/projects/videojs-record/src/js/videojs.record.js */"./src/js/videojs.record.js");\nmodule.exports = __webpack_require__(/*! /Users/thijstriemstra/projects/videojs-record/src/css/videojs.record.scss */"./src/css/videojs.record.scss");\n\n\n//# sourceURL=webpack://VideojsRecord/multi_./src/js/videojs.record.js_./src/css/videojs.record.scss?')},recordrtc:function recordrtc(module,exports){eval("module.exports = __WEBPACK_EXTERNAL_MODULE_recordrtc__;\n\n//# sourceURL=webpack://VideojsRecord/external_%7B%22commonjs%22:%22recordrtc%22,%22commonjs2%22:%22recordrtc%22,%22amd%22:%22recordrtc%22,%22root%22:%22RecordRTC%22%7D?")},"video.js":function videoJs(module,exports){eval("module.exports = __WEBPACK_EXTERNAL_MODULE_video_js__;\n\n//# sourceURL=webpack://VideojsRecord/external_%7B%22commonjs%22:%22video.js%22,%22commonjs2%22:%22video.js%22,%22amd%22:%22video.js%22,%22root%22:%22videojs%22%7D?")}})},module.exports=factory(__webpack_require__("qe5e"),__webpack_require__("8OJ3"))},P3vI:function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0;var r=n("Dztv"),s=n("HxXY"),a=n("oIG1"),c=n("/dLB"),l=n("bDgZ"),u=n("9m68").OpenViduLogger.getInstance(),d=function(e){function t(t,n){var i=e.call(this)||this;if(i.videos=[],i.lazyLaunchVideoElementCreatedEvent=!1,i.stream=t,i.stream.streamManager=i,i.remote=!i.stream.isLocal(),n){var o=void 0;"string"==typeof n?o=document.getElementById(n):n instanceof HTMLElement&&(o=n),o&&(i.firstVideoElement={targetElement:o,video:document.createElement("video"),id:"",canplayListenerAdded:!1},"Safari"===l.name&&i.firstVideoElement.video.setAttribute("playsinline","true"),i.targetElement=o,i.element=o)}return i.canPlayListener=function(){i.stream.isLocal()?i.stream.displayMyRemote()?(u.info("Your own remote 'Stream' with id ["+i.stream.streamId+"] video is now playing"),i.ee.emitEvent("remoteVideoPlaying",[new a.VideoElementEvent(i.videos[0].video,i,"remoteVideoPlaying")])):(u.info("Your local 'Stream' with id ["+i.stream.streamId+"] video is now playing"),i.ee.emitEvent("videoPlaying",[new a.VideoElementEvent(i.videos[0].video,i,"videoPlaying")])):(u.info("Remote 'Stream' with id ["+i.stream.streamId+"] video is now playing"),i.ee.emitEvent("videoPlaying",[new a.VideoElementEvent(i.videos[0].video,i,"videoPlaying")])),i.ee.emitEvent("streamPlaying",[new s.StreamManagerEvent(i,"streamPlaying",void 0)])},i}return o(t,e),t.prototype.on=function(t,n){return e.prototype.onAux.call(this,t,"Event '"+t+"' triggered by '"+(this.remote?"Subscriber":"Publisher")+"'",n),"videoElementCreated"===t&&this.stream&&this.lazyLaunchVideoElementCreatedEvent&&(this.ee.emitEvent("videoElementCreated",[new a.VideoElementEvent(this.videos[0].video,this,"videoElementCreated")]),this.lazyLaunchVideoElementCreatedEvent=!1),"streamPlaying"!==t&&"videoPlaying"!==t||this.videos[0]&&this.videos[0].video&&this.videos[0].video.currentTime>0&&!1===this.videos[0].video.paused&&!1===this.videos[0].video.ended&&4===this.videos[0].video.readyState&&(this.ee.emitEvent("streamPlaying",[new s.StreamManagerEvent(this,"streamPlaying",void 0)]),this.ee.emitEvent("videoPlaying",[new a.VideoElementEvent(this.videos[0].video,this,"videoPlaying")])),"streamAudioVolumeChange"===t&&this.stream.hasAudio&&this.stream.enableVolumeChangeEvent(!1),this},t.prototype.once=function(t,n){return e.prototype.onceAux.call(this,t,"Event '"+t+"' triggered once by '"+(this.remote?"Subscriber":"Publisher")+"'",n),"videoElementCreated"===t&&this.stream&&this.lazyLaunchVideoElementCreatedEvent&&this.ee.emitEvent("videoElementCreated",[new a.VideoElementEvent(this.videos[0].video,this,"videoElementCreated")]),"streamPlaying"!==t&&"videoPlaying"!==t||this.videos[0]&&this.videos[0].video&&this.videos[0].video.currentTime>0&&!1===this.videos[0].video.paused&&!1===this.videos[0].video.ended&&4===this.videos[0].video.readyState&&(this.ee.emitEvent("streamPlaying",[new s.StreamManagerEvent(this,"streamPlaying",void 0)]),this.ee.emitEvent("videoPlaying",[new a.VideoElementEvent(this.videos[0].video,this,"videoPlaying")])),"streamAudioVolumeChange"===t&&this.stream.hasAudio&&this.stream.enableOnceVolumeChangeEvent(!1),this},t.prototype.off=function(t,n){return e.prototype.off.call(this,t,n),"streamAudioVolumeChange"===t&&0===this.ee.getListeners(t).length&&this.stream.disableVolumeChangeEvent(!1),this},t.prototype.addVideoElement=function(e){this.initializeVideoProperties(e),this.stream.isLocal()&&this.stream.displayMyRemote()&&e.srcObject!==this.stream.getMediaStream()&&(e.srcObject=this.stream.getMediaStream());for(var t=0,n=this.videos;t<n.length;t++)if(n[t].video===e)return 0;for(var i=1,o=0,r=this.stream.session.streamManagers;o<r.length;o++)if(r[o].disassociateVideo(e)){i=-1;break}return this.stream.session.streamManagers.forEach((function(t){t.disassociateVideo(e)})),this.pushNewStreamManagerVideo({video:e,id:e.id,canplayListenerAdded:!1}),u.info("New video element associated to ",this),i},t.prototype.createVideoElement=function(e,t){var n;if("string"==typeof e){if(!(n=document.getElementById(e)))throw new Error("The provided 'targetElement' couldn't be resolved to any HTML element: "+e)}else{if(!(e instanceof HTMLElement))throw new Error("The provided 'targetElement' couldn't be resolved to any HTML element: "+e);n=e}var i=this.createVideo();this.initializeVideoProperties(i);var o=t||c.VideoInsertMode.APPEND;switch(o){case c.VideoInsertMode.AFTER:n.parentNode.insertBefore(i,n.nextSibling);break;case c.VideoInsertMode.APPEND:n.appendChild(i);break;case c.VideoInsertMode.BEFORE:n.parentNode.insertBefore(i,n);break;case c.VideoInsertMode.PREPEND:n.insertBefore(i,n.childNodes[0]);break;case c.VideoInsertMode.REPLACE:n.parentNode.replaceChild(i,n);break;default:o=c.VideoInsertMode.APPEND,n.appendChild(i)}var r={targetElement:n,video:i,insertMode:o,id:i.id,canplayListenerAdded:!1};return this.pushNewStreamManagerVideo(r),this.ee.emitEvent("videoElementCreated",[new a.VideoElementEvent(r.video,this,"videoElementCreated")]),this.lazyLaunchVideoElementCreatedEvent=!!this.firstVideoElement,i},t.prototype.updatePublisherSpeakingEventsOptions=function(e){var t=this.stream.harkOptions?this.stream.harkOptions:this.stream.session.openvidu.advancedConfiguration.publisherSpeakingEventsOptions||{},n="number"==typeof e.interval?e.interval:"number"==typeof t.interval?t.interval:100,i="number"==typeof e.threshold?e.threshold:"number"==typeof t.threshold?t.threshold:-50;this.stream.harkOptions={interval:n,threshold:i},this.stream.speechEvent&&(this.stream.speechEvent.setInterval(n),this.stream.speechEvent.setThreshold(i))},t.prototype.initializeVideoProperties=function(e){this.stream.isLocal()&&this.stream.displayMyRemote()||e.srcObject!==this.stream.getMediaStream()&&(e.srcObject=this.stream.getMediaStream()),e.autoplay=!0,e.controls=!1,"Safari"===l.name&&e.setAttribute("playsinline","true"),e.id||(e.id=(this.remote?"remote-":"local-")+"video-"+this.stream.streamId,!this.id&&this.targetElement&&(this.id=e.id)),this.remote||this.stream.displayMyRemote()||(e.muted=!0,"rotateY(180deg)"!==e.style.transform||this.stream.outboundStreamOpts.publisherProperties.mirror?this.stream.outboundStreamOpts.publisherProperties.mirror&&!this.stream.isSendScreen()&&this.mirrorVideo(e):this.removeMirrorVideo(e))},t.prototype.removeAllVideos=function(){for(var e=this,t=this.stream.session.streamManagers.length-1;t>=0;--t)this.stream.session.streamManagers[t]===this&&this.stream.session.streamManagers.splice(t,1);this.videos.forEach((function(t){t.video&&t.video.removeEventListener&&t.video.removeEventListener("canplay",e.canPlayListener),t.canplayListenerAdded=!1,t.targetElement&&(t.video.parentNode.removeChild(t.video),e.ee.emitEvent("videoElementDestroyed",[new a.VideoElementEvent(t.video,e,"videoElementDestroyed")])),e.removeSrcObject(t),e.videos.filter((function(e){return!e.targetElement}))}))},t.prototype.disassociateVideo=function(e){for(var t=!1,n=0;n<this.videos.length;n++)if(this.videos[n].video===e){this.videos[n].video.removeEventListener("canplay",this.canPlayListener),this.videos.splice(n,1),t=!0,u.info("Video element disassociated from ",this);break}return t},t.prototype.addPlayEventToFirstVideo=function(){this.videos[0]&&this.videos[0].video&&!this.videos[0].canplayListenerAdded&&(this.videos[0].video.addEventListener("canplay",this.canPlayListener),this.videos[0].canplayListenerAdded=!0)},t.prototype.updateMediaStream=function(e){this.videos.forEach((function(t){if(t.video.srcObject=e,l.isIonicIos){var n=t.video;t.video.parentElement.replaceChild(n,t.video),t.video=n}}))},t.prototype.emitEvent=function(e,t){this.ee.emitEvent(e,t)},t.prototype.createVideo=function(){return document.createElement("video")},t.prototype.removeSrcObject=function(e){e.video.srcObject=null},t.prototype.pushNewStreamManagerVideo=function(e){this.videos.push(e),this.addPlayEventToFirstVideo(),-1===this.stream.session.streamManagers.indexOf(this)&&this.stream.session.streamManagers.push(this)},t.prototype.mirrorVideo=function(e){l.isIonicIos||(e.style.transform="rotateY(180deg)",e.style.webkitTransform="rotateY(180deg)")},t.prototype.removeMirrorVideo=function(e){e.style.transform="unset",e.style.webkitTransform="unset"},t}(r.EventDispatcher);t.StreamManager=d},PEz1:function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0;var r=n("JTMn"),s=n("DPKQ"),a=n("P3vI"),c=n("Te8r"),l=n("BwMD"),u=n("oIG1"),d=n("Tt94"),p=n("bDgZ"),h=n("9m68").OpenViduLogger.getInstance(),f=function(e){function t(t,n,i){var o=e.call(this,new s.Stream(i.session?i.session:new r.Session(i),{publisherProperties:n,mediaConstraints:{}}),t)||this;return o.accessAllowed=!1,o.isSubscribedToRemote=!1,o.accessDenied=!1,o.properties=n,o.openvidu=i,o.stream.ee.on("local-stream-destroyed",(function(e){o.stream.isLocalStreamPublished=!1;var t=new c.StreamEvent(!0,o,"streamDestroyed",o.stream,e);o.emitEvent("streamDestroyed",[t]),t.callDefaultBehavior()})),o}return o(t,e),t.prototype.publishAudio=function(e){var t=this;this.stream.audioActive!==e&&((this.stream.displayMyRemote()?this.stream.localMediaStreamWhenSubscribedToRemote:this.stream.getMediaStream()).getAudioTracks().forEach((function(t){t.enabled=e})),this.session&&this.stream.streamId&&this.session.openvidu.sendRequest("streamPropertyChanged",{streamId:this.stream.streamId,property:"audioActive",newValue:e,reason:"publishAudio"},(function(n,i){n?h.error("Error sending 'streamPropertyChanged' event",n):(t.session.emitEvent("streamPropertyChanged",[new l.StreamPropertyChangedEvent(t.session,t.stream,"audioActive",e,!e,"publishAudio")]),t.emitEvent("streamPropertyChanged",[new l.StreamPropertyChangedEvent(t,t.stream,"audioActive",e,!e,"publishAudio")]))})),this.stream.audioActive=e,h.info("'Publisher' has "+(e?"published":"unpublished")+" its audio stream"))},t.prototype.publishVideo=function(e){var t=this;this.stream.videoActive!==e&&((this.stream.displayMyRemote()?this.stream.localMediaStreamWhenSubscribedToRemote:this.stream.getMediaStream()).getVideoTracks().forEach((function(t){t.enabled=e})),this.session&&this.stream.streamId&&this.session.openvidu.sendRequest("streamPropertyChanged",{streamId:this.stream.streamId,property:"videoActive",newValue:e,reason:"publishVideo"},(function(n,i){n?h.error("Error sending 'streamPropertyChanged' event",n):(t.session.emitEvent("streamPropertyChanged",[new l.StreamPropertyChangedEvent(t.session,t.stream,"videoActive",e,!e,"publishVideo")]),t.emitEvent("streamPropertyChanged",[new l.StreamPropertyChangedEvent(t,t.stream,"videoActive",e,!e,"publishVideo")]))})),this.stream.videoActive=e,h.info("'Publisher' has "+(e?"published":"unpublished")+" its video stream"))},t.prototype.subscribeToRemote=function(e){this.isSubscribedToRemote=e=void 0===e||e,this.stream.subscribeToMyRemote(e)},t.prototype.on=function(t,n){var i=this;return e.prototype.on.call(this,t,n),"streamCreated"===t&&(this.stream&&this.stream.isLocalStreamPublished?this.emitEvent("streamCreated",[new c.StreamEvent(!1,this,"streamCreated",this.stream,"")]):this.stream.ee.on("stream-created-by-publisher",(function(){i.emitEvent("streamCreated",[new c.StreamEvent(!1,i,"streamCreated",i.stream,"")])}))),"remoteVideoPlaying"===t&&this.stream.displayMyRemote()&&this.videos[0]&&this.videos[0].video&&this.videos[0].video.currentTime>0&&!1===this.videos[0].video.paused&&!1===this.videos[0].video.ended&&4===this.videos[0].video.readyState&&this.emitEvent("remoteVideoPlaying",[new u.VideoElementEvent(this.videos[0].video,this,"remoteVideoPlaying")]),"accessAllowed"===t&&this.accessAllowed&&this.emitEvent("accessAllowed",[]),"accessDenied"===t&&this.accessDenied&&this.emitEvent("accessDenied",[]),this},t.prototype.once=function(t,n){var i=this;return e.prototype.once.call(this,t,n),"streamCreated"===t&&(this.stream&&this.stream.isLocalStreamPublished?this.emitEvent("streamCreated",[new c.StreamEvent(!1,this,"streamCreated",this.stream,"")]):this.stream.ee.once("stream-created-by-publisher",(function(){i.emitEvent("streamCreated",[new c.StreamEvent(!1,i,"streamCreated",i.stream,"")])}))),"remoteVideoPlaying"===t&&this.stream.displayMyRemote()&&this.videos[0]&&this.videos[0].video&&this.videos[0].video.currentTime>0&&!1===this.videos[0].video.paused&&!1===this.videos[0].video.ended&&4===this.videos[0].video.readyState&&this.emitEvent("remoteVideoPlaying",[new u.VideoElementEvent(this.videos[0].video,this,"remoteVideoPlaying")]),"accessAllowed"===t&&this.accessAllowed&&this.emitEvent("accessAllowed",[]),"accessDenied"===t&&this.accessDenied&&this.emitEvent("accessDenied",[]),this},t.prototype.replaceTrack=function(e){var t=this,n=function(){var n,i=t.stream.displayMyRemote()?t.stream.localMediaStreamWhenSubscribedToRemote:t.stream.getMediaStream();n="video"===e.kind?i.getVideoTracks()[0]:i.getAudioTracks()[0],i.removeTrack(n),n.stop(),i.addTrack(e)};return new Promise((function(i,o){if(t.stream.isLocalStreamPublished){var r=t.stream.getRTCPeerConnection().getSenders(),s=void 0;"video"===e.kind?(s=r.find((function(e){return!!e.track&&"video"===e.track.kind})))||o(new Error("There's no replaceable track for that kind of MediaStreamTrack in this Publisher object")):"audio"===e.kind?(s=r.find((function(e){return!!e.track&&"audio"===e.track.kind})))||o(new Error("There's no replaceable track for that kind of MediaStreamTrack in this Publisher object")):o(new Error("Unknown track kind "+e.kind)),s.replaceTrack(e).then((function(){n(),i()})).catch((function(e){o(e)}))}else n(),i()}))},t.prototype.initialize=function(){var e=this;return new Promise((function(t,n){var i,o={},r={},s=function(t){e.accessDenied=!0,e.accessAllowed=!1,n(t)},a=function(n){if(e.accessAllowed=!0,e.accessDenied=!1,"undefined"!=typeof MediaStreamTrack&&e.properties.audioSource instanceof MediaStreamTrack&&(n.removeTrack(n.getAudioTracks()[0]),n.addTrack(e.properties.audioSource)),"undefined"!=typeof MediaStreamTrack&&e.properties.videoSource instanceof MediaStreamTrack&&(n.removeTrack(n.getVideoTracks()[0]),n.addTrack(e.properties.videoSource)),n.getAudioTracks()[0]){var i=null!=e.stream.audioActive?e.stream.audioActive:!!e.stream.outboundStreamOpts.publisherProperties.publishAudio;n.getAudioTracks()[0].enabled=i}if(n.getVideoTracks()[0]&&(i=null!=e.stream.videoActive?e.stream.videoActive:!!e.stream.outboundStreamOpts.publisherProperties.publishVideo,n.getVideoTracks()[0].enabled=i),e.initializeVideoReference(n),e.stream.displayMyRemote()||e.stream.updateMediaStreamInVideos(),delete e.firstVideoElement,e.stream.isSendVideo())if(e.stream.isSendScreen())e.videoReference.addEventListener("loadedmetadata",(function(){e.stream.videoDimensions={width:e.videoReference.videoWidth,height:e.videoReference.videoHeight},e.screenShareResizeInterval=setInterval((function(){var t=n.getVideoTracks()[0].getSettings(),i="Chrome"===p.name||"Opera"===p.name?e.videoReference.videoWidth:t.width,o="Chrome"===p.name||"Opera"===p.name?e.videoReference.videoHeight:t.height;if(e.stream.isLocalStreamPublished&&(i!==e.stream.videoDimensions.width||o!==e.stream.videoDimensions.height)){var r={width:e.stream.videoDimensions.width,height:e.stream.videoDimensions.height};e.stream.videoDimensions={width:i||0,height:o||0},e.session.openvidu.sendRequest("streamPropertyChanged",{streamId:e.stream.streamId,property:"videoDimensions",newValue:JSON.stringify(e.stream.videoDimensions),reason:"screenResized"},(function(t,n){t?h.error("Error sending 'streamPropertyChanged' event",t):(e.session.emitEvent("streamPropertyChanged",[new l.StreamPropertyChangedEvent(e.session,e.stream,"videoDimensions",e.stream.videoDimensions,r,"screenResized")]),e.emitEvent("streamPropertyChanged",[new l.StreamPropertyChangedEvent(e,e.stream,"videoDimensions",e.stream.videoDimensions,r,"screenResized")]))}))}}),500),e.stream.isLocalStreamReadyToPublish=!0,e.stream.ee.emitEvent("stream-ready-to-publish",[])}));else if(p.isIonicIos||"Safari"===p.name){e.videoReference.style.display="none",document.body.appendChild(e.videoReference);var o,r=function(){e.stream.videoDimensions={width:e.videoReference.videoWidth,height:e.videoReference.videoHeight},e.stream.isLocalStreamReadyToPublish=!0,e.stream.ee.emitEvent("stream-ready-to-publish",[]),document.body.removeChild(e.videoReference)};e.videoReference.addEventListener("loadedmetadata",(function(){0===e.videoReference.videoWidth?o=setInterval((function(){0!==e.videoReference.videoWidth&&(clearInterval(o),r())}),40):r()}))}else{var s=e.getVideoDimensions(n),a=s.width,c=s.height;e.stream.videoDimensions=("iOS"===p.os.family||"Android"===p.os.family)&&window.innerHeight>window.innerWidth?{width:c||0,height:a||0}:{width:a||0,height:c||0},e.stream.isLocalStreamReadyToPublish=!0,e.stream.ee.emitEvent("stream-ready-to-publish",[])}else e.stream.isLocalStreamReadyToPublish=!0,e.stream.ee.emitEvent("stream-ready-to-publish",[]);t()},c=function(t,n){e.clearPermissionDialogTimer(i,1250),e.stream.isSendScreen()&&e.stream.isSendAudio()?(r.audio=n,r.video=!1,i=Date.now(),e.setPermissionDialogTimer(1250),navigator.mediaDevices.getUserMedia(r).then((function(n){e.clearPermissionDialogTimer(i,1250),t.addTrack(n.getAudioTracks()[0]),a(t)})).catch((function(n){e.clearPermissionDialogTimer(i,1250),t.getAudioTracks().forEach((function(e){e.stop()})),t.getVideoTracks().forEach((function(e){e.stop()})),s(e.openvidu.generateAudioDeviceError(n,o))}))):a(t)},u=function(t){var n,r;switch(h.error(t),e.clearPermissionDialogTimer(i,1250),"Error"===t.name&&(t.name=t.constructor.name),t.name.toLowerCase()){case"notfounderror":navigator.mediaDevices.getUserMedia({audio:!1,video:o.video}).then((function(e){e.getVideoTracks().forEach((function(e){e.stop()})),n=d.OpenViduErrorName.INPUT_AUDIO_DEVICE_NOT_FOUND,r=t.toString(),s(new d.OpenViduError(n,r))})).catch((function(e){n=d.OpenViduErrorName.INPUT_VIDEO_DEVICE_NOT_FOUND,r=t.toString(),s(new d.OpenViduError(n,r))}));break;case"notallowederror":n=e.stream.isSendScreen()?d.OpenViduErrorName.SCREEN_CAPTURE_DENIED:d.OpenViduErrorName.DEVICE_ACCESS_DENIED,r=t.toString(),s(new d.OpenViduError(n,r));break;case"overconstrainederror":navigator.mediaDevices.getUserMedia({audio:!1,video:o.video}).then((function(e){e.getVideoTracks().forEach((function(e){e.stop()})),"deviceid"===t.constraint.toLowerCase()?(n=d.OpenViduErrorName.INPUT_AUDIO_DEVICE_NOT_FOUND,r="Audio input device with deviceId '"+o.audio.deviceId.exact+"' not found"):(n=d.OpenViduErrorName.PUBLISHER_PROPERTIES_ERROR,r="Audio input device doesn't support the value passed for constraint '"+t.constraint+"'"),s(new d.OpenViduError(n,r))})).catch((function(e){"deviceid"===t.constraint.toLowerCase()?(n=d.OpenViduErrorName.INPUT_VIDEO_DEVICE_NOT_FOUND,r="Video input device with deviceId '"+o.video.deviceId.exact+"' not found"):(n=d.OpenViduErrorName.PUBLISHER_PROPERTIES_ERROR,r="Video input device doesn't support the value passed for constraint '"+t.constraint+"'"),s(new d.OpenViduError(n,r))}));break;case"aborterror":case"notreadableerror":n=d.OpenViduErrorName.DEVICE_ALREADY_IN_USE,r=t.toString(),s(new d.OpenViduError(n,r));break;default:n=d.OpenViduErrorName.GENERIC_ERROR,r=t.toString(),s(new d.OpenViduError(n,r))}};e.openvidu.generateMediaConstraints(e.properties).then((function(t){var n,s;if(t.videoTrack&&t.audioTrack||t.audioTrack&&!1===(null===(n=t.constraints)||void 0===n?void 0:n.video)||t.videoTrack&&!1===(null===(s=t.constraints)||void 0===s?void 0:s.audio))a(e.openvidu.addAlreadyProvidedTracks(t,new MediaStream));else{e.stream.setOutboundStreamOptions({mediaConstraints:o=t.constraints,publisherProperties:e.properties});var l=void 0===o.audio||o.audio;r.audio=!e.stream.isSendScreen()&&l,r.video=o.video,i=Date.now(),e.setPermissionDialogTimer(1250),e.stream.isSendScreen()&&navigator.mediaDevices.getDisplayMedia&&"Electron"!==p.name?navigator.mediaDevices.getDisplayMedia({video:!0}).then((function(n){e.openvidu.addAlreadyProvidedTracks(t,n),c(n,l)})).catch((function(e){u(e)})):navigator.mediaDevices.getUserMedia(r).then((function(n){e.openvidu.addAlreadyProvidedTracks(t,n),c(n,l)})).catch((function(e){u(e)}))}})).catch((function(e){s(e)}))}))},t.prototype.getVideoDimensions=function(e){return e.getVideoTracks()[0].getSettings()},t.prototype.reestablishStreamPlayingEvent=function(){this.ee.getListeners("streamPlaying").length>0&&this.addPlayEventToFirstVideo()},t.prototype.initializeVideoReference=function(e){this.videoReference=document.createElement("video"),"Safari"===p.name&&this.videoReference.setAttribute("playsinline","true"),this.stream.setMediaStream(e),this.firstVideoElement&&this.createVideoElement(this.firstVideoElement.targetElement,this.properties.insertMode),this.videoReference.srcObject=e},t.prototype.setPermissionDialogTimer=function(e){var t=this;this.permissionDialogTimeout=setTimeout((function(){t.emitEvent("accessDialogOpened",[])}),e)},t.prototype.clearPermissionDialogTimer=function(e,t){clearTimeout(this.permissionDialogTimeout),Date.now()-e>t&&this.emitEvent("accessDialogClosed",[])},t}(a.StreamManager);t.Publisher=f},PPcv:function(e,t,n){"use strict";t.__esModule=!0;var i=n("tInm"),o=n("PEz1"),r=n("JTMn"),s=n("BwMD"),a=n("Tt94"),c=n("/dLB"),l=n("9m68"),u=n("+27z"),d=n("EcWD"),p=n("6+/i"),h=n("AeG9"),f=n("bDgZ");f.isIonicIos=("iPhone"===f.product||"iPad"===f.product)&&-1===f.ua.indexOf("Safari"),f.isIonicAndroid="Android"===f.os.family&&"Android Browser"==f.name;var g=n("vqFl"),m=l.OpenViduLogger.getInstance(),v=function(){function e(){var e=this;this.publishers=[],this.secret="",this.recorder=!1,this.advancedConfiguration={},this.webrtcStatsInterval=0,this.ee=new p,this.libraryVersion=g.version,m.info("'OpenVidu' initialized"),m.info("openvidu-browser version: "+this.libraryVersion),"iOS"!==f.os.family&&"Android"!==f.os.family||window.addEventListener("orientationchange",(function(){e.publishers.forEach((function(t){if(t.stream.isLocalStreamPublished&&t.stream&&t.stream.hasVideo&&t.stream.streamManager.videos[0])var n=0,i=t.stream.videoDimensions.width,o=t.stream.videoDimensions.height,r=setInterval((function(){new Promise((function(e,n){if(f.isIonicIos)e({newWidth:t.stream.streamManager.videos[0].video.videoWidth,newHeight:t.stream.streamManager.videos[0].video.videoHeight});else{var i=t.stream.getMediaStream().getVideoTracks()[0].getSettings();e({newWidth:-1!==f.name.toLowerCase().indexOf("firefox")?i.width:t.videoReference.videoWidth,newHeight:-1!==f.name.toLowerCase().indexOf("firefox")?i.height:t.videoReference.videoHeight})}})).then((function(e){a(i,o,e.newWidth,e.newHeight)}))}),75),a=function(i,o,a,c){++n>10&&clearTimeout(r),a===i&&c===o||(t.stream.videoDimensions={width:a||0,height:c||0},e.sendRequest("streamPropertyChanged",{streamId:t.stream.streamId,property:"videoDimensions",newValue:JSON.stringify(t.stream.videoDimensions),reason:"deviceRotated"},(function(n,r){n?m.error("Error sending 'streamPropertyChanged' event",n):(e.session.emitEvent("streamPropertyChanged",[new s.StreamPropertyChangedEvent(e.session,t.stream,"videoDimensions",t.stream.videoDimensions,{width:i,height:o},"deviceRotated")]),t.emitEvent("streamPropertyChanged",[new s.StreamPropertyChangedEvent(t,t.stream,"videoDimensions",t.stream.videoDimensions,{width:i,height:o},"deviceRotated")]))})),clearTimeout(r))}}))}))}return e.prototype.initSession=function(){return this.session=new r.Session(this),this.session},e.prototype.initPublisher=function(e,t,n){var i;i=t&&"function"!=typeof t?{audioSource:void 0!==(i=t).audioSource?i.audioSource:void 0,frameRate:"undefined"!=typeof MediaStreamTrack&&i.videoSource instanceof MediaStreamTrack?void 0:void 0!==i.frameRate?i.frameRate:void 0,insertMode:void 0!==i.insertMode?"string"==typeof i.insertMode?c.VideoInsertMode[i.insertMode]:i.insertMode:c.VideoInsertMode.APPEND,mirror:void 0===i.mirror||i.mirror,publishAudio:void 0===i.publishAudio||i.publishAudio,publishVideo:void 0===i.publishVideo||i.publishVideo,resolution:"undefined"!=typeof MediaStreamTrack&&i.videoSource instanceof MediaStreamTrack?void 0:void 0!==i.resolution?i.resolution:"640x480",videoSource:void 0!==i.videoSource?i.videoSource:void 0,filter:i.filter}:{insertMode:c.VideoInsertMode.APPEND,mirror:!0,publishAudio:!0,publishVideo:!0,resolution:"640x480"};var r,s=new o.Publisher(e,i,this);return t&&"function"==typeof t?r=t:n&&(r=n),s.initialize().then((function(){void 0!==r&&r(void 0),s.emitEvent("accessAllowed",[])})).catch((function(e){void 0!==r&&r(e),s.emitEvent("accessDenied",[e])})),this.publishers.push(s),s},e.prototype.initPublisherAsync=function(e,t){var n=this;return new Promise((function(i,o){var r,s=function(e){e?o(e):i(r)};r=t?n.initPublisher(e,t,s):n.initPublisher(e,s)}))},e.prototype.initLocalRecorder=function(e){return new i.LocalRecorder(e)},e.prototype.checkSystemRequirements=function(){var e=f.name,t=f.ua?f.ua:navigator.userAgent;return this.isIPhoneOrIPad(t)?this.isIOSWithSafari(t)?1:0:"Safari"===e||"Chrome"===e||"Chrome Mobile"===e||"Firefox"===e||"Firefox Mobile"===e||"Opera"===e||"Opera Mobile"===e||"Android Browser"===e||"Electron"===e||"Samsung Internet Mobile"===e||"Samsung Internet"===e?1:0},e.prototype.checkScreenSharingCapabilities=function(){var e=f.name,t=(null==f?void 0:f.version)?parseFloat(f.version):-1,n=f.os.family;return"iOS"===n||"Android"===n||"Chrome"!==e&&"Firefox"!==e&&"Opera"!==e&&"Electron"!==e&&"Safari"===e&&t<13?0:1},e.prototype.getDevices=function(){return new Promise((function(e,t){navigator.mediaDevices.enumerateDevices().then((function(t){var n,i=[];f.isIonicAndroid&&"undefined"!=typeof cordova&&(null===(n=null===cordova||void 0===cordova?void 0:cordova.plugins)||void 0===n?void 0:n.EnumerateDevicesPlugin)?cordova.plugins.EnumerateDevicesPlugin.getEnumerateDevices().then((function(n){var o=[],r=[],s=[];o=n.filter((function(e){return"audioinput"===e.kind})),r=t.filter((function(e){return"videoinput"===e.kind})),s=t.filter((function(e){return"audioinput"===e.kind})),r.forEach((function(e,t){i.push(e.label?{kind:e.kind,deviceId:e.deviceId,label:e.label}:{kind:e.kind,deviceId:e.deviceId,label:0===t?"Front Camera":1===t?"Back Camera":"Unknown Camera"})})),s.forEach((function(e,t){if(e.label)i.push({kind:e.kind,deviceId:e.deviceId,label:e.label});else{var n="";switch(t){case 0:n="Default";break;case 1:var r=o.filter((function(e){return e.label.includes("Built")}))[0];n=r?r.label:"Built-in Microphone";break;case 2:var s=o.filter((function(e){return e.label.includes("Wired")}))[0];n=s?s.label:"Headset earpiece";break;case 3:var a=o.filter((function(e){return e.label.includes("Bluetooth")}))[0];n=a?a.label:"Wireless";break;default:n="Unknown Microphone"}i.push({kind:e.kind,deviceId:e.deviceId,label:n})}})),e(i)})):(t.forEach((function(e){"audioinput"!==e.kind&&"videoinput"!==e.kind||i.push({kind:e.kind,deviceId:e.deviceId,label:e.label})})),e(i))})).catch((function(e){m.error("Error getting devices",e),t(e)}))}))},e.prototype.getUserMedia=function(e){var t=this;return new Promise((function(n,i){var o=function(e,o){var r={audio:void 0===o.audio||o.audio,video:!1};navigator.mediaDevices.getUserMedia(r).then((function(t){e.addTrack(t.getAudioTracks()[0]),n(e)})).catch((function(n){e.getAudioTracks().forEach((function(e){e.stop()})),e.getVideoTracks().forEach((function(e){e.stop()})),i(t.generateAudioDeviceError(n,r))}))};t.generateMediaConstraints(e).then((function(r){var s,c;if(r.videoTrack&&r.audioTrack||r.audioTrack&&!1===(null===(s=r.constraints)||void 0===s?void 0:s.video)||r.videoTrack&&!1===(null===(c=r.constraints)||void 0===c?void 0:c.audio))n(t.addAlreadyProvidedTracks(r,new MediaStream));else{r.videoTrack&&delete r.constraints.video,r.audioTrack&&delete r.constraints.audio;var l=!1;if("string"==typeof e.videoSource&&("screen"===e.videoSource||"window"===e.videoSource||"Electron"===f.name&&e.videoSource.startsWith("screen:"))&&(l=!r.audioTrack&&null!==e.audioSource&&!1!==e.audioSource,navigator.mediaDevices.getDisplayMedia&&"Electron"!==f.name))return void navigator.mediaDevices.getDisplayMedia({video:!0}).then((function(e){t.addAlreadyProvidedTracks(r,e),l?o(e,r.constraints):n(e)})).catch((function(e){var t=a.OpenViduErrorName.SCREEN_CAPTURE_DENIED,n=e.toString();i(new a.OpenViduError(t,n))}));navigator.mediaDevices.getUserMedia(l?{video:r.constraints.video}:r.constraints).then((function(e){t.addAlreadyProvidedTracks(r,e),l?o(e,r.constraints):n(e)})).catch((function(t){var n=t.toString();i(new a.OpenViduError("screen"!==e.videoSource?a.OpenViduErrorName.DEVICE_ACCESS_DENIED:a.OpenViduErrorName.SCREEN_CAPTURE_DENIED,n))}))}})).catch((function(e){i(e)}))}))},e.prototype.enableProdMode=function(){m.enableProdMode()},e.prototype.setAdvancedConfiguration=function(e){this.advancedConfiguration=e},e.prototype.generateMediaConstraints=function(e){var t=this;return new Promise((function(n,i){var o={audioTrack:void 0,videoTrack:void 0,constraints:{audio:void 0,video:void 0}},r=e.audioSource,s=e.videoSource;if(null!==r&&!1!==r||(o.constraints.audio=!1),null!==s&&!1!==s||(o.constraints.video=!1),!1===o.constraints.audio&&!1===o.constraints.video&&i(new a.OpenViduError(a.OpenViduErrorName.NO_INPUT_SOURCE_SET,"Properties 'audioSource' and 'videoSource' cannot be set to false or null at the same time")),"undefined"!=typeof MediaStreamTrack&&r instanceof MediaStreamTrack&&(o.audioTrack=r),"undefined"!=typeof MediaStreamTrack&&s instanceof MediaStreamTrack&&(o.videoTrack=s),void 0===r&&(o.constraints.audio=!0),void 0===s&&(o.constraints.video={width:{ideal:640},height:{ideal:480}}),null!==s&&!1!==s){if(e.resolution){var c=e.resolution.toLowerCase().split("x"),l=Number(c[0]),u=Number(c[1]);o.constraints.video={width:{ideal:l},height:{ideal:u}}}e.frameRate&&(o.constraints.video.frameRate={ideal:e.frameRate})}t.configureDeviceIdOrScreensharing(o,e,n,i),n(o)}))},e.prototype.startWs=function(e){var t={heartbeat:5e3,sendCloseMessage:!1,ws:{uri:this.wsUri,onconnected:e,ondisconnect:this.disconnectCallback.bind(this),onreconnecting:this.reconnectingCallback.bind(this),onreconnected:this.reconnectedCallback.bind(this)},rpc:{requestTimeout:1e4,participantJoined:this.session.onParticipantJoined.bind(this.session),participantPublished:this.session.onParticipantPublished.bind(this.session),participantUnpublished:this.session.onParticipantUnpublished.bind(this.session),participantLeft:this.session.onParticipantLeft.bind(this.session),participantEvicted:this.session.onParticipantEvicted.bind(this.session),recordingStarted:this.session.onRecordingStarted.bind(this.session),recordingStopped:this.session.onRecordingStopped.bind(this.session),sendMessage:this.session.onNewMessage.bind(this.session),streamPropertyChanged:this.session.onStreamPropertyChanged.bind(this.session),filterEventDispatched:this.session.onFilterEventDispatched.bind(this.session),iceCandidate:this.session.recvIceCandidate.bind(this.session),mediaError:this.session.onMediaError.bind(this.session)}};this.jsonRpcClient=new h.clients.JsonRpcClient(t)},e.prototype.closeWs=function(){this.jsonRpcClient.close(4102,"Connection closed by client")},e.prototype.sendRequest=function(e,t,n){t&&t instanceof Function&&(n=t,t={}),m.debug('Sending request: {method:"'+e+'", params: '+JSON.stringify(t)+"}"),this.jsonRpcClient.send(e,t,n)},e.prototype.getWsUri=function(){return this.wsUri},e.prototype.getSecret=function(){return this.secret},e.prototype.getRecorder=function(){return this.recorder},e.prototype.generateAudioDeviceError=function(e,t){var n,i;switch("Error"===e.name&&(e.name=e.constructor.name),e.name.toLowerCase()){case"notfounderror":return n=a.OpenViduErrorName.INPUT_AUDIO_DEVICE_NOT_FOUND,i=e.toString(),new a.OpenViduError(n,i);case"notallowederror":return n=a.OpenViduErrorName.DEVICE_ACCESS_DENIED,i=e.toString(),new a.OpenViduError(n,i);case"overconstrainederror":return"deviceid"===e.constraint.toLowerCase()?(n=a.OpenViduErrorName.INPUT_AUDIO_DEVICE_NOT_FOUND,i="Audio input device with deviceId '"+t.audio.deviceId.exact+"' not found"):(n=a.OpenViduErrorName.PUBLISHER_PROPERTIES_ERROR,i="Audio input device doesn't support the value passed for constraint '"+e.constraint+"'"),new a.OpenViduError(n,i);case"notreadableerror":return n=a.OpenViduErrorName.DEVICE_ALREADY_IN_USE,i=e.toString(),new a.OpenViduError(n,i);default:return new a.OpenViduError(a.OpenViduErrorName.INPUT_AUDIO_DEVICE_GENERIC_ERROR,e.toString())}},e.prototype.addAlreadyProvidedTracks=function(e,t){return e.videoTrack&&t.addTrack(e.videoTrack),e.audioTrack&&t.addTrack(e.audioTrack),t},e.prototype.configureDeviceIdOrScreensharing=function(e,t,n,i){var o=this,r=t.audioSource,s=t.videoSource;if("string"==typeof r&&(e.constraints.audio={deviceId:{exact:r}}),"string"==typeof s)if(this.isScreenShare(s))if(this.checkScreenSharingCapabilities())if("Electron"===f.name){var c=s.substr(s.indexOf("screen:")+"screen:".length);e.constraints.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:c}},n(e)}else{if(this.advancedConfiguration.screenShareChromeExtension&&-1===f.name.indexOf("Firefox")&&!navigator.mediaDevices.getDisplayMedia)return void d.getScreenConstraints((function(t,r){if(t||r.mandatory&&"screen"===r.mandatory.chromeMediaSource){if("permission-denied"!==t&&"PermissionDeniedError"!==t){var s=o.advancedConfiguration.screenShareChromeExtension.split("/").pop().trim();return void d.getChromeExtensionStatus(s,(function(e){if("installed-disabled"===e){var t=new a.OpenViduError(a.OpenViduErrorName.SCREEN_EXTENSION_DISABLED,"You must enable the screen extension");m.error(t),i(t)}if("not-installed"===e){var n=new a.OpenViduError(a.OpenViduErrorName.SCREEN_EXTENSION_NOT_INSTALLED,o.advancedConfiguration.screenShareChromeExtension);m.error(n),i(n)}}))}var c=new a.OpenViduError(a.OpenViduErrorName.SCREEN_CAPTURE_DENIED,"You must allow access to one window of your desktop");m.error(c),i(c)}else e.constraints.video=r,n(e)}));if(!navigator.mediaDevices.getDisplayMedia){var l=-1!==f.name.indexOf("Firefox")?t.videoSource:void 0;return void u.getScreenId(l,(function(t,r,s){if(t)if("not-installed"===t){var c=new a.OpenViduError(a.OpenViduErrorName.SCREEN_EXTENSION_NOT_INSTALLED,o.advancedConfiguration.screenShareChromeExtension?o.advancedConfiguration.screenShareChromeExtension:"https://chrome.google.com/webstore/detail/openvidu-screensharing/lfcgfepafnobdloecchnfaclibenjold");m.error(c),i(c)}else"installed-disabled"===t?(c=new a.OpenViduError(a.OpenViduErrorName.SCREEN_EXTENSION_DISABLED,"You must enable the screen extension"),m.error(c),i(c)):"permission-denied"===t?(c=new a.OpenViduError(a.OpenViduErrorName.SCREEN_CAPTURE_DENIED,"You must allow access to one window of your desktop"),m.error(c),i(c)):(c=new a.OpenViduError(a.OpenViduErrorName.GENERIC_ERROR,"Unknown error when accessing screen share"),m.error(c),m.error(t),i(c));else e.constraints.video=s.video,n(e)}))}n(e)}else{var p=new a.OpenViduError(a.OpenViduErrorName.SCREEN_SHARING_NOT_SUPPORTED,"You can only screen share in desktop Chrome, Firefox, Opera, Safari (>=13.0) or Electron. Detected client: "+f.name);m.error(p),i(p)}else this.setVideoSource(e,s)},e.prototype.setVideoSource=function(e,t){e.constraints.video||(e.constraints.video={}),e.constraints.video.deviceId={exact:t}},e.prototype.disconnectCallback=function(){m.warn("Websocket connection lost"),this.isRoomAvailable()?this.session.onLostConnection("networkDisconnect"):alert("Connection error. Please reload page.")},e.prototype.reconnectingCallback=function(){m.warn("Websocket connection lost (reconnecting)"),this.isRoomAvailable()?this.session.emitEvent("reconnecting",[]):alert("Connection error. Please reload page.")},e.prototype.reconnectedCallback=function(){var e=this;m.warn("Websocket reconnected"),this.isRoomAvailable()?this.sendRequest("connect",{sessionId:this.session.connection.rpcSessionId},(function(t,n){t?(m.error(t),m.warn("Websocket was able to reconnect to OpenVidu Server, but your Connection was already destroyed due to timeout. You are no longer a participant of the Session and your media streams have been destroyed"),e.session.onLostConnection("networkDisconnect"),e.jsonRpcClient.close(4101,"Reconnection fault")):(e.jsonRpcClient.resetPing(),e.session.onRecoveredConnection())})):alert("Connection error. Please reload page.")},e.prototype.isRoomAvailable=function(){return void 0!==this.session&&this.session instanceof r.Session||(m.warn("Session instance not found"),!1)},e.prototype.isScreenShare=function(e){return"screen"===e||"window"===e||"Electron"===f.name&&e.startsWith("screen:")},e.prototype.isIPhoneOrIPad=function(e){var t="ontouchend"in document,n=/\b(\w*Macintosh\w*)\b/.test(e)&&t,i=/\b(\w*iPhone\w*)\b/.test(e)&&/\b(\w*Mobile\w*)\b/.test(e)&&t;return n||i},e.prototype.isIOSWithSafari=function(e){return/\b(\w*Apple\w*)\b/.test(navigator.vendor)&&/\b(\w*Safari\w*)\b/.test(e)&&!/\b(\w*CriOS\w*)\b/.test(e)&&!/\b(\w*FxiOS\w*)\b/.test(e)},e}();t.OpenVidu=v},PZzU:function(e,t,n){"use strict";t.__esModule=!0;var i=n("PPcv");t.OpenVidu=i.OpenVidu;var o=n("JTMn");t.Session=o.Session;var r=n("PEz1");t.Publisher=r.Publisher;var s=n("bk74");t.Subscriber=s.Subscriber;var a=n("P3vI");t.StreamManager=a.StreamManager;var c=n("DPKQ");t.Stream=c.Stream;var l=n("ryRr");t.Connection=l.Connection;var u=n("tInm");t.LocalRecorder=u.LocalRecorder;var d=n("74bm");t.Filter=d.Filter;var p=n("Yn0Z");t.LocalRecorderState=p.LocalRecorderState;var h=n("Tt94");t.OpenViduError=h.OpenViduError;var f=n("/dLB");t.VideoInsertMode=f.VideoInsertMode;var g=n("hzOQ");t.Event=g.Event;var m=n("8KVD");t.ConnectionEvent=m.ConnectionEvent;var v=n("e8ps");t.PublisherSpeakingEvent=v.PublisherSpeakingEvent;var b=n("rUL0");t.RecordingEvent=b.RecordingEvent;var _=n("ksJj");t.SessionDisconnectedEvent=_.SessionDisconnectedEvent;var y=n("suHS");t.SignalEvent=y.SignalEvent;var C=n("Te8r");t.StreamEvent=C.StreamEvent;var O=n("HxXY");t.StreamManagerEvent=O.StreamManagerEvent;var S=n("oIG1");t.VideoElementEvent=S.VideoElementEvent;var k=n("BwMD");t.StreamPropertyChangedEvent=k.StreamPropertyChangedEvent;var x=n("+ig+");t.FilterEvent=x.FilterEvent;var M=n("Dztv");t.EventDispatcher=M.EventDispatcher},QSjB:function(e,t,n){"use strict";t.__esModule=!0,t.start=t.run=t.TOKENS=t.State=void 0;var i=n("FlKs"),o=n("vqGb"),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(o),s=n("dlaP"),a=function(e){return new i.TokenState(e)},c=a(),l=a(),u=a(),d=a(),p=a(),h=a(),f=a(),g=a(o.URL),m=a(),v=a(o.URL),b=a(o.URL),_=a(),y=a(),C=a(),O=a(),S=a(),k=a(o.URL),x=a(o.URL),M=a(o.URL),w=a(o.URL),E=a(),P=a(),I=a(),R=a(),T=a(),A=a(),D=a(o.EMAIL),L=a(),j=a(o.EMAIL),N=a(o.MAILTOEMAIL),V=a(),U=a(),B=a(),W=a(),F=a(o.NL);c.on(s.NL,F).on(s.PROTOCOL,l).on(s.MAILTO,u).on(s.SLASH,d),l.on(s.SLASH,d),d.on(s.SLASH,p),c.on(s.TLD,h).on(s.DOMAIN,h).on(s.LOCALHOST,g).on(s.NUM,h),p.on(s.TLD,b).on(s.DOMAIN,b).on(s.NUM,b).on(s.LOCALHOST,b),h.on(s.DOT,f),T.on(s.DOT,A),f.on(s.TLD,g).on(s.DOMAIN,h).on(s.NUM,h).on(s.LOCALHOST,h),A.on(s.TLD,D).on(s.DOMAIN,T).on(s.NUM,T).on(s.LOCALHOST,T),g.on(s.DOT,f),D.on(s.DOT,A),g.on(s.COLON,m).on(s.SLASH,b),m.on(s.NUM,v),v.on(s.SLASH,b),D.on(s.COLON,L),L.on(s.NUM,j);var z=[s.DOMAIN,s.AT,s.LOCALHOST,s.NUM,s.PLUS,s.POUND,s.PROTOCOL,s.SLASH,s.TLD,s.UNDERSCORE,s.SYM,s.AMPERSAND],q=[s.COLON,s.DOT,s.QUERY,s.PUNCTUATION,s.CLOSEBRACE,s.CLOSEBRACKET,s.CLOSEANGLEBRACKET,s.CLOSEPAREN,s.OPENBRACE,s.OPENBRACKET,s.OPENANGLEBRACKET,s.OPENPAREN];b.on(s.OPENBRACE,y).on(s.OPENBRACKET,C).on(s.OPENANGLEBRACKET,O).on(s.OPENPAREN,S),_.on(s.OPENBRACE,y).on(s.OPENBRACKET,C).on(s.OPENANGLEBRACKET,O).on(s.OPENPAREN,S),y.on(s.CLOSEBRACE,b),C.on(s.CLOSEBRACKET,b),O.on(s.CLOSEANGLEBRACKET,b),S.on(s.CLOSEPAREN,b),k.on(s.CLOSEBRACE,b),x.on(s.CLOSEBRACKET,b),M.on(s.CLOSEANGLEBRACKET,b),w.on(s.CLOSEPAREN,b),E.on(s.CLOSEBRACE,b),P.on(s.CLOSEBRACKET,b),I.on(s.CLOSEANGLEBRACKET,b),R.on(s.CLOSEPAREN,b),y.on(z,k),C.on(z,x),O.on(z,M),S.on(z,w),y.on(q,E),C.on(q,P),O.on(q,I),S.on(q,R),k.on(z,k),x.on(z,x),M.on(z,M),w.on(z,w),k.on(q,k),x.on(q,x),M.on(q,M),w.on(q,w),E.on(z,k),P.on(z,x),I.on(z,M),R.on(z,w),E.on(q,E),P.on(q,P),I.on(q,I),R.on(q,R),b.on(z,b),_.on(z,b),b.on(q,_),_.on(q,_),u.on(s.TLD,N).on(s.DOMAIN,N).on(s.NUM,N).on(s.LOCALHOST,N),N.on(z,N).on(q,V),V.on(z,N).on(q,V);var G=[s.DOMAIN,s.NUM,s.PLUS,s.POUND,s.QUERY,s.UNDERSCORE,s.SYM,s.AMPERSAND,s.TLD];h.on(G,U).on(s.AT,B),g.on(G,U).on(s.AT,B),f.on(G,U),U.on(G,U).on(s.AT,B).on(s.DOT,W),W.on(G,U),B.on(s.TLD,T).on(s.DOMAIN,T).on(s.LOCALHOST,D),t.State=i.TokenState,t.TOKENS=r,t.run=function(e){for(var t=e.length,n=0,i=[],r=[];n<t;){for(var s=c,a=null,l=null,u=0,d=null,p=-1;n<t&&!(a=s.next(e[n]));)r.push(e[n++]);for(;n<t&&(l=a||s.next(e[n]));)a=null,(s=l).accepts()?(p=0,d=s):p>=0&&p++,n++,u++;if(p<0)for(var h=n-u;h<n;h++)r.push(e[h]);else{r.length>0&&(i.push(new o.TEXT(r)),r=[]),n-=p,u-=p;var f=d.emit();i.push(new f(e.slice(n-u,n)))}}return r.length>0&&i.push(new o.TEXT(r)),i},t.start=c},RvMX:function(e,t,n){"use strict";t.__esModule=!0,t.createTokenClass=function(){return function(e){e&&(this.v=e)}}},SYuc:function(e,t,n){var i=n("EDod");t.JsonRpcClient=i},TDwH:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){var t=e.scanner.TOKENS,n=e.parser.start;function i(e){this.v=e}e.inherits(e.parser.TOKENS.Base,i,{type:"hashtag",isLink:!0});var o=n.jump(t.POUND),r=new e.parser.State(i);o.on(t.DOMAIN,r),o.on(t.TLD,r),o.on(t.LOCALHOST,r)}},TIDz:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return h}));var i=n("ofXK"),o=n("fXoL"),r=n("dP7y"),s=n("joaK"),a=n.n(s),c=n("bGVd"),l=n.n(c);n("mgp7");var u=function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"linkify",value:function(e,t){return e.linkify(t)}},{key:"find",value:function(e){return Object(r.find)(e)}},{key:"test",value:function(e){return"string"==typeof e?Object(r.test)(e):Object(r.test).apply(void 0,_toConsumableArray(e))}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.Mb({token:e,factory:e.\u0275fac}),e}(),d=new o.r("NgxLinkifyjsConfig"),p={enableHash:!0,enableMention:!0},h=function(){var e=function(){function e(t){_classCallCheck(this,e),this.config=t,t.enableHash&&a()(r),t.enableMention&&l()(r)}return _createClass(e,null,[{key:"forRoot",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p;return{ngModule:e,providers:[u,{provide:d,useValue:t}]}}}]),e}();return e.\u0275mod=o.Ob({type:e}),e.\u0275inj=o.Nb({factory:function(t){return new(t||e)(o.ac(d))},imports:[[i.c]]}),e}()},Te8r:function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0;var r=n("hzOQ"),s=n("PEz1"),a=n("JTMn"),c=n("9m68").OpenViduLogger.getInstance(),l=function(e){function t(t,n,i,o,r){var s=e.call(this,t,n,i)||this;return s.stream=o,s.reason=r,s}return o(t,e),t.prototype.callDefaultBehavior=function(){if("streamDestroyed"===this.type){if(this.target instanceof a.Session)c.info("Calling default behavior upon '"+this.type+"' event dispatched by 'Session'"),this.stream.disposeWebRtcPeer();else if(this.target instanceof s.Publisher){c.info("Calling default behavior upon '"+this.type+"' event dispatched by 'Publisher'"),clearInterval(this.target.screenShareResizeInterval),this.stream.isLocalStreamReadyToPublish=!1;for(var e=this.target.openvidu.publishers,t=0;t<e.length;t++)if(e[t]===this.target){e.splice(t,1);break}}this.stream.disposeMediaStream(),this.stream.streamManager&&this.stream.streamManager.removeAllVideos(),delete this.stream.session.remoteStreamsCreated[this.stream.streamId];var n=this.stream.session.remoteConnections[this.stream.connection.connectionId];if(n&&n.options){var i=n.options.streams;for(t=i.length-1;t>=0;--t)i[t].id===this.stream.streamId&&i.splice(t,1)}}},t}(r.Event);t.StreamEvent=l},Tt94:function(e,t,n){"use strict";var i;t.__esModule=!0,(i=t.OpenViduErrorName||(t.OpenViduErrorName={})).BROWSER_NOT_SUPPORTED="BROWSER_NOT_SUPPORTED",i.DEVICE_ACCESS_DENIED="DEVICE_ACCESS_DENIED",i.DEVICE_ALREADY_IN_USE="DEVICE_ALREADY_IN_USE",i.SCREEN_CAPTURE_DENIED="SCREEN_CAPTURE_DENIED",i.SCREEN_SHARING_NOT_SUPPORTED="SCREEN_SHARING_NOT_SUPPORTED",i.SCREEN_EXTENSION_NOT_INSTALLED="SCREEN_EXTENSION_NOT_INSTALLED",i.SCREEN_EXTENSION_DISABLED="SCREEN_EXTENSION_DISABLED",i.INPUT_VIDEO_DEVICE_NOT_FOUND="INPUT_VIDEO_DEVICE_NOT_FOUND",i.INPUT_AUDIO_DEVICE_NOT_FOUND="INPUT_AUDIO_DEVICE_NOT_FOUND",i.INPUT_AUDIO_DEVICE_GENERIC_ERROR="INPUT_AUDIO_DEVICE_GENERIC_ERROR",i.NO_INPUT_SOURCE_SET="NO_INPUT_SOURCE_SET",i.PUBLISHER_PROPERTIES_ERROR="PUBLISHER_PROPERTIES_ERROR",i.OPENVIDU_PERMISSION_DENIED="OPENVIDU_PERMISSION_DENIED",i.OPENVIDU_NOT_CONNECTED="OPENVIDU_NOT_CONNECTED",i.GENERIC_ERROR="GENERIC_ERROR",t.OpenViduError=function(e,t){this.name=e,this.message=t}},XiUz:function(e,t,n){"use strict";n.d(t,"g",(function(){return he})),n.d(t,"a",(function(){return L})),n.d(t,"f",(function(){return Z})),n.d(t,"b",(function(){return K})),n.d(t,"d",(function(){return m})),n.d(t,"c",(function(){return ie})),n.d(t,"e",(function(){return S}));var i=n("fXoL"),o=n("pD6V"),r=n("cH1L"),s=n("XNiG"),a=n("1G5W"),c=["row","column","row-reverse","column-reverse"];function l(e){var t=_slicedToArray((e=e?e.toLowerCase():"").split(" "),3),n=t[0],i=t[1],o=t[2];return c.find((function(e){return e===n}))||(n=c[0]),"inline"===i&&(i="inline"!==o?o:"",o="inline"),[n,d(i),!!o]}function u(e){return _slicedToArray(l(e),1)[0].indexOf("row")>-1}function d(e){if(e)switch(e.toLowerCase()){case"reverse":case"wrap-reverse":case"reverse-wrap":e="wrap-reverse";break;case"no":case"none":case"nowrap":e="nowrap";break;default:e="wrap"}return e}var p=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"buildStyles",value:function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{display:n?"inline-flex":"flex","box-sizing":"border-box","flex-direction":e,"flex-wrap":t||null}}((t=_slicedToArray(l(e),3))[0],t[1],t[2]);var t}}]),n}(o.h);return e.\u0275fac=function(t){return h(t||e)},e.\u0275prov=Object(i.Mb)({factory:function(){return new e},token:e,providedIn:"root"}),e}(),h=i.Yb(p),f=["fxLayout","fxLayout.xs","fxLayout.sm","fxLayout.md","fxLayout.lg","fxLayout.xl","fxLayout.lt-sm","fxLayout.lt-md","fxLayout.lt-lg","fxLayout.lt-xl","fxLayout.gt-xs","fxLayout.gt-sm","fxLayout.gt-md","fxLayout.gt-lg"],g=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,o,r){var s;return _classCallCheck(this,n),(s=t.call(this,e,o,i,r)).DIRECTIVE_KEY="layout",s.styleCache=b,s.init(),s}return n}(o.b);return e.\u0275fac=function(t){return new(t||e)(i.Qb(i.l),i.Qb(o.i),i.Qb(p),i.Qb(o.f))},e.\u0275dir=i.Lb({type:e,features:[i.zb]}),e}(),m=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.apply(this,arguments)).inputs=f,e}return n}(g);return e.\u0275fac=function(t){return v(t||e)},e.\u0275dir=i.Lb({type:e,selectors:[["","fxLayout",""],["","fxLayout.xs",""],["","fxLayout.sm",""],["","fxLayout.md",""],["","fxLayout.lg",""],["","fxLayout.xl",""],["","fxLayout.lt-sm",""],["","fxLayout.lt-md",""],["","fxLayout.lt-lg",""],["","fxLayout.lt-xl",""],["","fxLayout.gt-xs",""],["","fxLayout.gt-sm",""],["","fxLayout.gt-md",""],["","fxLayout.gt-lg",""]],inputs:{fxLayout:"fxLayout","fxLayout.xs":"fxLayout.xs","fxLayout.sm":"fxLayout.sm","fxLayout.md":"fxLayout.md","fxLayout.lg":"fxLayout.lg","fxLayout.xl":"fxLayout.xl","fxLayout.lt-sm":"fxLayout.lt-sm","fxLayout.lt-md":"fxLayout.lt-md","fxLayout.lt-lg":"fxLayout.lt-lg","fxLayout.lt-xl":"fxLayout.lt-xl","fxLayout.gt-xs":"fxLayout.gt-xs","fxLayout.gt-sm":"fxLayout.gt-sm","fxLayout.gt-md":"fxLayout.gt-md","fxLayout.gt-lg":"fxLayout.gt-lg"},features:[i.zb]}),e}(),v=i.Yb(m),b=new Map,_={"margin-left":null,"margin-right":null,"margin-top":null,"margin-bottom":null},y=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;return _classCallCheck(this,n),(i=t.call(this))._styler=e,i}return _createClass(n,[{key:"buildStyles",value:function(e,t){return e.endsWith(P)?(n=e=e.slice(0,e.indexOf(P)),i=t.directionality,o="0px",r="0px","rtl"===i?r="-"+n:o="-"+n,{margin:"0px ".concat(o," ").concat("-"+n," ").concat(r)}):{};var n,i,o,r}},{key:"sideEffect",value:function(e,t,n){var i,o,r,s,a=n.items;if(e.endsWith(P)){var c=(i=e=e.slice(0,e.indexOf(P)),o=n.directionality,r="0px",s="0px","rtl"===o?s=i:r=i,{padding:"0px ".concat(r," ").concat(i," ").concat(s)});this._styler.applyStyleToElements(c,n.items)}else{var l=a.pop(),u=function(e,t){var n=I(t.directionality,t.layout),i=Object.assign({},_);return i[n]=e,i}(e,n);this._styler.applyStyleToElements(u,a),this._styler.applyStyleToElements(_,[l])}}}]),n}(o.h);return e.\u0275fac=function(t){return new(t||e)(i.ac(o.i))},e.\u0275prov=Object(i.Mb)({factory:function(){return new e(Object(i.ac)(o.i))},token:e,providedIn:"root"}),e}(),C=["fxLayoutGap","fxLayoutGap.xs","fxLayoutGap.sm","fxLayoutGap.md","fxLayoutGap.lg","fxLayoutGap.xl","fxLayoutGap.lt-sm","fxLayoutGap.lt-md","fxLayoutGap.lt-lg","fxLayoutGap.lt-xl","fxLayoutGap.gt-xs","fxLayoutGap.gt-sm","fxLayoutGap.gt-md","fxLayoutGap.gt-lg"],O=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,o,r,c,l){var u;_classCallCheck(this,n),(u=t.call(this,e,c,r,l)).zone=i,u.directionality=o,u.styleUtils=r,u.layout="row",u.DIRECTIVE_KEY="layout-gap",u.observerSubject=new s.a;var d=[u.directionality.change,u.observerSubject.asObservable()];return u.init(d),u.marshal.trackValue(u.nativeElement,"layout").pipe(Object(a.a)(u.destroySubject)).subscribe(u.onLayoutChange.bind(_assertThisInitialized(u))),u}return _createClass(n,[{key:"ngAfterContentInit",value:function(){this.buildChildObservable(),this.triggerUpdate()}},{key:"ngOnDestroy",value:function(){_get(_getPrototypeOf(n.prototype),"ngOnDestroy",this).call(this),this.observer&&this.observer.disconnect()}},{key:"onLayoutChange",value:function(e){var t=this,n=e.value.split(" ");this.layout=n[0],c.find((function(e){return e===t.layout}))||(this.layout="row"),this.triggerUpdate()}},{key:"updateWithValue",value:function(e){var t=this,n=this.childrenNodes.filter((function(e){return 1===e.nodeType&&t.willDisplay(e)})).sort((function(e,n){var i=+t.styler.lookupStyle(e,"order"),o=+t.styler.lookupStyle(n,"order");return isNaN(i)||isNaN(o)||i===o?0:i>o?1:-1}));if(n.length>0){var i=this.directionality.value,o=this.layout;"row"===o&&"rtl"===i?this.styleCache=x:"row"===o&&"rtl"!==i?this.styleCache=w:"column"===o&&"rtl"===i?this.styleCache=M:"column"===o&&"rtl"!==i&&(this.styleCache=E),this.addStyles(e,{directionality:i,items:n,layout:o})}}},{key:"clearStyles",value:function(){var e=Object.keys(this.mru).length>0,t=e?"padding":I(this.directionality.value,this.layout);e&&_get(_getPrototypeOf(n.prototype),"clearStyles",this).call(this),this.styleUtils.applyStyleToElements(_defineProperty({},t,""),this.childrenNodes)}},{key:"willDisplay",value:function(e){var t=this.marshal.getValue(e,"show-hide");return!0===t||void 0===t&&"none"!==this.styleUtils.lookupStyle(e,"display")}},{key:"buildChildObservable",value:function(){var e=this;this.zone.runOutsideAngular((function(){"undefined"!=typeof MutationObserver&&(e.observer=new MutationObserver((function(t){t.some((function(e){return e.addedNodes&&e.addedNodes.length>0||e.removedNodes&&e.removedNodes.length>0}))&&e.observerSubject.next()})),e.observer.observe(e.nativeElement,{childList:!0}))}))}},{key:"childrenNodes",get:function(){for(var e=this.nativeElement.children,t=[],n=e.length;n--;)t[n]=e[n];return t}}]),n}(o.b);return e.\u0275fac=function(t){return new(t||e)(i.Qb(i.l),i.Qb(i.A),i.Qb(r.b),i.Qb(o.i),i.Qb(y),i.Qb(o.f))},e.\u0275dir=i.Lb({type:e,features:[i.zb]}),e}(),S=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.apply(this,arguments)).inputs=C,e}return n}(O);return e.\u0275fac=function(t){return k(t||e)},e.\u0275dir=i.Lb({type:e,selectors:[["","fxLayoutGap",""],["","fxLayoutGap.xs",""],["","fxLayoutGap.sm",""],["","fxLayoutGap.md",""],["","fxLayoutGap.lg",""],["","fxLayoutGap.xl",""],["","fxLayoutGap.lt-sm",""],["","fxLayoutGap.lt-md",""],["","fxLayoutGap.lt-lg",""],["","fxLayoutGap.lt-xl",""],["","fxLayoutGap.gt-xs",""],["","fxLayoutGap.gt-sm",""],["","fxLayoutGap.gt-md",""],["","fxLayoutGap.gt-lg",""]],inputs:{fxLayoutGap:"fxLayoutGap","fxLayoutGap.xs":"fxLayoutGap.xs","fxLayoutGap.sm":"fxLayoutGap.sm","fxLayoutGap.md":"fxLayoutGap.md","fxLayoutGap.lg":"fxLayoutGap.lg","fxLayoutGap.xl":"fxLayoutGap.xl","fxLayoutGap.lt-sm":"fxLayoutGap.lt-sm","fxLayoutGap.lt-md":"fxLayoutGap.lt-md","fxLayoutGap.lt-lg":"fxLayoutGap.lt-lg","fxLayoutGap.lt-xl":"fxLayoutGap.lt-xl","fxLayoutGap.gt-xs":"fxLayoutGap.gt-xs","fxLayoutGap.gt-sm":"fxLayoutGap.gt-sm","fxLayoutGap.gt-md":"fxLayoutGap.gt-md","fxLayoutGap.gt-lg":"fxLayoutGap.gt-lg"},features:[i.zb]}),e}(),k=i.Yb(S),x=new Map,M=new Map,w=new Map,E=new Map,P=" grid";function I(e,t){switch(t){case"column":return"margin-bottom";case"column-reverse":return"margin-top";case"row":return"rtl"===e?"margin-left":"margin-right";case"row-reverse":return"rtl"===e?"margin-right":"margin-left";default:return"rtl"===e?"margin-left":"margin-right"}}function R(e){if(null==e)throw TypeError("Cannot convert undefined or null to object");for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(var o=0,r=n;o<r.length;o++){var s=r[o];if(null!=s)for(var a in s)s.hasOwnProperty(a)&&(e[a]=s[a])}return e}var T=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;return _classCallCheck(this,n),(i=t.call(this)).layoutConfig=e,i}return _createClass(n,[{key:"buildStyles",value:function(e,t){var n=_toArray(e.split(" ")),i=n[0],o=n[1],r=n.slice(2).join(" "),s=t.direction.indexOf("column")>-1?"column":"row",a=u(s)?"max-width":"max-height",c=u(s)?"min-width":"min-height",l=String(r).indexOf("calc")>-1,d=l||"auto"===r,p=String(r).indexOf("%")>-1&&!l,h=String(r).indexOf("px")>-1||String(r).indexOf("rem")>-1||String(r).indexOf("em")>-1||String(r).indexOf("vw")>-1||String(r).indexOf("vh")>-1,f=l||h;o="0"==o?0:o;var g=!(i="0"==i?0:i)&&!o,m={},v={"max-width":null,"max-height":null,"min-width":null,"min-height":null};switch(r||""){case"":var b=!1!==this.layoutConfig.useColumnBasisZero;r="row"===s?"0%":b?"0.000000001px":"auto";break;case"initial":case"nogrow":i=0,r="auto";break;case"grow":r="100%";break;case"noshrink":o=0,r="auto";break;case"auto":break;case"none":i=0,o=0,r="auto";break;default:f||p||isNaN(r)||(r+="%"),"0%"===r&&(f=!0),"0px"===r&&(r="0%"),m=R(v,l?{"flex-grow":i,"flex-shrink":o,"flex-basis":f?r:"100%"}:{flex:"".concat(i," ").concat(o," ").concat(f?r:"100%")})}return m.flex||m["flex-grow"]||(m=R(v,l?{"flex-grow":i,"flex-shrink":o,"flex-basis":r}:{flex:"".concat(i," ").concat(o," ").concat(r)})),"0%"!==r&&"0px"!==r&&"0.000000001px"!==r&&"auto"!==r&&(m[c]=g||f&&i?r:null,m[a]=g||!d&&o?r:null),m[c]||m[a]?t.hasWrap&&(m[l?"flex-basis":"flex"]=m[a]?l?m[a]:"".concat(i," ").concat(o," ").concat(m[a]):l?m[c]:"".concat(i," ").concat(o," ").concat(m[c])):m=R(v,l?{"flex-grow":i,"flex-shrink":o,"flex-basis":r}:{flex:"".concat(i," ").concat(o," ").concat(r)}),R(m,{"box-sizing":"border-box"})}}]),n}(o.h);return e.\u0275fac=function(t){return new(t||e)(i.ac(o.e))},e.\u0275prov=Object(i.Mb)({factory:function(){return new e(Object(i.ac)(o.e))},token:e,providedIn:"root"}),e}(),A=["fxFlex","fxFlex.xs","fxFlex.sm","fxFlex.md","fxFlex.lg","fxFlex.xl","fxFlex.lt-sm","fxFlex.lt-md","fxFlex.lt-lg","fxFlex.lt-xl","fxFlex.gt-xs","fxFlex.gt-sm","fxFlex.gt-md","fxFlex.gt-lg"],D=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,o,r,s){var c;return _classCallCheck(this,n),(c=t.call(this,e,r,i,s)).layoutConfig=o,c.DIRECTIVE_KEY="flex",c.direction="",c.wrap=!1,c.flexGrow="1",c.flexShrink="1",c.init(),c.parentElement&&(c.marshal.trackValue(c.parentElement,"layout").pipe(Object(a.a)(c.destroySubject)).subscribe(c.onLayoutChange.bind(_assertThisInitialized(c))),c.marshal.trackValue(c.nativeElement,"layout-align").pipe(Object(a.a)(c.destroySubject)).subscribe(c.triggerReflow.bind(_assertThisInitialized(c)))),c}return _createClass(n,[{key:"onLayoutChange",value:function(e){var t=e.value.split(" ");this.direction=t[0],this.wrap=void 0!==t[1]&&"wrap"===t[1],this.triggerUpdate()}},{key:"updateWithValue",value:function(e){this.direction||(this.direction=this.getFlexFlowDirection(this.parentElement,!1!==this.layoutConfig.addFlexToParent));var t=this.direction,n=t.startsWith("row"),i=this.wrap;n&&i?this.styleCache=U:n&&!i?this.styleCache=N:!n&&i?this.styleCache=B:n||i||(this.styleCache=V);var r=String(e).replace(";",""),s=Object(o.j)(r,this.flexGrow,this.flexShrink);this.addStyles(s.join(" "),{direction:t,hasWrap:i})}},{key:"triggerReflow",value:function(){var e=this.activatedValue;if(void 0!==e){var t=Object(o.j)(e+"",this.flexGrow,this.flexShrink);this.marshal.updateElement(this.nativeElement,this.DIRECTIVE_KEY,t.join(" "))}}},{key:"shrink",get:function(){return this.flexShrink},set:function(e){this.flexShrink=e||"1",this.triggerReflow()}},{key:"grow",get:function(){return this.flexGrow},set:function(e){this.flexGrow=e||"1",this.triggerReflow()}}]),n}(o.b);return e.\u0275fac=function(t){return new(t||e)(i.Qb(i.l),i.Qb(o.i),i.Qb(o.e),i.Qb(T),i.Qb(o.f))},e.\u0275dir=i.Lb({type:e,inputs:{shrink:["fxShrink","shrink"],grow:["fxGrow","grow"]},features:[i.zb]}),e}(),L=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.apply(this,arguments)).inputs=A,e}return n}(D);return e.\u0275fac=function(t){return j(t||e)},e.\u0275dir=i.Lb({type:e,selectors:[["","fxFlex",""],["","fxFlex.xs",""],["","fxFlex.sm",""],["","fxFlex.md",""],["","fxFlex.lg",""],["","fxFlex.xl",""],["","fxFlex.lt-sm",""],["","fxFlex.lt-md",""],["","fxFlex.lt-lg",""],["","fxFlex.lt-xl",""],["","fxFlex.gt-xs",""],["","fxFlex.gt-sm",""],["","fxFlex.gt-md",""],["","fxFlex.gt-lg",""]],inputs:{fxFlex:"fxFlex","fxFlex.xs":"fxFlex.xs","fxFlex.sm":"fxFlex.sm","fxFlex.md":"fxFlex.md","fxFlex.lg":"fxFlex.lg","fxFlex.xl":"fxFlex.xl","fxFlex.lt-sm":"fxFlex.lt-sm","fxFlex.lt-md":"fxFlex.lt-md","fxFlex.lt-lg":"fxFlex.lt-lg","fxFlex.lt-xl":"fxFlex.lt-xl","fxFlex.gt-xs":"fxFlex.gt-xs","fxFlex.gt-sm":"fxFlex.gt-sm","fxFlex.gt-md":"fxFlex.gt-md","fxFlex.gt-lg":"fxFlex.gt-lg"},features:[i.zb]}),e}(),j=i.Yb(L),N=new Map,V=new Map,U=new Map,B=new Map,W=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"buildStyles",value:function(e){return{order:e&&parseInt(e,10)||""}}}]),n}(o.h);return e.\u0275fac=function(t){return F(t||e)},e.\u0275prov=Object(i.Mb)({factory:function(){return new e},token:e,providedIn:"root"}),e}(),F=i.Yb(W),z=["fxFlexOrder","fxFlexOrder.xs","fxFlexOrder.sm","fxFlexOrder.md","fxFlexOrder.lg","fxFlexOrder.xl","fxFlexOrder.lt-sm","fxFlexOrder.lt-md","fxFlexOrder.lt-lg","fxFlexOrder.lt-xl","fxFlexOrder.gt-xs","fxFlexOrder.gt-sm","fxFlexOrder.gt-md","fxFlexOrder.gt-lg"],q=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,o,r){var s;return _classCallCheck(this,n),(s=t.call(this,e,o,i,r)).DIRECTIVE_KEY="flex-order",s.styleCache=G,s.init(),s}return n}(o.b);return e.\u0275fac=function(t){return new(t||e)(i.Qb(i.l),i.Qb(o.i),i.Qb(W),i.Qb(o.f))},e.\u0275dir=i.Lb({type:e,features:[i.zb]}),e}(),G=new Map,K=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.apply(this,arguments)).inputs=z,e}return n}(q);return e.\u0275fac=function(t){return Q(t||e)},e.\u0275dir=i.Lb({type:e,selectors:[["","fxFlexOrder",""],["","fxFlexOrder.xs",""],["","fxFlexOrder.sm",""],["","fxFlexOrder.md",""],["","fxFlexOrder.lg",""],["","fxFlexOrder.xl",""],["","fxFlexOrder.lt-sm",""],["","fxFlexOrder.lt-md",""],["","fxFlexOrder.lt-lg",""],["","fxFlexOrder.lt-xl",""],["","fxFlexOrder.gt-xs",""],["","fxFlexOrder.gt-sm",""],["","fxFlexOrder.gt-md",""],["","fxFlexOrder.gt-lg",""]],inputs:{fxFlexOrder:"fxFlexOrder","fxFlexOrder.xs":"fxFlexOrder.xs","fxFlexOrder.sm":"fxFlexOrder.sm","fxFlexOrder.md":"fxFlexOrder.md","fxFlexOrder.lg":"fxFlexOrder.lg","fxFlexOrder.xl":"fxFlexOrder.xl","fxFlexOrder.lt-sm":"fxFlexOrder.lt-sm","fxFlexOrder.lt-md":"fxFlexOrder.lt-md","fxFlexOrder.lt-lg":"fxFlexOrder.lt-lg","fxFlexOrder.lt-xl":"fxFlexOrder.lt-xl","fxFlexOrder.gt-xs":"fxFlexOrder.gt-xs","fxFlexOrder.gt-sm":"fxFlexOrder.gt-sm","fxFlexOrder.gt-md":"fxFlexOrder.gt-md","fxFlexOrder.gt-lg":"fxFlexOrder.gt-lg"},features:[i.zb]}),e}(),Q=i.Yb(K),Y={margin:0,width:"100%",height:"100%","min-width":"100%","min-height":"100%"},H=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"buildStyles",value:function(e){return Y}}]),n}(o.h);return e.\u0275fac=function(t){return J(t||e)},e.\u0275prov=Object(i.Mb)({factory:function(){return new e},token:e,providedIn:"root"}),e}(),J=i.Yb(H),Z=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,o,r){var s;return _classCallCheck(this,n),(s=t.call(this,e,o,i,r)).styleCache=X,s.addStyles(""),s}return n}(o.b);return e.\u0275fac=function(t){return new(t||e)(i.Qb(i.l),i.Qb(o.i),i.Qb(H),i.Qb(o.f))},e.\u0275dir=i.Lb({type:e,selectors:[["","fxFill",""],["","fxFlexFill",""]],features:[i.zb]}),e}(),X=new Map,$=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"buildStyles",value:function(e,t){var n={},i=_slicedToArray(e.split(" "),2),o=i[0],r=i[1];switch(o){case"center":n["justify-content"]="center";break;case"space-around":n["justify-content"]="space-around";break;case"space-between":n["justify-content"]="space-between";break;case"space-evenly":n["justify-content"]="space-evenly";break;case"end":case"flex-end":n["justify-content"]="flex-end";break;case"start":case"flex-start":default:n["justify-content"]="flex-start"}switch(r){case"start":case"flex-start":n["align-items"]=n["align-content"]="flex-start";break;case"center":n["align-items"]=n["align-content"]="center";break;case"end":case"flex-end":n["align-items"]=n["align-content"]="flex-end";break;case"space-between":n["align-content"]="space-between",n["align-items"]="stretch";break;case"space-around":n["align-content"]="space-around",n["align-items"]="stretch";break;case"baseline":n["align-content"]="stretch",n["align-items"]="baseline";break;case"stretch":default:n["align-items"]=n["align-content"]="stretch"}return R(n,{display:t.inline?"inline-flex":"flex","flex-direction":t.layout,"box-sizing":"border-box","max-width":"stretch"===r?u(t.layout)?null:"100%":null,"max-height":"stretch"===r&&u(t.layout)?"100%":null})}}]),n}(o.h);return e.\u0275fac=function(t){return ee(t||e)},e.\u0275prov=Object(i.Mb)({factory:function(){return new e},token:e,providedIn:"root"}),e}(),ee=i.Yb($),te=["fxLayoutAlign","fxLayoutAlign.xs","fxLayoutAlign.sm","fxLayoutAlign.md","fxLayoutAlign.lg","fxLayoutAlign.xl","fxLayoutAlign.lt-sm","fxLayoutAlign.lt-md","fxLayoutAlign.lt-lg","fxLayoutAlign.lt-xl","fxLayoutAlign.gt-xs","fxLayoutAlign.gt-sm","fxLayoutAlign.gt-md","fxLayoutAlign.gt-lg"],ne=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,o,r){var s;return _classCallCheck(this,n),(s=t.call(this,e,o,i,r)).DIRECTIVE_KEY="layout-align",s.layout="row",s.inline=!1,s.init(),s.marshal.trackValue(s.nativeElement,"layout").pipe(Object(a.a)(s.destroySubject)).subscribe(s.onLayoutChange.bind(_assertThisInitialized(s))),s}return _createClass(n,[{key:"updateWithValue",value:function(e){var t=this.layout||"row",n=this.inline;"row"===t&&n?this.styleCache=le:"row"!==t||n?"row-reverse"===t&&n?this.styleCache=de:"row-reverse"!==t||n?"column"===t&&n?this.styleCache=ue:"column"!==t||n?"column-reverse"===t&&n?this.styleCache=pe:"column-reverse"!==t||n||(this.styleCache=ce):this.styleCache=se:this.styleCache=ae:this.styleCache=re,this.addStyles(e,{layout:t,inline:n})}},{key:"onLayoutChange",value:function(e){var t=this,n=e.value.split(" ");this.layout=n[0],this.inline=e.value.includes("inline"),c.find((function(e){return e===t.layout}))||(this.layout="row"),this.triggerUpdate()}}]),n}(o.b);return e.\u0275fac=function(t){return new(t||e)(i.Qb(i.l),i.Qb(o.i),i.Qb($),i.Qb(o.f))},e.\u0275dir=i.Lb({type:e,features:[i.zb]}),e}(),ie=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.apply(this,arguments)).inputs=te,e}return n}(ne);return e.\u0275fac=function(t){return oe(t||e)},e.\u0275dir=i.Lb({type:e,selectors:[["","fxLayoutAlign",""],["","fxLayoutAlign.xs",""],["","fxLayoutAlign.sm",""],["","fxLayoutAlign.md",""],["","fxLayoutAlign.lg",""],["","fxLayoutAlign.xl",""],["","fxLayoutAlign.lt-sm",""],["","fxLayoutAlign.lt-md",""],["","fxLayoutAlign.lt-lg",""],["","fxLayoutAlign.lt-xl",""],["","fxLayoutAlign.gt-xs",""],["","fxLayoutAlign.gt-sm",""],["","fxLayoutAlign.gt-md",""],["","fxLayoutAlign.gt-lg",""]],inputs:{fxLayoutAlign:"fxLayoutAlign","fxLayoutAlign.xs":"fxLayoutAlign.xs","fxLayoutAlign.sm":"fxLayoutAlign.sm","fxLayoutAlign.md":"fxLayoutAlign.md","fxLayoutAlign.lg":"fxLayoutAlign.lg","fxLayoutAlign.xl":"fxLayoutAlign.xl","fxLayoutAlign.lt-sm":"fxLayoutAlign.lt-sm","fxLayoutAlign.lt-md":"fxLayoutAlign.lt-md","fxLayoutAlign.lt-lg":"fxLayoutAlign.lt-lg","fxLayoutAlign.lt-xl":"fxLayoutAlign.lt-xl","fxLayoutAlign.gt-xs":"fxLayoutAlign.gt-xs","fxLayoutAlign.gt-sm":"fxLayoutAlign.gt-sm","fxLayoutAlign.gt-md":"fxLayoutAlign.gt-md","fxLayoutAlign.gt-lg":"fxLayoutAlign.gt-lg"},features:[i.zb]}),e}(),oe=i.Yb(ie),re=new Map,se=new Map,ae=new Map,ce=new Map,le=new Map,ue=new Map,de=new Map,pe=new Map,he=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=i.Ob({type:e}),e.\u0275inj=i.Nb({factory:function(t){return new(t||e)},imports:[[o.c,r.a]]}),e}()},YUcS:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n("fXoL"),o=n("ofXK"),r=n("pD6V"),s=n("znSr"),a=n("XiUz");n("8LU1");var c,l,u=((l=function e(){_classCallCheck(this,e)}).\u0275mod=i.Ob({type:l}),l.\u0275inj=i.Nb({factory:function(e){return new(e||l)},imports:[[r.c]]}),l),d=((c=function(){function e(t,n){_classCallCheck(this,e),Object(o.x)(n)&&!t&&console.warn("Warning: Flex Layout loaded on the server without FlexLayoutServerModule")}return _createClass(e,null,[{key:"withConfig",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return{ngModule:e,providers:t.serverLoaded?[{provide:r.e,useValue:Object.assign(Object.assign({},r.d),t)},{provide:r.a,useValue:n,multi:!0},{provide:r.g,useValue:!0}]:[{provide:r.e,useValue:Object.assign(Object.assign({},r.d),t)},{provide:r.a,useValue:n,multi:!0}]}}}]),e}()).\u0275mod=i.Ob({type:c}),c.\u0275inj=i.Nb({factory:function(e){return new(e||c)(i.ac(r.g),i.ac(i.C))},imports:[[a.g,s.c,u],a.g,s.c,u]}),c)},Yn0Z:function(e,t,n){"use strict";var i;t.__esModule=!0,(i=t.LocalRecorderState||(t.LocalRecorderState={})).READY="READY",i.RECORDING="RECORDING",i.PAUSED="PAUSED",i.FINISHED="FINISHED"},bDgZ:function(e,t,n){(function(e){var i;(function(){"use strict";var o={function:!0,object:!0},r=o[typeof window]&&window||this,s=o[typeof t]&&t&&o[typeof e]&&e&&!e.nodeType&&e&&"object"==typeof global&&global;!s||s.global!==s&&s.window!==s&&s.self!==s||(r=s);var a=Math.pow(2,53)-1,c=/\bOpera/,l=Object.prototype,u=l.hasOwnProperty,d=l.toString;function p(e){return(e=String(e)).charAt(0).toUpperCase()+e.slice(1)}function h(e){return e=b(e),/^(?:webOS|i(?:OS|P))/.test(e)?e:p(e)}function f(e,t){for(var n in e)u.call(e,n)&&t(e[n],n,e)}function g(e){return null==e?p(e):d.call(e).slice(8,-1)}function m(e){return String(e).replace(/([ -])(?!$)/g,"$1?")}function v(e,t){var n=null;return function(e,t){var n=-1,i=e?e.length:0;if("number"==typeof i&&i>-1&&i<=a)for(;++n<i;)t(e[n],n);else f(e,t)}(e,(function(i,o){n=t(n,i,o,e)})),n}function b(e){return String(e).replace(/^ +| +$/g,"")}var _=function e(t){var n=r,i=t&&"object"==typeof t&&"String"!=g(t);i&&(n=t,t=null);var o=n.navigator||{},s=o.userAgent||"";t||(t=s);var a,l,u,p,_=i?!!o.likeChrome:/\bChrome\b/.test(t)&&!/internal|\n/i.test(d.toString()),y=i?"Object":"ScriptBridgingProxyObject",C=i?"Object":"Environment",O=i&&n.java?"JavaPackage":g(n.java),S=i?"Object":"RuntimeObject",k=/\bJava/.test(O)&&n.java,x=k&&g(n.environment)==C,M=k?"a":"\u03b1",w=k?"b":"\u03b2",E=n.document||{},P=n.operamini||n.opera,I=c.test(I=i&&P?P["[[Class]]"]:g(P))?I:P=null,R=t,T=[],A=null,D=t==s,L=D&&P&&"function"==typeof P.version&&P.version(),j=v([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"],(function(e,n){return e||RegExp("\\b"+(n.pattern||m(n))+"\\b","i").exec(t)&&(n.label||n)})),N=v(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Waterfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"],(function(e,n){return e||RegExp("\\b"+(n.pattern||m(n))+"\\b","i").exec(t)&&(n.label||n)})),V=W([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),U=v({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1}},(function(e,n,i){return e||(n[V]||n[/^[a-z]+(?: +[a-z]+\b)*/i.exec(V)]||RegExp("\\b"+m(i)+"(?:\\b|\\w*\\d)","i").exec(t))&&i})),B=v(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "],(function(e,n){var i=n.pattern||m(n);return!e&&(e=RegExp("\\b"+i+"(?:/[\\d.]+|[ \\w.]*)","i").exec(t))&&(e=function(e,t,n){var i={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return t&&n&&/^Win/i.test(e)&&!/^Windows Phone /i.test(e)&&(i=i[/[\d.]+$/.exec(e)])&&(e="Windows "+i),e=String(e),t&&n&&(e=e.replace(RegExp(t,"i"),n)),h(e.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(e,i,n.label||n)),e}));function W(e){return v(e,(function(e,n){var i=n.pattern||m(n);return!e&&(e=RegExp("\\b"+i+" *\\d+[.\\w_]*","i").exec(t)||RegExp("\\b"+i+" *\\w+-[\\w]*","i").exec(t)||RegExp("\\b"+i+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(t))&&((e=String(n.label&&!RegExp(i,"i").test(n.label)?n.label:e).split("/"))[1]&&!/[\d.]+/.test(e[0])&&(e[0]+=" "+e[1]),n=n.label||n,e=h(e[0].replace(RegExp(i,"i"),n).replace(RegExp("; *(?:"+n+"[_-])?","i")," ").replace(RegExp("("+n+")[-_.]?(\\w)","i"),"$1 $2"))),e}))}if(j&&(j=[j]),U&&!V&&(V=W([U])),(a=/\bGoogle TV\b/.exec(V))&&(V=a[0]),/\bSimulator\b/i.test(t)&&(V=(V?V+" ":"")+"Simulator"),"Opera Mini"==N&&/\bOPiOS\b/.test(t)&&T.push("running in Turbo/Uncompressed mode"),"IE"==N&&/\blike iPhone OS\b/.test(t)?(U=(a=e(t.replace(/like iPhone OS/,""))).manufacturer,V=a.product):/^iP/.test(V)?(N||(N="Safari"),B="iOS"+((a=/ OS ([\d_]+)/i.exec(t))?" "+a[1].replace(/_/g,"."):"")):"Konqueror"!=N||/buntu/i.test(B)?U&&"Google"!=U&&(/Chrome/.test(N)&&!/\bMobile Safari\b/i.test(t)||/\bVita\b/.test(V))||/\bAndroid\b/.test(B)&&/^Chrome/.test(N)&&/\bVersion\//i.test(t)?(N="Android Browser",B=/\bAndroid\b/.test(B)?B:"Android"):"Silk"==N?(/\bMobi/i.test(t)||(B="Android",T.unshift("desktop mode")),/Accelerated *= *true/i.test(t)&&T.unshift("accelerated")):"PaleMoon"==N&&(a=/\bFirefox\/([\d.]+)\b/.exec(t))?T.push("identifying as Firefox "+a[1]):"Firefox"==N&&(a=/\b(Mobile|Tablet|TV)\b/i.exec(t))?(B||(B="Firefox OS"),V||(V=a[1])):!N||(a=!/\bMinefield\b/i.test(t)&&/\b(?:Firefox|Safari)\b/.exec(N))?(N&&!V&&/[\/,]|^[^(]+?\)/.test(t.slice(t.indexOf(a+"/")+8))&&(N=null),(a=V||U||B)&&(V||U||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(B))&&(N=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(B)?B:a)+" Browser")):"Electron"==N&&(a=(/\bChrome\/([\d.]+)\b/.exec(t)||0)[1])&&T.push("Chromium "+a):B="Kubuntu",L||(L=v(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))","Version",m(N),"(?:Firefox|Minefield|NetFront)"],(function(e,n){return e||(RegExp(n+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(t)||0)[1]||null}))),(a=("iCab"==j&&parseFloat(L)>3?"WebKit":/\bOpera\b/.test(N)&&(/\bOPR\b/.test(t)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(t)&&!/^(?:Trident|EdgeHTML)$/.test(j)&&"WebKit"||!j&&/\bMSIE\b/i.test(t)&&("Mac OS"==B?"Tasman":"Trident")||"WebKit"==j&&/\bPlayStation\b(?! Vita\b)/i.test(N)&&"NetFront")&&(j=[a]),"IE"==N&&(a=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(t)||0)[1])?(N+=" Mobile",B="Windows Phone "+(/\+$/.test(a)?a:a+".x"),T.unshift("desktop mode")):/\bWPDesktop\b/i.test(t)?(N="IE Mobile",B="Windows Phone 8.x",T.unshift("desktop mode"),L||(L=(/\brv:([\d.]+)/.exec(t)||0)[1])):"IE"!=N&&"Trident"==j&&(a=/\brv:([\d.]+)/.exec(t))&&(N&&T.push("identifying as "+N+(L?" "+L:"")),N="IE",L=a[1]),D){if(/^(?:boolean|number|string|undefined)$/.test(p=null!=(u=n)?typeof u.global:"number")||"object"==p&&!u.global)g(a=n.runtime)==y?(N="Adobe AIR",B=a.flash.system.Capabilities.os):g(a=n.phantom)==S?(N="PhantomJS",L=(a=a.version||null)&&a.major+"."+a.minor+"."+a.patch):"number"==typeof E.documentMode&&(a=/\bTrident\/(\d+)/i.exec(t))?((a=+a[1]+4)!=(L=[L,E.documentMode])[1]&&(T.push("IE "+L[1]+" mode"),j&&(j[1]=""),L[1]=a),L="IE"==N?String(L[1].toFixed(1)):L[0]):"number"==typeof E.documentMode&&/^(?:Chrome|Firefox)\b/.test(N)&&(T.push("masking as "+N+" "+L),N="IE",L="11.0",j=["Trident"],B="Windows");else if(k&&(R=(a=k.lang.System).getProperty("os.arch"),B=B||a.getProperty("os.name")+" "+a.getProperty("os.version")),x){try{L=n.require("ringo/engine").version.join("."),N="RingoJS"}catch(z){(a=n.system)&&a.global.system==n.system&&(N="Narwhal",B||(B=a[0].os||null))}N||(N="Rhino")}else"object"==typeof n.process&&!n.process.browser&&(a=n.process)&&("object"==typeof a.versions&&("string"==typeof a.versions.electron?(T.push("Node "+a.versions.node),N="Electron",L=a.versions.electron):"string"==typeof a.versions.nw&&(T.push("Chromium "+L,"Node "+a.versions.node),N="NW.js",L=a.versions.nw)),N||(N="Node.js",R=a.arch,B=a.platform,L=(L=/[\d.]+/.exec(a.version))?L[0]:null));B=B&&h(B)}if(L&&(a=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(L)||/(?:alpha|beta)(?: ?\d)?/i.exec(t+";"+(D&&o.appMinorVersion))||/\bMinefield\b/i.test(t)&&"a")&&(A=/b/i.test(a)?"beta":"alpha",L=L.replace(RegExp(a+"\\+?$"),"")+("beta"==A?w:M)+(/\d+\+?/.exec(a)||"")),"Fennec"==N||"Firefox"==N&&/\b(?:Android|Firefox OS)\b/.test(B))N="Firefox Mobile";else if("Maxthon"==N&&L)L=L.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(V))"Xbox 360"==V&&(B=null),"Xbox 360"==V&&/\bIEMobile\b/.test(t)&&T.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(N)&&(!N||V||/Browser|Mobi/.test(N))||"Windows CE"!=B&&!/Mobi/i.test(t))if("IE"==N&&D)try{null===n.external&&T.unshift("platform preview")}catch(z){T.unshift("embedded")}else(/\bBlackBerry\b/.test(V)||/\bBB10\b/.test(t))&&(a=(RegExp(V.replace(/ +/g," *")+"/([.\\d]+)","i").exec(t)||0)[1]||L)?(B=((a=[a,/BB10/.test(t)])[1]?(V=null,U="BlackBerry"):"Device Software")+" "+a[0],L=null):this!=f&&"Wii"!=V&&(D&&P||/Opera/.test(N)&&/\b(?:MSIE|Firefox)\b/i.test(t)||"Firefox"==N&&/\bOS X (?:\d+\.){2,}/.test(B)||"IE"==N&&(B&&!/^Win/.test(B)&&L>5.5||/\bWindows XP\b/.test(B)&&L>8||8==L&&!/\bTrident\b/.test(t)))&&!c.test(a=e.call(f,t.replace(c,"")+";"))&&a.name&&(a="ing as "+a.name+((a=a.version)?" "+a:""),c.test(N)?(/\bIE\b/.test(a)&&"Mac OS"==B&&(B=null),a="identify"+a):(a="mask"+a,N=I?h(I.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(a)&&(B=null),D||(L=null)),j=["Presto"],T.push(a));else N+=" Mobile";(a=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(t)||0)[1])&&(a=[parseFloat(a.replace(/\.(\d)$/,".0$1")),a],"Safari"==N&&"+"==a[1].slice(-1)?(N="WebKit Nightly",A="alpha",L=a[1].slice(0,-1)):L!=a[1]&&L!=(a[2]=(/\bSafari\/([\d.]+\+?)/i.exec(t)||0)[1])||(L=null),a[1]=(/\bChrome\/([\d.]+)/i.exec(t)||0)[1],537.36==a[0]&&537.36==a[2]&&parseFloat(a[1])>=28&&"WebKit"==j&&(j=["Blink"]),D&&(_||a[1])?(j&&(j[1]="like Chrome"),a=a[1]||((a=a[0])<530?1:a<532?2:a<532.05?3:a<533?4:a<534.03?5:a<534.07?6:a<534.1?7:a<534.13?8:a<534.16?9:a<534.24?10:a<534.3?11:a<535.01?12:a<535.02?"13+":a<535.07?15:a<535.11?16:a<535.19?17:a<536.05?18:a<536.1?19:a<537.01?20:a<537.11?"21+":a<537.13?23:a<537.18?24:a<537.24?25:a<537.36?26:"Blink"!=j?"27":"28")):(j&&(j[1]="like Safari"),a=(a=a[0])<400?1:a<500?2:a<526?3:a<533?4:a<534?"4+":a<535?5:a<537?6:a<538?7:a<601?8:"8"),j&&(j[1]+=" "+(a+="number"==typeof a?".x":/[.+]/.test(a)?"":"+")),"Safari"==N&&(!L||parseInt(L)>45)&&(L=a)),"Opera"==N&&(a=/\bzbov|zvav$/.exec(B))?(N+=" ",T.unshift("desktop mode"),"zvav"==a?(N+="Mini",L=null):N+="Mobile",B=B.replace(RegExp(" *"+a+"$"),"")):"Safari"==N&&/\bChrome\b/.exec(j&&j[1])&&(T.unshift("desktop mode"),N="Chrome Mobile",L=null,/\bOS X\b/.test(B)?(U="Apple",B="iOS 4.3+"):B=null),L&&0==L.indexOf(a=/[\d.]+$/.exec(B))&&t.indexOf("/"+a+"-")>-1&&(B=b(B.replace(a,""))),j&&!/\b(?:Avant|Nook)\b/.test(N)&&(/Browser|Lunascape|Maxthon/.test(N)||"Safari"!=N&&/^iOS/.test(B)&&/\bSafari\b/.test(j[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(N)&&j[1])&&(a=j[j.length-1])&&T.push(a),T.length&&(T=["("+T.join("; ")+")"]),U&&V&&V.indexOf(U)<0&&T.push("on "+U),V&&T.push((/^on /.test(T[T.length-1])?"":"on ")+V),B&&(a=/ ([\d.+]+)$/.exec(B),l=a&&"/"==B.charAt(B.length-a[0].length-1),B={architecture:32,family:a&&!l?B.replace(a[0],""):B,version:a?a[1]:null,toString:function(){var e=this.version;return this.family+(e&&!l?" "+e:"")+(64==this.architecture?" 64-bit":"")}}),(a=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(R))&&!/\bi686\b/i.test(R)?(B&&(B.architecture=64,B.family=B.family.replace(RegExp(" *"+a),"")),N&&(/\bWOW64\b/i.test(t)||D&&/\w(?:86|32)$/.test(o.cpuClass||o.platform)&&!/\bWin64; x64\b/i.test(t))&&T.unshift("32-bit")):B&&/^OS X/.test(B.family)&&"Chrome"==N&&parseFloat(L)>=39&&(B.architecture=64),t||(t=null);var F={};return F.description=t,F.layout=j&&j[0],F.manufacturer=U,F.name=N,F.prerelease=A,F.product=V,F.ua=t,F.version=N&&L,F.os=B||{architecture:null,family:null,version:null,toString:function(){return"null"}},F.parse=e,F.toString=function(){return this.description||""},F.version&&T.unshift(L),F.name&&T.unshift(N),B&&N&&(B!=String(B).split(" ")[0]||B!=N.split(" ")[0]&&!V)&&T.push(V?"("+B+")":"on "+B),T.length&&(F.description=T.join(" ")),F}();r.platform=_,void 0===(i=(function(){return _}).call(t,n,t,e))||(e.exports=i)}).call(this)}).call(this,n("YuTi")(e))},bGVd:function(e,t,n){e.exports=n("IXxz").default},bk74:function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0;var r=n("P3vI"),s=n("9m68").OpenViduLogger.getInstance(),a=function(e){function t(t,n,i){var o=e.call(this,t,n)||this;return o.element=o.targetElement,o.stream=t,o.properties=i,o}return o(t,e),t.prototype.subscribeToAudio=function(e){return this.stream.getMediaStream().getAudioTracks().forEach((function(t){t.enabled=e})),this.stream.audioActive=e,s.info("'Subscriber' has "+(e?"subscribed to":"unsubscribed from")+" its audio stream"),this},t.prototype.subscribeToVideo=function(e){return this.stream.getMediaStream().getVideoTracks().forEach((function(t){t.enabled=e})),this.stream.videoActive=e,s.info("'Subscriber' has "+(e?"subscribed to":"unsubscribed from")+" its video stream"),this},t}(r.StreamManager);t.Subscriber=a},cUzU:function(e,t,n){"use strict";var i=console;e.exports=function(e){var t,n=!1,o=e.uri,r=!1,s=new WebSocket(o);s.onopen=function(){i.debug("WebSocket connected to "+o),e.onconnected&&e.onconnected()},s.onerror=function(t){i.error("Could not connect to "+o+" (invoking onerror if defined)",t),e.onerror&&e.onerror(t)};var a=function(){3===s.readyState?n?i.debug("Connection closed by user"):(i.debug("Connection closed unexpectecly. Reconnecting..."),c(2e3,1)):i.debug("Close callback from previous websocket. Ignoring it")};function c(n,l){if(i.debug("reconnect (attempt #"+l+", max="+n+")"),1===l){if(r)return void i.warn("Trying to reconnect when already reconnecting... Ignoring this reconnection.");r=!0,e.onreconnecting&&e.onreconnecting()}!function(n,l){i.debug("Reconnection attempt #"+l),s.close(),(s=new WebSocket(o)).onopen=function(){i.debug("Reconnected to "+o+" after "+l+" attempts..."),r=!1,t(),e.onreconnected()&&e.onreconnected(),s.onclose=a},s.onerror=function(t){i.warn("Reconnection error: ",t),l===n?e.ondisconnect&&e.ondisconnect():setTimeout((function(){c(n,l+1)}),3e3)}}(n,l)}s.onclose=a,this.close=function(){n=!0,s.close()},this.reconnectWs=function(){i.debug("reconnectWs"),c(2e3,1)},this.send=function(e){s.send(e)},this.addEventListener=function(e,n){(t=function(){s.addEventListener(e,n)})()}}},dNgK:function(e,t,n){"use strict";n.d(t,"a",(function(){return M})),n.d(t,"b",(function(){return k}));var i=n("rDax"),o=n("+rOU"),r=n("ofXK"),s=n("fXoL"),a=n("FKr1"),c=n("bTqV"),l=n("XNiG"),u=n("IzEk"),d=n("1G5W"),p=n("R0Ic"),h=n("u47x"),f=n("0MNC");function g(e,t){if(1&e){var n=s.Xb();s.Wb(0,"div",1),s.Wb(1,"button",2),s.ec("click",(function(){return s.Bc(n),s.ic().action()})),s.Kc(2),s.Vb(),s.Vb()}if(2&e){var i=s.ic();s.Cb(2),s.Lc(i.data.action)}}function m(e,t){}var v=Math.pow(2,31)-1,b=function(){function e(t,n){var i=this;_classCallCheck(this,e),this._overlayRef=n,this._afterDismissed=new l.a,this._afterOpened=new l.a,this._onAction=new l.a,this._dismissedByAction=!1,this.containerInstance=t,this.onAction().subscribe((function(){return i.dismiss()})),t._onExit.subscribe((function(){return i._finishDismiss()}))}return _createClass(e,[{key:"dismiss",value:function(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}},{key:"dismissWithAction",value:function(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete())}},{key:"closeWithAction",value:function(){this.dismissWithAction()}},{key:"_dismissAfter",value:function(e){var t=this;this._durationTimeoutId=setTimeout((function(){return t.dismiss()}),Math.min(e,v))}},{key:"_open",value:function(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}},{key:"_finishDismiss",value:function(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}},{key:"afterDismissed",value:function(){return this._afterDismissed.asObservable()}},{key:"afterOpened",value:function(){return this.containerInstance._onEnter}},{key:"onAction",value:function(){return this._onAction.asObservable()}}]),e}(),_=new s.r("MatSnackBarData"),y=function e(){_classCallCheck(this,e),this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"},C=function(){var e=function(){function e(t,n){_classCallCheck(this,e),this.snackBarRef=t,this.data=n}return _createClass(e,[{key:"action",value:function(){this.snackBarRef.dismissWithAction()}},{key:"hasAction",get:function(){return!!this.data.action}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.Qb(b),s.Qb(_))},e.\u0275cmp=s.Kb({type:e,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-simple-snackbar"],decls:3,vars:2,consts:[["class","mat-simple-snackbar-action",4,"ngIf"],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(e,t){1&e&&(s.Wb(0,"span"),s.Kc(1),s.Vb(),s.Ic(2,g,3,1,"div",0)),2&e&&(s.Cb(1),s.Lc(t.data.message),s.Cb(1),s.pc("ngIf",t.hasAction))},directives:[r.m,c.a],styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}\n"],encapsulation:2,changeDetection:0}),e}(),O={snackBarState:Object(p.n)("state",[Object(p.k)("void, hidden",Object(p.l)({transform:"scale(0.8)",opacity:0})),Object(p.k)("visible",Object(p.l)({transform:"scale(1)",opacity:1})),Object(p.m)("* => visible",Object(p.e)("150ms cubic-bezier(0, 0, 0.2, 1)")),Object(p.m)("* => void, * => hidden",Object(p.e)("75ms cubic-bezier(0.4, 0.0, 1, 1)",Object(p.l)({opacity:0})))])},S=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,o,r){var s;return _classCallCheck(this,n),(s=t.call(this))._ngZone=e,s._elementRef=i,s._changeDetectorRef=o,s.snackBarConfig=r,s._destroyed=!1,s._onExit=new l.a,s._onEnter=new l.a,s._animationState="void",s.attachDomPortal=function(e){return s._assertNotAttached(),s._applySnackBarClasses(),s._portalOutlet.attachDomPortal(e)},s._role="assertive"!==r.politeness||r.announcementMessage?"off"===r.politeness?null:"status":"alert",s}return _createClass(n,[{key:"attachComponentPortal",value:function(e){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachComponentPortal(e)}},{key:"attachTemplatePortal",value:function(e){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachTemplatePortal(e)}},{key:"onAnimationEnd",value:function(e){var t=e.fromState,n=e.toState;if(("void"===n&&"void"!==t||"hidden"===n)&&this._completeExit(),"visible"===n){var i=this._onEnter;this._ngZone.run((function(){i.next(),i.complete()}))}}},{key:"enter",value:function(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges())}},{key:"exit",value:function(){return this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),this._onExit}},{key:"ngOnDestroy",value:function(){this._destroyed=!0,this._completeExit()}},{key:"_completeExit",value:function(){var e=this;this._ngZone.onMicrotaskEmpty.asObservable().pipe(Object(u.a)(1)).subscribe((function(){e._onExit.next(),e._onExit.complete()}))}},{key:"_applySnackBarClasses",value:function(){var e=this._elementRef.nativeElement,t=this.snackBarConfig.panelClass;t&&(Array.isArray(t)?t.forEach((function(t){return e.classList.add(t)})):e.classList.add(t)),"center"===this.snackBarConfig.horizontalPosition&&e.classList.add("mat-snack-bar-center"),"top"===this.snackBarConfig.verticalPosition&&e.classList.add("mat-snack-bar-top")}},{key:"_assertNotAttached",value:function(){if(this._portalOutlet.hasAttached())throw Error("Attempting to attach snack bar content after content is already attached")}}]),n}(o.a);return e.\u0275fac=function(t){return new(t||e)(s.Qb(s.A),s.Qb(s.l),s.Qb(s.h),s.Qb(y))},e.\u0275cmp=s.Kb({type:e,selectors:[["snack-bar-container"]],viewQuery:function(e,t){var n;1&e&&s.Gc(o.c,!0),2&e&&s.wc(n=s.fc())&&(t._portalOutlet=n.first)},hostAttrs:[1,"mat-snack-bar-container"],hostVars:2,hostBindings:function(e,t){1&e&&s.Hb("@state.done",(function(e){return t.onAnimationEnd(e)})),2&e&&(s.Db("role",t._role),s.Oc("@state",t._animationState))},features:[s.zb],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,t){1&e&&s.Ic(0,m,0,0,"ng-template",0)},directives:[o.c],styles:[".mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}.cdk-high-contrast-active .mat-snack-bar-container{border:solid 1px}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}\n"],encapsulation:2,data:{animation:[O.snackBarState]}}),e}(),k=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=s.Ob({type:e}),e.\u0275inj=s.Nb({factory:function(t){return new(t||e)},imports:[[i.f,o.i,r.c,c.b,a.i],a.i]}),e}(),x=new s.r("mat-snack-bar-default-options",{providedIn:"root",factory:function(){return new y}}),M=function(){var e=function(){function e(t,n,i,o,r,s){_classCallCheck(this,e),this._overlay=t,this._live=n,this._injector=i,this._breakpointObserver=o,this._parentSnackBar=r,this._defaultConfig=s,this._snackBarRefAtThisLevel=null}return _createClass(e,[{key:"openFromComponent",value:function(e,t){return this._attach(e,t)}},{key:"openFromTemplate",value:function(e,t){return this._attach(e,t)}},{key:"open",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,i=Object.assign(Object.assign({},this._defaultConfig),n);return i.data={message:e,action:t},i.announcementMessage||(i.announcementMessage=e),this.openFromComponent(C,i)}},{key:"dismiss",value:function(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}},{key:"ngOnDestroy",value:function(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}},{key:"_attachSnackBarContainer",value:function(e,t){var n=new o.h(t&&t.viewContainerRef&&t.viewContainerRef.injector||this._injector,new WeakMap([[y,t]])),i=new o.d(S,t.viewContainerRef,n),r=e.attach(i);return r.instance.snackBarConfig=t,r.instance}},{key:"_attach",value:function(e,t){var n=Object.assign(Object.assign(Object.assign({},new y),this._defaultConfig),t),i=this._createOverlay(n),r=this._attachSnackBarContainer(i,n),a=new b(r,i);if(e instanceof s.M){var c=new o.j(e,null,{$implicit:n.data,snackBarRef:a});a.instance=r.attachTemplatePortal(c)}else{var l=this._createInjector(n,a),u=new o.d(e,void 0,l),p=r.attachComponentPortal(u);a.instance=p.instance}return this._breakpointObserver.observe(f.b.HandsetPortrait).pipe(Object(d.a)(i.detachments())).subscribe((function(e){var t=i.overlayElement.classList;e.matches?t.add("mat-snack-bar-handset"):t.remove("mat-snack-bar-handset")})),this._animateSnackBar(a,n),this._openedSnackBarRef=a,this._openedSnackBarRef}},{key:"_animateSnackBar",value:function(e,t){var n=this;e.afterDismissed().subscribe((function(){n._openedSnackBarRef==e&&(n._openedSnackBarRef=null),t.announcementMessage&&n._live.clear()})),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe((function(){e.containerInstance.enter()})),this._openedSnackBarRef.dismiss()):e.containerInstance.enter(),t.duration&&t.duration>0&&e.afterOpened().subscribe((function(){return e._dismissAfter(t.duration)})),t.announcementMessage&&this._live.announce(t.announcementMessage,t.politeness)}},{key:"_createOverlay",value:function(e){var t=new i.d;t.direction=e.direction;var n=this._overlay.position().global(),o="rtl"===e.direction,r="left"===e.horizontalPosition||"start"===e.horizontalPosition&&!o||"end"===e.horizontalPosition&&o,s=!r&&"center"!==e.horizontalPosition;return r?n.left("0"):s?n.right("0"):n.centerHorizontally(),"top"===e.verticalPosition?n.top("0"):n.bottom("0"),t.positionStrategy=n,this._overlay.create(t)}},{key:"_createInjector",value:function(e,t){return new o.h(e&&e.viewContainerRef&&e.viewContainerRef.injector||this._injector,new WeakMap([[b,t],[_,e.data]]))}},{key:"_openedSnackBarRef",get:function(){var e=this._parentSnackBar;return e?e._openedSnackBarRef:this._snackBarRefAtThisLevel},set:function(e){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=e:this._snackBarRefAtThisLevel=e}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.ac(i.c),s.ac(h.k),s.ac(s.s),s.ac(f.a),s.ac(e,12),s.ac(x))},e.\u0275prov=Object(s.Mb)({factory:function(){return new e(Object(s.ac)(i.c),Object(s.ac)(h.k),Object(s.ac)(s.p),Object(s.ac)(f.a),Object(s.ac)(e,12),Object(s.ac)(x))},token:e,providedIn:k}),e}()},dP7y:function(e,t,n){e.exports=n("LXjW")},"dY/r":function(e,t){var n=["stun:","turn:"];e.exports=function(e){var t,i,o=(e||{}).url||e,r={};return"string"==typeof o||o instanceof String?(o=o.trim(),(t=n[n.indexOf(o.slice(0,5))])?(i=(o=o.slice(5)).split("@"),r.username=e.username,r.credential=e.credential,i.length>1&&(o=i[1],i=i[0].split(":"),r.username=i[0],r.credential=(e||{}).credential||i[1]||""),r.url=t+o,r.urls=[r.url],r):e):e}},de4E:function(e,t){t.pack=function(e,t){var n={jsonrpc:"2.0"};if(e.method)n.method=e.method,e.params&&(n.params=e.params),null!=t&&(n.id=t);else if(null!=t){if(e.error){if(void 0!==e.result)throw new TypeError("Both result and error are defined");n.error=e.error}else{if(void 0===e.result)throw new TypeError("No result or error is defined");n.result=e.result}n.id=t}return JSON.stringify(n)},t.unpack=function(e){var t=e;("string"==typeof e||e instanceof String)&&(t=JSON.parse(e));var n=t.jsonrpc;if("2.0"!==n)throw new TypeError("Invalid JsonRPC version '"+n+"': "+e);if(null==t.method){if(null==t.id)throw new TypeError("Invalid message: "+e);var i=void 0!==t.result,o=void 0!==t.error;if(i&&o)throw new TypeError("Both result and error are defined: "+e);if(!i&&!o)throw new TypeError("No result or error is defined: "+e);t.ack=t.id,delete t.id}return t}},dlaP:function(e,t,n){"use strict";t.__esModule=!0,t.AMPERSAND=t.CLOSEPAREN=t.CLOSEANGLEBRACKET=t.CLOSEBRACKET=t.CLOSEBRACE=t.OPENPAREN=t.OPENANGLEBRACKET=t.OPENBRACKET=t.OPENBRACE=t.WS=t.TLD=t.SYM=t.UNDERSCORE=t.SLASH=t.MAILTO=t.PROTOCOL=t.QUERY=t.POUND=t.PLUS=t.NUM=t.NL=t.LOCALHOST=t.PUNCTUATION=t.DOT=t.COLON=t.AT=t.DOMAIN=t.Base=void 0;var i=n("RvMX"),o=n("JUw6"),r=(0,i.createTokenClass)();function s(e){var t=e?{v:e}:{};return(0,o.inherits)(r,(0,i.createTokenClass)(),t)}r.prototype={toString:function(){return this.v+""}};var a=s(),c=s("@"),l=s(":"),u=s("."),d=s(),p=s(),h=s("\n"),f=s(),g=s("+"),m=s("#"),v=s(),b=s("mailto:"),_=s("?"),y=s("/"),C=s("_"),O=s(),S=s(),k=s(),x=s("{"),M=s("["),w=s("<"),E=s("("),P=s("}"),I=s("]"),R=s(">"),T=s(")"),A=s("&");t.Base=r,t.DOMAIN=a,t.AT=c,t.COLON=l,t.DOT=u,t.PUNCTUATION=d,t.LOCALHOST=p,t.NL=h,t.NUM=f,t.PLUS=g,t.POUND=m,t.QUERY=_,t.PROTOCOL=v,t.MAILTO=b,t.SLASH=y,t.UNDERSCORE=C,t.SYM=O,t.TLD=S,t.WS=k,t.OPENBRACE=x,t.OPENBRACKET=M,t.OPENANGLEBRACKET=w,t.OPENPAREN=E,t.CLOSEBRACE=P,t.CLOSEBRACKET=I,t.CLOSEANGLEBRACKET=R,t.CLOSEPAREN=T,t.AMPERSAND=A},e8ps:function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0;var r=function(e){function t(t,n,i,o){var r=e.call(this,!1,t,n)||this;return r.type=n,r.connection=i,r.streamId=o,r}return o(t,e),t.prototype.callDefaultBehavior=function(){},t}(n("hzOQ").Event);t.PublisherSpeakingEvent=r},ee8k:function(e,t,n){var i=n("cUzU");t.WebSocketWithReconnection=i},gUCu:function(e,t){function n(){var e={};this.forEach=function(t){for(var n in e){var i=e[n];for(var o in i)t(i[o])}},this.get=function(t,n){var i=e[n];if(null!=i)return i[t]},this.remove=function(t,n){var i=e[n];if(null!=i){for(var o in delete i[t],i)return!1;delete e[n]}},this.set=function(t,n,i){if(null==t)return this.remove(n,i);var o=e[i];null==o&&(e[i]=o={}),o[n]=t}}n.prototype.pop=function(e,t){var n=this.get(e,t);if(null!=n)return this.remove(e,t),n},e.exports=n},hw9W:function(e){e.exports=JSON.parse("[]")},hzOQ:function(e,t,n){"use strict";t.__esModule=!0;var i=function(){function e(e,t,n){this.hasBeenPrevented=!1,this.cancelable=e,this.target=t,this.type=n}return e.prototype.isDefaultPrevented=function(){return this.hasBeenPrevented},e.prototype.preventDefault=function(){this.callDefaultBehavior=function(){},this.hasBeenPrevented=!0},e}();t.Event=i},joaK:function(e,t,n){e.exports=n("TDwH").default},ksJj:function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0;var r=n("hzOQ"),s=n("9m68").OpenViduLogger.getInstance(),a=function(e){function t(t,n){var i=e.call(this,!0,t,"sessionDisconnected")||this;return i.reason=n,i}return o(t,e),t.prototype.callDefaultBehavior=function(){s.info("Calling default behavior upon '"+this.type+"' event dispatched by 'Session'");var e=this.target;for(var t in e.remoteConnections)e.remoteConnections[t].stream&&(e.remoteConnections[t].stream.disposeWebRtcPeer(),e.remoteConnections[t].stream.disposeMediaStream(),e.remoteConnections[t].stream.streamManager&&e.remoteConnections[t].stream.streamManager.removeAllVideos(),delete e.remoteStreamsCreated[e.remoteConnections[t].stream.streamId],e.remoteConnections[t].dispose()),delete e.remoteConnections[t]},t}(r.Event);t.SessionDisconnectedEvent=a},mgp7:function(e,t,n){e.exports=n("/u9M").default},oIG1:function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0;var r=function(e){function t(t,n,i){var o=e.call(this,!1,n,i)||this;return o.element=t,o}return o(t,e),t.prototype.callDefaultBehavior=function(){},t}(n("hzOQ").Event);t.VideoElementEvent=r},pD6V:function(e,t,n){"use strict";n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return m})),n.d(t,"e",(function(){return v})),n.d(t,"g",(function(){return b})),n.d(t,"a",(function(){return _})),n.d(t,"b",(function(){return S})),n.d(t,"i",(function(){return z})),n.d(t,"h",(function(){return q})),n.d(t,"j",(function(){return G})),n.d(t,"f",(function(){return Q}));var i=n("fXoL"),o=n("ofXK"),r=n("XNiG"),s=n("2Vo4"),a=n("HDdC"),c=n("VRyK"),l=(n("7Hc7"),n("LRne"),n("xgIS"),n("pLZG")),u=(n("lJxs"),n("Kj3r"),n("eIep"),n("1G5W"),n("IzEk"),n("vkgz")),d={provide:i.b,useFactory:function(e,t){return function(){if(Object(o.w)(t)){var n=Array.from(e.querySelectorAll("[class*=".concat(p,"]"))),i=/\bflex-layout-.+?\b/g;n.forEach((function(e){e.classList.contains(p+"ssr")&&e.parentNode?e.parentNode.removeChild(e):e.className.replace(i,"")}))}}},deps:[o.e,i.C],multi:!0},p="flex-layout-",h=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=i.Ob({type:e}),e.\u0275inj=i.Nb({factory:function(t){return new(t||e)},providers:[d]}),e}(),f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;_classCallCheck(this,e),this.matches=t,this.mediaQuery=n,this.mqAlias=i,this.suffix=o,this.priority=r,this.property=""}return _createClass(e,[{key:"clone",value:function(){return new e(this.matches,this.mediaQuery,this.mqAlias,this.suffix)}}]),e}(),g=function(){var e=function(){function e(){_classCallCheck(this,e),this.stylesheet=new Map}return _createClass(e,[{key:"addStyleToElement",value:function(e,t,n){var i=this.stylesheet.get(e);i?i.set(t,n):this.stylesheet.set(e,new Map([[t,n]]))}},{key:"clearStyles",value:function(){this.stylesheet.clear()}},{key:"getStyleForElement",value:function(e,t){var n=this.stylesheet.get(e),i="";if(n){var o=n.get(t);"number"!=typeof o&&"string"!=typeof o||(i=o+"")}return i}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Object(i.Mb)({factory:function(){return new e},token:e,providedIn:"root"}),e}(),m={addFlexToParent:!0,addOrientationBps:!1,disableDefaultBps:!1,disableVendorPrefixes:!1,serverLoaded:!1,useColumnBasisZero:!0,printWithBreakpoints:[],mediaTriggerAutoRestore:!0,ssrObserveBreakpoints:[]},v=new i.r("Flex Layout token, config options for the library",{providedIn:"root",factory:function(){return m}}),b=new i.r("FlexLayoutServerLoaded",{providedIn:"root",factory:function(){return!1}}),_=new i.r("Flex Layout token, collect all breakpoints into one provider",{providedIn:"root",factory:function(){return null}});function y(e,t){return e=e?e.clone():new f,t&&(e.mqAlias=t.alias,e.mediaQuery=t.mediaQuery,e.suffix=t.suffix,e.priority=t.priority),e}var C=["row","column","row-reverse","column-reverse"];function O(e){if(e)switch(e.toLowerCase()){case"reverse":case"wrap-reverse":case"reverse-wrap":e="wrap-reverse";break;case"no":case"none":case"nowrap":e="nowrap";break;default:e="wrap"}return e}var S=function(){var e=function(){function e(t,n,i,o){_classCallCheck(this,e),this.elementRef=t,this.styleBuilder=n,this.styler=i,this.marshal=o,this.DIRECTIVE_KEY="",this.inputs=[],this.mru={},this.destroySubject=new r.a,this.styleCache=new Map}return _createClass(e,[{key:"ngOnChanges",value:function(e){var t=this;Object.keys(e).forEach((function(n){if(-1!==t.inputs.indexOf(n)){var i=n.split(".").slice(1).join(".");t.setValue(e[n].currentValue,i)}}))}},{key:"ngOnDestroy",value:function(){this.destroySubject.next(),this.destroySubject.complete(),this.marshal.releaseElement(this.nativeElement)}},{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.marshal.init(this.elementRef.nativeElement,this.DIRECTIVE_KEY,this.updateWithValue.bind(this),this.clearStyles.bind(this),e)}},{key:"addStyles",value:function(e,t){var n=this.styleBuilder,i=n.shouldCache,o=this.styleCache.get(e);o&&i||(o=n.buildStyles(e,t),i&&this.styleCache.set(e,o)),this.mru=Object.assign({},o),this.applyStyleToElement(o),n.sideEffect(e,o,t)}},{key:"clearStyles",value:function(){var e=this;Object.keys(this.mru).forEach((function(t){e.mru[t]=""})),this.applyStyleToElement(this.mru),this.mru={}}},{key:"triggerUpdate",value:function(){this.marshal.triggerUpdate(this.nativeElement,this.DIRECTIVE_KEY)}},{key:"getFlexFlowDirection",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e){var n=this.styler.getFlowDirection(e),i=_slicedToArray(n,2),o=i[0],r=i[1];if(!r&&t){var s=function(e){var t=function(e){var t=_slicedToArray((e=e?e.toLowerCase():"").split(" "),3),n=t[0],i=t[1],o=t[2];return C.find((function(e){return e===n}))||(n=C[0]),"inline"===i&&(i="inline"!==o?o:"",o="inline"),[n,O(i),!!o]}(e),n=_slicedToArray(t,3);return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{display:n?"inline-flex":"flex","box-sizing":"border-box","flex-direction":e,"flex-wrap":t||null}}(n[0],n[1],n[2])}(o);this.styler.applyStyleToElements(s,[e])}return o.trim()}return"row"}},{key:"applyStyleToElement",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.nativeElement;this.styler.applyStyleToElement(n,e,t)}},{key:"setValue",value:function(e,t){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,e,t)}},{key:"updateWithValue",value:function(e){this.addStyles(e)}},{key:"parentElement",get:function(){return this.elementRef.nativeElement.parentElement}},{key:"nativeElement",get:function(){return this.elementRef.nativeElement}},{key:"activatedValue",get:function(){return this.marshal.getValue(this.nativeElement,this.DIRECTIVE_KEY)},set:function(e){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,e,this.marshal.activatedAlias)}}]),e}();return e.\u0275fac=function(e){i.dc()},e.\u0275dir=i.Lb({type:e,features:[i.Ab]}),e}(),k=[{alias:"xs",mediaQuery:"screen and (min-width: 0px) and (max-width: 599.9px)",priority:1e3},{alias:"sm",mediaQuery:"screen and (min-width: 600px) and (max-width: 959.9px)",priority:900},{alias:"md",mediaQuery:"screen and (min-width: 960px) and (max-width: 1279.9px)",priority:800},{alias:"lg",mediaQuery:"screen and (min-width: 1280px) and (max-width: 1919.9px)",priority:700},{alias:"xl",mediaQuery:"screen and (min-width: 1920px) and (max-width: 4999.9px)",priority:600},{alias:"lt-sm",overlapping:!0,mediaQuery:"screen and (max-width: 599.9px)",priority:950},{alias:"lt-md",overlapping:!0,mediaQuery:"screen and (max-width: 959.9px)",priority:850},{alias:"lt-lg",overlapping:!0,mediaQuery:"screen and (max-width: 1279.9px)",priority:750},{alias:"lt-xl",overlapping:!0,priority:650,mediaQuery:"screen and (max-width: 1919.9px)"},{alias:"gt-xs",overlapping:!0,mediaQuery:"screen and (min-width: 600px)",priority:-950},{alias:"gt-sm",overlapping:!0,mediaQuery:"screen and (min-width: 960px)",priority:-850},{alias:"gt-md",overlapping:!0,mediaQuery:"screen and (min-width: 1280px)",priority:-750},{alias:"gt-lg",overlapping:!0,mediaQuery:"screen and (min-width: 1920px)",priority:-650}],x="(orientation: portrait) and (min-width: 600px) and (max-width: 839.9px)",M="(orientation: landscape) and (min-width: 960px) and (max-width: 1279.9px)",w="(orientation: portrait) and (min-width: 840px)",E="(orientation: landscape) and (min-width: 1280px)",P={HANDSET:"(orientation: portrait) and (max-width: 599.9px), (orientation: landscape) and (max-width: 959.9px)",TABLET:"".concat(x," , ").concat(M),WEB:"".concat(w,", ").concat(E," "),HANDSET_PORTRAIT:"(orientation: portrait) and (max-width: 599.9px)",TABLET_PORTRAIT:x+" ",WEB_PORTRAIT:""+w,HANDSET_LANDSCAPE:"(orientation: landscape) and (max-width: 959.9px)]",TABLET_LANDSCAPE:""+M,WEB_LANDSCAPE:""+E},I=[{alias:"handset",priority:2e3,mediaQuery:P.HANDSET},{alias:"handset.landscape",priority:2e3,mediaQuery:P.HANDSET_LANDSCAPE},{alias:"handset.portrait",priority:2e3,mediaQuery:P.HANDSET_PORTRAIT},{alias:"tablet",priority:2100,mediaQuery:P.TABLET},{alias:"tablet.landscape",priority:2100,mediaQuery:P.TABLET},{alias:"tablet.portrait",priority:2100,mediaQuery:P.TABLET_PORTRAIT},{alias:"web",priority:2200,mediaQuery:P.WEB,overlapping:!0},{alias:"web.landscape",priority:2200,mediaQuery:P.WEB_LANDSCAPE,overlapping:!0},{alias:"web.portrait",priority:2200,mediaQuery:P.WEB_PORTRAIT,overlapping:!0}],R=/(\.|-|_)/g;function T(e){var t=e.length>0?e.charAt(0):"",n=e.length>1?e.slice(1):"";return t.toUpperCase()+n}var A=new i.r("Token (@angular/flex-layout) Breakpoints",{providedIn:"root",factory:function(){var e=Object(i.V)(_),t=Object(i.V)(v),n=[].concat.apply([],(e||[]).map((function(e){return Array.isArray(e)?e:[e]})));return function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i={};return e.forEach((function(e){i[e.alias]=e})),n.forEach((function(e){i[e.alias]?function(e){if(null==e)throw TypeError("Cannot convert undefined or null to object");for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(var o=0,r=n;o<r.length;o++){var s=r[o];if(null!=s)for(var a in s)s.hasOwnProperty(a)&&(e[a]=s[a])}}(i[e.alias],e):i[e.alias]=e})),(t=Object.keys(i).map((function(e){return i[e]}))).forEach((function(e){e.suffix||(e.suffix=e.alias.replace(R,"|").split("|").map(T).join(""),e.overlapping=!!e.overlapping)})),t}((t.disableDefaultBps?[]:k).concat(t.addOrientationBps?I:[]),n)}});function D(e,t){return(t&&t.priority||0)-(e&&e.priority||0)}function L(e,t){return(e.priority||0)-(t.priority||0)}var j=function(){var e=function(){function e(t){_classCallCheck(this,e),this.findByMap=new Map,this.items=_toConsumableArray(t).sort(L)}return _createClass(e,[{key:"findByAlias",value:function(e){return e?this.findWithPredicate(e,(function(t){return t.alias==e})):null}},{key:"findByQuery",value:function(e){return this.findWithPredicate(e,(function(t){return t.mediaQuery==e}))}},{key:"findWithPredicate",value:function(e,t){var n=this.findByMap.get(e);return n||(n=this.items.find(t)||null,this.findByMap.set(e,n)),n||null}},{key:"overlappings",get:function(){return this.items.filter((function(e){return 1==e.overlapping}))}},{key:"aliases",get:function(){return this.items.map((function(e){return e.alias}))}},{key:"suffixes",get:function(){return this.items.map((function(e){return e.suffix?e.suffix:""}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i.ac(A))},e.\u0275prov=Object(i.Mb)({factory:function(){return new e(Object(i.ac)(A))},token:e,providedIn:"root"}),e}(),N=function(){var e=function(){function e(t,n,i){_classCallCheck(this,e),this._zone=t,this._platformId=n,this._document=i,this.source=new s.a(new f(!0)),this.registry=new Map,this._observable$=this.source.asObservable()}return _createClass(e,[{key:"isActive",value:function(e){var t=this.registry.get(e);return!!t&&t.matches}},{key:"observe",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e&&e.length){var i=this._observable$.pipe(Object(l.a)((function(t){return!n||e.indexOf(t.mediaQuery)>-1}))),o=new a.a((function(n){var i=t.registerQuery(e);if(i.length){var o=i.pop();i.forEach((function(e){n.next(e)})),t.source.next(o)}n.complete()}));return Object(c.a)(o,i)}return this._observable$}},{key:"registerQuery",value:function(e){var t=this,n=Array.isArray(e)?e:[e],i=[];return function(e,t){var n=e.filter((function(e){return!V[e]}));if(n.length>0){var i=n.join(", ");try{var o=t.createElement("style");o.setAttribute("type","text/css"),o.styleSheet||o.appendChild(t.createTextNode("\n/*\n  @angular/flex-layout - workaround for possible browser quirk with mediaQuery listeners\n  see http://bit.ly/2sd4HMP\n*/\n@media ".concat(i," {.fx-query-test{ }}\n"))),t.head.appendChild(o),n.forEach((function(e){return V[e]=o}))}catch(r){console.error(r)}}}(n,this._document),n.forEach((function(e){var n=t.registry.get(e);n||((n=t.buildMQL(e)).addListener((function(n){t._zone.run((function(){return t.source.next(new f(n.matches,e))}))})),t.registry.set(e,n)),n.matches&&i.push(new f(!0,e))})),i}},{key:"buildMQL",value:function(e){return function(e,t){return t&&window.matchMedia("all").addListener?window.matchMedia(e):{matches:"all"===e||""===e,media:e,addListener:function(){},removeListener:function(){}}}(e,Object(o.w)(this._platformId))}},{key:"activations",get:function(){var e=[];return this.registry.forEach((function(t,n){t.matches&&e.push(n)})),e}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i.ac(i.A),i.ac(i.C),i.ac(o.e))},e.\u0275prov=Object(i.Mb)({factory:function(){return new e(Object(i.ac)(i.A),Object(i.ac)(i.C),Object(i.ac)(o.e))},token:e,providedIn:"root"}),e}(),V={},U={alias:"print",mediaQuery:"print",priority:1e3},B=function(){var e=function(){function e(t,n,i){_classCallCheck(this,e),this.breakpoints=t,this.layoutConfig=n,this._document=i,this.registeredBeforeAfterPrintHooks=!1,this.isPrintingBeforeAfterEvent=!1,this.isPrinting=!1,this.queue=new W,this.deactivations=[]}return _createClass(e,[{key:"withPrintQuery",value:function(e){return[].concat(_toConsumableArray(e),["print"])}},{key:"isPrintEvent",value:function(e){return e.mediaQuery.startsWith("print")}},{key:"getEventBreakpoints",value:function(e){var t=e.mediaQuery,n=this.breakpoints.findByQuery(t);return(n?[].concat(_toConsumableArray(this.printBreakPoints),[n]):this.printBreakPoints).sort(D)}},{key:"updateEvent",value:function(e){var t=this.breakpoints.findByQuery(e.mediaQuery);return this.isPrintEvent(e)&&(t=this.getEventBreakpoints(e)[0],e.mediaQuery=t?t.mediaQuery:""),y(e,t)}},{key:"registerBeforeAfterPrintHooks",value:function(e){var t=this;this._document.defaultView&&!this.registeredBeforeAfterPrintHooks&&(this.registeredBeforeAfterPrintHooks=!0,this._document.defaultView.addEventListener("beforeprint",(function(){t.isPrinting||(t.isPrintingBeforeAfterEvent=!0,t.startPrinting(e,t.getEventBreakpoints(new f(!0,"print"))),e.updateStyles())})),this._document.defaultView.addEventListener("afterprint",(function(){t.isPrintingBeforeAfterEvent=!1,t.isPrinting&&(t.stopPrinting(e),e.updateStyles())})))}},{key:"interceptEvents",value:function(e){var t=this;return this.registerBeforeAfterPrintHooks(e),function(n){t.isPrintEvent(n)?n.matches&&!t.isPrinting?(t.startPrinting(e,t.getEventBreakpoints(n)),e.updateStyles()):n.matches||!t.isPrinting||t.isPrintingBeforeAfterEvent||(t.stopPrinting(e),e.updateStyles()):t.collectActivations(n)}}},{key:"blockPropagation",value:function(){var e=this;return function(t){return!(e.isPrinting||e.isPrintEvent(t))}}},{key:"startPrinting",value:function(e,t){this.isPrinting=!0,e.activatedBreakpoints=this.queue.addPrintBreakpoints(t)}},{key:"stopPrinting",value:function(e){e.activatedBreakpoints=this.deactivations,this.deactivations=[],this.queue.clear(),this.isPrinting=!1}},{key:"collectActivations",value:function(e){if(!this.isPrinting||this.isPrintingBeforeAfterEvent)if(e.matches)this.isPrintingBeforeAfterEvent||(this.deactivations=[]);else{var t=this.breakpoints.findByQuery(e.mediaQuery);t&&(this.deactivations.push(t),this.deactivations.sort(D))}}},{key:"printAlias",get:function(){return this.layoutConfig.printWithBreakpoints||[]}},{key:"printBreakPoints",get:function(){var e=this;return this.printAlias.map((function(t){return e.breakpoints.findByAlias(t)})).filter((function(e){return null!==e}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i.ac(j),i.ac(v),i.ac(o.e))},e.\u0275prov=Object(i.Mb)({factory:function(){return new e(Object(i.ac)(j),Object(i.ac)(v),Object(i.ac)(o.e))},token:e,providedIn:"root"}),e}(),W=function(){function e(){_classCallCheck(this,e),this.printBreakpoints=[]}return _createClass(e,[{key:"addPrintBreakpoints",value:function(e){var t=this;return e.push(U),e.sort(D),e.forEach((function(e){return t.addBreakpoint(e)})),this.printBreakpoints}},{key:"addBreakpoint",value:function(e){e&&void 0===this.printBreakpoints.find((function(t){return t.mediaQuery===e.mediaQuery}))&&(this.printBreakpoints=function(e){return!!e&&e.mediaQuery.startsWith("print")}(e)?[e].concat(_toConsumableArray(this.printBreakpoints)):[].concat(_toConsumableArray(this.printBreakpoints),[e]))}},{key:"clear",value:function(){this.printBreakpoints=[]}}]),e}();function F(e){for(var t in e){var n=e[t]||"";switch(t){case"display":e.display="flex"===n?["-webkit-flex","flex"]:"inline-flex"===n?["-webkit-inline-flex","inline-flex"]:n;break;case"align-items":case"align-self":case"align-content":case"flex":case"flex-basis":case"flex-flow":case"flex-grow":case"flex-shrink":case"flex-wrap":case"justify-content":e["-webkit-"+t]=n;break;case"flex-direction":n=n||"row",e["-webkit-flex-direction"]=n,e["flex-direction"]=n;break;case"order":e.order=e["-webkit-"+t]=isNaN(+n)?"0":n}}return e}var z=function(){var e=function(){function e(t,n,i,o){_classCallCheck(this,e),this._serverStylesheet=t,this._serverModuleLoaded=n,this._platformId=i,this.layoutConfig=o}return _createClass(e,[{key:"applyStyleToElement",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i={};"string"==typeof t&&(i[t]=n,t=i),i=this.layoutConfig.disableVendorPrefixes?t:F(t),this._applyMultiValueStyleToElement(i,e)}},{key:"applyStyleToElements",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=this.layoutConfig.disableVendorPrefixes?e:F(e);n.forEach((function(e){t._applyMultiValueStyleToElement(i,e)}))}},{key:"getFlowDirection",value:function(e){var t=this.lookupStyle(e,"flex-direction");return[t||"row",this.lookupInlineStyle(e,"flex-direction")||Object(o.x)(this._platformId)&&this._serverModuleLoaded?t:""]}},{key:"lookupAttributeValue",value:function(e,t){return e.getAttribute(t)||""}},{key:"lookupInlineStyle",value:function(e,t){return Object(o.w)(this._platformId)?e.style.getPropertyValue(t):this._getServerStyle(e,t)}},{key:"lookupStyle",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i="";return e&&((i=this.lookupInlineStyle(e,t))||(Object(o.w)(this._platformId)?n||(i=getComputedStyle(e).getPropertyValue(t)):this._serverModuleLoaded&&(i=this._serverStylesheet.getStyleForElement(e,t)))),i?i.trim():""}},{key:"_applyMultiValueStyleToElement",value:function(e,t){var n=this;Object.keys(e).sort().forEach((function(i){var r=e[i],s=Array.isArray(r)?r:[r];s.sort();var a,c=_createForOfIteratorHelper(s);try{for(c.s();!(a=c.n()).done;){var l=a.value;l=l?l+"":"",Object(o.w)(n._platformId)||!n._serverModuleLoaded?Object(o.w)(n._platformId)?t.style.setProperty(i,l):n._setServerStyle(t,i,l):n._serverStylesheet.addStyleToElement(t,i,l)}}catch(u){c.e(u)}finally{c.f()}}))}},{key:"_setServerStyle",value:function(e,t,n){t=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();var i=this._readStyleAttribute(e);i[t]=n||"",this._writeStyleAttribute(e,i)}},{key:"_getServerStyle",value:function(e,t){return this._readStyleAttribute(e)[t]||""}},{key:"_readStyleAttribute",value:function(e){var t={},n=e.getAttribute("style");if(n)for(var i=n.split(/;+/g),o=0;o<i.length;o++){var r=i[o].trim();if(r.length>0){var s=r.indexOf(":");if(-1===s)throw new Error("Invalid CSS style: "+r);t[r.substr(0,s).trim()]=r.substr(s+1).trim()}}return t}},{key:"_writeStyleAttribute",value:function(e,t){var n="";for(var i in t)t[i]&&(n+=i+":"+t[i]+";");e.setAttribute("style",n)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i.ac(g),i.ac(b),i.ac(i.C),i.ac(v))},e.\u0275prov=Object(i.Mb)({factory:function(){return new e(Object(i.ac)(g),Object(i.ac)(b),Object(i.ac)(i.C),Object(i.ac)(v))},token:e,providedIn:"root"}),e}(),q=function(){function e(){_classCallCheck(this,e),this.shouldCache=!0}return _createClass(e,[{key:"sideEffect",value:function(e,t,n){}}]),e}();function G(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"1",i=[t,n,e],o=e.indexOf("calc");if(o>0){i[2]=K(e.substring(o).trim());var r=e.substr(0,o).trim().split(" ");2==r.length&&(i[0]=r[0],i[1]=r[1])}else if(0==o)i[2]=K(e.trim());else{var s=e.split(" ");i=3===s.length?s:[t,n,e]}return i}function K(e){return e.replace(/[\s]/g,"").replace(/[\/\*\+\-]/g," $& ")}var Q=function(){var e=function(){function e(t,n,i){_classCallCheck(this,e),this.matchMedia=t,this.breakpoints=n,this.hook=i,this.activatedBreakpoints=[],this.elementMap=new Map,this.elementKeyMap=new WeakMap,this.watcherMap=new WeakMap,this.updateMap=new WeakMap,this.clearMap=new WeakMap,this.subject=new r.a,this.observeActivations()}return _createClass(e,[{key:"onMediaChange",value:function(e){var t=this.findByQuery(e.mediaQuery);t&&((e=y(e,t)).matches&&-1===this.activatedBreakpoints.indexOf(t)?(this.activatedBreakpoints.push(t),this.activatedBreakpoints.sort(D),this.updateStyles()):e.matches||-1===this.activatedBreakpoints.indexOf(t)||(this.activatedBreakpoints.splice(this.activatedBreakpoints.indexOf(t),1),this.activatedBreakpoints.sort(D),this.updateStyles()))}},{key:"init",value:function(e,t,n,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];Y(this.updateMap,e,t,n),Y(this.clearMap,e,t,i),this.buildElementKeyMap(e,t),this.watchExtraTriggers(e,t,o)}},{key:"getValue",value:function(e,t,n){var i=this.elementMap.get(e);if(i){var o=void 0!==n?i.get(n):this.getActivatedValues(i,t);if(o)return o.get(t)}}},{key:"hasValue",value:function(e,t){var n=this.elementMap.get(e);if(n){var i=this.getActivatedValues(n,t);if(i)return void 0!==i.get(t)||!1}return!1}},{key:"setValue",value:function(e,t,n,i){var o=this.elementMap.get(e);if(o){var r=(o.get(i)||new Map).set(t,n);o.set(i,r),this.elementMap.set(e,o)}else o=(new Map).set(i,(new Map).set(t,n)),this.elementMap.set(e,o);var s=this.getValue(e,t);void 0!==s&&this.updateElement(e,t,s)}},{key:"trackValue",value:function(e,t){return this.subject.asObservable().pipe(Object(l.a)((function(n){return n.element===e&&n.key===t})))}},{key:"updateStyles",value:function(){var e=this;this.elementMap.forEach((function(t,n){var i=new Set(e.elementKeyMap.get(n)),o=e.getActivatedValues(t);o&&o.forEach((function(t,o){e.updateElement(n,o,t),i.delete(o)})),i.forEach((function(i){if(o=e.getActivatedValues(t,i)){var r=o.get(i);e.updateElement(n,i,r)}else e.clearElement(n,i)}))}))}},{key:"clearElement",value:function(e,t){var n=this.clearMap.get(e);if(n){var i=n.get(t);i&&(i(),this.subject.next({element:e,key:t,value:""}))}}},{key:"updateElement",value:function(e,t,n){var i=this.updateMap.get(e);if(i){var o=i.get(t);o&&(o(n),this.subject.next({element:e,key:t,value:n}))}}},{key:"releaseElement",value:function(e){var t=this.watcherMap.get(e);t&&(t.forEach((function(e){return e.unsubscribe()})),this.watcherMap.delete(e));var n=this.elementMap.get(e);n&&(n.forEach((function(e,t){return n.delete(t)})),this.elementMap.delete(e))}},{key:"triggerUpdate",value:function(e,t){var n=this,i=this.elementMap.get(e);if(i){var o=this.getActivatedValues(i,t);o&&(t?this.updateElement(e,t,o.get(t)):o.forEach((function(t,i){return n.updateElement(e,i,t)})))}}},{key:"buildElementKeyMap",value:function(e,t){var n=this.elementKeyMap.get(e);n||(n=new Set,this.elementKeyMap.set(e,n)),n.add(t)}},{key:"watchExtraTriggers",value:function(e,t,n){var i=this;if(n&&n.length){var o=this.watcherMap.get(e);if(o||(o=new Map,this.watcherMap.set(e,o)),!o.get(t)){var r=Object(c.a).apply(void 0,_toConsumableArray(n)).subscribe((function(){var n=i.getValue(e,t);i.updateElement(e,t,n)}));o.set(t,r)}}}},{key:"findByQuery",value:function(e){return this.breakpoints.findByQuery(e)}},{key:"getActivatedValues",value:function(e,t){for(var n=0;n<this.activatedBreakpoints.length;n++){var i=e.get(this.activatedBreakpoints[n].alias);if(i&&(void 0===t||i.has(t)))return i}var o=e.get("");return void 0===t||o&&o.has(t)?o:void 0}},{key:"observeActivations",value:function(){var e=this.breakpoints.items.map((function(e){return e.mediaQuery}));this.matchMedia.observe(this.hook.withPrintQuery(e)).pipe(Object(u.a)(this.hook.interceptEvents(this)),Object(l.a)(this.hook.blockPropagation())).subscribe(this.onMediaChange.bind(this))}},{key:"activatedAlias",get:function(){return this.activatedBreakpoints[0]?this.activatedBreakpoints[0].alias:""}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i.ac(N),i.ac(j),i.ac(B))},e.\u0275prov=Object(i.Mb)({factory:function(){return new e(Object(i.ac)(N),Object(i.ac)(j),Object(i.ac)(B))},token:e,providedIn:"root"}),e}();function Y(e,t,n,i){if(void 0!==i){var o=e.get(t);o||(o=new Map,e.set(t,o)),o.set(n,i)}}},pLL0:function(e,t){t.pack=function(e){throw new TypeError("Not yet implemented")},t.unpack=function(e){throw new TypeError("Not yet implemented")}},rUL0:function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0;var r=function(e){function t(t,n,i,o,r){var s=e.call(this,!1,t,n)||this;return s.id=i,o!==i&&(s.name=o),s.reason=r,s}return o(t,e),t.prototype.callDefaultBehavior=function(){},t}(n("hzOQ").Event);t.RecordingEvent=r},ryRr:function(e,t,n){"use strict";t.__esModule=!0;var i=n("DPKQ"),o=n("9m68").OpenViduLogger.getInstance(),r=function(){function e(e,t){this.session=e,this.disposed=!1;var n="'Connection' created ";t?(n+="(remote) with 'connectionId' ["+t.id+"]",this.options=t,this.connectionId=t.id,this.creationTime=t.createdAt,t.metadata&&(this.data=t.metadata),t.streams&&this.initRemoteStreams(t.streams)):n+="(local)",o.info(n)}return e.prototype.sendIceCandidate=function(e){o.debug((this.stream.outboundStreamOpts?"Local":"Remote")+"candidate for"+this.connectionId,e),this.session.openvidu.sendRequest("onIceCandidate",{endpointName:this.connectionId,candidate:e.candidate,sdpMid:e.sdpMid,sdpMLineIndex:e.sdpMLineIndex},(function(e,t){e&&o.error("Error sending ICE candidate: "+JSON.stringify(e))}))},e.prototype.initRemoteStreams=function(e){var t=this;e.forEach((function(e){var n={id:e.id,createdAt:e.createdAt,connection:t,hasAudio:e.hasAudio,hasVideo:e.hasVideo,audioActive:e.audioActive,videoActive:e.videoActive,typeOfVideo:e.typeOfVideo,frameRate:e.frameRate,videoDimensions:e.videoDimensions?JSON.parse(e.videoDimensions):void 0,filter:e.filter?e.filter:void 0},o=new i.Stream(t.session,n);t.addStream(o)})),o.info("Remote 'Connection' with 'connectionId' ["+this.connectionId+"] is now configured for receiving Streams with options: ",this.stream.inboundStreamOpts)},e.prototype.addStream=function(e){e.connection=this,this.stream=e},e.prototype.removeStream=function(e){delete this.stream},e.prototype.dispose=function(){this.stream&&delete this.stream,this.disposed=!0},e}();t.Connection=r},suHS:function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0;var r=function(e){function t(t,n,i,o){var r=e.call(this,!1,t,"signal")||this;return n&&(r.type="signal:"+n),r.data=i,r.from=o,r}return o(t,e),t.prototype.callDefaultBehavior=function(){},t}(n("hzOQ").Event);t.SignalEvent=r},"t/6/":function(e,t,n){"use strict";t.__esModule=!0,t.start=t.run=t.TOKENS=t.State=void 0;var i=n("FlKs"),o=n("dlaP"),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(o),s="aaa|aarp|abarth|abb|abbott|abbvie|abc|able|abogado|abudhabi|ac|academy|accenture|accountant|accountants|aco|active|actor|ad|adac|ads|adult|ae|aeg|aero|aetna|af|afamilycompany|afl|africa|ag|agakhan|agency|ai|aig|aigo|airbus|airforce|airtel|akdn|al|alfaromeo|alibaba|alipay|allfinanz|allstate|ally|alsace|alstom|am|americanexpress|americanfamily|amex|amfam|amica|amsterdam|analytics|android|anquan|anz|ao|aol|apartments|app|apple|aq|aquarelle|ar|arab|aramco|archi|army|arpa|art|arte|as|asda|asia|associates|at|athleta|attorney|au|auction|audi|audible|audio|auspost|author|auto|autos|avianca|aw|aws|ax|axa|az|azure|ba|baby|baidu|banamex|bananarepublic|band|bank|bar|barcelona|barclaycard|barclays|barefoot|bargains|baseball|basketball|bauhaus|bayern|bb|bbc|bbt|bbva|bcg|bcn|bd|be|beats|beauty|beer|bentley|berlin|best|bestbuy|bet|bf|bg|bh|bharti|bi|bible|bid|bike|bing|bingo|bio|biz|bj|black|blackfriday|blanco|blockbuster|blog|bloomberg|blue|bm|bms|bmw|bn|bnl|bnpparibas|bo|boats|boehringer|bofa|bom|bond|boo|book|booking|boots|bosch|bostik|boston|bot|boutique|box|br|bradesco|bridgestone|broadway|broker|brother|brussels|bs|bt|budapest|bugatti|build|builders|business|buy|buzz|bv|bw|by|bz|bzh|ca|cab|cafe|cal|call|calvinklein|cam|camera|camp|cancerresearch|canon|capetown|capital|capitalone|car|caravan|cards|care|career|careers|cars|cartier|casa|case|caseih|cash|casino|cat|catering|catholic|cba|cbn|cbre|cbs|cc|cd|ceb|center|ceo|cern|cf|cfa|cfd|cg|ch|chanel|channel|chase|chat|cheap|chintai|chloe|christmas|chrome|chrysler|church|ci|cipriani|circle|cisco|citadel|citi|citic|city|cityeats|ck|cl|claims|cleaning|click|clinic|clinique|clothing|cloud|club|clubmed|cm|cn|co|coach|codes|coffee|college|cologne|com|comcast|commbank|community|company|compare|computer|comsec|condos|construction|consulting|contact|contractors|cooking|cookingchannel|cool|coop|corsica|country|coupon|coupons|courses|cr|credit|creditcard|creditunion|cricket|crown|crs|cruise|cruises|csc|cu|cuisinella|cv|cw|cx|cy|cymru|cyou|cz|dabur|dad|dance|data|date|dating|datsun|day|dclk|dds|de|deal|dealer|deals|degree|delivery|dell|deloitte|delta|democrat|dental|dentist|desi|design|dev|dhl|diamonds|diet|digital|direct|directory|discount|discover|dish|diy|dj|dk|dm|dnp|do|docs|doctor|dodge|dog|doha|domains|dot|download|drive|dtv|dubai|duck|dunlop|duns|dupont|durban|dvag|dvr|dz|earth|eat|ec|eco|edeka|edu|education|ee|eg|email|emerck|energy|engineer|engineering|enterprises|epost|epson|equipment|er|ericsson|erni|es|esq|estate|esurance|et|etisalat|eu|eurovision|eus|events|everbank|exchange|expert|exposed|express|extraspace|fage|fail|fairwinds|faith|family|fan|fans|farm|farmers|fashion|fast|fedex|feedback|ferrari|ferrero|fi|fiat|fidelity|fido|film|final|finance|financial|fire|firestone|firmdale|fish|fishing|fit|fitness|fj|fk|flickr|flights|flir|florist|flowers|fly|fm|fo|foo|food|foodnetwork|football|ford|forex|forsale|forum|foundation|fox|fr|free|fresenius|frl|frogans|frontdoor|frontier|ftr|fujitsu|fujixerox|fun|fund|furniture|futbol|fyi|ga|gal|gallery|gallo|gallup|game|games|gap|garden|gb|gbiz|gd|gdn|ge|gea|gent|genting|george|gf|gg|ggee|gh|gi|gift|gifts|gives|giving|gl|glade|glass|gle|global|globo|gm|gmail|gmbh|gmo|gmx|gn|godaddy|gold|goldpoint|golf|goo|goodhands|goodyear|goog|google|gop|got|gov|gp|gq|gr|grainger|graphics|gratis|green|gripe|grocery|group|gs|gt|gu|guardian|gucci|guge|guide|guitars|guru|gw|gy|hair|hamburg|hangout|haus|hbo|hdfc|hdfcbank|health|healthcare|help|helsinki|here|hermes|hgtv|hiphop|hisamitsu|hitachi|hiv|hk|hkt|hm|hn|hockey|holdings|holiday|homedepot|homegoods|homes|homesense|honda|honeywell|horse|hospital|host|hosting|hot|hoteles|hotels|hotmail|house|how|hr|hsbc|ht|htc|hu|hughes|hyatt|hyundai|ibm|icbc|ice|icu|id|ie|ieee|ifm|ikano|il|im|imamat|imdb|immo|immobilien|in|industries|infiniti|info|ing|ink|institute|insurance|insure|int|intel|international|intuit|investments|io|ipiranga|iq|ir|irish|is|iselect|ismaili|ist|istanbul|it|itau|itv|iveco|iwc|jaguar|java|jcb|jcp|je|jeep|jetzt|jewelry|jio|jlc|jll|jm|jmp|jnj|jo|jobs|joburg|jot|joy|jp|jpmorgan|jprs|juegos|juniper|kaufen|kddi|ke|kerryhotels|kerrylogistics|kerryproperties|kfh|kg|kh|ki|kia|kim|kinder|kindle|kitchen|kiwi|km|kn|koeln|komatsu|kosher|kp|kpmg|kpn|kr|krd|kred|kuokgroup|kw|ky|kyoto|kz|la|lacaixa|ladbrokes|lamborghini|lamer|lancaster|lancia|lancome|land|landrover|lanxess|lasalle|lat|latino|latrobe|law|lawyer|lb|lc|lds|lease|leclerc|lefrak|legal|lego|lexus|lgbt|li|liaison|lidl|life|lifeinsurance|lifestyle|lighting|like|lilly|limited|limo|lincoln|linde|link|lipsy|live|living|lixil|lk|loan|loans|locker|locus|loft|lol|london|lotte|lotto|love|lpl|lplfinancial|lr|ls|lt|ltd|ltda|lu|lundbeck|lupin|luxe|luxury|lv|ly|ma|macys|madrid|maif|maison|makeup|man|management|mango|map|market|marketing|markets|marriott|marshalls|maserati|mattel|mba|mc|mckinsey|md|me|med|media|meet|melbourne|meme|memorial|men|menu|meo|merckmsd|metlife|mg|mh|miami|microsoft|mil|mini|mint|mit|mitsubishi|mk|ml|mlb|mls|mm|mma|mn|mo|mobi|mobile|mobily|moda|moe|moi|mom|monash|money|monster|mopar|mormon|mortgage|moscow|moto|motorcycles|mov|movie|movistar|mp|mq|mr|ms|msd|mt|mtn|mtr|mu|museum|mutual|mv|mw|mx|my|mz|na|nab|nadex|nagoya|name|nationwide|natura|navy|nba|nc|ne|nec|net|netbank|netflix|network|neustar|new|newholland|news|next|nextdirect|nexus|nf|nfl|ng|ngo|nhk|ni|nico|nike|nikon|ninja|nissan|nissay|nl|no|nokia|northwesternmutual|norton|now|nowruz|nowtv|np|nr|nra|nrw|ntt|nu|nyc|nz|obi|observer|off|office|okinawa|olayan|olayangroup|oldnavy|ollo|om|omega|one|ong|onl|online|onyourside|ooo|open|oracle|orange|org|organic|origins|osaka|otsuka|ott|ovh|pa|page|panasonic|panerai|paris|pars|partners|parts|party|passagens|pay|pccw|pe|pet|pf|pfizer|pg|ph|pharmacy|phd|philips|phone|photo|photography|photos|physio|piaget|pics|pictet|pictures|pid|pin|ping|pink|pioneer|pizza|pk|pl|place|play|playstation|plumbing|plus|pm|pn|pnc|pohl|poker|politie|porn|post|pr|pramerica|praxi|press|prime|pro|prod|productions|prof|progressive|promo|properties|property|protection|pru|prudential|ps|pt|pub|pw|pwc|py|qa|qpon|quebec|quest|qvc|racing|radio|raid|re|read|realestate|realtor|realty|recipes|red|redstone|redumbrella|rehab|reise|reisen|reit|reliance|ren|rent|rentals|repair|report|republican|rest|restaurant|review|reviews|rexroth|rich|richardli|ricoh|rightathome|ril|rio|rip|rmit|ro|rocher|rocks|rodeo|rogers|room|rs|rsvp|ru|rugby|ruhr|run|rw|rwe|ryukyu|sa|saarland|safe|safety|sakura|sale|salon|samsclub|samsung|sandvik|sandvikcoromant|sanofi|sap|sapo|sarl|sas|save|saxo|sb|sbi|sbs|sc|sca|scb|schaeffler|schmidt|scholarships|school|schule|schwarz|science|scjohnson|scor|scot|sd|se|search|seat|secure|security|seek|select|sener|services|ses|seven|sew|sex|sexy|sfr|sg|sh|shangrila|sharp|shaw|shell|shia|shiksha|shoes|shop|shopping|shouji|show|showtime|shriram|si|silk|sina|singles|site|sj|sk|ski|skin|sky|skype|sl|sling|sm|smart|smile|sn|sncf|so|soccer|social|softbank|software|sohu|solar|solutions|song|sony|soy|space|spiegel|spot|spreadbetting|sr|srl|srt|st|stada|staples|star|starhub|statebank|statefarm|statoil|stc|stcgroup|stockholm|storage|store|stream|studio|study|style|su|sucks|supplies|supply|support|surf|surgery|suzuki|sv|swatch|swiftcover|swiss|sx|sy|sydney|symantec|systems|sz|tab|taipei|talk|taobao|target|tatamotors|tatar|tattoo|tax|taxi|tc|tci|td|tdk|team|tech|technology|tel|telecity|telefonica|temasek|tennis|teva|tf|tg|th|thd|theater|theatre|tiaa|tickets|tienda|tiffany|tips|tires|tirol|tj|tjmaxx|tjx|tk|tkmaxx|tl|tm|tmall|tn|to|today|tokyo|tools|top|toray|toshiba|total|tours|town|toyota|toys|tr|trade|trading|training|travel|travelchannel|travelers|travelersinsurance|trust|trv|tt|tube|tui|tunes|tushu|tv|tvs|tw|tz|ua|ubank|ubs|uconnect|ug|uk|unicom|university|uno|uol|ups|us|uy|uz|va|vacations|vana|vanguard|vc|ve|vegas|ventures|verisign|versicherung|vet|vg|vi|viajes|video|vig|viking|villas|vin|vip|virgin|visa|vision|vista|vistaprint|viva|vivo|vlaanderen|vn|vodka|volkswagen|volvo|vote|voting|voto|voyage|vu|vuelos|wales|walmart|walter|wang|wanggou|warman|watch|watches|weather|weatherchannel|webcam|weber|website|wed|wedding|weibo|weir|wf|whoswho|wien|wiki|williamhill|win|windows|wine|winners|wme|wolterskluwer|woodside|work|works|world|wow|ws|wtc|wtf|xbox|xerox|xfinity|xihuan|xin|xn--11b4c3d|xn--1ck2e1b|xn--1qqw23a|xn--2scrj9c|xn--30rr7y|xn--3bst00m|xn--3ds443g|xn--3e0b707e|xn--3hcrj9c|xn--3oq18vl8pn36a|xn--3pxu8k|xn--42c2d9a|xn--45br5cyl|xn--45brj9c|xn--45q11c|xn--4gbrim|xn--54b7fta0cc|xn--55qw42g|xn--55qx5d|xn--5su34j936bgsg|xn--5tzm5g|xn--6frz82g|xn--6qq986b3xl|xn--80adxhks|xn--80ao21a|xn--80aqecdr1a|xn--80asehdb|xn--80aswg|xn--8y0a063a|xn--90a3ac|xn--90ae|xn--90ais|xn--9dbq2a|xn--9et52u|xn--9krt00a|xn--b4w605ferd|xn--bck1b9a5dre4c|xn--c1avg|xn--c2br7g|xn--cck2b3b|xn--cg4bki|xn--clchc0ea0b2g2a9gcd|xn--czr694b|xn--czrs0t|xn--czru2d|xn--d1acj3b|xn--d1alf|xn--e1a4c|xn--eckvdtc9d|xn--efvy88h|xn--estv75g|xn--fct429k|xn--fhbei|xn--fiq228c5hs|xn--fiq64b|xn--fiqs8s|xn--fiqz9s|xn--fjq720a|xn--flw351e|xn--fpcrj9c3d|xn--fzc2c9e2c|xn--fzys8d69uvgm|xn--g2xx48c|xn--gckr3f0f|xn--gecrj9c|xn--gk3at1e|xn--h2breg3eve|xn--h2brj9c|xn--h2brj9c8c|xn--hxt814e|xn--i1b6b1a6a2e|xn--imr513n|xn--io0a7i|xn--j1aef|xn--j1amh|xn--j6w193g|xn--jlq61u9w7b|xn--jvr189m|xn--kcrx77d1x4a|xn--kprw13d|xn--kpry57d|xn--kpu716f|xn--kput3i|xn--l1acc|xn--lgbbat1ad8j|xn--mgb9awbf|xn--mgba3a3ejt|xn--mgba3a4f16a|xn--mgba7c0bbn0a|xn--mgbaakc7dvf|xn--mgbaam7a8h|xn--mgbab2bd|xn--mgbai9azgqp6j|xn--mgbayh7gpa|xn--mgbb9fbpob|xn--mgbbh1a|xn--mgbbh1a71e|xn--mgbc0a9azcg|xn--mgbca7dzdo|xn--mgberp4a5d4ar|xn--mgbgu82a|xn--mgbi4ecexp|xn--mgbpl2fh|xn--mgbt3dhd|xn--mgbtx2b|xn--mgbx4cd0ab|xn--mix891f|xn--mk1bu44c|xn--mxtq1m|xn--ngbc5azd|xn--ngbe9e0a|xn--ngbrx|xn--node|xn--nqv7f|xn--nqv7fs00ema|xn--nyqy26a|xn--o3cw4h|xn--ogbpf8fl|xn--p1acf|xn--p1ai|xn--pbt977c|xn--pgbs0dh|xn--pssy2u|xn--q9jyb4c|xn--qcka1pmc|xn--qxam|xn--rhqv96g|xn--rovu88b|xn--rvc1e0am3e|xn--s9brj9c|xn--ses554g|xn--t60b56a|xn--tckwe|xn--tiq49xqyj|xn--unup4y|xn--vermgensberater-ctb|xn--vermgensberatung-pwb|xn--vhquv|xn--vuq861b|xn--w4r85el8fhu5dnra|xn--w4rs40l|xn--wgbh1c|xn--wgbl6a|xn--xhq521b|xn--xkc2al3hye2a|xn--xkc2dl3a5ee0h|xn--y9a3aq|xn--yfro4i67o|xn--ygbi2ammx|xn--zfr164b|xperia|xxx|xyz|yachts|yahoo|yamaxun|yandex|ye|yodobashi|yoga|yokohama|you|youtube|yt|yun|za|zappos|zara|zero|zip|zippo|zm|zone|zuerich|zw".split("|"),a="0123456789".split(""),c="0123456789abcdefghijklmnopqrstuvwxyz".split(""),l=[" ","\f","\r","\t","\v","\xa0","\u1680","\u180e"],u=[],d=function(e){return new i.CharacterState(e)},p=d(),h=d(o.NUM),f=d(o.DOMAIN),g=d(),m=d(o.WS);p.on("@",d(o.AT)).on(".",d(o.DOT)).on("+",d(o.PLUS)).on("#",d(o.POUND)).on("?",d(o.QUERY)).on("/",d(o.SLASH)).on("_",d(o.UNDERSCORE)).on(":",d(o.COLON)).on("{",d(o.OPENBRACE)).on("[",d(o.OPENBRACKET)).on("<",d(o.OPENANGLEBRACKET)).on("(",d(o.OPENPAREN)).on("}",d(o.CLOSEBRACE)).on("]",d(o.CLOSEBRACKET)).on(">",d(o.CLOSEANGLEBRACKET)).on(")",d(o.CLOSEPAREN)).on("&",d(o.AMPERSAND)).on([",",";","!",'"',"'"],d(o.PUNCTUATION)),p.on("\n",d(o.NL)).on(l,m),m.on(l,m);for(var v=0;v<s.length;v++){var b=(0,i.stateify)(s[v],p,o.TLD,o.DOMAIN);u.push.apply(u,b)}var _=(0,i.stateify)("file",p,o.DOMAIN,o.DOMAIN),y=(0,i.stateify)("ftp",p,o.DOMAIN,o.DOMAIN),C=(0,i.stateify)("http",p,o.DOMAIN,o.DOMAIN),O=(0,i.stateify)("mailto",p,o.DOMAIN,o.DOMAIN);u.push.apply(u,_),u.push.apply(u,y),u.push.apply(u,C),u.push.apply(u,O);var S=_.pop(),k=y.pop(),x=C.pop(),M=O.pop(),w=d(o.DOMAIN),E=d(o.PROTOCOL),P=d(o.MAILTO);k.on("s",w).on(":",E),x.on("s",w).on(":",E),u.push(w),S.on(":",E),w.on(":",E),M.on(":",P);var I=(0,i.stateify)("localhost",p,o.LOCALHOST,o.DOMAIN);u.push.apply(u,I),p.on(a,h),h.on("-",g).on(a,h).on(c,f),f.on("-",g).on(c,f);for(var R=0;R<u.length;R++)u[R].on("-",g).on(c,f);g.on("-",g).on(a,f).on(c,f),p.defaultTransition=d(o.SYM);var T=p;t.State=i.CharacterState,t.TOKENS=r,t.run=function(e){for(var t=e.replace(/[A-Z]/g,(function(e){return e.toLowerCase()})),n=e.length,i=[],o=0;o<n;){for(var r=p,s=null,a=0,c=null,l=-1;o<n&&(s=r.next(t[o]));)(r=s).accepts()?(l=0,c=r):l>=0&&l++,a++,o++;if(!(l<0)){o-=l,a-=l;var u=c.emit();i.push(new u(e.substr(o-a,a)))}}return i},t.start=T},tInm:function(e,t,n){"use strict";t.__esModule=!0;var i=n("Yn0Z"),o=n("bDgZ"),r=n("9m68").OpenViduLogger.getInstance(),s=function(){function e(e){this.stream=e,this.chunks=[],this.connectionId=this.stream.connection?this.stream.connection.connectionId:"default-connection",this.id=this.stream.streamId+"_"+this.connectionId+"_localrecord",this.state=i.LocalRecorderState.READY}return e.prototype.record=function(e){var t=this;return new Promise((function(n,o){try{if("undefined"==typeof MediaRecorder)throw r.error("MediaRecorder not supported on your browser. See compatibility in https://caniuse.com/#search=MediaRecorder"),Error("MediaRecorder not supported on your browser. See compatibility in https://caniuse.com/#search=MediaRecorder");if(t.state!==i.LocalRecorderState.READY)throw Error("'LocalRecord.record()' needs 'LocalRecord.state' to be 'READY' (current value: '"+t.state+"'). Call 'LocalRecorder.clean()' or init a new LocalRecorder before");r.log("Starting local recording of stream '"+t.stream.streamId+"' of connection '"+t.connectionId+"'");var s={};"function"==typeof MediaRecorder.isTypeSupported?e?(MediaRecorder.isTypeSupported(e)||o(new Error('mimeType "'+e+'" is not supported')),s={mimeType:e}):r.log("No mimeType parameter provided. Using default codecs"):r.warn("MediaRecorder#isTypeSupported is not supported. Using default codecs"),t.mediaRecorder=new MediaRecorder(t.stream.getMediaStream(),s),t.mediaRecorder.start(10)}catch(a){o(a)}t.mediaRecorder.ondataavailable=function(e){t.chunks.push(e.data)},t.mediaRecorder.onerror=function(e){r.error("MediaRecorder error: ",e)},t.mediaRecorder.onstart=function(){r.log("MediaRecorder started (state="+t.mediaRecorder.state+")")},t.mediaRecorder.onstop=function(){t.onStopDefault()},t.mediaRecorder.onpause=function(){r.log("MediaRecorder paused (state="+t.mediaRecorder.state+")")},t.mediaRecorder.onresume=function(){r.log("MediaRecorder resumed (state="+t.mediaRecorder.state+")")},t.mediaRecorder.onwarning=function(e){r.log("MediaRecorder warning: "+e)},t.state=i.LocalRecorderState.RECORDING,n()}))},e.prototype.stop=function(){var e=this;return new Promise((function(t,n){try{if(e.state===i.LocalRecorderState.READY||e.state===i.LocalRecorderState.FINISHED)throw Error("'LocalRecord.stop()' needs 'LocalRecord.state' to be 'RECORDING' or 'PAUSED' (current value: '"+e.state+"'). Call 'LocalRecorder.start()' before");e.mediaRecorder.onstop=function(){e.onStopDefault(),t()},e.mediaRecorder.stop()}catch(o){n(o)}}))},e.prototype.pause=function(){var e=this;return new Promise((function(t,n){try{e.state!==i.LocalRecorderState.RECORDING&&n(Error("'LocalRecord.pause()' needs 'LocalRecord.state' to be 'RECORDING' (current value: '"+e.state+"'). Call 'LocalRecorder.start()' or 'LocalRecorder.resume()' before")),e.mediaRecorder.pause(),e.state=i.LocalRecorderState.PAUSED}catch(o){n(o)}}))},e.prototype.resume=function(){var e=this;return new Promise((function(t,n){try{if(e.state!==i.LocalRecorderState.PAUSED)throw Error("'LocalRecord.resume()' needs 'LocalRecord.state' to be 'PAUSED' (current value: '"+e.state+"'). Call 'LocalRecorder.pause()' before");e.mediaRecorder.resume(),e.state=i.LocalRecorderState.RECORDING}catch(o){n(o)}}))},e.prototype.preview=function(e){if(this.state!==i.LocalRecorderState.FINISHED)throw Error("'LocalRecord.preview()' needs 'LocalRecord.state' to be 'FINISHED' (current value: '"+this.state+"'). Call 'LocalRecorder.stop()' before");if(this.videoPreview=document.createElement("video"),this.videoPreview.id=this.id,this.videoPreview.autoplay=!0,"Safari"===o.name&&this.videoPreview.setAttribute("playsinline","true"),"string"==typeof e){var t=document.getElementById(e);t&&(this.videoPreview=t.appendChild(this.videoPreview))}else this.videoPreview=e.appendChild(this.videoPreview);return this.videoPreview.src=this.videoPreviewSrc,this.videoPreview},e.prototype.clean=function(){var e=this,t=function(){delete e.blob,e.chunks=[],delete e.mediaRecorder,e.state=i.LocalRecorderState.READY};this.state===i.LocalRecorderState.RECORDING||this.state===i.LocalRecorderState.PAUSED?this.stop().then((function(){return t()})).catch((function(){return t()})):t()},e.prototype.download=function(){if(this.state!==i.LocalRecorderState.FINISHED)throw Error("'LocalRecord.download()' needs 'LocalRecord.state' to be 'FINISHED' (current value: '"+this.state+"'). Call 'LocalRecorder.stop()' before");var e=document.createElement("a");e.style.display="none",document.body.appendChild(e);var t=window.URL.createObjectURL(this.blob);e.href=t,e.download=this.id+".webm",e.click(),window.URL.revokeObjectURL(t),document.body.removeChild(e)},e.prototype.getBlob=function(){if(this.state!==i.LocalRecorderState.FINISHED)throw Error("Call 'LocalRecord.stop()' before getting Blob file");return this.blob},e.prototype.uploadAsBinary=function(e,t){var n=this;return new Promise((function(o,r){if(n.state!==i.LocalRecorderState.FINISHED)r(Error("'LocalRecord.uploadAsBinary()' needs 'LocalRecord.state' to be 'FINISHED' (current value: '"+n.state+"'). Call 'LocalRecorder.stop()' before"));else{var s=new XMLHttpRequest;if(s.open("POST",e,!0),"object"==typeof t)for(var a=0,c=Object.keys(t);a<c.length;a++){var l=c[a];s.setRequestHeader(l,t[l])}s.onreadystatechange=function(){4===s.readyState&&("2"===s.status.toString().charAt(0)?o(s.responseText):r(s.status))},s.send(n.blob)}}))},e.prototype.uploadAsMultipartfile=function(e,t){var n=this;return new Promise((function(o,r){if(n.state!==i.LocalRecorderState.FINISHED)r(Error("'LocalRecord.uploadAsMultipartfile()' needs 'LocalRecord.state' to be 'FINISHED' (current value: '"+n.state+"'). Call 'LocalRecorder.stop()' before"));else{var s=new XMLHttpRequest;if(s.open("POST",e,!0),"object"==typeof t)for(var a=0,c=Object.keys(t);a<c.length;a++){var l=c[a];s.setRequestHeader(l,t[l])}var u=new FormData;u.append("file",n.blob,n.id+".webm"),s.onreadystatechange=function(){4===s.readyState&&("2"===s.status.toString().charAt(0)?o(s.responseText):r(s.status))},s.send(u)}}))},e.prototype.onStopDefault=function(){r.log("MediaRecorder stopped  (state="+this.mediaRecorder.state+")"),this.blob=new Blob(this.chunks,{type:"video/webm"}),this.chunks=[],this.videoPreviewSrc=window.URL.createObjectURL(this.blob),this.state=i.LocalRecorderState.FINISHED},e}();t.LocalRecorder=s},tMSY:function(e,t){function n(){}e.exports=n,n.mixin=function(e){var t=e.prototype||e;t.isWildEmitter=!0,t.on=function(e,t,n){this.callbacks=this.callbacks||{};var i=3===arguments.length,o=i?arguments[1]:void 0,r=i?arguments[2]:arguments[1];return r._groupName=o,(this.callbacks[e]=this.callbacks[e]||[]).push(r),this},t.once=function(e,t,n){var i=this,o=3===arguments.length,r=o?arguments[1]:void 0,s=o?arguments[2]:arguments[1];function a(){i.off(e,a),s.apply(this,arguments)}return this.on(e,r,a),this},t.releaseGroup=function(e){var t,n,i,o;for(t in this.callbacks=this.callbacks||{},this.callbacks)for(n=0,i=(o=this.callbacks[t]).length;n<i;n++)o[n]._groupName===e&&(o.splice(n,1),n--,i--);return this},t.off=function(e,t){this.callbacks=this.callbacks||{};var n,i=this.callbacks[e];return i?1===arguments.length?(delete this.callbacks[e],this):(-1!==(n=i.indexOf(t))&&(i.splice(n,1),0===i.length&&delete this.callbacks[e]),this):this},t.emit=function(e){this.callbacks=this.callbacks||{};var t,n,i,o=[].slice.call(arguments,1),r=this.callbacks[e],s=this.getWildcardCallbacks(e);if(r)for(t=0,n=(i=r.slice()).length;t<n&&i[t];++t)i[t].apply(this,o);if(s)for(n=s.length,t=0,n=(i=s.slice()).length;t<n&&i[t];++t)i[t].apply(this,[e].concat(o));return this},t.getWildcardCallbacks=function(e){this.callbacks=this.callbacks||{};var t,n,i=[];for(t in this.callbacks)n=t.split("*"),("*"===t||2===n.length&&e.slice(0,n[0].length)===n[0])&&(i=i.concat(this.callbacks[t]));return i}},n.mixin(n)},ttXH:function(e,t,n){var i,o=n("tMSY");"undefined"!=typeof window&&(i=window.AudioContext||window.webkitAudioContext);var r=null;e.exports=function(e,t){var n=new o;if(!i)return n;var s,a,c,l=(t=t||{}).smoothing||.1,u=t.interval||50,d=t.threshold,p=t.play,h=t.history||10,f=!0;r=t.audioContext||r||new i,(c=r.createAnalyser()).fftSize=512,c.smoothingTimeConstant=l,a=new Float32Array(c.frequencyBinCount),e.jquery&&(e=e[0]),e instanceof HTMLAudioElement||e instanceof HTMLVideoElement?(s=r.createMediaElementSource(e),void 0===p&&(p=!0),d=d||-50):(s=r.createMediaStreamSource(e),d=d||-50),s.connect(c),p&&c.connect(r.destination),n.speaking=!1,n.suspend=function(){return r.suspend()},n.resume=function(){return r.resume()},Object.defineProperty(n,"state",{get:function(){return r.state}}),r.onstatechange=function(){n.emit("state_change",r.state)},n.setThreshold=function(e){d=e},n.setInterval=function(e){u=e},n.stop=function(){f=!1,n.emit("volume_change",-100,d),n.speaking&&(n.speaking=!1,n.emit("stopped_speaking")),c.disconnect(),s.disconnect()},n.speakingHistory=[];for(var g=0;g<h;g++)n.speakingHistory.push(0);return function e(){setTimeout((function(){if(f){var t=function(e,t){var n=-1/0;e.getFloatFrequencyData(t);for(var i=4,o=t.length;i<o;i++)t[i]>n&&t[i]<0&&(n=t[i]);return n}(c,a);n.emit("volume_change",t,d);var i=0;if(t>d&&!n.speaking){for(var o=n.speakingHistory.length-3;o<n.speakingHistory.length;o++)i+=n.speakingHistory[o];i>=2&&(n.speaking=!0,n.emit("speaking"))}else if(t<d&&n.speaking){for(o=0;o<n.speakingHistory.length;o++)i+=n.speakingHistory[o];0==i&&(n.speaking=!1,n.emit("stopped_speaking"))}n.speakingHistory.shift(),n.speakingHistory.push(0+(t>d)),e()}}),u)}(),n}},"txJ/":function(e,t){var n=Object.create||function(e){var t=function(){};return t.prototype=e,new t},i=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return n},o=Function.prototype.bind||function(e){var t=this;return function(){return t.apply(e,arguments)}};function r(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=n(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0;var s,a=10;try{var c={};Object.defineProperty&&Object.defineProperty(c,"x",{value:0}),s=0===c.x}catch(C){s=!1}function l(e){return void 0===e._maxListeners?r.defaultMaxListeners:e._maxListeners}function u(e,t,n){if(t)e.call(n);else for(var i=e.length,o=y(e,i),r=0;r<i;++r)o[r].call(n)}function d(e,t,n,i){if(t)e.call(n,i);else for(var o=e.length,r=y(e,o),s=0;s<o;++s)r[s].call(n,i)}function p(e,t,n,i,o){if(t)e.call(n,i,o);else for(var r=e.length,s=y(e,r),a=0;a<r;++a)s[a].call(n,i,o)}function h(e,t,n,i,o,r){if(t)e.call(n,i,o,r);else for(var s=e.length,a=y(e,s),c=0;c<s;++c)a[c].call(n,i,o,r)}function f(e,t,n,i){if(t)e.apply(n,i);else for(var o=e.length,r=y(e,o),s=0;s<o;++s)r[s].apply(n,i)}function g(e,t,i,o){var r,s,a;if("function"!=typeof i)throw new TypeError('"listener" argument must be a function');if((s=e._events)?(s.newListener&&(e.emit("newListener",t,i.listener?i.listener:i),s=e._events),a=s[t]):(s=e._events=n(null),e._eventsCount=0),a){if("function"==typeof a?a=s[t]=o?[i,a]:[a,i]:o?a.unshift(i):a.push(i),!a.warned&&(r=l(e))&&r>0&&a.length>r){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=a.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",c.name,c.message)}}else a=s[t]=i,++e._eventsCount;return e}function m(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function v(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},r=o.call(m,i);return r.listener=n,i.wrapFn=r,r}function b(e,t,n){var i=e._events;if(!i)return[];var o=i[t];return o?"function"==typeof o?n?[o.listener||o]:[o]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(o):y(o,o.length):[]}function _(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function y(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}s?Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||e!=e)throw new TypeError('"defaultMaxListeners" must be a positive number');a=e}}):r.defaultMaxListeners=a,r.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},r.prototype.getMaxListeners=function(){return l(this)},r.prototype.emit=function(e){var t,n,i,o,r,s,a="error"===e;if(s=this._events)a=a&&null==s.error;else if(!a)return!1;if(a){if(arguments.length>1&&(t=arguments[1]),t instanceof Error)throw t;var c=new Error('Unhandled "error" event. ('+t+")");throw c.context=t,c}if(!(n=s[e]))return!1;var l="function"==typeof n;switch(i=arguments.length){case 1:u(n,l,this);break;case 2:d(n,l,this,arguments[1]);break;case 3:p(n,l,this,arguments[1],arguments[2]);break;case 4:h(n,l,this,arguments[1],arguments[2],arguments[3]);break;default:for(o=new Array(i-1),r=1;r<i;r++)o[r-1]=arguments[r];f(n,l,this,o)}return!0},r.prototype.on=r.prototype.addListener=function(e,t){return g(this,e,t,!1)},r.prototype.prependListener=function(e,t){return g(this,e,t,!0)},r.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,v(this,e,t)),this},r.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,v(this,e,t)),this},r.prototype.removeListener=function(e,t){var i,o,r,s,a;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(o=this._events))return this;if(!(i=o[e]))return this;if(i===t||i.listener===t)0==--this._eventsCount?this._events=n(null):(delete o[e],o.removeListener&&this.emit("removeListener",e,i.listener||t));else if("function"!=typeof i){for(r=-1,s=i.length-1;s>=0;s--)if(i[s]===t||i[s].listener===t){a=i[s].listener,r=s;break}if(r<0)return this;0===r?i.shift():function(e,t){for(var n=t,i=n+1,o=e.length;i<o;n+=1,i+=1)e[n]=e[i];e.pop()}(i,r),1===i.length&&(o[e]=i[0]),o.removeListener&&this.emit("removeListener",e,a||t)}return this},r.prototype.removeAllListeners=function(e){var t,o,r;if(!(o=this._events))return this;if(!o.removeListener)return 0===arguments.length?(this._events=n(null),this._eventsCount=0):o[e]&&(0==--this._eventsCount?this._events=n(null):delete o[e]),this;if(0===arguments.length){var s,a=i(o);for(r=0;r<a.length;++r)"removeListener"!==(s=a[r])&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=n(null),this._eventsCount=0,this}if("function"==typeof(t=o[e]))this.removeListener(e,t);else if(t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},r.prototype.listeners=function(e){return b(this,e,!0)},r.prototype.rawListeners=function(e){return b(this,e,!1)},r.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):_.call(e,t)},r.prototype.listenerCount=_,r.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},vqFl:function(e){e.exports=JSON.parse('{"author":"OpenVidu","dependencies":{"@types/node":"13.13.2","@types/platform":"1.3.2","freeice":"2.2.2","hark":"1.2.3","platform":"1.3.5","uuid":"7.0.3","wolfy87-eventemitter":"5.2.9"},"description":"OpenVidu Browser","devDependencies":{"browserify":"16.5.1","grunt":"1.1.0","grunt-cli":"1.3.2","grunt-contrib-copy":"1.0.0","grunt-contrib-sass":"1.0.0","grunt-contrib-uglify":"4.0.1","grunt-contrib-watch":"1.1.0","grunt-postcss":"0.9.0","grunt-string-replace":"1.3.1","grunt-ts":"6.0.0-beta.22","terser":"4.6.11","tsify":"4.0.1","tslint":"6.1.1","typedoc":"0.17.4","typescript":"3.8.3"},"license":"Apache-2.0","main":"lib/index.js","name":"openvidu-browser","repository":{"type":"git","url":"git://github.com/OpenVidu/openvidu"},"scripts":{"browserify":"VERSION=${VERSION:-dev}; cd src && ../node_modules/browserify/bin/cmd.js Main.ts -p [ tsify ] --exclude kurento-browser-extensions --debug -o ../static/js/openvidu-browser-$VERSION.js -v","browserify-prod":"VERSION=${VERSION:-dev}; cd src && ../node_modules/browserify/bin/cmd.js --debug Main.ts -p [ tsify ] --exclude kurento-browser-extensions | ../node_modules/terser/bin/terser --source-map content=inline --output ../static/js/openvidu-browser-$VERSION.min.js","build":"cd src/OpenVidu && ./../../node_modules/typescript/bin/tsc && cd ../.. && ./node_modules/typescript/bin/tsc --declaration src/index.ts --outDir ./lib --sourceMap --lib dom,es5,es2015.promise,scripthost","docs":"./generate-docs.sh"},"types":"lib/index.d.ts","version":"2.15.0"}')},vqGb:function(e,t,n){"use strict";t.__esModule=!0,t.URL=t.TEXT=t.NL=t.EMAIL=t.MAILTOEMAIL=t.Base=void 0;var i=n("RvMX"),o=n("JUw6"),r=n("dlaP");function s(e){return e instanceof r.DOMAIN||e instanceof r.TLD}var a=(0,i.createTokenClass)();a.prototype={type:"token",isLink:!1,toString:function(){for(var e=[],t=0;t<this.v.length;t++)e.push(this.v[t].toString());return e.join("")},toHref:function(){return this.toString()},toObject:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"http";return{type:this.type,value:this.toString(),href:this.toHref(e)}}};var c=(0,o.inherits)(a,(0,i.createTokenClass)(),{type:"email",isLink:!0}),l=(0,o.inherits)(a,(0,i.createTokenClass)(),{type:"email",isLink:!0,toHref:function(){return"mailto:"+this.toString()}}),u=(0,o.inherits)(a,(0,i.createTokenClass)(),{type:"text"}),d=(0,o.inherits)(a,(0,i.createTokenClass)(),{type:"nl"}),p=(0,o.inherits)(a,(0,i.createTokenClass)(),{type:"url",isLink:!0,toHref:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"http",t=!1,n=!1,i=this.v,o=[],a=0;i[a]instanceof r.PROTOCOL;)t=!0,o.push(i[a].toString().toLowerCase()),a++;for(;i[a]instanceof r.SLASH;)n=!0,o.push(i[a].toString()),a++;for(;s(i[a]);)o.push(i[a].toString().toLowerCase()),a++;for(;a<i.length;a++)o.push(i[a].toString());return o=o.join(""),t||n||(o=e+"://"+o),o},hasProtocol:function(){return this.v[0]instanceof r.PROTOCOL}});t.Base=a,t.MAILTOEMAIL=c,t.EMAIL=l,t.NL=d,t.TEXT=u,t.URL=p},zkoq:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("fXoL"),o=n("FKr1");n("8LU1"),n("cH1L");var r=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=i.Ob({type:e}),e.\u0275inj=i.Nb({factory:function(t){return new(t||e)},imports:[[o.k,o.i],o.k,o.i]}),e}()},znSr:function(e,t,n){"use strict";n.d(t,"c",(function(){return y})),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return v}));var i=n("fXoL"),o=n("ofXK"),r=n("pD6V"),s=(n("8LU1"),n("1G5W"),n("jhN1")),a=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,s,a,c,l){var u;return _classCallCheck(this,n),(u=t.call(this,e,null,i,r)).ngClassInstance=l,u.DIRECTIVE_KEY="ngClass",u.ngClassInstance||(u.ngClassInstance=new o.k(s,a,e,c)),u.init(),u.setValue("",""),u}return _createClass(n,[{key:"updateWithValue",value:function(e){this.ngClassInstance.ngClass=e,this.ngClassInstance.ngDoCheck()}},{key:"ngDoCheck",value:function(){this.ngClassInstance.ngDoCheck()}},{key:"klass",set:function(e){this.ngClassInstance.klass=e,this.setValue(e,"")}}]),n}(r.b);return e.\u0275fac=function(t){return new(t||e)(i.Qb(i.l),i.Qb(r.i),i.Qb(r.f),i.Qb(i.t),i.Qb(i.u),i.Qb(i.F),i.Qb(o.k,10))},e.\u0275dir=i.Lb({type:e,inputs:{klass:["class","klass"]},features:[i.zb]}),e}(),c=["ngClass","ngClass.xs","ngClass.sm","ngClass.md","ngClass.lg","ngClass.xl","ngClass.lt-sm","ngClass.lt-md","ngClass.lt-lg","ngClass.lt-xl","ngClass.gt-xs","ngClass.gt-sm","ngClass.gt-md","ngClass.gt-lg"],l=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.apply(this,arguments)).inputs=c,e}return n}(a);return e.\u0275fac=function(t){return u(t||e)},e.\u0275dir=i.Lb({type:e,selectors:[["","ngClass",""],["","ngClass.xs",""],["","ngClass.sm",""],["","ngClass.md",""],["","ngClass.lg",""],["","ngClass.xl",""],["","ngClass.lt-sm",""],["","ngClass.lt-md",""],["","ngClass.lt-lg",""],["","ngClass.lt-xl",""],["","ngClass.gt-xs",""],["","ngClass.gt-sm",""],["","ngClass.gt-md",""],["","ngClass.gt-lg",""]],inputs:{ngClass:"ngClass","ngClass.xs":"ngClass.xs","ngClass.sm":"ngClass.sm","ngClass.md":"ngClass.md","ngClass.lg":"ngClass.lg","ngClass.xl":"ngClass.xl","ngClass.lt-sm":"ngClass.lt-sm","ngClass.lt-md":"ngClass.lt-md","ngClass.lt-lg":"ngClass.lt-lg","ngClass.lt-xl":"ngClass.lt-xl","ngClass.gt-xs":"ngClass.gt-xs","ngClass.gt-sm":"ngClass.gt-sm","ngClass.gt-md":"ngClass.gt-md","ngClass.gt-lg":"ngClass.gt-lg"},features:[i.zb]}),e}(),u=i.Yb(l),d=function e(t,n){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];_classCallCheck(this,e),this.key=t,this.value=n,this.key=i?t.replace(/['"]/g,"").trim():t.trim(),this.value=i?n.replace(/['"]/g,"").trim():n.trim(),this.value=this.value.replace(/;/,"")};function p(e){var t=typeof e;return"object"===t?e.constructor===Array?"array":e.constructor===Set?"set":"object":t}function h(e){var t=_toArray(e.split(":")),n=t[0],i=t.slice(1);return new d(n,i.join(":"))}function f(e,t){return t.key&&(e[t.key]=t.value),e}var g=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,s,a,c,l,u,d){var p;_classCallCheck(this,n),(p=t.call(this,e,null,i,r)).sanitizer=s,p.ngStyleInstance=l,p.DIRECTIVE_KEY="ngStyle",p.ngStyleInstance||(p.ngStyleInstance=new o.n(e,a,c)),p.init();var h=p.nativeElement.getAttribute("style")||"";return p.fallbackStyles=p.buildStyleMap(h),p.isServer=u&&Object(o.x)(d),p}return _createClass(n,[{key:"updateWithValue",value:function(e){var t=this.buildStyleMap(e);this.ngStyleInstance.ngStyle=Object.assign(Object.assign({},this.fallbackStyles),t),this.isServer&&this.applyStyleToElement(t),this.ngStyleInstance.ngDoCheck()}},{key:"clearStyles",value:function(){this.ngStyleInstance.ngStyle=this.fallbackStyles,this.ngStyleInstance.ngDoCheck()}},{key:"buildStyleMap",value:function(e){var t,n,o,r=this,s=function(e){return r.sanitizer.sanitize(i.J.STYLE,e)||""};if(e)switch(p(e)){case"string":return _(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:";";return String(e).trim().split(t).map((function(e){return e.trim()})).filter((function(e){return""!==e}))}(e),s);case"array":return _(e,s);case"set":default:return n=s,o=[],"set"===p(t=e)?t.forEach((function(e){return o.push(e)})):Object.keys(t).forEach((function(e){o.push("".concat(e,":").concat(t[e]))})),function(e,t){return e.map(h).filter((function(e){return!!e})).map((function(e){return t&&(e.value=t(e.value)),e})).reduce(f,{})}(o,n)}return{}}},{key:"ngDoCheck",value:function(){this.ngStyleInstance.ngDoCheck()}}]),n}(r.b);return e.\u0275fac=function(t){return new(t||e)(i.Qb(i.l),i.Qb(r.i),i.Qb(r.f),i.Qb(s.b),i.Qb(i.u),i.Qb(i.F),i.Qb(o.n,10),i.Qb(r.g),i.Qb(i.C))},e.\u0275dir=i.Lb({type:e,features:[i.zb]}),e}(),m=["ngStyle","ngStyle.xs","ngStyle.sm","ngStyle.md","ngStyle.lg","ngStyle.xl","ngStyle.lt-sm","ngStyle.lt-md","ngStyle.lt-lg","ngStyle.lt-xl","ngStyle.gt-xs","ngStyle.gt-sm","ngStyle.gt-md","ngStyle.gt-lg"],v=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.apply(this,arguments)).inputs=m,e}return n}(g);return e.\u0275fac=function(t){return b(t||e)},e.\u0275dir=i.Lb({type:e,selectors:[["","ngStyle",""],["","ngStyle.xs",""],["","ngStyle.sm",""],["","ngStyle.md",""],["","ngStyle.lg",""],["","ngStyle.xl",""],["","ngStyle.lt-sm",""],["","ngStyle.lt-md",""],["","ngStyle.lt-lg",""],["","ngStyle.lt-xl",""],["","ngStyle.gt-xs",""],["","ngStyle.gt-sm",""],["","ngStyle.gt-md",""],["","ngStyle.gt-lg",""]],inputs:{ngStyle:"ngStyle","ngStyle.xs":"ngStyle.xs","ngStyle.sm":"ngStyle.sm","ngStyle.md":"ngStyle.md","ngStyle.lg":"ngStyle.lg","ngStyle.xl":"ngStyle.xl","ngStyle.lt-sm":"ngStyle.lt-sm","ngStyle.lt-md":"ngStyle.lt-md","ngStyle.lt-lg":"ngStyle.lt-lg","ngStyle.lt-xl":"ngStyle.lt-xl","ngStyle.gt-xs":"ngStyle.gt-xs","ngStyle.gt-sm":"ngStyle.gt-sm","ngStyle.gt-md":"ngStyle.gt-md","ngStyle.gt-lg":"ngStyle.gt-lg"},features:[i.zb]}),e}(),b=i.Yb(v);function _(e,t){return e.map(h).filter((function(e){return!!e})).map((function(e){return t&&(e.value=t(e.value)),e})).reduce(f,{})}var y=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=i.Ob({type:e}),e.\u0275inj=i.Nb({factory:function(t){return new(t||e)},imports:[[r.c]]}),e}()},zrcO:function(e,t,n){"use strict";n.r(t),n.d(t,"UsersModule",(function(){return Mn}));var i=n("ofXK"),o=n("tyNb"),r=n("mrSG"),s=n("3Pt+"),a=n("Esjb"),c=n("cLpZ"),l=n("vV3i"),u=n("wd/R"),d=n("fXoL"),p=n("lwos"),h=n("7dP1"),f=n("tVj7"),g=n("Rnal"),m=n("5eHb"),v=n("PPbg"),b=n("Xa2L"),_=n("fZdh");function y(e,t){1&e&&(d.Wb(0,"span",14),d.Kc(1,"First name is required"),d.Vb())}function C(e,t){1&e&&(d.Wb(0,"span",14),d.Kc(1," First name should contain only alphabetical characters "),d.Vb())}function O(e,t){1&e&&(d.Wb(0,"span",14),d.Kc(1,"Last name is required"),d.Vb())}function S(e,t){1&e&&(d.Wb(0,"span",14),d.Kc(1," Last name should contain only alphabetical characters "),d.Vb())}function k(e,t){1&e&&(d.Wb(0,"span",14),d.Kc(1,"User name is required"),d.Vb())}function x(e,t){1&e&&(d.Wb(0,"span",14),d.Kc(1," Please write alphabetical characters before numbers for username "),d.Vb())}function M(e,t){1&e&&(d.Wb(0,"span",14),d.Kc(1,"E-mail is required"),d.Vb())}function w(e,t){1&e&&(d.Wb(0,"span",14),d.Kc(1," E-mail is "),d.Wb(2,"strong"),d.Kc(3,"invalid"),d.Vb(),d.Vb())}function E(e,t){1&e&&(d.Wb(0,"span",14),d.Kc(1,"Birth day is required"),d.Vb())}function P(e,t){1&e&&d.Rb(0,"mat-spinner",15),2&e&&d.pc("diameter",15)}function I(e,t){if(1&e){var n=d.Xb();d.Wb(0,"dropzone",16,17),d.ec("removedFile",(function(){return d.Bc(n),d.ic().removeImage()}))("thumbnail",(function(e){return d.Bc(n),d.ic().onAddedFile(e)})),d.Vb()}if(2&e){var i=d.ic();d.pc("config",i.dropzoneConfig)("message","Click or drag an image to upload")}}var R=function(){return{"background-size":"cover"}};function T(e,t){if(1&e){var n=d.Xb();d.Wb(0,"div",18),d.jc(1,"getImgPath"),d.Wb(2,"i",19),d.ec("click",(function(){return d.Bc(n),d.ic().removeImage()})),d.Vb(),d.Vb()}if(2&e){var i=d.ic();d.Hc("background",d.mc(1,3,i.profileImg,"user_avatars","background"),d.Jb),d.pc("ngStyle",d.sc(7,R))}}var A,D,L=((A=function(){function e(t,n,i,o,r,s,a,c){_classCallCheck(this,e),this.fb=t,this.loader=n,this.auth=i,this.usersService=o,this.getAuthUser=r,this.toastr=s,this.userStore=a,this.router=c,this.isSubmitted=!1,this.subscriptions=[],this.currentDate=new Date,this.dropzoneConfig=l.a,this.dropzoneFiles=[],this.initForm(),this.authUser=this.getAuthUser.transform(),this.profileForm.patchValue(Object.assign(Object.assign({},this.authUser),{birthday:u(this.authUser.birthday).format("MM/DD/YYYY")}))}return _createClass(e,[{key:"initForm",value:function(){this.profileForm=this.fb.group({id:[""],first_name:["",[s.x.required,Object(a.a)(c.g)]],last_name:["",[s.x.required,Object(a.a)(c.g)]],username:["",[s.x.required,Object(a.a)(c.f)]],email:["",[s.x.required,Object(a.a)(c.a)]],birthday:[""],avatar:[""]})}},{key:"ngOnInit",value:function(){}},{key:"dateChanged",value:function(e){}},{key:"removeImage",value:function(){this.authUser.avatar="",this.profileForm.patchValue({avatar:""})}},{key:"onAddedFile",value:function(e){this.dropzoneFiles.push(e[0]),this.profileForm.patchValue({avatar:e[0].name}),console.log(e)}},{key:"buildFormData",value:function(){var e=new FormData,t=this.profileForm.value,n=Object.entries(this.dropzoneFiles).length>0;for(var i in this.profileForm.value)"birthday"===i?t.birthday&&e.append(i,u(new Date(this.profileForm.value[i])).format("YYYY-MM-DD")):"avatar"===i&&n||e.append(i,this.profileForm.value[i]);if(n){var o=this.dropzoneFiles[0],r="avatar_".concat(Date.now(),".jpg");e.append("avatar",r),e.append("user_avatar_file",o,r)}return e}},{key:"saveChanges",value:function(){var e=this,t=this.buildFormData();this.usersService.saveProfileChanges(t).subscribe((function(t){return Object(r.a)(e,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.hasOwnProperty("token")?null==t?void 0:t.token:"",e.t0=n,!e.t0){e.next=8;break}return localStorage.setItem("token",n),this.userStore.setAuthUser(n),this.toastr.success("The changes are saved successfully"),e.next=8,this.router.navigateByUrl("");case 8:case"end":return e.stop()}}),e,this)})))}))}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach((function(e){return e.unsubscribe()}))}},{key:"firstName",get:function(){return this.profileForm.get("first_name")}},{key:"lastName",get:function(){return this.profileForm.get("last_name")}},{key:"email",get:function(){return this.profileForm.get("email")}},{key:"pass",get:function(){return this.profileForm.get("password")}},{key:"username",get:function(){return this.profileForm.get("username")}},{key:"confirmPass",get:function(){return this.profileForm.get("confirm_password")}},{key:"birthday",get:function(){return this.profileForm.get("birthday")}},{key:"profileImg",get:function(){return!!this.authUser&&this.authUser.avatar}}]),e}()).\u0275fac=function(e){return new(e||A)(d.Qb(s.e),d.Qb(p.a),d.Qb(h.a),d.Qb(f.a),d.Qb(g.a),d.Qb(m.b),d.Qb(v.a),d.Qb(o.e))},A.\u0275cmp=d.Kb({type:A,selectors:[["app-profile"]],decls:23,vars:13,consts:[[1,"flex-wrap-reverse",3,"formGroup"],[1,"left-side","pr-lg-2"],["placeholder","First Name","formControlName","first_name",1,"login-input"],["class","error",4,"ngIf"],["placeholder","Last Name","formControlName","last_name",1,"login-input"],["placeholder","User name","formControlName","username",1,"login-input"],["placeholder","Email","formControlName","email",1,"login-input"],[1,"actions"],[1,"save-profile-changes",3,"click"],[3,"diameter",4,"ngIf"],[1,"right-side","mx-auto","ml-xl-4","pl-lg-2"],[1,"userImg"],["id","dropzone","class","profileImgDropzone single",3,"config","message","removedFile","thumbnail",4,"ngIf"],["class","profile-img",3,"background","ngStyle",4,"ngIf"],[1,"error"],[3,"diameter"],["id","dropzone",1,"profileImgDropzone","single",3,"config","message","removedFile","thumbnail"],["dropzone",""],[1,"profile-img",3,"ngStyle"],[1,"fa","fa-times","remove-profile-img",3,"click"]],template:function(e,t){1&e&&(d.Wb(0,"form",0),d.Wb(1,"div",1),d.Rb(2,"input",2),d.Ic(3,y,2,0,"span",3),d.Ic(4,C,2,0,"span",3),d.Rb(5,"input",4),d.Ic(6,O,2,0,"span",3),d.Ic(7,S,2,0,"span",3),d.Rb(8,"input",5),d.Ic(9,k,2,0,"span",3),d.Ic(10,x,2,0,"span",3),d.Rb(11,"input",6),d.Ic(12,M,2,0,"span",3),d.Ic(13,w,4,0,"span",3),d.Ic(14,E,2,0,"span",3),d.Wb(15,"div",7),d.Wb(16,"a",8),d.ec("click",(function(){return t.saveChanges()})),d.Kc(17,"Save changes"),d.Vb(),d.Ic(18,P,1,1,"mat-spinner",9),d.Vb(),d.Vb(),d.Wb(19,"div",10),d.Wb(20,"div",11),d.Ic(21,I,2,2,"dropzone",12),d.Ic(22,T,3,8,"div",13),d.Vb(),d.Vb(),d.Vb()),2&e&&(d.pc("formGroup",t.profileForm),d.Cb(3),d.pc("ngIf",t.isSubmitted&&t.firstName.hasError("required")),d.Cb(1),d.pc("ngIf",t.isSubmitted&&t.firstName.hasError("patternInvalid")),d.Cb(2),d.pc("ngIf",t.isSubmitted&&t.lastName.hasError("required")),d.Cb(1),d.pc("ngIf",t.isSubmitted&&t.lastName.hasError("patternInvalid")),d.Cb(2),d.pc("ngIf",t.isSubmitted&&t.username.hasError("required")),d.Cb(1),d.pc("ngIf",t.isSubmitted&&t.username.hasError("patternInvalid")),d.Cb(2),d.pc("ngIf",t.isSubmitted&&t.email.hasError("required")),d.Cb(1),d.pc("ngIf",t.isSubmitted&&t.email.hasError("patternInvalid")),d.Cb(1),d.pc("ngIf",t.isSubmitted&&t.birthday.hasError("required")),d.Cb(4),d.pc("ngIf",t.loader.formProcessing),d.Cb(3),d.pc("ngIf",!t.profileImg),d.Cb(1),d.pc("ngIf",t.profileImg))},directives:[s.z,s.q,s.i,s.c,s.p,s.h,i.m,b.b,l.b,i.n],pipes:[_.a],styles:[".login-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%;height:100vh}.login-logo[_ngcontent-%COMP%]{cursor:pointer}.login-content-right[_ngcontent-%COMP%]{background:#fff;width:57%}.login-content-left[_ngcontent-%COMP%]{width:43%;display:flex;flex-direction:column;align-items:center;justify-content:center;position:relative;background:url(back-login.53f102952f1c83155d3a.png)}.login-abs[_ngcontent-%COMP%]{position:absolute;right:0}.login-btn[_ngcontent-%COMP%]{background:#fff;color:#18b587!important}.login-btn[_ngcontent-%COMP%], .register-btn[_ngcontent-%COMP%]{border-radius:28px 0 0 28px;width:128px;height:57px;display:flex;justify-content:center;align-items:center;font-size:20px;font-family:Muli-Bold;transition:.3s ease-in-out}.register-btn[_ngcontent-%COMP%]{color:#fff!important;cursor:pointer}.register-btn[_ngcontent-%COMP%]:hover{background:#fff;color:#18b587!important}.login-content-right[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;padding-left:150px}.login-title[_ngcontent-%COMP%]{color:#545454;font-size:32px;font-family:Muli-Bold;margin-bottom:32px}.login-input[_ngcontent-%COMP%]{width:100%;height:51px;box-shadow:0 0 6px rgba(0,109,204,.18);padding:15px 32px;margin-bottom:8px;margin-top:20px;color:#8c8888;font-size:16px;font-family:Muli-Regular}.login-input[_ngcontent-%COMP%]:focus{box-shadow:0 0 6px #18b587}.forgot-password[_ngcontent-%COMP%]{text-align:right;color:#545454;font-size:16px;font-family:Muli-Regular;cursor:pointer;transition:.3s ease-in-out}.forgot-password[_ngcontent-%COMP%]:hover{color:#f53c6f}.login-block[_ngcontent-%COMP%]{width:430px}.login-submit[_ngcontent-%COMP%]{width:100%;height:51px;background:#f53c6f;padding:15px 32px;margin-bottom:32px;color:#fff!important;font-size:16px;font-family:Muli-Regular;display:flex;justify-content:center;align-items:center;margin-top:47px;transition:.3s ease-in-out;cursor:pointer}.login-submit[_ngcontent-%COMP%]:hover{background:#c52551}.register-block[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.register-select[_ngcontent-%COMP%]{width:200px;height:51px;box-shadow:0 0 6px rgba(0,109,204,.18);padding:15px 32px;margin-bottom:8px;margin-top:20px;color:#cecece;font-size:16px;font-family:Muli-Regular;outline:none;border:0}.register-select[_ngcontent-%COMP%]:focus{box-shadow:0 0 6px rgba(245,60,111,.14);border:.5px solid #f53c6f}.register-day[_ngcontent-%COMP%]{width:100px;height:51px;box-shadow:0 0 6px rgba(0,109,204,.18);padding:15px 32px;margin-bottom:8px;margin-top:20px;color:#cecece;font-size:16px;font-family:Muli-Regular;outline:none;border:0}.register-day[_ngcontent-%COMP%]:focus{box-shadow:0 0 6px rgba(245,60,111,.14);border:.5px solid #f53c6f}@media (max-width:1400px){.login-logo[_ngcontent-%COMP%]{width:250px;margin-left:100px}.login-content-left[_ngcontent-%COMP%]{align-items:start}}@media (max-width:1200px){.login-logo[_ngcontent-%COMP%]{margin-left:40px}.login-content-right[_ngcontent-%COMP%]{padding-left:80px}}@media (max-width:991px){.login-content-left[_ngcontent-%COMP%]{align-items:start;height:400px;width:100%}.login-content-right[_ngcontent-%COMP%]{padding-left:0;width:100%;align-items:center;margin-top:60px}.login-content[_ngcontent-%COMP%]{height:auto;flex-direction:column}}@media (max-width:480px){.register-block[_ngcontent-%COMP%]{flex-direction:column}.register-day[_ngcontent-%COMP%], .register-select[_ngcontent-%COMP%]{width:100%}.login-block[_ngcontent-%COMP%]{width:90%}.login-title[_ngcontent-%COMP%]{font-size:27px}.forgot-password[_ngcontent-%COMP%], .login-title[_ngcontent-%COMP%]{text-align:center}.login-btn[_ngcontent-%COMP%]{width:128px;margin-right:0}.login-btn[_ngcontent-%COMP%], .register-btn[_ngcontent-%COMP%]{height:45px;font-size:16px}.login-logo[_ngcontent-%COMP%]{width:150px}}.birthday-block[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{cursor:pointer}.actions[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:32px;margin-top:47px}.actions[_ngcontent-%COMP%]   .register-submit[_ngcontent-%COMP%]{width:100%;height:51px;background:#f53c6f;padding:15px 32px;color:#fff!important;font-size:16px;font-family:Muli-Regular;display:flex;justify-content:center;align-items:center;transition:.3s ease-in-out;cursor:pointer}.actions[_ngcontent-%COMP%]   .register-submit[_ngcontent-%COMP%]:hover{background:#c52551}.actions[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin-left:20px}form[_ngcontent-%COMP%]{display:flex}@media screen and (min-width:769px) and (max-width:991px){form[_ngcontent-%COMP%]{flex-direction:column-reverse}}form[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]{flex:1;min-width:360px;width:100%;max-width:400px;margin:0 auto}@media only screen and (min-width:769px) and (max-width:1024px){form[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]{padding:0!important}}@media screen and (max-width:410px){form[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]{min-width:260px}}@media screen and (min-width:375px) and (max-width:510px){form[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]{flex:none!important;width:calc(100% - 5px)!important;min-width:270px!important}}@media screen and (min-width:320px) and (max-width:375px){form[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]{flex:none!important;width:calc(100% - 15px)!important;min-width:270px!important}}form[_ngcontent-%COMP%]   .save-profile-changes[_ngcontent-%COMP%]{width:100%;height:51px;background-color:#18b587;padding:15px 32px;color:#fff!important;font-size:16px;font-family:Muli-Regular;display:flex;justify-content:center;align-items:center;transition:.3s ease-in-out;cursor:pointer}form[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]   .profile-img[_ngcontent-%COMP%]{width:400px;height:400px;position:relative}@media only screen and (min-width:320px) and (max-width:510px){form[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]   .profile-img[_ngcontent-%COMP%]{max-width:400%;width:100%}}form[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]   .profile-img[_ngcontent-%COMP%]   .remove-profile-img[_ngcontent-%COMP%]{cursor:pointer;position:absolute;right:7px;top:6px;color:#fff;background:#f53c6f;padding:5px}@media screen and (max-width:767px){form[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]{margin-left:0}}"]}),A),j=n("PZzU"),N=n("9xOu"),V=n("tk/3"),U=((D=function(){function e(t){_classCallCheck(this,e),this.httpClient=t}return _createClass(e,[{key:"getToken",value:function(e){return this.httpClient.get(N.c+"users/session/get-token",{params:e})}},{key:"getSession",value:function(){return this.httpClient.post(N.c+"api/sessions",{})}},{key:"leaveSession",value:function(e){return this.httpClient.get(N.c+"users/session/leave",{params:e})}}]),e}()).\u0275fac=function(e){return new(e||D)(d.ac(V.b))},D.\u0275prov=d.Mb({token:D,factory:D.\u0275fac,providedIn:"root"}),D),B=n("wDcp"),W=n("FFj9"),F=n("il7l"),z=n("sAj1"),q=n("0IaG"),G=n("8OJ3"),K=n("qe5e"),Q=n("7tny"),Y=n.n(Q),H=n("OWZb"),J=n("Uj0G");function Z(e,t){if(1&e){var n=d.Xb();d.Wb(0,"div",3),d.Wb(1,"div",4),d.Wb(2,"h2"),d.Kc(3,"Live video ended"),d.Vb(),d.Wb(4,"p",5),d.ec("click",(function(){return d.Bc(n),d.ic().backToChannelVideos()})),d.Kc(5,"Go to my channel"),d.Vb(),d.Vb(),d.Vb()}}var X,$=((X=function(){function e(t,n,i,o,r,s){_classCallCheck(this,e),this.videoService=n,this.getAuthUser=i,this.blobToFile=o,this.subject=r,this.router=s,this.idx="clip1",this.recordingState="idle",this.shareScreen=new d.o,this.recordingStarted=new d.o,this.screenSharing=!1,this.player=!1,this.plugin=H,this.config={controls:!0,autoplay:!1,fluid:!1,loop:!1,width:640,height:480,bigPlayButton:!1,controlBar:{volumePanel:!0},plugins:{record:{audio:!0,video:{frameRate:{ideal:30,max:30},width:{min:640,ideal:640,max:1280},height:{min:480,ideal:480,max:720}},screen:!0,displayMilliseconds:!1,maxLength:3600,debug:!0,videoEngine:"recordrtc",videoMimeType:"video/webm;codecs=vp8,opus",frameWidth:640,frameHeight:480}}}}return _createClass(e,[{key:"ngOnInit",value:function(){this.authUser=this.getAuthUser.transform()}},{key:"ngAfterViewInit",value:function(){var e=this,t="video_"+this.idx;this.player=Object(G.default)(document.getElementById(t),this.config,(function(){var e="Using video.js "+G.default.VERSION+" with videojs-record "+G.default.getPluginVersion("record")+" and recordrtc "+K.version;G.default.log(e)}),(function(){e.player.updateSrc([{src:"https://vjs.zencdn.net/v/oceans.mp4?SD",type:"video/mp4",label:"SD",res:360},{src:"https://vjs.zencdn.net/v/oceans.mp4?HD",type:"video/mp4",label:"HD",res:720}]),e.player.on("resolutionchange",(function(){console.log("Source changed to %s",e.player.src())}))})),G.default.registerPlugin("watermark",Y.a),this.player.watermark({image:"assets/img/logo.png",position:"bottom-right",fadeTime:1e3}),this.player.on("deviceReady",(function(t){e.shareScreen.emit()})),this.player.on("startRecord",(function(t){e.recordingState="active",e.subject.setVideoRecordingState({recording:!0,viaSocket:!1}),e.recordingStartTimeStamp=u(e.player.currentTimestamp),e.videoService.saveVideoToken({token:e.openViduToken,author_id:e.authUser.id,channel_id:e.authUser.channel.id,category_id:e.videoSettings.category_id,privacy:e.videoSettings.privacy,filename:"",session_name:e.videoSettings.sessionName,publisher:e.videoSettings.myUserName,status:"live",thumbnail:e.videoSettings.thumbnail,name:e.videoSettings.name,description:e.videoSettings.description,tags:e.videoSettings.tags}).subscribe((function(t){e.videoId=null==t?void 0:t.id,e.recordingStarted.emit(e.videoId)}))})),this.player.on("finishRecord",(function(){e.recordingEndTimeStamp=u(e.player.currentTimestamp);var t=u.utc(e.recordingEndTimeStamp.diff(e.recordingStartTimeStamp)).format("mm:ss"),n=new FormData;n.append("username",e.authUser.username),n.append("id",e.videoId),n.append("author_id",e.authUser.id),n.append("video_name",e.player.recordedData.name),n.append("video_duration",t),n.append("video_stream_file",e.blobToFile.transform(e.player.recordedData)),n.append("video_settings",JSON.stringify(e.videoSettings)),e.subject.setVideoRecordingState({recording:!1}),e.recordingState="finished",e.videoService.saveRecordedData(n).subscribe((function(){localStorage.setItem("session",""),localStorage.setItem("video_settings","")}))})),this.player.on("finishConvert",(function(){console.log("finished converting: ",e.player.convertedData)})),this.player.on("error",(function(e,t){console.warn(t)})),this.player.on("deviceError",(function(){console.error("device error:",e.player.deviceErrorCode)}))}},{key:"backToChannelVideos",value:function(){this.router.navigate(["channels/show"],{queryParams:{tab:"videos",username:this.authUser.username}})}},{key:"ngOnDestroy",value:function(){this.player&&(this.player.dispose(),this.player=!1)}}]),e}()).\u0275fac=function(e){return new(e||X)(d.Qb(d.l),d.Qb(W.a),d.Qb(g.a),d.Qb(J.a),d.Qb(B.a),d.Qb(o.e))},X.\u0275cmp=d.Kb({type:X,selectors:[["app-video-js-record"]],inputs:{openViduToken:"openViduToken",videoSettings:"videoSettings",thumbnailFile:"thumbnailFile"},outputs:{shareScreen:"shareScreen",recordingStarted:"recordingStarted"},decls:3,vars:2,consts:[[1,"video-container"],["playsinline","",1,"video-js",3,"id"],["id","live-session-finished",4,"ngIf"],["id","live-session-finished"],[1,"messages-container"],[1,"back-to-channel-videos",3,"click"]],template:function(e,t){1&e&&(d.Wb(0,"div",0),d.Rb(1,"video",1),d.Ic(2,Z,6,0,"div",2),d.Vb()),2&e&&(d.Cb(1),d.rc("id","video_",t.idx,""),d.Cb(1),d.pc("ngIf","finished"===t.recordingState))},directives:[i.m],styles:[".video-js[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{background-color:#000}.video-container[_ngcontent-%COMP%]{flex:1;display:flex}#live-session-finished[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;color:#fff;-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px);display:flex;align-items:center;justify-content:center}.messages-container[_ngcontent-%COMP%]{text-align:center}.back-to-channel-videos[_ngcontent-%COMP%]{cursor:pointer}"]}),X),ee=n("KUGs"),te=n("MFHO"),ne=n("KN7V");function ie(e,t){1&e&&(d.Wb(0,"div",21),d.Rb(1,"mat-spinner",22),d.Vb()),2&e&&(d.Cb(1),d.pc("diameter",30))}function oe(e,t){if(1&e){var n=d.Xb();d.Ub(0),d.Wb(1,"img",26),d.ec("click",(function(){d.Bc(n);var e=d.ic().$implicit;return d.ic(3).selectUserToReply(e)})),d.jc(2,"getImgPath"),d.Vb(),d.Wb(3,"p",27),d.Kc(4),d.Vb(),d.Tb()}if(2&e){var i=d.ic().$implicit,o=d.ic(3);d.Cb(1),d.Gb("selectable",i.from!==o.authUser.username)("selected",o.selectedUsersToReply.includes(i.from)&&o.userSelected),d.pc("src",d.lc(2,6,i.avatar,"user_avatars"),d.Dc),d.Cb(3),d.Lc(i.from+(i.from===o.authUser.username?"(Me)":""))}}function re(e,t){if(1&e){var n=d.Xb();d.Ub(0),d.Wb(1,"img",26),d.ec("click",(function(){d.Bc(n);var e=d.ic().$implicit;return d.ic(3).selectUserToReply(e)})),d.jc(2,"getImgPath"),d.Vb(),d.Wb(3,"p",27),d.Kc(4),d.Vb(),d.Tb()}if(2&e){var i=d.ic().$implicit,o=d.ic(3);d.Cb(1),d.Gb("selectable",i.user.from!==o.authUser.username)("selected",o.selectedUsersToReply.includes(i.from)&&o.userSelected),d.pc("src",d.lc(2,6,i.user.avatar,"user_avatars"),d.Dc),d.Cb(3),d.Lc(i.user.from+(i.user.from===o.authUser.username?"(Me)":""))}}function se(e,t){if(1&e&&(d.Wb(0,"div",24),d.Ic(1,oe,5,9,"ng-container",1),d.Ic(2,re,5,9,"ng-container",1),d.Wb(3,"p",25),d.Kc(4),d.Vb(),d.Vb()),2&e){var n=t.$implicit;d.Cb(1),d.pc("ngIf",n.from),d.Cb(1),d.pc("ngIf",!n.from),d.Cb(2),d.Lc(n.message)}}function ae(e,t){if(1&e&&(d.Ub(0),d.Ic(1,se,5,3,"div",23),d.Tb()),2&e){var n=d.ic(2);d.Cb(1),d.pc("ngForOf",n.messages)}}function ce(e,t){if(1&e){var n=d.Xb();d.Ub(0),d.Wb(1,"div",2),d.Wb(2,"div",3),d.Wb(3,"div",4),d.Kc(4," Chat "),d.Vb(),d.Wb(5,"div",5),d.Wb(6,"a",6),d.Kc(7,"Action"),d.Vb(),d.Wb(8,"a",6),d.Kc(9,"Another action"),d.Vb(),d.Wb(10,"a",6),d.Kc(11,"Something else here"),d.Vb(),d.Vb(),d.Vb(),d.Rb(12,"img",7),d.Vb(),d.Wb(13,"div",8),d.Ic(14,ie,2,1,"div",9),d.Ic(15,ae,2,1,"ng-container",1),d.Vb(),d.Wb(16,"div",10),d.Wb(17,"form",11),d.Wb(18,"input",12),d.ec("keyup.enter",(function(e){return d.Bc(n),d.ic().sendMessage(e)})),d.Vb(),d.Wb(19,"emoji-mart",13),d.ec("emojiClick",(function(e){return d.Bc(n),d.ic().addEmoji(e)})),d.Vb(),d.Vb(),d.Wb(20,"div",14),d.Wb(21,"div",15),d.Wb(22,"a",16),d.Kc(23,"Buy Coins"),d.Vb(),d.Rb(24,"div",17),d.Vb(),d.Wb(25,"div",18),d.Wb(26,"p",19),d.Kc(27,"0/200"),d.Vb(),d.Rb(28,"i",20),d.Vb(),d.Vb(),d.Vb(),d.Tb()}if(2&e){var i=d.ic();d.Cb(14),d.pc("ngIf",i.loadingMessages),d.Cb(1),d.pc("ngIf",!i.loadingMessages),d.Cb(2),d.pc("formGroup",i.chatForm),d.Cb(2),d.pc("custom",i.customEmojis)}}function le(e,t){1&e&&(d.Ub(0),d.Wb(1,"div",28),d.Wb(2,"span"),d.Kc(3,"When recording is started, the chat box will appear here"),d.Vb(),d.Vb(),d.Tb())}var ue,de=((ue=function(){function e(t,n,i,o,r){_classCallCheck(this,e),this.fb=t,this.subject=n,this.getAuthUser=i,this.chatService=o,this.fixLineBreaks=r,this.messageSent=!1,this.messages=[],this.selectedUsersToReply=[],this.userSelected=!1,this.apiUrl=N.c,this.loadingMessages=!1,this.customEmojis=[{name:"Octocat",shortNames:["octocat"],text:"",emoticons:[],keywords:["github"],imageUrl:"https://github.githubassets.com/images/icons/emoji/octocat.png"}],this.sendMsg=new d.o,this.authUser=this.getAuthUser.transform(),this.videoRecordingState||(this.videoRecordingState="idle")}return _createClass(e,[{key:"ngOnInit",value:function(){this.initForm(),this.getChatMessagesFromParentComponents(),this.getVideoRecordingState(),this.loadVideoPreviousMessages()}},{key:"initForm",value:function(){this.chatForm=this.fb.group({token:[this.openViduToken],from:[this.authUser.username],from_id:[this.authUser.id],to_id:[""],avatar:[this.authUser.avatar],message:["",s.x.required]})}},{key:"loadVideoPreviousMessages",value:function(){var e=this;this.videoId&&(this.loadingMessages=!0,this.chatService.getChatMessages({video_id:this.videoId}).subscribe((function(t){e.messages=t,e.loadingMessages=!1})))}},{key:"getChatMessagesFromParentComponents",value:function(){var e=this;this.subject.getMsgData().subscribe((function(t){var n={from:"",avatar:"",message:""};if(t.from.includes("clientData")){var i=JSON.parse(t.from.replace(/}%\/%{/g,","));n.from=i.clientData.myUserName,n.avatar=i.avatar,n.message=t.message}n.from!==e.authUser.username&&e.messages.push(n)}))}},{key:"getVideoRecordingState",value:function(){var e=this;this.subject.getVideoRecordingState().subscribe((function(t){e.videoRecordingState=t.recording?"started":"finished"}))}},{key:"selectUserToReply",value:function(e){e.from!==this.authUser.username&&(this.userSelected=!0,this.selectedUsersToReply.includes(e.from)?(this.selectedUsersToReply=this.selectedUsersToReply.filter((function(t){return t!==e.from})),this.chatForm.patchValue({message:""})):(this.selectedUsersToReply.push(e.from),this.chatForm.patchValue({message:"@"+e.from})),console.log(this.selectedUsersToReply))}},{key:"sendMessage",value:function(e){if(this.videoId&&this.chatForm.valid){var t=this.fixLineBreaks.transform(this.chatForm.value.message,e.target);this.chatForm.patchValue({message:t});var n=Object.assign({video_id:this.videoId},this.chatForm.value);this.messages.push(n),this.sendMsg.emit(n),this.chatForm.patchValue({message:""})}else console.log("video id is not set")}},{key:"addEmoji",value:function(e){console.log(e),this.chatForm.patchValue({message:this.chatForm.value.message+(e.emoji.native?e.emoji.native:e.emoji.imageUrl)})}}]),e}()).\u0275fac=function(e){return new(e||ue)(d.Qb(s.e),d.Qb(B.a),d.Qb(g.a),d.Qb(F.a),d.Qb(te.a))},ue.\u0275cmp=d.Kb({type:ue,selectors:[["app-chat-box"]],inputs:{openViduToken:"openViduToken",session:"session",videoId:"videoId",videoRecordingState:"videoRecordingState"},outputs:{sendMsg:"sendMessage"},decls:3,vars:2,consts:[[1,"chat-content"],[4,"ngIf"],[1,"chat-title"],[1,"dropdown"],["id","dropdownChat","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"dropdown-toggle"],["aria-labelledby","dropdownChat",1,"dropdown-menu"],["href","#",1,"dropdown-item"],["src","assets/img/dotes.png"],[1,"chat-information"],["class","loader",4,"ngIf"],[1,"chat-footer"],[3,"formGroup"],["formControlName","message","placeholder","Comment",1,"chat-input",3,"keyup.enter"],[3,"custom","emojiClick"],[1,"chat-footer-smile"],[1,"nav-item","dropdown"],["data-toggle","dropdown",1,"chat-by-bits","nav-lin"],[1,"dropdown-menu"],[1,"smile-block"],[1,"smile"],[1,"send","fas","fa-paper-plane"],[1,"loader"],[3,"diameter"],["class","chat-block",4,"ngFor","ngForOf"],[1,"chat-block"],[1,"chat-block-2"],[1,"avatar",3,"src","click"],[1,"chat-block-1"],["id","chat-placeholder"]],template:function(e,t){1&e&&(d.Wb(0,"div",0),d.Ic(1,ce,29,4,"ng-container",1),d.Ic(2,le,4,0,"ng-container",1),d.Vb()),2&e&&(d.Cb(1),d.pc("ngIf","started"===t.videoRecordingState),d.Cb(1),d.pc("ngIf","idle"===t.videoRecordingState))},directives:[i.m,s.z,s.q,s.i,s.c,s.p,s.h,ne.a,b.b,i.l],pipes:[_.a],styles:[".chat-content[_ngcontent-%COMP%]{max-width:500px;box-shadow:0 0 6px rgba(0,0,0,.1);height:100%;margin-left:20px}.chat-content[_ngcontent-%COMP%]   .chat-title[_ngcontent-%COMP%]{width:100%;height:30px;background:#f8f8f8 0 0 no-repeat padding-box;padding:5px 12px;display:flex;justify-content:space-between;align-items:center}.chat-content[_ngcontent-%COMP%]   .chat-title[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{color:#545454;font-family:Muli-Light;font-size:12px}.chat-content[_ngcontent-%COMP%]   .chat-information[_ngcontent-%COMP%]{max-height:400px;overflow-y:scroll;height:calc(100% - 115px);padding:14px 12px 30px}.chat-content[_ngcontent-%COMP%]   .chat-information[_ngcontent-%COMP%]   .chat-block[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between;align-items:center;margin-bottom:8px}.chat-content[_ngcontent-%COMP%]   .chat-information[_ngcontent-%COMP%]   .chat-block[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:24px!important;height:24px!important}.chat-content[_ngcontent-%COMP%]   .chat-information[_ngcontent-%COMP%]   .chat-block[_ngcontent-%COMP%]   .selectable[_ngcontent-%COMP%]{cursor:pointer}.chat-content[_ngcontent-%COMP%]   .chat-information[_ngcontent-%COMP%]   .chat-block[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{border:1px solid #f53c6f}.chat-content[_ngcontent-%COMP%]   .chat-information[_ngcontent-%COMP%]   .chat-block[_ngcontent-%COMP%]   .chat-block-1[_ngcontent-%COMP%]{margin:0;color:#9b9b9b;font-size:14px;font-family:Muli-Light;width:76px!important}.chat-content[_ngcontent-%COMP%]   .chat-information[_ngcontent-%COMP%]   .chat-block[_ngcontent-%COMP%]   .chat-block-2[_ngcontent-%COMP%]{margin-bottom:0;margin-left:16px;flex:1;color:#545454;font-size:14px;font-family:Muli-Light}.chat-content[_ngcontent-%COMP%]   .chat-information[_ngcontent-%COMP%]   .chat-block[_ngcontent-%COMP%]   .chat-block-1[_ngcontent-%COMP%], .chat-content[_ngcontent-%COMP%]   .chat-information[_ngcontent-%COMP%]   .chat-block[_ngcontent-%COMP%]   .chat-block-2[_ngcontent-%COMP%]{max-width:80%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.chat-content[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]:hover{cursor:pointer}.chat-content[_ngcontent-%COMP%]   .chat-footer[_ngcontent-%COMP%]{width:100%;height:85px;padding:14px 12px;background:#f8f8f8 0 0 no-repeat padding-box}.chat-content[_ngcontent-%COMP%]   .chat-footer[_ngcontent-%COMP%]   .chat-footer-smile[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:12px}.chat-content[_ngcontent-%COMP%]   .chat-footer[_ngcontent-%COMP%]   .chat-footer-smile[_ngcontent-%COMP%]   .chat-by-bits[_ngcontent-%COMP%]{width:68px;height:19px;background:#f53c6f 0 0 no-repeat padding-box;font-size:12px;font-family:Muli-SemiBold;display:flex;justify-content:center;align-items:center;color:#fff!important}.chat-content[_ngcontent-%COMP%]   .chat-footer[_ngcontent-%COMP%]   .smile[_ngcontent-%COMP%]{color:#c9c9c9}.chat-content[_ngcontent-%COMP%]   .chat-footer[_ngcontent-%COMP%]   .send[_ngcontent-%COMP%]{color:#18b587;margin-left:15px}.chat-content[_ngcontent-%COMP%]   .chat-footer[_ngcontent-%COMP%]   .chat-input[_ngcontent-%COMP%]{color:#c9c9c9;font-size:14px;font-family:Muli-Light;padding:8px 0;width:100%;background:transparent;border-bottom:1px solid silver}.chat-content[_ngcontent-%COMP%]   .chat-footer[_ngcontent-%COMP%]   .smile-block[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.chat-content[_ngcontent-%COMP%]   #chat-placeholder[_ngcontent-%COMP%]{height:100%;display:flex;justify-content:center;align-items:center;color:#545454;font-size:12px;padding:10px}"]}),ue),pe=["video"];function he(e,t){1&e&&d.Rb(0,"mat-spinner",2),2&e&&d.pc("diameter",100)}function fe(e,t){if(1&e){var n=d.Xb();d.Wb(0,"app-chat-box",16),d.ec("sendMessage",(function(e){return d.Bc(n),d.ic(3).sendMessage(e)})),d.Vb()}if(2&e){var i=d.ic(3);d.pc("openViduToken",i.openViduToken)("session",i.session)("videoId",i.videoId)("videoRecordingState",i.recordingState)}}function ge(e,t){if(1&e&&(d.Wb(0,"li"),d.Kc(1),d.Vb()),2&e){var n=t.$implicit;d.Cb(1),d.Lc(n)}}function me(e,t){if(1&e){var n=d.Xb();d.Ub(0),d.Wb(1,"div",7),d.Wb(2,"div",8),d.Wb(3,"app-video-js-record",9),d.ec("recordingStarted",(function(e){return d.Bc(n),d.ic(2).getRecordedVideoId(e)})),d.Vb(),d.Vb(),d.Wb(4,"div",10),d.Ic(5,fe,1,4,"app-chat-box",11),d.Vb(),d.Vb(),d.Wb(6,"div",12),d.Rb(7,"i",13),d.Kc(8),d.Wb(9,"ul"),d.Ic(10,ge,2,1,"li",14),d.Vb(),d.Vb(),d.Rb(11,"app-stocks-marquee",15),d.Tb()}if(2&e){var i=d.ic(2);d.Cb(3),d.pc("openViduToken",i.openViduToken)("thumbnailFile",i.thumbnailFile)("videoSettings",i.videoSettings),d.Cb(2),d.pc("ngIf",i.videoId),d.Cb(3),d.Mc("",i.participants.length," "),d.Cb(2),d.pc("ngForOf",i.participants),d.Cb(1),d.pc("stocks",i.userStocks)("videoStreaming",!0)}}function ve(e,t){1&e&&(d.Wb(0,"div",17),d.Wb(1,"div",18),d.Rb(2,"img",19),d.Wb(3,"p",20),d.Wb(4,"b"),d.Kc(5,"There is no session data defined."),d.Vb(),d.Rb(6,"br"),d.Kc(7," Please return to the "),d.Wb(8,"a",21),d.Kc(9,"'Start live video' page"),d.Vb(),d.Vb(),d.Vb(),d.Vb())}function be(e,t){if(1&e){var n=d.Xb();d.Wb(0,"div",22),d.Wb(1,"div",18),d.Rb(2,"img",23),d.Wb(3,"p",20),d.Wb(4,"b"),d.Kc(5,"There was a problem while loading streaming session."),d.Vb(),d.Rb(6,"br"),d.Wb(7,"small"),d.Kc(8,"Please "),d.Wb(9,"a",24),d.ec("click",(function(){return d.Bc(n),d.ic(2).reloadPage()})),d.Kc(10,"reload"),d.Vb(),d.Kc(11," the page or try again later."),d.Vb(),d.Vb(),d.Vb(),d.Wb(12,"div",25),d.Wb(13,"div",18),d.Rb(14,"img",26),d.Wb(15,"p",27),d.Wb(16,"b"),d.Kc(17,"There was a problem while loading streaming session."),d.Vb(),d.Rb(18,"br"),d.Wb(19,"small"),d.Kc(20,"Please "),d.Wb(21,"a",24),d.ec("click",(function(){return d.Bc(n),d.ic(2).reloadPage()})),d.Kc(22,"reload"),d.Vb(),d.Kc(23," the page or try again later."),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Vb()}}function _e(e,t){if(1&e&&(d.Wb(0,"div",3),d.Ic(1,me,12,8,"ng-container",4),d.Ic(2,ve,10,0,"div",5),d.Ic(3,be,24,0,"div",6),d.Vb()),2&e){var n=d.ic();d.Cb(1),d.pc("ngIf",n.openViduToken),d.Cb(1),d.pc("ngIf",!n.sessionData&&!n.videoSettings),d.Cb(1),d.pc("ngIf",!n.openViduToken&&n.sessionData&&n.videoSettings)}}var ye,Ce=((ye=function(){function e(t,n,i,o,r,s,a,c,l,u,d,p,h){_classCallCheck(this,e),this.ref=t,this.toastr=n,this.elRef=i,this.openViduService=o,this.subject=r,this.getAuthUser=s,this.videoService=a,this.chatService=c,this.stocksService=l,this.router=u,this.route=d,this.dialog=p,this.loader=h,this.videoJSPlayerOptions={autoplay:!0,controls:!0,fluid:!1,sources:[]},this.OPENVIDU_SERVER_URL="https://localhost:4443",this.OPENVIDU_SERVER_SECRET="MY_SECRET",this.subscribers=[],this.recordingState="idle",this.webcams=[],this.tags=[],this.participants=[],this.thumbnailUploaded=!1,this.apiUrl=N.c,this.sessionData={sessionName:"",myUserName:""},this.userStocks=[]}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.authUser=this.getAuthUser.transform(),this.getVideoSessionData(),this.sessionData&&this.videoSettings&&this.joinSession(),this.subject.getVideoRecordingState().subscribe((function(t){"finished"===t.recordingState&&e.leaveSession(),t.viaSocket||e.sendRecordingState(t.recording)})),this.stocksService.getUserStocks({user_id:this.authUser.id}).subscribe((function(t){e.userStocks=(null==t?void 0:t.user_stocks)||[]}))}},{key:"beforeunloadHandler",value:function(){this.leaveSession(),"started"===this.recordingState&&this.removeLiveVideoByToken()}},{key:"alertOfLeaving",value:function(){this.toastr.error("Please stop recording first")}},{key:"getVideoSessionData",value:function(){var e=localStorage.getItem("session"),t=localStorage.getItem("video_settings");this.sessionData=e?JSON.parse(e):null,this.videoSettings=t?JSON.parse(t):null}},{key:"joinSession",value:function(){var e=this;this.OV=new j.OpenVidu,this.session=this.OV.initSession(),this.getStreamEvents(),this.loader.dataLoading=!0,this.openViduService.getToken({email:this.authUser.email,sessionName:this.sessionData.sessionName,role:"PUBLISHER"}).subscribe((function(t){e.openViduToken=t,e.receiveMessage(),e.receiveRecordingState(),e.session.connect(t,{clientData:e.sessionData,avatar:e.authUser.avatar}).then((function(){if(e.loader.dataLoading=!1,t.includes("PUBLISHER")){var n=e.elRef.nativeElement.querySelector("video"),i=e.OV.initPublisher(n,{audioSource:void 0,videoSource:void 0,publishAudio:!0,publishVideo:!0,resolution:"640x480",frameRate:30,insertMode:"APPEND",mirror:!1});e.session.publish(i),e.mainStreamManager=i,e.publisher=i}})).catch((function(t){e.toastr.error("There was a problem white loading streaming session"),console.log(t)}))}))}},{key:"getStreamEvents",value:function(){var e=this;this.session.on("streamCreated",(function(t){e.elRef.nativeElement.querySelector("video"),e.thumbnailFile=e.videoSettings.thumbnail,e.session.subscribe(t.stream,void 0)})),this.session.on("connectionCreated",(function(t){var n=JSON.parse(t.connection.data.replace(/}%\/%{/g,","));e.participants.push(n.clientData.myUserName)})),this.session.on("connectionDestroyed",(function(t){var n=JSON.parse(t.connection.data.replace(/}%\/%{/g,","));e.participants=e.participants.filter((function(e){return e!==n.clientData.myUserName}))})),this.session.on("streamDestroyed",(function(t){e.deleteSubscriber(t.stream.streamManager),e.leaveSession()}))}},{key:"updateMainStreamManager",value:function(e){this.mainStreamManager=e}},{key:"deleteSubscriber",value:function(e){console.log(this.subscribers)}},{key:"getRecordedVideoId",value:function(e){this.videoId=e}},{key:"leaveSession",value:function(){console.log("leaving session!!!"),this.session&&this.session.disconnect(),this.subscribers=[],delete this.publisher,delete this.session,delete this.OV,this.thumbnailFile=[],this.thumbnailUploaded=!1,this.sessionData&&this.openViduService.leaveSession({token:this.openViduToken,sessionName:this.sessionData.sessionName,role:"publisher"}).subscribe((function(){}))}},{key:"sendMessage",value:function(e){var t=this;this.session.signal({data:e.message,to:[],type:"my-chat"}).then((function(){t.chatService.saveVideoMessage(Object.assign({video_id:t.videoId},e)).subscribe((function(e){}))})).catch((function(e){console.error(e)}))}},{key:"sendRecordingState",value:function(e){this.session&&this.session.signal({data:e,to:[],type:"recording-state"}).then((function(){}))}},{key:"receiveRecordingState",value:function(){var e=this;this.session.on("signal:recording-state",(function(t){e.recordingState=t.data?"started":"finished","finished"===e.recordingState&&(e.tags=[]),e.subject.setVideoRecordingState(Object.assign({recordingState:e.recordingState},{viaSocket:!0}))}))}},{key:"receiveMessage",value:function(){var e=this;this.session.on("signal:my-chat",(function(t){e.subject.setMsgData({message:t.data,from:t.from.data})}))}},{key:"removeLiveVideoByToken",value:function(){this.videoService.removeVideoByToken({token:this.openViduToken}).subscribe((function(){}))}},{key:"reloadPage",value:function(){location.reload()}},{key:"ngOnDestroy",value:function(){"started"===this.recordingState&&this.removeLiveVideoByToken(),this.leaveSession()}},{key:"ngAfterViewInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||ye)(d.Qb(d.h),d.Qb(m.b),d.Qb(d.l),d.Qb(U),d.Qb(B.a),d.Qb(g.a),d.Qb(W.a),d.Qb(F.a),d.Qb(z.a),d.Qb(o.e),d.Qb(o.a),d.Qb(q.b),d.Qb(p.a))},ye.\u0275cmp=d.Kb({type:ye,selectors:[["app-video"]],viewQuery:function(e,t){var n;1&e&&d.Pc(pe,!0),2&e&&d.wc(n=d.fc())&&(t.videoEl=n.first)},hostBindings:function(e,t){1&e&&d.ec("beforeunload",(function(){return t.beforeunloadHandler()}),!1,d.Ac)},decls:2,vars:2,consts:[["class","session-loader",3,"diameter",4,"ngIf"],["id","video-stream-container",4,"ngIf"],[1,"session-loader",3,"diameter"],["id","video-stream-container"],[4,"ngIf"],["class","no-stored-session-data",4,"ngIf"],["class","stream-errors",4,"ngIf"],["id","video-chat-container"],[1,"video-container"],[3,"openViduToken","thumbnailFile","videoSettings","recordingStarted"],[1,"chat-container"],[3,"openViduToken","session","videoId","videoRecordingState","sendMessage",4,"ngIf"],["id","participants-count"],[1,"fa","fa-users"],[4,"ngFor","ngForOf"],[3,"stocks","videoStreaming"],[3,"openViduToken","session","videoId","videoRecordingState","sendMessage"],[1,"no-stored-session-data"],[1,"d-flex","flex-column","justify-content-center","align-items-center","mx-auto","py-5","mt-5"],["src","../../../../../assets/img/errorPage.svg","alt","no-stored-session-data-img","width","500","height","370"],[1,"text-center"],["routerLink","/user/video/start-live-video"],[1,"stream-errors"],["src","../../../../../assets/img/errorLoading.svg","alt","no-stored-session-data-img","width","150","height","200"],[1,"reload",3,"click"],[1,"d-none"],["src","../../../../../assets/img/dataError.svg","alt","stream-errors-img","width","334","height","471"],[1,"text-center","top"]],template:function(e,t){1&e&&(d.Ic(0,he,1,1,"mat-spinner",0),d.Ic(1,_e,4,3,"div",1)),2&e&&(d.pc("ngIf",t.loader.dataLoading),d.Cb(1),d.pc("ngIf",!t.loader.dataLoading))},directives:[i.m,b.b,$,i.l,ee.a,de,o.h],styles:[".session-container[_ngcontent-%COMP%]{height:100vh}#img-div[_ngcontent-%COMP%]{text-align:center}#img-div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:200px}.join-session-btn[_ngcontent-%COMP%]{background-color:#18b587;width:25%;margin-top:33px;border:none}#video-chat-container[_ngcontent-%COMP%]{display:flex}#video-chat-container[_ngcontent-%COMP%]   .video-container[_ngcontent-%COMP%]{flex:1;display:flex;align-items:flex-start}#video-chat-container[_ngcontent-%COMP%]   .chat-container[_ngcontent-%COMP%]{flex:0.5;display:flex}#video-chat-container[_ngcontent-%COMP%]   app-video-js-record[_ngcontent-%COMP%]{flex:1;position:relative;width:100%;overflow:hidden;padding:30% 0}#streaming-not-started-yet[_ngcontent-%COMP%]{width:500px;height:400px;display:flex;align-items:center;justify-content:center;font-family:Muli-Light;background:#efefef}.stream-container[_ngcontent-%COMP%]{overflow:hidden}.stream-errors[_ngcontent-%COMP%]{display:flex}.reload[_ngcontent-%COMP%]{text-decoration:underline;color:#000}"]}),ye),Oe=n("+xpX"),Se=["ovSessionComponent"];function ke(e,t){if(1&e){var n=d.Xb();d.Wb(0,"div",2),d.Wb(1,"div",3),d.Wb(2,"h1"),d.Kc(3,"Join a video session"),d.Vb(),d.Wb(4,"form",4),d.Wb(5,"p"),d.Wb(6,"label"),d.Kc(7,"Participant"),d.Vb(),d.Rb(8,"input",5),d.Vb(),d.Wb(9,"p"),d.Wb(10,"label"),d.Kc(11,"Session"),d.Vb(),d.Rb(12,"input",6),d.Vb(),d.Wb(13,"p",7),d.Wb(14,"button",8),d.ec("click",(function(){return d.Bc(n),d.ic().joinSession()})),d.Kc(15,"Join!"),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Vb()}if(2&e){var i=d.ic();d.Cb(4),d.pc("formGroup",i.joinSessionForm)}}function xe(e,t){if(1&e){var n=d.Xb();d.Wb(0,"div",9),d.Wb(1,"opv-session",10,11),d.ec("sessionCreated",(function(e){return d.Bc(n),d.ic().handlerSessionCreatedEvent(e)}))("publisherCreated",(function(e){return d.Bc(n),d.ic().handlerPublisherCreatedEvent(e)}))("error",(function(e){return d.Bc(n),d.ic().handlerErrorEvent(e)})),d.Vb(),d.Vb()}if(2&e){var i=d.ic();d.Cb(1),d.pc("sessionName",i.mySessionId)("user",i.myUserName)("tokens",i.tokens)}}var Me,we=((Me=function(){function e(t,n,i,o){_classCallCheck(this,e),this.fb=t,this.openViduService=n,this.toastr=i,this.elRef=o,this.OPENVIDU_SERVER_URL="https://localhost/:4443",this.OPENVIDU_SERVER_SECRET="MY_SECRET",this.mySessionId="SessionA",this.myUserName="Participant"+Math.floor(100*Math.random()),this.tokens=[],this.session=!1,this.initForm()}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"initForm",value:function(){this.joinSessionForm=this.fb.group({mySessionId:["SessionB"],myUserName:["Participant"+Math.floor(100*Math.random())]})}},{key:"joinSession",value:function(){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.getToken();case 1:case"end":return e.stop()}}),e,this)})))}},{key:"getToken",value:function(){var e=this;this.openViduService.getToken({email:"admin@gmail.com",sessionName:"SessionA"}).subscribe((function(t){e.tokens.push(t),e.session=!0,console.log(e.tokens)}))}},{key:"leaveSession",value:function(){}},{key:"handlerSessionCreatedEvent",value:function(e){var t=this;console.log("SESSION CREATED EVENT",e),e.on("streamCreated",(function(e){console.log("stream created!!!")})),e.on("streamDestroyed",(function(e){})),e.on("sessionDisconnected",(function(e){t.session=!1,t.tokens=[]}))}},{key:"handlerPublisherCreatedEvent",value:function(e){e.on("streamCreated",(function(e){console.log("Publisher streamCreated",e)}))}},{key:"handlerErrorEvent",value:function(e){console.log("error",e)}},{key:"myMethod",value:function(){this.ovLocalUsers=this.ovSessionComponent.getLocalUsers(),this.ovLayout=this.ovSessionComponent.getOpenviduLayout(),this.ovLayoutOptions=this.ovSessionComponent.getOpenviduLayoutOptions()}},{key:"ngOnDestroy",value:function(){this.leaveSession()}}]),e}()).\u0275fac=function(e){return new(e||Me)(d.Qb(s.e),d.Qb(U),d.Qb(m.b),d.Qb(d.l))},Me.\u0275cmp=d.Kb({type:Me,selectors:[["app-video-library"]],viewQuery:function(e,t){var n;1&e&&d.Pc(Se,!0),2&e&&d.wc(n=d.fc())&&(t.ovSessionComponent=n.first)},decls:2,vars:2,consts:[["id","join",4,"ngIf"],["id","session",4,"ngIf"],["id","join"],["id","join-dialog"],[1,"form-group",3,"formGroup"],["id","userName","formControlName","mySessionId","required","",1,"form-control"],["id","sessionId","formControlName","myUserName","required","",1,"form-control"],[1,"text-center"],["type","button",1,"btn","btn-lg","btn-success","join-session-btn",3,"click"],["id","session"],[3,"sessionName","user","tokens","sessionCreated","publisherCreated","error"],["ovSessionComponent",""]],template:function(e,t){1&e&&(d.Ic(0,ke,16,1,"div",0),d.Ic(1,xe,3,3,"div",1)),2&e&&(d.pc("ngIf",!t.session),d.Cb(1),d.pc("ngIf",t.session))},directives:[i.m,s.z,s.q,s.i,s.c,s.p,s.h,s.v,Oe.OpenviduSessionComponent],styles:["#join[_ngcontent-%COMP%]{text-align:center}#join[_ngcontent-%COMP%], #session[_ngcontent-%COMP%]{position:absolute;margin:auto;top:100px;bottom:0;left:0;right:0;height:70%;width:45%}"]}),Me),Ee=n("kmnG"),Pe=n("d3UM"),Ie=n("NFeN"),Re=n("FKr1"),Te=n("t9lf");function Ae(e,t){1&e&&(d.Wb(0,"div",5),d.Rb(1,"mat-spinner",6),d.Wb(2,"strong"),d.Kc(3,"Loading devices info"),d.Vb(),d.Vb()),2&e&&(d.Cb(1),d.pc("diameter",20))}function De(e,t){if(1&e&&(d.Wb(0,"mat-option",20),d.Kc(1),d.Vb()),2&e){var n=t.$implicit;d.pc("value",n.label),d.Cb(1),d.Mc(" ",n.label," ")}}var Le=function(){return{kind:"videoinput"}};function je(e,t){if(1&e){var n=d.Xb();d.Wb(0,"div",15),d.Wb(1,"span",14),d.Kc(2,"videocam"),d.Vb(),d.Wb(3,"mat-form-field",16),d.Wb(4,"mat-select",17),d.Ic(5,De,2,2,"mat-option",18),d.jc(6,"filterDevices"),d.Vb(),d.Vb(),d.Wb(7,"mat-icon",19),d.ec("click",(function(){return d.Bc(n),d.ic(2).getConnectedDevices()})),d.Kc(8,"refresh"),d.Vb(),d.Vb()}if(2&e){var i=d.ic(2);d.Cb(5),d.pc("ngForOf",d.lc(6,1,i.userMediaDevices,d.sc(4,Le)))}}function Ne(e,t){if(1&e){var n=d.Xb();d.Wb(0,"div",21),d.Wb(1,"mat-icon"),d.Kc(2,"videocam_off"),d.Vb(),d.Ub(3),d.Wb(4,"span"),d.Kc(5,"Can't find camera. Make sure it's connected and try again"),d.Vb(),d.Wb(6,"mat-icon",19),d.ec("click",(function(){return d.Bc(n),d.ic(2).getConnectedDevices()})),d.Kc(7,"refresh"),d.Vb(),d.Tb(),d.Vb()}}function Ve(e,t){if(1&e&&(d.Wb(0,"mat-option",20),d.Kc(1),d.Vb()),2&e){var n=t.$implicit;d.pc("value",n.label),d.Cb(1),d.Mc(" ",n.label," ")}}var Ue=function(){return{kind:"audioinput"}};function Be(e,t){if(1&e){var n=d.Xb();d.Wb(0,"div",15),d.Wb(1,"span",14),d.Kc(2,"mic"),d.Vb(),d.Wb(3,"mat-form-field",16),d.Wb(4,"mat-select",22),d.Ic(5,Ve,2,2,"mat-option",18),d.jc(6,"filterDevices"),d.Vb(),d.Vb(),d.Wb(7,"mat-icon",19),d.ec("click",(function(){return d.Bc(n),d.ic(2).getConnectedDevices()})),d.Kc(8,"refresh"),d.Vb(),d.Vb()}if(2&e){var i=d.ic(2);d.Cb(5),d.pc("ngForOf",d.lc(6,1,i.userMediaDevices,d.sc(4,Ue)))}}function We(e,t){if(1&e){var n=d.Xb();d.Wb(0,"div",21),d.Wb(1,"mat-icon"),d.Kc(2,"mic"),d.Vb(),d.Wb(3,"span"),d.Kc(4,"Can't find microphone. Make sure it's connected and try again"),d.Vb(),d.Wb(5,"mat-icon",19),d.ec("click",(function(){return d.Bc(n),d.ic(2).getConnectedDevices()})),d.Kc(6,"refresh"),d.Vb(),d.Vb()}}function Fe(e,t){if(1&e){var n=d.Xb();d.Wb(0,"form",7),d.Wb(1,"div",8),d.Wb(2,"div",9),d.Wb(3,"div",10),d.Ic(4,je,9,5,"div",11),d.Ic(5,Ne,8,0,"div",12),d.Vb(),d.Wb(6,"div",10),d.Ic(7,Be,9,5,"div",11),d.Ic(8,We,7,0,"div",12),d.Vb(),d.Vb(),d.Vb(),d.Wb(9,"button",13),d.ec("click",(function(){return d.Bc(n),d.ic().startLiveVideo()})),d.Wb(10,"span",14),d.Kc(11," video_call "),d.Vb(),d.Wb(12,"span"),d.Kc(13,"Start live video"),d.Vb(),d.Vb(),d.Vb()}if(2&e){var i=d.ic();d.pc("formGroup",i.deviceRecognitionForm),d.Cb(4),d.pc("ngIf",!i.videoDevice.hasError("required")),d.Cb(1),d.pc("ngIf",i.videoDevice.hasError("required")),d.Cb(2),d.pc("ngIf",!i.audioDevice.hasError("required")),d.Cb(1),d.pc("ngIf",i.audioDevice.hasError("required")),d.Cb(1),d.pc("disabled",!i.deviceRecognitionForm.valid)}}var ze,qe=((ze=function(){function e(t,n,i,o){_classCallCheck(this,e),this.toastr=t,this.fb=n,this.getAuthUser=i,this.router=o,this.deviceStatus="idle",this.checked=new d.o}return _createClass(e,[{key:"ngOnInit",value:function(){this.authUser=this.getAuthUser.transform(),this.initForm()}},{key:"initForm",value:function(){this.deviceRecognitionForm=this.fb.group({video_device:["",s.x.required],audio_device:["",s.x.required]})}},{key:"startLiveVideo",value:function(){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.checked.emit(!0);case 1:case"end":return e.stop()}}),e,this)})))}},{key:"ngAfterViewInit",value:function(){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getConnectedDevices(!0);case 2:case"end":return e.stop()}}),e,this)})))}},{key:"getConnectedDevices",value:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0],Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(navigator.mediaDevices),navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then((function(){t.deviceStatus="loading",navigator.mediaDevices.enumerateDevices().then((function(e){var n,i;t.deviceStatus="loaded",t.userMediaDevices=e,t.defaultVideoDevice=e.find((function(e){return"videoinput"===e.kind})),t.deviceRecognitionForm.patchValue({video_device:null===(n=t.defaultVideoDevice)||void 0===n?void 0:n.label}),t.defaultAudioDevice=e.find((function(e){return"audioinput"===e.kind})),t.deviceRecognitionForm.patchValue({audio_device:null===(i=t.defaultAudioDevice)||void 0===i?void 0:i.label})})).catch((function(e){t.deviceRecognitionForm.patchValue({audio_device:"",video_device:""}),t.toastr.error(e.message)}))})).catch((function(e){console.log(e),t.deviceStatus="failed",t.deviceRecognitionForm.patchValue({audio_device:"",video_device:""}),console.log(t.deviceRecognitionForm.value),t.toastr.error(e.message)}));case 1:case"end":return e.stop()}}),e)})))}},{key:"audioDevice",get:function(){return this.deviceRecognitionForm.get("audio_device")}},{key:"videoDevice",get:function(){return this.deviceRecognitionForm.get("video_device")}}]),e}()).\u0275fac=function(e){return new(e||ze)(d.Qb(m.b),d.Qb(s.e),d.Qb(g.a),d.Qb(o.e))},ze.\u0275cmp=d.Kb({type:ze,selectors:[["app-check-requirements"]],outputs:{checked:"checked"},decls:13,vars:2,consts:[[1,"start-live-video-page"],[1,"text"],["href","https://www.copyright.gov/dmca-directory/","target","_blank"],["class","loader",4,"ngIf"],[3,"formGroup",4,"ngIf"],[1,"loader"],[3,"diameter"],[3,"formGroup"],["id","devices"],[1,"item-wrap"],[1,"item"],["class","info border",4,"ngIf"],["class","error-msg",4,"ngIf"],["type","button",1,"btn",3,"disabled","click"],[1,"material-icons"],[1,"info","border"],[2,"width","88%"],["formControlName","video_device"],[3,"value",4,"ngFor","ngForOf"],[1,"refresh",3,"click"],[3,"value"],[1,"error-msg"],["formControlName","audio_device"]],template:function(e,t){1&e&&(d.Wb(0,"div",0),d.Wb(1,"div",1),d.Wb(2,"h1"),d.Kc(3,"Start live video"),d.Vb(),d.Wb(4,"p"),d.Kc(5,"Start sharing your story and connecting with viewers. Get your webcam ready, check your lighting, and click below to go live! We ask that you keep in mind of the "),d.Wb(6,"a",2),d.Kc(7,"DMCA rules"),d.Vb(),d.Kc(8," and please do not play any music that is not owned by you while you stream. We will remove any videos that are in violation of the DMCA. "),d.Rb(9,"br"),d.Kc(10," Smile, you look great! "),d.Vb(),d.Ic(11,Ae,4,1,"div",3),d.Ic(12,Fe,14,6,"form",4),d.Vb(),d.Vb()),2&e&&(d.Cb(11),d.pc("ngIf","loaded"!==t.deviceStatus&&"failed"!==t.deviceStatus),d.Cb(1),d.pc("ngIf","loaded"===t.deviceStatus||"failed"===t.deviceStatus))},directives:[i.m,b.b,s.z,s.q,s.i,Ee.c,Pe.a,s.p,s.h,i.l,Ie.a,Re.n],pipes:[Te.a],styles:[".start-live-video-page[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;max-width:810px;margin:160px auto 0;padding:144px 0 80px 280px;background-size:contain;background-position:0 0;background-repeat:no-repeat;background-image:url(/assets/img/live-video.png)}.start-live-video-page[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{max-width:532px}.start-live-video-page[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;color:#18b587}.start-live-video-page[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:16px;margin-bottom:0;font-size:16px;color:#545454}.start-live-video-page[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]{display:flex;padding:10px;align-items:center;justify-content:center}.start-live-video-page[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{margin-left:10px;color:#18b587}.start-live-video-page[_ngcontent-%COMP%]   .refresh[_ngcontent-%COMP%]{cursor:pointer}.start-live-video-page[_ngcontent-%COMP%]   .item-wrap[_ngcontent-%COMP%]{margin-top:16px}.start-live-video-page[_ngcontent-%COMP%]   .item-wrap[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{margin-bottom:8px}.start-live-video-page[_ngcontent-%COMP%]   .item-wrap[_ngcontent-%COMP%]   .item.d-flex[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-right:40px}.start-live-video-page[_ngcontent-%COMP%]   .item-wrap[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;justify-content:space-between;color:#18b587;font-size:14px;margin-bottom:2px}.start-live-video-page[_ngcontent-%COMP%]   .item-wrap[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .edit[_ngcontent-%COMP%]{font-size:16px;color:#545454;cursor:pointer}.start-live-video-page[_ngcontent-%COMP%]   .item-wrap[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .edit[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:20px;margin-left:4px}.start-live-video-page[_ngcontent-%COMP%]   .item-wrap[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;align-items:center}.start-live-video-page[_ngcontent-%COMP%]   .item-wrap[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info.border[_ngcontent-%COMP%]{border:0!important}.start-live-video-page[_ngcontent-%COMP%]   .item-wrap[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info.border[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:not(.material-icons){border-bottom:.5px solid #dcdcdc}.start-live-video-page[_ngcontent-%COMP%]   .item-wrap[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:not(.material-icons){flex:1}.start-live-video-page[_ngcontent-%COMP%]   .item-wrap[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{margin-right:8px}.start-live-video-page[_ngcontent-%COMP%]   .item-wrap[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{color:#545454;font-weight:600;font-size:16px}.start-live-video-page[_ngcontent-%COMP%]   .item-wrap[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:20px}.start-live-video-page[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-top:24px;padding:8px 32px;display:flex;align-items:center;background:#f53c6f;font-size:16px;color:#fff;border-radius:0;transition:.3s ease-in-out}.start-live-video-page[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:8px}.start-live-video-page[_ngcontent-%COMP%]   .error-msg[_ngcontent-%COMP%]{display:flex}"]}),ze),Ge=n("FtGj"),Ke=n("A5z7"),Qe=n("qFsG"),Ye=n("/1cH"),He=n("QibW"),Je=["chipsInput"],Ze=["tagList"];function Xe(e,t){1&e&&(d.Wb(0,"mat-error"),d.Kc(1,"The stream name is required"),d.Vb())}function $e(e,t){if(1&e){var n=d.Xb();d.Wb(0,"mat-chip",28),d.ec("removed",(function(){d.Bc(n);var e=t.$implicit;return d.ic().remove(e)})),d.Kc(1),d.Wb(2,"mat-icon",29),d.Kc(3,"cancel"),d.Vb(),d.Vb()}if(2&e){var i=t.$implicit;d.Cb(1),d.Mc(" ",i.name," ")}}function et(e,t){if(1&e&&(d.Wb(0,"mat-option",31),d.Kc(1),d.Vb()),2&e){var n=t.$implicit;d.pc("value",n),d.Cb(1),d.Mc(" ",null==n?null:n.tag_details.name," ")}}function tt(e,t){if(1&e&&(d.Wb(0,"mat-optgroup",30),d.Ic(1,et,2,2,"mat-option",19),d.Vb()),2&e){var n=t.$implicit;d.pc("label",n.name),d.Cb(1),d.pc("ngForOf",n.values)}}function nt(e,t){1&e&&(d.Wb(0,"mat-error"),d.Kc(1,"Please provide some tags describing your live video "),d.Vb())}function it(e,t){1&e&&(d.Wb(0,"mat-error"),d.Kc(1,"Only 3 tags please"),d.Vb())}function ot(e,t){if(1&e){var n=d.Xb();d.Wb(0,"mat-autocomplete",11,12),d.ec("optionSelected",(function(e){return d.Bc(n),d.ic().autocompleteSelect(e)})),d.Wb(2,"mat-option"),d.Kc(3," OK "),d.Vb(),d.Vb()}}function rt(e,t){if(1&e&&(d.Wb(0,"option",31),d.Kc(1),d.Vb()),2&e){var n=t.$implicit;d.pc("value",n.id),d.Cb(1),d.Lc(n.name)}}function st(e,t){1&e&&(d.Wb(0,"mat-error"),d.Kc(1," The stream category is required "),d.Vb())}function at(e,t){1&e&&(d.Wb(0,"mat-error"),d.Kc(1," The stream description is required "),d.Vb())}function ct(e,t){1&e&&(d.Wb(0,"mat-error"),d.Kc(1," Not more than 140 characters please "),d.Vb())}function lt(e,t){if(1&e&&(d.Wb(0,"mat-radio-button",31),d.Kc(1),d.Wb(2,"mat-icon"),d.Kc(3),d.Vb(),d.Vb()),2&e){var n=t.$implicit;d.pc("value",n.name),d.Cb(1),d.Mc(" ",n.name," "),d.Cb(2),d.Lc(n.icon)}}function ut(e,t){1&e&&d.Rb(0,"mat-spinner",36),2&e&&d.pc("diameter",15)}function dt(e,t){1&e&&(d.Wb(0,"mat-error"),d.Kc(1," The thumbnail is required "),d.Vb())}function pt(e,t){if(1&e){var n=d.Xb();d.Ub(0),d.Wb(1,"label",32),d.Wb(2,"span",33),d.Kc(3,"backup"),d.Vb(),d.Kc(4," Upload Thumbnail "),d.Vb(),d.Ic(5,ut,1,1,"mat-spinner",34),d.Wb(6,"input",35),d.ec("change",(function(e){return d.Bc(n),d.ic().getThumbnailFile(e)})),d.Vb(),d.Ic(7,dt,2,0,"mat-error",4),d.Tb()}if(2&e){var i=d.ic();d.Cb(5),d.pc("ngIf",i.loader.fileProcessing),d.Cb(2),d.pc("ngIf",i.startStreamingForm.get("thumbnail").hasError("required")&&i.isSubmitted)}}function ht(e,t){if(1&e){var n=d.Xb();d.Wb(0,"div",37),d.Wb(1,"mat-icon",38),d.ec("click",(function(){d.Bc(n);var e=d.ic();return e.removeUploadedThumbnail(e.thumbnailFile.name)})),d.Kc(2,"clear "),d.Vb(),d.Rb(3,"img",39),d.Vb()}if(2&e){var i=d.ic();d.Cb(3),d.qc("src",i.apiUrl+"uploads/thumbnails/"+i.thumbnailFile.name,d.Dc)}}var ft,gt=((ft=function(){function e(t,n,i,o,r){_classCallCheck(this,e),this.videoService=t,this.toastr=n,this.fb=i,this.getAuthUser=o,this.loader=r,this.isSubmitted=!1,this.thumbnailUploading=!1,this.thumbnailUploaded=!1,this.apiUrl=N.c,this.tags=[],this.sessionName="SessionA",this.separatorKeysCodes=[Ge.g,Ge.c],this.privacyTypes=[{name:"Public",icon:"public"},{name:"Private",icon:"lock"}],this.savedTags=[],this.formReady=new d.o}return _createClass(e,[{key:"ngOnInit",value:function(){this.authUser=this.getAuthUser.transform(),this.selectedPrivacy=this.privacyTypes[0],this.initForm(),this.getVideoCategories()}},{key:"initForm",value:function(){this.startStreamingForm=this.fb.group({name:["",s.x.required],description:["",[s.x.required,s.x.maxLength(N.h)]],category_id:["",s.x.required],tags:[[],s.x.required],sessionName:[this.sessionName],myUserName:[this.authUser.username],thumbnail:["",s.x.required],privacy:["Public"],status:["live"]})}},{key:"getVideoCategories",value:function(){var e=this;this.videoService.getVideoCategories().subscribe((function(t){e.videoCategories=t}))}},{key:"getVideoTags",value:function(){var e=this;this.videoService.getVideoTags().subscribe((function(t){e.savedTags=t}))}},{key:"changedPrivacy",value:function(e){this.selectedPrivacy=this.privacyTypes.find((function(t){return t.name===e.value}))}},{key:"autocompleteSelect",value:function(e){console.log(e)}},{key:"add",value:function(e){console.log("add");var t=e.input,n=e.value;(n||"").trim()&&(this.tags.push({name:n.trim()}),this.startStreamingForm.patchValue({tags:this.tags})),t&&(t.value="")}},{key:"remove",value:function(e){var t=this.tags.indexOf(e);t>=0&&(this.tags.splice(t,1),this.startStreamingForm.patchValue({tags:this.tags}))}},{key:"getThumbnailFile",value:function(e){var t=this;this.thumbnailFile=e.target.files[0];var n=new FormData;n.append("video_thumbnail_file",this.thumbnailFile),this.startStreamingForm.patchValue({thumbnail:this.thumbnailFile.name}),this.thumbnailUploading=!0,this.loader.fileProcessing=!0,this.videoService.saveVideoThumbnail(n).subscribe((function(e){t.toastr.success("The thumbnail has been uploaded successfully"),t.thumbnailUploading=!1,t.thumbnailUploaded=!0,t.loader.fileProcessing=!1}))}},{key:"removeUploadedThumbnail",value:function(e){this.thumbnailFile=[],this.toastr.success("The thumbnail has been removed successfully"),this.thumbnailUploaded=!1,this.startStreamingForm.patchValue({thumbnail:""})}},{key:"submit",value:function(){var e,t=this;this.isSubmitted=!0,this.startStreamingForm.valid&&this.tags.length<=3&&this.formReady.emit(Object.assign({categoryName:null===(e=this.videoCategories.find((function(e){return e.id===+t.startStreamingForm.value.category_id})))||void 0===e?void 0:e.name},this.startStreamingForm.value))}},{key:"autoCompleteTagsSelected",value:function(e){this.tags.push({name:e.option.viewValue}),this.startStreamingForm.patchValue({tags:this.tags})}},{key:"streamName",get:function(){return this.startStreamingForm.get("name")}},{key:"streamDesc",get:function(){return this.startStreamingForm.get("description")}},{key:"streamCategory",get:function(){return this.startStreamingForm.get("category_id")}},{key:"streamTags",get:function(){return this.startStreamingForm.get("tags")}}]),e}()).\u0275fac=function(e){return new(e||ft)(d.Qb(W.a),d.Qb(m.b),d.Qb(s.e),d.Qb(g.a),d.Qb(p.a))},ft.\u0275cmp=d.Kb({type:ft,selectors:[["app-stream-details-form"]],viewQuery:function(e,t){var n;1&e&&(d.Pc(Je,!0),d.Pc(Ze,!0)),2&e&&(d.wc(n=d.fc())&&(t.chipsInput=n.first),d.wc(n=d.fc())&&(t.tagList=n.first))},outputs:{formReady:"formReady"},decls:39,vars:18,consts:[["id","start-streaming-form",3,"formGroup"],[1,"start-live-video"],["id","video-name"],["formControlName","name","placeholder","Video name"],[4,"ngIf"],["id","video-tags"],["aria-label","Fruit selection","formControlName","tags"],["tagList",""],[3,"removed",4,"ngFor","ngForOf"],["type","text","placeholder","Tags...","matInput","","maxlength","10",3,"matChipInputFor","matChipInputSeparatorKeyCodes","matAutocomplete","matChipInputTokenEnd"],["chipsInput",""],[3,"optionSelected"],["auto","matAutocomplete"],[3,"label",4,"ngFor","ngForOf"],["align","end"],[3,"optionSelected",4,"ngIf"],["id","video-categories"],["formControlName","category_id"],["selected","","disabled","",3,"value"],[3,"value",4,"ngFor","ngForOf"],["id","video-description"],["formControlName","description","placeholder","Video description"],["id","privacy"],["formControlName","privacy",3,"change"],["id","thumbnail"],["id","uploaded-thumbnail-container",4,"ngIf"],[1,"actions"],["type","button",1,"btn","btn-lg","btn-success","join-session-btn",3,"click"],[3,"removed"],["matChipRemove",""],[3,"label"],[3,"value"],["for","custom-thumbnail"],[1,"material-icons"],[3,"diameter",4,"ngIf"],["type","file","id","custom-thumbnail",3,"change"],[3,"diameter"],["id","uploaded-thumbnail-container"],["id","remove-thumbnail",3,"click"],["id","uploaded-thumbnail",3,"src"]],template:function(e,t){if(1&e&&(d.Wb(0,"form",0),d.Wb(1,"div",1),d.Wb(2,"div",2),d.Rb(3,"input",3),d.Ic(4,Xe,2,0,"mat-error",4),d.Vb(),d.Wb(5,"div",5),d.Wb(6,"mat-form-field"),d.Wb(7,"mat-chip-list",6,7),d.Ic(9,$e,4,1,"mat-chip",8),d.Wb(10,"input",9,10),d.ec("matChipInputTokenEnd",(function(e){return t.add(e)})),d.Vb(),d.Vb(),d.Wb(12,"mat-autocomplete",11,12),d.ec("optionSelected",(function(e){return t.autoCompleteTagsSelected(e)})),d.Ic(14,tt,2,2,"mat-optgroup",13),d.Vb(),d.Wb(15,"mat-hint",14),d.Kc(16,"Please press 'Enter' after the tag name and write not more than 3 tags"),d.Vb(),d.Vb(),d.Ic(17,nt,2,0,"mat-error",4),d.Ic(18,it,2,0,"mat-error",4),d.Vb(),d.Ic(19,ot,4,0,"mat-autocomplete",15),d.Wb(20,"div",16),d.Wb(21,"select",17),d.Wb(22,"option",18),d.Kc(23,"Category"),d.Vb(),d.Ic(24,rt,2,2,"option",19),d.Vb(),d.Ic(25,st,2,0,"mat-error",4),d.Vb(),d.Wb(26,"div",20),d.Rb(27,"textarea",21),d.Ic(28,at,2,0,"mat-error",4),d.Ic(29,ct,2,0,"mat-error",4),d.Vb(),d.Wb(30,"div",22),d.Wb(31,"mat-radio-group",23),d.ec("change",(function(e){return t.changedPrivacy(e)})),d.Ic(32,lt,4,3,"mat-radio-button",19),d.Vb(),d.Vb(),d.Wb(33,"div",24),d.Ic(34,pt,8,2,"ng-container",4),d.Ic(35,ht,4,1,"div",25),d.Vb(),d.Wb(36,"div",26),d.Wb(37,"button",27),d.ec("click",(function(){return t.submit()})),d.Kc(38," Start live video "),d.Vb(),d.Vb(),d.Vb(),d.Vb()),2&e){var n=d.xc(8),i=d.xc(13);d.pc("formGroup",t.startStreamingForm),d.Cb(4),d.pc("ngIf",t.streamName.hasError("required")&&t.isSubmitted),d.Cb(5),d.pc("ngForOf",t.tags),d.Cb(1),d.pc("matChipInputFor",n)("matChipInputSeparatorKeyCodes",t.separatorKeysCodes)("matAutocomplete",i),d.Cb(4),d.pc("ngForOf",t.savedTags),d.Cb(3),d.pc("ngIf",0===t.tags.length&&t.isSubmitted),d.Cb(1),d.pc("ngIf",t.tags.length>3&&t.isSubmitted),d.Cb(1),d.pc("ngIf",t.savedTags.length>0),d.Cb(3),d.pc("value",""),d.Cb(2),d.pc("ngForOf",t.videoCategories),d.Cb(1),d.pc("ngIf",t.streamCategory.hasError("required")&&t.isSubmitted),d.Cb(3),d.pc("ngIf",t.streamDesc.hasError("required")&&t.isSubmitted),d.Cb(1),d.pc("ngIf",t.streamDesc.hasError("maxlength")),d.Cb(3),d.pc("ngForOf",t.privacyTypes),d.Cb(2),d.pc("ngIf",!t.thumbnailUploaded),d.Cb(1),d.pc("ngIf",t.thumbnailUploaded)}},directives:[s.z,s.q,s.i,s.c,s.p,s.h,i.m,Ee.c,Ke.c,i.l,Qe.b,Ke.b,Ye.c,Ye.a,Ee.f,s.w,s.t,s.y,He.b,Ee.b,Ke.a,Ie.a,Ke.d,Re.m,Re.n,He.a,b.b],styles:[".start-live-video[_ngcontent-%COMP%]{width:100%;max-width:548px;margin:64px auto 0}#start-streaming-form[_ngcontent-%COMP%]{font-family:Muli-Regular}#start-streaming-form[_ngcontent-%COMP%]   #video-tags[_ngcontent-%COMP%]{margin-top:24px}#start-streaming-form[_ngcontent-%COMP%]   #video-name[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-top:24px;width:100%;height:51px;background:#fff 0 0 no-repeat padding-box;box-shadow:0 0 6px #eee;color:#8c8888}#start-streaming-form[_ngcontent-%COMP%]   #privacy[_ngcontent-%COMP%], #start-streaming-form[_ngcontent-%COMP%]   #video-categories[_ngcontent-%COMP%]{margin-top:24px}#start-streaming-form[_ngcontent-%COMP%]   #privacy[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], #start-streaming-form[_ngcontent-%COMP%]   #video-categories[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;height:51px;background:#fff 0 0 no-repeat padding-box;box-shadow:0 0 6px #eee;border:none;font:normal normal normal 16px/20px Muli-Regular;color:#8c8888;outline:none}#start-streaming-form[_ngcontent-%COMP%]   #privacy[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]:disabled, #start-streaming-form[_ngcontent-%COMP%]   #video-categories[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]:disabled{color:silver}#start-streaming-form[_ngcontent-%COMP%]   #video-description[_ngcontent-%COMP%]{margin:24px 0}#start-streaming-form[_ngcontent-%COMP%]   #video-description[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;height:151px;background:#fff 0 0 no-repeat padding-box;box-shadow:0 0 6px #eee;opacity:1;border:none;outline:none;resize:none}#start-streaming-form[_ngcontent-%COMP%]   label[for=custom-thumbnail][_ngcontent-%COMP%]{margin:0;font-size:18px;padding:12px 16px;background:#eee 0 0 no-repeat padding-box;font:normal normal normal 18px/19px Muli-Regular;color:#8c8888;cursor:pointer}#start-streaming-form[_ngcontent-%COMP%]   label[for=custom-thumbnail][_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{vertical-align:text-bottom;margin-right:10px}#start-streaming-form[_ngcontent-%COMP%]   #thumbnail[_ngcontent-%COMP%]{display:flex;align-items:center}#start-streaming-form[_ngcontent-%COMP%]   #thumbnail[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin-left:20px}#start-streaming-form[_ngcontent-%COMP%]   #custom-thumbnail[_ngcontent-%COMP%]{display:none}#start-streaming-form[_ngcontent-%COMP%]   #uploaded-thumbnail-container[_ngcontent-%COMP%]{position:relative}#start-streaming-form[_ngcontent-%COMP%]   #uploaded-thumbnail-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{position:absolute;right:0}#start-streaming-form[_ngcontent-%COMP%]   #uploaded-thumbnail-container[_ngcontent-%COMP%]   #uploaded-thumbnail[_ngcontent-%COMP%]{max-width:100%;-o-object-fit:cover;object-fit:cover}#start-streaming-form[_ngcontent-%COMP%]   #uploaded-thumbnail-container[_ngcontent-%COMP%]   #remove-thumbnail[_ngcontent-%COMP%]{color:#545454;cursor:pointer}#start-streaming-form[_ngcontent-%COMP%]   #video-tags[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}#start-streaming-form[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{margin-bottom:8px}#start-streaming-form[_ngcontent-%COMP%]   .item.d-flex[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-right:40px}#start-streaming-form[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;justify-content:space-between;color:#18b587;font-size:14px;margin-bottom:2px}#start-streaming-form[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .edit[_ngcontent-%COMP%]{font-size:16px;color:#545454;cursor:pointer}#start-streaming-form[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .edit[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:20px;margin-left:4px}#start-streaming-form[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;align-items:center}#start-streaming-form[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info.border[_ngcontent-%COMP%]{border:0!important}#start-streaming-form[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info.border[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:not(.material-icons){border-bottom:.5px solid #dcdcdc}#start-streaming-form[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:not(.material-icons){flex:1}#start-streaming-form[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{margin-right:8px}#start-streaming-form[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{color:#545454;font-weight:600;font-size:16px}#start-streaming-form[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:20px}#start-streaming-form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-top:32px;border:0;border-radius:0;padding:16px 32px;background:#f53c6f;box-shadow:0 0 6px rgba(0,109,204,.18)}"]}),ft);function mt(e,t){if(1&e){var n=d.Xb();d.Wb(0,"app-check-requirements",2),d.ec("checked",(function(){return d.Bc(n),d.ic().requirementsChecked=!0})),d.Vb()}}function vt(e,t){if(1&e){var n=d.Xb();d.Wb(0,"app-stream-details-form",3),d.ec("formReady",(function(e){return d.Bc(n),d.ic().getPublisherData(e)})),d.Vb()}}var bt,_t=((bt=function(){function e(t,n){_classCallCheck(this,e),this.subject=t,this.router=n,this.sessionData={sessionName:"",myUserName:""},this.requirementsChecked=!1}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"getPublisherData",value:function(e){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.sessionData={sessionName:e.sessionName,myUserName:e.myUserName},this.videoSettings=e,this.subject.setSessionData(this.sessionData),localStorage.setItem("session",JSON.stringify(this.sessionData)),localStorage.setItem("video_settings",JSON.stringify(this.videoSettings)),t.next=7,this.router.navigate(["users/video/publish"]);case 7:case"end":return t.stop()}}),t,this)})))}}]),e}()).\u0275fac=function(e){return new(e||bt)(d.Qb(B.a),d.Qb(o.e))},bt.\u0275cmp=d.Kb({type:bt,selectors:[["app-publisher-flow"]],decls:2,vars:2,consts:[[3,"checked",4,"ngIf"],[3,"formReady",4,"ngIf"],[3,"checked"],[3,"formReady"]],template:function(e,t){1&e&&(d.Ic(0,mt,1,0,"app-check-requirements",0),d.Ic(1,vt,1,0,"app-stream-details-form",1)),2&e&&(d.pc("ngIf",!t.requirementsChecked),d.Cb(1),d.pc("ngIf",t.requirementsChecked))},directives:[i.m,qe,gt],styles:[""]}),bt),yt=["videoElement"];function Ct(e,t){1&e&&(d.Wb(0,"div",3),d.Wb(1,"h2"),d.Kc(2,"Live video ended"),d.Vb(),d.Vb())}var Ot,St,kt=((St=function(){function e(t){_classCallCheck(this,e),this.subject=t,this.videoJSPlayerOptions={width:640,height:480,autoplay:!0,controls:!0,fluid:!1,sources:[]}}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.subject.getVideoRecordingState().subscribe((function(t){if(console.log("STATE!!!!"+t.recordingState),e.recordingState=t.recordingState,"finished"===e.recordingState){var n=document.getElementById("live-video");console.log(n)}}))}},{key:"ngAfterViewInit",value:function(){this._streamManager.addVideoElement(this.elementRef.nativeElement);var e=document.getElementById("live-video");console.log(e),e.setAttribute("controls","controls"),e.controls=!0}},{key:"streamManager",set:function(e){this._streamManager=e,this.elementRef&&this._streamManager.addVideoElement(this.elementRef.nativeElement)}}]),e}()).\u0275fac=function(e){return new(e||St)(d.Qb(B.a))},St.\u0275cmp=d.Kb({type:St,selectors:[["app-ov-video"]],viewQuery:function(e,t){var n;1&e&&d.Pc(yt,!0),2&e&&d.wc(n=d.fc())&&(t.elementRef=n.first)},inputs:{streamManager:"streamManager"},decls:3,vars:1,consts:[["controls","","muted","","id","live-video","width","640","height","480"],["videoElement",""],["id","live-session-finished",4,"ngIf"],["id","live-session-finished"]],template:function(e,t){1&e&&(d.Rb(0,"video",0,1),d.Ic(2,Ct,3,0,"div",2)),2&e&&(d.Cb(2),d.pc("ngIf","finished"===t.recordingState))},directives:[i.m],styles:["#live-session-finished[_ngcontent-%COMP%]{position:absolute;top:-3px;left:15px;width:640px;height:100%;color:#fff;-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px);display:flex;align-items:center;justify-content:center}"]}),St),xt=((Ot=function(){function e(t){_classCallCheck(this,e),this.toastr=t}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"getNicknameTag",value:function(){return JSON.parse(this.streamManager.stream.connection.data.replace(/}%\/%{/g,",")).clientData.myUserName}}]),e}()).\u0275fac=function(e){return new(e||Ot)(d.Qb(m.b))},Ot.\u0275cmp=d.Kb({type:Ot,selectors:[["app-user-video"]],inputs:{streamManager:"streamManager"},decls:5,vars:2,consts:[[3,"streamManager"]],template:function(e,t){1&e&&(d.Wb(0,"div"),d.Rb(1,"app-ov-video",0),d.Wb(2,"div"),d.Wb(3,"p"),d.Kc(4),d.Vb(),d.Vb(),d.Vb()),2&e&&(d.Cb(1),d.pc("streamManager",t.streamManager),d.Cb(3),d.Lc(t.getNicknameTag()))},directives:[kt],styles:["ov-video[_ngcontent-%COMP%]{width:100%;height:auto;float:left;cursor:pointer}div[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;background:#f8f8f8;padding-left:5px;padding-right:5px;color:#777;font-weight:700;border-bottom-right-radius:4px}p[_ngcontent-%COMP%]{margin:0}"]}),Ot);function Mt(e,t){1&e&&d.Rb(0,"mat-spinner",4),2&e&&d.pc("diameter",100)}function wt(e,t){if(1&e){var n=d.Xb();d.Wb(0,"div",7),d.Wb(1,"div",8),d.Wb(2,"app-user-video",9),d.ec("click",(function(){d.Bc(n);var e=t.$implicit;return d.ic(3).updateMainStreamManager(e)})),d.Vb(),d.Vb(),d.Vb()}if(2&e){var i=t.$implicit;d.Cb(2),d.pc("streamManager",i)}}function Et(e,t){if(1&e){var n=d.Xb();d.Wb(0,"app-chat-box",10),d.ec("sendMessage",(function(e){return d.Bc(n),d.ic(3).sendMessage(e)})),d.Vb()}if(2&e){var i=d.ic(3);d.pc("openViduToken",i.openViduToken)("session",i.session)("videoRecordingState",i.recordingState)("videoId",i.videoId)}}function Pt(e,t){if(1&e&&(d.Ub(0),d.Ic(1,wt,3,1,"div",5),d.Ic(2,Et,1,4,"app-chat-box",6),d.Tb()),2&e){var n=d.ic(2);d.Cb(1),d.pc("ngForOf",n.subscribers),d.Cb(1),d.pc("ngIf",n.videoId)}}function It(e,t){if(1&e&&(d.Wb(0,"div",2),d.Ic(1,Mt,1,1,"mat-spinner",3),d.Ic(2,Pt,3,2,"ng-container",1),d.Vb()),2&e){var n=d.ic();d.Cb(1),d.pc("ngIf",n.loader.dataLoading),d.Cb(1),d.pc("ngIf",n.streamCreated)}}function Rt(e,t){1&e&&(d.Wb(0,"p"),d.Kc(1,"Video streaming session is not found."),d.Vb())}function Tt(e,t){if(1&e&&(d.Wb(0,"li"),d.Kc(1),d.Vb()),2&e){var n=t.$implicit;d.Cb(1),d.Lc(n)}}function At(e,t){1&e&&(d.Wb(0,"p"),d.Kc(1,"Stream destroyed."),d.Vb())}function Dt(e,t){if(1&e&&(d.Ub(0),d.Rb(1,"i",11),d.Kc(2),d.Wb(3,"ul"),d.Ic(4,Tt,2,1,"li",12),d.Vb(),d.Ic(5,At,2,0,"p",1),d.Tb()),2&e){var n=d.ic();d.Cb(2),d.Mc("",n.participants.length," "),d.Cb(2),d.pc("ngForOf",n.participants),d.Cb(1),d.pc("ngIf",n.streamDestroyed)}}function Lt(e,t){1&e&&(d.Ub(0),d.Wb(1,"p"),d.Kc(2,"The session does not exist."),d.Vb(),d.Tb())}function jt(e,t){1&e&&(d.Ub(0),d.Wb(1,"p"),d.Kc(2,"There was a problem creating the video stream."),d.Vb(),d.Tb())}var Nt,Vt,Ut,Bt,Wt=((Ut=function(){function e(t,n,i,o,r,s,a,c,l){_classCallCheck(this,e),this.getAuthUser=t,this.route=n,this.openViduService=i,this.videoService=o,this.chatService=r,this.subject=s,this.loader=a,this.toastr=c,this.elRef=l,this.recordingState="started",this.sessionData={sessionName:"",myUserName:""},this.streamDestroyed=!1,this.participants=[],this.subscribers=[],this.tags=[]}return _createClass(e,[{key:"ngOnInit",value:function(){this.authUser=this.getAuthUser.transform(),this.getSessionData(),this.getRecordingState(),this.joinSession()}},{key:"beforeunloadHandler",value:function(){this.leaveSession()}},{key:"getRecordingState",value:function(){var e=this;this.subject.getVideoRecordingState().subscribe((function(t){"finished"===t.recordingState&&e.leaveSession()}))}},{key:"getSessionData",value:function(){var e=this,t=this.route.snapshot.queryParams;t&&t.hasOwnProperty("session")&&(this.sessionData.sessionName=t.session,this.sessionData.myUserName=this.authUser.username,this.recordingState="started",this.videoId=t.id,this.videoService.getVideoById({id:this.videoId}).subscribe((function(t){e.videoFound="live"===(null==t?void 0:t.status)})))}},{key:"joinSession",value:function(){var e=this;this.OV=new j.OpenVidu,this.session=this.OV.initSession(),this.loader.dataLoading=!0,this.getStreamEvents(),this.openViduService.getToken({email:this.authUser.email,sessionName:this.sessionData.sessionName,role:"SUBSCRIBER"}).subscribe((function(t){e.openViduToken=t,e.receiveMessage(),e.recordingState="started",e.receiveRecordingState(),e.session.connect(t,{clientData:e.sessionData,avatar:e.authUser.avatar}).then((function(){e.loader.dataLoading=!1})).catch((function(t){e.toastr.error("There was a problem white loading streaming session")}))}))}},{key:"getStreamEvents",value:function(){var e=this;this.session.on("streamCreated",(function(t){e.streamCreated=!0,e.elRef.nativeElement.querySelector("video");var n=e.session.subscribe(t.stream,void 0);e.subscribers.push(n)})),this.session.on("connectionCreated",(function(t){var n=JSON.parse(t.connection.data.replace(/}%\/%{/g,","));e.participants.push(n.clientData.myUserName)})),this.session.on("connectionDestroyed",(function(t){var n=JSON.parse(t.connection.data.replace(/}%\/%{/g,","));e.participants=e.participants.filter((function(e){return e!==n.clientData.myUserName}))})),this.session.on("streamDestroyed",(function(t){e.streamDestroyed=!0,e.openViduToken=null,e.leaveSession()}))}},{key:"receiveRecordingState",value:function(){var e=this;this.session.on("signal:recording-state",(function(t){Object.assign({event:t},{socket:!0}),e.recordingState=t.data?"started":"finished","finished"===e.recordingState&&(e.tags=[]),e.subject.setVideoRecordingState(Object.assign({recordingState:e.recordingState},{viaSocket:!0}))}))}},{key:"receiveMessage",value:function(){var e=this;this.session.on("signal:my-chat",(function(t){e.subject.setMsgData({message:t.data,from:t.from.data})}))}},{key:"sendMessage",value:function(e){var t=this;this.session.signal({data:e.message,to:[],type:"my-chat"}).then((function(){t.chatService.saveVideoMessage(Object.assign({video_id:t.videoId},e)).subscribe((function(e){}))})).catch((function(e){console.error(e)}))}},{key:"updateMainStreamManager",value:function(e){this.mainStreamManager=e}},{key:"leaveSession",value:function(){this.session&&this.session.disconnect(),this.sessionData&&this.openViduService.leaveSession({token:this.openViduToken,sessionName:this.sessionData.sessionName,role:"subscriber"}).subscribe((function(){}))}},{key:"ngOnDestroy",value:function(){this.leaveSession()}}]),e}()).\u0275fac=function(e){return new(e||Ut)(d.Qb(g.a),d.Qb(o.a),d.Qb(U),d.Qb(W.a),d.Qb(F.a),d.Qb(B.a),d.Qb(p.a),d.Qb(m.b),d.Qb(d.l))},Ut.\u0275cmp=d.Kb({type:Ut,selectors:[["app-join-video-streaming"]],viewQuery:function(e,t){var n;1&e&&d.Pc(de,!0),2&e&&d.wc(n=d.fc())&&(t.chatBox=n.first)},hostBindings:function(e,t){1&e&&d.ec("beforeunload",(function(){return t.beforeunloadHandler()}),!1,d.Ac)},decls:5,vars:5,consts:[["id","video-chat-container",4,"ngIf"],[4,"ngIf"],["id","video-chat-container"],["class","session-loader",3,"diameter",4,"ngIf"],[1,"session-loader",3,"diameter"],["class","stream-container col-md-6 col-xs-6",4,"ngFor","ngForOf"],[3,"openViduToken","session","videoRecordingState","videoId","sendMessage",4,"ngIf"],[1,"stream-container","col-md-6","col-xs-6"],[1,"video-container"],[3,"streamManager","click"],[3,"openViduToken","session","videoRecordingState","videoId","sendMessage"],[1,"fa","fa-users"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(d.Ic(0,It,3,2,"div",0),d.Ic(1,Rt,2,0,"p",1),d.Ic(2,Dt,6,3,"ng-container",1),d.Ic(3,Lt,3,0,"ng-container",1),d.Ic(4,jt,3,0,"ng-container",1)),2&e&&(d.pc("ngIf",t.openViduToken&&t.videoFound),d.Cb(1),d.pc("ngIf",!t.videoFound&&!t.loader.dataLoading),d.Cb(1),d.pc("ngIf",t.streamCreated&&t.openViduToken&&t.videoFound),d.Cb(1),d.pc("ngIf",!t.openViduToken&&!t.loader.dataLoading&&t.videoFound),d.Cb(1),d.pc("ngIf",!t.streamCreated&&!t.loader.dataLoading&&t.videoFound))},directives:[i.m,b.b,i.l,xt,de],styles:["#video-chat-container[_ngcontent-%COMP%]{display:flex}"]}),Ut),Ft=((Vt=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||Vt)},Vt.\u0275cmp=d.Kb({type:Vt,selectors:[["app-subscriber-flow"]],decls:1,vars:0,template:function(e,t){1&e&&d.Rb(0,"app-join-video-streaming")},directives:[Wt],styles:[""]}),Vt),zt=((Nt=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"canDeactivate",value:function(e,t,n,i){return"started"!==e.recordingState||(e.alertOfLeaving(),!1)}}]),e}()).\u0275fac=function(e){return new(e||Nt)},Nt.\u0275prov=d.Mb({token:Nt,factory:Nt.\u0275fac,providedIn:"root"}),Nt),qt=n("MeVE"),Gt=((Bt=function(){function e(t){_classCallCheck(this,e),this.userStore=t}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.userStore.authUser$.subscribe((function(t){e.authUser=t}))}}]),e}()).\u0275fac=function(e){return new(e||Bt)(d.Qb(v.a))},Bt.\u0275cmp=d.Kb({type:Bt,selectors:[["app-show-notifications"]],decls:2,vars:4,consts:[[3,"notificationsCategory","authUser"]],template:function(e,t){1&e&&(d.Rb(0,"app-notifications-list",0),d.Rb(1,"app-notifications-list",0)),2&e&&(d.pc("notificationsCategory","new")("authUser",t.authUser),d.Cb(1),d.pc("notificationsCategory","early")("authUser",t.authUser))},directives:[qt.a],styles:[""]}),Bt),Kt=n("iing"),Qt=n("yUsM"),Yt=n("WHgu"),Ht=n("STbY");function Jt(e,t){if(1&e){var n=d.Xb();d.Wb(0,"a",32),d.ec("click",(function(){return d.Bc(n),d.ic(3).connectWithUser()})),d.Wb(1,"mat-icon"),d.Kc(2,"person_add"),d.Vb(),d.Wb(3,"span"),d.Kc(4,"Connect"),d.Vb(),d.Vb()}}function Zt(e,t){if(1&e&&(d.Wb(0,"a",33),d.Wb(1,"mat-icon"),d.Kc(2,"check"),d.Vb(),d.Wb(3,"span"),d.Kc(4,"Waiting for confirmation"),d.Vb(),d.Vb()),2&e){d.ic();var n=d.xc(4);d.pc("matMenuTriggerFor",n)}}function Xt(e,t){if(1&e&&(d.Wb(0,"button",34),d.Wb(1,"mat-icon"),d.Kc(2,"check"),d.Vb(),d.Wb(3,"span"),d.Kc(4,"Connected"),d.Vb(),d.Vb()),2&e){d.ic();var n=d.xc(12);d.pc("matMenuTriggerFor",n)}}function $t(e,t){if(1&e){var n=d.Xb();d.Wb(0,"a",35),d.ec("click",(function(){return d.Bc(n),d.ic(3).toggleBottomChatBox()})),d.Wb(1,"mat-icon"),d.Kc(2,"chat"),d.Vb(),d.Wb(3,"span"),d.Kc(4,"Message"),d.Vb(),d.Vb()}}function en(e,t){if(1&e){var n=d.Xb();d.Ub(0),d.Ic(1,Jt,5,0,"a",25),d.Ic(2,Zt,5,1,"a",26),d.Wb(3,"mat-menu",null,27),d.Wb(5,"button",28),d.ec("click",(function(){d.Bc(n);var e=d.ic(2);return e.cancelUsersConnecting(e.usersConnection)})),d.Wb(6,"mat-icon"),d.Kc(7,"close"),d.Vb(),d.Wb(8,"span"),d.Kc(9,"Cancel"),d.Vb(),d.Vb(),d.Vb(),d.Ic(10,Xt,5,1,"button",29),d.Wb(11,"mat-menu",null,30),d.Wb(13,"button",28),d.ec("click",(function(){return d.Bc(n),d.ic(2).disconnectUser()})),d.Wb(14,"mat-icon"),d.Kc(15,"close"),d.Vb(),d.Wb(16,"span"),d.Kc(17,"Disconnect"),d.Vb(),d.Vb(),d.Vb(),d.Ic(18,$t,5,0,"a",31),d.Tb()}if(2&e){var i=d.ic(2);d.Cb(1),d.pc("ngIf","idle"===i.usersConnectionStatus),d.Cb(1),d.pc("ngIf","pending"===i.usersConnectionStatus),d.Cb(8),d.pc("ngIf","connected"===i.usersConnectionStatus),d.Cb(8),d.pc("ngIf",i.isMessageBtnShown())}}function tn(e,t){if(1&e&&(d.Wb(0,"button",36),d.Wb(1,"mat-icon"),d.Kc(2,"edit"),d.Vb(),d.Kc(3," Edit profile "),d.Vb()),2&e){var n=d.ic(2);d.pc("routerLink","/users/"+n.authUser.username+"/edit")}}function nn(e,t){if(1&e&&(d.Wb(0,"li",37),d.Wb(1,"a",38),d.Kc(2),d.Vb(),d.Vb()),2&e){var n=t.$implicit,i=d.ic(2);d.pc("hidden",!i.ownProfile&&n.ownPageOnly),d.Cb(1),d.pc("routerLink","/users/"+i.profileUser.username+"/tab/"+n.link),d.Cb(1),d.Lc(n.name)}}function on(e,t){if(1&e){var n=d.Xb();d.Wb(0,"div",39),d.Wb(1,"router-outlet",40),d.ec("activate",(function(e){return d.Bc(n),d.ic(2).onOutletLoaded(e)})),d.Vb(),d.Vb()}}function rn(e,t){if(1&e&&(d.Wb(0,"div",1),d.Wb(1,"div",2),d.Rb(2,"img",3),d.jc(3,"getImgPath"),d.Vb(),d.Wb(4,"div",4),d.Wb(5,"div",5),d.Wb(6,"div",6),d.Wb(7,"div",7),d.Wb(8,"div",8),d.Wb(9,"label",9),d.Rb(10,"img",10),d.jc(11,"getImgPath"),d.Vb(),d.Vb(),d.Wb(12,"div"),d.Wb(13,"strong",11),d.Kc(14),d.Vb(),d.Wb(15,"p",12),d.Kc(16),d.Vb(),d.Vb(),d.Vb(),d.Wb(17,"div",13),d.Ic(18,en,19,4,"ng-container",14),d.Ic(19,tn,4,1,"button",15),d.Vb(),d.Vb(),d.Rb(20,"div",6),d.Wb(21,"div",16),d.Rb(22,"input",17),d.Rb(23,"input",18),d.Vb(),d.Vb(),d.Rb(24,"div",19),d.Vb(),d.Wb(25,"div",4),d.Wb(26,"div",20),d.Wb(27,"ul",21),d.Ic(28,nn,3,3,"li",22),d.Vb(),d.Vb(),d.Rb(29,"div",23),d.Vb(),d.Ic(30,on,2,0,"div",24),d.Vb()),2&e){var n=d.ic();d.Cb(2),d.pc("src",d.lc(3,9,null==n.profileUser?null:n.profileUser.cover,"covers"),d.Dc),d.Cb(8),d.pc("src",d.lc(11,12,n.profileUser.avatar,"user_avatars"),d.Dc),d.Cb(4),d.Lc((null==n.profileUser?null:n.profileUser.first_name)+" "+(null==n.profileUser?null:n.profileUser.last_name)),d.Cb(2),d.Mc("",n.connectionsCount+" connection"+(1===n.connectionsCount?"":"s")," "),d.Cb(2),d.pc("ngIf",!n.ownProfile),d.Cb(1),d.pc("ngIf",n.ownProfile),d.Cb(2),d.pc("hidden",!0),d.Cb(7),d.pc("ngForOf",n.profileTabs),d.Cb(2),d.pc("ngIf",n.authUser&&n.connections.length>0&&n.profileUserStocks)}}var sn,an=((sn=function(){function e(t,n,i,o,r,s,a,c){_classCallCheck(this,e),this.userStore=t,this.usersConnectionsStore=n,this.groupsMessagesStore=i,this.usersService=o,this.socketService=r,this.stocksService=s,this.route=a,this.router=c,this.profileTabs=N.q,this.subscriptions=[],this.connectionsCount=0,this.connections=[],this.connectionRequests=[],this.ownProfile=!1,this.usersConnectionStatus="idle",this.attemptedToConnect=!1,this.isBlocked=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.passedUsername=this.route.snapshot.params.username,this.trackAuthUserChanges(),this.getUserInfo(),this.ownProfile&&this.trackUserConnections()}},{key:"trackAuthUserChanges",value:function(){var e=this;this.subscriptions.push(this.userStore.authUser$.subscribe((function(t){e.authUser=t})))}},{key:"getUserInfo",value:function(){var e=this;this.ownProfile=this.authUser.username===this.passedUsername,this.passedUsername&&this.subscriptions.push(this.usersService.getUserInfo({username:this.passedUsername,own_channel:this.ownProfile}).subscribe((function(t){t&&(e.profileUser=t,e.checkIfUsersConnected(),e.getAcceptedDeclinedRequests(),e.getConnectWithUser(),e.getDisconnectUsers(),e.cancelledUsersConnecting(),e.getBlockUnblockUser(),e.getConnectionsChanges(),e.ownProfile?e.profileUserStocks=[]:(e.getProfileUserStocks(),e.connectionsCount=e.profileUser.users_connections.filter((function(e){return e.confirmed})).length,console.log(e.profileUser)))})))}},{key:"trackUserConnections",value:function(){var e=this;this.subscriptions.push(this.usersConnectionsStore.usersMessages$.subscribe((function(t){e.connectionsCount=t.filter((function(e){return 1===e.users_connections[0].confirmed})).length,e.connections=t.filter((function(e){return 1===e.users_connections[0].confirmed})),e.connectionRequests=t.filter((function(e){return 0===e.users_connections[0].confirmed}))})))}},{key:"getConnectionsChanges",value:function(){var e=this;this.subscriptions.push(this.usersConnectionsStore.usersMessages$.subscribe((function(t){var n;e.usersConnection=null===(n=t.find((function(t){return t.id===e.profileUser.id})))||void 0===n?void 0:n.users_connections[0]})))}},{key:"getAcceptedDeclinedRequests",value:function(){var e=this;this.subscriptions.push(this.socketService.acceptedConnection().subscribe((function(t){var n=t.notification,i=t.profile_user_contacts;(n.to_user.id===e.authUser.id&&n.from_user.id===e.profileUser.id||n.to_user.id===e.profileUser.id&&n.from_user.id===e.authUser.id)&&(e.usersConnectionStatus="connected",e.isBlocked=!1),n.from_user.id!==e.authUser.id&&(e.connectionsCount=i.length)}))),this.subscriptions.push(this.socketService.declinedConnection().subscribe((function(){console.log("declined"),e.usersConnectionStatus="idle"})))}},{key:"checkIfUsersConnected",value:function(){var e=this;this.usersService.checkIfUsersConnected({user_id:this.authUser.id,channel_user_id:this.profileUser.id}).subscribe((function(t){e.usersConnection=t,t&&(e.connections=t.connection_users.filter((function(t){return t.id!==e.authUser.id})),e.usersConnectionStatus=t.confirmed?"connected":"pending",e.isBlocked=!!t.is_blocked)}))}},{key:"connectWithUser",value:function(){this.attemptedToConnect=!0,this.usersConnectionStatus="pending",this.socketService.connectWithUser({from_user:this.authUser,to_user:this.profileUser,msg:"<strong>".concat(this.authUser.first_name+" "+this.authUser.last_name,"</strong>\n                has sent a connection request to you")})}},{key:"getConnectWithUser",value:function(){var e=this;this.socketService.getConnectWithUser().subscribe((function(t){e.usersConnection=t.connection}))}},{key:"cancelUsersConnecting",value:function(e){console.log(e),this.socketService.cancelUsersConnecting({authUser:this.authUser,channelUser:this.profileUser,connection_id:e.id})}},{key:"cancelledUsersConnecting",value:function(){var e=this;this.socketService.cancelledUsersConnecting().subscribe((function(t){console.log(t,"cancelled"),e.usersConnectionStatus="idle"}))}},{key:"disconnectUser",value:function(){console.log(this.usersConnection),this.socketService.disconnectUsers({to_user:this.profileUser,from_user:this.authUser,connection_id:this.usersConnection.id,msg:"<strong>".concat(this.authUser.first_name," ").concat(this.authUser.last_name,"</strong> has broken the connection between you two")}),this.usersConnectionStatus="idle"}},{key:"getDisconnectUsers",value:function(){var e=this;this.subscriptions.push(this.socketService.getDisconnectUsers().subscribe((function(t){var n=t.to_user,i=t.profile_user_contacts;console.log(n.users_connections),e.connectionsCount=i.length,e.usersConnectionStatus="idle"})))}},{key:"getBlockUnblockUser",value:function(){var e=this;this.subscriptions.push(this.socketService.getBlockUnblockUser().subscribe((function(t){console.log("get block/unblock",t),e.isBlocked=!0})))}},{key:"isMessageBtnShown",value:function(){return/connected|test/.test(this.usersConnectionStatus)&&!this.isBlocked}},{key:"toggleBottomChatBox",value:function(){var e=this,t=this.usersConnectionsStore.usersMessages.find((function(t){return t.id===e.profileUser.id}));t&&(this.usersConnectionsStore.showBottomChatBox=!0,this.groupsMessagesStore.showBottomChatBox=!1,this.usersConnectionsStore.changeUser(t))}},{key:"getProfileUserStocks",value:function(){var e=this;this.stocksService.getUserStocks({user_id:this.profileUser.id}).subscribe((function(t){e.profileUserStocks=null==t?void 0:t.user_stocks}))}},{key:"onOutletLoaded",value:function(e){this.connections&&(console.log("STOCKS:",this.profileUserStocks),e.connections=this.connections,e.connectionRequests=this.connectionRequests,e.authUser=this.authUser,e.profileUser=this.profileUser,this.profileUserStocks&&(e.profileUserStocks=this.profileUserStocks))}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach((function(e){return e.unsubscribe()}))}}]),e}()).\u0275fac=function(e){return new(e||sn)(d.Qb(v.a),d.Qb(Kt.a),d.Qb(Qt.a),d.Qb(f.a),d.Qb(Yt.a),d.Qb(z.a),d.Qb(o.a),d.Qb(o.e))},sn.\u0275cmp=d.Kb({type:sn,selectors:[["app-show-profile"]],decls:1,vars:1,consts:[["id","profile-wrap",4,"ngIf"],["id","profile-wrap"],["id","profile-cover-image"],[3,"src"],[1,"row"],["id","user-details"],[1,"details-row"],["id","details-block"],[1,"avatar-container"],["for","profile-image-input"],["id","profile-image",1,"avatar",3,"src"],["id","user-full-name"],[1,"connections-count"],["id","profile-actions-block"],[4,"ngIf"],["type","button","id","edit-profile",3,"routerLink",4,"ngIf"],[3,"hidden"],["type","file","id","profile-image-input"],["type","hidden"],["id","group-actions"],["id","group-tabs"],[1,"nav-tabs"],["class","nav-item",3,"hidden",4,"ngFor","ngForOf"],["id","search-in-current-tab"],["class","tab-content",4,"ngIf"],["class","add-friend-btn",3,"click",4,"ngIf"],["class","waiting-for-confirmation-btn",3,"matMenuTriggerFor",4,"ngIf"],["pendingMenu","matMenu"],["mat-menu-item","",3,"click"],["class","users-connected-btn",3,"matMenuTriggerFor",4,"ngIf"],["menu","matMenu"],["class","toggle-chat-box-btn",3,"click",4,"ngIf"],[1,"add-friend-btn",3,"click"],[1,"waiting-for-confirmation-btn",3,"matMenuTriggerFor"],[1,"users-connected-btn",3,"matMenuTriggerFor"],[1,"toggle-chat-box-btn",3,"click"],["type","button","id","edit-profile",3,"routerLink"],[1,"nav-item",3,"hidden"],["routerLinkActive","active",1,"nav-link",3,"routerLink"],[1,"tab-content"],[3,"activate"]],template:function(e,t){1&e&&d.Ic(0,rn,31,15,"div",0),2&e&&d.pc("ngIf",t.profileUser)},directives:[i.m,i.l,Ht.d,Ht.a,Ie.a,Ht.c,o.f,o.h,o.g,o.j],pipes:[_.a],styles:["#group-tabs[_ngcontent-%COMP%], .stocks-watchlist[_ngcontent-%COMP%]{margin-top:40px}.nav-tabs[_ngcontent-%COMP%]{border-bottom:0;display:flex;flex-wrap:wrap;padding-left:0;list-style:none}.nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{color:#fff!important;width:156px;font-size:12px;box-shadow:0 0 6px rgba(0,0,0,.06);font-family:Muli-Bold;margin-bottom:25px}.nav-link[_ngcontent-%COMP%]{padding:5px;height:31px;background:#fff;color:#545454!important;display:flex;justify-content:center;align-items:center}.nav-link[_ngcontent-%COMP%]:hover{border:0}.nav-link.active[_ngcontent-%COMP%]{background:#f53c6f!important;color:#fff!important}.dropdown[_ngcontent-%COMP%]{cursor:pointer}.dropdown[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{width:100%;padding:0 12px;color:#777;font-size:14px}.dropdown[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]{color:#777;font-size:14px;font-family:Muli-Light}.watchlist-search[_ngcontent-%COMP%]{display:flex;position:relative;width:100%;height:31px;background:#fff 0 0 no-repeat padding-box;margin-right:3px}.watchlist-search.bordered[_ngcontent-%COMP%]{box-shadow:0 0 6px rgba(0,0,0,.06)}.watchlist-search[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;color:#6a6a6a;right:11px;top:10px}.watchlist-search[_ngcontent-%COMP%]   .watchlist-input[_ngcontent-%COMP%]{font-family:Muli-Light;background:#fff;color:#545454;font-size:16px;padding-left:10px}#profile-cover-image[_ngcontent-%COMP%]{margin-bottom:20px}#profile-cover-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:300px;width:100%;-o-object-fit:cover;object-fit:cover}#details-block[_ngcontent-%COMP%], #profile-actions-block[_ngcontent-%COMP%]{display:flex;align-items:center}#user-full-name[_ngcontent-%COMP%]{display:block}.connections-count[_ngcontent-%COMP%]{margin-top:4px;color:#545454;font-size:14px;font-family:Muli-Light,sans-serif}.details-row[_ngcontent-%COMP%]{justify-content:space-between}#edit-profile[_ngcontent-%COMP%], .details-row[_ngcontent-%COMP%]{display:flex;align-items:center}#edit-profile[_ngcontent-%COMP%]{width:119px;height:36px;padding:15px 32px;color:#fff!important;font-size:16px;font-family:Muli-Light;justify-content:center;transition:.3s ease-in-out;background:#18b587;width:170px}#user-details[_ngcontent-%COMP%]{width:98%;margin:auto}.users-connected-btn[_ngcontent-%COMP%]{margin-left:16px;margin-right:16px}.toggle-chat-box-btn[_ngcontent-%COMP%], .users-connected-btn[_ngcontent-%COMP%]{width:119px;height:36px;padding:15px 32px;color:#fff!important;font-size:16px;font-family:Muli-Light;display:flex;justify-content:center;align-items:center;transition:.3s ease-in-out;background:#18b587}.add-friend-btn[_ngcontent-%COMP%]{width:119px;background:#18b587;background-color:#f53c6f}.add-friend-btn[_ngcontent-%COMP%], .waiting-for-confirmation-btn[_ngcontent-%COMP%]{height:36px;color:#fff!important;font-size:16px;font-family:Muli-Light;display:flex;justify-content:center;align-items:center;transition:.3s ease-in-out;padding:0;margin-right:16px}.waiting-for-confirmation-btn[_ngcontent-%COMP%]{width:119px;background:#18b587;width:210px;background-color:#b3b3b3}"]}),sn);function cn(e,t){if(1&e&&(d.Ub(0),d.Wb(1,"div",2),d.Wb(2,"div",3),d.Wb(3,"div",4),d.Rb(4,"img",5),d.jc(5,"getImgPath"),d.Vb(),d.Wb(6,"div",6),d.Wb(7,"div",7),d.Kc(8),d.Vb(),d.Vb(),d.Vb(),d.Wb(9,"div",8),d.Wb(10,"button",9),d.Rb(11,"i",10),d.Vb(),d.Wb(12,"mat-menu",null,11),d.Wb(14,"button",12),d.Rb(15,"img",13),d.Kc(16," Disconnection "),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Tb()),2&e){var n=t.$implicit,i=d.xc(13);d.Cb(4),d.pc("src",d.lc(5,4,n.avatar,"user_avatars"),d.Dc),d.Cb(4),d.Lc(n.first_name+" "+n.last_name),d.Cb(2),d.pc("matMenuTriggerFor",i),d.Cb(4),d.pc("disableRipple",!0)}}var ln,un=((ln=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||ln)},ln.\u0275cmp=d.Kb({type:ln,selectors:[["app-connections-tab"]],inputs:{authUser:"authUser",connections:"connections"},decls:2,vars:1,consts:[[1,"connections-container"],[4,"ngFor","ngForOf"],[1,"connection"],[1,"left"],[1,"img","user-avatar"],[1,"avatar",3,"src"],[1,"text"],[1,"name"],[1,"right"],[1,"show-actions",3,"matMenuTriggerFor"],[1,"fas","fa-ellipsis-h"],["menu","matMenu"],["mat-menu-item","",3,"disableRipple"],["src","../../../../assets/img/iconDis.png","alt","",1,"iconDis"]],template:function(e,t){1&e&&(d.Wb(0,"div",0),d.Ic(1,cn,17,7,"ng-container",1),d.Vb()),2&e&&(d.Cb(1),d.pc("ngForOf",t.connections))},directives:[i.l,Ht.c,Ht.d,Ht.a],pipes:[_.a],styles:[".connections-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:41px;width:100%;max-width:1122px}@media only screen and (max-width:768px){.connections-container[_ngcontent-%COMP%]{display:block;margin-top:60px}}.connections-container[_ngcontent-%COMP%]   .subTabsContainer[_ngcontent-%COMP%]{display:flex;width:100%;max-width:1122px}.connections-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;background:#fff 0 0 no-repeat padding-box;border:1px solid #d8d8d8;opacity:1;padding:23px 21px;max-width:493px;width:100%;margin-bottom:15px;margin-right:15px}@media only screen and (max-width:1440px){.connections-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]{margin-top:15px}}@media only screen and (max-width:1024px){.connections-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]{padding:11px 10px}}.connections-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{display:flex}.connections-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]{position:relative;margin:auto}.connections-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:60px!important;height:60px;margin-right:21px}@media only screen and (max-width:500px){.connections-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:40px!important;height:40px!important}}@media only screen and (max-width:320px){.connections-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{margin-right:11px!important;width:35px!important;height:35px!important}}.connections-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{display:flex;align-items:center;font-family:Muli-Regular;letter-spacing:0;color:#5b5b5b;opacity:1}@media only screen and (max-width:320px){.connections-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:15px!important}}.connections-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(.connection-actions   button)[_ngcontent-%COMP%]{background:transparent;width:28px;height:6px;opacity:1}.connections-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .connection-actions[_ngcontent-%COMP%]{display:flex;width:200px;justify-content:space-around;margin-left:50px}@media only screen and (max-width:500px){.connections-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .connection-actions[_ngcontent-%COMP%]{margin-left:20px;width:80%}}.connections-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .connection-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:119px;height:36px;padding:15px 32px;color:#fff!important;font-size:16px;font-family:Muli-Light;display:flex;justify-content:center;align-items:center;transition:.3s ease-in-out;background:#18b587;font-size:14px}.iconDis[_ngcontent-%COMP%]{width:18px!important;height:18px!important}"]}),ln);function dn(e,t){if(1&e){var n=d.Xb();d.Ub(0),d.Wb(1,"div",2),d.Wb(2,"div",3),d.Wb(3,"div",4),d.Rb(4,"img",5),d.jc(5,"getImgPath"),d.Vb(),d.Wb(6,"div",6),d.Wb(7,"div",7),d.Kc(8),d.Vb(),d.Vb(),d.Vb(),d.Wb(9,"div",8),d.Wb(10,"div",9),d.Wb(11,"button",10),d.ec("click",(function(){d.Bc(n);var e=t.$implicit;return d.ic().confirmConnection(e)})),d.Wb(12,"span"),d.Kc(13,"Confirm"),d.Vb(),d.Vb(),d.Wb(14,"button",11),d.ec("click",(function(){d.Bc(n);var e=t.$implicit;return d.ic().declineConnection(e)})),d.Wb(15,"strong"),d.Kc(16,"Decline"),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Vb(),d.Tb()}if(2&e){var i=t.$implicit;d.Cb(4),d.pc("src",d.lc(5,2,i.avatar,"user_avatars"),d.Dc),d.Cb(4),d.Lc(i.first_name+" "+i.last_name)}}var pn,hn=((pn=function(){function e(){_classCallCheck(this,e),this.connectionRequests=[]}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"confirmConnection",value:function(e){}},{key:"declineConnection",value:function(e){}}]),e}()).\u0275fac=function(e){return new(e||pn)},pn.\u0275cmp=d.Kb({type:pn,selectors:[["app-connection-requests-tab"]],inputs:{authUser:"authUser",connectionRequests:"connectionRequests"},decls:2,vars:1,consts:[[1,"connection-requests-container"],[4,"ngFor","ngForOf"],[1,"connection"],[1,"left"],[1,"img","user-avatar"],[1,"avatar",3,"src"],[1,"text"],[1,"name"],[1,"right"],[1,"connection-actions"],[1,"confirm-connection-btn",3,"click"],[1,"decline-connection-btn",3,"click"]],template:function(e,t){1&e&&(d.Wb(0,"div",0),d.Ic(1,dn,17,5,"ng-container",1),d.Vb()),2&e&&(d.Cb(1),d.pc("ngForOf",t.connectionRequests))},directives:[i.l],pipes:[_.a],styles:[".connection-requests-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:41px;width:100%;max-width:1122px}@media only screen and (max-width:768px){.connection-requests-container[_ngcontent-%COMP%]{display:block;margin-top:60px}}.connection-requests-container[_ngcontent-%COMP%]   .subTabsContainer[_ngcontent-%COMP%]{display:flex;width:100%;max-width:1122px}.connection-requests-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;background:#fff 0 0 no-repeat padding-box;border:1px solid #d8d8d8;opacity:1;padding:23px 21px;max-width:493px;width:100%;margin-bottom:15px;margin-right:15px}@media only screen and (max-width:1440px){.connection-requests-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]{margin-top:15px}}@media only screen and (max-width:1024px){.connection-requests-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]{padding:11px 10px}}.connection-requests-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{display:flex}.connection-requests-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]{position:relative;margin:auto}.connection-requests-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:60px!important;height:60px;margin-right:21px}@media only screen and (max-width:500px){.connection-requests-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:40px!important;height:40px!important}}@media only screen and (max-width:320px){.connection-requests-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{margin-right:11px!important;width:35px!important;height:35px!important}}.connection-requests-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{display:flex;align-items:center;font-family:Muli-Regular;letter-spacing:0;color:#5b5b5b;opacity:1}@media only screen and (max-width:320px){.connection-requests-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:15px!important}}.connection-requests-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(.connection-actions   button)[_ngcontent-%COMP%]{background:transparent;width:28px;height:6px;opacity:1}.connection-requests-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .connection-actions[_ngcontent-%COMP%]{display:flex;width:200px;justify-content:space-around;margin-left:50px}@media only screen and (max-width:500px){.connection-requests-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .connection-actions[_ngcontent-%COMP%]{margin-left:20px;width:80%}}.connection-requests-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .connection-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:119px;height:36px;padding:15px 32px;color:#fff!important;font-size:16px;font-family:Muli-Light;display:flex;justify-content:center;align-items:center;transition:.3s ease-in-out;background:#18b587;font-size:14px}.connection-requests-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .connection-actions[_ngcontent-%COMP%]   .confirm-connection-btn[_ngcontent-%COMP%]{background:#18b587 0 0 no-repeat padding-box;opacity:1;text-align:left;font:normal normal normal 13px/19px Muli-Regular;letter-spacing:0;color:#fff}@media only screen and (max-width:500px){.connection-requests-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .connection-actions[_ngcontent-%COMP%]   .confirm-connection-btn[_ngcontent-%COMP%]{padding:15px 25px!important;width:60px!important}}.connection-requests-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .connection-actions[_ngcontent-%COMP%]   .decline-connection-btn[_ngcontent-%COMP%]{background-color:transparent;text-align:left;font:normal normal normal 13px/19px Muli-Regular;letter-spacing:0;color:#5b5b5b!important;opacity:1}@media only screen and (max-width:500px){.connection-requests-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .connection-actions[_ngcontent-%COMP%]   .decline-connection-btn[_ngcontent-%COMP%]{padding:15px 25px!important;width:60px!important}}"]}),pn),fn=n("pLZG"),gn=n("RSRA"),mn=n("WKnA");function vn(e,t){1&e&&(d.Wb(0,"small",2),d.Kc(1," No stocks added to watchlist"),d.Vb())}function bn(e,t){if(1&e){var n=d.Xb();d.Wb(0,"app-stock-tiles",3),d.ec("updatedStocksList",(function(e){return d.Bc(n),d.ic().saveUpdatedStocksList(e)}))("updatedStocksPriority",(function(e){return d.Bc(n),d.ic().updateStocksPriority(e)})),d.Vb()}if(2&e){var i=d.ic();d.pc("stocks",i.filteredStocks)("userStocks",i.userStocks)("followingAllowed",!0)}}var _n,yn,Cn,On,Sn=[{path:"video",children:[{path:"check-streaming-requirements",component:_t,data:{title:"Streaming requirements check"}},{path:"start-live-video",component:_t,data:{title:"Devices and requirements check"}},{path:"publish",component:Ce,canDeactivate:[zt],data:{title:"Start live streaming"}},{path:"watch",component:Ft,data:{title:"Watch live stream"}},{path:"openvidu-test",component:we}]},{path:"notifications",component:Gt},{path:":username",children:[{path:"",component:an},{path:"edit",component:L,pathMatch:"full",data:{title:"User profile-form"}},{path:"tab",component:an,children:[{path:"watchlist",component:(yn=function(){function e(t,n){_classCallCheck(this,e),this.stocksStore=t,this.stocksService=n,this.subscriptions=[],this.userStocks=[],this.filteredStocks=[],this.stocksLoading=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.authUser.id===this.profileUser.id?this.trackUserStocks():this.getProfileUserStocks()}},{key:"trackUserStocks",value:function(){var e=this;this.stocksLoading=!0,this.subscriptions.push(this.stocksStore.userStocks$.pipe(Object(fn.a)((function(e){return!e.initial}))).subscribe((function(t){e.userStocks=t.stocks,e.filteredStocks=e.userStocks,e.stocksLoading=!1})))}},{key:"getProfileUserStocks",value:function(){console.log("OK",this.profileUserStocks),this.userStocks=this.profileUserStocks,this.filteredStocks=this.userStocks,this.stocksLoading=!1}},{key:"saveUpdatedStocksList",value:function(e){var t=this;this.subscriptions.push(this.stocksService.updateFollowedStocks(Object.assign({user_id:this.authUser.id},{stocks:e})).subscribe((function(e){t.userStocks=(null==e?void 0:e.user_stocks)||[],t.stocksStore.setUserStocks({stocks:t.userStocks,empty:0===t.userStocks.length})})))}},{key:"updateStocksPriority",value:function(e){var t={order_type:"custom",rows:JSON.stringify(e),user_id:this.authUser.id};this.stocksStore.setUserStocks({stocks:e,dragdrop:!0}),this.stocksService.updateUserStocksPriority(t).subscribe((function(e){localStorage.setItem("token",e.hasOwnProperty("token")?e.token:"")}))}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach((function(e){return e.unsubscribe()}))}}]),e}(),yn.\u0275fac=function(e){return new(e||yn)(d.Qb(gn.a),d.Qb(z.a))},yn.\u0275cmp=d.Kb({type:yn,selectors:[["app-watchlist-tab"]],inputs:{authUser:"authUser",profileUser:"profileUser",profileUserStocks:"profileUserStocks"},decls:2,vars:2,consts:[["class","error",4,"ngIf"],[3,"stocks","userStocks","followingAllowed","updatedStocksList","updatedStocksPriority",4,"ngIf"],[1,"error"],[3,"stocks","userStocks","followingAllowed","updatedStocksList","updatedStocksPriority"]],template:function(e,t){1&e&&(d.Ic(0,vn,2,0,"small",0),d.Ic(1,bn,1,3,"app-stock-tiles",1)),2&e&&(d.pc("ngIf",0===(null==t.userStocks?null:t.userStocks.length)),d.Cb(1),d.pc("ngIf",(null==t.userStocks?null:t.userStocks.length)>0))},directives:[i.m,mn.a],styles:[""]}),yn)},{path:"connections",component:un},{path:"requests",component:hn},{path:"cards",component:(_n=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}(),_n.\u0275fac=function(e){return new(e||_n)},_n.\u0275cmp=d.Kb({type:_n,selectors:[["app-cards-tab"]],decls:2,vars:0,template:function(e,t){1&e&&(d.Wb(0,"p"),d.Kc(1,"cards-tab works!"),d.Vb())},styles:[""]}),_n)}]}]}],kn=((Cn=function e(){_classCallCheck(this,e)}).\u0275mod=d.Ob({type:Cn}),Cn.\u0275inj=d.Nb({factory:function(e){return new(e||Cn)},imports:[[o.i.forChild(Sn)],o.i]}),Cn),xn=n("PCNd"),Mn=((On=function e(){_classCallCheck(this,e)}).\u0275mod=d.Ob({type:On}),On.\u0275inj=d.Nb({factory:function(e){return new(e||On)},imports:[[i.c,kn,Oe.OpenviduSessionModule,xn.a]]}),On)}}]);
//# sourceMappingURL=users-users-module-es5.62deefb171d34ce866ee.js.map