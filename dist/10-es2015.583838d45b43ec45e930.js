(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"2yxt":function(t,e,n){"use strict";n.r(e),n.d(e,"ChatModule",(function(){return Ot}));var o=n("ofXK"),s=n("tyNb"),c=n("fXoL"),i=n("3Pt+");let a=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Lb({type:t,selectors:[["app-show-chatrooms"]],decls:194,vars:0,consts:[[1,"chatrooms-list"],[1,"create-post"],[1,"img"],["src","assets/img/item-4.png","alt",""],[1,"select"],["name","","id",""],["value",""],[1,"input"],["placeholder","Title","type","text"],[1,"add-photo"],["type","file"],[1,"material-icons"],[1,"btn"],[1,"post"],[1,"categories"],[1,"active"],[1,"search"],["placeholder","Search","type","text"],[1,"chatrooms-items"],[1,"item"],[1,"posted"],[1,"info"],[1,"left-wrap"],[1,"voting-container"],[1,"vote-up-btn","active"],[1,"vote-count"],[1,"vote-down-btn"],[1,"right-wrap"],["src","assets/img/jp-valeryunsplash.png","alt",""],[1,"post-menu"],[1,"menu"],["href",""],[1,"dotes"]],template:function(t,e){1&t&&(c.Xb(0,"div",0),c.Xb(1,"h1"),c.Rc(2,"Chat Rooms"),c.Wb(),c.Xb(3,"div",1),c.Xb(4,"div",2),c.Sb(5,"img",3),c.Xb(6,"span"),c.Rc(7,"Create Post"),c.Wb(),c.Wb(),c.Xb(8,"div",4),c.Xb(9,"select",5),c.Xb(10,"option",6),c.Rc(11,"Choose community"),c.Wb(),c.Xb(12,"option",6),c.Rc(13,"option"),c.Wb(),c.Wb(),c.Wb(),c.Xb(14,"div",7),c.Sb(15,"input",8),c.Wb(),c.Xb(16,"label",9),c.Sb(17,"input",10),c.Xb(18,"span",11),c.Rc(19,"image"),c.Wb(),c.Rc(20," Add Photo or Video "),c.Wb(),c.Xb(21,"div",12),c.Xb(22,"button",13),c.Rc(23,"Post"),c.Wb(),c.Wb(),c.Wb(),c.Xb(24,"ul",14),c.Xb(25,"li"),c.Xb(26,"a",15),c.Xb(27,"span",11),c.Rc(28,"whatshot"),c.Wb(),c.Rc(29,"Hot"),c.Wb(),c.Wb(),c.Xb(30,"li"),c.Xb(31,"a"),c.Xb(32,"span",11),c.Rc(33,"new_releases"),c.Wb(),c.Rc(34,"New"),c.Wb(),c.Wb(),c.Xb(35,"li"),c.Xb(36,"a"),c.Xb(37,"span",11),c.Rc(38,"trending_up"),c.Wb(),c.Rc(39,"Top"),c.Wb(),c.Wb(),c.Xb(40,"li"),c.Xb(41,"a"),c.Xb(42,"span",11),c.Rc(43,"new_releases"),c.Wb(),c.Rc(44,"Best of the week"),c.Wb(),c.Wb(),c.Wb(),c.Xb(45,"div",16),c.Sb(46,"input",17),c.Xb(47,"span",11),c.Rc(48,"search"),c.Wb(),c.Wb(),c.Xb(49,"div",18),c.Xb(50,"div",19),c.Xb(51,"div",20),c.Xb(52,"p"),c.Rc(53,"Posted by"),c.Xb(54,"span"),c.Rc(55,"u/alotasalad"),c.Wb(),c.Wb(),c.Xb(56,"p"),c.Rc(57,"4 minutes ago"),c.Wb(),c.Wb(),c.Xb(58,"div",21),c.Xb(59,"div",22),c.Xb(60,"div",23),c.Xb(61,"button",24),c.Xb(62,"span",11),c.Rc(63,"forward"),c.Wb(),c.Wb(),c.Xb(64,"div",25),c.Rc(65,"50k"),c.Wb(),c.Xb(66,"button",26),c.Xb(67,"span",11),c.Rc(68,"forward"),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Xb(69,"div",27),c.Xb(70,"p"),c.Rc(71,"This is my friends loss but to make matters even worse he borrowed the money from his Nigerian boss and yolod everything on fds otw up and down did I forget to mention that 4K in the the account right now is also his bosses money \u{1f4b0}"),c.Wb(),c.Sb(72,"img",28),c.Xb(73,"div",29),c.Xb(74,"div",30),c.Xb(75,"a",31),c.Xb(76,"span",11),c.Rc(77,"chat_bubble"),c.Wb(),c.Rc(78,"Comments"),c.Wb(),c.Xb(79,"a",31),c.Xb(80,"span",11),c.Rc(81,"share"),c.Wb(),c.Rc(82,"Share"),c.Wb(),c.Wb(),c.Xb(83,"div",32),c.Xb(84,"span",11),c.Rc(85,"more_vert"),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Xb(86,"div",19),c.Xb(87,"div",20),c.Xb(88,"p"),c.Rc(89,"Posted by"),c.Xb(90,"span"),c.Rc(91,"u/alotasalad"),c.Wb(),c.Wb(),c.Xb(92,"p"),c.Rc(93,"4 minutes ago"),c.Wb(),c.Wb(),c.Xb(94,"div",21),c.Xb(95,"div",22),c.Xb(96,"div",23),c.Xb(97,"button",24),c.Xb(98,"span",11),c.Rc(99,"forward"),c.Wb(),c.Wb(),c.Xb(100,"div",25),c.Rc(101,"50k"),c.Wb(),c.Xb(102,"button",26),c.Xb(103,"span",11),c.Rc(104,"forward"),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Xb(105,"div",27),c.Xb(106,"p"),c.Rc(107,"This is my friends loss but to make matters even worse he borrowed the money from his Nigerian boss and yolod everything on fds otw up and down did I forget to mention that 4K in the the account right now is also his bosses money \u{1f4b0}"),c.Wb(),c.Sb(108,"img",28),c.Xb(109,"div",29),c.Xb(110,"div",30),c.Xb(111,"a",31),c.Xb(112,"span",11),c.Rc(113,"chat_bubble"),c.Wb(),c.Rc(114,"Comments"),c.Wb(),c.Xb(115,"a",31),c.Xb(116,"span",11),c.Rc(117,"share"),c.Wb(),c.Rc(118,"Share"),c.Wb(),c.Wb(),c.Xb(119,"div",32),c.Xb(120,"span",11),c.Rc(121,"more_vert"),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Xb(122,"div",19),c.Xb(123,"div",20),c.Xb(124,"p"),c.Rc(125,"Posted by"),c.Xb(126,"span"),c.Rc(127,"u/alotasalad"),c.Wb(),c.Wb(),c.Xb(128,"p"),c.Rc(129,"4 minutes ago"),c.Wb(),c.Wb(),c.Xb(130,"div",21),c.Xb(131,"div",22),c.Xb(132,"div",23),c.Xb(133,"button",24),c.Xb(134,"span",11),c.Rc(135,"forward"),c.Wb(),c.Wb(),c.Xb(136,"div",25),c.Rc(137,"50k"),c.Wb(),c.Xb(138,"button",26),c.Xb(139,"span",11),c.Rc(140,"forward"),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Xb(141,"div",27),c.Xb(142,"p"),c.Rc(143,"This is my friends loss but to make matters even worse he borrowed the money from his Nigerian boss and yolod everything on fds otw up and down did I forget to mention that 4K in the the account right now is also his bosses money \u{1f4b0}"),c.Wb(),c.Sb(144,"img",28),c.Xb(145,"div",29),c.Xb(146,"div",30),c.Xb(147,"a",31),c.Xb(148,"span",11),c.Rc(149,"chat_bubble"),c.Wb(),c.Rc(150,"Comments"),c.Wb(),c.Xb(151,"a",31),c.Xb(152,"span",11),c.Rc(153,"share"),c.Wb(),c.Rc(154,"Share"),c.Wb(),c.Wb(),c.Xb(155,"div",32),c.Xb(156,"span",11),c.Rc(157,"more_vert"),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Xb(158,"div",19),c.Xb(159,"div",20),c.Xb(160,"p"),c.Rc(161,"Posted by"),c.Xb(162,"span"),c.Rc(163,"u/alotasalad"),c.Wb(),c.Wb(),c.Xb(164,"p"),c.Rc(165,"4 minutes ago"),c.Wb(),c.Wb(),c.Xb(166,"div",21),c.Xb(167,"div",22),c.Xb(168,"div",23),c.Xb(169,"button",24),c.Xb(170,"span",11),c.Rc(171,"forward"),c.Wb(),c.Wb(),c.Xb(172,"div",25),c.Rc(173,"50k"),c.Wb(),c.Xb(174,"button",26),c.Xb(175,"span",11),c.Rc(176,"forward"),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Xb(177,"div",27),c.Xb(178,"p"),c.Rc(179,"This is my friends loss but to make matters even worse he borrowed the money from his Nigerian boss and yolod everything on fds otw up and down did I forget to mention that 4K in the the account right now is also his bosses money \u{1f4b0}"),c.Wb(),c.Sb(180,"img",28),c.Xb(181,"div",29),c.Xb(182,"div",30),c.Xb(183,"a",31),c.Xb(184,"span",11),c.Rc(185,"chat_bubble"),c.Wb(),c.Rc(186,"Comments"),c.Wb(),c.Xb(187,"a",31),c.Xb(188,"span",11),c.Rc(189,"share"),c.Wb(),c.Rc(190,"Share"),c.Wb(),c.Wb(),c.Xb(191,"div",32),c.Xb(192,"span",11),c.Rc(193,"more_vert"),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Wb())},directives:[i.t,i.y],styles:[".categories[_ngcontent-%COMP%]{display:flex;padding-bottom:10px;flex-wrap:wrap;border-bottom:.5px solid #e2e2e2;margin-bottom:24px}.categories[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-right:2px;margin-bottom:8px;width:-webkit-max-content;width:-moz-max-content;width:max-content}.categories[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{height:22px;border-radius:11px;padding:2px 11px;display:flex;justify-content:center;align-items:center;background:#eee;transition:.3s ease-in-out;color:#545454!important;font-size:14px;font-family:Muli-Regular;cursor:pointer}.categories[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%], .categories[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:#f53c6f;color:#fff!important;cursor:pointer}.chatrooms-list[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:32px;color:#18b587;font-weight:700}.chatrooms-list[_ngcontent-%COMP%]   .create-post[_ngcontent-%COMP%]{margin:32px 0;padding:16px 24px 24px;background:#f5f5f5}.chatrooms-list[_ngcontent-%COMP%]   .create-post[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{display:flex;align-items:center}.chatrooms-list[_ngcontent-%COMP%]   .create-post[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;-o-object-fit:cover;object-fit:cover}.chatrooms-list[_ngcontent-%COMP%]   .create-post[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:16px;font-size:16px;font-weight:700;color:#545454}.chatrooms-list[_ngcontent-%COMP%]   .create-post[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]{margin-top:12px}.chatrooms-list[_ngcontent-%COMP%]   .create-post[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{min-width:240px;padding:8px 12px;border:0;color:#545454;outline:none}.chatrooms-list[_ngcontent-%COMP%]   .create-post[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{margin-top:12px}.chatrooms-list[_ngcontent-%COMP%]   .create-post[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:8px 14px;border:0;color:#545454;outline:none}.chatrooms-list[_ngcontent-%COMP%]   .create-post[_ngcontent-%COMP%]   .add-photo[_ngcontent-%COMP%]{margin-top:24px;margin-bottom:0;width:100%;display:flex;align-items:center;color:#c9c9c9;font-size:16px;font-weight:700;transition:all .1s ease;cursor:pointer}.chatrooms-list[_ngcontent-%COMP%]   .create-post[_ngcontent-%COMP%]   .add-photo[_ngcontent-%COMP%]:hover{color:#18b587}.chatrooms-list[_ngcontent-%COMP%]   .create-post[_ngcontent-%COMP%]   .add-photo[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:8px}.chatrooms-list[_ngcontent-%COMP%]   .create-post[_ngcontent-%COMP%]   .add-photo[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.chatrooms-list[_ngcontent-%COMP%]   .create-post[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:12px;padding:0;cursor:auto}.chatrooms-list[_ngcontent-%COMP%]   .create-post[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:6px 24px;background:#c9c9c9;color:#fff}.chatrooms-list[_ngcontent-%COMP%]   .create-post[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#18b587}.chatrooms-list[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{position:relative;margin-bottom:24px}.chatrooms-list[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px 48px 12px 16px;border:0;background:hsla(0,0%,50.6%,.13)}.chatrooms-list[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;right:14px;top:50%;transform:translateY(-50%);color:#545454;cursor:pointer}.chatrooms-list[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%]{margin-bottom:16px;padding:0;border:0}.chatrooms-list[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}.chatrooms-list[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px;margin-right:8px}.chatrooms-list[_ngcontent-%COMP%]   .chatrooms-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{margin-bottom:32px;padding:12px;background:#f5f5f5}.chatrooms-list[_ngcontent-%COMP%]   .chatrooms-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .posted[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.chatrooms-list[_ngcontent-%COMP%]   .chatrooms-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .posted[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:12px;color:#545454}.chatrooms-list[_ngcontent-%COMP%]   .chatrooms-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .posted[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:12px;color:#18b587}.chatrooms-list[_ngcontent-%COMP%]   .chatrooms-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;margin-top:16px}.chatrooms-list[_ngcontent-%COMP%]   .chatrooms-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .left-wrap[_ngcontent-%COMP%]   .voting-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.chatrooms-list[_ngcontent-%COMP%]   .chatrooms-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .left-wrap[_ngcontent-%COMP%]   .voting-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;background:transparent;color:#c9c9c9}.chatrooms-list[_ngcontent-%COMP%]   .chatrooms-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .left-wrap[_ngcontent-%COMP%]   .voting-container[_ngcontent-%COMP%]   button.vote-up-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{transform:rotate(-90deg)}.chatrooms-list[_ngcontent-%COMP%]   .chatrooms-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .left-wrap[_ngcontent-%COMP%]   .voting-container[_ngcontent-%COMP%]   button.vote-down-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{transform:rotate(90deg)}.chatrooms-list[_ngcontent-%COMP%]   .chatrooms-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .left-wrap[_ngcontent-%COMP%]   .voting-container[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{color:#18b587}.chatrooms-list[_ngcontent-%COMP%]   .chatrooms-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .left-wrap[_ngcontent-%COMP%]   .voting-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:24px}.chatrooms-list[_ngcontent-%COMP%]   .chatrooms-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .left-wrap[_ngcontent-%COMP%]   .voting-container[_ngcontent-%COMP%]   .vote-count[_ngcontent-%COMP%]{margin:8px 0;text-align:center;font-size:12px;color:#545454}.chatrooms-list[_ngcontent-%COMP%]   .chatrooms-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .right-wrap[_ngcontent-%COMP%]{flex:1;padding:0 36px 4px 12px}.chatrooms-list[_ngcontent-%COMP%]   .chatrooms-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .right-wrap[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:12px;color:#545454}.chatrooms-list[_ngcontent-%COMP%]   .chatrooms-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .right-wrap[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;margin-top:16px}.chatrooms-list[_ngcontent-%COMP%]   .chatrooms-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .right-wrap[_ngcontent-%COMP%]   .post-menu[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:16px;color:#545454}.chatrooms-list[_ngcontent-%COMP%]   .chatrooms-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .right-wrap[_ngcontent-%COMP%]   .post-menu[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]{display:flex}.chatrooms-list[_ngcontent-%COMP%]   .chatrooms-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .right-wrap[_ngcontent-%COMP%]   .post-menu[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-right:40px;display:flex;text-decoration:none;color:#545454;transition:all .1s ease}.chatrooms-list[_ngcontent-%COMP%]   .chatrooms-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .right-wrap[_ngcontent-%COMP%]   .post-menu[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#18b587}.chatrooms-list[_ngcontent-%COMP%]   .chatrooms-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .right-wrap[_ngcontent-%COMP%]   .post-menu[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:12px}.chatrooms-list[_ngcontent-%COMP%]   .chatrooms-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .right-wrap[_ngcontent-%COMP%]   .post-menu[_ngcontent-%COMP%]   .dotes[_ngcontent-%COMP%]{display:flex;cursor:pointer}"]}),t})();var r=n("il7l"),g=n("Rnal"),p=n("WHgu"),u=n("wDcp"),h=n("kktJ"),l=n("Y9zH"),b=n("TU8p"),d=n("GJOa"),m=n("wd/R"),C=n("tVj7"),M=n("NFeN"),_=n("STbY"),P=n("bTqV"),O=n("Qu3c"),f=n("fZdh"),v=n("yEwS"),x=n("vsDL");const w=["directMessagesList"];function k(t,e){if(1&t){const t=c.Yb();c.Xb(0,"button",15),c.jc("click",(function(){return c.Ic(t),c.nc().toggleBlockedUsers(!1)})),c.Xb(1,"mat-icon"),c.Rc(2,"arrow_backward"),c.Wb(),c.Xb(3,"span"),c.Rc(4,"Active contacts"),c.Wb(),c.Wb()}}function W(t,e){if(1&t){const t=c.Yb();c.Xb(0,"div",16),c.Xb(1,"button",17),c.Sb(2,"i",18),c.Wb(),c.Xb(3,"mat-menu",null,19),c.Xb(5,"button",20),c.jc("click",(function(){return c.Ic(t),c.nc().toggleBlockedUsers(!1)})),c.Sb(6,"i",21),c.Rc(7," Active users "),c.Wb(),c.Xb(8,"button",20),c.jc("click",(function(){return c.Ic(t),c.nc().toggleBlockedUsers(!0)})),c.Sb(9,"i",22),c.Rc(10," Blocked users "),c.Wb(),c.Wb(),c.Wb()}if(2&t){const t=c.Ec(4),e=c.nc();c.Cb(1),c.uc("matMenuTriggerFor",t),c.Cb(4),c.Hb("active",!e.showBlockedUsers),c.uc("disableRipple",!0),c.Cb(3),c.Hb("active",e.showBlockedUsers),c.uc("disableRipple",!0)}}function X(t,e){if(1&t){const t=c.Yb();c.Xb(0,"button",37),c.jc("click",(function(){c.Ic(t);const e=c.nc(2).user;return c.nc(2).blockUser(e)})),c.Rc(1," Block "),c.Wb()}}function y(t,e){if(1&t){const t=c.Yb();c.Xb(0,"button",37),c.jc("click",(function(){c.Ic(t);const e=c.nc(2).user;return c.nc(2).blockUser(e)})),c.Rc(1," Unblock "),c.Wb()}}function U(t,e){if(1&t){const t=c.Yb();c.Vb(0),c.Xb(1,"button",35),c.Sb(2,"i",36),c.Wb(),c.Xb(3,"mat-menu",null,19),c.Xb(5,"button",37),c.jc("click",(function(){c.Ic(t);const e=c.nc(),n=e.user,o=e.lastMsg;return c.nc(2).unreadLastMsg(n,o)})),c.Rc(6," Unread "),c.Wb(),c.Pc(7,X,2,0,"button",38),c.Pc(8,y,2,0,"button",38),c.Wb(),c.Ub()}if(2&t){const t=c.Ec(4),e=c.nc(3);c.Cb(1),c.uc("matMenuTriggerFor",t)("disableRipple",!0),c.Cb(6),c.uc("ngIf",!e.showBlockedUsers),c.Cb(1),c.uc("ngIf",e.showBlockedUsers)}}function G(t,e){if(1&t&&(c.Vb(0),c.Xb(1,"button",39),c.Xb(2,"strong"),c.Rc(3),c.Wb(),c.Wb(),c.Ub()),2&t){const t=c.nc(2).$implicit;c.Cb(3),c.Sc(t.unseens)}}function S(t,e){if(1&t){const t=c.Yb();c.Xb(0,"div",25),c.Xb(1,"div",26),c.jc("click",(function(){c.Ic(t);const n=e.user,o=e.lastMsg;return c.nc(2).makeUserActive(n,o)})),c.Xb(2,"div",27),c.Sb(3,"img",28),c.oc(4,"getImgPath"),c.Sb(5,"div",29),c.Wb(),c.Xb(6,"div",30),c.Xb(7,"div",31),c.Rc(8),c.Wb(),c.Xb(9,"div",32),c.Xb(10,"span"),c.Rc(11),c.Wb(),c.Xb(12,"span",33),c.Rc(13),c.oc(14,"dateFromNow"),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Xb(15,"div",34),c.Pc(16,U,9,4,"ng-container",14),c.Pc(17,G,4,1,"ng-container",14),c.Wb(),c.Wb()}if(2&t){const t=e.user,n=e.lastMsg,o=c.nc(2);c.Cb(3),c.uc("src",c.qc(4,8,t.avatar,"user_avatars"),c.Kc),c.Cb(2),c.uc("hidden",0===o.onlineUsers.length)("ngClass",o.getUserCurrentStatus(t.from)?"online":"offline"),c.Cb(3),c.Sc(t.first_name+" "+t.last_name),c.Cb(3),c.Sc(n.message),c.Cb(2),c.Sc(c.pc(14,11,n.created_at)),c.Cb(3),c.uc("ngIf",1===n.seen),c.Cb(1),c.uc("ngIf",o.checkIfLastMessageSeen(n))}}const R=function(t,e){return{user:t,lastMsg:e}};function I(t,e){if(1&t&&(c.Xb(0,"li"),c.Tb(1,23),c.Pc(2,S,18,13,"ng-template",null,24,c.Qc),c.Wb()),2&t){const t=e.$implicit,n=c.Ec(3),o=c.nc();c.Hb("active",(null==o.activeUser?null:o.activeUser.id)===t.user.id),c.Cb(1),c.uc("ngTemplateOutlet",n)("ngTemplateOutletContext",c.zc(4,R,t.user,null==t?null:t.messages[(null==t?null:t.messages.length)-1]))}}function T(t,e){if(1&t){const t=c.Yb();c.Xb(0,"button",45),c.jc("click",(function(){return c.Ic(t),c.nc(2).activeUser=null})),c.Xb(1,"mat-icon"),c.Rc(2,"arrow_back"),c.Wb(),c.Wb()}}function F(t,e){if(1&t&&(c.Xb(0,"div",40),c.Xb(1,"div",41),c.Pc(2,T,3,0,"button",42),c.Xb(3,"div",43),c.Sb(4,"img",28),c.oc(5,"getImgPath"),c.Wb(),c.Xb(6,"div",31),c.Rc(7),c.Wb(),c.Wb(),c.Sb(8,"div",44),c.Wb()),2&t){const t=c.nc();c.Cb(2),c.uc("ngIf",t.isChatUsersListSize()),c.Cb(2),c.uc("src",c.qc(5,3,t.activeUser.avatar,"user_avatars"),c.Kc),c.Cb(3),c.Sc(t.activeUser.first_name+" "+t.activeUser.last_name)}}function j(t,e){if(1&t&&(c.Xb(0,"div",52),c.Sb(1,"img",53),c.oc(2,"getImgPath"),c.Wb()),2&t){const t=c.nc().$implicit,e=c.nc(2);c.Cb(1),c.uc("matTooltip",e.getSeenTooltip(t))("src",c.qc(2,2,t.to_user.avatar,"user_avatars"),c.Kc)}}function z(t,e){if(1&t&&(c.Vb(0),c.Xb(1,"li",47),c.Xb(2,"div",48),c.Xb(3,"div",32),c.Xb(4,"div",43),c.Sb(5,"img",28),c.oc(6,"getImgPath"),c.Wb(),c.Xb(7,"div",31),c.Rc(8),c.Wb(),c.Wb(),c.Xb(9,"div",49),c.Rc(10),c.oc(11,"date"),c.Wb(),c.Wb(),c.Xb(12,"div",50),c.Rc(13),c.Wb(),c.Pc(14,j,3,5,"div",51),c.Wb(),c.Ub()),2&t){const t=e.$implicit,n=c.nc(2);c.Cb(1),c.uc("ngClass",n.getMessageClass(t.from_user)),c.Cb(4),c.uc("src",c.qc(6,6,t.from_user.avatar,"user_avatars"),c.Kc),c.Cb(3),c.Sc(t.from_user.first_name+" "+t.from_user.last_name),c.Cb(2),c.Sc(c.qc(11,9,t.created_at,"HH:mm")),c.Cb(3),c.Tc(" ",t.message," "),c.Cb(1),c.uc("ngIf",t.seen&&t.to_id!==n.authUser.id)}}function B(t,e){if(1&t&&(c.Vb(0),c.Xb(1,"li",46),c.Xb(2,"span"),c.Rc(3),c.oc(4,"getDateText"),c.Wb(),c.Wb(),c.Pc(5,z,15,12,"ng-container",13),c.Ub()),2&t){const t=e.$implicit;c.Cb(3),c.Sc(c.pc(4,2,t.key)),c.Cb(2),c.uc("ngForOf",t.value)}}function L(t,e){if(1&t){const t=c.Yb();c.Vb(0),c.Xb(1,"small",54),c.Rc(2),c.Wb(),c.Xb(3,"div",55),c.Xb(4,"form",56),c.Xb(5,"input",57),c.jc("keyup",(function(){return c.Ic(t),c.nc().setTyping()}))("focus",(function(){return c.Ic(t),c.nc().setSeen()}))("keyup.enter",(function(e){return c.Ic(t),c.nc().sendMessage(e)})),c.Wb(),c.Wb(),c.Xb(6,"div",58),c.Xb(7,"a",59),c.Sb(8,"img",60),c.Wb(),c.Xb(9,"a",59),c.Sb(10,"img",61),c.Wb(),c.Xb(11,"a",59),c.Sb(12,"img",62),c.Wb(),c.Wb(),c.Wb(),c.Ub()}if(2&t){const t=c.nc();c.Cb(2),c.Sc(t.typingText),c.Cb(2),c.uc("formGroup",t.chatForm)}}let D=(()=>{class t{constructor(t,e,n,o,s,i,a,r){this.chatService=t,this.getAuthUser=e,this.socketService=n,this.usersService=o,this.subject=s,this.datePipe=i,this.groupBy=a,this.fb=r,this.usersMessages=[],this.filteredUsersMessages=[],this.selectedUserMessages={messages:[],user:{},rawMessages:[]},this.showBlockedUsers=!1,this.onlineUsers=[],this.newMessageSources=[],this.subscriptions=[],this.newMessagesCountReceived=new c.o}ngOnInit(){this.addUserToSocket(),this.getOnlineUsers(),this.getMessagesFromSocket(),this.getUsersMessages(),this.initForm(),this.getTyping(),this.getSeen(),this.getChatNotifications()}addUserToSocket(){this.socketService.addNewUser(Object.assign(Object.assign({},this.authUser),{group:!1}))}getOnlineUsers(){this.subscriptions.push(this.socketService.userOnlineFeedback().subscribe(t=>{this.onlineUsers=t}))}getUserCurrentStatus(t){return 0===this.onlineUsers.length||this.onlineUsers.includes(t)}getChatNotifications(){this.subscriptions.push(this.socketService.getChatNotifications().subscribe(t=>{this.onlineUsers=t.users}))}initForm(){var t,e;this.chatForm=this.fb.group({from:[this.authUser.username],from_id:[this.authUser.id],to_id:[null===(t=this.activeUser)||void 0===t?void 0:t.id],avatar:[null===(e=this.authUser)||void 0===e?void 0:e.avatar],from_user:[this.authUser],to_user:[null],message:["",i.x.required],personal:[1]})}getMessageClass(t){return t.id===this.authUser.id?"my-message":"other-message"}isChatUsersListSize(){return d.a.isChatUsersListSize()}getUsersMessages(){this.selectedUserMessages.messages=[],this.subscriptions.push(this.chatService.getDirectChatMessages({from_id:this.authUser.id,to_id:"",personal:1}).subscribe(t=>{var e,n;this.usersMessages=t;const o=t.filter(t=>t.unseens>0);this.newMessagesCountReceived.emit(o.length),console.log(this.usersMessages),this.filteredUsersMessages=t.filter(t=>!!t.user.blocked===this.showBlockedUsers),this.newMessageSources=this.filteredUsersMessages.filter(t=>t.unseens),this.subject.setNewMessagesSourceData({source:this.newMessageSources,type:"direct"}),console.log("get messages!!!",this.newMessageSources),this.activeUser=this.activeUser||(null===(e=this.filteredUsersMessages[0])||void 0===e?void 0:e.user);const s=this.filteredUsersMessages.find(t=>{var e;return t.user.id===(null===(e=this.activeUser)||void 0===e?void 0:e.id)});this.selectedUserMessages.user=null==s?void 0:s.user,this.selectedUserMessages.messages=this.groupBy.transform(null==s?void 0:s.messages,"created_at"),this.selectedUserMessages.rawMessages=null==s?void 0:s.messages,this.chatForm.patchValue({to_id:null===(n=this.activeUser)||void 0===n?void 0:n.id,to_user:this.activeUser})}))}getMessagesFromSocket(){this.subscriptions.push(this.socketService.onNewMessage().subscribe(t=>{console.log("new message direct chat!!!"),this.typingText=null,this.getUsersMessages()}))}makeUserActive(t,e){if(this.activeUser=t,this.selectedUserMessages={messages:[],user:{},rawMessages:[]},t){this.chatForm.patchValue({to_id:t.id,to_user:this.activeUser});const n=JSON.parse(JSON.stringify(this.filteredUsersMessages.find(e=>e.user.id===t.id)));this.selectedUserMessages.messages=this.groupBy.transform(n.messages,"created_at"),this.selectedUserMessages.rawMessages=n.messages,this.selectedUserMessages.user=n.user,e.seen||this.setSeen()}}toggleBlockedUsers(t){var e,n,o;this.showBlockedUsers=t,this.filteredUsersMessages=this.usersMessages.filter(t=>!!t.user.blocked===this.showBlockedUsers),this.activeUser=null===(e=this.filteredUsersMessages[0])||void 0===e?void 0:e.user,this.makeUserActive(this.activeUser,null===(n=this.filteredUsersMessages[0])||void 0===n?void 0:n.messages[(null===(o=this.filteredUsersMessages[0])||void 0===o?void 0:o.messages.length)-1])}sendMessage(t){if(this.chatForm.valid){const t=Object.assign({},this.chatForm.value);this.subscriptions.push(this.chatService.saveMessage(t).subscribe(e=>{this.selectedUserMessages.messages=this.groupBy.transform(e[0].messages,"created_at"),this.selectedUserMessages.user=e[0].user,this.socketService.sendMessage(t),this.scrollMsgsToBottom(),console.log(this.selectedUserMessages)})),this.chatForm.patchValue({message:""})}}scrollMsgsToBottom(){try{this.messagesList.nativeElement.scrollTop=this.messagesList.nativeElement.scrollHeight}catch(t){console.log(t)}}setTyping(t=null){this.socketService.setTyping({from_user:this.chatForm.value.from_user,to_user:this.chatForm.value.to_user,message:this.chatForm.value.message})}getTyping(){this.subscriptions.push(this.socketService.getTyping().subscribe(t=>{console.log(t.from_user.id,this.authUser.id,this.activeUser),t.from_user.id!==this.authUser.id&&this.activeUser.id===t.from_user.id&&(this.typingText=t.message?t.from_user.first_name+" is typing...":null)}))}setSeen(){var t;console.log(this.selectedUserMessages.messages);const e=this.selectedUserMessages.rawMessages;if(e.length>0){const n=(null===(t=e[e.length-1])||void 0===t?void 0:t.from_id)===this.authUser.id;console.log("set seen",n),this.scrollMsgsToBottom(),n||this.socketService.setSeen({message_id:e[e.length-1].id,from_id:this.chatForm.value.from_id,to_id:this.chatForm.value.to_id,from_user:this.chatForm.value.from_user,to_user:this.chatForm.value.to_user,seen:1,seen_at:m().format("YYYY-MM-DD, h:mm:ss a")})}}getSeen(){this.subscriptions.push(this.socketService.getSeen().subscribe(t=>{this.selectedUserMessages.messages=[],console.log("get seen",t),this.getUsersMessages()}))}unreadLastMsg(t,e){if(e.to_id===this.authUser.id&&e.from_id===t.id){const n={to_id:this.authUser.id,to_user:this.authUser,from_user:Object.assign({username:t.from},t),from_id:t.id,id:e.id,seen:0};console.log(n),console.log("unread msg!!"),this.socketService.setSeen(n)}}blockUser(t){this.subscriptions.push(this.usersService.blockUser({connection_id:t.id,user_id:this.authUser.id,block:+!this.showBlockedUsers}).subscribe(t=>{this.getUsersMessages()}))}getSeenTooltip(t){const e=t.to_user,n=m(t.seen_at).isSame(new Date,"week"),o=m(t.seen_at).format(n?"ddd HH:mm":"MMM DD, YYYY HH:mm");return`${e.first_name} ${e.last_name} at ${o}`}checkIfLastMessageSeen(t){return 0===t.seen&&t.from_id!==this.authUser.id}ngAfterViewChecked(){this.scrollMsgsToBottom()}ngOnDestroy(){this.setTyping(null),this.subscriptions.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(c.Rb(r.a),c.Rb(g.a),c.Rb(p.a),c.Rb(C.a),c.Rb(u.a),c.Rb(o.f),c.Rb(h.a),c.Rb(i.e))},t.\u0275cmp=c.Lb({type:t,selectors:[["app-direct-chat"]],viewQuery:function(t,e){var n;1&t&&c.Wc(w,!0),2&t&&c.Dc(n=c.kc())&&(e.messagesList=n.first)},inputs:{authUser:"authUser"},outputs:{newMessagesCountReceived:"newMessagesCountReceived"},decls:15,vars:10,consts:[[1,"chat-wrap"],[1,"people-groups-container",3,"hidden"],["id","people-list",1,"list-wrap"],[1,"top-actions"],["id","back-to-active-users"],[3,"click",4,"ngIf"],["class","three-dot-actions",4,"ngIf"],[1,"list","align-items-center"],[3,"active",4,"ngFor","ngForOf"],[1,"chat",3,"hidden"],["class","chat-about",4,"ngIf"],["id","direct-messages",1,"chat-history"],["directMessagesList",""],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"click"],[1,"three-dot-actions"],[1,"show-actions",3,"matMenuTriggerFor"],[1,"fas","fa-ellipsis-h"],["menu","matMenu"],["mat-menu-item","",3,"disableRipple","click"],[1,"fas","fa-users"],[1,"fa","fa-users-slash"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["itemTemplate",""],[1,"d-flex","user-last-msg","align-items-center","justify-content-between"],[1,"left-group",3,"click"],[1,"img","user-avatar"],[1,"avatar",3,"src"],[1,"status",3,"hidden","ngClass"],[1,"text"],[1,"name"],[1,"d-flex","align-items-center"],[1,"ml-4"],[1,"ml-auto","more-btn"],["mat-icon-button","",1,"",3,"matMenuTriggerFor","disableRipple"],[1,"fas","fa-ellipsis-v"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"click",4,"ngIf"],[1,"seen-circle"],[1,"chat-about"],[1,"left"],["mat-icon-button","",3,"click",4,"ngIf"],[1,"img"],[1,"right"],["mat-icon-button","",3,"click"],[1,"data-list"],[1,"message-container",3,"ngClass"],[1,"message-data","mb-0","pl-0","d-flex","justify-content-between","align-items-center"],[1,"date"],[1,"message"],["class","seen",4,"ngIf"],[1,"seen"],[1,"seen-avatar",3,"matTooltip","src"],[1,"text-center","font-italic","d-block"],[1,"chat-message"],[1,"chat-form",3,"formGroup"],["formControlName","message","placeholder","Type your message",1,"flex-1","mx-3",3,"keyup","focus","keyup.enter"],[1,"icons"],["href",""],["src","assets/img/gif-24px.svg","alt",""],["src","assets/img/mood-24px.svg","alt",""],["src","assets/img/send-24px.svg","alt",""]],template:function(t,e){1&t&&(c.Xb(0,"div",0),c.Xb(1,"div",1),c.Xb(2,"div",2),c.Xb(3,"div",3),c.Xb(4,"div",4),c.Pc(5,k,5,0,"button",5),c.Wb(),c.Pc(6,W,11,7,"div",6),c.Wb(),c.Xb(7,"ul",7),c.Pc(8,I,4,7,"li",8),c.Wb(),c.Wb(),c.Wb(),c.Xb(9,"div",9),c.Pc(10,F,9,6,"div",10),c.Xb(11,"ul",11,12),c.Pc(13,B,6,4,"ng-container",13),c.Wb(),c.Pc(14,L,13,2,"ng-container",14),c.Wb(),c.Wb()),2&t&&(c.Cb(1),c.Hb("responsive-list",e.isChatUsersListSize()),c.uc("hidden",e.isChatUsersListSize()&&e.activeUser),c.Cb(4),c.uc("ngIf",e.showBlockedUsers),c.Cb(1),c.uc("ngIf",e.filteredUsersMessages.length>0),c.Cb(2),c.uc("ngForOf",e.usersMessages),c.Cb(1),c.uc("hidden",e.isChatUsersListSize()&&!e.activeUser),c.Cb(1),c.uc("ngIf",e.activeUser),c.Cb(3),c.uc("ngForOf",null==e.selectedUserMessages?null:e.selectedUserMessages.messages),c.Cb(1),c.uc("ngIf",e.activeUser))},directives:[o.n,o.m,M.a,_.c,_.d,_.a,o.s,o.l,P.a,O.a,i.z,i.q,i.i,i.c,i.p,i.h],pipes:[f.a,v.a,x.a,o.f],styles:[".chat-wrap[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;height:100vh}.chat-wrap[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;background-size:cover;background-position:50%;background-repeat:no-repeat}.chat-wrap[_ngcontent-%COMP%]   .people-groups-container[_ngcontent-%COMP%]{flex:0 0 316px;background:#f5f5f5}.chat-wrap[_ngcontent-%COMP%]   .people-groups-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.chat-wrap[_ngcontent-%COMP%]   .people-groups-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.chat-wrap[_ngcontent-%COMP%]   .people-groups-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#dcdcdc;border-radius:4px}.chat-wrap[_ngcontent-%COMP%]   .people-groups-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#aeaeae}.chat-wrap[_ngcontent-%COMP%]   .people-groups-container[_ngcontent-%COMP%]   .create-group-chat[_ngcontent-%COMP%]{padding:0 15px;margin:4px 0 16px;background:transparent;color:#18b587;font-size:16px;font-family:Muli-Bold}.chat-wrap[_ngcontent-%COMP%]   .people-groups-container[_ngcontent-%COMP%]   .create-group-chat[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;margin-right:2px}.chat-wrap[_ngcontent-%COMP%]   .people-groups-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{max-height:600px;overflow-x:auto}.chat-wrap[_ngcontent-%COMP%]   .people-groups-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:6px 10px;display:flex;border-left:5px solid transparent;cursor:pointer;transition:all .3s ease}.chat-wrap[_ngcontent-%COMP%]   .people-groups-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{border-left:5px solid #18b587;background:#fff}.chat-wrap[_ngcontent-%COMP%]   .people-groups-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%], .chat-wrap[_ngcontent-%COMP%]   .people-groups-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#18b587}.chat-wrap[_ngcontent-%COMP%]   .people-groups-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{border-left:5px solid #f53c6f;background:#fff}.chat-wrap[_ngcontent-%COMP%]   .people-groups-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover   .text[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%], .chat-wrap[_ngcontent-%COMP%]   .people-groups-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover   .text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#f53c6f}.chat-wrap[_ngcontent-%COMP%]   .people-groups-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{margin-right:22px}.chat-wrap[_ngcontent-%COMP%]   .people-groups-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{text-transform:capitalize;font-size:16px;font-weight:500;color:#545454}.chat-wrap[_ngcontent-%COMP%]   .people-groups-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-top:4px;display:block;font-size:14px;font-weight:300;color:#acacac}@media screen and (max-width:1029px){.chat-wrap[_ngcontent-%COMP%]   .people-groups-container[_ngcontent-%COMP%]{flex:1}}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]{margin-left:32px;flex:1;min-width:350px;margin-top:-50px}@media (max-width:1111px){.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]{margin-top:0;margin-left:0}}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#dcdcdc;border-radius:4px}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#aeaeae}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   .chat-about[_ngcontent-%COMP%]{justify-content:space-between;background:#f5f5f5;padding:12px 16px}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   .chat-about[_ngcontent-%COMP%], .chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   .chat-about[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{display:flex;align-items:center}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   .chat-about[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{margin-right:16px}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   .chat-about[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .group-name[_ngcontent-%COMP%]{color:#18b587;font-size:16px;font-weight:500;text-transform:capitalize}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   .chat-about[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{display:flex;align-items:center}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   .chat-about[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#f53c6f}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   .chat-about[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-left:16px}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]{overflow-x:auto;height:600px}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:32px;padding-right:48px}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   li.data-list[_ngcontent-%COMP%]{height:1px;margin:16px 0 32px;background:#c9c9c9;display:flex;align-items:center;justify-content:center}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   li.data-list[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;color:#c9c9c9;padding:0 32px;font-size:12px}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   li.my-message[_ngcontent-%COMP%]{padding-right:8px;margin-left:48px}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   li.my-message[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{background:#18b587;color:#fff}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   li.my-message[_ngcontent-%COMP%]   .message-data[_ngcontent-%COMP%]{justify-content:flex-end}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .message-data[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:16px;padding-left:16px}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .message-data[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{margin-right:16px}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .message-data[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{color:#545454;font-size:16px;font-weight:500;margin-right:16px}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .message-data[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{font-size:13px;font-weight:300;color:#545454}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{background:#f5f5f5;color:#545454;font-weight:500;font-size:14px;line-height:21px;padding:16px;font-family:Muli-Light}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .seen[_ngcontent-%COMP%]{text-align:right}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .seen[_ngcontent-%COMP%]   .seen-avatar[_ngcontent-%COMP%]{width:20px;height:20px;border-radius:20px}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   .chat-message[_ngcontent-%COMP%]{background:#f5f5f5;display:flex;justify-content:space-between}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   .chat-message[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{background:#f5f5f5}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   .chat-message[_ngcontent-%COMP%]   .chat-form[_ngcontent-%COMP%]{width:90%}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   .chat-message[_ngcontent-%COMP%]   .chat-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;background:transparent}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   .chat-message[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]{display:flex;align-items:center;padding-right:16px}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   .chat-message[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-left:12px}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   .chat-message[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:first-child{margin:0}@media screen and (max-width:1029px){.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]{margin-left:0;margin-top:24px;min-width:100%}}.responsive-list[_ngcontent-%COMP%]{flex:0 0 100%!important}.responsive-list[_ngcontent-%COMP%]   .more-btn[_ngcontent-%COMP%]{display:block}.my-message[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%], .my-message[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{display:none}.user-last-msg[_ngcontent-%COMP%]{width:98%}.right[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{cursor:pointer}.left-group[_ngcontent-%COMP%]{display:flex}.seen-circle[_ngcontent-%COMP%]{background-color:#f53c6f!important;color:#fff;width:20px;height:20px;border-radius:20px;font-size:12px}.more-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:transparent}.top-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding-right:20px}.top-actions[_ngcontent-%COMP%]   .show-actions[_ngcontent-%COMP%]{background-color:#c9c9c9;padding:5px;border-radius:35px;width:30px;height:30px;color:#fff;margin-bottom:10px}.top-actions[_ngcontent-%COMP%]   .show-actions[_ngcontent-%COMP%]:hover{background-color:#18b587}.top-actions[_ngcontent-%COMP%]   #back-to-active-users[_ngcontent-%COMP%]{padding-left:10px}.top-actions[_ngcontent-%COMP%]   #back-to-active-users[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:unset;border:none}.top-actions[_ngcontent-%COMP%]   #back-to-active-users[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:5px}.user-avatar[_ngcontent-%COMP%]{position:relative}.user-avatar[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{position:absolute;width:14px;height:14px;border-radius:14px;top:28px;right:0;padding:0;line-height:0}.user-avatar[_ngcontent-%COMP%]   .status.offline[_ngcontent-%COMP%]{background-color:grey}.user-avatar[_ngcontent-%COMP%]   .status.online[_ngcontent-%COMP%]{background-color:#18b587}"]}),t})();var Y=n("FtGj"),N=n("dJ++");let H=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Lb({type:t,selectors:[["app-show-chat-group-members"]],decls:2,vars:0,template:function(t,e){1&t&&(c.Xb(0,"p"),c.Rc(1,"show-chat-group-members works!"),c.Wb())},styles:[""]}),t})();var A=n("5eHb"),J=n("0IaG"),V=n("kmnG"),q=n("A5z7"),K=n("qFsG"),$=n("/1cH"),E=n("FKr1");const Q=["chipsInput"],Z=["groupMessagesList"];function tt(t,e){if(1&t){const t=c.Yb();c.Xb(0,"li",11),c.jc("click",(function(){c.Ic(t);const n=e.$implicit;return c.nc().makeGroupActive(n)})),c.Xb(1,"div",12),c.Sb(2,"img",13),c.oc(3,"getImgPath"),c.Xb(4,"div",14),c.Xb(5,"div",15),c.Rc(6),c.Wb(),c.Xb(7,"span"),c.Rc(8),c.Wb(),c.Wb(),c.Wb(),c.Xb(9,"div",16),c.Xb(10,"button",17),c.Xb(11,"strong"),c.Rc(12),c.Wb(),c.Wb(),c.Wb(),c.Wb()}if(2&t){const t=e.$implicit,n=c.nc();c.Hb("active",t.id===(null==n.selectedGroup?null:n.selectedGroup.id))("unconfirmed",!n.ifConfirmedToJoinTheGroup(t)),c.Cb(2),c.uc("src",c.qc(3,9,t.avatar,"group_avatars"),c.Kc),c.Cb(4),c.Sc(t.name),c.Cb(2),c.Sc(null==t.chat_group_messages[t.chat_group_messages.length-1]?null:t.chat_group_messages[t.chat_group_messages.length-1].message),c.Cb(2),c.uc("hidden",!n.isSeenByAuthUser(t.chat_group_messages)),c.Cb(2),c.Sc(n.isSeenByAuthUser(t.chat_group_messages))}}function et(t,e){if(1&t){const t=c.Yb();c.Xb(0,"mat-chip",62),c.jc("removed",(function(){c.Ic(t);const n=e.$implicit;return c.nc(2).removeInputMember(n)})),c.Rc(1),c.Xb(2,"mat-icon",63),c.Rc(3,"cancel"),c.Wb(),c.Wb()}if(2&t){const t=e.$implicit;c.Cb(1),c.Tc(" ",t.first_name+" "+t.last_name," ")}}function nt(t,e){if(1&t&&(c.Xb(0,"mat-option",64),c.Rc(1),c.Wb()),2&t){const t=e.$implicit;c.uc("value",t),c.Cb(1),c.Tc(" ",t.first_name+" "+t.last_name," ")}}function ot(t,e){if(1&t){const t=c.Yb();c.Xb(0,"mat-icon",36),c.jc("click",(function(){c.Ic(t);const e=c.nc().$implicit;return c.nc(3).removeSavedMember(e.id)})),c.Rc(1,"cancel "),c.Wb()}}function st(t,e){if(1&t&&(c.Xb(0,"li",66),c.Sb(1,"img",67),c.oc(2,"getImgPath"),c.Pc(3,ot,2,0,"mat-icon",68),c.Sb(4,"div",69),c.Wb()),2&t){const t=e.$implicit,n=c.nc(3);c.Hb("pending",!t.chat_groups_members.confirmed),c.Cb(1),c.uc("matTooltip",t.name)("src",c.qc(2,6,t.avatar,"user_avatars"),c.Kc),c.Cb(2),c.uc("ngIf",t.id!==(null==n.selectedGroup?null:n.selectedGroup.creator_id)),c.Cb(1),c.uc("ngClass",n.getUserCurrentStatus(t)?"online":"offline")}}function ct(t,e){if(1&t&&(c.Xb(0,"ul"),c.Pc(1,st,5,9,"li",65),c.Wb()),2&t){const t=c.nc(2);c.Cb(1),c.uc("ngForOf",t.groupMembers)}}function it(t,e){if(1&t){const t=c.Yb();c.Xb(0,"div",70),c.jc("click",(function(){return c.Ic(t),c.nc(2).removeGroup()})),c.Xb(1,"a"),c.Sb(2,"i",71),c.Wb(),c.Wb()}}function at(t,e){if(1&t){const t=c.Yb();c.Xb(0,"button",45),c.jc("click",(function(){return c.Ic(t),c.nc(2).leaveGroup()})),c.Rc(1," Leave group "),c.Wb()}}function rt(t,e){if(1&t&&(c.Vb(0),c.Sb(1,"img",82),c.oc(2,"getImgPath"),c.Ub()),2&t){const t=e.$implicit;c.Cb(1),c.uc("matTooltip",t.first_name+" "+t.last_name)("src",c.qc(2,2,t.avatar,"user_avatars"),c.Kc)}}function gt(t,e){if(1&t&&(c.Vb(0),c.Xb(1,"li",74),c.Xb(2,"div",75),c.Xb(3,"div",76),c.Xb(4,"div",77),c.Sb(5,"img",78),c.oc(6,"getImgPath"),c.Wb(),c.Xb(7,"div",15),c.Rc(8),c.Wb(),c.Wb(),c.Xb(9,"div",79),c.Rc(10),c.oc(11,"date"),c.Wb(),c.Wb(),c.Xb(12,"div",80),c.Rc(13),c.Wb(),c.Xb(14,"div",81),c.Pc(15,rt,3,5,"ng-container",72),c.Wb(),c.Wb(),c.Ub()),2&t){const t=e.$implicit,n=c.nc(4);c.Cb(1),c.uc("ngClass",n.getMessageClass(t.from_user)),c.Cb(4),c.uc("src",c.qc(6,6,t.from_user.avatar,"user_avatars"),c.Kc),c.Cb(3),c.Sc(t.from_user.first_name+" "+t.from_user.last_name),c.Cb(2),c.Sc(c.qc(11,9,t.created_at,"HH:mm")),c.Cb(3),c.Tc(" ",t.message," "),c.Cb(2),c.uc("ngForOf",t.seen_by)}}function pt(t,e){if(1&t&&(c.Vb(0),c.Xb(1,"li",73),c.Xb(2,"span"),c.Rc(3),c.oc(4,"getDateText"),c.Wb(),c.Wb(),c.Pc(5,gt,16,12,"ng-container",72),c.Ub()),2&t){const t=e.$implicit;c.Cb(3),c.Sc(c.pc(4,2,t.key)),c.Cb(2),c.uc("ngForOf",t.value)}}function ut(t,e){if(1&t&&(c.Vb(0),c.Pc(1,pt,6,4,"ng-container",72),c.Ub()),2&t){const t=c.nc(2);c.Cb(1),c.uc("ngForOf",t.selectedGroupMessages)}}function ht(t,e){if(1&t&&(c.Xb(0,"small",83),c.Rc(1),c.Wb()),2&t){const t=c.nc(2);c.Cb(1),c.Sc(t.typingText.text)}}function lt(t,e){if(1&t){const t=c.Yb();c.Xb(0,"div",18),c.Xb(1,"div",19),c.Xb(2,"form",20),c.Xb(3,"div",21),c.Xb(4,"div",12),c.Xb(5,"label",22),c.Sb(6,"img",13),c.oc(7,"getImgPath"),c.Wb(),c.Xb(8,"input",23),c.jc("change",(function(e){return c.Ic(t),c.nc().changeAvatar(e)})),c.Wb(),c.Xb(9,"div",24),c.Rc(10),c.Wb(),c.Wb(),c.Xb(11,"div",25),c.Xb(12,"div",26),c.Xb(13,"mat-form-field"),c.Xb(14,"mat-chip-list",27,28),c.Pc(16,et,4,1,"mat-chip",29),c.Sb(17,"input",30,31),c.Wb(),c.Xb(19,"mat-autocomplete",32,33),c.jc("optionSelected",(function(e){return c.Ic(t),c.nc().autoCompleteMemberSelected(e)})),c.Pc(21,nt,2,2,"mat-option",34),c.Wb(),c.Xb(22,"mat-hint",35),c.Rc(23,"Please press 'Enter' after the name"),c.Wb(),c.Wb(),c.Xb(24,"button",36),c.jc("click",(function(e){return c.Ic(t),c.nc().addMember(e)})),c.Rc(25,"Add"),c.Wb(),c.Wb(),c.Xb(26,"div",37),c.Pc(27,ct,2,1,"ul",38),c.Xb(28,"a",39),c.jc("click",(function(){return c.Ic(t),c.nc().openAllMembersModal()})),c.Rc(29," Show more "),c.Wb(),c.Wb(),c.Wb(),c.Xb(30,"div",16),c.Xb(31,"button",40),c.jc("click",(function(){c.Ic(t);const e=c.nc();return e.showMembersInput=!e.showMembersInput})),c.Xb(32,"mat-icon"),c.Rc(33,"people"),c.Wb(),c.Wb(),c.Pc(34,it,3,0,"div",41),c.Xb(35,"button",42),c.Sb(36,"i",43),c.Wb(),c.Xb(37,"mat-menu",null,44),c.Xb(39,"button",45),c.jc("click",(function(){c.Ic(t);const e=c.nc();return e.showMembersInput=!e.showMembersInput})),c.Rc(40," Add members "),c.Wb(),c.Pc(41,at,2,0,"button",46),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Xb(42,"div",47),c.Xb(43,"p"),c.Rc(44,"Please accept or decline joining to the "),c.Xb(45,"strong"),c.Rc(46),c.Wb(),c.Rc(47," group"),c.Wb(),c.Xb(48,"div",48),c.Xb(49,"button",49),c.jc("click",(function(){return c.Ic(t),c.nc().acceptGroupJoin()})),c.Rc(50,"Accept"),c.Wb(),c.Xb(51,"button",50),c.jc("click",(function(){return c.Ic(t),c.nc().declineGroupJoin()})),c.Rc(52,"Decline"),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Xb(53,"ul",51,52),c.Pc(55,ut,2,1,"ng-container",38),c.Wb(),c.Pc(56,ht,2,1,"small",53),c.Xb(57,"div",54),c.Xb(58,"form",55),c.Xb(59,"input",56),c.jc("keyup",(function(){return c.Ic(t),c.nc().setTyping()}))("focus",(function(){return c.Ic(t),c.nc().setSeen()}))("keyup.enter",(function(e){return c.Ic(t),c.nc().sendMessage(e)})),c.Wb(),c.Wb(),c.Xb(60,"div",57),c.Xb(61,"a",58),c.Sb(62,"img",59),c.Wb(),c.Xb(63,"a",58),c.Sb(64,"img",60),c.Wb(),c.Xb(65,"a",58),c.Sb(66,"img",61),c.Wb(),c.Wb(),c.Wb(),c.Wb()}if(2&t){const t=c.Ec(15),e=c.Ec(20),n=c.Ec(38),o=c.nc();c.Cb(2),c.uc("formGroup",o.groupChatDetailsForm)("hidden",!o.selectedGroup||!o.ifConfirmedToJoinTheGroup(o.selectedGroup)),c.Cb(4),c.uc("src",c.qc(7,25,null==o.selectedGroup?null:o.selectedGroup.avatar,"group_avatars"),c.Kc),c.Cb(2),c.uc("hidden",!0),c.Cb(2),c.Sc(null==o.selectedGroup?null:o.selectedGroup.name),c.Cb(2),c.uc("hidden",!o.showMembersInput),c.Cb(4),c.uc("ngForOf",o.inputGroupMembers),c.Cb(1),c.uc("formControl",o.memberCtrl)("matChipInputFor",t)("matChipInputSeparatorKeyCodes",o.separatorKeysCodes)("matAutocomplete",e),c.Cb(4),c.uc("ngForOf",o.filteredContacts),c.Cb(5),c.uc("hidden",o.showMembersInput),c.Cb(1),c.uc("ngIf",(null==o.groupMembers?null:o.groupMembers.length)>0),c.Cb(4),c.uc("disableRipple",!0),c.Cb(3),c.uc("ngIf",o.authUser.id===(null==o.selectedGroup?null:o.selectedGroup.creator_id)),c.Cb(1),c.uc("matMenuTriggerFor",n)("disableRipple",!0),c.Cb(6),c.uc("ngIf",o.authUser.id!==(null==o.selectedGroup?null:o.selectedGroup.creator_id)),c.Cb(1),c.uc("hidden",!o.selectedGroup||o.ifConfirmedToJoinTheGroup(o.selectedGroup)),c.Cb(4),c.Sc(o.selectedGroup.name),c.Cb(9),c.uc("ngIf",(null==o.selectedGroupMessages?null:o.selectedGroupMessages.length)>0),c.Cb(1),c.uc("ngIf",o.typingText.text),c.Cb(1),c.uc("hidden",!o.selectedGroup),c.Cb(1),c.uc("formGroup",o.chatForm)}}let bt=(()=>{class t{constructor(t,e,n,o,s,a,r,g){this.fb=t,this.chatService=e,this.usersService=n,this.socketService=o,this.subject=s,this.toastr=a,this.dialog=r,this.groupBy=g,this.showGroupChatForm=!1,this.showMembersInput=!1,this.userContacts=[],this.groupMembers=[],this.socketGroupsUsers=[],this.inputGroupMembers=[],this.filteredContacts=[],this.memberCtrl=new i.f,this.subscriptions=[],this.typingText={group:null,text:null},this.separatorKeysCodes=[Y.g,Y.c],this.groupRemoved=new c.o,this.selectedGroupMessages=[],this.selectedRawMessages=[],this.groupsMessages=[],this.haveGroupJoinInvitation=!1,this.subscriptions.push(this.memberCtrl.valueChanges.subscribe(t=>{t&&(this.filteredContacts=this.userContacts.filter(e=>{const n=(e.first_name+" "+e.last_name).toLowerCase();return!!n.includes(t)&&!this.groupMembers.find(t=>t.name.toLowerCase()===n)}))}))}ngOnInit(){this.initGroupChatForms(),this.initForm(),this.getGroupsMessages(),this.addUserToSocket(),this.getUserContacts(),this.getGroupJoinInvitation(),this.getChatNotifications(),this.getMessagesFromSocket(),this.getTyping(),this.getSeen()}initGroupChatForms(){this.groupChatForm=this.fb.group({creator_id:[this.authUser.id],name:["",i.x.required],username:[this.authUser.username]}),this.groupChatDetailsForm=this.fb.group({group_id:[""],member_ids:["",i.x.required]})}initForm(){var t,e;this.chatForm=this.fb.group({from:[this.authUser.username],from_id:[this.authUser.id],group_id:[null===(t=this.selectedGroup)||void 0===t?void 0:t.id],avatar:[null===(e=this.authUser)||void 0===e?void 0:e.avatar],from_user:[this.authUser],to_id:[null],to_user:[null],to_group:[this.selectedGroup],message:["",i.x.required],personal:[1]})}addUserToSocket(){this.socketService.addNewUser(Object.assign(Object.assign({},this.authUser),{group:!0}))}getUserContacts(){this.subscriptions.push(this.usersService.getUserContacts({user_id:this.authUser.id,blocked:0}).subscribe(t=>{this.userContacts=t}))}getGroupsMessages(t=null){this.subscriptions.push(this.chatService.getGroupsMessages({user_id:this.authUser.id,blocked:0}).subscribe(e=>{var n,o;this.groupsMessages=e,this.selectedGroup=e.find(e=>e.name===t)||e[0],console.log(this.selectedGroup),this.selectedGroupMessages=this.groupBy.transform(null===(n=this.selectedGroup)||void 0===n?void 0:n.chat_group_messages,"created_at"),console.log(this.selectedGroupMessages),this.selectedGroup&&(this.groupChatDetailsForm.patchValue({group_id:this.selectedGroup.id}),this.chatForm.patchValue({group_id:this.selectedGroup.id}),this.groupMembers=null===(o=this.selectedGroup)||void 0===o?void 0:o.chat_group_members,console.log(this.groupMembers))}))}makeGroupActive(t){this.selectedGroup=t,this.groupChatDetailsForm.patchValue({group_id:this.selectedGroup.id}),this.chatForm.patchValue({group_id:this.selectedGroup.id}),this.selectedGroupMessages=this.groupBy.transform(t.chat_group_messages,"created_at"),this.typingText.group=t,this.getTypingTextStatus({group:t.name,message:""}),this.getGroupMembers()}addGroup(){this.groupChatForm.valid&&this.subscriptions.push(this.chatService.addGroup(this.groupChatForm.value).subscribe(t=>{this.selectedGroup=t.find(t=>this.groupChatForm.value.name===t.name),this.getGroupsMessages(this.selectedGroup),this.socketService.setNewGroup(this.groupChatForm.value),this.groupChatForm.patchValue({name:""})}))}changeAvatar(t){const e=t.target.files[0],n=new FormData;n.append("avatar",e.name),n.append("group_id",this.selectedGroup.id),n.append("member_id",this.authUser.id),n.append("group_avatar_file",e),this.subscriptions.push(this.chatService.changeGroupAvatar(n).subscribe(t=>{this.groupsMessages=t,this.selectedGroup=this.groupsMessages.find(t=>this.selectedGroup.id===t.id)}))}removeInputMember(t){const e=this.inputGroupMembers.indexOf(t);e>=0&&(this.inputGroupMembers.splice(e,1),this.groupChatDetailsForm.patchValue({member_ids:this.inputGroupMembers}))}removeSavedMember(t){this.subscriptions.push(this.dialog.open(N.a).afterClosed().subscribe(e=>{e&&this.chatService.removeGroupMember({group_id:this.selectedGroup.id,member_id:t}).subscribe(t=>{this.groupMembers=null==t?void 0:t.chat_group_members})}))}removeGroup(){this.subscriptions.push(this.dialog.open(N.a).afterClosed().subscribe(t=>{t&&this.chatService.removeGroup({group_id:this.selectedGroup.id}).subscribe(t=>{this.socketService.removeGroup({group:this.selectedGroup.name,username:this.authUser.username}),this.groupsMessages=t,this.selectedGroup=null})}))}autoCompleteMemberSelected(t){const e=t.option.value;this.inputGroupMembers.find(t=>t.id===e)||(this.inputGroupMembers.push(t.option.value),this.groupChatDetailsForm.patchValue({member_ids:this.inputGroupMembers})),this.chipsInput.nativeElement.value="",this.memberCtrl.setValue("")}addMember(t){this.chipsInput.nativeElement.value="",this.memberCtrl.setValue(""),console.log(this.groupChatDetailsForm.value,this.selectedGroup),this.subscriptions.push(this.chatService.addGroupMembers(this.groupChatDetailsForm.value).subscribe(t=>{this.groupMembers=null==t?void 0:t.chat_group_members,this.socketService.inviteToNewGroup({members:this.inputGroupMembers,group_id:this.selectedGroup.id}),this.inputGroupMembers=[]}))}leaveGroup(){this.subscriptions.push(this.dialog.open(N.a).afterClosed().subscribe(t=>{t&&this.chatService.leaveGroup({member_id:this.authUser.id,group_id:this.selectedGroup.id}).subscribe(t=>{this.groupsMessages=t,this.socketService.leaveGroup({group:this.selectedGroup.name,username:this.authUser.username}),this.selectedGroup=null})}))}openAllMembersModal(){this.subscriptions.push(this.dialog.open(H,{width:"300px",height:"400px"}).afterClosed().subscribe(t=>{}))}ifConfirmedToJoinTheGroup(t){return null==t?void 0:t.chat_group_members.find(t=>t.id===this.authUser.id&&t.chat_groups_members.confirmed)}getGroupJoinInvitation(){this.socketService.inviteToGroupSent().subscribe(t=>{this.chatService.getChatGroups({user_id:this.authUser.id}).subscribe(e=>{this.groupsMessages=e,this.selectedGroup=this.groupsMessages.find(e=>t.group_id===e.id),this.haveGroupJoinInvitation=!0,console.log(this.selectedGroup)})})}acceptGroupJoin(){this.subscriptions.push(this.chatService.acceptGroupJoin({group_id:this.selectedGroup.id,member_id:this.authUser.id}).subscribe(t=>{this.groupsMessages=t,this.selectedGroup=this.groupsMessages.find(t=>this.selectedGroup.id===t.id),console.log(this.selectedGroup),this.haveGroupJoinInvitation=!1,this.socketService.acceptJoinToGroup({group:this.selectedGroup.name,username:this.authUser.username})}))}declineGroupJoin(){this.subscriptions.push(this.chatService.declineGroupJoin({group_id:this.selectedGroup.id,member_id:this.authUser.id}).subscribe(t=>{var e;this.groupsMessages=t,this.socketService.declineJoinToGroup({group:null===(e=this.selectedGroup)||void 0===e?void 0:e.name,username:this.authUser.username}),this.selectedGroup=this.groupsMessages.find(t=>this.selectedGroup.id===t.id)}))}getChatNotifications(){this.socketService.getChatNotifications().subscribe(t=>{var e,n;this.socketGroupsUsers=t.groupsUsers,t.groupRemoved?this.getGroupsMessages():t.groupCreated?(this.selectedGroup=this.groupsMessages.find(e=>e.name===t.group),this.selectedGroup&&(this.groupChatDetailsForm.patchValue({group_id:this.selectedGroup.id}),this.groupMembers=null===(e=this.selectedGroup)||void 0===e?void 0:e.chat_group_members)):t.joiningChat||(this.toastr.info(t.msg),(t.acceptingJoinGroup||t.decliningJoinGroup||t.leavingGroup)&&(this.selectedGroup=this.groupsMessages.find(e=>e.name===t.group),this.selectedGroup&&this.getGroupMembers()),this.groupMembers=null===(n=this.selectedGroup)||void 0===n?void 0:n.chat_group_members)})}getGroupMembers(){this.chatService.getGroupMembers({group_id:this.selectedGroup.id}).subscribe(t=>{this.groupMembers=null==t?void 0:t.chat_group_members})}getUserCurrentStatus(t){var e;const n=null===(e=this.groupsMessages.find(e=>{var n;return e.id===(null===(n=null==t?void 0:t.chat_groups_members)||void 0===n?void 0:n.group_id)}))||void 0===e?void 0:e.name;return!(!this.socketGroupsUsers||n!==this.selectedGroup.name||!this.socketGroupsUsers.find(e=>e.group===n&&t.username===e.username))}getSocketRoomUsers(){this.socketService.acceptJoinToGroup({group:this.selectedGroup.name,username:this.authUser.username})}sendMessage(t){if(this.chatForm.valid){const t=Object.assign(Object.assign({},this.chatForm.value),{group:this.selectedGroup.name});this.chatService.saveMessage(t).subscribe(e=>{this.socketService.sendMessage(t),this.scrollMsgsToBottom()}),this.chatForm.patchValue({message:""})}}scrollMsgsToBottom(){try{this.messagesList.nativeElement.scrollTop=this.messagesList.nativeElement.scrollHeight}catch(t){console.log(t)}}getGroupMessages(){var t;this.subscriptions.push(this.chatService.getGroupChatMessages({group_id:null===(t=this.selectedGroup)||void 0===t?void 0:t.id,group:1}).subscribe(t=>{this.selectedRawMessages=t,this.selectedGroupMessages=this.groupBy.transform(t,"created_at")}))}getMessagesFromSocket(){this.socketService.onNewMessage().subscribe(t=>{t.group&&(console.log("new message group chat!!!"),this.getGroupsMessages(this.selectedGroup.name),this.typingText={group:null,text:null})})}getMessageClass(t){return t.id===this.authUser.id?"my-message":"other-message"}getSeen(){this.socketService.getSeen().subscribe(t=>{console.log("get seen",t),console.log(this.selectedGroup),this.getGroupsMessages(this.selectedGroup.name)})}setSeen(){var t;const e=null===(t=this.selectedGroup)||void 0===t?void 0:t.chat_group_messages,n=e[e.length-1],o=(null==n?void 0:n.from_id)===this.authUser.id;console.log("set seen"),console.log(o),console.log(n),console.log(this.selectedGroup),this.scrollMsgsToBottom(),o||this.socketService.setSeen({message_id:null==n?void 0:n.id,from_id:this.chatForm.value.from_id,to_id:this.chatForm.value.to_id,from_user:this.chatForm.value.from_user,group:this.selectedGroup.name,group_id:this.selectedGroup.id,seen:1,seen_at:m().format("YYYY-MM-DD, h:mm:ss a")})}getTyping(){this.socketService.getTyping().subscribe(t=>{var e;console.log(t.group,null===(e=this.selectedGroup)||void 0===e?void 0:e.name),this.getTypingTextStatus(t)})}setTyping(){this.socketService.setTyping({from_user:this.chatForm.value.from_user,group:this.selectedGroup.name,message:this.chatForm.value.message})}getTypingTextStatus(t){var e,n;const o=(null===(e=t.from_user)||void 0===e?void 0:e.id)!==this.authUser.id&&t.group===this.selectedGroup.name&&t.message;this.typingText={group:o?(null===(n=this.selectedGroup)||void 0===n?void 0:n.name)===t.group:null,text:o?t.from_user.username+" is typing...":null}}isChatUsersListSize(){return d.a.isChatUsersListSize()}isSeenByAuthUser(t){return t.filter(t=>{let e=!1;return t.from_id!==this.authUser.id&&(e=!t.seen_by.find(t=>t.id===this.authUser.id)),e}).length}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(c.Rb(i.e),c.Rb(r.a),c.Rb(C.a),c.Rb(p.a),c.Rb(u.a),c.Rb(A.b),c.Rb(J.b),c.Rb(h.a))},t.\u0275cmp=c.Lb({type:t,selectors:[["app-group-chat"]],viewQuery:function(t,e){var n;1&t&&(c.Wc(Q,!0),c.Wc(Z,!0)),2&t&&(c.Dc(n=c.kc())&&(e.chipsInput=n.first),c.Dc(n=c.kc())&&(e.messagesList=n.first))},inputs:{authUser:"authUser"},outputs:{groupRemoved:"groupRemoved"},decls:17,vars:8,consts:[[1,"chat-wrap"],[1,"people-groups-container",3,"hidden"],["id","groups-list",1,"list-wrap"],[1,"create-group-chat",3,"hidden","click"],["src","assets/img/noun_create.png","alt",""],["id","group-chat-form",3,"formGroup","hidden"],["formControlName","name","placeholder","Group name"],["mat-icon-button","",3,"click"],[1,"list"],["class","list-chat-group",3,"active","unconfirmed","click",4,"ngFor","ngForOf"],["class","chat",4,"ngIf"],[1,"list-chat-group",3,"click"],[1,"left"],[1,"img",3,"src"],[1,"text"],[1,"name"],[1,"right"],[1,"seen-circle",3,"hidden"],[1,"chat"],[1,"chat-top"],[3,"formGroup","hidden"],[1,"chat-about"],["for","group-avatar-input"],["id","group-avatar-input","type","file",3,"hidden","change"],[1,"group-name"],[1,"center"],[1,"member-add",3,"hidden"],["aria-label","Fruit selection","formControlName","member_ids"],["tagList",""],[3,"removed",4,"ngFor","ngForOf"],["type","text","placeholder","Member name from your contacts","matInput","","maxlength","10",3,"formControl","matChipInputFor","matChipInputSeparatorKeyCodes","matAutocomplete"],["chipsInput",""],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["align","end"],[3,"click"],[1,"members-list",3,"hidden"],[4,"ngIf"],["id","show-more-members",3,"click"],["mat-icon-button","",3,"disableRipple","click"],["class","remove",3,"click",4,"ngIf"],["mat-icon-button","",1,"dotes",3,"matMenuTriggerFor","disableRipple"],[1,"fas","fa-ellipsis-v"],["menu","matMenu"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"click",4,"ngIf"],[1,"confirm-joining-group",3,"hidden"],[1,"actions"],[1,"accept-btn",3,"click"],[1,"decline-btn",3,"click"],["id","group-messages",1,"chat-history"],["groupMessagesList",""],["class","text-center font-italic d-block",4,"ngIf"],[1,"chat-message",3,"hidden"],[1,"chat-form",3,"formGroup"],["formControlName","message","placeholder","Type your message",1,"flex-1","mx-3",3,"keyup","focus","keyup.enter"],[1,"icons"],["href",""],["src","assets/img/gif-24px.svg","alt",""],["src","assets/img/mood-24px.svg","alt",""],["src","assets/img/send-24px.svg","alt",""],[3,"removed"],["matChipRemove",""],[3,"value"],["class","group-member",3,"pending",4,"ngFor","ngForOf"],[1,"group-member"],[1,"avatar",3,"matTooltip","src"],[3,"click",4,"ngIf"],[1,"status",3,"ngClass"],[1,"remove",3,"click"],[1,"fas","fa-trash"],[4,"ngFor","ngForOf"],[1,"data-list"],[1,"message-container",3,"ngClass"],[1,"message-data","mb-0","pl-0","d-flex","justify-content-between","align-items-center"],[1,"d-flex","align-items-center"],[1,"img"],[1,"avatar",3,"src"],[1,"date"],[1,"message"],[1,"seen"],[1,"seen-avatar",3,"matTooltip","src"],[1,"text-center","font-italic","d-block"]],template:function(t,e){1&t&&(c.Xb(0,"div",0),c.Xb(1,"div",1),c.Xb(2,"div",2),c.Xb(3,"button",3),c.jc("click",(function(){return e.showGroupChatForm=!0})),c.Sb(4,"img",4),c.Rc(5," Create new group chat "),c.Wb(),c.Xb(6,"form",5),c.Sb(7,"input",6),c.Xb(8,"button",7),c.jc("click",(function(){return e.addGroup()})),c.Xb(9,"mat-icon"),c.Rc(10,"done"),c.Wb(),c.Wb(),c.Xb(11,"button",7),c.jc("click",(function(){return e.showGroupChatForm=!1})),c.Xb(12,"mat-icon"),c.Rc(13,"close"),c.Wb(),c.Wb(),c.Wb(),c.Xb(14,"ul",8),c.Pc(15,tt,13,12,"li",9),c.Wb(),c.Wb(),c.Wb(),c.Pc(16,lt,67,28,"div",10),c.Wb()),2&t&&(c.Cb(1),c.Hb("responsive-list",e.isChatUsersListSize()),c.uc("hidden",e.isChatUsersListSize()),c.Cb(2),c.uc("hidden",e.showGroupChatForm),c.Cb(3),c.uc("formGroup",e.groupChatForm)("hidden",!e.showGroupChatForm),c.Cb(9),c.uc("ngForOf",e.groupsMessages),c.Cb(1),c.uc("ngIf",e.selectedGroup))},directives:[i.z,i.q,i.i,i.c,i.p,i.h,P.a,M.a,o.m,o.n,V.c,q.c,K.b,q.b,$.c,i.l,i.g,$.a,V.f,_.c,_.d,_.a,q.a,q.d,E.n,O.a,o.l],pipes:[f.a,x.a,o.f],styles:[".chat-wrap[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;height:100vh}.chat-wrap[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;background-size:cover;background-position:50%;background-repeat:no-repeat}.chat-wrap[_ngcontent-%COMP%]   .people-groups-container[_ngcontent-%COMP%]{flex:0 0 316px;background:#f5f5f5}.chat-wrap[_ngcontent-%COMP%]   .people-groups-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.chat-wrap[_ngcontent-%COMP%]   .people-groups-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.chat-wrap[_ngcontent-%COMP%]   .people-groups-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#dcdcdc;border-radius:4px}.chat-wrap[_ngcontent-%COMP%]   .people-groups-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#aeaeae}.chat-wrap[_ngcontent-%COMP%]   .people-groups-container[_ngcontent-%COMP%]   .create-group-chat[_ngcontent-%COMP%]{padding:0 15px;margin:4px 0 16px;background:transparent;color:#18b587;font-size:16px;font-family:Muli-Bold}.chat-wrap[_ngcontent-%COMP%]   .people-groups-container[_ngcontent-%COMP%]   .create-group-chat[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;margin-right:2px}.chat-wrap[_ngcontent-%COMP%]   .people-groups-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{max-height:600px;overflow-x:auto}.chat-wrap[_ngcontent-%COMP%]   .people-groups-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:6px 10px;display:flex;border-left:5px solid transparent;cursor:pointer;transition:all .3s ease}.chat-wrap[_ngcontent-%COMP%]   .people-groups-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{border-left:5px solid #18b587;background:#fff}.chat-wrap[_ngcontent-%COMP%]   .people-groups-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%], .chat-wrap[_ngcontent-%COMP%]   .people-groups-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#18b587}.chat-wrap[_ngcontent-%COMP%]   .people-groups-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{border-left:5px solid #f53c6f;background:#fff}.chat-wrap[_ngcontent-%COMP%]   .people-groups-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover   .text[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%], .chat-wrap[_ngcontent-%COMP%]   .people-groups-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover   .text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#f53c6f}.chat-wrap[_ngcontent-%COMP%]   .people-groups-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{margin-right:22px}.chat-wrap[_ngcontent-%COMP%]   .people-groups-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{text-transform:capitalize;font-size:16px;font-weight:500;color:#545454}.chat-wrap[_ngcontent-%COMP%]   .people-groups-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-top:4px;display:block;font-size:14px;font-weight:300;color:#acacac}@media screen and (max-width:1029px){.chat-wrap[_ngcontent-%COMP%]   .people-groups-container[_ngcontent-%COMP%]{flex:1}}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]{margin-left:32px;flex:1;min-width:350px;margin-top:-50px}@media (max-width:1111px){.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]{margin-top:0;margin-left:0}}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#dcdcdc;border-radius:4px}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#aeaeae}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   .chat-about[_ngcontent-%COMP%]{justify-content:space-between;background:#f5f5f5;padding:12px 16px}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   .chat-about[_ngcontent-%COMP%], .chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   .chat-about[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{display:flex;align-items:center}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   .chat-about[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{margin-right:16px}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   .chat-about[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .group-name[_ngcontent-%COMP%]{color:#18b587;font-size:16px;font-weight:500;text-transform:capitalize}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   .chat-about[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{display:flex;align-items:center}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   .chat-about[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#f53c6f}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   .chat-about[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-left:16px}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]{overflow-x:auto;height:600px}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:32px;padding-right:48px}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   li.data-list[_ngcontent-%COMP%]{height:1px;margin:16px 0 32px;background:#c9c9c9;display:flex;align-items:center;justify-content:center}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   li.data-list[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;color:#c9c9c9;padding:0 32px;font-size:12px}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   li.my-message[_ngcontent-%COMP%]{padding-right:8px;margin-left:48px}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   li.my-message[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{background:#18b587;color:#fff}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   li.my-message[_ngcontent-%COMP%]   .message-data[_ngcontent-%COMP%]{justify-content:flex-end}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .message-data[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:16px;padding-left:16px}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .message-data[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{margin-right:16px}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .message-data[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{color:#545454;font-size:16px;font-weight:500;margin-right:16px}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .message-data[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{font-size:13px;font-weight:300;color:#545454}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{background:#f5f5f5;color:#545454;font-weight:500;font-size:14px;line-height:21px;padding:16px;font-family:Muli-Light}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .seen[_ngcontent-%COMP%]{text-align:right}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   .chat-history[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .seen[_ngcontent-%COMP%]   .seen-avatar[_ngcontent-%COMP%]{width:20px;height:20px;border-radius:20px}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   .chat-message[_ngcontent-%COMP%]{background:#f5f5f5;display:flex;justify-content:space-between}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   .chat-message[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{background:#f5f5f5}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   .chat-message[_ngcontent-%COMP%]   .chat-form[_ngcontent-%COMP%]{width:90%}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   .chat-message[_ngcontent-%COMP%]   .chat-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;background:transparent}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   .chat-message[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]{display:flex;align-items:center;padding-right:16px}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   .chat-message[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-left:12px}.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]   .chat-message[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:first-child{margin:0}@media screen and (max-width:1029px){.chat-wrap[_ngcontent-%COMP%]   .chat[_ngcontent-%COMP%]{margin-left:0;margin-top:24px;min-width:100%}}.responsive-list[_ngcontent-%COMP%]{flex:0 0 100%!important}.responsive-list[_ngcontent-%COMP%]   .more-btn[_ngcontent-%COMP%]{display:block}.my-message[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%], .my-message[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{display:none}.list-chat-group[_ngcontent-%COMP%]{display:flex}.list-chat-group[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{width:90%;display:flex}.list-chat-group[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{display:flex;justify-content:center;padding-top:15px}.list-chat-group.unconfirmed[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.3)!important}.chat-top[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background:#f5f5f5;padding:12px 16px}.chat-top[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%}.chat-top[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;margin-top:20px}.chat-top[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .accept-btn[_ngcontent-%COMP%]{background:#18b587;background-color:#18b587}.chat-top[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .accept-btn[_ngcontent-%COMP%], .chat-top[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .decline-btn[_ngcontent-%COMP%]{width:119px;height:36px;padding:15px 32px;color:#fff!important;font-size:16px;font-family:Muli-Light;display:flex;justify-content:center;align-items:center;transition:.3s ease-in-out}.chat-top[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .decline-btn[_ngcontent-%COMP%]{background:#18b587;background-color:#f53c6f}.center[_ngcontent-%COMP%]{width:50%;display:flex}.center[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:70%;padding:5px}.center[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]{display:flex;align-items:center}.center[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:horizontal;overflow:hidden}.center[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   #show-more-members[_ngcontent-%COMP%]{width:110px;color:#18b587;margin-left:10px}.center[_ngcontent-%COMP%]   .member-add[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%}.center[_ngcontent-%COMP%]   .member-add[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:119px;height:36px;padding:15px 32px;color:#fff!important;font-size:16px;font-family:Muli-Light;display:flex;justify-content:center;align-items:center;transition:.3s ease-in-out;background:#18b587;width:50px}#group-chat-form[_ngcontent-%COMP%]{display:flex;margin-bottom:10px}#group-chat-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:5px;margin-left:25px}#group-chat-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{font-size:14px;color:#c9c9c9;font-family:Muli-Light}#group-chat-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{font-size:14px;color:#c9c9c9;font-family:Muli-Light}.group-member[_ngcontent-%COMP%]{position:relative;width:42px;border-radius:42px;margin-left:5px}.group-member[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{position:absolute;width:14px;height:14px;border-radius:14px;top:28px;right:0;padding:0;line-height:0}.group-member[_ngcontent-%COMP%]   .status.offline[_ngcontent-%COMP%]{background-color:grey}.group-member[_ngcontent-%COMP%]   .status.online[_ngcontent-%COMP%]{background-color:#18b587}.group-member.pending[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.5)}.group-member.pending[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{opacity:.5}.group-member[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);margin-left:auto;margin-right:auto;display:none;cursor:pointer}.group-member[_ngcontent-%COMP%]:hover{background-color:rgba(0,0,0,.5)}.group-member[_ngcontent-%COMP%]:hover   mat-icon[_ngcontent-%COMP%]{display:block}.group-member[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{opacity:.5}.seen-circle[_ngcontent-%COMP%]{background-color:#f53c6f!important;color:#fff;width:20px;height:20px;border-radius:20px;font-size:12px}"]}),t})();function dt(t,e){if(1&t){const t=c.Yb();c.Xb(0,"app-direct-chat",6),c.jc("newMessagesCountReceived",(function(e){return c.Ic(t),c.nc(2).newMessagesCountInDirect=e})),c.Wb()}if(2&t){const t=c.nc(2);c.uc("authUser",t.authUser)}}function mt(t,e){if(1&t&&c.Sb(0,"app-group-chat",7),2&t){const t=c.nc(2);c.uc("authUser",t.authUser)}}function Ct(t,e){if(1&t){const t=c.Yb();c.Xb(0,"div"),c.Xb(1,"div",1),c.Xb(2,"button",2),c.jc("click",(function(){return c.Ic(t),c.nc().changeTab("direct")})),c.Rc(3,"Chat "),c.Wb(),c.Xb(4,"button",3),c.jc("click",(function(){return c.Ic(t),c.nc().changeTab("group")})),c.Rc(5,"Group Chat "),c.Wb(),c.Wb(),c.Pc(6,dt,1,1,"app-direct-chat",4),c.Pc(7,mt,1,1,"app-group-chat",5),c.Wb()}if(2&t){const t=c.nc();c.Cb(2),c.Hb("active","direct"==t.activeTab),c.uc("matBadge",t.newMessagesCountInDirect.toString())("matBadgeHidden","direct"===t.activeTab||0===t.newMessagesCountInDirect),c.Cb(2),c.Hb("active","group"===t.activeTab),c.uc("matBadge",t.newMessagesCountInGroups.toString())("matBadgeHidden","group"===t.activeTab||0===t.newMessagesCountInGroups),c.Cb(2),c.uc("ngIf","direct"===t.activeTab&&t.authUser),c.Cb(1),c.uc("ngIf","group"==t.activeTab&&t.authUser)}}const Mt=[{path:"rooms",component:a,data:{title:"Chat rooms"}},{path:"messages",component:(()=>{class t{constructor(t,e,n,o,s,c){this.chatService=t,this.getAuthUser=e,this.socketService=n,this.subject=o,this.datePipe=s,this.groupBy=c,this.activeTab="direct",this.groupsMessages=[],this.groupsLoaded=!1,this.subscriptions=[],this.newMessagesCountInGroups=0,this.newMessagesCountInDirect=0}ngOnInit(){this.authUser=this.getAuthUser.transform(),this.getGroupsMessages()}changeTab(t){this.activeTab=t}getGroupsMessages(){this.subscriptions.push(this.chatService.getGroupsMessages({user_id:this.authUser.id,blocked:0}).subscribe(t=>{this.groupsMessages=t,this.groupsLoaded=!0;const e=t.filter(t=>t.new_messages_count>0);console.log(e),this.newMessagesCountInGroups=e.length,this.subject.setNewMessagesSourceData({source:e,type:"group"})}))}}return t.\u0275fac=function(e){return new(e||t)(c.Rb(r.a),c.Rb(g.a),c.Rb(p.a),c.Rb(u.a),c.Rb(o.f),c.Rb(h.a))},t.\u0275cmp=c.Lb({type:t,selectors:[["app-show-messages"]],decls:2,vars:1,consts:[[4,"ngIf"],[1,"tab-wrap"],["matBadgePosition","before",1,"tab","direct-tab",3,"matBadge","matBadgeHidden","click"],[1,"tab","group-tab",3,"matBadge","matBadgeHidden","click"],[3,"authUser","newMessagesCountReceived",4,"ngIf"],[3,"authUser",4,"ngIf"],[3,"authUser","newMessagesCountReceived"],[3,"authUser"]],template:function(t,e){1&t&&(c.Sb(0,"app-user-tags"),c.Pc(1,Ct,8,10,"div",0)),2&t&&(c.Cb(1),c.uc("ngIf",e.authUser))},directives:[l.a,o.n,b.a,D,bt],styles:[".categories[_ngcontent-%COMP%]{display:flex;padding-bottom:10px;flex-wrap:wrap;border-bottom:.5px solid #e2e2e2;margin-bottom:24px}.categories[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-right:2px;margin-bottom:8px;width:-webkit-max-content;width:-moz-max-content;width:max-content}.categories[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{height:22px;border-radius:11px;padding:2px 11px;display:flex;justify-content:center;align-items:center;background:#eee;transition:.3s ease-in-out;color:#545454!important;font-size:14px;font-family:Muli-Regular;cursor:pointer}.categories[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%], .categories[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:#f53c6f;color:#fff!important;cursor:pointer}.categories.border-none[_ngcontent-%COMP%]{border:0;margin:0}.direct-tab[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{z-index:300;left:0}.tab-wrap[_ngcontent-%COMP%]{display:flex;padding-bottom:16px;width:100%;max-width:317px;background-color:#f5f5f5}.tab-wrap[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]{flex:1;padding:6px 16px;font-size:16px;font-weight:500;background:#c9c9c9;color:#fff;text-align:left;transition:all .3s ease}.tab-wrap[_ngcontent-%COMP%]   .tab.active[_ngcontent-%COMP%]{background:#f53c6f}.tab-wrap[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:not(.active):hover{background:#18b587;color:#fff}@media (max-width:1111px){.tab-wrap[_ngcontent-%COMP%]{max-width:100%;padding-bottom:0}}"]}),t})(),data:{title:"Chat"}}];let _t=(()=>{class t{}return t.\u0275mod=c.Pb({type:t}),t.\u0275inj=c.Ob({factory:function(e){return new(e||t)},imports:[[s.f.forChild(Mt)],s.f]}),t})();var Pt=n("PCNd");let Ot=(()=>{class t{}return t.\u0275mod=c.Pb({type:t}),t.\u0275inj=c.Ob({factory:function(e){return new(e||t)},imports:[[o.c,_t,Pt.a]]}),t})()}}]);