(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"55j5":function(e,n,i){"use strict";i.r(n),i.d(n,"ChannelsModule",(function(){return Q}));var t=i("ofXK"),s=i("tyNb"),c=i("9xOu"),a=i("fXoL"),r=i("FFj9"),o=i("Rnal"),b=i("tk/3");let l=(()=>{class e{constructor(e){this.httpClient=e}changeProfileImage(e){return this.httpClient.post(c.b+"users/change-profile-image",e)}changeCoverImage(e){return this.httpClient.post(c.b+"users/change-cover-image",e)}getUserInfo(e){return this.httpClient.get(c.b+"users/get-user-info",{params:e})}}return e.\u0275fac=function(n){return new(n||e)(a.fc(b.b))},e.\u0275prov=a.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var u=i("1m4N"),h=i("hKYS"),f=i("kUS0"),g=i("bhfF");function m(e,n){if(1&e){const e=a.Yb();a.Xb(0,"div",22),a.Xb(1,"input",23),a.jc("change",(function(n){return a.Gc(e),a.nc(2).coverChangeEvent(n)})),a.Wb(),a.Xb(2,"ngx-photo-editor",24),a.jc("imageCropped",(function(n){return a.Gc(e),a.nc(2).coverCropped(n)})),a.Wb(),a.Wb()}if(2&e){const e=a.nc(2);a.sc("hidden",!0),a.Cb(2),a.sc("imageChanedEvent",e.coverChangedEvent)("autoCrop",!1)("viewMode",3)}}function p(e,n){if(1&e&&a.Sb(0,"img",25),2&e){const e=a.nc(2);a.sc("src",e.apiUrl+"uploads/avatars/"+e.channelUser.avatar,a.Ic)}}function d(e,n){1&e&&a.Sb(0,"img",26),2&e&&a.sc("src","assets/img/default-user.png",a.Ic)}function v(e,n){if(1&e){const e=a.Yb();a.Xb(0,"div",22),a.Xb(1,"input",27),a.jc("change",(function(n){return a.Gc(e),a.nc(2).profileChangeEvent(n)})),a.Wb(),a.Xb(2,"ngx-photo-editor",28),a.jc("imageCropped",(function(n){return a.Gc(e),a.nc(2).profileCropped(n)})),a.Wb(),a.Wb()}if(2&e){const e=a.nc(2);a.sc("hidden",!0),a.Cb(2),a.sc("imageChanedEvent",e.profileChangedEvent)("aspectRatio",4/3)("viewMode",1)("resizeToWidth",500)}}function C(e,n){1&e&&(a.Xb(0,"div",8),a.Sb(1,"i",29),a.Xb(2,"a",30),a.Pc(3,"Subscribe"),a.Wb(),a.Wb())}function U(e,n){if(1&e){const e=a.Yb();a.Xb(0,"li",31),a.Xb(1,"a",32),a.jc("click",(function(){a.Gc(e);const i=n.$implicit;return a.nc(2).changeActiveTab(i)})),a.Pc(2),a.Wb(),a.Wb()}if(2&e){const e=n.$implicit,i=a.nc(2);a.Cb(1),a.Hb("active",e===i.activeTab),a.uc("id","",e.link,"-tab"),a.uc("href","#",e.link,"",a.Ic),a.Cb(1),a.Qc(e.name)}}function I(e,n){if(1&e&&a.Sb(0,"img",44),2&e){const e=a.nc(2).$implicit,n=a.nc(5);a.sc("src",n.apiUrl+"uploads/thumbnails/"+e.thumbnail,a.Ic)}}function W(e,n){1&e&&a.Sb(0,"img",44),2&e&&a.sc("src","assets/img/video-thumbnail-default.png",a.Ic)}function X(e,n){1&e&&(a.Xb(0,"span",45),a.Pc(1,"Live now"),a.Wb())}function w(e,n){if(1&e&&a.Sb(0,"img",46),2&e){const e=a.nc(4).$implicit,n=a.nc(3);a.sc("src",n.apiUrl+"uploads/avatars/"+e.avatar,a.Ic)}}function N(e,n){1&e&&a.Sb(0,"img",46),2&e&&a.sc("src","assets/img/default-user.png",a.Ic)}function S(e,n){if(1&e){const e=a.Yb();a.Xb(0,"div",37),a.jc("click",(function(){a.Gc(e);const n=a.nc().$implicit,i=a.nc(2).$implicit;return a.nc(3).openVideoPage(n,i.username)})),a.Nc(1,I,1,1,"img",38),a.Nc(2,W,1,1,"img",38),a.Nc(3,X,2,0,"span",39),a.Xb(4,"div",40),a.Nc(5,w,1,1,"img",41),a.Nc(6,N,1,1,"img",41),a.Xb(7,"div"),a.Xb(8,"p",12),a.Pc(9),a.Wb(),a.Xb(10,"p",42),a.Pc(11),a.Wb(),a.Xb(12,"p",43),a.Pc(13,"17k watching"),a.Wb(),a.Wb(),a.Wb(),a.Wb()}if(2&e){const e=a.nc().$implicit,n=a.nc(2).$implicit;a.Cb(1),a.sc("ngIf",e.thumbnail),a.Cb(1),a.sc("ngIf",!e.thumbnail),a.Cb(1),a.sc("ngIf","live"===e.status),a.Cb(2),a.sc("ngIf",n.avatar),a.Cb(1),a.sc("ngIf",!n.avatar),a.Cb(3),a.Qc(e.name),a.Cb(2),a.Qc(n.full_name)}}function P(e,n){1&e&&(a.Vb(0),a.Nc(1,S,14,7,"ng-template",36),a.Ub())}function k(e,n){if(1&e&&(a.Vb(0),a.Xb(1,"p",34),a.Pc(2),a.Wb(),a.Xb(3,"owl-carousel-o",35),a.Nc(4,P,2,0,"ng-container",33),a.Wb(),a.Ub()),2&e){const e=a.nc().$implicit,n=a.nc(3);a.Cb(2),a.Qc(e.full_name),a.Cb(1),a.sc("options",n.owlOptions),a.Cb(1),a.sc("ngForOf",e.videos)}}function V(e,n){if(1&e&&(a.Vb(0),a.Nc(1,k,5,3,"ng-container",1),a.Ub()),2&e){const e=n.$implicit;a.Cb(1),a.sc("ngIf",e.videos.length>0)}}function F(e,n){if(1&e&&(a.Vb(0),a.Nc(1,V,2,1,"ng-container",33),a.Ub()),2&e){const e=a.nc(2);a.Cb(1),a.sc("ngForOf",e.watchlistVideos)}}function y(e,n){1&e&&a.Sb(0,"img",48)}function T(e,n){if(1&e&&a.Sb(0,"img",44),2&e){const e=a.nc(2).$implicit,n=a.nc(3);a.tc("src",n.apiUrl+"uploads/thumbnails/"+e.thumbnail,a.Ic)}}function $(e,n){if(1&e&&a.Sb(0,"img",46),2&e){const e=a.nc(5);a.sc("src",e.apiUrl+"uploads/avatars/"+e.authUser.avatar,a.Ic)}}function O(e,n){1&e&&a.Sb(0,"img",46),2&e&&a.sc("src","assets/img/default-user.png",a.Ic)}function j(e,n){if(1&e){const e=a.Yb();a.Xb(0,"div",37),a.jc("click",(function(){a.Gc(e);const n=a.nc().$implicit,i=a.nc(3);return i.openVideoPage(n,i.authUser.username)})),a.Nc(1,y,1,0,"img",47),a.Nc(2,T,1,1,"img",38),a.Xb(3,"div",40),a.Nc(4,$,1,1,"img",41),a.Nc(5,O,1,1,"img",41),a.Xb(6,"div"),a.Xb(7,"p",12),a.Pc(8),a.Wb(),a.Xb(9,"p",42),a.Pc(10),a.Wb(),a.Xb(11,"p",43),a.Pc(12,"17k watching"),a.Wb(),a.Wb(),a.Wb(),a.Wb()}if(2&e){const e=a.nc().$implicit,n=a.nc(3);a.Cb(1),a.sc("ngIf",!e.thumbnail||"undefined"===e.thumbnail),a.Cb(1),a.sc("ngIf",e.thumbnail&&"undefined"!==e.thumbnail),a.Cb(2),a.sc("ngIf",n.authUser.avatar),a.Cb(1),a.sc("ngIf",!n.authUser.avatar),a.Cb(3),a.Qc(e.name),a.Cb(2),a.Qc(n.authUser.full_name)}}function E(e,n){1&e&&(a.Vb(0),a.Nc(1,j,13,6,"ng-template",36),a.Ub())}function x(e,n){if(1&e&&(a.Vb(0),a.Xb(1,"p",34),a.Pc(2,"Recent videos"),a.Wb(),a.Xb(3,"owl-carousel-o"),a.Nc(4,E,2,0,"ng-container",33),a.Wb(),a.Ub()),2&e){const e=a.nc(2);a.Cb(4),a.sc("ngForOf",e.currentUser.videos)}}function _(e,n){if(1&e&&(a.Vb(0),a.Xb(1,"div",3),a.Nc(2,m,3,4,"div",4),a.Xb(3,"label",5),a.Sb(4,"img",6),a.Wb(),a.Wb(),a.Xb(5,"div",7),a.Xb(6,"div",8),a.Xb(7,"label",9),a.Nc(8,p,1,1,"img",10),a.Nc(9,d,1,1,"img",11),a.Wb(),a.Nc(10,v,3,5,"div",4),a.Xb(11,"div"),a.Xb(12,"p",12),a.Pc(13),a.Wb(),a.Xb(14,"p",13),a.Pc(15,"83,7 subscribers"),a.Wb(),a.Wb(),a.Wb(),a.Nc(16,C,4,0,"div",14),a.Wb(),a.Xb(17,"div",15),a.Xb(18,"div",16),a.Xb(19,"ul",17),a.Nc(20,U,3,5,"li",18),a.Wb(),a.Xb(21,"div",19),a.Sb(22,"input",20),a.Sb(23,"i",21),a.Wb(),a.Wb(),a.Nc(24,F,2,1,"ng-container",1),a.Nc(25,x,5,1,"ng-container",1),a.Wb(),a.Ub()),2&e){const e=a.nc();a.Cb(2),a.sc("ngIf",e.channelUser.username===e.authUser.username),a.Cb(2),a.sc("src",e.channelUser.cover?e.apiUrl+"uploads/covers/"+e.channelUser.cover:"assets/img/default-thumbnail.png",a.Ic),a.Cb(4),a.sc("ngIf",e.channelUser.avatar),a.Cb(1),a.sc("ngIf",!e.channelUser.avatar),a.Cb(1),a.sc("ngIf",e.channelUser.username===e.authUser.username),a.Cb(3),a.Qc(e.channelUser.channel.name),a.Cb(3),a.sc("ngIf",e.channelUser.username!==e.authUser.username),a.Cb(4),a.sc("ngForOf",e.allTabs),a.Cb(4),a.sc("ngIf","Watchlist"===e.activeTab.name),a.Cb(1),a.sc("ngIf","Videos"===e.activeTab.name)}}function A(e,n){1&e&&(a.Xb(0,"div",49),a.Xb(1,"p"),a.Pc(2,"Channel with such name is not found"),a.Wb(),a.Wb())}const R=[{path:"show",component:(()=>{class e{constructor(e,n,i,t,s,a){this.videoService=e,this.getAuthUser=n,this.router=i,this.usersService=t,this.base64ToFile=s,this.route=a,this.owlOptions=c.d,this.owlTextsArray=[{name:"David Blaine Ascension"},{name:"All Videos"},{name:"Lorem ipsum"},{name:"Lorem ipsum"}],this.watchlistVideos=[],this.activeTab=c.e[0],this.allTabs=c.e,this.apiUrl=c.b,this.authUser=this.getAuthUser.transform(),this.passedUsername=this.route.snapshot.queryParams.username}ngOnInit(){this.passedUsername&&this.usersService.getUserInfo({username:this.passedUsername}).subscribe(e=>{this.channelUser=e,console.log(this.channelUser.username,this.authUser.username)}),this.videoService.getUserVideos({user_id:this.authUser.id}).subscribe(e=>{this.currentUser=e}),this.videoService.getVideosByAuthor({}).subscribe(e=>{this.watchlistVideos=e})}changeActiveTab(e){this.activeTab=e}openVideoPage(e,n){let i,t;console.log(n),"live"===e.status?(i="user/video/watch",t={session:e.session_name,publisher:n}):(i="videos/play",t={id:e.id}),this.router.navigate([i],{queryParams:t})}coverChangeEvent(e){this.coverChangedEvent=e}profileChangeEvent(e){this.profileChangedEvent=e}profileCropped(e){this.profileBase64=e.base64;const n=`profile_${Date.now()}.jpg`,i=new FormData;i.append("avatar_file",this.base64ToFile.transform(e.base64),n),i.append("avatar",n),i.append("id",this.authUser.id),this.usersService.changeProfileImage(i).subscribe(e=>{localStorage.setItem("token",e.token),this.authUser=this.getAuthUser.transform(),this.channelUser=this.authUser})}coverCropped(e){this.coverBase64=e.base64;const n=new FormData,i=`cover_${Date.now()}.jpg`;n.append("cover_file",this.base64ToFile.transform(e.base64),i),n.append("cover",i),n.append("id",this.authUser.id),this.usersService.changeCoverImage(n).subscribe(e=>{localStorage.setItem("token",e.token),this.authUser=this.getAuthUser.transform(),this.channelUser=this.authUser})}}return e.\u0275fac=function(n){return new(n||e)(a.Rb(r.a),a.Rb(o.a),a.Rb(s.c),a.Rb(l),a.Rb(u.a),a.Rb(s.a))},e.\u0275cmp=a.Lb({type:e,selectors:[["app-show-channel"]],decls:4,vars:2,consts:[[1,"profile-list"],[4,"ngIf"],["class","channel-not-found",4,"ngIf"],[1,"profile-block"],[3,"hidden",4,"ngIf"],["for","cover-image-input"],["id","cover-image",3,"src"],[1,"sub-block"],[1,"d-flex","align-items-center"],["for","profile-image-input"],["class","avatar list-img",3,"src",4,"ngIf"],["class","avatar","id","profile-image",3,"src",4,"ngIf"],[1,"main-text-1"],[1,"main-text-4"],["class","d-flex align-items-center",4,"ngIf"],[1,"watchlist","pWatchlist"],[1,"profile-list","user-profile-block"],["id","profileList","role","tablist",1,"nav","nav-tabs"],["class","nav-item",4,"ngFor","ngForOf"],[1,"watchlist-search"],["placeholder","Search",1,"watchlist-input"],[1,"fas","fa-search"],[3,"hidden"],["type","file","id","cover-image-input",3,"change"],[3,"imageChanedEvent","autoCrop","viewMode","imageCropped"],[1,"avatar","list-img",3,"src"],["id","profile-image",1,"avatar",3,"src"],["type","file","id","profile-image-input",3,"change"],[3,"imageChanedEvent","aspectRatio","viewMode","resizeToWidth","imageCropped"],[1,"sub-bell","fas","fa-bell"],[1,"subscribe-btn"],[1,"nav-item"],["data-toggle","tab","role","tab","aria-controls","pWatch","aria-selected","true",1,"nav-link",3,"id","href","click"],[4,"ngFor","ngForOf"],[1,"trending-text"],[3,"options"],["carouselSlide",""],[1,"item","main-carousel-item",3,"click"],["class","main-item-img",3,"src",4,"ngIf"],["class","live-now",4,"ngIf"],[1,"main-item-block"],["class","avatar",3,"src",4,"ngIf"],[1,"main-text-2"],[1,"main-text-3"],[1,"main-item-img",3,"src"],[1,"live-now"],[1,"avatar",3,"src"],["class","main-item-img","src","assets/img/video-thumbnail-default.png",4,"ngIf"],["src","assets/img/video-thumbnail-default.png",1,"main-item-img"],[1,"channel-not-found"]],template:function(e,n){1&e&&(a.Xb(0,"div",0),a.Sb(1,"app-categories"),a.Nc(2,_,26,10,"ng-container",1),a.Nc(3,A,3,0,"div",2),a.Wb()),2&e&&(a.Cb(2),a.sc("ngIf",n.channelUser),a.Cb(1),a.sc("ngIf",!n.channelUser))},directives:[h.a,t.m,t.l,f.a,g.a,g.c],styles:[".profile-block[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:100%}"]}),e})()}];let G=(()=>{class e{}return e.\u0275mod=a.Pb({type:e}),e.\u0275inj=a.Ob({factory:function(n){return new(n||e)},imports:[[s.d.forChild(R)],s.d]}),e})();var M=i("PCNd");let Q=(()=>{class e{}return e.\u0275mod=a.Pb({type:e}),e.\u0275inj=a.Ob({factory:function(n){return new(n||e)},imports:[[t.c,G,M.a,f.b]]}),e})()}}]);