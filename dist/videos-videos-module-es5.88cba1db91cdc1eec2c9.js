function _wrapRegExp(e,t){_wrapRegExp=function(e,t){return new a(e,void 0,t)};var n=_wrapNativeSuper(RegExp),i=RegExp.prototype,o=new WeakMap;function a(e,t,i){var a=n.call(this,e,t);return o.set(a,i||o.get(e)),a}function c(e,t){var n=o.get(t);return Object.keys(n).reduce((function(t,i){return t[i]=e[n[i]],t}),Object.create(null))}return _inherits(a,n),a.prototype.exec=function(e){var t=i.exec.call(this,e);return t&&(t.groups=c(t,this)),t},a.prototype[Symbol.replace]=function(e,t){if("string"==typeof t){var n=o.get(this);return i[Symbol.replace].call(this,e,t.replace(/\$<([^>]+)>/g,(function(e,t){return"$"+n[t]})))}if("function"==typeof t){var a=this;return i[Symbol.replace].call(this,e,(function(){var e=[];return e.push.apply(e,arguments),"object"!=typeof e[e.length-1]&&e.push(c(e,a)),t.apply(this,e)}))}return i[Symbol.replace].call(this,e,t)},_wrapRegExp.apply(this,arguments)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _wrapNativeSuper(e){var t="function"==typeof Map?new Map:void 0;return(_wrapNativeSuper=function(e){if(null===e||!_isNativeFunction(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return _construct(e,arguments,_getPrototypeOf(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(n,e)})(e)}function _construct(e,t,n){return(_construct=_isNativeReflectConstruct()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var o=new(Function.bind.apply(e,i));return n&&_setPrototypeOf(o,n.prototype),o}).apply(null,arguments)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _isNativeFunction(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{Jn5M:function(e,t,n){"use strict";n.r(t),n.d(t,"VideosModule",(function(){return Tt}));var i=n("ofXK"),o=n("tyNb"),a=n("9xOu"),c=n("fXoL"),s=n("FFj9"),r=n("wDcp"),l=n("HHsJ"),d=n("Rnal"),u=n("ZP/m"),m=n("NFeN"),p=n("86ia"),b=n("Xa2L"),h=n("mrSG"),g=n("JOq8"),v=n("wgiU"),f=n("wd/R"),C=n("fZdh"),y=n("yEwS");function _(e,t){1&e&&(c.Wb(0,"span",21),c.Lc(1,"Live now"),c.Vb())}function k(e,t){1&e&&(c.Wb(0,"div",22),c.Wb(1,"mat-icon"),c.Lc(2,"turned_in"),c.Vb(),c.Wb(3,"span"),c.Lc(4,"Saved"),c.Vb(),c.Vb())}function O(e,t){if(1&e){var n=c.Xb();c.Wb(0,"li",23),c.ec("click",(function(){c.Bc(n);var e=t.$implicit;return c.ic(2).getVideosByTag(e.name)})),c.Wb(1,"span"),c.Lc(2),c.Vb(),c.Vb()}if(2&e){var i=t.$implicit;c.Cb(2),c.Mc(i.name)}}function w(e,t){1&e&&(c.Wb(0,"div",24),c.Wb(1,"span",25),c.Lc(2,"New"),c.Vb(),c.Vb())}function P(e,t){if(1&e){var n=c.Xb();c.Wb(0,"div",2),c.Wb(1,"div",3),c.Wb(2,"img",4),c.ec("click",(function(){c.Bc(n);var e=t.$implicit;return c.ic().openVideoPage(e,e.user.username)})),c.jc(3,"getImgPath"),c.Vb(),c.Jc(4,_,2,0,"span",5),c.Wb(5,"span",6),c.Lc(6),c.Vb(),c.Vb(),c.Wb(7,"div",7),c.Wb(8,"h4",8),c.Lc(9),c.Vb(),c.Wb(10,"div",9),c.Wb(11,"div",10),c.Rb(12,"img",11),c.jc(13,"getImgPath"),c.Vb(),c.Wb(14,"span",12),c.Lc(15),c.Vb(),c.Wb(16,"span",13),c.Lc(17,"\xb7"),c.Vb(),c.Wb(18,"span",14),c.Lc(19),c.Vb(),c.Wb(20,"span",13),c.Lc(21,"\xb7"),c.Vb(),c.Wb(22,"span",15),c.Lc(23),c.jc(24,"dateFromNow"),c.Vb(),c.Vb(),c.Wb(25,"p",16),c.Lc(26),c.Vb(),c.Jc(27,k,5,0,"div",17),c.Wb(28,"div",18),c.Wb(29,"ul"),c.Jc(30,O,3,1,"li",19),c.Vb(),c.Vb(),c.Jc(31,w,3,0,"div",20),c.Vb(),c.Vb()}if(2&e){var i=t.$implicit,o=c.ic();c.Cb(2),c.pc("src",c.kc(3,13,i.thumbnail),c.Ec),c.Cb(2),c.pc("ngIf","live"===i.status),c.Cb(2),c.Mc(i.duration),c.Cb(3),c.Mc(i.name),c.Cb(3),c.pc("src",c.lc(13,15,i.channel.avatar,"avatars"),c.Ec),c.Cb(2),c.pc("routerLink","/channels/"+i.user.username),c.Cb(1),c.Nc(" ",i.user.channel.name," "),c.Cb(4),c.Nc(" ","live"===i.status?i.participants+" watching":i.views+" view"+(1===i.views?"":"s")," "),c.Cb(4),c.Mc(c.kc(24,18,i.created_at)),c.Cb(3),c.Nc(" ",i.description," "),c.Cb(1),c.pc("ngIf",o.checkIfSavedByCurrentUser(i)),c.Cb(3),c.pc("ngForOf",null==i?null:i.tags),c.Cb(1),c.pc("ngIf",o.checkIfNewVideo(i))}}var V,M=((V=function(){function e(t){_classCallCheck(this,e),this.router=t,this.trackByElement=v.a}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"openVideoPage",value:function(e,t){return Object(h.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=Object(g.a)(e,t),n.next=3,this.router.navigate([i.route],{queryParams:i.params});case 3:case"end":return n.stop()}}),n,this)})))}},{key:"checkIfSavedByCurrentUser",value:function(e){var t=this;return e.users_vids.find((function(e){var n;return e.username===(null===(n=t.authUser)||void 0===n?void 0:n.username)&&e.users_videos.saved}))}},{key:"checkIfNewVideo",value:function(e){var t=f.duration(f().diff(e.created_at));return Math.floor(t.asDays())<7}},{key:"getVideosByTag",value:function(e){return Object(h.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.router.navigate(["videos"],{queryParams:{tag:e}});case 2:case"end":return t.stop()}}),t,this)})))}}]),e}()).\u0275fac=function(e){return new(e||V)(c.Qb(o.e))},V.\u0275cmp=c.Kb({type:V,selectors:[["app-show-regular-list"]],inputs:{items:"items",authUser:"authUser"},decls:2,vars:2,consts:[["id","regular-video-list-container"],["class","video-container",4,"ngFor","ngForOf","ngForTrackBy"],[1,"video-container"],[1,"thumbnail"],[3,"src","click"],["class","live-now",4,"ngIf"],[1,"duration"],[1,"details"],[1,"title"],[1,"shortened-details"],[1,"user-avatar","avatarClass"],[1,"avatar",3,"src"],[1,"channel-name",3,"routerLink"],[1,"dot"],[1,"watchers-count"],[1,"upload-time"],[1,"shortened-description"],["class","saved-video",4,"ngIf"],[1,"tags"],[3,"click",4,"ngFor","ngForOf"],["class","is-new-video",4,"ngIf"],[1,"live-now"],[1,"saved-video"],[3,"click"],[1,"is-new-video"],[1,"new"]],template:function(e,t){1&e&&(c.Wb(0,"div",0),c.Jc(1,P,32,20,"div",1),c.Vb()),2&e&&(c.Cb(1),c.pc("ngForOf",t.items.videos)("ngForTrackBy",t.trackByElement))},directives:[i.l,i.m,o.f,m.a],pipes:[C.a,y.a],styles:["#regular-video-list-container[_ngcontent-%COMP%]   .shortened-description[_ngcontent-%COMP%]{-webkit-line-clamp:4}#regular-video-list-container[_ngcontent-%COMP%]   .is-new-video[_ngcontent-%COMP%]   .new[_ngcontent-%COMP%]{background-color:#18b587;color:#fff;padding:2px}@media (max-width:992px){#regular-video-list-container[_ngcontent-%COMP%]   .is-new-video[_ngcontent-%COMP%]{margin-bottom:10px}}#regular-video-list-container[_ngcontent-%COMP%]   .channel-name[_ngcontent-%COMP%]{cursor:pointer}.playlist-container[_ngcontent-%COMP%]{display:flex;margin-bottom:30px}.playlist-container[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]{position:relative}.playlist-container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{padding-left:32px;max-width:310px}@media screen and (max-width:1022px){.playlist-container[_ngcontent-%COMP%]{flex-direction:column}.playlist-container[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]{max-width:432px;width:100%}.playlist-container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{padding-left:0;margin-top:8px}}@media screen and (min-width:991px){.avatarClass[_ngcontent-%COMP%]{display:none}}"]}),V);function x(e,t){if(1&e){var n=c.Xb();c.Ub(0),c.Wb(1,"div",3),c.ec("click",(function(){c.Bc(n);var e=c.ic().$implicit;return c.ic().openPlaylistPage(e,e.videos[0].id)})),c.Wb(2,"div",4),c.Wb(3,"div",5),c.Wb(4,"mat-icon"),c.Lc(5,"playlist_add_check"),c.Vb(),c.Wb(6,"p",6),c.Lc(7),c.Vb(),c.Wb(8,"p",7),c.Lc(9),c.Vb(),c.Vb(),c.Rb(10,"img",8),c.jc(11,"getImgPath"),c.Vb(),c.Rb(12,"div",9),c.Vb(),c.Rb(13,"div",10),c.Tb()}if(2&e){var i=c.ic().$implicit;c.Cb(7),c.Mc(i.name),c.Cb(2),c.Mc(i.videos.length+(1===i.videos.length?" video":" videos")),c.Cb(1),c.pc("src",c.kc(11,3,i.thumbnail),c.Ec)}}function W(e,t){if(1&e&&(c.Wb(0,"div",1),c.Jc(1,x,14,5,"ng-container",2),c.Vb()),2&e){var n=t.$implicit;c.Cb(1),c.pc("ngIf",n.videos.length>0)}}var R,F=((R=function(){function e(t){_classCallCheck(this,e),this.router=t}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"openPlaylistPage",value:function(e,t){return Object(h.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i={id:t,playlist_id:e.id},n.next=3,this.router.navigate(["videos/play"],{queryParams:i});case 3:case"end":return n.stop()}}),n,this)})))}}]),e}()).\u0275fac=function(e){return new(e||R)(c.Qb(o.e))},R.\u0275cmp=c.Kb({type:R,selectors:[["app-show-playlists-list"]],inputs:{items:"items",authUser:"authUser"},decls:1,vars:1,consts:[["class","playlist-container",4,"ngFor","ngForOf"],[1,"playlist-container"],[4,"ngIf"],[1,"thumbnail-container",3,"click"],[1,"thumbnail"],[1,"short-details"],[1,"name"],[1,"video-count"],[3,"src"],[1,"fake-bg","thumbnail"],[1,"details"]],template:function(e,t){1&e&&c.Jc(0,W,2,1,"div",0),2&e&&c.pc("ngForOf",t.items.playlists)},directives:[i.l,i.m,m.a],pipes:[C.a],styles:[".playlist-container[_ngcontent-%COMP%]{width:432px;display:flex;margin-bottom:30px}.playlist-container[_ngcontent-%COMP%]   .thumbnail-container[_ngcontent-%COMP%]{position:relative;cursor:pointer}.playlist-container[_ngcontent-%COMP%]   .thumbnail-container[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]{position:relative}.playlist-container[_ngcontent-%COMP%]   .thumbnail-container[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]   .short-details[_ngcontent-%COMP%]{position:absolute;top:10px;left:10px;color:#fff}.playlist-container[_ngcontent-%COMP%]   .thumbnail-container[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]   .short-details[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-weight:700}.playlist-container[_ngcontent-%COMP%]   .thumbnail-container[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:400px;height:249px;-o-object-fit:cover;object-fit:cover;cursor:pointer}@media screen and (max-width:991px){.playlist-container[_ngcontent-%COMP%]   .thumbnail-container[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:432px!important;width:100%!important}}.playlist-container[_ngcontent-%COMP%]   .thumbnail-container[_ngcontent-%COMP%]   .fake-bg[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;top:0;background:rgba(1,1,1,.2)}"]}),R);function I(e,t){if(1&e){var n=c.Xb();c.Wb(0,"button",13),c.ec("click",(function(){c.Bc(n);var e=c.ic().$implicit;return c.ic().subscribeToChannel(e)})),c.Lc(1),c.Vb()}if(2&e){var i=c.ic().$implicit,o=c.ic();c.Gb("subscribed",o.checkIfSubscribed(i)),c.Cb(1),c.Nc("",o.checkIfSubscribed(i)?"Subscribed":"Subscribe"," ")}}function D(e,t){if(1&e&&(c.Wb(0,"li"),c.Wb(1,"span"),c.Lc(2),c.Vb(),c.Vb()),2&e){var n=t.$implicit;c.Cb(2),c.Mc(n.name)}}function U(e,t){if(1&e){var n=c.Xb();c.Wb(0,"div",14),c.Wb(1,"div",3),c.Wb(2,"img",15),c.ec("click",(function(){c.Bc(n);var e=t.$implicit,i=c.ic().$implicit;return c.ic().openVideoPage(e,i.user.username)})),c.jc(3,"getImgPath"),c.Vb(),c.Wb(4,"span",16),c.Lc(5),c.Vb(),c.Vb(),c.Wb(6,"div",17),c.Wb(7,"h4",18),c.Lc(8),c.Vb(),c.Wb(9,"div",8),c.Wb(10,"span",19),c.Lc(11),c.Vb(),c.Wb(12,"span",20),c.Lc(13,"\xb7"),c.Vb(),c.Wb(14,"span",21),c.Lc(15),c.Vb(),c.Wb(16,"span",20),c.Lc(17,"\xb7"),c.Vb(),c.Wb(18,"span",22),c.Lc(19),c.jc(20,"dateFromNow"),c.Vb(),c.Vb(),c.Rb(21,"p",23),c.Wb(22,"div",24),c.Wb(23,"ul"),c.Jc(24,D,3,1,"li",1),c.Vb(),c.Vb(),c.Vb(),c.Vb()}if(2&e){var i=t.$implicit,o=c.ic().$implicit;c.Cb(2),c.pc("src",c.kc(3,9,i.thumbnail),c.Ec),c.Cb(3),c.Mc(i.duration),c.Cb(3),c.Mc(i.name),c.Cb(2),c.pc("routerLink","/channels/"+o.user.username),c.Cb(1),c.Mc(o.name),c.Cb(4),c.Nc(" ","live"===i.status?"17k watching":i.views+" view"+(1===i.views?"":"s")," "),c.Cb(4),c.Mc(c.kc(20,11,i.created_at)),c.Cb(2),c.pc("innerHTML",i.description,c.Cc),c.Cb(3),c.pc("ngForOf",null==i?null:i.tags)}}function L(e,t){if(1&e){var n=c.Xb();c.Ub(0),c.Wb(1,"div",2),c.Wb(2,"div",3),c.Wb(3,"img",4),c.ec("click",(function(){c.Bc(n);var e=t.$implicit;return c.ic().openChannelPage(null==e.user?null:e.user.username)})),c.jc(4,"getImgPath"),c.Vb(),c.Vb(),c.Wb(5,"div",5),c.Wb(6,"div",6),c.Wb(7,"p",7),c.ec("click",(function(){c.Bc(n);var e=t.$implicit;return c.ic().openChannelPage(null==e||null==e.user?null:e.user.username)})),c.Lc(8),c.Vb(),c.Wb(9,"div",8),c.Wb(10,"p",9),c.Lc(11),c.Vb(),c.Vb(),c.Rb(12,"p",10),c.Vb(),c.Jc(13,I,2,3,"button",11),c.Vb(),c.Vb(),c.Jc(14,U,25,13,"div",12),c.Tb()}if(2&e){var i=t.$implicit,o=c.ic();c.Cb(3),c.pc("src",c.lc(4,6,i.avatar,"avatars"),c.Ec),c.Cb(5),c.Nc(" ",i.name," "),c.Cb(3),c.Nc(" ",i.videos.length+(1===i.videos.length?" video":" videos")," "),c.Cb(1),c.pc("innerHTML",o.getDesc(i.description),c.Cc),c.Cb(1),c.pc("ngIf",(null==i||null==i.user?null:i.user.username)!==(null==o.authUser?null:o.authUser.username)),c.Cb(1),c.pc("ngForOf",i.videos)}}var S,T=((S=function(){function e(t,n,i){_classCallCheck(this,e),this.router=t,this.subject=n,this.channelsService=i}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"openChannelPage",value:function(e){return Object(h.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.router.navigate(["channels/"+e]);case 2:case"end":return t.stop()}}),t,this)})))}},{key:"openVideoPage",value:function(e,t){return Object(h.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=Object(g.a)(e,t),n.next=3,this.router.navigate([i.route],{queryParams:i.params});case 3:case"end":return n.stop()}}),n,this)})))}},{key:"subscribeToChannel",value:function(e){var t=this;this.channelsService.subscribeToChannel({user_id:this.authUser.id,channel_id:e.id}).subscribe((function(n){t.channelsService.getUserChannelSubscriptions({user_id:t.authUser.id}).subscribe((function(n){t.subject.setUserSubscriptions(n),t.checkIfSubscribed(e)?e.subscribers=e.subscribers.filter((function(e){var n;return e.id!==(null===(n=t.authUser)||void 0===n?void 0:n.id)})):e.subscribers.push(t.authUser)}))}))}},{key:"checkIfSubscribed",value:function(e){var t=this;return e.subscribers.find((function(e){var n;return e.id===(null===(n=t.authUser)||void 0===n?void 0:n.id)}))}},{key:"getDesc",value:function(e){return null==e?void 0:e.replace(/<br\s*[\/]?>/gi,"\n")}}]),e}()).\u0275fac=function(e){return new(e||S)(c.Qb(o.e),c.Qb(r.a),c.Qb(l.a))},S.\u0275cmp=c.Kb({type:S,selectors:[["app-show-search-results"]],inputs:{channelsVideos:"channelsVideos",authUser:"authUser"},decls:2,vars:1,consts:[["id","search-results-container"],[4,"ngFor","ngForOf"],[1,"channel-item"],[1,"thumbnail"],[1,"newAvatar",3,"src","click"],[1,"info"],[1,"infoPart"],[1,"channel-name",3,"click"],[1,"shortened-details"],[1,"video-count","video-countStyle"],[3,"innerHTML"],["class","btn subscribe-to-channel-btn",3,"subscribed","click",4,"ngIf"],["class","video-container",4,"ngFor","ngForOf"],[1,"btn","subscribe-to-channel-btn",3,"click"],[1,"video-container"],[3,"src","click"],[1,"duration"],[1,"details"],[1,"title"],[1,"channel-name",3,"routerLink"],[1,"dot"],[1,"watchers-count"],[1,"upload-time"],[1,"shortened-description",3,"innerHTML"],[1,"tags"]],template:function(e,t){1&e&&(c.Wb(0,"div",0),c.Jc(1,L,15,9,"ng-container",1),c.Vb()),2&e&&(c.Cb(1),c.pc("ngForOf",t.channelsVideos))},directives:[i.l,i.m,o.f],pipes:[C.a,y.a],styles:["#search-results-container[_ngcontent-%COMP%]   .channel-item[_ngcontent-%COMP%]{display:flex}#search-results-container[_ngcontent-%COMP%]   .subscribe-to-channel-btn[_ngcontent-%COMP%], #search-results-container[_ngcontent-%COMP%]   .video-container[_ngcontent-%COMP%]{margin-top:20px}#search-results-container[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]{width:100%;max-width:432px;height:243px;display:flex;align-items:center;justify-content:center}#search-results-container[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;max-width:432px}#search-results-container[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{padding-left:32px;max-width:310px}@media screen and (max-width:1022px){#search-results-container[_ngcontent-%COMP%]{flex-direction:column}#search-results-container[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]{max-width:432px;width:100%}#search-results-container[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{padding-left:0;margin-top:8px}}.newAvatar[_ngcontent-%COMP%]{width:200px!important;height:200px!important;border-radius:50%;-o-object-fit:cover;object-fit:cover}.channel-name[_ngcontent-%COMP%]{margin:0;text-transform:capitalize;font-family:Muli-Bold,sans-serif!important;color:#545454;font-size:16px;overflow:hidden;max-width:400px;height:20px;cursor:pointer}.video-countStyle[_ngcontent-%COMP%]{font-family:Muli-Bold;color:#818181;font-size:14px;margin-top:7px}@media screen and (max-width:1022px){.channel-item[_ngcontent-%COMP%]{flex-direction:column}}"]}),S);function j(e,t){if(1&e){var n=c.Xb();c.Wb(0,"button",6),c.ec("click",(function(){c.Bc(n);var e=c.ic();return e.showFilters=!e.showFilters})),c.Wb(1,"mat-icon"),c.Lc(2,"tune"),c.Vb(),c.Wb(3,"span"),c.Lc(4,"Filters"),c.Vb(),c.Vb()}}function B(e,t){if(1&e){var n=c.Xb();c.Wb(0,"app-video-filters",7),c.ec("filter",(function(e){return c.Bc(n),c.ic().getFilteredList(e)})),c.Vb()}}function J(e,t){1&e&&c.Rb(0,"mat-spinner",8),2&e&&c.pc("diameter",20)}function Q(e,t){if(1&e&&(c.Ub(0),c.Rb(1,"app-show-regular-list",9),c.Rb(2,"app-show-playlists-list",9),c.Tb()),2&e){var n=c.ic();c.Cb(1),c.pc("items",n.items)("authUser",n.authUser),c.Cb(1),c.pc("items",n.items)("authUser",n.authUser)}}function A(e,t){if(1&e&&(c.Ub(0),c.Rb(1,"app-show-search-results",10),c.Tb()),2&e){var n=c.ic();c.Cb(1),c.pc("channelsVideos",n.channelsVideos)("authUser",n.authUser)}}function N(e,t){1&e&&(c.Wb(0,"div"),c.Wb(1,"span",11),c.Lc(2,"No results found"),c.Vb(),c.Vb())}var z,E=((z=function(){function e(t,n,i,o,c,s,r){var l=this;_classCallCheck(this,e),this.videoService=t,this.router=n,this.subject=i,this.channelsService=o,this.route=c,this.getAuthUser=s,this.getExactParams=r,this.items={videos:[],playlists:[]},this.channelsVideos=[],this.apiUrl=a.c,this.showTrending=!1,this.showFilters=!1,this.filters={},this.filterStatus="idle",this.subscriptions=[],this.loadingVideos=!1,this.authUser=this.getAuthUser.transform(),this.subscriptions.push(this.route.queryParams.subscribe((function(e){var t,n;l.search=null===(t=l.route.snapshot.queryParams)||void 0===t?void 0:t.search,l.showTrending=l.router.url.includes("trending"),l.selectedTag=null===(n=l.route.snapshot.queryParams)||void 0===n?void 0:n.tag,l.search?l.searchChannelsVideos({search:l.search,filters:l.filters}):l.getVideosList({search:l.search,filters:l.filters,tag:l.selectedTag})})))}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"getFilteredList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.filters=e,this.filterStatus="applied",this.search?this.searchChannelsVideos({search:this.search,filters:this.filters}):this.getVideosList({filters:this.filters})}},{key:"getVideosList",value:function(e){var t=this;e=this.getExactParams.transform(e),this.videoService.get(Object.assign({withPlaylists:this.showTrending?0:1,trending:this.showTrending?1:0},e)).subscribe((function(e){t.items=e}))}},{key:"searchChannelsVideos",value:function(e){var t,n=this;e=this.getExactParams.transform(e),this.loadingVideos=!0,this.channelsService.searchWithVideos(Object.assign({user_id:null===(t=this.authUser)||void 0===t?void 0:t.id},e)).subscribe((function(e){n.loadingVideos=!1,n.channelsVideos=e}))}},{key:"isFiltersShown",value:function(){var e;return(null===(e=this.items.videos)||void 0===e?void 0:e.length)>0||this.search&&this.channelsVideos.find((function(e){return e.videos.length>0}))||"applied"===this.filterStatus&&!this.loadingVideos}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach((function(e){return e.unsubscribe()}))}}]),e}()).\u0275fac=function(e){return new(e||z)(c.Qb(s.a),c.Qb(o.e),c.Qb(r.a),c.Qb(l.a),c.Qb(o.a),c.Qb(d.a),c.Qb(u.a))},z.\u0275cmp=c.Kb({type:z,selectors:[["app-show-videos"]],decls:8,vars:6,consts:[[1,"all-videos"],["class","filter-toggle-btn",3,"click",4,"ngIf"],[3,"filter",4,"ngIf"],["id","videos-list"],[3,"diameter",4,"ngIf"],[4,"ngIf"],[1,"filter-toggle-btn",3,"click"],[3,"filter"],[3,"diameter"],[3,"items","authUser"],[3,"channelsVideos","authUser"],[1,"error"]],template:function(e,t){1&e&&(c.Wb(0,"div",0),c.Jc(1,j,5,0,"button",1),c.Jc(2,B,1,0,"app-video-filters",2),c.Wb(3,"div",3),c.Jc(4,J,1,1,"mat-spinner",4),c.Jc(5,Q,3,4,"ng-container",5),c.Jc(6,A,2,2,"ng-container",5),c.Vb(),c.Jc(7,N,3,0,"div",5),c.Vb()),2&e&&(c.Cb(1),c.pc("ngIf",t.isFiltersShown()),c.Cb(1),c.pc("ngIf",t.showFilters),c.Cb(2),c.pc("ngIf",t.loadingVideos),c.Cb(1),c.pc("ngIf",!t.search&&!t.loadingVideos),c.Cb(1),c.pc("ngIf",t.search&&!t.loadingVideos),c.Cb(1),c.pc("ngIf",t.search&&0===(null==t.channelsVideos?null:t.channelsVideos.length)))},directives:[i.m,m.a,p.a,b.b,M,F,T],styles:[".filter-toggle-btn[_ngcontent-%COMP%]{text-transform:uppercase;background-color:unset;display:flex;align-items:center;font-family:Muli-Bold;padding:10px}.filter-toggle-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:10px}"]}),z),$=n("GJOa"),X=n("A7+4"),q=n("7dP1"),G=n("5eHb"),K=n("lwos"),Y=n("jhN1"),H=n("0IaG"),Z=n("Y9zH"),ee=n("8OJ3"),te=n("7tny"),ne=n.n(te);function ie(e,t){1&e&&(c.Wb(0,"div",8),c.Rb(1,"mat-spinner",9),c.Wb(2,"span",10),c.Lc(3,"Loading video"),c.Vb(),c.Vb()),2&e&&(c.Cb(1),c.pc("diameter",15))}function oe(e,t){if(1&e&&(c.Wb(0,"div",1),c.Jc(1,ie,4,1,"div",2),c.Wb(2,"div",3),c.Wb(3,"video",4),c.Rb(4,"source",5),c.Wb(5,"p",6),c.Lc(6," To view this video please enable JavaScript, and consider upgrading to a web browser that "),c.Wb(7,"a",7),c.Lc(8,"supports HTML5 video"),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Vb()),2&e){var n=c.ic();c.Cb(1),c.pc("ngIf","pending"===n.videoInit),c.Cb(1),c.pc("hidden","finished"!==n.videoInit),c.Cb(2),c.pc("src",n.videoUrl,c.Ec)}}var ae,ce,se=((ae=function(){function e(t){_classCallCheck(this,e),this.cdr=t,this.videoInit="idle",this.options=a.w}return _createClass(e,[{key:"ngOnInit",value:function(){console.log(this.videoUrl)}},{key:"initPlayer",value:function(){var e=this,t=document.getElementsByTagName("video")[0];this.videoInit="pending",this.player=Object(ee.default)(t,this.options,(function(){e.player.duration=function(){for(var t=e.videoData.duration.split(":"),n=0,i=1;t.length>0;)n+=i*parseInt(t.pop(),10),i*=60;return n},ee.default.registerPlugin("watermark",ne.a),e.player.watermark({image:"assets/img/logo.png",position:"bottom-right",fadeTime:null}),ee.default.deregisterPlugin("watermark")})),this.player.on("loadedmetadata",(function(){e.videoInit="finished"})),this.player.on("error",(function(t){e.player.error(),e.videoInit="finished"})),this.cdr.detectChanges()}},{key:"ngAfterViewInit",value:function(){this.initPlayer()}}]),e}()).\u0275fac=function(e){return new(e||ae)(c.Qb(c.h))},ae.\u0275cmp=c.Kb({type:ae,selectors:[["app-video-js-player"]],inputs:{videoData:"videoData",videoUrl:"videoUrl"},decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],["class","loading-spinner",4,"ngIf"],[3,"hidden"],["id","player","controls","","preload","auto","autoplay","","data-setup","{}",1,"video-js"],["type","video/mp4",3,"src"],[1,"vjs-no-js"],["href","https://videojs.com/html5-video-support/","target","_blank"],[1,"loading-spinner"],[3,"diameter"],[2,"margin-left","10px"]],template:function(e,t){1&e&&c.Jc(0,oe,9,3,"div",0),2&e&&c.pc("ngIf",t.videoUrl)},directives:[i.m,b.b],styles:[".container[_ngcontent-%COMP%]{margin:50px auto;max-width:100%;width:100%;height:480px}.vjs_video_3-dimensions[_ngcontent-%COMP%]{width:100%}.loading-spinner[_ngcontent-%COMP%]{display:flex;align-items:center}"]}),ae),re=n("dJ++"),le=n("3Pt+"),de=n("MFHO"),ue=n("kmnG"),me=n("qFsG"),pe=n("ihCf"),be=["cEditable"],he=((ce=function(){function e(t,n,i,o,a,s){_classCallCheck(this,e),this.fb=t,this.videoService=n,this.getAuthUser=i,this.subject=o,this.cdr=a,this.fixLineBreaks=s,this.inputFocused=!1,this.isSubmitted=!1,this.originalFormattedComment="",this.editComment=!1,this.selectedComment=null,this.selectedReply=null,this.reply=!1,this.isReplyComment=!1,this.reply2Reply=!1,this.parentComment=null,this.commentAdded=new c.o,this.commentUpdated=new c.o,this.cancelled=new c.o}return _createClass(e,[{key:"ngOnInit",value:function(){var e;this.authUser=this.getAuthUser.transform(),this.placeholderText=this.getPlaceholderText(),this.videoCommentsForm=this.fb.group({id:[""],from_id:[this.authUser.id],comment:["",le.x.required],video_id:[this.videoData.id],to_user_id:[0],to_comment_id:[0],to_reply_id:[0],is_reply:[0]}),this.reply2Reply&&(this.replyUsername="@"+(null===(e=this.selectedReply)||void 0===e?void 0:e.user.username)+" ",this.videoCommentsForm.patchValue({comment:this.replyUsername}))}},{key:"saveComment",value:function(){var e=this;if(this.isSubmitted=!0,this.videoCommentsForm.valid){if(this.reply)this.videoCommentsForm.patchValue({to_comment_id:this.selectedComment.id,to_user_id:this.selectedComment.user.id,is_reply:1});else if(this.isReplyComment)this.videoCommentsForm.patchValue({to_comment_id:this.parentComment.id,to_user_id:this.parentComment.user.id,is_reply:1});else if(this.reply2Reply){var t=this.commentCtrl.value.replace(this.replyUsername,'<strong class="reply-username">'+this.replyUsername+"</strong>");this.videoCommentsForm.patchValue({to_comment_id:this.selectedComment.id,to_reply_id:this.selectedReply.id,to_user_id:this.selectedComment.user.id,comment:t,is_reply:1})}if(this.editComment){if(this.parentComment){var n=this.commentCtrl.value.replace(this.replyUsername,'<strong class="reply-username">'+this.replyUsername+"</strong>");this.videoCommentsForm.patchValue({comment:n})}this.videoService.updateVideoComment(this.videoCommentsForm.value).subscribe((function(t){e.commentUpdated.emit(t),e.videoCommentsForm.get("comment").reset()}))}else this.videoService.addVideoComment(this.videoCommentsForm.value).subscribe((function(t){e.inputFocused=!1,e.commentAdded.emit(t),e.videoCommentsForm.get("comment").reset()}))}}},{key:"onCancel",value:function(){this.inputFocused=!1,this.videoCommentsForm.get("comment").reset(),(this.editComment||this.reply||this.reply2Reply)&&this.cancelled.emit()}},{key:"getPlaceholderText",value:function(){return"Add a public "+(this.reply?"reply":"comment")+"..."}},{key:"ngAfterViewInit",value:function(){if(this.editComment){var e=this.selectedComment.comment;this.parentComment&&(this.replyUsername=e.substring(e.lastIndexOf("@"),e.lastIndexOf(" "))),this.videoCommentsForm.patchValue({comment:this.fixLineBreaks.transform(e.replace(/<[^>]*>?/gm,"")),id:this.selectedComment.id}),this.inputFocused=!0,this.cdr.detectChanges()}}},{key:"commentCtrl",get:function(){return this.videoCommentsForm.get("comment")}}]),e}()).\u0275fac=function(e){return new(e||ce)(c.Qb(le.e),c.Qb(s.a),c.Qb(d.a),c.Qb(r.a),c.Qb(c.h),c.Qb(de.a))},ce.\u0275cmp=c.Kb({type:ce,selectors:[["app-video-comments-form"]],viewQuery:function(e,t){var n;1&e&&c.Qc(be,!0),2&e&&c.wc(n=c.fc())&&(t.cEditable=n.first)},inputs:{videoData:"videoData",editComment:"editComment",selectedComment:"selectedComment",selectedReply:"selectedReply",reply:"reply",isReplyComment:"isReplyComment",reply2Reply:"reply2Reply",parentComment:"parentComment"},outputs:{commentAdded:"added",commentUpdated:"updated",cancelled:"cancelled"},decls:14,vars:10,consts:[[1,"w-100",3,"formGroup"],[1,"d-flex","mt-3","comment-input-container"],[1,"avatar",3,"src"],["type","hidden","formControlName","comment"],["floatLabel","never"],["matInput","","cdkTextareaAutosize","","formControlName","comment",1,"comment-input",3,"placeholder","focus"],["cEditable",""],[1,"d-flex","justify-content-end","buttonsPart"],[3,"hidden"],["type","button",1,"btn","text-btn",3,"click"],["type","button",1,"ml-3","px-2","btn","enter","replyBtn",3,"click"]],template:function(e,t){1&e&&(c.Wb(0,"form",0),c.Wb(1,"div",1),c.Rb(2,"img",2),c.jc(3,"getImgPath"),c.Rb(4,"input",3),c.Wb(5,"mat-form-field",4),c.Wb(6,"textarea",5,6),c.ec("focus",(function(){return t.inputFocused=!0})),c.Vb(),c.Vb(),c.Vb(),c.Wb(8,"div",7),c.Wb(9,"div",8),c.Wb(10,"button",9),c.ec("click",(function(){return t.onCancel()})),c.Lc(11,"Cancel"),c.Vb(),c.Wb(12,"button",10),c.ec("click",(function(){return t.saveComment()})),c.Lc(13),c.Vb(),c.Vb(),c.Vb(),c.Vb()),2&e&&(c.pc("formGroup",t.videoCommentsForm),c.Cb(2),c.pc("src",c.lc(3,7,t.authUser.channel.avatar,"avatars"),c.Ec),c.Cb(4),c.pc("placeholder",t.placeholderText),c.Cb(3),c.pc("hidden",!t.inputFocused),c.Cb(3),c.Gb("green-bg",t.videoCommentsForm.valid),c.Cb(1),c.Nc("",t.reply?"Reply":"Comment"," "))},directives:[le.z,le.q,le.i,le.c,le.p,le.h,ue.c,me.b,pe.b],pipes:[C.a],styles:["form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%!important}form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{overflow:hidden;resize:none}form[_ngcontent-%COMP%]   .btn.enter[_ngcontent-%COMP%]{background-color:#18b587;margin-left:15px;color:#fff}form[_ngcontent-%COMP%]   .btn.enter[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   .btn.text-btn[_ngcontent-%COMP%]{padding:10px 20px;text-transform:uppercase;min-width:120px;cursor:pointer}form[_ngcontent-%COMP%]   .btn.text-btn[_ngcontent-%COMP%]{outline:none;color:#777;font-weight:700}@media (max-width:1054px) and (min-width:992px){.buttonsPart[_ngcontent-%COMP%]{flex-direction:column!important}.replyBtn[_ngcontent-%COMP%]{margin-left:0!important;margin-top:10px}}@media (max-width:530px){.buttonsPart[_ngcontent-%COMP%]{flex-direction:column!important}.replyBtn[_ngcontent-%COMP%]{margin-left:0!important;margin-top:10px}}"]}),ce);function ge(e,t){1&e&&c.Rb(0,"i",17)}function ve(e,t){if(1&e){var n=c.Xb();c.Wb(0,"app-video-comments-form",18),c.ec("added",(function(e){return c.Bc(n),c.ic().commentAddedFn(e)})),c.Vb()}if(2&e){var i=c.ic();c.pc("videoData",i.videoData)("reply",i.reply)("selectedComment",i.selectedComment)("reply2Reply",i.reply2Reply)("selectedReply",i.selectedReply)}}function fe(e,t){if(1&e){var n=c.Xb();c.Wb(0,"p",19),c.ec("click",(function(){c.Bc(n);var e=c.ic();return e.toggleRepliesFn(e.comment)})),c.Wb(1,"mat-icon"),c.Lc(2),c.Vb(),c.Wb(3,"span"),c.Lc(4),c.Vb(),c.Vb()}if(2&e){var i=c.ic();c.Cb(2),c.Nc("expand_",i.showReplies&&i.selectedComment===i.comment?"more":"less",""),c.Cb(2),c.Mc(i.getRepliesTogglerText(i.comment))}}var Ce,ye,_e=((Ce=function(){function e(t,n){_classCallCheck(this,e),this.getAuthUser=t,this.router=n,this.toggleReplies=new c.o,this.commentAdded=new c.o,this.selectComment=new c.o,this.likeDislikeComment=new c.o,this.authUser=this.getAuthUser.transform()}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"isAuthor",value:function(e){return e.user.id===this.videoData.author_id}},{key:"getRepliesTogglerText",value:function(e){var t=e.replies.length;return"View "+t+(t>1?" replies":" reply")}},{key:"selectCommentFn",value:function(e){this.selectComment.emit(e)}},{key:"commentAddedFn",value:function(e){this.commentAdded.emit(e)}},{key:"toggleRepliesFn",value:function(e){this.toggleReplies.emit(e)}},{key:"likeDislikeCommentFn",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.likeDislikeComment.emit({c:e,liked:t})}},{key:"checkUserCommentConnection",value:function(e){var t=this,n=e.reactors.find((function(e){return e.id===t.authUser.id}));return null==n?void 0:n.users_comments}},{key:"getReactorsCount",value:function(e,t){return e.filter((function(e){return null==e?void 0:e.users_comments[t]})).length}},{key:"getFullName",value:function(e){return e.first_name+" "+e.last_name}},{key:"openChannelPage",value:function(e){return Object(h.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.router.navigateByUrl("/",{skipLocationChange:!0}).then((function(){return Object(h.a)(n,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.router.navigate(["channels/"+e]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})))}));case 1:case"end":return t.stop()}}),t,this)})))}}]),e}()).\u0275fac=function(e){return new(e||Ce)(c.Qb(d.a),c.Qb(o.e))},Ce.\u0275cmp=c.Kb({type:Ce,selectors:[["app-single-comment"]],inputs:{comment:"comment",videoData:"videoData",showReplyForm:"showReplyForm",selectedComment:"selectedComment",selectedReply:"selectedReply",showReplies:"showReplies",reply:"reply",reply2Reply:"reply2Reply"},outputs:{toggleReplies:"toggleReplies",commentAdded:"commentAdded",selectComment:"selectComment",likeDislikeComment:"likeDislikeComment"},decls:25,vars:20,consts:[[1,"d-flex","comments_part_below"],[1,"avatar","avatar-comments",3,"src"],[1,"details"],[1,"d-flex","align-items-center","mb-2","detailsPart"],[1,"mr-3","user-name",3,"click"],["class","fas fa-check-circle ml-1",4,"ngIf"],[1,"comment-date"],[1,"comment-text","mb-2",3,"innerHTML"],[1,"likes-reply"],[1,"comments-like","mb-2"],[1,"fa","fa-thumbs-up","mr-1",3,"click"],[1,"likes-count"],[1,"fa","fa-thumbs-down","ml-3","mr-1",3,"click"],[1,"reply-container"],[1,"reply",3,"click"],["class","w-100",3,"videoData","reply","selectedComment","reply2Reply","selectedReply","added",4,"ngIf"],["class","replies-toggler mt-3",3,"click",4,"ngIf"],[1,"fas","fa-check-circle","ml-1"],[1,"w-100",3,"videoData","reply","selectedComment","reply2Reply","selectedReply","added"],[1,"replies-toggler","mt-3",3,"click"]],template:function(e,t){if(1&e&&(c.Wb(0,"div",0),c.Rb(1,"img",1),c.jc(2,"getImgPath"),c.Wb(3,"div",2),c.Wb(4,"div",3),c.Wb(5,"div",4),c.ec("click",(function(){return t.openChannelPage(null==t.comment||null==t.comment.user?null:t.comment.user.username)})),c.Lc(6),c.Jc(7,ge,1,0,"i",5),c.Vb(),c.Wb(8,"div",6),c.Lc(9),c.jc(10,"dateFromNow"),c.Vb(),c.Vb(),c.Rb(11,"div",7),c.Wb(12,"div",8),c.Wb(13,"div",9),c.Wb(14,"i",10),c.ec("click",(function(){return t.likeDislikeCommentFn(t.comment)})),c.Vb(),c.Wb(15,"span",11),c.Lc(16),c.Vb(),c.Wb(17,"i",12),c.ec("click",(function(){return t.likeDislikeCommentFn(t.comment,!1)})),c.Vb(),c.Wb(18,"span",11),c.Lc(19),c.Vb(),c.Vb(),c.Wb(20,"div",13),c.Wb(21,"span",14),c.ec("click",(function(){return t.selectCommentFn(t.comment)})),c.Lc(22,"Reply"),c.Vb(),c.Jc(23,ve,1,5,"app-video-comments-form",15),c.Vb(),c.Vb(),c.Jc(24,fe,5,2,"p",16),c.Vb(),c.Vb()),2&e){var n,i,o=null==(n=t.checkUserCommentConnection(t.comment))?null:n.liked,a=null==(i=t.checkUserCommentConnection(t.comment))?null:i.disliked;c.Cb(1),c.pc("src",c.lc(2,15,null==t.comment.user?null:t.comment.user.channel.avatar,"avatars"),c.Ec),c.Cb(4),c.Gb("author",t.isAuthor(t.comment)),c.Cb(1),c.Nc(" ",t.getFullName(null==t.comment?null:t.comment.user)," "),c.Cb(1),c.pc("ngIf",t.isAuthor(t.comment)),c.Cb(2),c.Mc(c.kc(10,18,t.comment.created_at)),c.Cb(2),c.pc("innerHTML",t.comment.comment,c.Cc),c.Cb(3),c.Gb("liked",o),c.Cb(2),c.Nc(" ",t.getReactorsCount(t.comment.reactors,"liked")," "),c.Cb(1),c.Gb("disliked",a),c.Cb(2),c.Nc(" ",t.getReactorsCount(t.comment.reactors,"disliked")," "),c.Cb(4),c.pc("ngIf",t.showReplyForm&&(t.comment.id===(null==t.selectedComment?null:t.selectedComment.id)||t.comment.id==(null==t.selectedReply?null:t.selectedReply.id))),c.Cb(1),c.pc("ngIf",(null==t.comment||null==t.comment.replies?null:t.comment.replies.length)>0)}},directives:[i.m,he,m.a],pipes:[C.a,y.a],styles:[".details[_ngcontent-%COMP%]{flex:1}.details[_ngcontent-%COMP%]   .comment-text[_ngcontent-%COMP%]{color:#545454!important;margin-top:5px;margin-bottom:10px}.user-name[_ngcontent-%COMP%]{cursor:pointer;padding:5px 10px}@media (max-width:375px){.user-name[_ngcontent-%COMP%]{padding:20px 10px}}.author[_ngcontent-%COMP%]{height:26px;background-color:#777;color:#fff!important;border-radius:20px;text-align:center;justify-content:center;padding:0 5px;font-family:Muli-Regular,serif!important}.author[_ngcontent-%COMP%], .replies-toggler[_ngcontent-%COMP%]{display:flex;align-items:center}.replies-toggler[_ngcontent-%COMP%]{color:#0e9d6a;cursor:pointer;font-family:Muli-Bold,serif;font-size:14px;margin:0}.comment-date[_ngcontent-%COMP%]{font-size:12px;color:#818181;font-family:Muli-Light,serif;display:flex;align-self:center}.user-name[_ngcontent-%COMP%]{color:#545454;font-family:Muli-Bold,serif}@media (max-width:500px){.user-name[_ngcontent-%COMP%]{white-space:nowrap}}.likes-reply[_ngcontent-%COMP%]{display:flex;width:100%;align-items:flex-start;margin-bottom:10px}.likes-reply[_ngcontent-%COMP%]   .comments-like[_ngcontent-%COMP%]{color:#777;display:flex;align-items:center;margin-right:5px}.likes-reply[_ngcontent-%COMP%]   .comments-like[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%]{cursor:pointer;margin-left:5px;margin-right:5px}.likes-reply[_ngcontent-%COMP%]   .reply-container[_ngcontent-%COMP%]{width:80%}.likes-reply[_ngcontent-%COMP%]   .reply[_ngcontent-%COMP%]{text-transform:uppercase;color:#777;margin-left:15px;font-family:Muli-Bold,serif;font-size:14px;cursor:pointer}.comments_part_below[_ngcontent-%COMP%], .detailsPart[_ngcontent-%COMP%]{display:flex}.user-name[_ngcontent-%COMP%]{padding:10px 20px;margin-right:10px}@media (max-width:420px){.user-name[_ngcontent-%COMP%]{padding:10px;margin-right:5px}}.fa-check-circle[_ngcontent-%COMP%]{margin-left:7px}@media (max-width:400px){.avatar-comments[_ngcontent-%COMP%]{margin-right:2px!important}}"]}),Ce),ke=n("bTqV"),Oe=n("STbY"),we=((ye=function(){function e(t){_classCallCheck(this,e),this.getAuthUser=t,this.commentSelected=new c.o,this.remove=new c.o}return _createClass(e,[{key:"ngOnInit",value:function(){this.authUser=this.getAuthUser.transform()}},{key:"selectComment",value:function(e){this.commentSelected.emit(e)}},{key:"removeComment",value:function(e){this.remove.emit(e)}}]),e}()).\u0275fac=function(e){return new(e||ye)(c.Qb(d.a))},ye.\u0275cmp=c.Kb({type:ye,selectors:[["app-comment-actions"]],inputs:{comment:"comment"},outputs:{commentSelected:"commentSelected",remove:"remove"},decls:16,vars:1,consts:[[1,"more-actions"],["mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"]],template:function(e,t){if(1&e&&(c.Wb(0,"div",0),c.Wb(1,"button",1),c.Wb(2,"mat-icon"),c.Lc(3,"more_vert"),c.Vb(),c.Vb(),c.Wb(4,"mat-menu",null,2),c.Wb(6,"button",3),c.ec("click",(function(){return t.selectComment(t.comment)})),c.Wb(7,"mat-icon"),c.Lc(8,"edit"),c.Vb(),c.Wb(9,"span"),c.Lc(10,"Edit"),c.Vb(),c.Vb(),c.Wb(11,"button",3),c.ec("click",(function(){return t.removeComment(t.comment)})),c.Wb(12,"mat-icon"),c.Lc(13,"delete"),c.Vb(),c.Wb(14,"span"),c.Lc(15,"Delete"),c.Vb(),c.Vb(),c.Vb(),c.Vb()),2&e){var n=c.xc(5);c.Cb(1),c.pc("matMenuTriggerFor",n)}},directives:[ke.a,Oe.c,m.a,Oe.d,Oe.a],styles:[""]}),ye);function Pe(e,t){if(1&e){var n=c.Xb();c.Wb(0,"app-comment-actions",14),c.ec("remove",(function(e){return c.Bc(n),c.ic(5).removeComment(e)}))("commentSelected",(function(e){return c.Bc(n),c.ic(5).selectComment(e,!1,!0)})),c.Vb()}if(2&e){var i=c.ic(2).$implicit;c.pc("comment",i)}}function Ve(e,t){if(1&e){var n=c.Xb();c.Wb(0,"div",12),c.Wb(1,"div",5),c.Wb(2,"app-single-comment",13),c.ec("likeDislikeComment",(function(e){return c.Bc(n),c.ic(4).likeDislikeComment(e)}))("commentAdded",(function(e){return c.Bc(n),c.ic(4).commentAdded(e)}))("selectComment",(function(){c.Bc(n);var e=c.ic().$implicit,t=c.ic(2).$implicit;return c.ic().replyToReply(t,e)})),c.Vb(),c.Vb(),c.Wb(3,"div",8),c.Jc(4,Pe,1,1,"app-comment-actions",9),c.Vb(),c.Vb()}if(2&e){var i=c.ic().$implicit,o=c.ic(3);c.Cb(2),c.pc("comment",i)("videoData",o.videoData)("showReplyForm",o.showReplyToReplyForm)("showReplies",o.showReplies)("selectedComment",o.selectedComment)("selectedReply",o.selectedReply)("reply2Reply",!0),c.Cb(2),c.pc("ngIf",o.isMyComment(i)&&!o.editReply)}}function Me(e,t){if(1&e){var n=c.Xb();c.Wb(0,"app-video-comments-form",15),c.ec("updated",(function(e){return c.Bc(n),c.ic(4).getUpdatedComments(e)}))("cancelled",(function(){return c.Bc(n),c.ic(4).editReply=!1})),c.Vb()}if(2&e){var i=c.ic(3).$implicit,o=c.ic();c.pc("editComment",!0)("selectedComment",o.selectedReply)("isReplyComment",!0)("parentComment",i)("videoData",o.videoData)}}function xe(e,t){if(1&e&&(c.Ub(0),c.Jc(1,Ve,5,8,"div",10),c.Jc(2,Me,1,5,"app-video-comments-form",11),c.Tb()),2&e){var n=t.$implicit,i=c.ic(3);c.Cb(1),c.pc("ngIf",n.id!==(null==i.selectedReply?null:i.selectedReply.id)||!i.editReply),c.Cb(1),c.pc("ngIf",i.editReply&&n.id===i.selectedReply.id)}}function We(e,t){if(1&e){var n=c.Xb();c.Wb(0,"app-comment-actions",14),c.ec("remove",(function(e){return c.Bc(n),c.ic(3).removeComment(e)}))("commentSelected",(function(e){return c.Bc(n),c.ic(3).selectComment(e)})),c.Vb()}if(2&e){var i=c.ic(2).$implicit;c.pc("comment",i)}}function Re(e,t){if(1&e){var n=c.Xb();c.Wb(0,"div",4),c.Wb(1,"div",5),c.Wb(2,"app-single-comment",6),c.ec("likeDislikeComment",(function(e){return c.Bc(n),c.ic(2).likeDislikeComment(e)}))("commentAdded",(function(e){return c.Bc(n),c.ic(2).commentAdded(e)}))("toggleReplies",(function(e){return c.Bc(n),c.ic(2).toggleReplies(e)}))("selectComment",(function(e){return c.Bc(n),c.ic(2).selectComment(e,!0)})),c.Vb(),c.Wb(3,"div",7),c.Jc(4,xe,3,2,"ng-container",1),c.Vb(),c.Vb(),c.Wb(5,"div",8),c.Jc(6,We,1,1,"app-comment-actions",9),c.Vb(),c.Vb()}if(2&e){var i=c.ic().$implicit,o=c.ic();c.Cb(1),c.Gb("w-100",o.editComment),c.Cb(1),c.pc("comment",i)("videoData",o.videoData)("showReplyForm",o.showReplyForm)("showReplies",o.showReplies)("selectedComment",o.selectedComment)("reply",!0),c.Cb(1),c.pc("hidden",!o.isReplyShown(i)),c.Cb(1),c.pc("ngForOf",i.replies),c.Cb(2),c.pc("ngIf",o.isMyComment(i)&&!o.editComment)}}function Fe(e,t){if(1&e){var n=c.Xb();c.Wb(0,"app-video-comments-form",16),c.ec("updated",(function(e){return c.Bc(n),c.ic(2).getUpdatedComments(e)}))("cancelled",(function(){return c.Bc(n),c.ic(2).editComment=!1})),c.Vb()}if(2&e){var i=c.ic(2);c.pc("editComment",!0)("selectedComment",i.selectedComment)("videoData",i.videoData)}}function Ie(e,t){if(1&e&&(c.Ub(0),c.Jc(1,Re,7,11,"div",2),c.Jc(2,Fe,1,3,"app-video-comments-form",3),c.Tb()),2&e){var n=t.$implicit,i=c.ic();c.Cb(1),c.pc("ngIf",i.isCommentShown(n)),c.Cb(1),c.pc("ngIf",i.editComment&&n.id===i.selectedComment.id)}}var De,Ue=((De=function(){function e(t,n,i,o){_classCallCheck(this,e),this.subject=t,this.videoService=n,this.getAuthUser=i,this.dialog=o,this.subscriptions=[],this.showReplyForm=!1,this.showReplyToReplyForm=!1,this.showReplies=!1,this.editReply=!1,this.trackByElement=v.a,this.videoComments=[],this.editComment=!1,this.authUser=this.getAuthUser.transform()}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"isAuthor",value:function(e){return e.user.id===this.videoData.author_id}},{key:"isMyComment",value:function(e){return e.user.id===this.authUser.id}},{key:"getUpdatedComments",value:function(e){var t=this;this.videoComments=e,this.editComment=!1,this.editReply=!1,this.selectedComment=e.find((function(e){var n;return e.id===(null===(n=t.selectedComment)||void 0===n?void 0:n.id)})),this.selectedReply=e.find((function(e){var n;return e.id===(null===(n=t.selectedReply)||void 0===n?void 0:n.id)}))}},{key:"selectComment",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t||n?n?(this.editReply=!0,this.selectedReply=e):(this.showReplyForm=this.selectedComment!==e||!this.showReplyForm,this.selectedComment=e):(this.editComment=!this.editComment,this.showReplyForm=!this.editComment,this.selectedComment=e)}},{key:"replyToReply",value:function(e,t){this.showReplyToReplyForm=this.selectedReply!==t||!this.showReplyToReplyForm,this.selectedComment=e,this.selectedReply=t}},{key:"removeComment",value:function(e){var t=this;this.subscriptions.push(this.dialog.open(re.a).afterClosed().subscribe((function(n){n&&t.videoService.removeVideoComment({user_id:t.authUser.id,id:e.id,video_id:e.video_id}).subscribe((function(e){t.videoComments=e,t.selectedComment=e.find((function(e){var n;return e.id===(null===(n=t.selectedComment)||void 0===n?void 0:n.id)}))}))})))}},{key:"commentAdded",value:function(e){var t=this;this.videoComments=e,this.showReplyForm=!1,this.showReplyToReplyForm=!1,this.showReplies=!0,this.selectedComment=e.find((function(e){return e.id===t.selectedComment.id}))}},{key:"toggleReplies",value:function(e){this.showReplies=!this.showReplies,this.selectedComment=e}},{key:"likeDislikeComment",value:function(e){var t=this,n=this.buildParams(e.c,e.liked);this.subscriptions.push(this.videoService.updateCommentLikes(n).subscribe((function(e){t.videoComments=e,t.showReplies=!0,t.selectedComment=t.videoComments.find((function(e){var n;return e.id===(null===(n=t.selectedComment)||void 0===n?void 0:n.id)}))})))}},{key:"buildParams",value:function(e,t){var n={video_id:e.video_id,comment_id:e.id,user_id:this.authUser.id,liked:0,disliked:0,likes:e.likes,dislikes:e.dislikes},i=this.checkUserCommentConnection(e);return n.likes=Math.max(0,(null==i?void 0:i.liked)?--e.likes:+e.likes),n.dislikes=Math.max(0,(null==i?void 0:i.disliked)?--e.dislikes:+e.dislikes),t?n.liked=+!(null==i?void 0:i.liked):n.disliked=+!(null==i?void 0:i.disliked),n}},{key:"getReactorsCount",value:function(e,t){return e.filter((function(e){return null==e?void 0:e.users_comments[t]})).length}},{key:"checkUserCommentConnection",value:function(e){var t,n=this,i=null===(t=e.reactors)||void 0===t?void 0:t.find((function(e){return e.id===n.authUser.id}));return null==i?void 0:i.users_comments}},{key:"isCommentShown",value:function(e){var t;return e.id!==(null===(t=this.selectedComment)||void 0===t?void 0:t.id)&&!this.showReplyForm||this.showReplyForm||!this.editComment}},{key:"isReplyShown",value:function(e){return this.showReplies&&this.selectedComment===e}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach((function(e){return e.unsubscribe()}))}}]),e}()).\u0275fac=function(e){return new(e||De)(c.Qb(r.a),c.Qb(s.a),c.Qb(d.a),c.Qb(H.b))},De.\u0275cmp=c.Kb({type:De,selectors:[["app-video-comments-list"]],inputs:{videoData:"videoData",videoComments:"videoComments",editComment:"editComment"},decls:2,vars:2,consts:[[1,"comments-container",3,"hidden"],[4,"ngFor","ngForOf"],["class","comment d-flex mt-4",4,"ngIf"],["class","edit-comment-form w-100",3,"editComment","selectedComment","videoData","updated","cancelled",4,"ngIf"],[1,"comment","d-flex","mt-4"],[1,"left-group"],[1,"w-100",3,"comment","videoData","showReplyForm","showReplies","selectedComment","reply","likeDislikeComment","commentAdded","toggleReplies","selectComment"],[1,"replies",3,"hidden"],[1,"right-group"],[3,"comment","remove","commentSelected",4,"ngIf"],["class","d-flex reply mt-4",4,"ngIf"],["class","w-100",3,"editComment","selectedComment","isReplyComment","parentComment","videoData","updated","cancelled",4,"ngIf"],[1,"d-flex","reply","mt-4"],[1,"w-100",3,"comment","videoData","showReplyForm","showReplies","selectedComment","selectedReply","reply2Reply","likeDislikeComment","commentAdded","selectComment"],[3,"comment","remove","commentSelected"],[1,"w-100",3,"editComment","selectedComment","isReplyComment","parentComment","videoData","updated","cancelled"],[1,"edit-comment-form","w-100",3,"editComment","selectedComment","videoData","updated","cancelled"]],template:function(e,t){1&e&&(c.Wb(0,"div",0),c.Jc(1,Ie,3,2,"ng-container",1),c.Vb()),2&e&&(c.pc("hidden",0===t.videoComments.length),c.Cb(1),c.pc("ngForOf",t.videoComments))},directives:[i.l,i.m,_e,we,he],styles:[".comments-container[_ngcontent-%COMP%]{margin-top:50px}.comments-container[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%] > .left-group[_ngcontent-%COMP%]{flex-direction:column}.comments-container[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .replies[_ngcontent-%COMP%]{margin-left:40px;margin-top:20px}@media (max-width:500px){.comments-container[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .replies[_ngcontent-%COMP%]{margin-left:10px}}.comments-container[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%], .comments-container[_ngcontent-%COMP%]   .reply[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.comments-container[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .left-group[_ngcontent-%COMP%], .comments-container[_ngcontent-%COMP%]   .reply[_ngcontent-%COMP%]   .left-group[_ngcontent-%COMP%]{display:flex;width:100%}"]}),De),Le=n("FtGj"),Se=n("vV3i"),Te=n("A5z7");function je(e,t){1&e&&(c.Wb(0,"mat-error"),c.Lc(1," The video name is required "),c.Vb())}function Be(e,t){1&e&&(c.Wb(0,"mat-error"),c.Lc(1," Not more than 12 characters please "),c.Vb())}function Je(e,t){if(1&e&&(c.Wb(0,"div",23),c.Rb(1,"img",24),c.Vb()),2&e){var n=c.ic();c.Cb(1),c.pc("src",n.apiUrl+"uploads/thumbnails/"+n.videoData.thumbnail,c.Ec)}}function Qe(e,t){if(1&e){var n=c.Xb();c.Wb(0,"button",25),c.ec("click",(function(){return c.Bc(n),c.ic().removeThumbnail()})),c.Lc(1,"Change thumbnail "),c.Vb()}}function Ae(e,t){if(1&e){var n=c.Xb();c.Wb(0,"mat-chip",26),c.ec("removed",(function(){c.Bc(n);var e=t.$implicit;return c.ic().remove(e)})),c.Lc(1),c.Wb(2,"mat-icon",27),c.Lc(3,"cancel"),c.Vb(),c.Vb()}if(2&e){var i=t.$implicit;c.Cb(1),c.Nc(" ",i.name," ")}}function Ne(e,t){1&e&&(c.Wb(0,"mat-error"),c.Lc(1,"Please provide some tags describing your live video "),c.Vb())}var ze,Ee=((ze=function(){function e(t,n){_classCallCheck(this,e),this.fb=t,this.toastr=n,this.formReady=new c.o,this.isSubmitted=!1,this.separatorKeysCodes=[Le.g,Le.c],this.apiUrl=a.c,this.dropzoneConfig=Se.a,this.videoDetailsForm=this.fb.group({name:["",[le.x.required,le.x.maxLength(a.u)]],tags:[[],le.x.required],thumbnail:[""],video_id:[]})}return _createClass(e,[{key:"ngOnInit",value:function(){this.videoDetailsForm.patchValue(Object.assign({video_id:this.videoData.id},this.videoData))}},{key:"add",value:function(e){var t=e.input,n=e.value;(n||"").trim()&&(3===this.videoData.tags.length?this.toastr.error("We don't support more than 3 tags per video"):(this.videoData.tags.push({name:n.trim()}),this.videoDetailsForm.patchValue({tags:this.videoData.tags}))),t&&(t.value="")}},{key:"remove",value:function(e){var t=this.videoData.tags.indexOf(e);t>=0&&(this.videoData.tags.splice(t,1),this.videoDetailsForm.patchValue({tags:this.videoData.tags}))}},{key:"removeThumbnail",value:function(){this.videoDetailsForm.patchValue({thumbnail:""}),this.videoData.thumbnail=""}},{key:"changeThumbnail",value:function(e){this.thumbnailFile=e.target.files[0],this.videoDetailsForm.patchValue({thumbnail:this.thumbnailFile.name})}},{key:"saveDetails",value:function(){if(this.videoDetailsForm.patchValue({tags:this.videoData.tags}),this.isSubmitted=!0,this.videoDetailsForm.valid){var e=new FormData;for(var t in this.videoDetailsForm.value)e.append(t,"tags"!==t?this.videoDetailsForm.value[t]:JSON.stringify(this.videoDetailsForm.value[t]));this.thumbnailFile&&e.append("video_thumbnail_file",this.thumbnailFile,this.thumbnailFile.name),this.formReady.emit(e)}}},{key:"removeImage",value:function(){}},{key:"onAddedFile",value:function(e){this.thumbnailFile=e[0],this.videoDetailsForm.patchValue({thumbnail:this.thumbnailFile.name})}}]),e}()).\u0275fac=function(e){return new(e||ze)(c.Qb(le.e),c.Qb(G.b))},ze.\u0275cmp=c.Kb({type:ze,selectors:[["app-video-details-form"]],inputs:{videoData:"videoData"},outputs:{formReady:"formReady"},decls:31,vars:13,consts:[["id","tags-form",3,"formGroup"],[1,"left-group"],["id","video-name"],["matInput","","formControlName","name"],[4,"ngIf"],[1,"center-group"],["class","image-container",4,"ngIf"],[1,"actions-container"],["id","change-thumbnail",3,"click",4,"ngIf"],["id","video-thumbnail-dropzone",1,"single",3,"config","hidden","message","removedFile","thumbnail"],["dropzone",""],["type","file",3,"hidden","change"],[1,"right-group","video-tags-right-part"],["id","video-tags"],[1,"example-chip-list"],["formControlName","tags"],["tagList",""],[3,"removed",4,"ngFor","ngForOf"],["placeholder","Tags...",3,"matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputTokenEnd"],["chipsInput",""],["align","end"],[1,"actions","actions-video"],["id","save-tags",3,"click"],[1,"image-container"],[1,"saved-thumbnail",3,"src"],["id","change-thumbnail",3,"click"],[3,"removed"],["matChipRemove",""]],template:function(e,t){if(1&e&&(c.Wb(0,"form",0),c.Wb(1,"div",1),c.Wb(2,"div",2),c.Wb(3,"mat-form-field"),c.Rb(4,"input",3),c.Vb(),c.Jc(5,je,2,0,"mat-error",4),c.Jc(6,Be,2,0,"mat-error",4),c.Vb(),c.Vb(),c.Wb(7,"div",5),c.Jc(8,Je,2,1,"div",6),c.Wb(9,"div",7),c.Jc(10,Qe,2,0,"button",8),c.Wb(11,"dropzone",9,10),c.ec("removedFile",(function(){return t.removeImage()}))("thumbnail",(function(e){return t.onAddedFile(e)})),c.Vb(),c.Wb(13,"input",11),c.ec("change",(function(e){return t.changeThumbnail(e)})),c.Vb(),c.Vb(),c.Vb(),c.Wb(14,"div",12),c.Wb(15,"div",13),c.Wb(16,"mat-form-field",14),c.Wb(17,"mat-chip-list",15,16),c.Jc(19,Ae,4,1,"mat-chip",17),c.Wb(20,"input",18,19),c.ec("matChipInputTokenEnd",(function(e){return t.add(e)})),c.Vb(),c.Vb(),c.Wb(22,"mat-hint",20),c.Lc(23,"Please press 'Enter' after the tag name"),c.Vb(),c.Vb(),c.Jc(24,Ne,2,0,"mat-error",4),c.Vb(),c.Wb(25,"div",21),c.Wb(26,"button",22),c.ec("click",(function(){return t.saveDetails()})),c.Wb(27,"mat-icon"),c.Lc(28,"checked"),c.Vb(),c.Wb(29,"span"),c.Lc(30,"Save changes"),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Vb()),2&e){var n=c.xc(18);c.pc("formGroup",t.videoDetailsForm),c.Cb(5),c.pc("ngIf",t.isSubmitted&&t.videoDetailsForm.get("name").hasError("required")),c.Cb(1),c.pc("ngIf",t.videoDetailsForm.get("name").hasError("maxlength")),c.Cb(2),c.pc("ngIf",t.videoData.thumbnail),c.Cb(2),c.pc("ngIf",t.videoData.thumbnail),c.Cb(1),c.pc("config",t.dropzoneConfig)("hidden",t.videoData.thumbnail)("message","Click or drag an image to upload"),c.Cb(2),c.pc("hidden",!0),c.Cb(6),c.pc("ngForOf",t.videoData.tags),c.Cb(1),c.pc("matChipInputFor",n)("matChipInputSeparatorKeyCodes",t.separatorKeysCodes),c.Cb(4),c.pc("ngIf",0===t.videoData.tags.length&&t.isSubmitted)}},directives:[le.z,le.q,le.i,ue.c,me.b,le.c,le.p,le.h,i.m,Se.b,Te.c,i.l,Te.b,ue.f,m.a,ue.b,Te.a,Te.d],styles:["#dropzone.single[_ngcontent-%COMP%]{height:410px!important}#dropzone.single[_ngcontent-%COMP%]   .dz-wrapper[_ngcontent-%COMP%]{height:100%!important;overflow:hidden!important;width:100%}#dropzone.single[_ngcontent-%COMP%]   .dz-wrapper[_ngcontent-%COMP%]   .dz-message[_ngcontent-%COMP%]{height:400px!important;border:none!important}#dropzone.single[_ngcontent-%COMP%]   .dz-wrapper[_ngcontent-%COMP%]   .dz-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:400px!important;-o-object-fit:cover;object-fit:cover}#dropzone.single[_ngcontent-%COMP%]   .dz-wrapper[_ngcontent-%COMP%]   .dz-progress[_ngcontent-%COMP%]{display:none}#dropzone.single[_ngcontent-%COMP%]   .dz-wrapper[_ngcontent-%COMP%]   .dz-remove[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;background-color:#f53c6f;border-radius:20px;transform:translate(-50%,-50%);text-decoration:none!important;color:#fff;z-index:44444;font-weight:700;padding:5px}#video-thumbnail-dropzone[_ngcontent-%COMP%]   .dz-message[_ngcontent-%COMP%]{height:150px;overflow:hidden}#video-thumbnail-dropzone[_ngcontent-%COMP%]   .dz-progress[_ngcontent-%COMP%]{display:none}#video-thumbnail-dropzone[_ngcontent-%COMP%]   .dz-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:200px;-o-object-fit:cover;object-fit:cover}#tags-form[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap}#tags-form[_ngcontent-%COMP%]   .center-group[_ngcontent-%COMP%]{display:flex;align-items:center;width:33%}@media (max-width:890px){#tags-form[_ngcontent-%COMP%]   .center-group[_ngcontent-%COMP%]{flex-direction:column;align-items:unset}}#tags-form[_ngcontent-%COMP%]   .center-group[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]{position:relative}#tags-form[_ngcontent-%COMP%]   .center-group[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   .saved-thumbnail[_ngcontent-%COMP%]{width:150px}#tags-form[_ngcontent-%COMP%]   .center-group[_ngcontent-%COMP%]   .actions-container[_ngcontent-%COMP%]{width:100%}#tags-form[_ngcontent-%COMP%]   .center-group[_ngcontent-%COMP%]   .actions-container[_ngcontent-%COMP%]   #change-thumbnail[_ngcontent-%COMP%]{background-color:#b3b3b3;color:#fff;margin-left:10px;display:flex;align-items:center;padding:8px 24px}@media (max-width:890px){#tags-form[_ngcontent-%COMP%]   .center-group[_ngcontent-%COMP%]   .actions-container[_ngcontent-%COMP%]   #change-thumbnail[_ngcontent-%COMP%]{margin-left:0;padding:8px 21px}}#tags-form[_ngcontent-%COMP%]   .right-group[_ngcontent-%COMP%]{display:flex;align-items:center}#tags-form[_ngcontent-%COMP%]   .right-group[_ngcontent-%COMP%]   #video-tags[_ngcontent-%COMP%]{width:250px}#tags-form[_ngcontent-%COMP%]   .right-group[_ngcontent-%COMP%]   #video-tags[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}#tags-form[_ngcontent-%COMP%]   .right-group[_ngcontent-%COMP%]   #save-tags[_ngcontent-%COMP%]{background-color:#18b587;color:#fff;display:flex;align-items:center;font-size:16px;border-radius:0;transition:.3s ease-in-out;margin-left:30px;padding:10px}@media (max-width:500px){.video-tags-right-part[_ngcontent-%COMP%]{display:flex;flex-direction:column}}@media (max-width:500px){.actions-video[_ngcontent-%COMP%]{margin-top:10px}}"]}),ze),$e=n("AytR"),Xe=n("CPAS");function qe(e,t){if(1&e){var n=c.Xb();c.Wb(0,"div",12),c.ec("click",(function(){c.Bc(n);var e=c.ic().$implicit,t=c.ic(2);return t.removeVideoFromPlaylist(e,t.playlistId)})),c.Wb(1,"span",13),c.Lc(2,"delete"),c.Vb(),c.Vb()}}function Ge(e,t){if(1&e){var n=c.Xb();c.Ub(0),c.Wb(1,"div",5),c.ec("click",(function(){c.Bc(n);var e=t.$implicit,i=c.ic(2);return i.openVideoPage(e,null==i.playlistData?null:i.playlistData.id)})),c.Wb(2,"div",6),c.Rb(3,"img",7),c.jc(4,"getImgPath"),c.Vb(),c.Wb(5,"div",8),c.Wb(6,"p",9),c.ec("click",(function(){c.Bc(n);var e=t.$implicit,i=c.ic(2);return i.openVideoPage(e,null==i.playlistData?null:i.playlistData.id)})),c.Lc(7),c.Vb(),c.Wb(8,"p",10),c.Lc(9),c.Vb(),c.Vb(),c.Jc(10,qe,3,0,"div",11),c.Vb(),c.Tb()}if(2&e){var i=t.$implicit,o=c.ic(2);c.Cb(1),c.Gb("selected",o.videoId===i.id),c.Cb(2),c.pc("src",c.kc(4,6,i.thumbnail),c.Ec),c.Cb(4),c.Mc(i.name),c.Cb(2),c.Mc(i.channel.name),c.Cb(1),c.pc("ngIf",o.authUser.id===o.playlistData.channel.id)}}function Ke(e,t){if(1&e&&(c.Wb(0,"div",2),c.Wb(1,"h2"),c.Lc(2),c.Vb(),c.Wb(3,"div",3),c.Jc(4,Ge,11,8,"ng-container",4),c.Vb(),c.Vb()),2&e){var n=c.ic();c.Cb(2),c.Mc(n.playlistData.name),c.Cb(2),c.pc("ngForOf",n.playlistData.videos)}}var Ye=function(e){return{username:e}};function He(e,t){if(1&e){var n=c.Xb();c.Wb(0,"div",16),c.Wb(1,"div",6),c.Wb(2,"img",17),c.ec("click",(function(){c.Bc(n);var e=c.ic().$implicit;return c.ic().openVideoPage(e)})),c.jc(3,"getImgPath"),c.Vb(),c.Vb(),c.Wb(4,"div",8),c.Wb(5,"p",18),c.Lc(6),c.Vb(),c.Wb(7,"p",19),c.Lc(8),c.Vb(),c.Wb(9,"div",20),c.Wb(10,"span",21),c.Lc(11),c.Vb(),c.Wb(12,"span",22),c.Lc(13,"\xb7"),c.Vb(),c.Wb(14,"span",23),c.Lc(15),c.jc(16,"dateFromNow"),c.Vb(),c.Vb(),c.Vb(),c.Vb()}if(2&e){var i=c.ic().$implicit;c.Cb(2),c.pc("src",c.kc(3,7,i.thumbnail),c.Ec),c.Cb(4),c.Mc(i.name),c.Cb(1),c.pc("routerLink","/channels/")("queryParams",c.tc(11,Ye,i.user.username)),c.Cb(1),c.Mc(i.channel.name),c.Cb(3),c.Nc(" ","live"===i.status?"17k watching":i.views+" view"+(1===i.views?"":"s")," "),c.Cb(4),c.Mc(c.kc(16,9,i.created_at))}}function Ze(e,t){if(1&e&&(c.Wb(0,"div",14),c.Jc(1,He,17,13,"div",15),c.Vb()),2&e){var n=t.index;c.Cb(1),c.pc("ngIf",n<5)}}var et,tt=((et=function(){function e(t,n,i,o,c,s){_classCallCheck(this,e),this.route=t,this.playlistsService=n,this.videoService=i,this.getAuthUser=o,this.router=c,this.dialog=s,this.playlistOpened=!1,this.videoSuggestions=[],this.apiUrl=a.c,this.isProduction=$e.a.production,this.authUser=this.getAuthUser.transform()}return _createClass(e,[{key:"ngOnInit",value:function(){var e,t,n=this;this.urlParams=this.route.snapshot.queryParams,this.videoId=+(null===(e=this.urlParams)||void 0===e?void 0:e.id),this.playlistId=null===(t=this.urlParams)||void 0===t?void 0:t.playlist_id,this.playlistOpened=!!this.playlistId,this.playlistOpened&&this.playlistsService.getById({playlist_id:this.playlistId}).subscribe((function(e){n.playlistData=e})),this.videoService.get({limit:a.g}).subscribe((function(e){n.videoSuggestions=e.videos,console.log(e)}))}},{key:"openVideoPage",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i={id:e.id,playlist_id:n};this.router.navigateByUrl("/",{skipLocationChange:!0}).then((function(){return Object(h.a)(t,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.router.navigate(["/videos/play"],{queryParams:i});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})))}))}},{key:"removeVideoFromPlaylist",value:function(e,t){var n=this;this.dialog.open(re.a).afterClosed().subscribe((function(i){i&&n.playlistsService.removeVideoFromPlaylist({playlist_id:t,video_id:e.id}).subscribe((function(t){var i=n.playlistData.videos.indexOf(e);n.playlistData.videos=t.videos;var o=n.playlistData.videos[i];o&&n.openVideoPage(o)}))}))}}]),e}()).\u0275fac=function(e){return new(e||et)(c.Qb(o.a),c.Qb(Xe.a),c.Qb(s.a),c.Qb(d.a),c.Qb(o.e),c.Qb(H.b))},et.\u0275cmp=c.Kb({type:et,selectors:[["app-video-suggestions"]],decls:2,vars:2,consts:[["class","playlist-wrap",4,"ngIf"],["class","suggested-videos",4,"ngFor","ngForOf"],[1,"playlist-wrap"],[1,"list-wrap"],[4,"ngFor","ngForOf"],[1,"playlist-video",3,"click"],[1,"thumbnail-container"],[3,"src"],[1,"details-container"],[1,"video-name",3,"click"],[1,"main-text-3"],["class","remove-btn-container",3,"click",4,"ngIf"],[1,"remove-btn-container",3,"click"],[1,"material-icons"],[1,"suggested-videos"],["class","suggested-video",4,"ngIf"],[1,"suggested-video"],[3,"src","click"],[1,"video-name"],[1,"channel-sub-name",3,"routerLink","queryParams"],[1,"details-row"],[1,"watchers-count"],[1,"dot"],[1,"upload-time"]],template:function(e,t){1&e&&(c.Jc(0,Ke,5,2,"div",0),c.Jc(1,Ze,2,1,"div",1)),2&e&&(c.pc("ngIf",t.playlistOpened&&t.playlistData&&t.playlistData.videos.length>0),c.Cb(1),c.pc("ngForOf",t.videoSuggestions))},directives:[i.m,i.l,o.f],pipes:[C.a,y.a],styles:[".playlist-wrap[_ngcontent-%COMP%]{box-shadow:0 0 6px rgba(0,0,0,.1)}.playlist-wrap[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.playlist-wrap[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#e3e3e3;border-radius:10px}.playlist-wrap[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#cbcbcb;border-radius:10px}.playlist-wrap[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}.playlist-wrap[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{padding:6px 12px;background:#f8f8f8;font-size:16px;color:#545454}.playlist-wrap[_ngcontent-%COMP%]   .list-wrap[_ngcontent-%COMP%]{margin-bottom:40px;max-height:440px;overflow:auto;padding:0 12px 16px;margin-top:16px}.playlist-wrap[_ngcontent-%COMP%]   .list-wrap[_ngcontent-%COMP%]   .ads-info[_ngcontent-%COMP%]:last-child{margin:0}.playlist-wrap[_ngcontent-%COMP%]   .list-wrap[_ngcontent-%COMP%]   .playlist-video[_ngcontent-%COMP%]{cursor:pointer}.playlist-wrap[_ngcontent-%COMP%]   .list-wrap[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:68px;height:51px}.playlist-wrap[_ngcontent-%COMP%]   .list-wrap[_ngcontent-%COMP%]   .video-name[_ngcontent-%COMP%]{font-size:14px}.playlist-wrap[_ngcontent-%COMP%]   .list-wrap[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]{margin-left:12px;margin-top:8px;cursor:pointer}.playlist-wrap[_ngcontent-%COMP%]   .list-wrap[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{color:#18b587}.playlist-wrap[_ngcontent-%COMP%]   .list-wrap[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px;color:#545454;transition:.3s}.suggested-video[_ngcontent-%COMP%]   .video-name[_ngcontent-%COMP%], .suggested-video[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer}.selected[_ngcontent-%COMP%]{background-color:#f4f4f4}.details-row[_ngcontent-%COMP%]{display:flex;align-items:center}.details-row[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{margin:0 5px}.suggested-videos[_ngcontent-%COMP%]{margin-top:15px}"]}),et),nt=n("51Q/");function it(e,t){if(1&e){var n=c.Xb();c.Wb(0,"app-user-tags",6),c.ec("tagSelected",(function(e){return c.Bc(n),c.ic().getVideosByTag(e)})),c.Vb()}}function ot(e,t){1&e&&(c.Wb(0,"span"),c.Lc(1,"No tags defined for this video"),c.Vb())}function at(e,t){if(1&e){var n=c.Xb();c.Wb(0,"p",31),c.ec("click",(function(){c.Bc(n);var e=t.$implicit;return c.ic(3).openVideoByTag(e.name)})),c.Lc(1),c.Vb()}if(2&e){var i=t.$implicit;c.Cb(1),c.Nc(" #",i.name,"")}}function ct(e,t){if(1&e&&(c.Ub(0),c.Jc(1,at,2,1,"p",30),c.Tb()),2&e){var n=c.ic(2);c.Cb(1),c.pc("ngForOf",n.videoData.tags)}}function st(e,t){if(1&e){var n=c.Xb();c.Wb(0,"button",35),c.ec("click",(function(){c.Bc(n);var e=c.ic(3);return e.showTagsForm=!e.showTagsForm})),c.Wb(1,"mat-icon"),c.Lc(2,"edit"),c.Vb(),c.Wb(3,"span"),c.Lc(4,"Edit details"),c.Vb(),c.Vb()}}function rt(e,t){if(1&e&&(c.Wb(0,"div",32),c.Wb(1,"p",33),c.Lc(2),c.Vb(),c.Jc(3,st,5,0,"button",34),c.Vb()),2&e){var n=c.ic(2);c.Cb(2),c.Mc(null==n.videoData?null:n.videoData.name),c.Cb(1),c.pc("ngIf",n.auth.loggedIn()&&!n.showTagsForm&&(null==n.authUser?null:n.authUser.id)===n.videoData.author_id)}}function lt(e,t){if(1&e){var n=c.Xb();c.Wb(0,"app-video-details-form",36),c.ec("formReady",(function(e){return c.Bc(n),c.ic(2).saveVideoDetails(e)})),c.Vb()}if(2&e){var i=c.ic(2);c.pc("videoData",i.videoData)}}function dt(e,t){if(1&e&&(c.Wb(0,"div",37),c.Rb(1,"img",38),c.jc(2,"getImgPath"),c.Wb(3,"div"),c.Wb(4,"p",39),c.Lc(5),c.Vb(),c.Wb(6,"p",40),c.Lc(7),c.Vb(),c.Vb(),c.Vb()),2&e){var n=c.ic(2);c.pc("routerLink","/channels/"+n.videoData.users_vids[0].username),c.Cb(1),c.pc("src",c.lc(2,4,n.videoData.channel.avatar,"avatars"),c.Ec),c.Cb(4),c.Mc(n.videoData.channel.name),c.Cb(2),c.Mc(n.buildSubscribersCountText(n.videoData))}}function ut(e,t){1&e&&c.Rb(0,"app-video-suggestions")}function mt(e,t){if(1&e){var n=c.Xb();c.Wb(0,"app-video-comments-form",41),c.ec("added",(function(e){return c.Bc(n),c.ic(2).commentAdded(e)})),c.Vb()}if(2&e){var i=c.ic(2);c.pc("videoData",i.videoData)}}function pt(e,t){if(1&e){var n=c.Xb();c.Ub(0),c.Wb(1,"div",7),c.Rb(2,"app-video-js-player",8),c.Vb(),c.Wb(3,"div",9),c.Wb(4,"div",10),c.Jc(5,ot,2,0,"span",3),c.Jc(6,ct,2,1,"ng-container",3),c.Vb(),c.Wb(7,"div",11),c.Wb(8,"div",12),c.ec("click",(function(){c.Bc(n);var e=c.ic();return e.updateLikes(e.videoData,"like")})),c.Rb(9,"i",13),c.Wb(10,"p"),c.Lc(11),c.Vb(),c.Vb(),c.Wb(12,"div",12),c.ec("click",(function(){c.Bc(n);var e=c.ic();return e.updateLikes(e.videoData,"dislike")})),c.Rb(13,"i",14),c.Wb(14,"p"),c.Lc(15),c.Vb(),c.Vb(),c.Wb(16,"div",12),c.ec("click",(function(){return c.Bc(n),c.ic().openSocialShareModal()})),c.Rb(17,"i",15),c.Wb(18,"p"),c.Lc(19,"Share"),c.Vb(),c.Vb(),c.Wb(20,"div",12),c.ec("click",(function(){c.Bc(n);var e=c.ic();return e.saveVideo(e.videoData)})),c.Rb(21,"i",16),c.Wb(22,"p"),c.Lc(23),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Wb(24,"div",17),c.Jc(25,rt,4,2,"div",18),c.Jc(26,lt,1,1,"app-video-details-form",19),c.Vb(),c.Wb(27,"div",20),c.Wb(28,"span",21),c.Lc(29),c.Vb(),c.Wb(30,"span",22),c.Lc(31,"\xb7"),c.Vb(),c.Wb(32,"span",23),c.Lc(33),c.jc(34,"dateFromNow"),c.Vb(),c.Vb(),c.Jc(35,dt,8,7,"div",24),c.Wb(36,"div",25),c.Jc(37,ut,1,0,"app-video-suggestions",3),c.Vb(),c.Wb(38,"div",26),c.Jc(39,mt,1,1,"app-video-comments-form",27),c.Rb(40,"mat-spinner",28),c.Rb(41,"app-video-comments-list",29),c.Vb(),c.Tb()}if(2&e){var i=c.ic();c.Cb(2),c.pc("videoData",i.videoData)("videoUrl",i.apiUrl+"uploads/videos/"+i.videoData.filename),c.Cb(3),c.pc("ngIf",0===(null==i.videoData.tags?null:i.videoData.tags.length)),c.Cb(1),c.pc("ngIf",(null==i.videoData.tags?null:i.videoData.tags.length)>0),c.Cb(3),c.Gb("liked",null==i.userVideoConnection?null:i.userVideoConnection.liked),c.Cb(2),c.Mc(i.videoData.likes),c.Cb(2),c.Gb("disliked",null==i.userVideoConnection?null:i.userVideoConnection.disliked),c.Cb(2),c.Mc(i.videoData.dislikes),c.Cb(5),c.Gb("saved","saved"===(null==i.userVideoConnection?null:i.userVideoConnection.saved)),c.Cb(3),c.Mc("saved"===(null==i.userVideoConnection?null:i.userVideoConnection.saved)?"Saved":"Save"),c.Cb(2),c.pc("ngIf",!i.showTagsForm),c.Cb(1),c.pc("ngIf",i.showTagsForm),c.Cb(3),c.Mc((null==i.videoData?null:i.videoData.views)+" view"+(1===(null==i.videoData?null:i.videoData.views)?"":"s")),c.Cb(4),c.Mc(c.kc(34,24,i.videoData.created_at)),c.Cb(2),c.pc("ngIf",null==i.videoData?null:i.videoData.channel),c.Cb(2),c.pc("ngIf",i.isSmallScreen),c.Cb(2),c.pc("ngIf",i.auth.loggedIn()),c.Cb(1),c.pc("diameter",15)("hidden",!i.auth.loggedIn()||"finished"===i.commentsLoading),c.Cb(1),c.pc("videoData",i.videoData)("videoComments",i.videoComments)}}function bt(e,t){if(1&e&&c.Rb(0,"app-chat-box",42),2&e){var n=c.ic();c.pc("messages",n.videoData.messages)}}function ht(e,t){1&e&&c.Rb(0,"app-video-suggestions")}var gt,vt=((gt=function(){function e(t,n,i,o,c,s,r,l,d){_classCallCheck(this,e),this.route=t,this.videoService=n,this.router=i,this.getAuthUser=o,this.auth=c,this.toastr=s,this.loader=r,this.titleService=l,this.dialog=d,this.apiUrl=a.c,this.userVideoConnection={liked:0,disliked:0,saved:"",viewed:!1},this.videoJSPlayerOptions=a.w,this.showTagsForm=!1,this.isSmallScreen=$.a.isSmallScreen(),this.commentsRefreshed=!1,this.videoComments=[],this.commentsLoading="idle",this.subscriptions=[],this.authUser=this.getAuthUser.transform()}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.subscriptions.push(this.videoService.getVideoById({id:this.route.snapshot.queryParams.id}).subscribe((function(t){e.videoData=t,e.titleService.setTitle(t.name),e.auth.loggedIn()&&(e.userVideoConnection=e.checkUserVideoConnection(t),e.updateViewsCount(t),e.indexUserTags(t),e.getComments())})))}},{key:"checkUserVideoConnection",value:function(e){var t,n,i,o=this,a=null==e?void 0:e.users_vids.find((function(e){return e.id===o.authUser.id}));return a?{liked:null===(t=a.users_videos)||void 0===t?void 0:t.liked,disliked:null===(n=a.users_videos)||void 0===n?void 0:n.disliked,saved:a.users_videos.saved?"saved":"",viewed:!!(null===(i=null==a?void 0:a.users_videos)||void 0===i?void 0:i.viewed)}:this.userVideoConnection}},{key:"updateViewsCount",value:function(e){var t=this;this.userVideoConnection.viewed||this.subscriptions.push(this.videoService.updateViews({user_id:this.authUser.id,video_id:e.id}).subscribe((function(e){t.videoData=e})))}},{key:"updateLikes",value:function(e,t){this.auth.loggedIn()?(e=this.getLikesState(t,e),this.videoService.updateLikes({video_id:e.id,user_id:this.authUser.id,likes:e.likes,dislikes:e.dislikes,liked:this.userVideoConnection.liked,disliked:this.userVideoConnection.disliked,saved:e.saved}).subscribe((function(e){}))):this.toastr.error("Please log in first to take this action")}},{key:"getLikesState",value:function(e,t){return"like"===e?(this.userVideoConnection.liked=+!this.userVideoConnection.liked,this.userVideoConnection.disliked&&(t.dislikes+=0===t.dislikes?0:-1),this.userVideoConnection.disliked=0,t.likes+=this.userVideoConnection.liked?1:-1):(this.userVideoConnection.disliked=+!this.userVideoConnection.disliked,this.userVideoConnection.liked&&(t.likes+=0===t.likes?0:-1),this.userVideoConnection.liked=0,t.dislikes+=this.userVideoConnection.disliked?1:-1),t}},{key:"indexUserTags",value:function(e){var t,n={user_id:this.authUser.id,video_id:e.id,tags:null===(t=this.videoData)||void 0===t?void 0:t.tags};this.subscriptions.push(this.videoService.indexUserTags(n).subscribe((function(e){})))}},{key:"openVideoByTag",value:function(e){return Object(h.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.router.navigate(["videos"],{queryParams:{tag:e}});case 2:case"end":return t.stop()}}),t,this)})))}},{key:"saveVideo",value:function(e){var t=this;this.subscriptions.push(this.videoService.saveVideo({video_id:e.id,user_id:this.authUser.id,saved:"saved"===this.userVideoConnection.saved?0:1}).subscribe((function(e){t.userVideoConnection.saved=e.saved?"saved":""})))}},{key:"saveVideoDetails",value:function(e){var t=this;this.subscriptions.push(this.videoService.saveVideoDetails(e).subscribe((function(e){t.videoData=e,t.titleService.setTitle(e.name),t.showTagsForm=!1})))}},{key:"getComments",value:function(){var e=this;this.commentsLoading="loading",this.subscriptions.push(this.videoService.getVideoComments({video_id:this.videoData.id}).subscribe((function(t){e.videoComments=t,e.commentsLoading="finished"})))}},{key:"commentAdded",value:function(e){this.commentsRefreshed=!0,this.videoComments=e}},{key:"getVideosByTag",value:function(e){return Object(h.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.router.navigate(["videos"],{queryParams:{tag:e}});case 2:case"end":return t.stop()}}),t,this)})))}},{key:"buildSubscribersCountText",value:function(e){var t=e.channel.subscribers_count;return t+" subscriber"+(1===t?"":"s")}},{key:"openSocialShareModal",value:function(){this.dialog.open(X.a,{width:"500px",height:"400px",data:{shareUrl:window.location.href}}).afterClosed().subscribe((function(e){}))}},{key:"ngAfterViewInit",value:function(){}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach((function(e){return e.unsubscribe()}))}}]),e}()).\u0275fac=function(e){return new(e||gt)(c.Qb(o.a),c.Qb(s.a),c.Qb(o.e),c.Qb(d.a),c.Qb(q.a),c.Qb(G.b),c.Qb(K.a),c.Qb(Y.d),c.Qb(H.b))},gt.\u0275cmp=c.Kb({type:gt,selectors:[["app-play-video"]],decls:7,vars:4,consts:[[3,"tagSelected",4,"ngIf"],[1,"ads-block"],[1,"ads-block-left"],[4,"ngIf"],[1,"ads-block-right"],[3,"messages",4,"ngIf"],[3,"tagSelected"],[1,"videoWrap"],[3,"videoData","videoUrl"],[1,"main-tags"],[1,"main-tags-text"],[1,"main-tags-like"],[1,"main-tags-share",3,"click"],[1,"fas","fa-thumbs-up"],[1,"fas","fa-thumbs-down"],[1,"fas","fa-share-alt"],[1,"fas","fa-plus-square"],[1,"tags-container"],["class","editable-details",4,"ngIf"],[3,"videoData","formReady",4,"ngIf"],[1,"details-row"],[1,"views-count"],[1,"dot"],[1,"date"],["class","channel-block",3,"routerLink",4,"ngIf"],[1,"right-side"],[1,"comments-block"],["class","w-100",3,"videoData","added",4,"ngIf"],[3,"diameter","hidden"],[3,"videoData","videoComments"],["class","tag",3,"click",4,"ngFor","ngForOf"],[1,"tag",3,"click"],[1,"editable-details"],[1,"video-title"],["id","add-tags",3,"click",4,"ngIf"],["id","add-tags",3,"click"],[3,"videoData","formReady"],[1,"channel-block",3,"routerLink"],["alt","avatar",1,"avatar",3,"src"],[1,"channel-name"],[1,"subscribers-count"],[1,"w-100",3,"videoData","added"],[3,"messages"]],template:function(e,t){1&e&&(c.Jc(0,it,1,0,"app-user-tags",0),c.Wb(1,"div",1),c.Wb(2,"div",2),c.Jc(3,pt,42,26,"ng-container",3),c.Vb(),c.Wb(4,"div",4),c.Jc(5,bt,1,1,"app-chat-box",5),c.Jc(6,ht,1,0,"app-video-suggestions",3),c.Vb(),c.Vb()),2&e&&(c.pc("ngIf",t.auth.loggedIn()),c.Cb(3),c.pc("ngIf",t.videoData),c.Cb(2),c.pc("ngIf",t.videoData),c.Cb(1),c.pc("ngIf",!t.isSmallScreen))},directives:[i.m,Z.a,se,b.b,Ue,i.l,m.a,Ee,o.f,tt,he,nt.a],pipes:[y.a,C.a],styles:[".saved[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .saved[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#18b587!important}#add-tags[_ngcontent-%COMP%]{background-color:#18b587;color:#fff;margin-left:10px;display:flex;align-items:center;padding:8px 24px}.tag[_ngcontent-%COMP%]{cursor:pointer}.details-row[_ngcontent-%COMP%]{display:flex;align-items:center}.details-row[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{margin:0 10px;color:#818181}.channel-block[_ngcontent-%COMP%]{cursor:pointer;border-top:.5px solid #c9c9c9;border-bottom:.5px solid #c9c9c9;padding:12px 0;display:flex;flex-direction:row}.ads-block-right[_ngcontent-%COMP%]{padding-top:50px}.main-tags[_ngcontent-%COMP%], .tags-container[_ngcontent-%COMP%]   .editable-details[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.main-tags[_ngcontent-%COMP%]{margin-bottom:16px;margin-top:24px;align-items:flex-start}.main-tags[_ngcontent-%COMP%]   .main-tags-text[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;flex:1;margin-right:24px;align-items:center}.main-tags[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#0035c6;font-size:16px;font-family:Muli-Bold,sans-serif;margin-right:16px;margin-bottom:8px}.main-tags[_ngcontent-%COMP%]   .main-tags-like[_ngcontent-%COMP%]{display:flex;color:#545454}.main-tags[_ngcontent-%COMP%]   .main-tags-share[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer}.main-tags[_ngcontent-%COMP%]   .main-tags-share[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-left:5px;color:#545454;font-size:12px;font-family:Muli-Light,sans-serif;margin-bottom:0!important}.main-tags[_ngcontent-%COMP%]   .liked[_ngcontent-%COMP%]{color:#18b587!important}.main-tags[_ngcontent-%COMP%]   .disliked[_ngcontent-%COMP%]{color:#f53c6f!important}"]}),gt);function ft(e,t){if(1&e){var n=c.Xb();c.Wb(0,"li",18),c.ec("click",(function(){c.Bc(n);var e=t.$implicit;return c.ic(4).getVideosByTag(e.name)})),c.Wb(1,"span"),c.Lc(2),c.Vb(),c.Vb()}if(2&e){var i=t.$implicit;c.Cb(2),c.Mc(i.name)}}function Ct(e,t){if(1&e){var n=c.Xb();c.Wb(0,"div",4),c.Wb(1,"div",5),c.Wb(2,"img",6),c.ec("click",(function(){c.Bc(n);var e=t.$implicit,i=c.ic(3);return i.openVideoPage(e,i.userVideos.username)})),c.jc(3,"getImgPath"),c.Vb(),c.Wb(4,"span",7),c.Lc(5),c.Vb(),c.Vb(),c.Wb(6,"div",8),c.Wb(7,"h4",9),c.Lc(8),c.Vb(),c.Wb(9,"div",10),c.Wb(10,"span",11),c.Lc(11),c.Vb(),c.Wb(12,"span",12),c.Lc(13,"\xb7"),c.Vb(),c.Wb(14,"span",13),c.Lc(15),c.Vb(),c.Wb(16,"span",12),c.Lc(17,"\xb7"),c.Vb(),c.Wb(18,"span",14),c.Lc(19),c.jc(20,"dateFromNow"),c.Vb(),c.Vb(),c.Wb(21,"p",15),c.Lc(22),c.Vb(),c.Wb(23,"div",16),c.Wb(24,"ul"),c.Jc(25,ft,3,1,"li",17),c.Vb(),c.Vb(),c.Vb(),c.Vb()}if(2&e){var i=t.$implicit;c.Cb(2),c.pc("src",c.kc(3,9,i.thumbnail),c.Ec),c.Cb(3),c.Mc(i.duration),c.Cb(3),c.Mc(i.name),c.Cb(2),c.pc("routerLink","/channels/"+(null==i||null==i.user?null:i.user.username)),c.Cb(1),c.Mc(i.channel.name),c.Cb(4),c.Nc(" ","live"===i.status?"17k watching":i.views+" view"+(1===i.views?"":"s")," "),c.Cb(4),c.Mc(c.kc(20,11,i.created_at)),c.Cb(3),c.Nc(" ",i.description," "),c.Cb(3),c.pc("ngForOf",null==i?null:i.tags)}}function yt(e,t){if(1&e&&(c.Ub(0),c.Jc(1,Ct,26,13,"div",3),c.Tb()),2&e){var n=c.ic(2);c.Cb(1),c.pc("ngForOf",n.userVideos.users_vids)}}function _t(e,t){if(1&e&&(c.Wb(0,"div",1),c.Jc(1,yt,2,1,"ng-container",2),c.Vb()),2&e){var n=c.ic();c.Cb(1),c.pc("ngIf",!n.search)}}var kt,Ot,wt=((kt=function(){function e(t,n,i,o,c,s){_classCallCheck(this,e),this.videoService=t,this.router=n,this.subject=i,this.channelsService=o,this.route=c,this.getAuthUser=s,this.channelsVideos=[],this.apiUrl=a.c}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.authUser=this.getAuthUser.transform(),this.videoService.getUserSavedVideos({user_id:this.authUser.id}).subscribe((function(t){e.userVideos=t}))}},{key:"openVideoPage",value:function(e,t){return Object(h.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=Object(g.a)(e,t),n.next=3,this.router.navigate([i.route],{queryParams:i.params});case 3:case"end":return n.stop()}}),n,this)})))}},{key:"getVideosByTag",value:function(e){return Object(h.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.router.navigate(["videos"],{queryParams:{tag:e}});case 2:case"end":return t.stop()}}),t,this)})))}}]),e}()).\u0275fac=function(e){return new(e||kt)(c.Qb(s.a),c.Qb(o.e),c.Qb(r.a),c.Qb(l.a),c.Qb(o.a),c.Qb(d.a))},kt.\u0275cmp=c.Kb({type:kt,selectors:[["app-show-saved-videos"]],decls:1,vars:1,consts:[["id","videos-list",4,"ngIf"],["id","videos-list"],[4,"ngIf"],["class","video-container flex-wrap",4,"ngFor","ngForOf"],[1,"video-container","flex-wrap"],[1,"thumbnail"],[3,"src","click"],[1,"duration"],[1,"details"],[1,"title"],[1,"shortened-details"],[1,"channel-name",3,"routerLink"],[1,"dot"],[1,"watchers-count"],[1,"upload-time"],[1,"shortened-description"],[1,"tags"],[3,"click",4,"ngFor","ngForOf"],[3,"click"]],template:function(e,t){1&e&&c.Jc(0,_t,2,1,"div",0),2&e&&c.pc("ngIf",t.userVideos)},directives:[i.m,i.l,o.f],pipes:[C.a,y.a],styles:[".filter-toggle-btn[_ngcontent-%COMP%]{text-transform:uppercase;background-color:unset;display:flex;align-items:center;font-family:Muli-Bold;padding:10px}.filter-toggle-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:10px}"]}),kt),Pt=n("NUQi"),Vt=n("qe5e"),Mt=((Ot=function(){function e(){_classCallCheck(this,e),this.config={controls:!0,bigPlayButton:!1,width:320,height:240,fluid:!1,plugins:{record:{audio:!0,video:!0,maxLength:110,debug:!0}}}}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ngAfterViewInit",value:function(){this.player=Object(ee.default)(document.getElementById("video"),this.config,(function(){var e="Using video.js "+ee.default.VERSION+" with videojs-record "+ee.default.getPluginVersion("record")+" and recordrtc "+Vt.version;ee.default.log(e)}),(function(){}));var e=this.player;this.player.on("finishRecord",(function(){console.log("finished recording: ",e.recordedData)}))}}]),e}()).\u0275fac=function(e){return new(e||Ot)},Ot.\u0275cmp=c.Kb({type:Ot,selectors:[["app-videojs-test"]],decls:1,vars:0,consts:[["id","video","playsinline","",1,"video-js"]],template:function(e,t){1&e&&c.Rb(0,"video",0)},styles:[""]}),Ot);function xt(e,t){if(1&e&&c.Rb(0,"iframe",5),2&e){var n=c.ic(2);c.pc("src",n.safeUrl,c.Dc)}}function Wt(e,t){if(1&e&&(c.Wb(0,"div",2),c.Jc(1,xt,1,1,"iframe",4),c.Vb()),2&e){var n=c.ic();c.Cb(1),c.pc("ngIf",n.safeUrl&&n.isYoutubeVideo(n.url))}}function Rt(e,t){if(1&e&&c.Rb(0,"iframe",6),2&e){var n=c.ic();c.pc("src",n.safeUrl,c.Dc)}}var Ft,It,Dt,Ut=[{path:"add",component:(Ft=function(){function e(t){_classCallCheck(this,e),this.sanitizer=t,this.isValidUrl=!1}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"getUrl",value:function(e){var t=e.clipboardData.getData("text");this.url=t,this.constructSafeUrl(t),console.log(t)}},{key:"checkUrl",value:function(e){var t=e.target.value;this.url=t,console.log(this.isTikTokVideo(t)),this.isYoutubeVideo(t)?(t=this.transformUrlForYoutube(t),this.constructSafeUrl(t)):this.constructSafeUrl(t)}},{key:"isYoutubeVideo",value:function(e){var t=/^(?:https?:\/\/)?(?:m\.|www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/;return!!e.match(t)&&e.match(t)[1]}},{key:"isTikTokVideo",value:function(e){var t=_wrapRegExp(/https?:\/\/(?:(?:www|m)\.(?:tiktok.com)\/(?:v|embed|trending)(?:\/)?(?:\?shareId=)?)([0-9a-z]+)/,{id:1});return console.log("aaa",e,e.match(t)[1]),!!e.match(t)&&!!e.match(t)[1]}},{key:"transformUrlForYoutube",value:function(e){return e.match(/(?:https?:\/\/)?(?:www\.|m\.)?youtu(?:be)?\.(?:com|be)(?:\/watch\/?\?v=|\/embed\/|\/)([^\s&\?\/\#]+)/),e.split("&")[0].replace("/watch?v=","/embed/")}},{key:"constructSafeUrl",value:function(e){this.isYoutubeVideo(e)&&(this.isValidUrl=!0,e=this.transformUrlForYoutube(e)),this.safeUrl=this.sanitizer.bypassSecurityTrustResourceUrl(e)}}]),e}(),Ft.\u0275fac=function(e){return new(e||Ft)(c.Qb(Y.b))},Ft.\u0275cmp=c.Kb({type:Ft,selectors:[["app-add-video"]],decls:4,vars:2,consts:[["id","url-input","placeholder","Paste the url here",3,"paste","change"],["class","video-container",4,"ngIf"],[1,"video-container"],["width","560","height","500","title","YouTube video player","frameborder","0","allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture","allowfullscreen","",3,"src",4,"ngIf"],["width","560","height","315","title","YouTube video player","frameborder","0","allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture","allowfullscreen","",3,"src",4,"ngIf"],["width","560","height","315","title","YouTube video player","frameborder","0","allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture","allowfullscreen","",3,"src"],["width","560","height","500","title","YouTube video player","frameborder","0","allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture","allowfullscreen","",3,"src"]],template:function(e,t){1&e&&(c.Wb(0,"input",0),c.ec("paste",(function(e){return t.getUrl(e)}))("change",(function(e){return t.checkUrl(e)})),c.Vb(),c.Jc(1,Wt,2,1,"div",1),c.Wb(2,"div",2),c.Jc(3,Rt,1,1,"iframe",3),c.Vb()),2&e&&(c.Cb(1),c.pc("ngIf",t.isValidUrl),c.Cb(2),c.pc("ngIf",t.safeUrl&&!t.isYoutubeVideo(t.url)))},directives:[i.m],styles:[".video-container[_ngcontent-%COMP%]{margin-top:20px}#url-input[_ngcontent-%COMP%]{border:1px solid #c3c3c3;height:35px;width:400px;padding:5px}"]}),Ft)},{path:"test",component:Mt},{path:"",component:E,pathMatch:"full",data:{title:"Videos"}},{path:"play",component:vt,data:{title:"Play Video"}},{path:"saved",component:wt,canActivate:[Pt.a],data:{title:"Saved Videos"}}],Lt=((It=function e(){_classCallCheck(this,e)}).\u0275mod=c.Ob({type:It}),It.\u0275inj=c.Nb({factory:function(e){return new(e||It)},imports:[[o.i.forChild(Ut)],o.i]}),It),St=n("PCNd"),Tt=((Dt=function e(){_classCallCheck(this,e)}).\u0275mod=c.Ob({type:Dt}),Dt.\u0275inj=c.Nb({factory:function(e){return new(e||Dt)},imports:[[i.c,Lt,St.a]]}),Dt)}}]);
//# sourceMappingURL=videos-videos-module-es5.88cba1db91cdc1eec2c9.js.map