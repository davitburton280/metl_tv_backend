{"version":3,"sources":["webpack:///src/app/shared/components/chat/group-chat/left-side/group-chat-left-side-holder.component.ts","webpack:///src/app/shared/components/chat/group-chat/left-side/group-chat-left-side-holder.component.html","webpack:///src/app/core/components/modals/show-chat-group-members/show-chat-group-members.component.html","webpack:///src/app/core/components/modals/show-chat-group-members/show-chat-group-members.component.ts","webpack:///src/app/shared/components/chat/group-chat/right-side/group-chat-top/group-chat-members/members-list/members-list.component.html","webpack:///src/app/shared/components/chat/group-chat/right-side/group-chat-top/group-chat-members/members-list/members-list.component.ts","webpack:///src/app/core/constants/chat.ts","webpack:///src/app/shared/components/chat/group-chat/right-side/group-chat-top/group-chat-members/members-add-form/members-add-form.component.ts","webpack:///src/app/shared/components/chat/group-chat/right-side/group-chat-top/group-chat-members/members-add-form/members-add-form.component.html","webpack:///src/app/shared/components/user-tags/user-tags.component.ts","webpack:///src/app/shared/components/user-tags/user-tags.component.html","webpack:///src/app/shared/components/chat/group-chat/right-side/group-chat-top/group-avatar-handler/group-avatar-handler.component.ts","webpack:///src/app/shared/components/chat/group-chat/right-side/group-chat-top/group-avatar-handler/group-avatar-handler.component.html","webpack:///src/app/shared/components/chat/group-chat/right-side/group-chat-top/group-chat-actions/group-chat-actions.component.html","webpack:///src/app/shared/components/chat/group-chat/right-side/group-chat-top/group-chat-actions/group-chat-actions.component.ts","webpack:///src/app/shared/components/chat/group-chat/right-side/group-chat-top/group-chat-members/group-chat-members.component.ts","webpack:///src/app/shared/components/chat/group-chat/right-side/group-chat-top/group-chat-members/group-chat-members.component.html","webpack:///src/app/shared/components/chat/group-chat/right-side/group-chat-top/group-chat-top.component.html","webpack:///src/app/shared/components/chat/group-chat/right-side/group-chat-top/group-chat-top.component.ts","webpack:///src/app/shared/components/chat/group-chat/right-side/group-chat-right-side-holder.component.ts","webpack:///src/app/shared/components/chat/group-chat/right-side/group-chat-right-side-holder.component.html","webpack:///src/app/shared/components/chat/group-chat/left-side/group-form/group-form.component.ts","webpack:///src/app/shared/components/chat/group-chat/left-side/group-form/group-form.component.html"],"names":["GroupChatLeftSideHolderComponent","mobileHelper","provide","useClass","ShowChatGroupMembersComponent","groupsMessagesStore","_userInfoService","activeTab","this","_getAuthInfo","getGroupMembers","_userInfo","subscribe","data","authUser","console","log","selectedGroup","selectedGroupMessages","chat_group_members","filter","m","chat_groups_members","confirmed","tab","MembersListComponent","dialog","chatService","socketService","notificationsStore","isEmptyObj","modalMode","onlineMembers","subscriptions","trackGroupChanges","getOnlineMembers","getAcceptedJoinGroup","getDeclinedJoinChatGroup","getRemovedSavedMember","getLeftGroup","getMembersCountDelimiter","onLogout","push","selectedGroupsMessages$","sGroup","length","member","open","afterClosed","removeGroupMember","group_id","id","member_id","dt","changeGroup","removeFromChatGroup","from_user","group","msg","first_name","last_name","name","removeFromChatGroupNotify","leftGroups","setGroupsMessages","selectGroup","getConnectedGroupMembers","group_name","username","membersOnlineFeedback","members","getAcceptedJoinChatGroup","notification","rest","updateNotifications","leaveChatGroupNotify","user","u","groupMember","groupName","groupsMessages","find","gm","width","height","creator_id","forEach","s","unsubscribe","MembersAddFormComponent","usersService","fb","userContacts","filteredContacts","inputGroupMembers","groupMembers","memberCtrl","separatorKeysCodes","initForm","getUserContacts","getContactsFilteredBySearch","groupChatDetailsForm","member_ids","required","accepted","patchValue","user_id","blocked","valueChanges","search","fc","fullNameLowerCased","toLowerCase","includes","e","value","option","map","chipsInput","nativeElement","setValue","inviteMembers","inviteToNewChatGroup","invited_members","group_type","showMembersForm","index","indexOf","splice","autoCompleteMemberSelected","UserTagsComponent","videoService","auth","tags","tagSelected","loggedIn","getUserTags","emit","GroupAvatarHandlerComponent","removeAvatarShown","groupsMessages$","file","target","files","formData","FormData","append","avatarInput","changeGroupAvatar","d","changeAvatar","GroupChatActionsComponent","removeGroup","initiator","leaveGroup","leaveChatGroup","GroupChatMembersComponent","groupChatMessagesStore","GroupChatTopComponent","groupMessagesStore","transform","showResponsiveChatBox","GroupChatRightSideHolderComponent","getSelectedGroup","GroupFormComponent","showGroupChatForm","groupForm","valid","setAddGroupFormValue","shown","addGroup","toggleForm"],"mappings":"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","file":"x","sourcesContent":["import {Component, Input, OnInit} from '@angular/core';\r\nimport {MobileResponsiveHelper} from '@core/helpers/mobile-responsive-helper';\r\n\r\n@Component({\r\n    selector: 'app-group-chat-left-side-holder',\r\n    templateUrl: './group-chat-left-side-holder.component.html',\r\n    styleUrls: ['./group-chat-left-side-holder.component.scss'],\r\n    providers: [{provide: MobileResponsiveHelper, useClass: MobileResponsiveHelper}]\r\n})\r\nexport class GroupChatLeftSideHolderComponent implements OnInit {\r\n    @Input() authUser;\r\n\r\n    constructor(\r\n        public mobileHelper: MobileResponsiveHelper,\r\n    ) {\r\n    }\r\n\r\n    ngOnInit(): void {\r\n    }\r\n\r\n}\r\n","<div class=\"people-groups-container\"\r\n     [class.responsive-list]=\"mobileHelper.isChatUsersListSize()\">\r\n    <div id=\"group-form-container\">\r\n        <app-group-form [authUser]=\"authUser\"></app-group-form>\r\n    </div>\r\n    <app-groups-list [authUser]=\"authUser\"></app-groups-list>\r\n</div>\r\n","<div class=\"group-members-wrap\">\r\n    <h1>\r\n        <span class=\"group-name\">{{selectedGroup.name}}</span> members\r\n    </h1>\r\n\r\n    <ul class=\"nav nav-tabs\" id=\"member-tabs-list\" role=\"tablist\">\r\n        <li class=\"nav-item\" *ngFor=\"let tab of ['All members','Admins'];\">\r\n            <a class=\"nav-link\" [class.active]=\"tab === activeTab\" id=\"{{tab}}-tab\"\r\n               (click)=\"changeActiveTab(tab)\" data-toggle=\"tab\" role=\"tab\"\r\n               aria-controls=\"pWatch\"\r\n               aria-selected=\"true\">{{tab}}</a>\r\n        </li>\r\n    </ul>\r\n\r\n    <div class=\"members\">\r\n        <ul>\r\n            <li *ngFor=\"let member of getOnlyJoinedMembers()\">\r\n                <div class=\"details\">\r\n                    <img class=\"avatar\" [src]=\"member.avatar|getImgPath: 'images'\">\r\n                    <span>{{member.first_name + ' ' + member.last_name}}</span>\r\n                </div>\r\n\r\n                <div class=\"actions\">\r\n                    <button [matMenuTriggerFor]=\"menu\" class=\"more-actions-btn\">\r\n                        <i class=\"fas fa-ellipsis-h\"></i>\r\n                    </button>\r\n\r\n                    <mat-menu #menu=\"matMenu\">\r\n\r\n                        <button mat-menu-item id=\"view-profile\">\r\n                            <i class=\"fas fa-times-circle\"></i>\r\n                            <span>View profile</span>\r\n                        </button>\r\n                        <button mat-menu-item id=\"make-admin\">\r\n                            <i class=\"fas fa-times-circle\"></i>\r\n                            <span>Make admin</span>\r\n                        </button>\r\n                    </mat-menu>\r\n                </div>\r\n            </li>\r\n        </ul>\r\n        <!--            <app-group-members-list [selectedGroup]=\"selectedGroup\" [modalMode]=\"true\"-->\r\n        <!--                              [authUser]=\"authUser\"></app-group-members-list>-->\r\n    </div>\r\n</div>\r\n","import {Component, OnInit} from '@angular/core';\r\nimport {GroupsMessagesSubjectService} from '@core/services/stores/groups-messages-subject.service';\r\nimport {CurrentUserData} from '@core/interfaces';\r\nimport {UserInfoService} from '@core/services/user-info.service';\r\n\r\n@Component({\r\n    selector: 'app-show-chat-group-members',\r\n    templateUrl: './show-chat-group-members.component.html',\r\n    styleUrls: ['./show-chat-group-members.component.scss']\r\n})\r\nexport class ShowChatGroupMembersComponent implements OnInit {\r\n    selectedGroup;\r\n    authUser: CurrentUserData;\r\n\r\n    activeTab = 'All members';\r\n\r\n    constructor(\r\n        private groupsMessagesStore: GroupsMessagesSubjectService,\r\n        // private getAuthUser: GetAuthUserPipe\r\n        private _userInfoService: UserInfoService\r\n    ) {\r\n        this._getAuthInfo();\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        // this.authUser = this.getAuthUser.transform();\r\n        this.getGroupMembers();\r\n    }\r\n\r\n    private _getAuthInfo() {\r\n        this._userInfoService._userInfo.subscribe((data) => {\r\n            this.authUser = data;\r\n            console.log(this.authUser, 'Show Chat Group members  AUTHUSER DATA');\r\n        });\r\n    }\r\n\r\n    getGroupMembers() {\r\n        this.selectedGroup = this.groupsMessagesStore.selectedGroupMessages;\r\n    }\r\n\r\n    getOnlyJoinedMembers() {\r\n        return this.selectedGroup.chat_group_members.filter(m => m.chat_groups_members.confirmed);\r\n    }\r\n\r\n    changeActiveTab(tab) {\r\n        this.activeTab = tab;\r\n    }\r\n\r\n}\r\n","<div class=\"members-list\" *ngIf=\"selectedGroup.chat_group_members?.length > 0\">\r\n    <ul>\r\n        <li class=\"group-member\"\r\n            *ngFor=\"let m of selectedGroup.chat_group_members| slice:0: getMembersCountDelimiter(); let i=index\"\r\n            [class.modal-mode]=\"modalMode\"\r\n            [class.pending]=\"!m.chat_groups_members.accepted\">\r\n\r\n            <div class=\"avatar-status-wrap\">\r\n                <img class=\"avatar\" [matTooltip]=\"m.first_name+ ' '+m.last_name\"\r\n                     [src]=\"m.avatar|getImgPath: 'images'\">\r\n                <mat-icon *ngIf=\"ifRemoveMemberShown(m)\" (click)=\"removeSavedMember(m)\">cancel</mat-icon>\r\n                <div class=\"status\" [ngClass]=\"getUserCurrentStatus(m) ? 'online':'offline'\"></div>\r\n            </div>\r\n\r\n            <ng-container *ngIf=\"modalMode\">\r\n                <div class=\"member-name\">\r\n                    <span>{{m.first_name + ' ' + m.last_name}}</span>\r\n                </div>\r\n                <div class=\"actions\">\r\n                    <i class=\"fa fa-ban\" *ngIf=\"m.id !== selectedGroup?.creator_id\"\r\n                       (click)=\"removeSavedMember(m)\"></i>\r\n                </div>\r\n            </ng-container>\r\n        </li>\r\n    </ul>\r\n    <button id=\"show-more-members\" (click)=\"openAllMembersModal()\" [name]=\"selectedGroup.name\" *ngIf=\"!modalMode\">\r\n        <i class=\"fas fa-ellipsis-h\"></i>\r\n    </button>\r\n</div>\r\n","import {Component, Input, OnDestroy, OnInit} from '@angular/core';\r\nimport {ConfirmationDialogComponent} from '@core/components/modals/confirmation-dialog/confirmation-dialog.component';\r\nimport {Subscription} from 'rxjs';\r\nimport {MatDialog} from '@angular/material/dialog';\r\nimport {ChatService} from '@core/services/chat.service';\r\nimport {ShowChatGroupMembersComponent} from '@core/components/modals/show-chat-group-members/show-chat-group-members.component';\r\nimport {GroupsMessagesSubjectService} from '@core/services/stores/groups-messages-subject.service';\r\nimport {ALLOWED_GROUP_MEMBERS_COUNT_ON_TOP} from '@core/constants/chat';\r\nimport {SocketIoService} from '@core/services/socket-io.service';\r\nimport {NotificationsSubjectStoreService} from '@core/services/stores/notifications-subject-store.service';\r\nimport {User} from '@shared/models/user';\r\nimport {CheckForEmptyObjectPipe} from '@shared/pipes/check-for-empty-object.pipe';\r\n\r\n@Component({\r\n    selector: 'app-members-list',\r\n    templateUrl: './members-list.component.html',\r\n    styleUrls: ['./members-list.component.scss'],\r\n})\r\nexport class MembersListComponent implements OnInit, OnDestroy {\r\n    @Input() selectedGroup;\r\n    @Input() authUser;\r\n    @Input() modalMode = false;\r\n\r\n    onlineMembers = [];\r\n    subscriptions: Subscription[] = [];\r\n\r\n    membersCountLimit;\r\n\r\n\r\n    constructor(\r\n        private dialog: MatDialog,\r\n        private chatService: ChatService,\r\n        private socketService: SocketIoService,\r\n        private groupsMessagesStore: GroupsMessagesSubjectService,\r\n        private notificationsStore: NotificationsSubjectStoreService,\r\n        private isEmptyObj: CheckForEmptyObjectPipe\r\n    ) {\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.trackGroupChanges();\r\n        this.getOnlineMembers();\r\n        this.getAcceptedJoinGroup();\r\n        this.getDeclinedJoinChatGroup();\r\n        this.getRemovedSavedMember();\r\n        this.getLeftGroup();\r\n        this.getMembersCountDelimiter();\r\n        this.onLogout();\r\n    }\r\n\r\n    trackGroupChanges() {\r\n        this.subscriptions.push(this.groupsMessagesStore.selectedGroupsMessages$.subscribe((sGroup: any) => {\r\n            this.selectedGroup = sGroup;\r\n            // console.log(sGroup)\r\n            this.getOnlineMembers();\r\n        }));\r\n    }\r\n\r\n    getMembersCountDelimiter() {\r\n        return this.modalMode ? this.selectedGroup.chat_group_members.length : ALLOWED_GROUP_MEMBERS_COUNT_ON_TOP;\r\n    }\r\n\r\n    removeSavedMember(member) {\r\n        this.subscriptions.push(this.dialog.open(ConfirmationDialogComponent).afterClosed().subscribe(confirmed => {\r\n            if (confirmed) {\r\n                this.chatService.removeGroupMember({\r\n                    group_id: this.selectedGroup.id,\r\n                    member_id: member.id\r\n                }).subscribe(dt => {\r\n                    this.selectedGroup = dt;\r\n                    this.groupsMessagesStore.changeGroup(this.selectedGroup);\r\n                    this.socketService.removeFromChatGroup({\r\n                        member,\r\n                        from_user: this.authUser,\r\n                        group: this.selectedGroup,\r\n                        msg: `<strong>${this.authUser.first_name + ' ' + this.authUser.last_name}</strong> removed  <strong>${member.first_name + ' ' + member.last_name}</strong>\r\n                       from <strong>${this.selectedGroup.name}</strong> group`,\r\n                    });\r\n                });\r\n            }\r\n        }));\r\n    }\r\n\r\n    getRemovedSavedMember() {\r\n        this.subscriptions.push(this.socketService.removeFromChatGroupNotify().subscribe((data: any) => {\r\n            const {group, member, leftGroups} = data;\r\n            // console.log('removed from group', data)\r\n            // this.notificationsStore.updateNotifications(data);\r\n            if (member.id === this.authUser.id) {\r\n                this.groupsMessagesStore.setGroupsMessages(leftGroups);\r\n                this.groupsMessagesStore.selectGroup({});\r\n            } else {\r\n                // console.log(group)\r\n                this.groupsMessagesStore.changeGroup(group);\r\n                // console.log(this.groupsMessagesStore.selectedGroupMessages)\r\n                // console.log(this.groupsMessagesStore.groupsMessages)\r\n            }\r\n        }));\r\n    }\r\n\r\n    getOnlineMembers() {\r\n        // console.log(this.selectedGroup.name)\r\n        this.socketService.getConnectedGroupMembers({\r\n            group_name: this.selectedGroup.name,\r\n            username: this.authUser.username\r\n        });\r\n\r\n        this.subscriptions.push(this.socketService.membersOnlineFeedback().subscribe((dt: any) => {\r\n            const {group, members} = dt;\r\n            // console.log('online members', dt)\r\n            // console.log('selected group', this.selectedGroup.name)\r\n            // console.log('group', group)\r\n            if (group === this.selectedGroup.name) {\r\n                this.onlineMembers = members;\r\n            }\r\n        }));\r\n    }\r\n\r\n    getAcceptedJoinGroup() {\r\n        this.subscriptions.push(this.socketService.getAcceptedJoinChatGroup().subscribe((data: any) => {\r\n            const {notification, rest} = data;\r\n            console.log('accepted in members list', data)\r\n            // console.log(this.notificationsStore.allNotifications)\r\n            if (notification.from_user.id !== this.authUser.id) {\r\n                this.notificationsStore.updateNotifications(notification);\r\n            }\r\n            // console.log(this.notificationsStore.allNotifications)\r\n            this.groupsMessagesStore.changeGroup(rest.group);\r\n        }));\r\n    }\r\n\r\n    getDeclinedJoinChatGroup() {\r\n        this.subscriptions.push(this.socketService.getDeclinedJoinChatGroup().subscribe((data: any) => {\r\n            const {group, notification} = data;\r\n            console.log('declined', data);\r\n            if (data.from_user.id === this.authUser.id) {\r\n                this.groupsMessagesStore.selectGroup({});\r\n            } else {\r\n                this.notificationsStore.updateNotifications(notification);\r\n                this.groupsMessagesStore.changeGroup(group);\r\n            }\r\n        }));\r\n    }\r\n\r\n    getLeftGroup() {\r\n        this.subscriptions.push(this.socketService.leaveChatGroupNotify().subscribe((data: any) => {\r\n            const {group} = data;\r\n            console.log(data)\r\n            if (data.from_user.id === this.authUser.id) {\r\n                this.groupsMessagesStore.selectGroup({});\r\n            } else {\r\n                this.notificationsStore.updateNotifications(data);\r\n                this.groupsMessagesStore.changeGroup(group);\r\n            }\r\n        }));\r\n    }\r\n\r\n    onLogout() {\r\n        this.socketService.onLogout().subscribe((user: User) => {\r\n            this.onlineMembers = this.onlineMembers.filter(u => u !== user.username);\r\n            // console.log('logout', this.onlineMembers)\r\n        });\r\n    }\r\n\r\n    getUserCurrentStatus(groupMember) {\r\n        const groupName = this.groupsMessagesStore.groupsMessages.find(gm => gm.id === groupMember?.chat_groups_members?.group_id)?.name;\r\n        if (this.onlineMembers && groupName === this.selectedGroup?.name) {\r\n            return !!this.onlineMembers.find(m => groupMember.username === m);\r\n        }\r\n        return false;\r\n    }\r\n\r\n    openAllMembersModal() {\r\n        this.subscriptions.push(this.dialog.open(ShowChatGroupMembersComponent, {\r\n            width: '500px',\r\n            height: '600px',\r\n        }).afterClosed().subscribe(dt => {\r\n\r\n        }));\r\n    }\r\n\r\n    ifRemoveMemberShown(m) {\r\n        return this.authUser.id === this.selectedGroup?.creator_id\r\n            && m.id !== this.selectedGroup?.creator_id && !this.modalMode;\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        this.subscriptions.forEach(s => s.unsubscribe());\r\n    }\r\n\r\n}\r\n","export const ALLOWED_GROUP_MEMBERS_COUNT_ON_TOP = 5;\r\n","import {Component, ElementRef, Input, OnDestroy, OnInit, ViewChild} from '@angular/core';\r\nimport {Subscription} from 'rxjs';\r\nimport {MatDialog} from '@angular/material/dialog';\r\nimport {ChatService} from '@core/services/chat.service';\r\nimport {FormBuilder, FormControl, FormGroup, Validators} from '@angular/forms';\r\nimport {COMMA, ENTER} from '@angular/cdk/keycodes';\r\nimport {UsersService} from '@core/services/users.service';\r\nimport {SocketIoService} from '@core/services/socket-io.service';\r\nimport {GroupsMessagesSubjectService} from '@core/services/stores/groups-messages-subject.service';\r\n\r\n\r\n@Component({\r\n    selector: 'app-members-add-form',\r\n    templateUrl: './members-add-form.component.html',\r\n    styleUrls: ['./members-add-form.component.scss']\r\n})\r\nexport class MembersAddFormComponent implements OnInit, OnDestroy {\r\n    userContacts = [];\r\n    filteredContacts = [];\r\n\r\n    inputGroupMembers = [];\r\n    groupMembers = [];\r\n\r\n    subscriptions: Subscription[] = [];\r\n\r\n    memberCtrl = new FormControl();\r\n    readonly separatorKeysCodes: number[] = [ENTER, COMMA];\r\n\r\n    @Input() selectedGroup;\r\n    @Input() authUser;\r\n    @Input() modalMode = false;\r\n    @ViewChild('chipsInput') chipsInput: ElementRef<HTMLInputElement>;\r\n\r\n    groupChatDetailsForm: FormGroup;\r\n\r\n    constructor(\r\n        private dialog: MatDialog,\r\n        private chatService: ChatService,\r\n        private usersService: UsersService,\r\n        private socketService: SocketIoService,\r\n        private groupsMessagesStore: GroupsMessagesSubjectService,\r\n        private fb: FormBuilder\r\n    ) {\r\n    }\r\n\r\n    ngOnInit(): void {\r\n\r\n\r\n        this.initForm();\r\n\r\n        this.getUserContacts();\r\n        this.getGroupMembers();\r\n        this.getContactsFilteredBySearch();\r\n    }\r\n\r\n    initForm() {\r\n        this.groupChatDetailsForm = this.fb.group({\r\n            group_id: [this.selectedGroup.id],\r\n            member_ids: ['', Validators.required],\r\n            accepted: [0]\r\n        });\r\n    }\r\n\r\n    getGroupMembers() {\r\n        console.log(this.selectedGroup)\r\n        this.groupMembers = this.selectedGroup.chat_group_members;\r\n        this.groupsMessagesStore.selectedGroupsMessages$.subscribe((dt: any) => {\r\n            this.selectedGroup = dt;\r\n            if (this.selectedGroup) {\r\n                this.groupMembers = this.selectedGroup.chat_group_members;\r\n                this.groupChatDetailsForm.patchValue({group_id: this.selectedGroup.id});\r\n            }\r\n        });\r\n    }\r\n\r\n    getUserContacts() {\r\n        this.subscriptions.push(this.usersService.getUserContacts({\r\n            user_id: this.authUser.id,\r\n            blocked: 0\r\n        }).subscribe(dt => {\r\n            this.userContacts = dt;\r\n        }));\r\n    }\r\n\r\n    getContactsFilteredBySearch() {\r\n        this.subscriptions.push(this.memberCtrl.valueChanges.subscribe(search => {\r\n            if (search) {\r\n                console.log(this.userContacts, this.groupMembers)\r\n                this.filteredContacts = this.userContacts.filter(fc => {\r\n                    const fullNameLowerCased = (fc.first_name + ' ' + fc.last_name).toLowerCase();\r\n                    if (fullNameLowerCased.includes(search)) {\r\n                        return !this.groupMembers.find(gm => (gm.first_name + ' ' + gm.last_name).toLowerCase() === fullNameLowerCased);\r\n                    }\r\n                    return false;\r\n                });\r\n            }\r\n        }));\r\n    }\r\n\r\n    autoCompleteMemberSelected(e) {\r\n        const value = e.option.value;\r\n\r\n        if (!this.inputGroupMembers.find(gm => gm.id === value)) {\r\n            this.inputGroupMembers.push(e.option.value);\r\n            this.groupChatDetailsForm.patchValue({member_ids: this.inputGroupMembers.map(gm => gm.id)});\r\n        }\r\n\r\n        // console.log(this.)\r\n\r\n        this.chipsInput.nativeElement.value = '';\r\n        this.memberCtrl.setValue('');\r\n    }\r\n\r\n    inviteMembers() {\r\n\r\n        this.chipsInput.nativeElement.value = '';\r\n        this.memberCtrl.setValue('');\r\n        this.subscriptions.push(this.chatService.inviteMembers(this.groupChatDetailsForm.value).subscribe(dt => {\r\n            this.groupMembers = dt?.chat_group_members;\r\n            this.selectedGroup = dt;\r\n            this.socketService.inviteToNewChatGroup({\r\n                invited_members: this.inputGroupMembers,\r\n                from_user: this.authUser,\r\n                group: this.selectedGroup,\r\n                group_type: 'chat',\r\n                msg: `<strong>${this.authUser.first_name + ' ' + this.authUser.last_name}</strong> has sent an invitation to join the <strong>${this.selectedGroup.name}</strong> group`,\r\n            });\r\n            this.groupsMessagesStore.changeGroup(this.selectedGroup);\r\n            console.log(this.groupsMessagesStore.groupsMessages)\r\n            console.log(this.groupsMessagesStore.selectedGroupMessages)\r\n            this.groupsMessagesStore.showMembersForm = false;\r\n            this.inputGroupMembers = [];\r\n        }));\r\n    }\r\n\r\n    removeInputMember(member) {\r\n        const index = this.inputGroupMembers.indexOf(member);\r\n\r\n        if (index >= 0) {\r\n            this.inputGroupMembers.splice(index, 1);\r\n            this.groupChatDetailsForm.patchValue({member_ids: this.inputGroupMembers.map(gm => gm.id)});\r\n        }\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        this.subscriptions.forEach(s => s.unsubscribe());\r\n    }\r\n\r\n}\r\n","<form [formGroup]=\"groupChatDetailsForm\" [class.modal-mode]=\"modalMode\">\r\n    <div class=\"member-add\">\r\n        <mat-form-field>\r\n            <mat-chip-list #tagList aria-label=\"Fruit selection\" formControlName=\"member_ids\">\r\n                <mat-chip *ngFor=\"let member of inputGroupMembers\"\r\n                          (removed)=\"removeInputMember(member)\">\r\n                    {{member.first_name + ' ' + member.last_name}}\r\n                    <mat-icon matChipRemove>cancel</mat-icon>\r\n                </mat-chip>\r\n\r\n                <input type=\"text\" #chipsInput\r\n                       placeholder=\"Member name from your contacts\"\r\n                       matInput\r\n                       maxlength=\"10\"\r\n                       [formControl]=\"memberCtrl\"\r\n                       [matChipInputFor]=\"tagList\"\r\n                       [matChipInputSeparatorKeyCodes]=\"separatorKeysCodes\"\r\n                       [matAutocomplete]=\"auto\">\r\n            </mat-chip-list>\r\n            <mat-autocomplete #auto=\"matAutocomplete\"\r\n                              (optionSelected)=\"autoCompleteMemberSelected($event)\">\r\n\r\n                <!--                            <mat-optgroup *ngFor=\"let contact of userContacts\" [label]=\"group.name\">-->\r\n                <mat-option *ngFor=\"let contact of filteredContacts\" [value]=\"contact\">\r\n                    {{contact.first_name + ' ' + contact.last_name}}\r\n                </mat-option>\r\n                <!--                            </mat-optgroup>-->\r\n\r\n\r\n            </mat-autocomplete>\r\n\r\n            <mat-hint align=\"end\">Please press 'Enter' after the name</mat-hint>\r\n\r\n        </mat-form-field>\r\n        <button (click)=\"inviteMembers()\">Add</button>\r\n    </div>\r\n</form>\r\n","import {Component, EventEmitter, OnInit, Output} from '@angular/core';\r\nimport {VideoService} from '@core/services/video.service';\r\nimport {AuthService} from '@core/services/auth.service';\r\nimport {CurrentUserData} from '@core/interfaces';\r\nimport {UserInfoService} from '@core/services/user-info.service';\r\n\r\n@Component({\r\n    selector: 'app-user-tags',\r\n    templateUrl: './user-tags.component.html',\r\n    styleUrls: ['./user-tags.component.scss']\r\n})\r\nexport class UserTagsComponent implements OnInit {\r\n    tags = [];\r\n    authUser: CurrentUserData;\r\n\r\n    @Output('tagSelected') tagSelected = new EventEmitter();\r\n\r\n    constructor(\r\n        private videoService: VideoService,\r\n        public auth: AuthService,\r\n        private _userInfoService: UserInfoService\r\n        // private getAuthUser: GetAuthUserPipe\r\n    ) {\r\n        this._getAuthInfo();\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        // this.authUser = this.getAuthUser.transform();\r\n        if (this.auth.loggedIn()) {\r\n            this.getUserTags();\r\n        }\r\n    }\r\n\r\n    private _getAuthInfo() {\r\n        this._userInfoService._userInfo.subscribe((data) => {\r\n            this.authUser = data;\r\n            console.log(this.authUser, 'WALLET SAVE CARD AUTHUSER DATA');\r\n        });\r\n    }\r\n\r\n    getUserTags() {\r\n        this.videoService.getUserTags({user_id: this.authUser?.id}).subscribe((dt: any) => {\r\n            this.tags = dt;\r\n        });\r\n    }\r\n\r\n    selectTag(name) {\r\n        this.tagSelected.emit(name);\r\n    }\r\n\r\n}\r\n","<ul class=\"categories\">\r\n    <ng-container *ngFor=\"let tag of tags\">\r\n\r\n        <li *ngIf=\"tag.tag_details\">\r\n            <a (click)=\"selectTag(tag.tag_details.name)\">{{tag.tag_details.name}}</a>\r\n        </li>\r\n    </ng-container>\r\n</ul>\r\n","import {Component, ElementRef, Input, OnDestroy, OnInit, ViewChild} from '@angular/core';\r\nimport {Subscription} from 'rxjs';\r\nimport {ChatService} from '@core/services/chat.service';\r\nimport {GroupsMessagesSubjectService} from '@core/services/stores/groups-messages-subject.service';\r\n\r\n@Component({\r\n    selector: 'app-group-avatar-handler',\r\n    templateUrl: './group-avatar-handler.component.html',\r\n    styleUrls: ['./group-avatar-handler.component.scss']\r\n})\r\nexport class GroupAvatarHandlerComponent implements OnInit, OnDestroy {\r\n    @Input() authUser;\r\n    @Input() selectedGroup;\r\n\r\n    subscriptions: Subscription[] = [];\r\n    removeAvatarShown = false;\r\n\r\n    @ViewChild('avatarInput') avatarInput: ElementRef;\r\n\r\n    constructor(\r\n        private chatService: ChatService,\r\n        private groupsMessagesStore: GroupsMessagesSubjectService,\r\n    ) {\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.groupsMessagesStore.groupsMessages$.subscribe(dt => {\r\n            // console.log('groups changed', dt)\r\n            // this.selectedGroup = this.groupsMessagesStore.selectedGroupMessages || dt[0];\r\n            // console.log(this.groupsMessagesStore.selectedGroupMessages)\r\n        });\r\n    }\r\n\r\n    changeAvatar(e = null) {\r\n        const file = e?.target.files[0];\r\n\r\n        const formData = new FormData();\r\n        formData.append('avatar', file?.name || '');\r\n        formData.append('group_id', this.selectedGroup.id);\r\n        formData.append('member_id', this.authUser.id);\r\n\r\n        if (file) {\r\n            formData.append('group_avatar_file', file);\r\n        } else {\r\n            this.avatarInput.nativeElement.value = '';\r\n        }\r\n\r\n        this.subscriptions.push(this.chatService.changeGroupAvatar(formData).subscribe(dt => {\r\n            // console.log(dt.find(d => this.selectedGroup.id === d.id))\r\n            // this.groupsMessagesStore.changeGroup(dt.find(d => this.selectedGroup.id === d.id));\r\n            this.groupsMessagesStore.setGroupsMessages(dt);\r\n            // console.log(this.groupsMessagesStore.selectedGroupMessages)\r\n            this.selectedGroup = dt.find(d => this.selectedGroup.id === d.id)\r\n            // console.log(this.selectedGroup)\r\n            // this.groupsMessagesStore.selectGroup(this.selectedGroup);\r\n        }));\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        this.subscriptions.forEach(s => s.unsubscribe());\r\n    }\r\n\r\n\r\n}\r\n","<div class=\"left\">\r\n    <div class=\"group-avatar-wrap\" (mouseenter)=\"removeAvatarShown = true\"\r\n         (mouseleave)=\"removeAvatarShown = false\">\r\n\r\n        <label for=\"group-avatar-input\">\r\n            <img class=\"img group-avatar\" [src]=\"selectedGroup?.avatar|getImgPath:'group_avatars'\">\r\n        </label>\r\n        <mat-icon id=\"remove-group-avatar\" (click)=\"changeAvatar()\"\r\n                  [hidden]=\"!removeAvatarShown || !selectedGroup?.avatar\">cancel\r\n        </mat-icon>\r\n    </div>\r\n    <input id=\"group-avatar-input\" type=\"file\" #avatarInput [hidden]=\"true\" (change)=\"changeAvatar($event)\">\r\n    <div class=\"group-name\">{{selectedGroup?.name}}</div>\r\n</div>\r\n","<div class=\"right\">\r\n    <button mat-icon-button [disableRipple]=\"true\" (click)=\"toggleMembersForm()\"\r\n            *ngIf=\"authUser.id === selectedGroup?.creator_id\">\r\n        <i class=\"fas fa-user-plus\"></i>\r\n    </button>\r\n    <div class=\"remove\" (click)=\"removeGroup()\" *ngIf=\"authUser.id === selectedGroup?.creator_id\">\r\n        <a><i class=\"fas fa-trash\"></i></a>\r\n    </div>\r\n\r\n    <div class=\"more-actions\" *ngIf=\"authUser.id !== selectedGroup?.creator_id\">\r\n\r\n        <button mat-icon-button [matMenuTriggerFor]=\"menu\" class=\"dotes\" [disableRipple]=\"true\">\r\n            <i class=\"fas fa-ellipsis-v\"></i>\r\n        </button>\r\n        <mat-menu #menu=\"matMenu\">\r\n            <!--        <button mat-menu-item (click)=\"showMembersInput = !showMembersInput\">-->\r\n            <!--            Add members-->\r\n            <!--        </button>-->\r\n            <button mat-menu-item (click)=\"leaveGroup()\">\r\n                Leave group\r\n            </button>\r\n        </mat-menu>\r\n    </div>\r\n</div>\r\n","import {Component, Input, OnDestroy, OnInit} from '@angular/core';\r\nimport {ConfirmationDialogComponent} from '@core/components/modals/confirmation-dialog/confirmation-dialog.component';\r\nimport {MatDialog} from '@angular/material/dialog';\r\nimport {Subscription} from 'rxjs';\r\nimport {ChatService} from '@core/services/chat.service';\r\nimport {SocketIoService} from '@core/services/socket-io.service';\r\nimport {GroupsMessagesSubjectService} from '@core/services/stores/groups-messages-subject.service';\r\n\r\n@Component({\r\n    selector: 'app-group-chat-actions',\r\n    templateUrl: './group-chat-actions.component.html',\r\n    styleUrls: ['./group-chat-actions.component.scss']\r\n})\r\nexport class GroupChatActionsComponent implements OnInit, OnDestroy {\r\n    @Input() authUser;\r\n    @Input() selectedGroup;\r\n\r\n    subscriptions: Subscription[] = [];\r\n\r\n    constructor(\r\n        private chatService: ChatService,\r\n        private socketService: SocketIoService,\r\n        private groupsMessagesStore: GroupsMessagesSubjectService,\r\n        private dialog: MatDialog\r\n    ) {\r\n    }\r\n\r\n    ngOnInit(): void {\r\n\r\n    }\r\n\r\n    toggleMembersForm() {\r\n        this.groupsMessagesStore.showMembersForm = !this.groupsMessagesStore.showMembersForm;\r\n    }\r\n\r\n    removeGroup() {\r\n        this.subscriptions.push(this.dialog.open(ConfirmationDialogComponent).afterClosed().subscribe(confirmed => {\r\n            if (confirmed) {\r\n                this.chatService.removeGroup({group_id: this.selectedGroup.id}).subscribe(dt => {\r\n                    console.log(dt)\r\n                    this.socketService.removeGroup({group: this.selectedGroup, initiator: this.authUser});\r\n                    this.groupsMessagesStore.setGroupsMessages(dt);\r\n                    this.selectedGroup = null;\r\n                });\r\n            }\r\n        }));\r\n    }\r\n\r\n    leaveGroup() {\r\n        this.subscriptions.push(this.dialog.open(ConfirmationDialogComponent).afterClosed().subscribe(confirmed => {\r\n            if (confirmed && this.selectedGroup) {\r\n                this.chatService.leaveGroup({\r\n                    member_id: this.authUser.id,\r\n                    group_id: this.selectedGroup.id,\r\n                }).subscribe(dt => {\r\n                    console.log('leave group', dt, this.selectedGroup)\r\n                    this.groupsMessagesStore.setGroupsMessages(dt);\r\n                    this.socketService.leaveChatGroup({\r\n                        group: this.selectedGroup,\r\n                        from_user: this.authUser,\r\n                        group_type: 'chat',\r\n                        msg: `<strong>${this.authUser.first_name + ' ' + this.authUser.last_name}</strong> has left the <strong>${this.selectedGroup.name}</strong> group`\r\n                    });\r\n                    this.selectedGroup = null;\r\n                });\r\n            }\r\n        }));\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        this.subscriptions.forEach(s => s.unsubscribe());\r\n    }\r\n\r\n}\r\n","import {Component, Input, OnInit} from '@angular/core';\r\nimport {GroupsMessagesSubjectService} from '@core/services/stores/groups-messages-subject.service';\r\n\r\n@Component({\r\n    selector: 'app-group-chat-members',\r\n    templateUrl: './group-chat-members.component.html',\r\n    styleUrls: ['./group-chat-members.component.scss']\r\n})\r\nexport class GroupChatMembersComponent implements OnInit {\r\n    @Input() authUser;\r\n    @Input() selectedGroup;\r\n\r\n    constructor(\r\n        public groupChatMessagesStore: GroupsMessagesSubjectService\r\n    ) {\r\n    }\r\n\r\n    ngOnInit(): void {\r\n    }\r\n\r\n}\r\n","<app-members-list [selectedGroup]=\"selectedGroup\" [authUser]=\"authUser\" [hidden]=\"groupChatMessagesStore.showMembersForm\"></app-members-list>\r\n<app-members-add-form [selectedGroup]=\"selectedGroup\" [authUser]=\"authUser\" [hidden]=\"!groupChatMessagesStore.showMembersForm\"></app-members-add-form>\r\n","<div class=\"chat-top\" [hidden]=\"isChatTopShown()\">\r\n    <div class=\"chat-about\" *ngIf=\"selectedGroup\">\r\n        <button mat-icon-button *ngIf=\"mobileHelper.isChatUsersListSize()\" (click)=\"backToUsers()\">\r\n            <mat-icon>arrow_back</mat-icon>\r\n        </button>\r\n        <app-group-avatar-handler [selectedGroup]=\"selectedGroup\"\r\n                                  [authUser]=\"authUser\"></app-group-avatar-handler>\r\n        <app-group-chat-members [selectedGroup]=\"selectedGroup\" [authUser]=\"authUser\"\r\n                                *ngIf=\"authUser\"></app-group-chat-members>\r\n        <app-group-chat-actions [selectedGroup]=\"selectedGroup\" [authUser]=\"authUser\"></app-group-chat-actions>\r\n    </div>\r\n</div>\r\n","import {Component, Input, OnDestroy, OnInit} from '@angular/core';\r\nimport {Subscription} from 'rxjs';\r\nimport {ChatService} from '@core/services/chat.service';\r\nimport {SocketIoService} from '@core/services/socket-io.service';\r\nimport {GroupsMessagesSubjectService} from '@core/services/stores/groups-messages-subject.service';\r\nimport {CheckForEmptyObjectPipe} from '@shared/pipes/check-for-empty-object.pipe';\r\nimport {MobileResponsiveHelper} from '@core/helpers/mobile-responsive-helper';\r\n\r\n@Component({\r\n    selector: 'app-group-chat-top',\r\n    templateUrl: './group-chat-top.component.html',\r\n    styleUrls: ['./group-chat-top.component.scss'],\r\n    providers: [{provide: MobileResponsiveHelper, useClass: MobileResponsiveHelper}]\r\n})\r\nexport class GroupChatTopComponent implements OnInit, OnDestroy {\r\n    @Input() authUser;\r\n    @Input() selectedGroup;\r\n\r\n    subscriptions: Subscription[] = [];\r\n\r\n    constructor(\r\n        private chatService: ChatService,\r\n        private socketService: SocketIoService,\r\n        private groupMessagesStore: GroupsMessagesSubjectService,\r\n        private isEmptyObj: CheckForEmptyObjectPipe,\r\n        public mobileHelper: MobileResponsiveHelper,\r\n    ) {\r\n\r\n    }\r\n\r\n    ngOnInit(): void {\r\n\r\n    }\r\n\r\n    isChatTopShown() {\r\n        return this.isEmptyObj.transform(this.selectedGroup);\r\n    }\r\n\r\n    backToUsers() {\r\n        // this.groupMessagesStore.changeGroup({});\r\n        this.groupMessagesStore.showResponsiveChatBox = false;\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        this.subscriptions.forEach(s => s.unsubscribe());\r\n    }\r\n}\r\n","import {Component, Input, OnDestroy, OnInit} from '@angular/core';\r\nimport {Subscription} from 'rxjs';\r\nimport {GroupsMessagesSubjectService} from '@core/services/stores/groups-messages-subject.service';\r\n\r\n@Component({\r\n    selector: 'app-group-chat-right-side-holder',\r\n    templateUrl: './group-chat-right-side-holder.component.html',\r\n    styleUrls: ['./group-chat-right-side-holder.component.scss']\r\n})\r\nexport class GroupChatRightSideHolderComponent implements OnInit, OnDestroy {\r\n\r\n    @Input() authUser;\r\n    subscriptions: Subscription[] = [];\r\n\r\n    selectedGroupMessages;\r\n\r\n    constructor(private groupsMessagesStore: GroupsMessagesSubjectService) {\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.getSelectedGroup();\r\n    }\r\n\r\n    getSelectedGroup() {\r\n        this.subscriptions.push(this.groupsMessagesStore.selectedGroupsMessages$.subscribe((dt: any) => {\r\n            this.selectedGroupMessages = dt;\r\n        }));\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        this.subscriptions.forEach(s => s.unsubscribe());\r\n    }\r\n}\r\n\r\n","<div class=\"chat-wrap\" [hidden]=\"\">\r\n    <app-group-chat-top [selectedGroup]=\"selectedGroupMessages\"\r\n                        [authUser]=\"authUser\"></app-group-chat-top>\r\n    <app-group-chat-messages [authUser]=\"authUser\" [selectedGroupMessages]=\"selectedGroupMessages\"></app-group-chat-messages>\r\n</div>\r\n","import {Component, EventEmitter, Input, OnInit, Output} from '@angular/core';\r\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\r\nimport {GroupsMessagesSubjectService} from '@core/services/stores/groups-messages-subject.service';\r\n\r\n@Component({\r\n    selector: 'app-group-form',\r\n    templateUrl: './group-form.component.html',\r\n    styleUrls: ['./group-form.component.scss']\r\n})\r\nexport class GroupFormComponent implements OnInit {\r\n    groupForm: FormGroup;\r\n    showGroupChatForm = false;\r\n\r\n    @Input() authUser;\r\n\r\n    constructor(\r\n        private fb: FormBuilder,\r\n        private groupsMessagesStore: GroupsMessagesSubjectService\r\n    ) {\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.initForm();\r\n    }\r\n\r\n    initForm() {\r\n        this.groupForm = this.fb.group({\r\n            creator_id: [this.authUser.id],\r\n            name: ['', Validators.required],\r\n            username: [this.authUser.username]\r\n        });\r\n    }\r\n\r\n    addGroup() {\r\n        if (this.groupForm.valid) {\r\n            this.groupsMessagesStore.setAddGroupFormValue(this.groupForm.value);\r\n            this.groupForm.patchValue({name: ''});\r\n        }\r\n    }\r\n\r\n    toggleForm(shown: boolean) {\r\n        this.showGroupChatForm = shown;\r\n    }\r\n\r\n}\r\n","<form [formGroup]=\"groupForm\" id=\"group-form\" [hidden]=\"!showGroupChatForm\">\r\n    <input formControlName=\"name\" placeholder=\"Group name\">\r\n    <button mat-icon-button (click)=\"addGroup()\">\r\n        <mat-icon>done</mat-icon>\r\n    </button>\r\n    <button mat-icon-button (click)=\"toggleForm(false)\">\r\n        <mat-icon>close</mat-icon>\r\n    </button>\r\n</form>\r\n<button class=\"create-group-chat\" [hidden]=\"showGroupChatForm\" (click)=\"toggleForm(true)\">\r\n    <img src=\"assets/img/noun_create.png\" alt=\"show-group-form-btn\"> Create new group\r\n</button>\r\n"]}