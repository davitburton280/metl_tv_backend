function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{Zxoc:function(t,e,n){"use strict";n.r(e),n.d(e,"StocksModule",(function(){return Z}));var a=n("ofXK"),c=n("tyNb"),i=n("mrSG"),o=n("fXoL"),s=n("sAj1"),r=n("wDcp"),l=n("Xa2L"),d=n("WKnA"),b=n("+0xr");function p(t){return(t="".concat(t[0].toUpperCase()).concat(t.slice(1)).replace(/([A-Z])/g," $1").trim()).replace(/_/g," ")}var u=n("wd/R"),m=n("lwos"),g=n("JEAd"),f=n("Rnal"),h=n("zQsl"),k=n("kmnG");function C(t,e){if(1&t&&(o.Wb(0,"th",15),o.Lc(1),o.Vb()),2&t){var n=o.ic().$implicit,a=o.ic(2);o.Cb(1),o.Nc(" ",a.normalizeColName(n),"")}}function v(t,e){if(1&t&&(o.Wb(0,"span"),o.Lc(1),o.Vb()),2&t){var n=o.ic().$implicit,a=o.ic().$implicit;o.Cb(1),o.Mc(n[a])}}function x(t,e){1&t&&o.Rb(0,"mat-spinner",21),2&t&&o.pc("diameter",15)}function w(t,e){if(1&t){var n=o.Xb();o.Wb(0,"div",18),o.Wb(1,"button",19),o.ec("click",(function(){o.Bc(n);var t=o.ic().$implicit;return o.ic(3).updateUserStocks(t)})),o.Lc(2),o.Vb(),o.Jc(3,x,1,1,"mat-spinner",20),o.Vb()}if(2&t){var a=o.ic(4);o.Cb(1),o.pc("ngClass",a.addedToWatchlist?"red-bg":"green-bg"),o.Cb(1),o.Mc((a.addedToWatchlist?"Remove from":"Add to")+" watchlist"),o.Cb(1),o.pc("ngIf",a.processingStock)}}function _(t,e){if(1&t&&(o.Wb(0,"td",16),o.Jc(1,v,2,1,"span",3),o.Jc(2,w,4,3,"div",17),o.Vb()),2&t){var n=o.ic().$implicit;o.Cb(1),o.pc("ngIf","action"!==n),o.Cb(1),o.pc("ngIf","action"===n)}}function O(t,e){if(1&t&&(o.Ub(0),o.Ub(1,12),o.Jc(2,C,2,1,"th",13),o.Jc(3,_,3,2,"td",14),o.Tb(),o.Tb()),2&t){var n=e.$implicit;o.Cb(1),o.pc("matColumnDef",n)}}function P(t,e){1&t&&o.Rb(0,"tr",22)}function y(t,e){1&t&&o.Rb(0,"tr",23)}function M(t,e){if(1&t&&(o.Ub(0),o.Wb(1,"div",4),o.Rb(2,"ngx-charts-area-chart",5),o.Vb(),o.Wb(3,"div",6),o.Wb(4,"h1",7),o.Lc(5),o.Vb(),o.Wb(6,"table",8),o.Jc(7,O,4,1,"ng-container",9),o.Jc(8,P,1,0,"tr",10),o.Jc(9,y,1,0,"tr",11),o.Vb(),o.Vb(),o.Tb()),2&t){var n=o.ic();o.Cb(2),o.pc("scheme",n.colorScheme)("legend",!1)("showXAxisLabel",!1)("showYAxisLabel",!1)("trimXAxisTicks",!1)("maxXAxisTickLength",5)("autoScale",!0)("xAxis",!0)("yAxis",!0)("rotateXAxisTicks",!1)("xAxisTickFormatting",n.axisFormatting)("results",n.chartData),o.Cb(3),o.Mc(n.selectedStock.replace("^","")),o.Cb(1),o.pc("dataSource",n.tableData),o.Cb(1),o.pc("ngForOf",n.displayedColumns),o.Cb(1),o.pc("matHeaderRowDef",n.displayedColumns),o.Cb(1),o.pc("matRowDefColumns",n.displayedColumns)}}function S(t,e){1&t&&(o.Wb(0,"mat-error"),o.Lc(1,"No chart data found\n"),o.Vb())}var D,W=((D=function(){function t(e,n,a,c,i){_classCallCheck(this,t),this.stocksService=e,this.loader=n,this.subject=a,this.updateStocks=c,this.getAuthUser=i,this.colorScheme={domain:["#18B587","#F53C6F"]},this.displayedColumns=["symbol","name","price","change","changesPercentage","marketCap","open","volume","action"],this.userStocks=[],this.addedToWatchlist=!1,this.subscriptions=[],this.stocksUpdatedHere=!1,this.processingStock=!1}return _createClass(t,[{key:"ngOnInit",value:function(){this.getUserStocks(),this.getStockInfo(),this.authUser=this.getAuthUser.transform()}},{key:"getUserStocks",value:function(){var t=this;this.subject.currentUserStocks.subscribe((function(e){t.userStocks=e.stocks,t.addedToWatchlist=!!t.userStocks.find((function(e){return e.symbol===t.selectedStock}))}))}},{key:"getStockInfo",value:function(){var t=this;this.loader.dataLoading=!0,this.stocksService.getStockChartData({stock:this.selectedStock}).subscribe((function(e){t.chartData=e.chart,t.tableData=new b.k(e.table),t.loader.dataLoading=!1}))}},{key:"axisFormatting",value:function(t){var e=this.ticks.find((function(e,n){return e===t&&u(e,"HH:mm:ss").minute()%30==0}));return e?u(e,"HH:mm:ss").format("HH:mm A"):""}},{key:"normalizeColName",value:function(t){return p(t)}},{key:"isStockFollowed",value:function(t){return!!this.userStocks.find((function(e){return e.name===t.name}))}},{key:"updateUserStocks",value:function(t){var e=this;this.processingStock=!0;var n=this.isStockFollowed(t),a=this.updateStocks.transform(this.userStocks,t,n);this.addedToWatchlist=!n,this.loader.show(),a&&this.subscriptions.push(this.stocksService.updateFollowedStocks({user_id:this.authUser.id,stocks:a}).subscribe((function(t){e.processingStock=!1,e.userStocks=(null==t?void 0:t.user_stocks)||[],e.stocksUpdatedHere=!0,e.loader.hide(),e.subject.changeUserStocks({stocks:e.userStocks,empty:0===e.userStocks.length})})))}}]),t}()).\u0275fac=function(t){return new(t||D)(o.Qb(s.a),o.Qb(m.a),o.Qb(r.a),o.Qb(g.a),o.Qb(f.a))},D.\u0275cmp=o.Kb({type:D,selectors:[["app-summary-tab"]],inputs:{selectedStock:"selectedStock"},decls:5,vars:4,consts:[[1,"loader-holder"],[3,"diameter","hidden"],[1,"table-chart-container"],[4,"ngIf"],[1,"chart-container"],[3,"scheme","legend","showXAxisLabel","showYAxisLabel","trimXAxisTicks","maxXAxisTickLength","autoScale","xAxis","yAxis","rotateXAxisTicks","xAxisTickFormatting","results"],[1,"table-container"],[1,"selected-stock"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],[4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"matColumnDef"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell",""],["mat-cell",""],["class","action-column",4,"ngIf"],[1,"action-column"],["id","watchlist-act-btn",3,"ngClass","click"],[3,"diameter",4,"ngIf"],[3,"diameter"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(o.Wb(0,"div",0),o.Rb(1,"mat-spinner",1),o.Vb(),o.Wb(2,"div",2),o.Jc(3,M,10,17,"ng-container",3),o.Vb(),o.Jc(4,S,2,0,"mat-error",3)),2&t&&(o.Cb(1),o.pc("diameter",50)("hidden",!e.loader.dataLoading),o.Cb(2),o.pc("ngIf",e.chartData&&e.chartData[0].series.length>0),o.Cb(1),o.pc("ngIf",!(e.chartData&&0!==e.chartData[0].series.length||e.loader.dataLoading)))},directives:[l.b,a.m,h.a,b.j,a.l,b.g,b.i,b.c,b.e,b.b,b.d,b.a,a.k,b.f,b.h,k.b],styles:[".table-chart-container[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center}@media (max-width:1400px){.table-chart-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{max-width:1500px;overflow-x:auto}}.table-chart-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;margin-top:15px}.table-chart-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .action-column[_ngcontent-%COMP%]{display:flex;align-items:center}.table-chart-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .action-column[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin-left:20px}.table-chart-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   #watchlist-act-btn[_ngcontent-%COMP%]{padding:5px}.table-chart-container[_ngcontent-%COMP%]   .selected-stock[_ngcontent-%COMP%]{margin:20px 0}.table-chart-container[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]{width:100%;height:250px;margin-top:50px;display:grid;justify-content:center;align-items:center}.table-chart-container[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{display:inline-block}"]}),D),V=n("M9IT");function A(t,e){if(1&t&&(o.Wb(0,"th",10),o.Lc(1),o.Vb()),2&t){var n=o.ic().$implicit,a=o.ic(2);o.Cb(1),o.Nc(" ",a.normalizeColName(n),"")}}function L(t,e){if(1&t&&(o.Wb(0,"td",11),o.Lc(1),o.Vb()),2&t){var n=e.$implicit,a=o.ic().$implicit;o.Cb(1),o.Nc(" ",n[a]," ")}}function R(t,e){if(1&t&&(o.Ub(0),o.Ub(1,7),o.Jc(2,A,2,1,"th",8),o.Jc(3,L,2,1,"td",9),o.Tb(),o.Tb()),2&t){var n=e.$implicit;o.Cb(1),o.pc("matColumnDef",n)}}function T(t,e){1&t&&o.Rb(0,"tr",12)}function I(t,e){1&t&&o.Rb(0,"tr",13)}function J(t,e){if(1&t&&(o.Wb(0,"table",3),o.Jc(1,R,4,1,"ng-container",4),o.Jc(2,T,1,0,"tr",5),o.Jc(3,I,1,0,"tr",6),o.Vb()),2&t){var n=o.ic();o.pc("dataSource",n.tableData),o.Cb(1),o.pc("ngForOf",n.displayedColumns),o.Cb(1),o.pc("matHeaderRowDef",n.displayedColumns),o.Cb(1),o.pc("matRowDefColumns",n.displayedColumns)}}function U(t,e){1&t&&(o.Wb(0,"mat-error"),o.Lc(1,"No historical prices found"),o.Vb())}var j,H=((j=function(){function t(e){_classCallCheck(this,t),this.stocksService=e,this.displayedColumns=["date","price","change","changePercent","open","volume"],this.paginationValues=[10,25,100]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.stocksService.getStockHistoricalPrices({stock:this.selectedStock}).subscribe((function(e){t.tableData=new b.k(e.historical),t.tableData.paginator=t.paginator}))}},{key:"normalizeColName",value:function(t){return p(t)}}]),t}()).\u0275fac=function(t){return new(t||j)(o.Qb(s.a))},j.\u0275cmp=o.Kb({type:j,selectors:[["app-historical-tab"]],viewQuery:function(t,e){var n;1&t&&o.Qc(V.a,!0),2&t&&o.wc(n=o.fc())&&(e.paginator=n.first)},inputs:{selectedStock:"selectedStock"},decls:3,vars:4,consts:[["mat-table","","class","mat-elevation-z8",3,"dataSource",4,"ngIf"],[3,"pageSizeOptions","hidden"],[4,"ngIf"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],[4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"matColumnDef"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(o.Jc(0,J,4,4,"table",0),o.Rb(1,"mat-paginator",1),o.Jc(2,U,2,0,"mat-error",2)),2&t&&(o.pc("ngIf",e.tableData&&e.tableData.data.length),o.Cb(1),o.pc("pageSizeOptions",e.paginationValues)("hidden",!(null!=e.tableData&&e.tableData.data.length)),o.Cb(1),o.pc("ngIf",!(null!=e.tableData&&e.tableData.data.length)))},directives:[a.m,V.a,b.j,a.l,b.g,b.i,b.c,b.e,b.b,b.d,b.a,b.f,b.h,k.b],styles:["table[_ngcontent-%COMP%]{width:100%}@media screen and (max-width:420px){td.mat-cell[_ngcontent-%COMP%]:last-of-type, td.mat-footer-cell[_ngcontent-%COMP%]:last-of-type, th.mat-header-cell[_ngcontent-%COMP%]:last-of-type{padding-right:5px}td.mat-cell[_ngcontent-%COMP%]:first-of-type, td.mat-footer-cell[_ngcontent-%COMP%]:first-of-type, th.mat-header-cell[_ngcontent-%COMP%]:first-of-type{padding-left:5px}}"]}),j);function F(t,e){1&t&&o.Rb(0,"mat-spinner",8),2&t&&o.pc("diameter",25)}function N(t,e){if(1&t&&o.Rb(0,"app-stock-tiles",9),2&t){var n=o.ic();o.pc("stocks",n.indices)("dragDropDisabled",!0)("followingAllowed",!1)("stockProfileAllowed",!0)}}function Q(t,e){if(1&t){var n=o.Xb();o.Wb(0,"div",10),o.Wb(1,"ul",11),o.Wb(2,"li"),o.Wb(3,"a",12),o.ec("click",(function(){return o.Bc(n),o.ic().changeTab("summary")})),o.Lc(4," Summary"),o.Vb(),o.Vb(),o.Wb(5,"li"),o.Wb(6,"a",12),o.ec("click",(function(){return o.Bc(n),o.ic().changeTab("historical")})),o.Lc(7," Historical data"),o.Vb(),o.Vb(),o.Vb(),o.Wb(8,"div",13),o.Wb(9,"div",14),o.Rb(10,"app-summary-tab",15),o.Vb(),o.Wb(11,"div",16),o.Rb(12,"app-historical-tab",15),o.Vb(),o.Vb(),o.Vb()}if(2&t){var a=o.ic();o.Cb(2),o.Gb("active","summary"===a.activeTab),o.Cb(3),o.Gb("active","historical"===a.activeTab),o.Cb(5),o.pc("selectedStock",a.selectedStock)("hidden","summary"!==a.activeTab),o.Cb(2),o.pc("selectedStock",a.selectedStock)("hidden","historical"!==a.activeTab)}}function X(t,e){1&t&&(o.Wb(0,"mat-error"),o.Lc(1,"Please select a tile to view its information "),o.Vb())}var z,$,B,K=((z=function(){function t(e,n,a,c){_classCallCheck(this,t),this.stocksService=e,this.router=n,this.route=a,this.subject=c,this.activeTab="summary",this.dataLoading="idle"}return _createClass(t,[{key:"ngOnInit",value:function(){var t,e,n,a=this;this.dataLoading="loading",this.subject.currentIndices.subscribe((function(t){t.length>0&&(a.dataLoading="finished",a.indices=t)})),this.selectedStock=null===(n=null===(e=null===(t=this.route.snapshot)||void 0===t?void 0:t.params)||void 0===e?void 0:e.symbol)||void 0===n?void 0:n.toUpperCase()}},{key:"changeTab",value:function(t){this.activeTab=t}},{key:"openStockProfile",value:function(t){var e=this;this.router.navigateByUrl("/test",{skipLocationChange:!0}).then((function(){return Object(i.a)(e,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.router.navigate(["stocks/".concat(t,"/analytics")]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})))}))}}]),t}()).\u0275fac=function(t){return new(t||z)(o.Qb(s.a),o.Qb(c.e),o.Qb(c.a),o.Qb(r.a))},z.\u0275cmp=o.Kb({type:z,selectors:[["app-stock-profile"]],decls:10,vars:4,consts:[[1,"stock-content"],[1,"major-indexes"],[1,"stocks-list-container"],[1,"spinner-container"],[3,"diameter",4,"ngIf"],[3,"stocks","dragDropDisabled","followingAllowed","stockProfileAllowed",4,"ngIf"],["class","stock-tabs",4,"ngIf"],[4,"ngIf"],[3,"diameter"],[3,"stocks","dragDropDisabled","followingAllowed","stockProfileAllowed"],[1,"stock-tabs"],[1,"nav","nav-tabs"],["data-toggle","tab",3,"click"],[1,"tab-content"],["id","summary"],[3,"selectedStock","hidden"],["id","historical"]],template:function(t,e){1&t&&(o.Wb(0,"div",0),o.Wb(1,"div",1),o.Wb(2,"h2"),o.Lc(3,"Major indexes"),o.Vb(),o.Wb(4,"div",2),o.Wb(5,"div",3),o.Jc(6,F,1,1,"mat-spinner",4),o.Vb(),o.Jc(7,N,1,4,"app-stock-tiles",5),o.Vb(),o.Vb(),o.Jc(8,Q,13,8,"div",6),o.Jc(9,X,2,0,"mat-error",7),o.Vb()),2&t&&(o.Cb(6),o.pc("ngIf","loading"===e.dataLoading),o.Cb(1),o.pc("ngIf",(null==e.indices?null:e.indices.length)>0),o.Cb(1),o.pc("ngIf",e.selectedStock),o.Cb(1),o.pc("ngIf",!e.selectedStock&&"finished"===e.dataLoading))},directives:[a.m,l.b,d.a,W,H,k.b],styles:[".stock-select[_ngcontent-%COMP%]{width:316px;height:51px;background:#eee 0 0 no-repeat padding-box;box-shadow:0 0 6px hsla(0,0%,60.4%,.14);color:#545454;font-size:16px;padding:16px;font-family:Muli-Regular;outline:0;border:0;margin-right:32px}.my-stocks[_ngcontent-%COMP%]{background:#f53c6f;color:#fff!important}.my-stocks[_ngcontent-%COMP%], .prospective-stocks[_ngcontent-%COMP%]{width:200px;height:51px;box-shadow:0 0 6px hsla(0,0%,60.4%,.14);font-size:16px;font-family:Muli-Regular;display:flex;justify-content:center;align-items:center}.prospective-stocks[_ngcontent-%COMP%]{background:#f53c6f 0 0 no-repeat padding-box;background:#eee;color:#545454!important}.stock-block[_ngcontent-%COMP%]{display:flex;margin-bottom:32px}.stock-content[_ngcontent-%COMP%]{padding-left:50px}.stock-content-img[_ngcontent-%COMP%]{width:100%}.stock-btns[_ngcontent-%COMP%]{display:flex}.stock-item[_ngcontent-%COMP%]{cursor:pointer}.stock-tabs[_ngcontent-%COMP%]{margin-top:70px}.stock-tabs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{height:35px;padding:5px}.stock-tabs[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000;text-decoration:none}.stock-tabs[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{background:#f53c6f}.stock-tabs[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff}.small-chart-container[_ngcontent-%COMP%]{width:100%;height:150px}@media (max-width:991px){.stock-block[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.stock-select[_ngcontent-%COMP%]{margin-right:0;margin-bottom:20px}}@media (max-width:480px){.stock-select[_ngcontent-%COMP%]{width:80%}.stock-btns[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.prospective-stocks[_ngcontent-%COMP%]{margin-top:20px}}@media screen and (min-width:451px) and (max-width:991px){.stock-content[_ngcontent-%COMP%]{padding-left:0}.stock-tabs[_ngcontent-%COMP%]{padding:0 10px}}@media screen and (max-width:440px){.stock-content[_ngcontent-%COMP%]{padding-left:0}.stock-tabs[_ngcontent-%COMP%]{padding:0 5px}}@media screen and (max-width:420px){.stock-content[_ngcontent-%COMP%]{padding-left:0}.stock-tabs[_ngcontent-%COMP%]{padding:0 5px;max-width:280px;width:100%}}"]}),z),G=[{path:"analytics",component:K,data:{title:"Stock profile"}},{path:":symbol/analytics",component:K,data:{title:"Stock profile"}}],E=(($=function t(){_classCallCheck(this,t)}).\u0275mod=o.Ob({type:$}),$.\u0275inj=o.Nb({factory:function(t){return new(t||$)},imports:[[c.i.forChild(G)],c.i]}),$),Y=n("PCNd"),Z=((B=function t(){_classCallCheck(this,t)}).\u0275mod=o.Ob({type:B}),B.\u0275inj=o.Nb({factory:function(t){return new(t||B)},imports:[[a.c,E,h.c,Y.a]]}),B)}}]);
//# sourceMappingURL=stocks-stocks-module-es5.0268ca6dbe0dacbf4ad4.js.map