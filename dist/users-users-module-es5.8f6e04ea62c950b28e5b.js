function _createForOfIteratorHelper(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,r=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}function _toArray(e){return _arrayWithHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableRest()}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(c){o=!0,r=c}finally{try{i||null==s.return||s.return()}finally{if(o)throw r}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _get(e,t,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=_superPropBase(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,i=_getPrototypeOf(e);if(t){var o=_getPrototypeOf(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"+27z":function(e,t){function n(e,t,n){var i={audio:!1,video:{mandatory:{chromeMediaSource:e?"screen":"desktop",maxWidth:window.screen.width>1920?window.screen.width:1920,maxHeight:window.screen.height>1080?window.screen.height:1080},optional:[]}};return n&&(i.audio={mandatory:{chromeMediaSource:e?"screen":"desktop"},optional:[]}),t&&(i.video.mandatory.chromeMediaSourceId=t,i.audio&&i.audio.mandatory&&(i.audio.mandatory.chromeMediaSourceId=t)),i}function i(e){o?o.isLoaded?o.contentWindow.postMessage(e?e.forEach?{captureCustomSourceId:e}:{captureSourceIdWithAudio:!0}:{captureSourceId:!0},"*"):setTimeout((function(){i(e)}),100):r((function(){i(e)}))}var o;function r(e){o?e():((o=document.createElement("iframe")).onload=function(){o.isLoaded=!0,e()},o.src="https://openvidu.github.io/openvidu-screen-sharing-chrome-extension/",o.style.display="none",(document.body||document.documentElement).appendChild(o))}function a(){o?o.isLoaded?o.contentWindow.postMessage({getChromeExtensionStatus:!0},"*"):setTimeout(a,100):r(a)}window.getScreenId=function(e,t,o){-1===navigator.userAgent.indexOf("Edge")||!navigator.msSaveOrOpenBlob&&!navigator.msSaveBlob?navigator.mozGetUserMedia?t(null,"firefox",{video:{mozMediaSource:e,mediaSource:e}}):(window.addEventListener("message",(function e(i){i.data&&(i.data.chromeMediaSourceId&&("PermissionDeniedError"===i.data.chromeMediaSourceId?t("permission-denied"):t(null,i.data.chromeMediaSourceId,n(null,i.data.chromeMediaSourceId,i.data.canRequestAudioTrack)),window.removeEventListener("message",e)),i.data.chromeExtensionStatus&&(t(i.data.chromeExtensionStatus,null,n(i.data.chromeExtensionStatus)),window.removeEventListener("message",e)))})),o?setTimeout((function(){i(o)}),100):setTimeout(i,100)):t({video:!0})},window.getScreenConstraints=function(e){r((function(){getScreenId((function(t,n,i){i||(i={video:!0}),e(t,i.video)}))}))},window.getChromeExtensionStatus=function(e){navigator.mozGetUserMedia?e("installed-enabled"):(window.addEventListener("message",(function t(n){n.data&&n.data.chromeExtensionStatus&&(e(n.data.chromeExtensionStatus),window.removeEventListener("message",t))})),setTimeout(a,100))},t.getScreenId=getScreenId},"+FKC":function(e,t,n){"use strict";t.__esModule=!0;var i=n("bDgZ"),o=n("9m68").OpenViduLogger.getInstance(),r=function(){function e(e){this.stream=e,this.webRtcStatsEnabled=!1,this.statsInterval=1,this.stats={inbound:{audio:{bytesReceived:0,packetsReceived:0,packetsLost:0},video:{bytesReceived:0,packetsReceived:0,packetsLost:0,framesDecoded:0,nackCount:0}},outbound:{audio:{bytesSent:0,packetsSent:0},video:{bytesSent:0,packetsSent:0,framesEncoded:0,nackCount:0}}}}return e.prototype.isEnabled=function(){return this.webRtcStatsEnabled},e.prototype.initWebRtcStats=function(){var e=this,t=localStorage.getItem("elastest-instrumentation");if(t){o.warn("WebRtc stats enabled for stream "+this.stream.streamId+" of connection "+this.stream.connection.connectionId),this.webRtcStatsEnabled=!0;var n=JSON.parse(t);return this.statsInterval=n.webrtc.interval,o.warn("localStorage item: "+JSON.stringify(n)),void(this.webRtcStatsIntervalId=setInterval((function(){e.sendStatsToHttpEndpoint(n)}),1e3*this.statsInterval))}o.debug("WebRtc stats not enabled")},e.prototype.stopWebRtcStats=function(){this.webRtcStatsEnabled&&(clearInterval(this.webRtcStatsIntervalId),o.warn("WebRtc stats stopped for disposed stream "+this.stream.streamId+" of connection "+this.stream.connection.connectionId))},e.prototype.getSelectedIceCandidateInfo=function(){var e=this;return new Promise((function(t,n){e.getStatsAgnostic(e.stream.getRTCPeerConnection(),(function(o){if(-1!==i.name.indexOf("Chrome")||-1!==i.name.indexOf("Opera")){var r=void 0,a=void 0,s=void 0,c={},l={};for(var u in o){var d=o[u];"localcandidate"===d.type?c[d.id]=d:"remotecandidate"===d.type?l[d.id]=d:"googCandidatePair"===d.type&&"true"===d.googActiveConnection&&(s=d,r=d.localCandidateId,a=d.remoteCandidateId)}var g=c[r];if(g){var h=e.stream.getLocalIceCandidateList().filter((function(e){return!!e.candidate&&e.candidate.indexOf(g.ipAddress)>=0&&e.candidate.indexOf(g.portNumber)>=0&&e.candidate.indexOf(g.priority)>=0}));g.raw=h[0]?h[0].candidate:"ERROR: Cannot find local candidate in list of sent ICE candidates"}else g="ERROR: No active local ICE candidate. Probably ICE-TCP is being used";var p=l[a];p?(h=e.stream.getRemoteIceCandidateList().filter((function(e){return!!e.candidate&&e.candidate.indexOf(p.ipAddress)>=0&&e.candidate.indexOf(p.portNumber)>=0&&e.candidate.indexOf(p.priority)>=0})),p.raw=h[0]?h[0].candidate:"ERROR: Cannot find remote candidate in list of received ICE candidates"):p="ERROR: No active remote ICE candidate. Probably ICE-TCP is being used",t({googCandidatePair:s,localCandidate:g,remoteCandidate:p})}else n("Selected ICE candidate info only available for Chrome")}),(function(e){n(e)}))}))},e.prototype.sendStatsToHttpEndpoint=function(e){var t=this,n=function(n){var i=new XMLHttpRequest,r=e.webrtc.httpEndpoint;i.open("POST",r,!0),i.setRequestHeader("Content-type","application/json"),i.onreadystatechange=function(){4===i.readyState&&200===i.status&&o.log("WebRtc stats successfully sent to "+r+" for stream "+t.stream.streamId+" of connection "+t.stream.connection.connectionId)},i.send(n)};this.getStatsAgnostic(this.stream.getRTCPeerConnection(),(function(o){if(-1!==i.name.indexOf("Firefox"))o.forEach((function(i){var o={};if("inbound-rtp"===i.type&&null!==i.nackCount&&!1===i.isRemote&&i.id.startsWith("inbound")&&i.remoteId.startsWith("inbound")){var r="webrtc_inbound_"+i.mediaType+"_"+i.ssrc,a={bytesReceived:(i.bytesReceived-t.stats.inbound[i.mediaType].bytesReceived)/t.statsInterval,jitter:1e3*i.jitter,packetsReceived:(i.packetsReceived-t.stats.inbound[i.mediaType].packetsReceived)/t.statsInterval,packetsLost:(i.packetsLost-t.stats.inbound[i.mediaType].packetsLost)/t.statsInterval},s={bytesReceived:"bytes",jitter:"ms",packetsReceived:"packets",packetsLost:"packets"};"video"===i.mediaType&&(a.framesDecoded=(i.framesDecoded-t.stats.inbound.video.framesDecoded)/t.statsInterval,a.nackCount=(i.nackCount-t.stats.inbound.video.nackCount)/t.statsInterval,s.framesDecoded="frames",s.nackCount="packets",t.stats.inbound.video.framesDecoded=i.framesDecoded,t.stats.inbound.video.nackCount=i.nackCount),t.stats.inbound[i.mediaType].bytesReceived=i.bytesReceived,t.stats.inbound[i.mediaType].packetsReceived=i.packetsReceived,t.stats.inbound[i.mediaType].packetsLost=i.packetsLost,(o={"@timestamp":new Date(i.timestamp).toISOString(),exec:e.exec,component:e.component,stream:"webRtc",et_type:r,stream_type:"composed_metrics",units:s})[r]=a,n(JSON.stringify(o))}else"outbound-rtp"===i.type&&!1===i.isRemote&&i.id.toLowerCase().includes("outbound")&&(r="webrtc_outbound_"+i.mediaType+"_"+i.ssrc,a={bytesSent:(i.bytesSent-t.stats.outbound[i.mediaType].bytesSent)/t.statsInterval,packetsSent:(i.packetsSent-t.stats.outbound[i.mediaType].packetsSent)/t.statsInterval},s={bytesSent:"bytes",packetsSent:"packets"},"video"===i.mediaType&&(a.framesEncoded=(i.framesEncoded-t.stats.outbound.video.framesEncoded)/t.statsInterval,s.framesEncoded="frames",t.stats.outbound.video.framesEncoded=i.framesEncoded),t.stats.outbound[i.mediaType].bytesSent=i.bytesSent,t.stats.outbound[i.mediaType].packetsSent=i.packetsSent,(o={"@timestamp":new Date(i.timestamp).toISOString(),exec:e.exec,component:e.component,stream:"webRtc",et_type:r,stream_type:"composed_metrics",units:s})[r]=a,n(JSON.stringify(o)))}));else if(-1!==i.name.indexOf("Chrome")||-1!==i.name.indexOf("Opera"))for(var r=0,a=Object.keys(o);r<a.length;r++){var s=o[a[r]];if("ssrc"===s.type){var c={};if("bytesReceived"in s&&("audio"===s.mediaType&&"audioOutputLevel"in s||"video"===s.mediaType&&"qpSum"in s)){var l="webrtc_inbound_"+s.mediaType+"_"+s.ssrc,u={bytesReceived:(s.bytesReceived-t.stats.inbound[s.mediaType].bytesReceived)/t.statsInterval,jitter:s.googJitterBufferMs,packetsReceived:(s.packetsReceived-t.stats.inbound[s.mediaType].packetsReceived)/t.statsInterval,packetsLost:(s.packetsLost-t.stats.inbound[s.mediaType].packetsLost)/t.statsInterval},d={bytesReceived:"bytes",jitter:"ms",packetsReceived:"packets",packetsLost:"packets"};"video"===s.mediaType&&(u.framesDecoded=(s.framesDecoded-t.stats.inbound.video.framesDecoded)/t.statsInterval,u.nackCount=(s.googNacksSent-t.stats.inbound.video.nackCount)/t.statsInterval,d.framesDecoded="frames",d.nackCount="packets",t.stats.inbound.video.framesDecoded=s.framesDecoded,t.stats.inbound.video.nackCount=s.googNacksSent),t.stats.inbound[s.mediaType].bytesReceived=s.bytesReceived,t.stats.inbound[s.mediaType].packetsReceived=s.packetsReceived,t.stats.inbound[s.mediaType].packetsLost=s.packetsLost,(c={"@timestamp":new Date(s.timestamp).toISOString(),exec:e.exec,component:e.component,stream:"webRtc",et_type:l,stream_type:"composed_metrics",units:d})[l]=u,n(JSON.stringify(c))}else"bytesSent"in s&&(l="webrtc_outbound_"+s.mediaType+"_"+s.ssrc,u={bytesSent:(s.bytesSent-t.stats.outbound[s.mediaType].bytesSent)/t.statsInterval,packetsSent:(s.packetsSent-t.stats.outbound[s.mediaType].packetsSent)/t.statsInterval},d={bytesSent:"bytes",packetsSent:"packets"},"video"===s.mediaType&&(u.framesEncoded=(s.framesEncoded-t.stats.outbound.video.framesEncoded)/t.statsInterval,d.framesEncoded="frames",t.stats.outbound.video.framesEncoded=s.framesEncoded),t.stats.outbound[s.mediaType].bytesSent=s.bytesSent,t.stats.outbound[s.mediaType].packetsSent=s.packetsSent,(c={"@timestamp":new Date(s.timestamp).toISOString(),exec:e.exec,component:e.component,stream:"webRtc",et_type:l,stream_type:"composed_metrics",units:d})[l]=u,n(JSON.stringify(c)))}}}),(function(e){o.log(e)}))},e.prototype.standardizeReport=function(e){o.log(e);var t={};return-1!==i.name.indexOf("Firefox")?(Object.keys(e).forEach((function(t){o.log(e[t])})),e):(e.result().forEach((function(e){var n={id:e.id,timestamp:e.timestamp,type:e.type};e.names().forEach((function(t){n[t]=e.stat(t)})),t[n.id]=n})),t)},e.prototype.getStatsAgnostic=function(e,t,n){var o=this;return-1!==i.name.indexOf("Firefox")?e.getStats(null).then((function(e){var n=o.standardizeReport(e);t(n)})).catch(n):-1!==i.name.indexOf("Chrome")||-1!==i.name.indexOf("Opera")?e.getStats((function(e){var n=o.standardizeReport(e);t(n)}),null,n):void 0},e}();t.WebRtcStats=r},"+ig+":function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0;var r=function(e){function t(t,n,i){var o=e.call(this,!1,t,n)||this;return o.data=i,o}return o(t,e),t.prototype.callDefaultBehavior=function(){},t}(n("hzOQ").Event);t.FilterEvent=r},"+xpX":function(e,t,n){"use strict";n.d(t,"OpenviduSessionComponent",(function(){return yt})),n.d(t,"OpenviduSessionModule",(function(){return Ut}));var i=n("mrSG"),o=n("fXoL"),r=n("2Vo4"),a=n("z6cu"),s=n("PZzU"),c=n("dNgK"),l=n("bTqV"),u=n("NFeN"),d=n("Qu3c"),g=n("ofXK"),h=n("3Pt+"),p=n("znSr"),f=n("0IaG"),m=n("tk/3"),v=n("tyNb"),b=n("XhcP"),y=n("TIDz"),C=n("kmnG"),O=n("qFsG"),S=n("/t3+"),M=n("XiUz"),_=n("TU8p"),x=n("Xa2L"),k=n("d3UM"),P=n("FKr1"),w=n("JIr8"),E=n("Wp6s"),I=n("zkoq"),T=n("5RNC"),A=n("YUcS"),R=["chatScroll"],V=["chatInput"];function L(e,t){if(1&e&&(o.Wb(0,"div",13),o.Rb(1,"img",14),o.Wb(2,"div",15),o.Wb(3,"div",16),o.Wb(4,"p"),o.Mc(5),o.Vb(),o.Vb(),o.Wb(6,"div",17),o.Rb(7,"span",18),o.Rb(8,"p",19),o.jc(9,"linkify"),o.Vb(),o.Vb(),o.Vb()),2&e){var n=t.$implicit;o.pc("ngClass",n.isLocal?"right":"left"),o.Cb(1),o.pc("src",n.userAvatar,o.Ec),o.Cb(4),o.Nc(n.nickname),o.Cb(3),o.pc("innerHTML",o.kc(9,4,n.message),o.Cc)}}var N=["chatComponent"],D=["sidenav"];function j(e,t){if(1&e){var n=o.Xb();o.Wb(0,"app-room-config",4),o.ec("join",(function(){return o.Bc(n),o.ic(2).onConfigRoomJoin()}))("leaveSession",(function(){return o.Bc(n),o.ic(2).leaveSession()}))("publisherCreated",(function(e){return o.Bc(n),o.ic(2).emitPublisher(e)})),o.Vb()}if(2&e){var i=o.ic(2);o.pc("ovSettings",i.ovSettings)("externalConfig",i.externalConfig)}}function U(e,t){1&e&&o.Rb(0,"div",14)}function W(e,t){if(1&e&&(o.Wb(0,"mat-sidenav",15,16),o.Rb(2,"chat-component",17,18),o.Vb()),2&e){var n=o.ic(3);o.Gb("boundsLight",n.lightTheme),o.qc("mode",n.sidenavMode),o.Cb(2),o.pc("lightTheme",n.lightTheme)}}function B(e,t){if(1&e){var n=o.Xb();o.Wb(0,"div",19),o.Wb(1,"stream-component",20),o.ec("nicknameClicked",(function(e){return o.Bc(n),o.ic(3).onNicknameUpdate(e)}))("replaceScreenTrackClicked",(function(e){return o.Bc(n),o.ic(3).onReplaceScreenTrack(e)}))("toggleVideoSizeClicked",(function(e){return o.Bc(n),o.ic(3).onToggleVideoSize(e)})),o.Vb(),o.Vb()}if(2&e){var i=t.$implicit;o.Jc("display",null!=i.streamManager&&null!=i.streamManager.stream&&i.streamManager.stream.videoActive?"block":"none"),o.Cb(1),o.pc("user",i)("videoSizeBig",i.videoSizeBig)}}function F(e,t){if(1&e){var n=o.Xb();o.Wb(0,"div",21),o.Wb(1,"stream-component",22),o.ec("toggleVideoSizeClicked",(function(e){return o.Bc(n),o.ic(3).onToggleVideoSize(e)})),o.Vb(),o.Vb()}if(2&e){var i=t.$implicit;o.Jc("display",null!=i.streamManager&&null!=i.streamManager.stream&&i.streamManager.stream.videoActive?"block":"none"),o.Cb(1),o.pc("user",i)("videoSizeBig",i.videoSizeBig)}}function z(e,t){if(1&e){var n=o.Xb();o.Wb(0,"div"),o.Kc(1,U,1,0,"div",5),o.Wb(2,"app-toolbar",6),o.ec("camButtonClicked",(function(){return o.Bc(n),o.ic(2).toggleCam()}))("micButtonClicked",(function(){return o.Bc(n),o.ic(2).toggleMic()}))("screenShareClicked",(function(){return o.Bc(n),o.ic(2).toggleScreenShare()}))("layoutButtonClicked",(function(){return o.Bc(n),o.ic(2).toggleSpeakerLayout()}))("leaveSessionButtonClicked",(function(){return o.Bc(n),o.ic(2).leaveSession()})),o.Vb(),o.Wb(3,"mat-sidenav-container",7),o.Kc(4,W,4,4,"mat-sidenav",8),o.jc(5,"hasChat"),o.Wb(6,"mat-sidenav-content",9),o.Wb(7,"div",10),o.Kc(8,B,2,4,"div",11),o.Kc(9,F,2,4,"div",12),o.Vb(),o.Vb(),o.Vb(),o.Rb(10,"app-footer",13),o.Vb()}if(2&e){var i=o.ic(2);o.Cb(1),o.pc("ngIf",i.isConnectionLost),o.Cb(1),o.pc("lightTheme",i.lightTheme)("compact",i.compact)("mySessionId",i.mySessionId)("ovSettings",i.ovSettings)("hasVideoDevices",i.hasVideoDevices)("hasAudioDevices",i.hasAudioDevices)("isWebcamVideoEnabled",i.oVSessionService.hasWebcamVideoActive())("isWebcamAudioEnabled",i.toolbarMicIconEnabled())("isScreenEnabled",i.oVSessionService.isScreenShareEnabled())("isAutoLayout",i.isAutoLayout)("isConnectionLost",i.isConnectionLost),o.Cb(1),o.Gb("boundsLight",i.lightTheme),o.Cb(1),o.pc("ngIf",o.kc(5,21,i.ovSettings)),o.Cb(3),o.Gb("boundsLight",i.lightTheme),o.Cb(1),o.pc("ngForOf",i.localUsers),o.Cb(1),o.pc("ngForOf",i.remoteUsers),o.Cb(1),o.pc("lightTheme",i.lightTheme)("participants",i.remoteUsers)}}function G(e,t){if(1&e&&(o.Wb(0,"div",1),o.Kc(1,j,1,2,"app-room-config",2),o.Kc(2,z,11,23,"div",3),o.Vb()),2&e){var n=o.ic();o.Gb("boundsLight",n.lightTheme),o.Cb(1),o.pc("ngIf",n.showConfigRoomCard),o.Cb(1),o.pc("ngIf",n.localUsers&&n.localUsers.length>0)}}var Q=["videoRoom"];function K(e,t){if(1&e){var n=o.Xb();o.Wb(0,"app-video-room",1,2),o.ec("_session",(function(e){return o.Bc(n),o.ic().emitSession(e)}))("_publisher",(function(e){return o.Bc(n),o.ic().emitPublisher(e)}))("_error",(function(e){return o.Bc(n),o.ic().emitErrorEvent(e)}))("_leaveSession",(function(e){return o.Bc(n),o.ic().emitLeaveSessionEvent(e)}))("_joinSession",(function(e){return o.Bc(n),o.ic().emitJoinSessionEvent(e)})),o.Vb()}if(2&e){var i=o.ic();o.pc("externalConfig",i.angularLibrary)}}var H=["nicknameInput"],q=["streamComponent"];function Y(e,t){1&e&&(o.Wb(0,"span"),o.Mc(1," (edit)"),o.Vb())}function Z(e,t){if(1&e){var n=o.Xb();o.Wb(0,"div",15),o.ec("click",(function(){return o.Bc(n),o.ic(2).toggleNicknameForm()})),o.Wb(1,"span",16),o.Mc(2),o.Vb(),o.Kc(3,Y,2,0,"span",17),o.Vb()}if(2&e){var i=o.ic(2);o.Cb(2),o.Nc(i._user.nickname),o.Cb(1),o.pc("ngIf",!i._user.streamManager.remote)}}function J(e,t){1&e&&(o.Wb(0,"mat-error"),o.Mc(1," Nickname is "),o.Wb(2,"strong"),o.Mc(3,"required"),o.Vb(),o.Vb())}function X(e,t){1&e&&(o.Wb(0,"mat-error"),o.Mc(1," Nickname is "),o.Wb(2,"strong"),o.Mc(3,"too long!"),o.Vb(),o.Vb())}function ee(e,t){if(1&e){var n=o.Xb();o.Wb(0,"div",18),o.Wb(1,"button",19),o.ec("click",(function(){return o.Bc(n),o.ic(2).toggleNicknameForm()})),o.Wb(2,"mat-icon",20),o.Mc(3,"highlight_off"),o.Vb(),o.Vb(),o.Wb(4,"form",21),o.Wb(5,"mat-form-field",22),o.Wb(6,"input",23,24),o.ec("keypress",(function(e){return o.Bc(n),o.ic(2).eventKeyPress(e)})),o.Vb(),o.Kc(8,J,4,0,"mat-error",17),o.Kc(9,X,4,0,"mat-error",17),o.Vb(),o.Vb(),o.Vb()}if(2&e){var i=o.ic(2);o.Gb("fullscreen",i.isFullscreen),o.Cb(6),o.rc("placeholder","Nick: ",i._user.nickname,""),o.pc("formControl",i.nicknameFormControl)("errorStateMatcher",i.matcher),o.Cb(2),o.pc("ngIf",i.nicknameFormControl.hasError("required")),o.Cb(1),o.pc("ngIf",i.nicknameFormControl.hasError("maxlength"))}}function te(e,t){1&e&&(o.Wb(0,"div",25),o.Wb(1,"mat-icon"),o.Mc(2,"mic_off"),o.Vb(),o.Vb())}function ne(e,t){1&e&&(o.Wb(0,"div",26),o.Wb(1,"mat-icon"),o.Mc(2,"videocam_off"),o.Vb(),o.Vb())}function ie(e,t){1&e&&(o.Wb(0,"mat-icon",30),o.Mc(1,"volume_up"),o.Vb())}function oe(e,t){1&e&&(o.Wb(0,"mat-icon",31),o.Mc(1,"volume_off"),o.Vb())}function re(e,t){if(1&e){var n=o.Xb();o.Wb(0,"button",27),o.ec("click",(function(){return o.Bc(n),o.ic(2).toggleSound()})),o.Kc(1,ie,2,0,"mat-icon",28),o.Kc(2,oe,2,0,"mat-icon",29),o.Vb()}if(2&e){var i=o.ic(2);o.Cb(1),o.pc("ngIf",!i.mutedSound),o.Cb(1),o.pc("ngIf",i.mutedSound)}}function ae(e,t){if(1&e){var n=o.Xb();o.Wb(0,"button",32),o.ec("click",(function(){return o.Bc(n),o.ic(2).replaceScreenTrack()})),o.Wb(1,"mat-icon",33),o.Mc(2,"picture_in_picture"),o.Vb(),o.Vb()}}function se(e,t){if(1&e){var n=o.Xb();o.Wb(0,"div",1,2),o.ec("dblclick",(function(){return o.Bc(n),o.ic().toggleVideoSize()})),o.Wb(2,"div",3),o.Kc(3,Z,4,2,"div",4),o.Kc(4,ee,10,7,"div",5),o.Vb(),o.Wb(5,"ov-video",6),o.ec("toggleVideoSizeEvent",(function(e){return o.Bc(n),o.ic().toggleVideoSize(e)})),o.Vb(),o.Wb(6,"div",7),o.Kc(7,te,3,0,"div",8),o.Kc(8,ne,3,0,"div",9),o.Vb(),o.Wb(9,"div",10),o.Wb(10,"button",11),o.ec("click",(function(){return o.Bc(n),o.ic().toggleVideoSize()})),o.Wb(11,"mat-icon"),o.Mc(12),o.Vb(),o.Vb(),o.Wb(13,"button",12),o.ec("click",(function(){return o.Bc(n),o.ic().toggleFullscreen()})),o.Wb(14,"mat-icon"),o.Mc(15),o.Vb(),o.Vb(),o.Kc(16,re,3,2,"button",13),o.Kc(17,ae,3,0,"button",14),o.Vb(),o.Vb()}if(2&e){var i=o.ic();o.pc("id","container-"+i._user.streamManager.stream.streamId),o.Cb(2),o.Gb("fullscreen",i.isFullscreen),o.Cb(1),o.pc("ngIf",!i.toggleNickname),o.Cb(1),o.pc("ngIf",i.toggleNickname&&!i._user.streamManager.remote),o.Cb(1),o.pc("streamManager",i._user.streamManager)("mutedSound",i.mutedSound),o.Cb(2),o.pc("ngIf",!i._user.streamManager.stream.audioActive),o.Cb(1),o.pc("ngIf",!i._user.streamManager.stream.videoActive),o.Cb(4),o.Nc(i.videoSizeIcon),o.Cb(3),o.Nc(i.fullscreenIcon),o.Cb(1),o.pc("ngIf",i._user.streamManager.remote),o.Cb(1),o.pc("ngIf",!i._user.streamManager.remote&&i._user.isScreen())}}var ce=["videoElement"];function le(e,t){1&e&&(o.Wb(0,"mat-icon",14),o.Mc(1,"mic"),o.Vb())}function ue(e,t){1&e&&(o.Wb(0,"mat-icon",15),o.Mc(1,"mic_off"),o.Vb())}function de(e,t){if(1&e){var n=o.Xb();o.Wb(0,"button",11),o.ec("click",(function(){return o.Bc(n),o.ic().toggleMicrophone()})),o.Kc(1,le,2,0,"mat-icon",12),o.Kc(2,ue,2,0,"mat-icon",13),o.Vb()}if(2&e){var i=o.ic();o.pc("disabled",i.isConnectionLost),o.Cb(1),o.pc("ngIf",i.isWebcamAudioEnabled),o.Cb(1),o.pc("ngIf",!i.isWebcamAudioEnabled)}}function ge(e,t){1&e&&(o.Wb(0,"mat-icon",19),o.Mc(1,"videocam"),o.Vb())}function he(e,t){1&e&&(o.Wb(0,"mat-icon",20),o.Mc(1,"videocam_off"),o.Vb())}function pe(e,t){if(1&e){var n=o.Xb();o.Wb(0,"button",16),o.ec("click",(function(){return o.Bc(n),o.ic().toggleCamera()})),o.Kc(1,ge,2,0,"mat-icon",17),o.Kc(2,he,2,0,"mat-icon",18),o.Vb()}if(2&e){var i=o.ic();o.pc("disabled",i.isConnectionLost),o.Cb(1),o.pc("ngIf",i.isWebcamVideoEnabled),o.Cb(1),o.pc("ngIf",!i.isWebcamVideoEnabled)}}function fe(e,t){1&e&&(o.Wb(0,"mat-icon",24),o.Mc(1,"stop_screen_share"),o.Vb())}function me(e,t){1&e&&(o.Wb(0,"mat-icon",25),o.Mc(1,"screen_share"),o.Vb())}function ve(e,t){if(1&e){var n=o.Xb();o.Wb(0,"button",21),o.ec("click",(function(){return o.Bc(n),o.ic().toggleScreenShare()})),o.Kc(1,fe,2,0,"mat-icon",22),o.Kc(2,me,2,0,"mat-icon",23),o.Vb()}if(2&e){var i=o.ic();o.pc("disabled",i.isConnectionLost),o.Cb(1),o.pc("ngIf",!i.isScreenEnabled),o.Cb(1),o.pc("ngIf",i.isScreenEnabled)}}function be(e,t){if(1&e){var n=o.Xb();o.Wb(0,"button",26),o.ec("click",(function(){return o.Bc(n),o.ic().toggleFullscreen()})),o.Wb(1,"mat-icon",27),o.Mc(2),o.Vb(),o.Vb()}if(2&e){var i=o.ic();o.pc("disabled",i.isConnectionLost),o.Cb(2),o.Nc(i.fullscreenIcon)}}function ye(e,t){1&e&&(o.Wb(0,"mat-icon",30),o.Mc(1,"voice_over_off"),o.Vb())}function Ce(e,t){1&e&&(o.Wb(0,"mat-icon",31),o.Mc(1,"record_voice_over"),o.Vb())}function Oe(e,t){if(1&e){var n=o.Xb();o.Wb(0,"button",26),o.ec("click",(function(){return o.Bc(n),o.ic().toggleSpeakerLayout()})),o.Kc(1,ye,2,0,"mat-icon",28),o.Kc(2,Ce,2,0,"mat-icon",29),o.Vb()}if(2&e){var i=o.ic();o.pc("disabled",i.isConnectionLost),o.Cb(1),o.pc("ngIf",!i.isAutoLayout),o.Cb(1),o.pc("ngIf",i.isAutoLayout)}}function Se(e,t){if(1&e){var n=o.Xb();o.Wb(0,"button",32),o.ec("click",(function(){return o.Bc(n),o.ic().leaveSession()})),o.Wb(1,"mat-icon",33),o.Mc(2,"power_settings_new"),o.Vb(),o.Vb()}}function Me(e,t){if(1&e){var n=o.Xb();o.Wb(0,"button",26),o.ec("click",(function(){return o.Bc(n),o.ic().toggleChat()})),o.Wb(1,"mat-icon",34),o.Mc(2,"chat"),o.Vb(),o.Vb()}if(2&e){var i=o.ic();o.pc("disabled",i.isConnectionLost),o.Cb(1),o.qc("matBadge",i.newMessagesNum),o.pc("matBadgeHidden",0===i.newMessagesNum)}}var _e=function(e,t){return{titleContent:!0,titleContentLight:e,titleContentDark:t}};function xe(e,t){if(1&e&&(o.Wb(0,"div",3),o.Wb(1,"span",4),o.Mc(2),o.Vb(),o.Vb()),2&e){var n=o.ic();o.pc("ngClass",o.uc(2,_e,n.lightTheme,!n.lightTheme)),o.Cb(2),o.Nc(n.sessionId)}}var ke=["bodyCard"];function Pe(e,t){if(1&e&&o.Rb(0,"ov-video",38),2&e){var n=o.ic(),i=n.$implicit,r=n.index,a=o.ic(2);o.pc("streamManager",i.streamManager)("className",a.localUsers.length>1&&0===r?"ovVideoSmall":"")}}function we(e,t){1&e&&(o.Wb(0,"div",39),o.Wb(1,"span"),o.Mc(2,"Oops! Camera is not available"),o.Vb(),o.Vb())}function Ee(e,t){if(1&e&&(o.Wb(0,"div"),o.Kc(1,Pe,1,2,"ov-video",36),o.Kc(2,we,3,0,"div",37),o.Vb()),2&e){var n=t.$implicit,i=o.ic(2);o.Cb(1),o.pc("ngIf",n.isCamera()&&i.hasVideoDevices||n.isScreen()),o.Cb(1),o.pc("ngIf",n.isCamera()&&!i.hasVideoDevices)}}function Ie(e,t){1&e&&(o.Wb(0,"div",46),o.Wb(1,"span"),o.Mc(2,"Press Avatar Button"),o.Vb(),o.Vb())}function Te(e,t){if(1&e&&o.Rb(0,"img",47),2&e){var n=o.ic(3);o.pc("src",n.videoAvatar,o.Ec)}}function Ae(e,t){1&e&&o.Rb(0,"mat-spinner",48),2&e&&o.pc("diameter",70)}function Re(e,t){if(1&e&&o.Rb(0,"img",47),2&e){var n=o.ic(3);o.pc("src",n.randomAvatar,o.Ec)}}function Ve(e,t){if(1&e){var n=o.Xb();o.Wb(0,"div",40),o.Wb(1,"div",41),o.Wb(2,"div",42),o.ec("click",(function(){return o.Bc(n),o.ic(2).setAvatar("video")})),o.Kc(3,Ie,3,0,"div",43),o.Kc(4,Te,1,1,"img",44),o.Vb(),o.Wb(5,"div",42),o.ec("click",(function(){return o.Bc(n),o.ic(2).setAvatar("random")})),o.Kc(6,Ae,1,1,"mat-spinner",45),o.Kc(7,Re,1,1,"img",44),o.Vb(),o.Vb(),o.Vb()}if(2&e){var i=o.ic(2);o.Cb(2),o.Jc("background","video"===i.avatarSelected?"lightgreen":"transparent",o.Jb),o.Cb(1),o.pc("ngIf",!i.videoAvatar),o.Cb(1),o.pc("ngIf",i.videoAvatar),o.Cb(1),o.Jc("background","random"===i.avatarSelected?"lightgreen":"transparent",o.Jb),o.Cb(1),o.pc("ngIf",!i.randomAvatar),o.Cb(1),o.pc("ngIf",i.randomAvatar)}}function Le(e,t){1&e&&(o.Wb(0,"mat-error"),o.Mc(1," Nickname is "),o.Wb(2,"strong"),o.Mc(3,"required"),o.Vb(),o.Vb())}function Ne(e,t){1&e&&(o.Wb(0,"mat-error"),o.Mc(1," Nickname is "),o.Wb(2,"strong"),o.Mc(3,"too long!"),o.Vb(),o.Vb())}function De(e,t){1&e&&(o.Wb(0,"mat-icon",55),o.Mc(1,"mic"),o.Vb())}function je(e,t){1&e&&(o.Wb(0,"mat-icon",56),o.Mc(1,"mic_off"),o.Vb())}function Ue(e,t){if(1&e&&(o.Wb(0,"mat-option",57),o.Mc(1),o.Vb()),2&e){var n=t.$implicit;o.pc("value",n.device),o.Cb(1),o.Oc(" ",n.label," ")}}function We(e,t){if(1&e){var n=o.Xb();o.Wb(0,"div",24),o.Wb(1,"div",25),o.Wb(2,"div",26),o.Wb(3,"button",49),o.ec("click",(function(){return o.Bc(n),o.ic(2).toggleMic()})),o.Kc(4,De,2,0,"mat-icon",50),o.Kc(5,je,2,0,"mat-icon",51),o.Vb(),o.Vb(),o.Wb(6,"div",29),o.Wb(7,"mat-form-field",52),o.Wb(8,"mat-select",53),o.ec("selectionChange",(function(e){return o.Bc(n),o.ic(2).onMicrophoneSelected(e)})),o.Kc(9,Ue,2,2,"mat-option",54),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Vb()}if(2&e){var i=o.ic(2);o.Cb(4),o.pc("ngIf",i.isAudioActive),o.Cb(1),o.pc("ngIf",!i.isAudioActive),o.Cb(3),o.pc("ngModel",i.isAudioActive&&i.micSelected?i.micSelected.device:"None"),o.Cb(1),o.pc("ngForOf",i.microphones)}}function Be(e,t){1&e&&(o.Wb(0,"mat-icon",62),o.Mc(1,"videocam"),o.Vb())}function Fe(e,t){1&e&&(o.Wb(0,"mat-icon",63),o.Mc(1,"videocam_off"),o.Vb())}function ze(e,t){if(1&e&&(o.Wb(0,"mat-option",57),o.Mc(1),o.Vb()),2&e){var n=t.$implicit;o.pc("value",n.device),o.Cb(1),o.Oc(" ",n.label," ")}}function Ge(e,t){if(1&e){var n=o.Xb();o.Wb(0,"div",24),o.Wb(1,"div",25),o.Wb(2,"div",26),o.Wb(3,"button",58),o.ec("click",(function(){return o.Bc(n),o.ic(2).toggleCam()})),o.Kc(4,Be,2,0,"mat-icon",59),o.Kc(5,Fe,2,0,"mat-icon",60),o.Vb(),o.Vb(),o.Wb(6,"div",29),o.Wb(7,"mat-form-field",52),o.Wb(8,"mat-select",61),o.ec("selectionChange",(function(e){return o.Bc(n),o.ic(2).onCameraSelected(e)})),o.Kc(9,ze,2,2,"mat-option",54),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Vb()}if(2&e){var i=o.ic(2);o.Cb(4),o.pc("ngIf",i.isVideoActive),o.Cb(1),o.pc("ngIf",!i.isVideoActive),o.Cb(3),o.pc("ngModel",i.isVideoActive&&i.camSelected?i.camSelected.device:"None"),o.Cb(1),o.pc("ngForOf",i.cameras)}}function Qe(e,t){1&e&&(o.Wb(0,"mat-icon",68),o.Mc(1,"screen_share"),o.Vb())}function Ke(e,t){1&e&&(o.Wb(0,"mat-icon",69),o.Mc(1," stop_screen_share"),o.Vb())}function He(e,t){if(1&e){var n=o.Xb();o.Wb(0,"div",24),o.Wb(1,"div",25),o.Wb(2,"div",26),o.Wb(3,"button",64),o.ec("click",(function(){return o.Bc(n),o.ic(2).toggleScreenShare()})),o.Kc(4,Qe,2,0,"mat-icon",65),o.Kc(5,Ke,2,0,"mat-icon",66),o.Vb(),o.Vb(),o.Wb(6,"div",29),o.Wb(7,"mat-form-field",52),o.Rb(8,"input",67),o.Vb(),o.Vb(),o.Vb(),o.Vb()}if(2&e){var i=o.ic(2);o.Cb(4),o.pc("ngIf",i.oVSessionService.isScreenShareEnabled()),o.Cb(1),o.pc("ngIf",!i.oVSessionService.isScreenShareEnabled()),o.Cb(3),o.pc("ngModel",i.oVSessionService.isScreenShareEnabled()?"Screen":"None")}}function qe(e,t){if(1&e){var n=o.Xb();o.Wb(0,"div",2),o.Wb(1,"div",3),o.Wb(2,"div",4),o.Wb(3,"div",5),o.Wb(4,"div",6),o.Rb(5,"img",7),o.Vb(),o.Wb(6,"h3",8),o.Mc(7),o.Vb(),o.Wb(8,"button",9),o.ec("click",(function(){return o.Bc(n),o.ic().close()})),o.Wb(9,"mat-icon",10),o.Mc(10,"highlight_off"),o.Vb(),o.Vb(),o.Vb(),o.Wb(11,"div",11,12),o.Wb(13,"div",13),o.Wb(14,"div",14),o.Wb(15,"div",15),o.Kc(16,Ee,3,2,"div",16),o.Vb(),o.Wb(17,"div",17),o.Wb(18,"button",18),o.ec("click",(function(){return o.Bc(n),o.ic().takePhoto()})),o.Wb(19,"mat-icon",19),o.Mc(20,"photo_camera"),o.Vb(),o.Wb(21,"span",20),o.Mc(22,"Capture Avatar"),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Wb(23,"div",21),o.Wb(24,"div",22),o.Wb(25,"h3"),o.Mc(26,"Avatar"),o.Vb(),o.Vb(),o.Kc(27,Ve,8,8,"div",23),o.Wb(28,"div",24),o.Wb(29,"div",25),o.Wb(30,"div",26),o.Wb(31,"button",27),o.ec("click",(function(){return o.Bc(n),o.ic().setNicknameForm()})),o.Wb(32,"mat-icon",28),o.Mc(33,"person"),o.Vb(),o.Vb(),o.Vb(),o.Wb(34,"div",29),o.Wb(35,"form",30),o.Wb(36,"mat-form-field"),o.Wb(37,"input",31),o.ec("keypress",(function(e){return o.Bc(n),o.ic().eventKeyPress(e)})),o.Vb(),o.Kc(38,Le,4,0,"mat-error",32),o.Kc(39,Ne,4,0,"mat-error",32),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Kc(40,We,10,4,"div",33),o.jc(41,"hasAudio"),o.Kc(42,Ge,10,4,"div",33),o.jc(43,"hasVideo"),o.Kc(44,He,9,3,"div",33),o.jc(45,"hasScreenSharing"),o.Vb(),o.Vb(),o.Vb(),o.Wb(46,"div",34),o.Wb(47,"button",35),o.ec("click",(function(){return o.Bc(n),o.ic().joinSession()})),o.Mc(48,"JOIN"),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Vb()}if(2&e){var i=o.ic();o.Cb(7),o.Nc(i.mySessionId),o.Cb(9),o.pc("ngForOf",i.localUsers),o.Cb(11),o.pc("ngIf",i.hasVideoDevices),o.Cb(10),o.pc("formControl",i.nicknameFormControl)("errorStateMatcher",i.matcher),o.Cb(1),o.pc("ngIf",i.nicknameFormControl.hasError("required")),o.Cb(1),o.pc("ngIf",i.nicknameFormControl.hasError("maxlength")),o.Cb(1),o.pc("ngIf",i.hasAudioDevices&&o.kc(41,10,i.ovSettings)),o.Cb(2),o.pc("ngIf",i.hasVideoDevices&&o.kc(43,12,i.ovSettings)),o.Cb(2),o.pc("ngIf",o.kc(45,14,i.ovSettings))}}var Ye=function(e){return{display:e}},Ze=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"updateLayout",value:function(){var e=this;setTimeout((function(){if("none"!==e.layoutContainer.style.display){var t=e.layoutContainer.id;t||(t="OT_"+e.cheapUUID(),e.layoutContainer.id=t);var n,i,o=e.getHeight(e.layoutContainer)-e.getCSSNumber(e.layoutContainer,"borderTop")-e.getCSSNumber(e.layoutContainer,"borderBottom"),r=e.getWidth(e.layoutContainer)-e.getCSSNumber(e.layoutContainer,"borderLeft")-e.getCSSNumber(e.layoutContainer,"borderRight"),a=o/r,s=0,c=0,l=0,u=0,d=Array.prototype.filter.call(e.layoutContainer.querySelectorAll("#"+t+">."+e.opts.bigClass),e.filterDisplayNone),g=Array.prototype.filter.call(e.layoutContainer.querySelectorAll("#"+t+">*:not(."+e.opts.bigClass+")"),e.filterDisplayNone);if(d.length>0&&g.length>0)a>e.getVideoRatio(d[0])?(n=r,l=o-(c=i=Math.floor(o*e.opts.bigPercentage))):(i=o,u=r-(s=n=Math.floor(r*e.opts.bigPercentage))),e.opts.bigFirst?(e.arrange(d,n,i,0,0,e.opts.bigFixedRatio,e.opts.bigMinRatio,e.opts.bigMaxRatio,e.opts.animate),e.arrange(g,r-s,o-c,s,c,e.opts.fixedRatio,e.opts.minRatio,e.opts.maxRatio,e.opts.animate)):(e.arrange(g,r-s,o-c,0,0,e.opts.fixedRatio,e.opts.minRatio,e.opts.maxRatio,e.opts.animate),e.arrange(d,n,i,u,l,e.opts.bigFixedRatio,e.opts.bigMinRatio,e.opts.bigMaxRatio,e.opts.animate));else d.length>0&&0===g.length?e.arrange(d,r,o,0,0,e.opts.bigFixedRatio,e.opts.bigMinRatio,e.opts.bigMaxRatio,e.opts.animate):e.arrange(g,r-s,o-c,s,c,e.opts.fixedRatio,e.opts.minRatio,e.opts.maxRatio,e.opts.animate)}}),50)}},{key:"initLayoutContainer",value:function(e,t){this.opts={maxRatio:null!=t.maxRatio?t.maxRatio:1.5,minRatio:null!=t.minRatio?t.minRatio:9/16,fixedRatio:null!=t.fixedRatio&&t.fixedRatio,animate:null!=t.animate&&t.animate,bigClass:null!=t.bigClass?t.bigClass:"OT_big",bigPercentage:null!=t.bigPercentage?t.bigPercentage:.8,bigFixedRatio:null!=t.bigFixedRatio&&t.bigFixedRatio,bigMaxRatio:null!=t.bigMaxRatio?t.bigMaxRatio:1.5,bigMinRatio:null!=t.bigMinRatio?t.bigMinRatio:9/16,bigFirst:null==t.bigFirst||t.bigFirst},this.layoutContainer="string"==typeof e?$(e):e}},{key:"setLayoutOptions",value:function(e){this.opts=e}},{key:"fixAspectRatio",value:function(e,t){var n=e.querySelector(".OT_root");if(n){var i=n.style.width;n.style.width=t+"px",n.style.width=i||""}}},{key:"positionElement",value:function(e,t,n,i,o,r){var a=this,s={left:t+"px",top:n+"px",width:i+"px",height:o+"px"};this.fixAspectRatio(e,i),r&&$?($(e).stop(),$(e).animate(s,r.duration||200,r.easing||"swing",(function(){a.fixAspectRatio(e,i),r.complete&&r.complete.call(a)}))):$(e).css(s),this.fixAspectRatio(e,i)}},{key:"getVideoRatio",value:function(e){if(!e)return 3/4;var t=e.querySelector("video");return t&&t.videoHeight&&t.videoWidth?t.videoHeight/t.videoWidth:e.videoHeight&&e.videoWidth?e.videoHeight/e.videoWidth:3/4}},{key:"getCSSNumber",value:function(e,t){var n=$(e).css(t);return n?parseInt(n,10):0}},{key:"cheapUUID",value:function(){return(1e8*Math.random()).toFixed(0)}},{key:"getHeight",value:function(e){var t=$(e).css("height");return t?parseInt(t,10):0}},{key:"getWidth",value:function(e){var t=$(e).css("width");return t?parseInt(t,10):0}},{key:"getBestDimensions",value:function(e,t,n,i,o,r){for(var a,s,c,l,u,d,g,h=1;h<=n;h++){var p=h,f=Math.ceil(n/p);(g=(d=Math.floor(o/f))/(u=Math.floor(i/p)))>t?d=u*(g=t):g<e&&(u=d/(g=e));var m=u*d*n;(void 0===a||m>a)&&(a=m,r=d,l=u,s=p,c=f)}return{maxArea:a,targetCols:s,targetRows:c,targetHeight:r,targetWidth:l,ratio:r/l}}},{key:"arrange",value:function(e,t,n,i,o,r,a,s,c){var l,u,d=e.length;if(r){var g=this.getVideoRatio(e.length>0?e[0]:null);u=this.getBestDimensions(g,g,d,t,n,l)}else u=this.getBestDimensions(a,s,d,t,n,l);for(var h,p=0,f=0,m=[],v=0;v<e.length;v++){v%u.targetCols==0&&(h={children:[],width:0,height:0},m.push(h));var b=e[v];h.children.push(b);var y=u.targetWidth;l=u.targetHeight,r&&(y=l/this.getVideoRatio(b)),h.width+=y,h.height=l}for(var C=0,O=0,S=0;S<m.length;S++)(h=m[S]).width>t?(h.height=Math.floor(h.height*(t/h.width)),h.width=t):h.width<t&&(O+=1),C+=h.height;if(C<n&&O>0){var M=n-C;C=0;for(var _=0;_<m.length;_++){if((h=m[_]).width<t){var x=M/O;x/h.height>(t-h.width)/h.width&&(x=Math.floor((t-h.width)/h.width*h.height)),h.width+=Math.floor(x/h.height*h.width),h.height+=x,M-=x,O-=1}C+=h.height}}f=(n-C)/2;for(var k=0;k<m.length;k++){p=(t-(h=m[k]).width)/2;for(var P=0;P<h.children.length;P++){var w=h.children[P],E=u.targetWidth;l=h.height,r&&(E=Math.floor(l/this.getVideoRatio(w))),w.style.position="absolute";var I=E-this.getCSSNumber(w,"paddingLeft")-this.getCSSNumber(w,"paddingRight")-this.getCSSNumber(w,"marginLeft")-this.getCSSNumber(w,"marginRight")-this.getCSSNumber(w,"borderLeft")-this.getCSSNumber(w,"borderRight"),T=l-this.getCSSNumber(w,"paddingTop")-this.getCSSNumber(w,"paddingBottom")-this.getCSSNumber(w,"marginTop")-this.getCSSNumber(w,"marginBottom")-this.getCSSNumber(w,"borderTop")-this.getCSSNumber(w,"borderBottom");this.positionElement(w,p+i,f+o,I,T,c),p+=E}f+=l}}},{key:"filterDisplayNone",value:function(e){return"none"!==e.style.display}}]),e}(),Je=function(e){return e.CAMERA="CAMERA",e.SCREEN="SCREEN",e.CUSTOM="CUSTOM",e}({}),Xe=function(e){return e.WINDOW="window",e.SCREEN="screen",e}({}),$e=function(){function e(t,n,i){_classCallCheck(this,e),this.connectionId=t||"",this.nickname=i||"OpenVidu",this.streamManager=n||null}return _createClass(e,[{key:"isAudioActive",value:function(){var e,t;return null===(t=null===(e=this.streamManager)||void 0===e?void 0:e.stream)||void 0===t?void 0:t.audioActive}},{key:"isVideoActive",value:function(){var e,t;return null===(t=null===(e=this.streamManager)||void 0===e?void 0:e.stream)||void 0===t?void 0:t.videoActive}},{key:"getConnectionId",value:function(){var e,t,n;return null===(n=null===(t=null===(e=this.streamManager)||void 0===e?void 0:e.stream)||void 0===t?void 0:t.connection)||void 0===n?void 0:n.connectionId}},{key:"getNickname",value:function(){return this.nickname}},{key:"getStreamManager",value:function(){return this.streamManager}},{key:"getAvatar",value:function(){return this.videoAvatar?this.videoAvatar.toDataURL():this.randomAvatar}},{key:"isLocal",value:function(){return!this.isRemote()}},{key:"isRemote",value:function(){var e;return null===(e=this.streamManager)||void 0===e?void 0:e.remote}},{key:"isScreen",value:function(){var e,t;return(null===(t=null===(e=this.streamManager)||void 0===e?void 0:e.stream)||void 0===t?void 0:t.typeOfVideo)===Je.SCREEN}},{key:"isCamera",value:function(){var e,t;return(null===(t=null===(e=this.streamManager)||void 0===e?void 0:e.stream)||void 0===t?void 0:t.typeOfVideo)===Je.CAMERA||this.isLocal()&&!this.isScreen()}},{key:"setStreamManager",value:function(e){this.streamManager=e}},{key:"setNickname",value:function(e){this.nickname=e}},{key:"isVideoSizeBig",value:function(){return this.videoSizeBig}},{key:"setVideoSizeBig",value:function(e){this.videoSizeBig=e}},{key:"setUserAvatar",value:function(e){var t=this;return new Promise((function(n){if(e)t.randomAvatar=e,n();else{t.createVideoAvatar();var i=document.getElementById("video-"+t.getStreamManager().stream.streamId);t.videoAvatar.getContext("2d").drawImage(i,200,120,285,285,0,0,100,100),n()}}))}},{key:"removeVideoAvatar",value:function(){this.videoAvatar=null}},{key:"createVideoAvatar",value:function(){this.videoAvatar=document.createElement("canvas"),this.videoAvatar.className="user-img",this.videoAvatar.width=100,this.videoAvatar.height=100}}]),e}(),et=function(e){return e.RANDOM="random",e.VIDEO="video",e}({}),tt=function(){var e=function(){function e(){_classCallCheck(this,e),this.log=window.console,this.LOG_FNS=[],this.MSG_PREFIXES=[["[","]"],["[","] WARN: "],["[","] ERROR: "]],this.LOG_FNS=[this.log.log,this.log.warn,this.log.error]}return _createClass(e,[{key:"get",value:function(e){var t=this,n=this.LOG_FNS.map((function(n,i){return n.bind(t.log,t.MSG_PREFIXES[i][0]+e+t.MSG_PREFIXES[i][1])}));return{d:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];n[0].apply(this.log,arguments)},w:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];n[1].apply(this.log,arguments)},e:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];n[2].apply(this.log,arguments)}}}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Object(o.Mb)({factory:function(){return new e},token:e,providedIn:"root"}),e}(),nt=function(){var e=function(){function e(t){_classCallCheck(this,e),this.loggerSrv=t,this._OVUsers=new r.a([]),this.OV=null,this.OVScreen=null,this.webcamSession=null,this.screenSession=null,this.webcamUser=null,this.screenUser=null,this.videoSource=void 0,this.audioSource=void 0,this.sessionId="",this.screenMediaStream=null,this.webcamMediaStream=null,this.log=this.loggerSrv.get("OpenViduSessionService"),this.OV=new s.OpenVidu,this.OVScreen=new s.OpenVidu,this.OVUsers=this._OVUsers.asObservable(),this.webcamUser=new $e,this._OVUsers.next([this.webcamUser])}return _createClass(e,[{key:"initSessions",value:function(){this.webcamSession=this.OV.initSession(),this.screenSession=this.OVScreen.initSession()}},{key:"getWebcamSession",value:function(){return this.webcamSession}},{key:"getConnectedUserSession",value:function(){return this.isWebCamEnabled()?this.getWebcamSession():this.getScreenSession()}},{key:"getScreenSession",value:function(){return this.screenSession}},{key:"connectWebcamSession",value:function(e){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e,!t.t0){t.next=4;break}return t.next=4,this.webcamSession.connect(e,{clientData:this.getWebcamUserName(),avatar:this.getWebCamAvatar()});case 4:case"end":return t.stop()}}),t,this)})))}},{key:"connectScreenSession",value:function(e){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e,!t.t0){t.next=4;break}return t.next=4,this.screenSession.connect(e,{clientData:this.getScreenUserName(),avatar:this.getWebCamAvatar()});case 4:case"end":return t.stop()}}),t,this)})))}},{key:"publishWebcam",value:function(){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.webcamSession.capabilities.publish){e.next=6;break}if(!(t=this.webcamUser.getStreamManager())){e.next=6;break}return e.next=5,this.webcamSession.publish(t);case 5:return e.abrupt("return",e.sent);case 6:this.log.w("User cannot publish");case 7:case"end":return e.stop()}}),e,this)})))}},{key:"publishScreen",value:function(){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.screenSession.capabilities.publish){e.next=6;break}if(!(t=this.screenUser.getStreamManager())){e.next=6;break}return e.next=5,this.screenSession.publish(t);case 5:return e.abrupt("return",e.sent);case 6:this.log.w("User cannot publish");case 7:case"end":return e.stop()}}),e,this)})))}},{key:"unpublishWebcam",value:function(){var e=this.webcamUser.getStreamManager();e&&(this.publishScreenAudio(this.hasWebcamAudioActive()),this.webcamSession.unpublish(e))}},{key:"unpublishScreen",value:function(){var e=this.screenUser.getStreamManager();e&&this.screenSession.unpublish(e)}},{key:"enableWebcamUser",value:function(){this._OVUsers.next([this.webcamUser,this.screenUser])}},{key:"disableWebcamUser",value:function(){this._OVUsers.next([this.screenUser])}},{key:"enableScreenUser",value:function(e){var t,n,i=null===(n=null===(t=this.screenSession)||void 0===t?void 0:t.connection)||void 0===n?void 0:n.connectionId;this.screenUser=new $e(i,e,this.getScreenUserName()),this.screenUser.setUserAvatar(this.webcamUser.getAvatar()),this.isWebCamEnabled()?this._OVUsers.next([this.webcamUser,this.screenUser]):(this.log.d("ENABLED SCREEN SHARE"),this._OVUsers.next([this.screenUser]))}},{key:"disableScreenUser",value:function(){this.destryoScreenUser(),this._OVUsers.next([this.webcamUser])}},{key:"initCamPublisher",value:function(e,t){var n=this.initPublisher(e,t);return this.webcamUser.setStreamManager(n),n}},{key:"publishVideo",value:function(e){this.webcamUser.getStreamManager().publishVideo(e),this._OVUsers.next(this._OVUsers.getValue())}},{key:"publishWebcamAudio",value:function(e){var t,n=null===(t=this.webcamUser)||void 0===t?void 0:t.getStreamManager();n&&n.publishAudio(e)}},{key:"publishScreenAudio",value:function(e){var t,n=null===(t=this.screenUser)||void 0===t?void 0:t.getStreamManager();n&&n.publishAudio(e)}},{key:"replaceTrack",value:function(e,t){var n=this,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return new Promise((function(o,r){e&&(n.log.d("Replacing video track "+e),n.videoSource=e),t&&(n.log.d("Replacing audio track "+t),n.audioSource=t),n.destryoWebcamUser();var a=n.createProperties(n.videoSource,n.audioSource,n.hasWebcamVideoActive(),n.hasWebcamAudioActive(),i),s=n.initCamPublisher(void 0,a);s.once("streamPlaying",(function(){n.webcamUser.setStreamManager(s),o()})),s.once("accessDenied",(function(){r()}))}))}},{key:"replaceScreenTrack",value:function(){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Xe.SCREEN,n=!this.isWebCamEnabled(),i=this.createProperties(t,void 0,!0,n,!1),this.stopScreenTracks(),e.next=4,this.OVScreen.getUserMedia(i);case 4:return this.screenMediaStream=e.sent,e.next=7,this.screenUser.getStreamManager().replaceTrack(this.screenMediaStream.getVideoTracks()[0]);case 7:case"end":return e.stop()}}),e,this)})))}},{key:"initScreenPublisher",value:function(e,t){return this.log.d("init screen properties",t),this.initPublisher(e,t)}},{key:"destroyUsers",value:function(){this.destryoScreenUser(),this.destryoWebcamUser()}},{key:"disconnect",value:function(){var e=this;this.webcamSession&&(this.log.d("Disconnecting screen session"),this.webcamSession.disconnect(),this.webcamSession=null),this.screenSession&&setTimeout((function(){e.log.d("Disconnecting screen session"),e.screenSession.disconnect(),e.stopScreenTracks(),e.screenSession=null}),50),this.destroyUsers(),this.screenUser=null,this.videoSource=void 0,this.audioSource=void 0,this.sessionId="",this.webcamUser=new $e,this._OVUsers.next([this.webcamUser])}},{key:"isWebCamEnabled",value:function(){return this._OVUsers.getValue()[0].isCamera()}},{key:"isOnlyScreenConnected",value:function(){return this._OVUsers.getValue()[0].isScreen()}},{key:"hasWebcamVideoActive",value:function(){return this.webcamUser.isVideoActive()}},{key:"hasWebcamAudioActive",value:function(){var e;return null===(e=this.webcamUser)||void 0===e?void 0:e.isAudioActive()}},{key:"hasScreenAudioActive",value:function(){var e;return null===(e=this.screenUser)||void 0===e?void 0:e.isAudioActive()}},{key:"areBothConnected",value:function(){return 2===this._OVUsers.getValue().length}},{key:"isOnlyWebcamConnected",value:function(){return this.isWebCamEnabled()&&!this.areBothConnected()}},{key:"isScreenShareEnabled",value:function(){return this.areBothConnected()||this.isOnlyScreenConnected()}},{key:"isMyOwnConnection",value:function(e){var t,n;return(null===(t=this.webcamUser)||void 0===t?void 0:t.getConnectionId())===e||(null===(n=this.screenUser)||void 0===n?void 0:n.getConnectionId())===e}},{key:"createProperties",value:function(e,t,n,i,o){return{videoSource:e,audioSource:t,publishVideo:n,publishAudio:i,mirror:o}}},{key:"setSessionId",value:function(e){this.sessionId=e}},{key:"getSessionId",value:function(){return this.sessionId}},{key:"setWebcamAvatar",value:function(){this.webcamUser.setUserAvatar()}},{key:"setAvatar",value:function(e,t){(e===et.RANDOM&&t||et.VIDEO&&t)&&e===et.RANDOM&&this.webcamUser.setUserAvatar(t)}},{key:"setWebcamName",value:function(e){this.webcamUser.setNickname(e)}},{key:"getWebCamAvatar",value:function(){return this.webcamUser.getAvatar()}},{key:"getWebcamUserName",value:function(){return this.webcamUser.getNickname()}},{key:"getScreenUserName",value:function(){return this.getWebcamUserName()+"_SCREEN"}},{key:"resetUsersZoom",value:function(){var e,t;null===(e=this.webcamUser)||void 0===e||e.setVideoSizeBig(!1),null===(t=this.screenUser)||void 0===t||t.setVideoSizeBig(!1)}},{key:"toggleZoom",value:function(e){this.webcamUser.getConnectionId()!==e?this.screenUser.setVideoSizeBig(!this.screenUser.isVideoSizeBig()):this.webcamUser.setVideoSizeBig(!this.webcamUser.isVideoSizeBig())}},{key:"initPublisher",value:function(e,t){return this.OV.initPublisher(e,t)}},{key:"destryoScreenUser",value:function(){var e;(null===(e=this.screenUser)||void 0===e?void 0:e.getStreamManager())&&(this.screenUser.getStreamManager().stream.disposeWebRtcPeer(),this.screenUser.getStreamManager().stream.disposeMediaStream())}},{key:"destryoWebcamUser",value:function(){var e;(null===(e=this.webcamUser)||void 0===e?void 0:e.getStreamManager())&&(this.webcamUser.getStreamManager().stream.disposeWebRtcPeer(),this.webcamUser.getStreamManager().stream.disposeMediaStream())}},{key:"stopScreenTracks",value:function(){this.screenMediaStream&&(this.stopAudioTracks(this.screenMediaStream),this.stopVideoTracks(this.screenMediaStream))}},{key:"stopAudioTracks",value:function(e){var t,n;null===(t=e)||void 0===t||t.getAudioTracks().forEach((function(e){e.stop(),e.enabled=!1})),null===(n=this.webcamMediaStream)||void 0===n||n.getAudioTracks().forEach((function(e){e.stop()}))}},{key:"stopVideoTracks",value:function(e){var t;null===(t=e)||void 0===t||t.getVideoTracks().forEach((function(e){e.stop()}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.ac(tt))},e.\u0275prov=Object(o.Mb)({factory:function(){return new e(Object(o.ac)(tt))},token:e,providedIn:"root"}),e}(),it=function(){var e=function(){function e(t){_classCallCheck(this,e),this.loggerSrv=t,this._remoteUsers=new r.a([]),this.users=[],this.log=this.loggerSrv.get("RemoteService"),this.remoteUsers=this._remoteUsers.asObservable()}return _createClass(e,[{key:"updateUsers",value:function(){this._remoteUsers.next(this.users)}},{key:"add",value:function(e,t){var n,i,o="",r="",a=e.stream.connection.connectionId;try{o=null===(n=JSON.parse(e.stream.connection.data))||void 0===n?void 0:n.clientData,r=null===(i=JSON.parse(e.stream.connection.data))||void 0===i?void 0:i.avatar}catch(c){o="Unknown"}var s=new $e(a,t,o);s.setUserAvatar(r),this.users.push(s),this.updateUsers()}},{key:"removeUserByConnectionId",value:function(e){this.log.w("Deleting user: ",e);var t=this.getRemoteUserByConnectionId(e),n=this.users.indexOf(t,0);n>-1&&(this.users.splice(n,1),this.updateUsers())}},{key:"someoneIsSharingScreen",value:function(){return this.users.some((function(e){return e.isScreen()}))}},{key:"toggleUserZoom",value:function(e){var t=this.getRemoteUserByConnectionId(e);t.setVideoSizeBig(!t.isVideoSizeBig())}},{key:"resetUsersZoom",value:function(){this.users.forEach((function(e){return e.setVideoSizeBig(!1)}))}},{key:"setUserZoom",value:function(e,t){var n;null===(n=this.getRemoteUserByConnectionId(e))||void 0===n||n.setVideoSizeBig(t)}},{key:"getRemoteUserByConnectionId",value:function(e){return this.users.find((function(t){return t.getConnectionId()===e}))}},{key:"updateNickname",value:function(e,t){var n;null===(n=this.getRemoteUserByConnectionId(e))||void 0===n||n.setNickname(t),this._remoteUsers.next(this.users)}},{key:"clean",value:function(){this._remoteUsers=new r.a([]),this.remoteUsers=this._remoteUsers.asObservable(),this.users=[]}},{key:"getUserAvatar",value:function(e){return this.getRemoteUserByConnectionId(e).getAvatar()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.ac(tt))},e.\u0275prov=Object(o.Mb)({factory:function(){return new e(Object(o.ac)(tt))},token:e,providedIn:"root"}),e}(),ot=function(){var e=function(){function e(t){_classCallCheck(this,e),this.snackBar=t}return _createClass(e,[{key:"newMessage",value:function(e,t){this.launchNotification(e+" sent a message","OPEN","messageSnackbar",3e3).onAction().subscribe((function(){t()}))}},{key:"launchNotification",value:function(e,t,n,i){return this.snackBar.open(e,t,{duration:i,verticalPosition:"top",horizontalPosition:"end",panelClass:n})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.ac(c.a))},e.\u0275prov=Object(o.Mb)({factory:function(){return new e(Object(o.ac)(c.a))},token:e,providedIn:"root"}),e}(),rt=function(){var e=function(){function e(t,n,i,o){_classCallCheck(this,e),this.loggerSrv=t,this.oVSessionService=n,this.remoteUsersService=i,this.notificationService=o,this._messageList=new r.a([]),this._toggleChat=new r.a(!1),this.messageList=[],this.messagesUnread=0,this._messagesUnread=new r.a(0),this.log=this.loggerSrv.get("ChatService"),this.messagesObs=this._messageList.asObservable(),this.toggleChatObs=this._toggleChat.asObservable(),this.messagesUnreadObs=this._messagesUnread.asObservable()}return _createClass(e,[{key:"setChatComponent",value:function(e){this.chatComponent=e}},{key:"subscribeToChat",value:function(){var e=this;this.oVSessionService.getWebcamSession().on("signal:chat",(function(t){var n=t.from.connectionId,i=JSON.parse(t.data),o=e.oVSessionService.isMyOwnConnection(n);e.messageList.push({isLocal:o,nickname:i.nickname,message:i.message,userAvatar:o?e.oVSessionService.getWebCamAvatar():e.remoteUsersService.getUserAvatar(n)}),e.isChatOpened()||(e.addMessageUnread(),e.notificationService.newMessage(i.nickname.toUpperCase(),e.toggleChat.bind(e))),e._messageList.next(e.messageList)}))}},{key:"sendMessage",value:function(e){if(""!==(e=e.replace(/ +(?= )/g,""))&&" "!==e){var t={message:e,nickname:this.oVSessionService.getWebcamUserName()};this.oVSessionService.getConnectedUserSession().signal({data:JSON.stringify(t),type:"chat"})}}},{key:"toggleChat",value:function(){var e=this;this.log.d("Toggling chat"),this.chatComponent.toggle().then((function(){e.chatOpened=e.chatComponent.opened,e._toggleChat.next(e.chatOpened),e.chatOpened&&(e.messagesUnread=0,e._messagesUnread.next(e.messagesUnread))}))}},{key:"isChatOpened",value:function(){return this.chatOpened}},{key:"addMessageUnread",value:function(){this.messagesUnread++,this._messagesUnread.next(this.messagesUnread)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.ac(tt),o.ac(nt),o.ac(it),o.ac(ot))},e.\u0275prov=Object(o.Mb)({factory:function(){return new e(Object(o.ac)(tt),Object(o.ac)(nt),Object(o.ac)(it),Object(o.ac)(ot))},token:e,providedIn:"root"}),e}(),at=function(){var e=function(){function e(t){_classCallCheck(this,e),this.chatService=t,this.messageList=[]}return _createClass(e,[{key:"onKeydownHandler",value:function(e){console.log(e),this.chatOpened&&this.close()}},{key:"ngOnInit",value:function(){this.subscribeToMessages(),this.subscribeToToggleChat()}},{key:"ngOnDestroy",value:function(){this.chatMessageSubscription&&this.chatMessageSubscription.unsubscribe(),this.chatToggleSubscription&&this.chatToggleSubscription.unsubscribe()}},{key:"eventKeyPress",value:function(e){e&&13===e.keyCode&&this.sendMessage()}},{key:"sendMessage",value:function(){this.chatService.sendMessage(this.message),this.message=""}},{key:"scrollToBottom",value:function(){var e=this;setTimeout((function(){try{e.chatScroll.nativeElement.scrollTop=e.chatScroll.nativeElement.scrollHeight}catch(t){}}),20)}},{key:"close",value:function(){this.chatService.toggleChat()}},{key:"subscribeToMessages",value:function(){var e=this;this.chatMessageSubscription=this.chatService.messagesObs.subscribe((function(t){e.messageList=t}))}},{key:"subscribeToToggleChat",value:function(){var e=this;this.chatToggleSubscription=this.chatService.toggleChatObs.subscribe((function(t){e.chatOpened=t,e.chatOpened&&(e.scrollToBottom(),setTimeout((function(){e.chatInput.nativeElement.focus()})))}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.Qb(rt))},e.\u0275cmp=o.Kb({type:e,selectors:[["chat-component"]],viewQuery:function(e,t){var n;1&e&&(o.Rc(R,!0),o.Rc(V,!0)),2&e&&(o.wc(n=o.fc())&&(t.chatScroll=n.first),o.wc(n=o.fc())&&(t.chatInput=n.first))},hostBindings:function(e,t){1&e&&o.ec("keydown.escape",(function(e){return t.onKeydownHandler(e)}),!1,o.zc)},inputs:{lightTheme:"lightTheme"},decls:17,vars:4,consts:[["id","chatContainer"],["id","chatComponent"],["id","chatToolbar"],["mat-icon-button","","id","closeButton",3,"click"],["matTooltip","Close","color","warn"],[1,"message-wrap"],["chatScroll",""],["class","message",3,"ngClass",4,"ngFor","ngForOf"],["id","messageInput"],["placeholder","Send a message","autocomplete","off","id","chatInput",3,"ngModel","keypress","ngModelChange"],["chatInput",""],["mat-mini-fab","","id","sendButton",3,"click"],["matTooltip","Send"],[1,"message",3,"ngClass"],[1,"user-img",3,"src"],[1,"msg-detail"],[1,"msg-info"],[1,"msg-content"],[1,"triangle"],[1,"text",3,"innerHTML"]],template:function(e,t){1&e&&(o.Wb(0,"div",0),o.Wb(1,"div",1),o.Wb(2,"div",2),o.Wb(3,"span"),o.Mc(4," CHAT"),o.Vb(),o.Wb(5,"button",3),o.ec("click",(function(){return t.close()})),o.Wb(6,"mat-icon",4),o.Mc(7,"highlight_off"),o.Vb(),o.Vb(),o.Vb(),o.Wb(8,"div",5,6),o.Kc(10,L,10,6,"div",7),o.Vb(),o.Wb(11,"div",8),o.Wb(12,"input",9,10),o.ec("keypress",(function(e){return t.eventKeyPress(e)}))("ngModelChange",(function(e){return t.message=e})),o.Vb(),o.Wb(14,"button",11),o.ec("click",(function(){return t.sendMessage()})),o.Wb(15,"mat-icon",12),o.Mc(16,"send"),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Vb()),2&e&&(o.Cb(1),o.Gb("chatComponentLight",t.lightTheme),o.Cb(9),o.pc("ngForOf",t.messageList),o.Cb(2),o.pc("ngModel",t.message))},directives:function(){return[l.b,u.a,d.a,g.s,h.c,h.s,h.v,g.q,p.a]},pipes:function(){return[Ct]},styles:["#chatContainer[_ngcontent-%COMP%]{position:absolute;z-index:0;width:100%;height:calc(100% - 20px)}input[_ngcontent-%COMP%]{font-family:Ubuntu,sans-serif}#chatToolbar[_ngcontent-%COMP%]{height:30px;background-color:#3d3d3d;box-sizing:border-box;font-weight:700;font-size:14px;text-align:center;padding-top:4px;border-top-left-radius:6px;border-top-right-radius:6px;color:#fff}#closeButton[_ngcontent-%COMP%]{position:absolute;right:0;top:-5px}#chatComponent[_ngcontent-%COMP%]{background-color:#b8b8b8;position:absolute;z-index:99999;top:0;left:0;right:0;bottom:0;margin:auto;height:calc(100% - 30px);width:calc(100% - 30px);border-radius:20px}.message-wrap[_ngcontent-%COMP%]{padding:0 15px;height:calc(100% - 80px);overflow:auto}.message[_ngcontent-%COMP%]{position:relative;padding:7px 0}.user-img[_ngcontent-%COMP%]{position:absolute;border-radius:45px;width:60px;height:60px;top:15px}.msg-detail[_ngcontent-%COMP%]{width:calc(100% - 65px);display:inline-block}.msg-detail[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:15px}.msg-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.8em;color:#000;font-style:italic}.msg-content[_ngcontent-%COMP%]{position:relative;margin-top:5px;border-radius:5px;padding:8px;color:#000;width:auto;max-width:95%}span.triangle[_ngcontent-%COMP%]{border-radius:2px;height:8px;width:8px;top:12px;display:block;transform:rotate(45deg);position:absolute}.text[_ngcontent-%COMP%]{word-break:break-all}.message.left[_ngcontent-%COMP%]   .msg-detail[_ngcontent-%COMP%]   .msg-info[_ngcontent-%COMP%]{text-align:left}.message.left[_ngcontent-%COMP%]   .msg-detail[_ngcontent-%COMP%]{padding-left:65px}.message.left[_ngcontent-%COMP%]   .user-img[_ngcontent-%COMP%]{left:-5px;border:1px solid #f0f0f094}.message.left[_ngcontent-%COMP%]   .msg-detail[_ngcontent-%COMP%]   .msg-content[_ngcontent-%COMP%]{background-color:#f0f0f0;float:left}.message.left[_ngcontent-%COMP%]   .msg-detail[_ngcontent-%COMP%]   .msg-content[_ngcontent-%COMP%]   span.triangle[_ngcontent-%COMP%]{background-color:#f0f0f0;border-bottom-width:0;border-left-width:0;left:-5px}.message.right[_ngcontent-%COMP%]   .msg-detail[_ngcontent-%COMP%]   .msg-info[_ngcontent-%COMP%]{text-align:right}.message.right[_ngcontent-%COMP%]   .user-img[_ngcontent-%COMP%]{right:-5px;border:1px solid #c8ffe8ab}.message.right[_ngcontent-%COMP%]   .msg-detail[_ngcontent-%COMP%]   .msg-content[_ngcontent-%COMP%]{background-color:#c8ffe8;float:right}.message.right[_ngcontent-%COMP%]   .msg-detail[_ngcontent-%COMP%]   .msg-content[_ngcontent-%COMP%]   span.triangle[_ngcontent-%COMP%]{background-color:#c8ffe8;border-bottom-width:0;border-left-width:0;right:-5px}#messageInput[_ngcontent-%COMP%]{position:absolute;bottom:0;width:100%;background-color:#fff;text-align:center;padding:10px 0;height:30px;border-bottom-left-radius:6px;border-bottom-right-radius:6px}#messageInput[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:90%;height:100%;border:none;outline:0;font-size:14px;margin-left:-6%}#sendButton[_ngcontent-%COMP%]{background-color:#81e9b0;position:absolute;right:10px;top:0;bottom:0;margin:auto;border:1px solid #7ae2a9;box-shadow:none!important}#sendButton[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-left:3px!important;margin-bottom:2px!important}[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#6b6b6b}.chatComponentLight[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#eee!important}"]}),e}(),st=function(){function e(){_classCallCheck(this,e),this.ovSettings={chat:!0,autopublish:!1,toolbarButtons:{video:!0,audio:!0,fullscreen:!0,screenShare:!0,layoutSpeaking:!0,exit:!0}}}return _createClass(e,[{key:"set",value:function(e){this.ovSettings=e}},{key:"isAutoPublish",value:function(){return this.ovSettings.autopublish}},{key:"hasVideo",value:function(){return this.ovSettings.toolbarButtons.video}},{key:"hasScreenSharing",value:function(){return this.ovSettings.toolbarButtons.screenShare}},{key:"hasLayoutSpeaking",value:function(){return this.ovSettings.toolbarButtons.layoutSpeaking}},{key:"hasFullscreen",value:function(){return this.ovSettings.toolbarButtons.fullscreen}},{key:"hasAudio",value:function(){return this.ovSettings.toolbarButtons.audio}},{key:"hasChat",value:function(){return this.ovSettings.chat}},{key:"hasExit",value:function(){return this.ovSettings.toolbarButtons.exit}},{key:"setScreenSharing",value:function(e){this.ovSettings.toolbarButtons.screenShare=e}}]),e}(),ct=function(e){return e.ROOT_CLASS="OT_root",e}({}),lt=function(e){return e.BIG_ELEMENT_CLASS="OV_big",e}({}),ut=function(e){return e.DARK="dark",e.LIGHT="light",e}({}),dt=function(e){return e.FRONT="FRONT",e.BACK="BACK",e}({}),gt=function(){var e=function(){function e(t,n){_classCallCheck(this,e),this.dialogRef=t,this.data=n}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.Qb(f.h),o.Qb(f.a))},e.\u0275cmp=o.Kb({type:e,selectors:[["app-dialog-error"]],decls:5,vars:2,consts:[["mat-dialog-title",""]],template:function(e,t){1&e&&(o.Wb(0,"div"),o.Wb(1,"h1",0),o.Mc(2),o.Vb(),o.Wb(3,"span"),o.Mc(4),o.Vb(),o.Vb()),2&e&&(o.Cb(2),o.Nc(t.data.header),o.Cb(2),o.Oc(" ",t.data.message," "))},directives:[f.i],styles:["h1[_ngcontent-%COMP%]{color:#a30101}"]}),e}(),ht=function(){var e=function(){function e(t){_classCallCheck(this,e),this.dialog=t}return _createClass(e,[{key:"toggleFullscreen",value:function(e){var t=window.document,n=t.getElementById(e);t.fullscreenElement||t.mozFullScreenElement||t.webkitFullscreenElement||t.msFullscreenElement?t.exitFullscreen?t.exitFullscreen():t.msExitFullscreen?t.msExitFullscreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.webkitExitFullscreen&&t.webkitExitFullscreen():n.requestFullscreen?n.requestFullscreen():n.msRequestFullscreen?n.msRequestFullscreen():n.mozRequestFullScreen?n.mozRequestFullScreen():n.webkitRequestFullscreen&&n.webkitRequestFullscreen()}},{key:"getOpenViduAvatar",value:function(){return"https://openvidu.io/img/logos/openvidu_globe_bg_transp_cropped.png"}},{key:"handlerScreenShareError",value:function(e){e&&"SCREEN_SHARING_NOT_SUPPORTED"===e.name?alert("Your browser does not support screen sharing"):e&&"SCREEN_EXTENSION_DISABLED"===e.name&&alert("You need to enable screen sharing extension")}},{key:"getOpenviduLayoutOptions",value:function(){return{maxRatio:1.5,minRatio:.6,fixedRatio:!1,bigClass:lt.BIG_ELEMENT_CLASS,bigPercentage:.85,bigFixedRatio:!1,bigMaxRatio:1.5,bigMinRatio:9/16,bigFirst:!0,animate:!0}}},{key:"generateNickname",value:function(){return"OpenVidu_User"+Math.floor(100*Math.random())}},{key:"isFF",value:function(){return/Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent)}},{key:"isMobile",value:function(){return this.isAndroid()||this.isIos()}},{key:"showErrorMessage",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.dialogRef=this.dialog.open(gt,{data:{header:e,message:t},disableClose:n})}},{key:"closeDialog",value:function(){this.dialogRef.close()}},{key:"getHTMLElementByClassName",value:function(e,t){for(;e&&e!==document.body;){if(e.className.includes(t))return e;e=e.parentElement}return null}},{key:"toggleBigElementClass",value:function(e){var t,n;(null===(t=e)||void 0===t?void 0:t.className.includes(lt.BIG_ELEMENT_CLASS))?null===(n=e)||void 0===n||n.classList.remove(lt.BIG_ELEMENT_CLASS):e.classList.add(lt.BIG_ELEMENT_CLASS)}},{key:"removeAllBigElementClass",value:function(){for(var e=document.getElementsByClassName(lt.BIG_ELEMENT_CLASS);e.length>0;)this.toggleBigElementClass(e[0])}},{key:"isAndroid",value:function(){return/\b(\w*Android\w*)\b/.test(navigator.userAgent)&&/\b(\w*Mobile\w*)\b/.test(navigator.userAgent)}},{key:"isIos",value:function(){return/\b(\w*iOS\w*)\b/.test(navigator.userAgent)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.ac(f.b))},e.\u0275prov=Object(o.Mb)({factory:function(){return new e(Object(o.ac)(f.b))},token:e,providedIn:"root"}),e}(),pt=function(){var e=function(){function e(t){_classCallCheck(this,e),this.loggerSrv=t,this.storage=window.localStorage,this.log=this.loggerSrv.get("StorageService")}return _createClass(e,[{key:"set",value:function(e,t){var n=JSON.stringify({item:t});this.log.d('Storing on localStorage "'+e+'" with value "'+n+'"'),this.storage.setItem(e,n)}},{key:"get",value:function(e){var t,n=JSON.parse(this.storage.getItem(e));return(null===(t=n)||void 0===t?void 0:t.item)?n.item:null}},{key:"clear",value:function(){this.log.d("Clearing localStorage"),this.storage.clear()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.ac(tt))},e.\u0275prov=Object(o.Mb)({factory:function(){return new e(Object(o.ac)(tt))},token:e,providedIn:"root"}),e}(),ft=function(){var e=function(){function e(t,n,i){_classCallCheck(this,e),this.loggerSrv=t,this.utilSrv=n,this.storageSrv=i,this.VIDEO_DEVICE="openviduCallVideoDevice",this.AUDIO_DEVICE="openviduCallAudioDevice",this.OV=null,this.cameras=[],this.microphones=[],this.log=this.loggerSrv.get("DevicesService"),this.OV=new s.OpenVidu}return _createClass(e,[{key:"initDevices",value:function(){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initOpenViduDevices();case 2:this.devices.length>0?this.log.d("Devices found: ",this.devices):this.log.w("No devices found!"),this.resetDevicesArray(),this.hasAudioDeviceAvailable()&&(this.initAudioDevices(),this.micSelected=this.getMicSelected()),this.hasVideoDeviceAvailable()&&(this.initVideoDevices(),this.camSelected=this.cameras.find((function(e){return e.type===dt.FRONT})));case 6:case"end":return e.stop()}}),e,this)})))}},{key:"initOpenViduDevices",value:function(){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.OV.getDevices();case 2:this.devices=e.sent;case 3:case"end":return e.stop()}}),e,this)})))}},{key:"initAudioDevices",value:function(){var e=this;this.devices.filter((function(e){return"audioinput"===e.kind})).forEach((function(t){e.microphones.push({label:t.label,device:t.deviceId})}))}},{key:"initVideoDevices",value:function(){var e=this;this.devices.filter((function(e){return"videoinput"===e.kind})).forEach((function(t,n){var i={label:t.label,device:t.deviceId,type:dt.BACK};e.utilSrv.isMobile()?i.label.toLowerCase().includes(dt.FRONT.toLowerCase())&&(i.type=dt.FRONT):0===n&&(i.type=dt.FRONT),e.cameras.push(i)})),this.log.d("Camera selected",this.camSelected)}},{key:"getCamSelected",value:function(){if(0!==this.cameras.length)return this.getCamFromStorage()||this.camSelected||this.cameras[0];this.log.e("No video devices found!")}},{key:"getCamFromStorage",value:function(){var e,t=this.storageSrv.get(this.VIDEO_DEVICE);if(t=this.getCameraByDeviceField(null===(e=t)||void 0===e?void 0:e.device))return t}},{key:"getMicSelected",value:function(){if(0!==this.microphones.length)return this.getMicFromStogare()||this.micSelected||this.microphones[0];this.log.e("No audio devices found!")}},{key:"getMicFromStogare",value:function(){var e,t=this.storageSrv.get(this.AUDIO_DEVICE);if(t=this.getMicrophoneByDeviceField(null===(e=t)||void 0===e?void 0:e.device))return t}},{key:"setCamSelected",value:function(e){this.camSelected=this.getCameraByDeviceField(e),this.saveCamToStorage(this.camSelected)}},{key:"saveCamToStorage",value:function(e){this.storageSrv.set(this.VIDEO_DEVICE,e)}},{key:"setMicSelected",value:function(e){this.micSelected=this.getMicrophoneByDeviceField(e),this.saveMicToStorage(this.micSelected)}},{key:"saveMicToStorage",value:function(e){this.storageSrv.set(this.AUDIO_DEVICE,e)}},{key:"needUpdateVideoTrack",value:function(e){return this.getCamSelected().device!==e}},{key:"needUpdateAudioTrack",value:function(e){return this.getMicSelected().device!==e}},{key:"getCameras",value:function(){return this.cameras}},{key:"getMicrophones",value:function(){return this.microphones}},{key:"hasVideoDeviceAvailable",value:function(){var e;return!!(null===(e=this.devices)||void 0===e?void 0:e.find((function(e){return"videoinput"===e.kind})))}},{key:"hasAudioDeviceAvailable",value:function(){var e;return!!(null===(e=this.devices)||void 0===e?void 0:e.find((function(e){return"audioinput"===e.kind})))}},{key:"cameraNeedsMirror",value:function(e){var t;return(null===(t=this.getCameraByDeviceField(e))||void 0===t?void 0:t.type)===dt.FRONT}},{key:"areEmptyLabels",value:function(){return!!this.cameras.find((function(e){return""===e.label}))||!!this.microphones.find((function(e){return""===e.label}))}},{key:"getCameraByDeviceField",value:function(e){return this.cameras.find((function(t){return t.device===e||t.label===e}))}},{key:"getMicrophoneByDeviceField",value:function(e){return this.microphones.find((function(t){return t.device===e||t.label===e}))}},{key:"resetDevicesArray",value:function(){this.cameras=[{label:"None",device:null,type:null}],this.microphones=[{label:"None",device:null,type:null}]}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.ac(tt),o.ac(ht),o.ac(pt))},e.\u0275prov=Object(o.Mb)({factory:function(){return new e(Object(o.ac)(tt),Object(o.ac)(ht),Object(o.ac)(pt))},token:e,providedIn:"root"}),e}(),mt=function(){var e=function(){function e(t,n){_classCallCheck(this,e),this.http=t,this.loggerSrv=n,this.log=this.loggerSrv.get("NetworkService"),this.baseHref="/"+(window.location.pathname.split("/")[1]?window.location.pathname.split("/")[1]+"/":"")}return _createClass(e,[{key:"getToken",value:function(e,t,n){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function i(){var o;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!t||!n){i.next=7;break}return i.next=3,this.createSession(e,t,n);case 3:return o=i.sent,i.next=6,this.createToken(o,t,n);case 6:return i.abrupt("return",i.sent);case 7:return i.prev=7,this.log.d("Getting token from backend"),i.next=11,this.http.post(this.baseHref+"call",{sessionId:e}).toPromise();case 11:return i.abrupt("return",i.sent);case 14:if(i.prev=14,i.t0=i.catch(7),404!==i.t0.status){i.next=18;break}throw{status:i.t0.status,message:"Cannot connect with backend. "+i.t0.url+" not found"};case 18:throw i.t0;case 19:case"end":return i.stop()}}),i,this,[[7,14]])})))}},{key:"createSession",value:function(e,t,n){var i=this;return new Promise((function(o,r){var s=JSON.stringify({customSessionId:e}),c={headers:new m.e({Authorization:"Basic "+btoa("OPENVIDUAPP:"+n),"Content-Type":"application/json"})};return i.http.post(t+"/api/sessions",s,c).pipe(Object(w.a)((function(t){return 409===t.status&&o(e),"Unknown Error"===t.statusText&&r({status:401,message:"ERR_CERT_AUTHORITY_INVALID"}),Object(a.a)(t)}))).subscribe((function(e){o(e.id)}))}))}},{key:"createToken",value:function(e,t,n){var i=this;return new Promise((function(o,r){var s=JSON.stringify({session:e}),c={headers:new m.e({Authorization:"Basic "+btoa("OPENVIDUAPP:"+n),"Content-Type":"application/json"})};return i.http.post(t+"/api/tokens",s,c).pipe(Object(w.a)((function(e){return r(e),Object(a.a)(e)}))).subscribe((function(e){i.log.d(e),o(e.token)}))}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.ac(m.b),o.ac(tt))},e.\u0275prov=Object(o.Mb)({factory:function(){return new e(Object(o.ac)(m.b),Object(o.ac)(tt))},token:e,providedIn:"root"}),e}(),vt=function(){var e=function(){function e(t,n,i,r,a,s,c,l){_classCallCheck(this,e),this.networkSrv=t,this.router=n,this.utilsSrv=i,this.remoteUsersService=r,this.oVSessionService=a,this.oVDevicesService=s,this.loggerSrv=c,this.chatService=l,this._session=new o.o,this._publisher=new o.o,this._error=new o.o,this._joinSession=new o.o,this._leaveSession=new o.o,this.compact=!1,this.sidenavMode="side",this.showConfigRoomCard=!0,this.localUsers=[],this.remoteUsers=[],this.isAutoLayout=!1,this.log=this.loggerSrv.get("VideoRoomComponent")}return _createClass(e,[{key:"beforeunloadHandler",value:function(){this.leaveSession()}},{key:"sizeChange",value:function(){this.openviduLayout&&(this.updateOpenViduLayout(),this.checkSizeComponent())}},{key:"ngOnInit",value:function(){var e;return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.lightTheme=(null===(e=this.externalConfig)||void 0===e?void 0:e.getTheme())===ut.LIGHT,this.ovSettings=this.externalConfig?this.externalConfig.getOvSettings():new st,this.ovSettings.setScreenSharing(this.ovSettings.hasScreenSharing()&&!this.utilsSrv.isMobile());case 1:case"end":return t.stop()}}),t,this)})))}},{key:"ngOnDestroy",value:function(){var e;null===(e=this.session)||void 0===e||e.off("reconnecting"),this.remoteUsersService.clean(),this.session=null,this.sessionScreen=null,this.localUsers=[],this.remoteUsers=[],this.openviduLayout=null,this.oVUsersSubscription&&this.oVUsersSubscription.unsubscribe(),this.remoteUsersSubscription&&this.remoteUsersSubscription.unsubscribe(),this.chatSubscription&&this.chatSubscription.unsubscribe()}},{key:"onConfigRoomJoin",value:function(){var e=this;this.hasVideoDevices=this.oVDevicesService.hasVideoDeviceAvailable(),this.hasAudioDevices=this.oVDevicesService.hasAudioDeviceAvailable(),this.showConfigRoomCard=!1,this.subscribeToLocalUsers(),this.subscribeToRemoteUsers(),this.mySessionId=this.oVSessionService.getSessionId(),setTimeout((function(){e.openviduLayout=new Ze,e.openviduLayoutOptions=e.utilsSrv.getOpenviduLayoutOptions(),e.openviduLayout.initLayoutContainer(document.getElementById("layout"),e.openviduLayoutOptions),e.checkSizeComponent(),e.joinToSession()}),50)}},{key:"joinToSession",value:function(){this.oVSessionService.initSessions(),this.session=this.oVSessionService.getWebcamSession(),this._session.emit(this.session),this.sessionScreen=this.oVSessionService.getScreenSession(),this.subscribeToStreamCreated(),this.subscribeToStreamDestroyed(),this.subscribeToStreamPropertyChange(),this.subscribeToNicknameChanged(),this.chatService.setChatComponent(this.chatSidenav),this.chatService.subscribeToChat(),this.subscribeToChatComponent(),this.subscribeToReconnection(),this.connectToSession()}},{key:"leaveSession",value:function(){this.log.d("Leaving session..."),this.oVSessionService.disconnect(),this._leaveSession.emit()}},{key:"onNicknameUpdate",value:function(e){this.oVSessionService.setWebcamName(e),this.sendNicknameSignal(e)}},{key:"toggleMic",value:function(){this.oVSessionService.isWebCamEnabled()?this.oVSessionService.publishWebcamAudio(!this.oVSessionService.hasWebcamAudioActive()):this.oVSessionService.publishScreenAudio(!this.oVSessionService.hasScreenAudioActive())}},{key:"toggleCam",value:function(){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!this.oVSessionService.hasWebcamVideoActive(),!this.oVSessionService.areBothConnected()){e.next=3;break}return e.abrupt("return",(this.oVSessionService.publishVideo(t),this.oVSessionService.disableWebcamUser(),void this.oVSessionService.unpublishWebcam()));case 3:if(!this.oVSessionService.isOnlyScreenConnected()){e.next=10;break}return n=this.oVSessionService.hasScreenAudioActive(),e.next=7,this.oVSessionService.publishWebcam();case 7:this.oVSessionService.publishScreenAudio(!1),this.oVSessionService.publishWebcamAudio(n),this.oVSessionService.enableWebcamUser();case 10:this.oVSessionService.publishVideo(t);case 11:case"end":return e.stop()}}),e,this)})))}},{key:"toggleScreenShare",value:function(){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.oVSessionService.areBothConnected()){e.next=2;break}return e.abrupt("return",void this.removeScreen());case 2:if(!this.oVSessionService.isOnlyWebcamConnected()){e.next=5;break}return t=this.initScreenPublisher(),e.abrupt("return",(t.once("accessAllowed",(function(e){t.stream.getMediaStream().getVideoTracks()[0].addEventListener("ended",(function(){i.log.d("Clicked native stop button. Stopping screen sharing"),i.toggleScreenShare()})),i.log.d("ACCESS ALOWED screenPublisher"),i.oVSessionService.enableScreenUser(t),i.oVSessionService.publishScreen(),i.oVSessionService.hasWebcamVideoActive()||(i.oVSessionService.disableWebcamUser(),i.oVSessionService.unpublishWebcam())})),void t.once("accessDenied",(function(e){i.log.w("ScreenShare: Access Denied")}))));case 5:return n=this.oVSessionService.hasScreenAudioActive(),e.next=8,this.oVSessionService.publishWebcam();case 8:this.oVSessionService.publishScreenAudio(!1),this.oVSessionService.publishWebcamAudio(n),this.oVSessionService.enableWebcamUser(),this.removeScreen();case 12:case"end":return e.stop()}}),e,this)})))}},{key:"toggleSpeakerLayout",value:function(){if(!this.oVSessionService.isScreenShareEnabled())return this.isAutoLayout=!this.isAutoLayout,this.log.d("Automatic Layout ",this.isAutoLayout?"Disabled":"Enabled"),this.isAutoLayout?void this.subscribeToSpeechDetection():(this.log.d("Unsubscribe to speech detection"),this.session.off("publisherStartSpeaking"),this.resetAllBigElements(),void this.updateOpenViduLayout());this.log.w("Screen is enabled. Speech detection has been rejected")}},{key:"onReplaceScreenTrack",value:function(e){this.oVSessionService.replaceScreenTrack()}},{key:"checkSizeComponent",value:function(){var e;this.compact=(null===(e=document.getElementById("room-container"))||void 0===e?void 0:e.offsetWidth)<=790,this.sidenavMode=this.compact?"over":"side"}},{key:"onToggleVideoSize",value:function(e){var t,n=e.element;e.resetAll&&this.resetAllBigElements(),this.utilsSrv.toggleBigElementClass(n),(null===(t=e)||void 0===t?void 0:t.connectionId)&&(this.oVSessionService.isMyOwnConnection(e.connectionId)?this.oVSessionService.toggleZoom(e.connectionId):this.remoteUsersService.toggleUserZoom(e.connectionId)),this.updateOpenViduLayout()}},{key:"toolbarMicIconEnabled",value:function(){return this.oVSessionService.isWebCamEnabled()?this.oVSessionService.hasWebcamAudioActive():this.oVSessionService.hasScreenAudioActive()}},{key:"connectToSession",value:function(){var e,t;return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var i,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.externalConfig&&this.externalConfig.hasTokens()&&(this.log.d("Received external tokens from "+this.externalConfig.getComponentName()),i=this.externalConfig.getWebcamToken(),o=(null===(e=this.ovSettings)||void 0===e?void 0:e.hasScreenSharing())?this.externalConfig.getScreenToken():void 0),n.t0=i,n.t0){n.next=6;break}return n.next=5,this.getToken();case 5:n.t0=n.sent;case 6:if(i=n.t0,n.t1=!o&&(null===(t=this.ovSettings)||void 0===t?void 0:t.hasScreenSharing()),!n.t1){n.next=12;break}return n.next=11,this.getToken();case 11:o=n.sent;case 12:if(n.t2=i||o,!n.t2){n.next=19;break}return n.next=16,this.connectBothSessions(i,o);case 16:this.oVSessionService.areBothConnected()?(this.oVSessionService.publishWebcam(),this.oVSessionService.publishScreen()):this.oVSessionService.isOnlyScreenConnected()?this.oVSessionService.publishScreen():this.oVSessionService.publishWebcam(),this._joinSession.emit(),this.updateOpenViduLayout();case 19:case"end":return n.stop()}}),n,this)})))}},{key:"connectBothSessions",value:function(e,t){var n,o;return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function i(){var r=this;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,this.oVSessionService.connectWebcamSession(e);case 3:return i.next=5,this.oVSessionService.connectScreenSession(t);case 5:this.localUsers[0].getStreamManager().on("streamPlaying",(function(){r.localUsers[0].getStreamManager().videos[0].video.parentElement.classList.remove("custom-class")})),i.next=11;break;case 8:i.prev=8,i.t0=i.catch(0),this._error.emit({error:i.t0.error,messgae:i.t0.message,code:i.t0.code,status:i.t0.status}),this.log.e("There was an error connecting to the session:",i.t0.code,i.t0.message),this.utilsSrv.showErrorMessage("There was an error connecting to the session:",(null===(n=i.t0)||void 0===n?void 0:n.error)||(null===(o=i.t0)||void 0===o?void 0:o.message));case 11:case"end":return i.stop()}}),i,this,[[0,8]])})))}},{key:"subscribeToStreamCreated",value:function(){var e=this;this.session.on("streamCreated",(function(t){if(!e.oVSessionService.isMyOwnConnection(t.stream.connection.connectionId)){var n=e.session.subscribe(t.stream,void 0);e.remoteUsersService.add(t,n),e.sendNicknameSignal(e.oVSessionService.getWebcamUserName(),t.stream.connection)}}))}},{key:"subscribeToStreamDestroyed",value:function(){var e=this;this.session.on("streamDestroyed",(function(t){e.remoteUsersService.removeUserByConnectionId(t.stream.connection.connectionId)}))}},{key:"emitPublisher",value:function(e){this._publisher.emit(e)}},{key:"subscribeToStreamPropertyChange",value:function(){var e=this;this.session.on("streamPropertyChanged",(function(t){e.oVSessionService.isMyOwnConnection(t.stream.connection.connectionId)||"videoActive"===t.changedProperty&&e.remoteUsersService.updateUsers()}))}},{key:"subscribeToNicknameChanged",value:function(){var e=this;this.session.on("signal:nicknameChanged",(function(t){var n=t.from.connectionId;if(!e.oVSessionService.isMyOwnConnection(n)){var i=JSON.parse(t.data).nickname;e.remoteUsersService.updateNickname(n,i)}}))}},{key:"subscribeToSpeechDetection",value:function(){var e=this;this.log.d("Subscribe to speech detection",this.session),this.session.on("publisherStartSpeaking",(function(t){var n=e.remoteUsersService.someoneIsSharingScreen();if(!e.oVSessionService.isScreenShareEnabled()&&!n){var i=e.utilsSrv.getHTMLElementByClassName(t.connection.stream.streamManager.videos[0].video,ct.ROOT_CLASS);e.resetAllBigElements(),e.remoteUsersService.setUserZoom(t.connection.connectionId,!0),e.onToggleVideoSize({element:i})}}))}},{key:"removeScreen",value:function(){this.oVSessionService.disableScreenUser(),this.oVSessionService.unpublishScreen()}},{key:"subscribeToChatComponent",value:function(){var e=this;this.chatSubscription=this.chatService.toggleChatObs.subscribe((function(t){e.updateOpenViduLayout(e.externalConfig?300:0)}))}},{key:"subscribeToReconnection",value:function(){var e=this;this.session.on("reconnecting",(function(){e.log.w("Connection lost: Reconnecting"),e.isConnectionLost=!0,e.utilsSrv.showErrorMessage("Connection Problem","Oops! Trying to reconnect to the session ...",!0)})),this.session.on("reconnected",(function(){e.log.w("Connection lost: Reconnected"),e.isConnectionLost=!1,e.utilsSrv.closeDialog()})),this.session.on("sessionDisconnected",(function(t){"networkDisconnect"===t.reason&&(e.utilsSrv.closeDialog(),e.leaveSession())}))}},{key:"initScreenPublisher",value:function(){var e=Xe.SCREEN,t=!(this.oVSessionService.isWebCamEnabled()&&this.oVSessionService.hasWebcamVideoActive())&&this.oVSessionService.hasWebcamAudioActive(),n=this.oVSessionService.createProperties(e,void 0,!0,t,!1);try{return this.oVSessionService.initScreenPublisher(void 0,n)}catch(i){this.log.e(i),this.utilsSrv.handlerScreenShareError(i)}}},{key:"getToken",value:function(){var e,t;return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.log.d("Generating tokens..."),n.prev=1,n.next=4,this.networkSrv.getToken(this.mySessionId,null===(e=this.externalConfig)||void 0===e?void 0:e.getOvServerUrl(),null===(t=this.externalConfig)||void 0===t?void 0:t.getOvSecret());case 4:return n.abrupt("return",n.sent);case 7:n.prev=7,n.t0=n.catch(1),this._error.emit({error:n.t0.error,messgae:n.t0.message,code:n.t0.code,status:n.t0.status}),this.log.e("There was an error getting the token:",n.t0.status,n.t0.message),this.utilsSrv.showErrorMessage("There was an error getting the token:",n.t0.error||n.t0.message);case 10:case"end":return n.stop()}}),n,this,[[1,7]])})))}},{key:"sendNicknameSignal",value:function(e,t){var n={data:JSON.stringify({nickname:e}),type:"nicknameChanged",to:t?[t]:void 0};this.session.signal(n)}},{key:"updateOpenViduLayout",value:function(e){var t=this;if(this.openviduLayout){if(!e)return void this.openviduLayout.updateLayout();setTimeout((function(){t.openviduLayout.updateLayout()}),e)}}},{key:"resetAllBigElements",value:function(){this.utilsSrv.removeAllBigElementClass(),this.remoteUsersService.resetUsersZoom(),this.oVSessionService.resetUsersZoom()}},{key:"subscribeToLocalUsers",value:function(){var e=this;this.oVUsersSubscription=this.oVSessionService.OVUsers.subscribe((function(t){e.localUsers=t,e.updateOpenViduLayout()}))}},{key:"subscribeToRemoteUsers",value:function(){var e=this;this.remoteUsersSubscription=this.remoteUsersService.remoteUsers.subscribe((function(t){e.remoteUsers=_toConsumableArray(t),e.updateOpenViduLayout()}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.Qb(mt),o.Qb(v.e),o.Qb(ht),o.Qb(it),o.Qb(nt),o.Qb(ft),o.Qb(tt),o.Qb(rt))},e.\u0275cmp=o.Kb({type:e,selectors:[["app-video-room"]],viewQuery:function(e,t){var n;1&e&&(o.Rc(N,!0),o.Rc(D,!0)),2&e&&(o.wc(n=o.fc())&&(t.chatComponent=n.first),o.wc(n=o.fc())&&(t.chatSidenav=n.first))},hostBindings:function(e,t){1&e&&o.ec("beforeunload",(function(){return t.beforeunloadHandler()}),!1,o.Ac)("resize",(function(){return t.sizeChange()}),!1,o.Ac)},inputs:{externalConfig:"externalConfig"},outputs:{_session:"_session",_publisher:"_publisher",_error:"_error",_joinSession:"_joinSession",_leaveSession:"_leaveSession"},decls:1,vars:1,consts:[["id","videoRoomNavBar",3,"boundsLight",4,"ngIf"],["id","videoRoomNavBar"],[3,"ovSettings","externalConfig","join","leaveSession","publisherCreated",4,"ngIf"],[4,"ngIf"],[3,"ovSettings","externalConfig","join","leaveSession","publisherCreated"],["class","reconnecting-container",4,"ngIf"],[3,"lightTheme","compact","mySessionId","ovSettings","hasVideoDevices","hasAudioDevices","isWebcamVideoEnabled","isWebcamAudioEnabled","isScreenEnabled","isAutoLayout","isConnectionLost","camButtonClicked","micButtonClicked","screenShareClicked","layoutButtonClicked","leaveSessionButtonClicked"],["id","room-container","fullscreen","",1,"sidenav-container"],["position","end","class","sidenav-chat","fixedInViewport","true","fixedTopGap","40","fixedBottomGap","0",3,"mode","boundsLight",4,"ngIf"],[1,"sidenav-main"],["id","layout",1,"bounds"],["class","OT_root OT_publisher custom-class","id","localUser",3,"display",4,"ngFor","ngForOf"],["class","OT_root OT_publisher custom-class","id","remoteUsers",3,"display",4,"ngFor","ngForOf"],[3,"lightTheme","participants"],[1,"reconnecting-container"],["position","end","fixedInViewport","true","fixedTopGap","40","fixedBottomGap","0",1,"sidenav-chat",3,"mode"],["sidenav",""],[3,"lightTheme"],["chatComponent",""],["id","localUser",1,"OT_root","OT_publisher","custom-class"],[3,"user","videoSizeBig","nicknameClicked","replaceScreenTrackClicked","toggleVideoSizeClicked"],["id","remoteUsers",1,"OT_root","OT_publisher","custom-class"],[3,"user","videoSizeBig","toggleVideoSizeClicked"]],template:function(e,t){1&e&&o.Kc(0,G,3,4,"div",0),2&e&&o.pc("ngIf",!!t.ovSettings)},directives:function(){return[g.t,jt,Lt,b.e,b.f,g.s,Dt,b.d,at,Rt]},pipes:function(){return[Ot]},styles:["#videoRoomNavBar[_ngcontent-%COMP%]{min-width:400px;background-color:#494949;height:100%}.stream-container[_ngcontent-%COMP%]{padding:0}.reconnecting-container[_ngcontent-%COMP%]{width:100%;height:100%;z-index:1000;background-color:#000;opacity:80%;position:absolute}.sidenav-container[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;min-height:-webkit-fill-available;overflow:hidden}.sidenav-chat[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:450px;background-color:#494949;border-left:none;position:absolute}.mat-drawer-container[_ngcontent-%COMP%]{background-color:#494949}.sidenav-main[_ngcontent-%COMP%]{height:100%;overflow:hidden;min-height:-webkit-fill-available;min-height:-moz-available}.bounds[_ngcontent-%COMP%]{background-color:#494949;position:absolute;left:0;right:0;top:40px;bottom:25px;min-width:400px!important;width:inherit}.boundsLight[_ngcontent-%COMP%]{background-color:#dfdfdf!important}.custom-class[_ngcontent-%COMP%]{min-height:0!important}.OT_root[_ngcontent-%COMP%], .OT_root[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{color:#fff;margin:0;padding:0;border:0;font-size:100%;font-family:Ubuntu,sans-serif;vertical-align:baseline}.OT_dialog-centering[_ngcontent-%COMP%]{display:table;width:100%;height:100%}.OT_dialog-centering-child[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle}.OT_dialog[_ngcontent-%COMP%]{position:relative;box-sizing:border-box;margin-right:auto;margin-left:auto;color:#fff;font-family:Ubuntu,sans-serif;font-size:13px;line-height:1.4}.OT_dialog[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{font-family:inherit;box-sizing:inherit}.OT_closeButton[_ngcontent-%COMP%]{color:#999;cursor:pointer;font-size:32px;line-height:36px;position:absolute;right:18px;top:0}.OT_dialog-messages[_ngcontent-%COMP%]{text-align:center}.OT_dialog-messages-main[_ngcontent-%COMP%]{margin-bottom:36px;line-height:36px;font-weight:300;font-size:24px}.OT_dialog-messages-minor[_ngcontent-%COMP%]{margin-bottom:18px;font-size:13px;line-height:18px;color:#a4a4a4}.OT_dialog-messages-minor[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#fff}.OT_dialog-actions-card[_ngcontent-%COMP%]{display:inline-block}.OT_dialog-button-title[_ngcontent-%COMP%]{margin-bottom:18px;line-height:18px;font-weight:300;text-align:center;font-size:14px;color:#999}.OT_dialog-button-title[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#999}.OT_dialog-button-title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .OT_dialog-button-title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active, .OT_dialog-button-title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:link{color:#02a1de}.OT_dialog-button-title[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#fff;font-weight:100;display:block}.OT_dialog-button[_ngcontent-%COMP%]{display:inline-block;margin-bottom:18px;padding:0 1em;background-color:#1ca3dc;text-align:center;cursor:pointer}.OT_dialog-button[_ngcontent-%COMP%]:disabled{cursor:not-allowed;opacity:.5}.OT_dialog-button-large[_ngcontent-%COMP%]{line-height:36px;padding-top:9px;padding-bottom:9px;font-weight:100;font-size:24px}.OT_dialog-button-small[_ngcontent-%COMP%]{line-height:18px;padding-top:9px;padding-bottom:9px;background-color:#444;color:#999;font-size:16px}.OT_dialog-progress-bar[_ngcontent-%COMP%]{display:inline-block;width:100%;margin-top:5px;margin-bottom:41px;border:1px solid #4e4e4e;height:8px}.OT_dialog-progress-bar-fill[_ngcontent-%COMP%]{height:100%;background-color:#29a4da}.OT_dialog-plugin-upgrading[_ngcontent-%COMP%]   .OT_dialog-plugin-upgrade-percentage[_ngcontent-%COMP%]{line-height:54px;font-size:48px;font-weight:100}.OT_centered[_ngcontent-%COMP%]{position:fixed;left:50%;top:50%;margin:0}.OT_dialog-hidden[_ngcontent-%COMP%]{display:none}.OT_dialog-button-block[_ngcontent-%COMP%]{display:block}.OT_dialog-no-natural-margin[_ngcontent-%COMP%]{margin-bottom:0}.OT_publisher[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]{position:relative;min-width:48px;min-height:48px}.OT_publisher[_ngcontent-%COMP%]   .OT_video-element[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_video-element[_ngcontent-%COMP%]{display:block;position:absolute;width:100%;height:100%;transform-origin:0 0}.OT_publisher.OT_mirrored[_ngcontent-%COMP%]   .OT_video-element[_ngcontent-%COMP%]{transform:scale(-1,1);transform-origin:50% 50%}.OT_subscriber_error[_ngcontent-%COMP%]{background-color:#000;color:#fff;text-align:center}.OT_subscriber_error[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{padding:20px}.OT_publisher[_ngcontent-%COMP%]   .OT_archiving[_ngcontent-%COMP%], .OT_publisher[_ngcontent-%COMP%]   .OT_archiving-light-box[_ngcontent-%COMP%], .OT_publisher[_ngcontent-%COMP%]   .OT_archiving-status[_ngcontent-%COMP%], .OT_publisher[_ngcontent-%COMP%]   .OT_bar[_ngcontent-%COMP%], .OT_publisher[_ngcontent-%COMP%]   .OT_name[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_archiving[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_archiving-light-box[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_archiving-status[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_bar[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_name[_ngcontent-%COMP%]{-ms-box-sizing:border-box;box-sizing:border-box;top:0;left:0;right:0;display:block;height:34px;position:absolute}.OT_publisher[_ngcontent-%COMP%]   .OT_bar[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_bar[_ngcontent-%COMP%]{background:rgba(0,0,0,.4)}.OT_publisher[_ngcontent-%COMP%]   .OT_edge-bar-item[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_edge-bar-item[_ngcontent-%COMP%]{z-index:1;transition-property:top,bottom,opacity;transition-duration:.5s;transition-timing-function:ease-in}.OT_publisher[_ngcontent-%COMP%]   .OT_name[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_name[_ngcontent-%COMP%]{background-color:transparent;color:#fff;font-size:15px;line-height:34px;font-weight:400;padding:0 4px 0 36px}.OT_publisher[_ngcontent-%COMP%]   .OT_archiving-status[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_archiving-status[_ngcontent-%COMP%]{background:rgba(0,0,0,.4);top:auto;bottom:0;left:34px;padding:0 4px;color:rgba(255,255,255,.8);font-size:15px;line-height:34px;font-weight:400}.OT_micro[_ngcontent-%COMP%]   .OT_archiving-status[_ngcontent-%COMP%], .OT_micro[_ngcontent-%COMP%]:hover   .OT_archiving-status[_ngcontent-%COMP%], .OT_mini[_ngcontent-%COMP%]   .OT_archiving-status[_ngcontent-%COMP%], .OT_mini[_ngcontent-%COMP%]:hover   .OT_archiving-status[_ngcontent-%COMP%]{display:none}.OT_publisher[_ngcontent-%COMP%]   .OT_archiving-light-box[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_archiving-light-box[_ngcontent-%COMP%]{background:rgba(0,0,0,.4);top:auto;bottom:0;right:auto;width:34px;height:34px}.OT_archiving-light[_ngcontent-%COMP%]{width:7px;height:7px;border-radius:30px;position:absolute;top:14px;left:14px;background-color:#575757;box-shadow:0 0 5px 1px #575757}.OT_archiving-light.OT_active[_ngcontent-%COMP%]{background-color:#970d13;animation:1.3s ease-in infinite OT_pulse;-webkit-animation:1.3s ease-in OT_pulse;-moz-animation:1.3s ease-in infinite OT_pulse;-webkit-animation-iteration-count:infinite}@-webkit-keyframes OT_pulse{0%,100%,80%{box-shadow:0 0 0 0 #c70019}30%,50%{box-shadow:0 0 5px 1px #c70019}}.OT_bar.OT_mode-mini[_ngcontent-%COMP%], .OT_bar.OT_mode-mini-auto[_ngcontent-%COMP%], .OT_mini[_ngcontent-%COMP%]   .OT_bar[_ngcontent-%COMP%]{bottom:0;height:auto}.OT_mini[_ngcontent-%COMP%]   .OT_name.OT_mode-auto[_ngcontent-%COMP%], .OT_mini[_ngcontent-%COMP%]   .OT_name.OT_mode-off[_ngcontent-%COMP%], .OT_mini[_ngcontent-%COMP%]   .OT_name.OT_mode-on[_ngcontent-%COMP%], .OT_mini[_ngcontent-%COMP%]:hover   .OT_name.OT_mode-auto[_ngcontent-%COMP%]{display:none}.OT_publisher[_ngcontent-%COMP%]   .OT_name[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_name[_ngcontent-%COMP%]{left:10px;right:37px;height:34px;padding-left:0}.OT_publisher[_ngcontent-%COMP%]   .OT_mute[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_mute[_ngcontent-%COMP%]{border:none;cursor:pointer;display:block;position:absolute;text-align:center;text-indent:-9999em;background-color:transparent;background-repeat:no-repeat;right:0;top:0;border-left:1px solid rgba(255,255,255,.2);height:36px;width:37px}.OT_mini[_ngcontent-%COMP%]   .OT_mute[_ngcontent-%COMP%], .OT_publisher.OT_mini[_ngcontent-%COMP%]   .OT_mute.OT_mode-auto.OT_mode-on-hold[_ngcontent-%COMP%], .OT_subscriber.OT_mini[_ngcontent-%COMP%]   .OT_mute.OT_mode-auto.OT_mode-on-hold[_ngcontent-%COMP%]{top:50%;left:50%;right:auto;margin-top:-18px;margin-left:-18.5px;border-left:none}.OT_publisher[_ngcontent-%COMP%]   .OT_mute[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAcCAMAAAC02HQrAAAA1VBMVEUAAAD3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pn3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pn3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj39/j3+Pj3+Pn4+Pk/JRMlAAAAQ3RSTlMABAUHCQoLDhAQERwdHiAjLjAxOD9ASFBRVl1mbnZ6fH2LjI+QkaWqrrC1uLzAwcXJycrL1NXj5Ofo6u3w9fr7/P3+d4M3+QAAAQBJREFUGBlVwYdCglAABdCLlr5Unijm3hMUtBzlBLSr//9JgUToOQgVJgceJgU8aHgMeA38K50ZOpcQmTPwcyXn+JM8M3JJIqQypiIkeXelTyIkGZPwKS1NMia1lgKTVkaE3oQQGYsmHNqSMWnTgUFbMiZtGlD2dpaxrL1XgM0i4ZK8MeAmFhsAs29MGZniawagS63oMOQUNXYB5D0D1RMDpyoMLw/fiE2og/V+PVDR5AiBl0/2Uwik+vx4xV3a5G5Ye68Nd1czjUjZckm6VhmPciRzeCZICjwTJAViQq+3e+St167rAoHK8sLYZVkBYPCZAZ/eGa+2R5LH7Wrc0YFf/O9J3yBDFaoAAAAASUVORK5CYII=);background-position:9px 5px}.OT_publisher[_ngcontent-%COMP%]   .OT_mute.OT_active[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAdCAYAAABFRCf7AAADcElEQVRIiaWVXWhcRRTHf7NNd2aDtUKMIjTpg4ufFIuiUOmDEWm0Vi3VYhXRqIggQh4sWJFSig9+oOhTKSpIRUWMIBIr2kptoTbgU6ooxCiIjR+14kcJmf9sNceHnd3ebnc3Uv9wuXfOzPzmnDMz5zozGwdWAbc65w5RUJQ8cC2wDJgFJioh/MJCMrNxq2vOzK4HmIvRRemxKP0RJWt53o7S+d2Yzsx6gQ+AIUDAnUqpBLzXZd4RYFUlhB/bdZacc3PAOmAcCMC7wfvFwLNdoAPAyx09bXyYWRl4E7gDmAdGlNKFwLYu8GolhO9O87RJd64GbMrgEvB68P4osMWdXLtVV7czlooNpVRWSs8DO7NpR/B+3rBHsvetCgtCMTxwQCm9BbyQrc8F7/uBex3uRCeXO0PrUZ4NfKyUPgWeyj3bg/crDNsIRGwBaJQGorQ3Svdn2wHgc2BUKb0DPJHtjwfvbwRucc7tz+N+i9LFUdoXpfVN36I0CVwBTFI/q9e1LPxT8P4qYEdu70q12mYzWw1MYQzjeJF6zq+shHC4B7jklOBPP/TzSunh4P0DwKvAfb5c9krpe+CcwsEoZdbhEvBM9wxRAl5RShcA9wAngE3B+8tLpdLuwrhp4MNmK0pfRWkySr7NXS8+L5nZbWZWy/Vin1IaitJnUTqvwevJ71lgSSWEFKUfHG7Q2m/xqFJaGry/GXgfGPLl8mJgrXPur2JoUC8Qy3OpG+sAbGhEKT0ErAWOA6uBPWbW1wr9BOgFbgKezot0kAPYqJQA1gC/A9cA+82svzksSn1R+jNKX0SpnM/e1x3yqig92JhrZivM7FjO8bSZLSuCR/Ok16K0KMNHojQWpYko7Y7S1igN5PE3ROl4lNaZ2UVmNpPBU01orvZvZPCeKFXbBR+lEKVtUapFaSZKg9njqpl9aWYTrmXCImA7sCWb9lK/jj9TrwkrgA1AH3AQuKsSwkzbrLfxpgpsBtYDxf/R3xm2ExirhNCuHHZXTsmRwiat+S/zSt06eysVA/4pmGr/G3qm6ik28v29FKgCg8BS6pvS0KNRGgZ+Bb4FpsxsOkfUlMuwDcBWYOUZOHYM2AU8WQmhBifDv70O7PjX7KZ+4G7g3FM8zd6uBIaBy4AqxnIcZwFLCovPAhE4Sj38b4BDwEeVEFKD9S94Khjn486v3QAAAABJRU5ErkJggg==);background-position:9px 4px}.OT_subscriber[_ngcontent-%COMP%]   .OT_mute[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAATCAYAAAB7u5a2AAABx0lEQVQ4jaWUv48NURiGn3ONmCs32ZBd28ht1gqyZAkF21ylQkEiSp2ehpDlD1BoFGqqVdJohYKI7MaPxMoVNghCWMF+7ybLUewnOXfcMWO9yeQ857zne8+XmZOBGjJpr0kvTIomvTZpS526UCO4DUwD64FjwCFgqZnnR+oc8LfgzKQ73vGsr42ZtGjSQFV9o8KfBCacZwCaef4YmAf2rzjcpN3A2WSpm/AssKcqPDNpDBjs410CViXzTwk/A7b1C4wxDgOngAsZcAXY2buDfp/6S4F3lDS8DjgBzDWAjX/Y/e/QgYS/AhsKHa+OMQ6GEJ4Cj4BOAxgq6aCowyZtdf4OtAr+FHDO+R4wWnVbihr3cQnICt4boO38GWj9a/icjwOACt4m4K3zEPA+AxaAtTWCnwN3lzHkEL8V/OPAGud9wK2GF9XR1Wae/1zG2AI+pGYI4VUIoRtjHAc2A9cz4LRPevYCZ+i9/4sJt4GXJU10gaPAzdI2TTro/5Tfz8XEe2LSZGmxq/SDNvP8BnA5WRrx4BwYBe6vONx1EnjovGvBLAAd4Adwuyq8UiaNmDTvr+a8SQ9MuvbfwckBHZPe+QEfTdpep+4XZmPBHiHgz74AAAAASUVORK5CYII=);background-position:8px 7px}.OT_subscriber[_ngcontent-%COMP%]   .OT_mute.OT_active[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAUCAYAAACXtf2DAAACtklEQVQ4jZ2VSYiURxTHf+/T9Nc9iRrBuYySmIsXUU9iFMEFERRBvAjJLUQi5ioiHvSScfTmgqC4XAT1ZIgLuJHkICaaQAgKI2hAUBT30bjUq7bbv4eukXK029F3+eqtv/fqK6qQdEnSNUmT6CDB/bvgfjO4N9zj2RD8007xg1IABkwEzkma0qb4PGAPMBZYLtSD8eNwAEjqTlNI0gNJM4YU7w7ut4O7gvuhZFsR3C8NC5BBLiTIY0mzM8AvqbiC++pk+zLpE95XuwAws3vAQuBPYDRwWtL84P4tsDSLv5oaug4EYOawAMF9jMdoLxqNZcDvQA04UVYqL4G/svj7AF21mhJscrvCksYBFO7xc2AAGGg2mrdjvf4rcAyomNn+slLZmUEGBgsYdh945xZJmgvckDSrEJpK6ySBgV6q12O8ABwGPjGzfWWlsjdN9rpjoSfA+DYDXARGAksK4Is3XC1Ub4z1f4CDQGFmu6tleQSYk0U+p7WVeefLJc00s4fAeWB6Qeunvj0m2ugx9gO7kmlrtSxvBfcy6fXUZS6rgG/S+jLQUwCVNmMC9HqM14EtSe+rluWazN8YEv8IqKZ1E1qnaIDO0ucx3gX6kv6TpM3AM+D/IbGjgP60/gq4WQA33gMA2OQxPgHWJX1ttSwL4FAeZGYLgB2SasBs4A8L7qOBf9M0uXQB3a+TMYSmVctyDrA9mfcBK82smSdKWgCcAaa1bTm4fxbc/8uuCQX3RanAD5Ka6Wo5IGnE0HxJPZ03pQX5Org3MsD3AO5xXLPZXJ9BjkrqdFg6QjZkgG3Jtsw93pG0VFI9QU5K6voYQBHcTydAfwheBI9HgvvPAJIWS3qeIL9JGvUxkO7gfi1BrqTvwkG/pPmSnibIqTzXPgAyEVgBjAEu1qrVPbk/PVTHgb/NbPGg/RVIzOQqzSTBaQAAAABJRU5ErkJggg==);background-position:7px 7px}.OT_publisher[_ngcontent-%COMP%]   .OT_edge-bar-item.OT_mode-auto[_ngcontent-%COMP%], .OT_publisher[_ngcontent-%COMP%]   .OT_edge-bar-item.OT_mode-mini-auto[_ngcontent-%COMP%], .OT_publisher[_ngcontent-%COMP%]   .OT_edge-bar-item.OT_mode-off[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_edge-bar-item.OT_mode-auto[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_edge-bar-item.OT_mode-mini-auto[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_edge-bar-item.OT_mode-off[_ngcontent-%COMP%]{top:-25px;opacity:0}.OT_publisher[_ngcontent-%COMP%]   .OT_edge-bar-item.OT_mode-off[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_edge-bar-item.OT_mode-off[_ngcontent-%COMP%]{display:none}.OT_mini[_ngcontent-%COMP%]   .OT_mute.OT_mode-auto[_ngcontent-%COMP%], .OT_publisher[_ngcontent-%COMP%]   .OT_mute.OT_mode-mini-auto[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_mute.OT_mode-mini-auto[_ngcontent-%COMP%]{top:50%}.OT_publisher[_ngcontent-%COMP%]   .OT_edge-bar-item.OT_edge-bottom.OT_mode-auto[_ngcontent-%COMP%], .OT_publisher[_ngcontent-%COMP%]   .OT_edge-bar-item.OT_edge-bottom.OT_mode-mini-auto[_ngcontent-%COMP%], .OT_publisher[_ngcontent-%COMP%]   .OT_edge-bar-item.OT_edge-bottom.OT_mode-off[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_edge-bar-item.OT_edge-bottom.OT_mode-auto[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_edge-bar-item.OT_edge-bottom.OT_mode-mini-auto[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_edge-bar-item.OT_edge-bottom.OT_mode-off[_ngcontent-%COMP%]{top:auto;bottom:-25px}.OT_publisher[_ngcontent-%COMP%]   .OT_edge-bar-item.OT_mode-auto.OT_mode-on-hold[_ngcontent-%COMP%], .OT_publisher[_ngcontent-%COMP%]   .OT_edge-bar-item.OT_mode-on[_ngcontent-%COMP%], .OT_publisher[_ngcontent-%COMP%]:hover   .OT_edge-bar-item.OT_mode-auto[_ngcontent-%COMP%], .OT_publisher[_ngcontent-%COMP%]:hover   .OT_edge-bar-item.OT_mode-mini-auto[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_edge-bar-item.OT_mode-auto.OT_mode-on-hold[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_edge-bar-item.OT_mode-on[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]:hover   .OT_edge-bar-item.OT_mode-auto[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]:hover   .OT_edge-bar-item.OT_mode-mini-auto[_ngcontent-%COMP%]{top:0;opacity:1}.OT_mini[_ngcontent-%COMP%]   .OT_mute.OT_mode-on[_ngcontent-%COMP%], .OT_mini[_ngcontent-%COMP%]:hover   .OT_mute.OT_mode-auto[_ngcontent-%COMP%], .OT_mute.OT_mode-mini[_ngcontent-%COMP%], .OT_root[_ngcontent-%COMP%]:hover   .OT_mute.OT_mode-mini-auto[_ngcontent-%COMP%]{top:50%}.OT_publisher[_ngcontent-%COMP%]   .OT_edge-bar-item.OT_edge-bottom.OT_mode-on[_ngcontent-%COMP%], .OT_publisher[_ngcontent-%COMP%]:hover   .OT_edge-bar-item.OT_edge-bottom.OT_mode-auto[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]   .OT_edge-bar-item.OT_edge-bottom.OT_mode-on[_ngcontent-%COMP%], .OT_subscriber[_ngcontent-%COMP%]:hover   .OT_edge-bar-item.OT_edge-bottom.OT_mode-auto[_ngcontent-%COMP%]{top:auto;bottom:0;opacity:1}.OT_root[_ngcontent-%COMP%]   .OT_video-loading[_ngcontent-%COMP%]{position:absolute;z-index:1;width:100%;height:100%;display:none;background-color:rgba(0,0,0,.75)}.OT_root[_ngcontent-%COMP%]   .OT_video-loading[_ngcontent-%COMP%]   .OT_video-loading-spinner[_ngcontent-%COMP%]{background:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0yMCAtMjAgMjQwIDI0MCI+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJhIiB4Mj0iMCIgeTI9IjEiPjxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iI2ZmZiIgc3RvcC1vcGFjaXR5PSIwIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9IjAiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iYiIgeDE9IjEiIHgyPSIwIiB5Mj0iMSI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9IjAiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmZmYiIHN0b3Atb3BhY2l0eT0iLjA4Ii8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImMiIHgxPSIxIiB4Mj0iMCIgeTE9IjEiPjxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iI2ZmZiIgc3RvcC1vcGFjaXR5PSIuMDgiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmZmYiIHN0b3Atb3BhY2l0eT0iLjE2Ii8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImQiIHgyPSIwIiB5MT0iMSI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9Ii4xNiIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI2ZmZiIgc3RvcC1vcGFjaXR5PSIuMzMiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iZSIgeDI9IjEiIHkxPSIxIj48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiNmZmYiIHN0b3Atb3BhY2l0eT0iLjMzIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9Ii42NiIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJmIiB4Mj0iMSIgeTI9IjEiPjxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iI2ZmZiIgc3RvcC1vcGFjaXR5PSIuNjYiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmZmYiLz48L2xpbmVhckdyYWRpZW50PjxtYXNrIGlkPSJnIj48ZyBmaWxsPSJub25lIiBzdHJva2Utd2lkdGg9IjQwIj48cGF0aCBzdHJva2U9InVybCgjYSkiIGQ9Ik04Ni42LTUwYTEwMCAxMDAgMCAwIDEgMCAxMDAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwMCAxMDApIi8+PHBhdGggc3Ryb2tlPSJ1cmwoI2IpIiBkPSJNODYuNiA1MEExMDAgMTAwIDAgMCAxIDAgMTAwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMDAgMTAwKSIvPjxwYXRoIHN0cm9rZT0idXJsKCNjKSIgZD0iTTAgMTAwYTEwMCAxMDAgMCAwIDEtODYuNi01MCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTAwIDEwMCkiLz48cGF0aCBzdHJva2U9InVybCgjZCkiIGQ9Ik0tODYuNiA1MGExMDAgMTAwIDAgMCAxIDAtMTAwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMDAgMTAwKSIvPjxwYXRoIHN0cm9rZT0idXJsKCNlKSIgZD0iTS04Ni42LTUwQTEwMCAxMDAgMCAwIDEgMC0xMDAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwMCAxMDApIi8+PHBhdGggc3Ryb2tlPSJ1cmwoI2YpIiBkPSJNMC0xMDBhMTAwIDEwMCAwIDAgMSA4Ni42IDUwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMDAgMTAwKSIvPjwvZz48L21hc2s+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHg9Ii0yMCIgeT0iLTIwIiBtYXNrPSJ1cmwoI2cpIiBmaWxsPSIjZmZmIi8+PC9zdmc+) no-repeat;position:absolute;width:32px;height:32px;left:50%;top:50%;margin-left:-16px;margin-top:-16px;-webkit-animation:2s linear infinite OT_spin;animation:2s linear infinite OT_spin}@-webkit-keyframes OT_spin{100%{-webkit-transform:rotate(360deg)}}@keyframes OT_spin{100%{transform:rotate(360deg)}}.OT_publisher.OT_loading[_ngcontent-%COMP%]   .OT_video-loading[_ngcontent-%COMP%], .OT_subscriber.OT_loading[_ngcontent-%COMP%]   .OT_video-loading[_ngcontent-%COMP%]{display:block}.OT_video-centering[_ngcontent-%COMP%]{display:table;width:100%;height:100%}.OT_video-container[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle}.OT_video-poster[_ngcontent-%COMP%]{position:absolute;z-index:1;width:100%;height:100%;display:none;opacity:.25;background-repeat:no-repeat;background-image:url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgNDcxIDQ2NCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48bGluZWFyR3JhZGllbnQgaWQ9ImEiIHgyPSIwIiB5Mj0iMSI+PHN0b3Agb2Zmc2V0PSI2Ni42NiUiIHN0b3AtY29sb3I9IiNmZmYiLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZmYiIHN0b3Atb3BhY2l0eT0iMCIvPjwvbGluZWFyR3JhZGllbnQ+PHBhdGggZmlsbD0idXJsKCNhKSIgZD0iTTc5IDMwOGMxNC4yNS02LjUgNTQuMjUtMTkuNzUgNzEtMjkgOS0zLjI1IDI1LTIxIDI1LTIxczMuNzUtMTMgMy0yMmMtMS43NS02Ljc1LTE1LTQzLTE1LTQzLTIuNSAzLTQuNzQxIDMuMjU5LTcgMS0zLjI1LTcuNS0yMC41LTQ0LjUtMTYtNTcgMS4yNS03LjUgMTAtNiAxMC02LTExLjI1LTMzLjc1LTgtNjctOC02N3MuMDczLTcuMzQ2IDYtMTVjLTMuNDguNjM3LTkgNC05IDQgMi41NjMtMTEuNzI3IDE1LTIxIDE1LTIxIC4xNDgtLjMxMi0xLjMyMS0xLjQ1NC0xMCAxIDEuNS0yLjc4IDE2LjY3NS04LjY1NCAzMC0xMSAzLjc4Ny05LjM2MSAxMi43ODItMTcuMzk4IDIyLTIyLTIuMzY1IDMuMTMzLTMgNi0zIDZzMTUuNjQ3LTguMDg4IDQxLTZjLTE5Ljc1IDItMjQgNi0yNCA2czc0LjUtMTAuNzUgMTA0IDM3YzcuNSA5LjUgMjQuNzUgNTUuNzUgMTAgODkgMy43NS0xLjUgNC41LTQuNSA5IDEgLjI1IDE0Ljc1LTExLjUgNjMtMTkgNjItMi43NSAxLTQtMy00LTMtMTAuNzUgMjkuNS0xNCAzOC0xNCAzOC0yIDQuMjUtMy43NSAxOC41LTEgMjIgMS4yNSA0LjUgMjMgMjMgMjMgMjNsMTI3IDUzYzM3IDM1IDIzIDEzNSAyMyAxMzVMMCA0NjRzLTMtOTYuNzUgMTQtMTIwYzUuMjUtNi4yNSAyMS43NS0xOS43NSA2NS0zNnoiLz48L3N2Zz4=);background-size:auto 76%}.OT_fit-mode-cover[_ngcontent-%COMP%]   .OT_video-element[_ngcontent-%COMP%]{-o-object-fit:cover;object-fit:cover}@media only screen and (orientation:portrait){.OT_subscriber.OT_ForceContain.OT_fit-mode-cover[_ngcontent-%COMP%]   .OT_video-element[_ngcontent-%COMP%]{-o-object-fit:contain!important;object-fit:contain!important}}.OT_fit-mode-contain[_ngcontent-%COMP%]   .OT_video-element[_ngcontent-%COMP%]{-o-object-fit:contain;object-fit:contain}.OT_fit-mode-cover[_ngcontent-%COMP%]   .OT_video-poster[_ngcontent-%COMP%]{background-position:center bottom}.OT_fit-mode-contain[_ngcontent-%COMP%]   .OT_video-poster[_ngcontent-%COMP%]{background-position:center}.OT_audio-level-meter[_ngcontent-%COMP%]{position:absolute;width:25%;max-width:224px;min-width:21px;top:0;right:0;overflow:hidden}.OT_audio-level-meter[_ngcontent-%COMP%]:before{content:'';display:block;padding-top:100%}.OT_audio-level-meter__bar[_ngcontent-%COMP%]{position:absolute;width:192%;height:192%;top:-96%;right:-96%;border-radius:50%;background-color:rgba(0,0,0,.8)}.OT_audio-level-meter__audio-only-img[_ngcontent-%COMP%]{position:absolute;top:22%;right:15%;width:40%;opacity:.7;background:url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgNzkgODYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI2ZmZiI+PHBhdGggZD0iTTkuNzU3IDQwLjkyNGMzLjczOC01LjE5MSAxMi43MTEtNC4zMDggMTIuNzExLTQuMzA4IDIuMjIzIDMuMDE0IDUuMTI2IDI0LjU4NiAzLjYyNCAyOC43MTgtMS40MDEgMS4zMDEtMTEuNjExIDEuNjI5LTEzLjM4LTEuNDM2LTEuMjI2LTguODA0LTIuOTU1LTIyLjk3NS0yLjk1NS0yMi45NzV6bTU4Ljc4NSAwYy0zLjczNy01LjE5MS0xMi43MTEtNC4zMDgtMTIuNzExLTQuMzA4LTIuMjIzIDMuMDE0LTUuMTI2IDI0LjU4Ni0zLjYyNCAyOC43MTggMS40MDEgMS4zMDEgMTEuNjExIDEuNjI5IDEzLjM4LTEuNDM2IDEuMjI2LTguODA0IDIuOTU1LTIyLjk3NSAyLjk1NS0yMi45NzV6Ii8+PHBhdGggZD0iTTY4LjY0NyA1OC42Yy43MjktNC43NTMgMi4zOC05LjU2MSAyLjM4LTE0LjgwNCAwLTIxLjQxMi0xNC4xMTUtMzguNzctMzEuNTI4LTM4Ljc3LTE3LjQxMiAwLTMxLjUyNyAxNy4zNTgtMzEuNTI3IDM4Ljc3IDAgNC41NDEuNTE1IDguOTM2IDEuODAyIDEyLjk1IDEuNjk4IDUuMjk1LTUuNTQyIDYuOTkxLTYuNjE2IDIuMDczQzIuNDEgNTUuMzk0IDAgNTEuNzg3IDAgNDguMTAzIDAgMjEuNTM2IDE3LjY4NSAwIDM5LjUgMCA2MS4zMTYgMCA3OSAyMS41MzYgNzkgNDguMTAzYzAgLjcxOC0yLjg5OSA5LjY5My0zLjI5MiAxMS40MDgtLjc1NCAzLjI5My03Ljc1MSAzLjU4OS03LjA2MS0uOTEyeiIvPjxwYXRoIGQ9Ik01LjA4NCA1MS4zODVjLS44MDQtMy43ODIuNTY5LTcuMzM1IDMuMTM0LTcuOTIxIDIuNjM2LS42MDMgNS40ODUgMi4xNSA2LjI4OSA2LjEzMi43OTcgMy45NDgtLjc1MiA3LjQ1Ny0zLjM4OCA3Ljg1OS0yLjU2Ni4zOTEtNS4yMzctMi4zMTgtNi4wMzQtNi4wN3ptNjguODM0IDBjLjgwNC0zLjc4Mi0uNTY4LTcuMzM1LTMuMTMzLTcuOTIxLTIuNjM2LS42MDMtNS40ODUgMi4xNS02LjI4OSA2LjEzMi0uNzk3IDMuOTQ4Ljc1MiA3LjQ1NyAzLjM4OSA3Ljg1OSAyLjU2NS4zOTEgNS4yMzctMi4zMTggNi4wMzQtNi4wN3ptLTIuMDM4IDguMjg4Yy0uOTI2IDE5LjY1OS0xNS4xMTIgMjQuNzU5LTI1Ljg1OSAyMC40NzUtNS40MDUtLjYwNi0zLjAzNCAxLjI2Mi0zLjAzNCAxLjI2MiAxMy42NjEgMy41NjIgMjYuMTY4IDMuNDk3IDMxLjI3My0yMC41NDktLjU4NS00LjUxMS0yLjM3OS0xLjE4Ny0yLjM3OS0xLjE4N3oiLz48cGF0aCBkPSJNNDEuNjYyIDc4LjQyMmw3LjU1My41NWMxLjE5Mi4xMDcgMi4xMiAxLjE1MyAyLjA3MiAyLjMzNWwtLjEwOSAyLjczOGMtLjA0NyAxLjE4Mi0xLjA1MSAyLjA1NC0yLjI0MyAxLjk0NmwtNy41NTMtLjU1Yy0xLjE5MS0uMTA3LTIuMTE5LTEuMTUzLTIuMDcyLTIuMzM1bC4xMDktMi43MzdjLjA0Ny0xLjE4MiAxLjA1Mi0yLjA1NCAyLjI0My0xLjk0N3oiLz48L2c+PC9zdmc+) center no-repeat}.OT_audio-level-meter__audio-only-img[_ngcontent-%COMP%]:before{content:'';display:block;padding-top:100%}.OT_audio-level-meter__value[_ngcontent-%COMP%]{position:absolute;border-radius:50%;background-image:radial-gradient(circle,#97ce00 0,rgba(151,206,0,0) 100%)}.OT_audio-level-meter.OT_mode-off[_ngcontent-%COMP%]{display:none}.OT_audio-level-meter.OT_mode-on[_ngcontent-%COMP%], .OT_audio-only[_ngcontent-%COMP%]   .OT_audio-level-meter.OT_mode-auto[_ngcontent-%COMP%]{display:block}.OT_audio-only.OT_publisher[_ngcontent-%COMP%]   .OT_video-element[_ngcontent-%COMP%], .OT_audio-only.OT_subscriber[_ngcontent-%COMP%]   .OT_video-element[_ngcontent-%COMP%]{display:none}.OT_video-disabled-indicator[_ngcontent-%COMP%]{opacity:1;border:none;display:none;position:absolute;background-color:transparent;background-repeat:no-repeat;background-position:bottom right;pointer-events:none;top:0;left:0;bottom:3px;right:3px}.OT_video-disabled[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFIAAAAoCAYAAABtla08AAAINUlEQVR42u2aaUxUVxTHcRBmAAEBRVTK4sKwDIsg+wCK7CqIw1CN1YobbbS2qYlJ06Qx1UpdqMbYWq2pSzWmH6ytNbXWJY1Lq7VuqBERtW64V0XFLYae0/xvcp3MMAMzDz6IyT/ge2ce5/7ucpY3Ts3NzZ1ygF57AJ0gO0G2jyZPmdbFyclJSAV1EeoEaUUSLGdSV5KLLFxzFmA7QVqGqDqjixhWkxCVeyRVl38wM6bwj6yYItYK47BAuu9B0gCqs6Ng2r494KQtkj/Dz2jHraw6qw2fdSE4rNmcCPCvZONP8iF1I6kdBdMaQJWZLeJqRWa2kPJAxXY+GxE+zxLI03GRh8lGSwoi9WCY8FWlCEh+8JOnT7MfPGjMuXX7Tt61hoaCi/9cKmKdv3BxeEtim/UbNpnbQiqF4MmT7kqrbr4lkMcTo46TTSpJB5g+8NHuVWnWuaampvhmO/7duHmrGluoO4C6OsJZGRrkDIld43ZqUOTnlkDSmXmabAoBU0vqBf+6KgFSxQ9++uzZ8rZApM81TJ8xM5me0Z/UF7PuBmdVdkGEb5gYDeQmyZNW3SJLIP9Kj64lGyMpmxRN6sOfIbkoAhKOdnv2/PmB1kB88eLFo+olyyrps3rSINIAzLonnqlqK8R9w+L86vtrt5L2nhug3Vc3ULu/Liz8AOuXESlZZONH6kmr7gtLIA9lRNeRzVukAvj3BslLnJNKgfScO69K+/Lly0ZbQW7e8tNK+pwBjqaSIjDrXgJkW1ciAZvbQjQ+RDahpBBKd5ZZsqN758hmImk4KQHnpDd8UwSkCyJarx07d4+3BeKJmlMHyX4qaRxpBCmNFE4KENvHDpAutVERn1kCVBMfeRRgYvZnx62wZPdnZkw92VQA5GClQXYRBze2S+iJmpPVVoJLA9l9QKokjcWKTCT1R5rhLg70NuSsziT16diIKkuAjibrTpJNDkn/e17CahtAjlAWJAYkb29Sb1LE9Rs391kILk8mVkyuIpuZcLKUlEmKkra1WuSTNuesEPzwoEploSVAh9Oiz+BIyd9dOHhtx4OEpFpVg6gbNK3yXX1j48N6U5Dz5i/gc/FDrMY3sTLiSMEkXxGxzUEUAGnbxlPaksMlHUXWAlHS8URCPseSohZbCSLjSSU7ixLXdzhIWVKq4Y7t2a/2bN0qGeKly1fYsVmk6RgIDz4J0bonyUOcjeYqm/8hRoYbWkigV2NH9CHAS60EkUkkw47hSRs6FqT1LR5AVcsrueXlK1d5AO+RpmBrZZEiefByytPCanRGNLZY0uF52gNDYr9sCRB8MHY0SJu2OJWKS2WQV65e4y31DmkCImEi0hBfufRime0RIhpbKen0/Ny9OYNW2ghyYytABjNIaxNuKttAWk6HPLn0k0FevdZwFinPWFIuKZbUV16NVko6jbWSDoPO3pOf8K0jQWLSQ0S9bdpkYck+m7vfWpAiHfKgBsZiGSSt0FqcTeU8WETqAHE2CgcAVd3Gkm4MD3xXYeI6B4NMItvKbcUpQ9gP+KMWnSsW+TaYJtoo+avBWLoKoK0CCSDud+7eXWQGZAXqV3YoQjQCfixJ8+fzj9ta3JHhlUeJ8wJOY2ws6eRKpPS3oqTvHAESEz9ya0naXL5WH6pt3FqSOhTHkTcKEXc6k1POh4Q9YJu/03TT4a8PoGMFI4i2EqSbOZAYaBkpCyD92RkG6KCSbjI/H0HEISBnlOZPFdcEzI2GTO4KBZICGKyAKLTEmJOB2txf5MbgohBINCl4FTqmpJMB2W+HiRn1Q2l6lXyPmiEP6VVE2TfGoaMYrHyPdtAnyI0jEOn9RLWmNEhvBBE7SjpFQZaShtLK+1S+T12lRwxUvrZlVPp8jE1PikeO7C/nyEqBDCB1t7+kUx4kKUWclea0yZC5BIGpiJSNSD9QgFR0RQKkL6KxHSWdsiARHJNYewoGrzG1/bk4dTPSunL2EyDjcbb7MQ+lQfZmkKiN7SjpFAM5CWAyGcwyY84YsZ1lUcbRNNtQMAdtQWGvQ0DyVjzYAKQfQFodeAeC1C8vzymXIZqD+ZEh/2OyLSalS/3VbnJZ+VqDXGjMrTCFuK4s66vVZUNfqaDolcbjOcb899sLpEE+I20GifywXe2QR3KElu99PzqjGufhREqB1pjCnG3IL3fY1v733r2FMsiGhutn0LAoJWWIGbPxjKwgjUbF0m52mPhigrpdXOecEq9pR6MkHbu2LOtrcZ9y3d0ODTb15y9MePz48aF79+8fvXnr9sljx2u2I7KNxDuaMPGVECoRs7mC4eT7SIruFNfNHK15MKuM2evwNq+4qjxvGnd5CHwNNynawW4cOlUZdG8b55IIJHmkItwrZHH6QxB3OSL9kTtAGpIvZiQB3Z4SKBfXQtEE9sashWAW87Bt3sYZNR6zn4uzJwWDKUKXfaKCdqUoBpLxSjYe9nqGiwWRBGipuGZ3Qm76itYLbbJI/PEhUApfw73uOIy9xfse3M9F9BuFJHcYrseSouGkHtCVtkuGTTikI8XgZzhg9SeF4VqcvSWiaSvNHQ8JwkNjIfEHemCmNLD1RaEfLs18mlgNuN6PFALHo7CyU5W2g00gFAQF4ozvibH04muwDbWraSFAyt/AAMzewgGR8uCeWn77xzBxPxgzPRCDDMZ14bQ/3jqGKGoHf2Hjgx3kw5LbaJDYWb52t9FMgw4AuWNWukNeuOYqOsmQi2jgws4PA/DD/z0B2x0/veCs4naw0cgybezid7X9jV3rX2RSs0wfLkll4pBGcgifg+NYxe1kJ2ycTaRq66uG/wBOl0vjcw70xwAAAABJRU5ErkJggg==);background-size:33px auto}.OT_video-disabled-warning[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFIAAAAoCAYAAABtla08AAAGMElEQVR4Ae2aA7D0yBaAc7oH12vbRmlLaxYWb23btm3btm2899a2bWuYtPZ01cmtU9lJrib315yqr9I3Oem/5/s7acwEnehEJzoxCcX2O+wEeIgRBDDaGjAZOgQ6ihRpLklHZDJIXK1WWymMIhGGkVBKCWMM+Iv/f/b5t7faYtM/sGgIS7j8RNLjceUVl41GvGN1BFiHy9sgtRWaYbhvuVQ6o1VOvV5/tLe3dyssKoZuh8xClkDEi2MMS6ZjR0cScxdK/+HgnJsmLccYOx0e/PUGUqfTJDEHkV5go9lcMQoj4R8RpSIRRUr4a9baTJFCCNfqESKJ7RYJibK0xoi05EhFRTxMi1Rit6xHAuLaKRLwEVi6q1x+EhlVpd3d3Wfh4VQkQhRhxthYLg7SRGqdLlIp7UVOHf+JhEhEMscUolVje3p63saeeOFoKsT7fjj++BNuw2I/0ouUENmGaQcQEilQvUU6xuWC0kqmVWCt8df6kG7WLoFA20VSCOyNh0RKPT+SyrTWtQsvuvTYCy84z3+oAdbgAiLGIvHjTz6bFuu/B3lKKfVkFKknwih6EnnipZdfXQZzepAupXSGSCfwUGZtkrx3t/0dSQGnnXbmdocdetArQoj+4VR23wMP3bj/vnv9Sv/rBmkish09ca655thHSrlWq4TFF1vkNDxsgjiUnPqZnHPABIq47jx7pPMcecShfz7x1DO7D6eit99576X1113nVd8rqLGAuDaNitJonTGIqHgQGQjDsJglMrUH5iDSEQbRa6y2yrNvv/PuWVmV/PTzLz8steTit1B9FtGJeZrJksmWdBzBMcami4xUkaY1A1Qe94WIaPGBApJhaERrLrXkElf8+NPPz6YMLs1DDjn0Wn9PnI/UiQadM4jNEkhzVsEGE8nIHESM1j5/KqRX+/IEiOQ/yifNBlEkpnb00cccesbpp13T3983H88/48xzrrvm6it/8U5JXgX5G6nSvSq1R5LATR7aYGkwMG1RSwkWABH+4jUb3vT/uJ1Z0xpjraTBRltrxUQhksIRmgTJyy69+Pv99tv3qYX6FxgU+fU33352xGEHf5wisU7nNWJpZRMkAjZ6aIN1mwV7h29Jo2wCHlveu/GV169z65E+T6koexCh6c+EEiky3lnxQKFjUeVyOeI5AOBzIiayRhJryd7YYnkIHgvB0qk9Tdql6N3XH4bRUIOIIIKJSiRb0hkSEpZKRd1CpEq8GxtIyCVmDSgFl94GacTgaJw1rUlYhYng0c4ewaUsmKRIJjpiqMSOCh9QeI+UYECmtQIsxEu6OorEcv6Rl0gu0woh8MhFkmSCTXVI4pC704WCFRJvSRNJSzrMMEZO2iKZTCHAZYnmvXCny7ed5vfZK3viHSBdIFCKEFj2+nt+73nw8m2uedcLJlktA++VNMEPaR45aYukcKnnCfY3/DFbZS8t7eHxNgsPM0N1hXhJJwwM1QbpoQFlog2R13a/zBxEYHAQEUYUM6qiVwEyBYoM6JFNF2kFLelI5KQf+fVI4dJFCguDS7oAyx2R6SFQJKRedSDj/cMg/RXQ6ZE05GSIDAaXdCi1I3L021SQWNJ1RLY5OiIdL4/yvuw8ADfWPFrSciaMyH8tEQPwf1uGG54g5+KlJGTmsrxsQdl5PKidnPFe2QS///7Hu+VS6WX/HYnf0sevGL7lXydwod2/9DykZq0s5yff0sgSWCigNOH7TPHL7ufj+/TH8P/+qYpL4HkBDiRYpEXeM8/89/9zzjn7EtY64dfd1nqccM7Bs8+9MKy8555/8TnKS+5MufH6EZVASkgPzf+mJXroet17JirU0ALST3nT0y5ONyLpeo1y64ih+vuQfsoTOeRFSJXa+SvyB90TUmdw49EjLaKpMQ0mzEeTzkWsd/oI6fzfiKM8gWg6X6OjpXstu5ZHnmIb0GFiu29MIUfUewkmVrEN3RqVQ/bY8FzNcquMBv/pCNUZ5pHHem01KdN/I/DG66/lLhKSvTO5M84kav5C5z2ZfyAivi9i9VGd45RH7UWJbjwGG/7NYsRECt7jiOToHedKAui8SW4CsxyRc54mKH/8f7ELhCCACyNcIl/wI+FaAJyc8yzRtinQPzWzuFZrFHq/AAAAAElFTkSuQmCC);background-size:33px auto}.OT_video-disabled-indicator.OT_active[_ngcontent-%COMP%]{display:block}.OT_audio-blocked-indicator[_ngcontent-%COMP%]{opacity:1;border:none;display:none;position:absolute;background-color:transparent;background-repeat:no-repeat;background-position:center;pointer-events:none;top:0;left:0;bottom:0;right:0}.OT_audio-blocked[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMTUwIiBoZWlnaHQ9IjkwIj48ZGVmcz48cGF0aCBkPSJNNjcgMTJMNi40NDggNzIuNTUyIDAgMzFWMThMMjYgMGw0MSAxMnptMyA3bDYgNDctMjkgMTgtMzUuNTAyLTYuNDk4TDcwIDE5eiIgaWQ9ImEiLz48L2RlZnM+PHJlY3Qgd2lkdGg9IjE1MCIgaGVpZ2h0PSI5MCIgcng9IjM1IiByeT0iNDUiIG9wYWNpdHk9Ii41Ii8+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzNikiPjxtYXNrIGlkPSJiIiBmaWxsPSIjZmZmIj48dXNlIHhsaW5rOmhyZWY9IiNhIi8+PC9tYXNrPjxwYXRoIGQ9Ik0zOS4yNDkgNTEuMzEyYy42OTcgMTAuMzcgMi43ODUgMTcuODk3IDUuMjUxIDE3Ljg5NyAzLjAzOCAwIDUuNS0xMS40MTcgNS41LTI1LjVzLTIuNDYyLTI1LjUtNS41LTI1LjVjLTIuNTEgMC00LjYyOCA3Ljc5Ny01LjI4NyAxOC40NTNBOC45ODkgOC45ODkgMCAwIDEgNDMgNDRhOC45ODggOC45ODggMCAwIDEtMy43NTEgNy4zMTJ6TTIwLjk4NSAzMi4yMjRsMTUuNzQ2LTE2Ljg3N2E3LjM4NSA3LjM4NSAwIDAgMSAxMC4zNzQtLjQyQzUxLjcwMiAxOS4xMTQgNTQgMjkuMjA4IDU0IDQ1LjIwOGMwIDE0LjUyNy0yLjM0MyAyMy44OC03LjAzIDI4LjA1OGE3LjI4IDcuMjggMCAwIDEtMTAuMTY4LS40NjhMMjAuNDA1IDU1LjIyNEgxMmE1IDUgMCAwIDEtNS01di0xM2E1IDUgMCAwIDEgNS01aDguOTg1eiIgZmlsbD0iI0ZGRiIgbWFzaz0idXJsKCNiKSIvPjwvZz48cGF0aCBkPSJNMTA2LjUgMTMuNUw0NC45OTggNzUuMDAyIiBzdHJva2U9IiNGRkYiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+PC9nPjwvc3ZnPg==);background-size:90px auto}.OT_container-audio-blocked[_ngcontent-%COMP%]{cursor:pointer}.OT_container-audio-blocked[_ngcontent-%COMP%]   .OT_mute[_ngcontent-%COMP%], .OT_container-audio-blocked.OT_mini[_ngcontent-%COMP%]   .OT_edge-bar-item[_ngcontent-%COMP%]{display:none}.OT_audio-blocked-indicator.OT_active[_ngcontent-%COMP%]{display:block}.OT_video-unsupported[_ngcontent-%COMP%]{opacity:1;border:none;display:none;position:absolute;background-color:transparent;background-repeat:no-repeat;background-position:center;background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOTciIGhlaWdodD0iOTAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxwYXRoIGQ9Ik03MCAxMkw5LjQ0OCA3Mi41NTIgMCA2MmwzLTQ0TDI5IDBsNDEgMTJ6bTggMmwxIDUyLTI5IDE4LTM1LjUwMi02LjQ5OEw3OCAxNHoiIGlkPSJhIi8+PC9kZWZzPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOCAzKSI+PG1hc2sgaWQ9ImIiIGZpbGw9IiNmZmYiPjx1c2UgeGxpbms6aHJlZj0iI2EiLz48L21hc2s+PHBhdGggZD0iTTkuMTEgMjAuOTY4SDQ4LjFhNSA1IDAgMCAxIDUgNVY1OC4xOGE1IDUgMCAwIDEtNSA1SDkuMTFhNSA1IDAgMCAxLTUtNVYyNS45N2E1IDUgMCAwIDEgNS01em00Ny4wOCAxMy4zOTRjMC0uMzQ1IDUuNDcyLTMuMTU5IDE2LjQxNS04LjQ0M2EzIDMgMCAwIDEgNC4zMDQgMi43MDJ2MjYuODM1YTMgMyAwIDAgMS00LjMwNSAyLjcwMWMtMTAuOTQyLTUuMjg2LTE2LjQxMy04LjEtMTYuNDEzLTguNDQ2VjM0LjM2MnoiIGZpbGw9IiNGRkYiIG1hc2s9InVybCgjYikiLz48L2c+PHBhdGggZD0iTTgxLjUgMTYuNUwxOS45OTggNzguMDAyIiBzdHJva2U9IiNGRkYiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+PC9nPjwvc3ZnPg==);background-size:58px auto;pointer-events:none;top:0;left:0;bottom:0;right:0;margin-top:-30px}.OT_video-unsupported-bar[_ngcontent-%COMP%]{display:none;position:absolute;width:192%;height:192%;top:-96%;left:-96%;border-radius:50%;background-color:rgba(0,0,0,.8)}.OT_video-unsupported-img[_ngcontent-%COMP%]{display:none;position:absolute;top:11%;left:15%;width:70%;opacity:.7;background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOTciIGhlaWdodD0iOTAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxwYXRoIGQ9Ik03MCAxMkw5LjQ0OCA3Mi41NTIgMCA2MmwzLTQ0TDI5IDBsNDEgMTJ6bTggMmwxIDUyLTI5IDE4LTM1LjUwMi02LjQ5OEw3OCAxNHoiIGlkPSJhIi8+PC9kZWZzPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOCAzKSI+PG1hc2sgaWQ9ImIiIGZpbGw9IiNmZmYiPjx1c2UgeGxpbms6aHJlZj0iI2EiLz48L21hc2s+PHBhdGggZD0iTTkuMTEgMjAuOTY4SDQ4LjFhNSA1IDAgMCAxIDUgNVY1OC4xOGE1IDUgMCAwIDEtNSA1SDkuMTFhNSA1IDAgMCAxLTUtNVYyNS45N2E1IDUgMCAwIDEgNS01em00Ny4wOCAxMy4zOTRjMC0uMzQ1IDUuNDcyLTMuMTU5IDE2LjQxNS04LjQ0M2EzIDMgMCAwIDEgNC4zMDQgMi43MDJ2MjYuODM1YTMgMyAwIDAgMS00LjMwNSAyLjcwMWMtMTAuOTQyLTUuMjg2LTE2LjQxMy04LjEtMTYuNDEzLTguNDQ2VjM0LjM2MnoiIGZpbGw9IiNGRkYiIG1hc2s9InVybCgjYikiLz48L2c+PHBhdGggZD0iTTgxLjUgMTYuNUwxOS45OTggNzguMDAyIiBzdHJva2U9IiNGRkYiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+PC9nPjwvc3ZnPg==);background-repeat:no-repeat;background-position:center;background-size:100% auto}.OT_video-unsupported-img[_ngcontent-%COMP%]:before{content:'';display:block;padding-top:93%}.OT_video-unsupported-text[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;text-align:center;height:100%;margin-top:40px}@media only screen and (max-width:600px){#videoRoomNavBar[_ngcontent-%COMP%]{width:100%}}"]}),e}(),bt=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this)).NAME="Angular Library",e}return _createClass(n,[{key:"setTokens",value:function(e){var t;e&&(this.ovSettings.setScreenSharing(this.ovSettings.hasScreenSharing()&&(null===(t=e)||void 0===t?void 0:t.length)>1),_get(_getPrototypeOf(n.prototype),"setTokens",this).call(this,e))}},{key:"getComponentName",value:function(){return this.NAME}}]),n}(function(){function e(){_classCallCheck(this,e),this.theme=ut.DARK,this.ovSettings=new st}return _createClass(e,[{key:"getComponentName",value:function(){}},{key:"getOvSettings",value:function(){return this.ovSettings}},{key:"getSessionName",value:function(){return this.sessionName}},{key:"getOvServerUrl",value:function(){return this.ovServerUrl}},{key:"getOvSecret",value:function(){return this.ovSecret}},{key:"getTheme",value:function(){return this.theme}},{key:"getNickname",value:function(){return this.nickname}},{key:"getTokens",value:function(){return this.tokens}},{key:"getScreenToken",value:function(){return this.tokens[1]}},{key:"getWebcamToken",value:function(){return this.tokens[0]}},{key:"setOvSettings",value:function(e){e&&this.ovSettings.set(e)}},{key:"setSessionName",value:function(e){this.sessionName=e}},{key:"setOvServerUrl",value:function(e){this.ovServerUrl=e}},{key:"setOvSecret",value:function(e){this.ovSecret=e}},{key:"setTheme",value:function(e){Object.values(ut).includes(e)&&(this.theme=e===ut.DARK?ut.DARK:ut.LIGHT)}},{key:"setNickname",value:function(e){this.nickname=e}},{key:"setTokens",value:function(e){this.tokens=e}},{key:"canJoinToSession",value:function(){return this.canOVCallGenerateToken()||this.hasReceivedToken()}},{key:"hasTokens",value:function(){var e;return(null===(e=this.tokens)||void 0===e?void 0:e.length)>0}},{key:"canOVCallGenerateToken",value:function(){return!!(this.sessionName&&this.ovServerUrl&&this.ovSecret&&this.nickname)}},{key:"hasReceivedToken",value:function(){return!!this.tokens&&this.tokens.length>0&&!!this.nickname}}]),e}()),yt=function(){var e=function(){function e(t){_classCallCheck(this,e),this.loggerSrv=t,this.display=!1,this.sessionCreated=new o.o,this.publisherCreated=new o.o,this.error=new o.o,this.joinSession=new o.o,this.leaveSession=new o.o,this.log=this.loggerSrv.get("OpenviduSessionComponent")}return _createClass(e,[{key:"ngOnInit",value:function(){this.angularLibrary=new bt,this.angularLibrary.setOvSettings(this.ovSettings),this.angularLibrary.setSessionName(this.sessionName),this.angularLibrary.setOvServerUrl(this.openviduServerUrl),this.angularLibrary.setOvSecret(this.openviduSecret),this.angularLibrary.setTheme(this.theme),this.angularLibrary.setNickname(this.user),this.angularLibrary.setTokens(this.tokens),this.angularLibrary.canJoinToSession()?this.display=!0:this.log.e("Cannot join to session.")}},{key:"emitSession",value:function(e){var t=this;e.on("sessionDisconnected",(function(e){return t.display=!1})),e.on("connectionCreated",(function(e){setTimeout((function(){var n,i,o;(null===(o=null===(i=null===(n=e.connection)||void 0===n?void 0:n.stream)||void 0===i?void 0:i.streamManager)||void 0===o?void 0:o.remote)||t.videoRoom.checkSizeComponent()}),700)})),this.sessionCreated.emit(e)}},{key:"emitPublisher",value:function(e){this.publisherCreated.emit(e)}},{key:"emitErrorEvent",value:function(e){var t=this;setTimeout((function(){return t.error.emit(e)}),20)}},{key:"getSession",value:function(){return this.log.w("getSession method is DEPRECATED. Please consider to use sessionCreated event"),this.videoRoom.session}},{key:"getLocalUsers",value:function(){return this.videoRoom.localUsers}},{key:"getOpenviduLayout",value:function(){return this.videoRoom.openviduLayout}},{key:"getOpenviduLayoutOptions",value:function(){return this.videoRoom.openviduLayoutOptions}},{key:"emitJoinSessionEvent",value:function(e){this.joinSession.observers.length>0&&this.log.w("joinSession event is DEPRECATED. Please consider to use sessionCreated event"),this.joinSession.emit(e)}},{key:"emitLeaveSessionEvent",value:function(e){this.leaveSession.observers.length>0&&this.log.w("leaveSession event is DEPRECATED. Please consider to use sessionCreated event"),this.leaveSession.emit(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.Qb(tt))},e.\u0275cmp=o.Kb({type:e,selectors:[["opv-session"]],viewQuery:function(e,t){var n;1&e&&o.Rc(Q,!0),2&e&&o.wc(n=o.fc())&&(t.videoRoom=n.first)},inputs:{ovSettings:"ovSettings",sessionName:"sessionName",user:"user",openviduServerUrl:"openviduServerUrl",openviduSecret:"openviduSecret",tokens:"tokens",theme:"theme"},outputs:{sessionCreated:"sessionCreated",publisherCreated:"publisherCreated",error:"error",joinSession:"joinSession",leaveSession:"leaveSession"},decls:1,vars:1,consts:[[3,"externalConfig","_session","_publisher","_error","_leaveSession","_joinSession",4,"ngIf"],[3,"externalConfig","_session","_publisher","_error","_leaveSession","_joinSession"],["videoRoom",""]],template:function(e,t){1&e&&o.Kc(0,K,2,1,"app-video-room",0),2&e&&o.pc("ngIf",t.display)},directives:[g.t,vt],encapsulation:2}),e}(),Ct=function(){var e=function(){function e(t){_classCallCheck(this,e),this.linkifyService=t}return _createClass(e,[{key:"transform",value:function(e){return e?this.linkifyService.linkify(e):e}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.Qb(y.b))},e.\u0275pipe=o.Pb({name:"linkify",type:e,pure:!0}),e}(),Ot=function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"transform",value:function(e){return!e||e.hasChat()}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=o.Pb({name:"hasChat",type:e,pure:!0}),e}(),St=function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"transform",value:function(e){return!e||e.hasAudio()}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=o.Pb({name:"hasAudio",type:e,pure:!0}),e}(),Mt=function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"transform",value:function(e){return!e||e.hasVideo()}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=o.Pb({name:"hasVideo",type:e,pure:!0}),e}(),_t=function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"transform",value:function(e){return!e||e.isAutoPublish()}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=o.Pb({name:"isAutoPublish",type:e,pure:!0}),e}(),xt=function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"transform",value:function(e){return!e||e.hasScreenSharing()}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=o.Pb({name:"hasScreenSharing",type:e,pure:!0}),e}(),kt=function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"transform",value:function(e){return!e||e.hasFullscreen()}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=o.Pb({name:"hasFullscreen",type:e,pure:!0}),e}(),Pt=function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"transform",value:function(e){return!e||e.hasLayoutSpeaking()}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=o.Pb({name:"hasLayoutSpeaking",type:e,pure:!0}),e}(),wt=function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"transform",value:function(e){return!e||e.hasExit()}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=o.Pb({name:"hasExit",type:e,pure:!0}),e}(),Et=function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"transform",value:function(e){var t="";return e.forEach((function(e){t+="\u2022 "+e+"\n"})),t}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=o.Pb({name:"tooltipList",type:e,pure:!0}),e}(),It=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"isErrorState",value:function(e,t){return!!(e&&e.invalid&&(e.dirty||e.touched||t&&t.submitted))}}]),e}(),Tt=function(e){return e.BIG="zoom_in",e.NORMAL="zoom_out",e}({}),At=function(e){return e.BIG="fullscreen",e.NORMAL="fullscreen_exit",e}({}),Rt=function(){var e=function(){function e(t){_classCallCheck(this,e),this.utilsSrv=t,this.videoSizeIcon=Tt.BIG,this.fullscreenIcon=At.BIG,this.nicknameClicked=new o.o,this.replaceScreenTrackClicked=new o.o,this.toggleVideoSizeClicked=new o.o}return _createClass(e,[{key:"sizeChange",value:function(e){var t=window.screen.height,n=window.screen.width,i=window.innerHeight;n!==window.innerWidth&&t!==i&&(this.isFullscreen=!1,this.videoSizeIcon=Tt.BIG)}},{key:"ngOnInit",value:function(){this.matcher=new It}},{key:"toggleVideoSize",value:function(e){var t=this.utilsSrv.getHTMLElementByClassName(this.streamComponent.element.nativeElement,ct.ROOT_CLASS);this.toggleVideoSizeClicked.emit({element:t,connectionId:this._user.getConnectionId(),resetAll:e})}},{key:"toggleFullscreen",value:function(){this.utilsSrv.toggleFullscreen("container-"+this._user.getStreamManager().stream.streamId),this.toggleFullscreenIcon()}},{key:"toggleSound",value:function(){this.mutedSound=!this.mutedSound}},{key:"toggleNicknameForm",value:function(){this._user.isLocal()&&(this.toggleNickname=!this.toggleNickname)}},{key:"eventKeyPress",value:function(e){e&&13===e.keyCode&&this.nicknameFormControl.valid&&(this.nicknameClicked.emit(this.nicknameFormControl.value),this.toggleNicknameForm())}},{key:"replaceScreenTrack",value:function(){this.replaceScreenTrackClicked.emit()}},{key:"checkVideoSizeBigIcon",value:function(e){this.videoSizeIcon=e?Tt.NORMAL:Tt.BIG}},{key:"toggleFullscreenIcon",value:function(){this.fullscreenIcon=this.fullscreenIcon===At.BIG?At.NORMAL:At.BIG}},{key:"videoSizeBig",set:function(e){this.checkVideoSizeBigIcon(e)}},{key:"user",set:function(e){this._user=e,this.nicknameFormControl=new h.g(this._user.getNickname(),[h.G.maxLength(25),h.G.required])}},{key:"nicknameInputElement",set:function(e){setTimeout((function(){var t;null===(t=e)||void 0===t||t.nativeElement.focus()}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.Qb(ht))},e.\u0275cmp=o.Kb({type:e,selectors:[["stream-component"]],viewQuery:function(e,t){var n;1&e&&(o.Rc(H,!0),o.Rc(q,!0,o.P)),2&e&&(o.wc(n=o.fc())&&(t.nicknameInputElement=n.first),o.wc(n=o.fc())&&(t.streamComponent=n.first))},hostBindings:function(e,t){1&e&&o.ec("resize",(function(e){return t.sizeChange(e)}),!1,o.Ac)},inputs:{videoSizeBig:"videoSizeBig",user:"user"},outputs:{nicknameClicked:"nicknameClicked",replaceScreenTrackClicked:"replaceScreenTrackClicked",toggleVideoSizeClicked:"toggleVideoSizeClicked"},decls:1,vars:1,consts:[["class","OT_widget-container",3,"id","dblclick",4,"ngIf"],[1,"OT_widget-container",3,"id","dblclick"],["streamComponent",""],[1,"nickname"],["class","nicknameContainer","selected","",3,"click",4,"ngIf"],["id","dialogNickname",3,"fullscreen",4,"ngIf"],[3,"streamManager","mutedSound","toggleVideoSizeEvent"],[1,"statusIcons"],["id","statusMic",4,"ngIf"],["id","statusCam",4,"ngIf"],[1,"videoButtons"],["mat-icon-button","","id","videoZoomButton",3,"click"],["mat-icon-button","","id","fullscreenButton",3,"click"],["mat-icon-button","","id","volumeButton",3,"click",4,"ngIf"],["mat-icon-button","","id","changeScreenButton",3,"click",4,"ngIf"],["selected","",1,"nicknameContainer",3,"click"],["id","nickname"],[4,"ngIf"],["id","dialogNickname"],["mat-icon-button","","id","closeButton",3,"click"],["matTooltip","Close"],["id","nicknameForm"],["color","primary"],["matInput","","autocomplete","off",3,"placeholder","formControl","errorStateMatcher","keypress"],["nicknameInput",""],["id","statusMic"],["id","statusCam"],["mat-icon-button","","id","volumeButton",3,"click"],["matTooltip","Mute sound",4,"ngIf"],["color","warn","matTooltip","Unmute sound",4,"ngIf"],["matTooltip","Mute sound"],["color","warn","matTooltip","Unmute sound"],["mat-icon-button","","id","changeScreenButton",3,"click"],["matTooltip","Choose screen"]],template:function(e,t){1&e&&o.Kc(0,se,18,13,"div",0),2&e&&o.pc("ngIf",t._user)},directives:function(){return[g.t,Vt,l.b,u.a,d.a,h.I,h.t,h.u,C.c,O.b,h.c,h.s,h.h,C.b]},styles:[".nickname[_ngcontent-%COMP%]{padding:0;position:absolute;z-index:999;border-radius:5px;color:#fff;font-family:Ubuntu,sans-serif}.nicknameContainer[_ngcontent-%COMP%]{background-color:#424242;padding:5px;color:#fff;font-weight:700}#dialogNickname[_ngcontent-%COMP%]{background-color:#0000005e;border-radius:5px}#closeButton[_ngcontent-%COMP%]{position:absolute;top:-3px;right:0;z-index:999}#nicknameForm[_ngcontent-%COMP%]{padding:10px}.fullscreen[_ngcontent-%COMP%]{top:40px}mat-error[_ngcontent-%COMP%]{text-align:center;color:#353535}video[_ngcontent-%COMP%]{-o-object-fit:cover;object-fit:cover;width:100%;height:100%;color:#fff;margin:0;padding:0;border:0;font-size:100%}.statusIcons[_ngcontent-%COMP%]{bottom:0;left:5px;width:40px;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;position:absolute;color:#fff}.statusIcons[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{vertical-align:-webkit-baseline-middle;vertical-align:-moz-middle-with-baseline;font-size:20px}.videoButtons[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:24px}.videoButtons[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]{line-height:0}#camStatus[_ngcontent-%COMP%]{bottom:43px}#statusCam[_ngcontent-%COMP%], #statusMic[_ngcontent-%COMP%]{text-align:center;width:28px;height:28px;border-radius:50%;background:#c71100;margin:5px auto}.videoButtons[_ngcontent-%COMP%]{right:0;position:absolute;bottom:0;z-index:9999999;width:50px;text-align:center}.videoButtons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#000;width:30px;height:30px;margin:1px}.OT_widget-container[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;overflow:hidden}  .mat-focused .mat-form-field-label,   .mat-form-field-appearance-legacy .mat-form-field-label, mat-error[_ngcontent-%COMP%]{color:#cacaca!important}  .mat-form-field-appearance-legacy .mat-form-field-underline,   .mat-form-field.mat-focused .mat-form-field-ripple{background-color:#cacaca!important}input[_ngcontent-%COMP%]{caret-color:#fff!important}"]}),e}(),Vt=function(){var e=function(){function e(){_classCallCheck(this,e),this.toggleVideoSizeEvent=new o.o}return _createClass(e,[{key:"ngAfterViewInit",value:function(){var e=this;setTimeout((function(){e._streamManager&&e._videoElement&&e._streamManager.addVideoElement(e._videoElement.nativeElement)}))}},{key:"enableVideoSizeBig",value:function(){var e=this;setTimeout((function(){e.toggleVideoSizeEvent.emit(!0)}),590)}},{key:"videoElement",set:function(e){this._videoElement=e}},{key:"streamManager",set:function(e){var t=this;setTimeout((function(){t._streamManager=e,t._videoElement&&t._streamManager&&(t._streamManager.stream.typeOfVideo===Je.SCREEN?(t._videoElement.nativeElement.style.objectFit="contain",t._videoElement.nativeElement.style.background="#272727",t.enableVideoSizeBig()):t._videoElement.nativeElement.style.objectFit="cover",t._streamManager.addVideoElement(t._videoElement.nativeElement))}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Kb({type:e,selectors:[["ov-video"]],viewQuery:function(e,t){var n;1&e&&o.Rc(ce,!0),2&e&&o.wc(n=o.fc())&&(t.videoElement=n.first)},inputs:{streamManager:"streamManager",mutedSound:"mutedSound"},outputs:{toggleVideoSizeEvent:"toggleVideoSizeEvent"},decls:2,vars:2,consts:[[3,"muted"],["videoElement",""]],template:function(e,t){1&e&&o.Rb(0,"video",0,1),2&e&&(o.pc("muted",t.mutedSound),o.Db("id",t.streamManager&&t._streamManager.stream?"video-"+t._streamManager.stream.streamId:"video-undefined"))},styles:[".nickname[_ngcontent-%COMP%]{padding:0;position:absolute;z-index:999;border-radius:5px;color:#fff;font-family:Ubuntu,sans-serif}.nicknameContainer[_ngcontent-%COMP%]{background-color:#424242;padding:5px;color:#fff;font-weight:700}#dialogNickname[_ngcontent-%COMP%]{background-color:#0000005e;border-radius:5px}#closeButton[_ngcontent-%COMP%]{position:absolute;top:-3px;right:0;z-index:999}#nicknameForm[_ngcontent-%COMP%]{padding:10px}.fullscreen[_ngcontent-%COMP%]{top:40px}mat-error[_ngcontent-%COMP%]{text-align:center;color:#353535}video[_ngcontent-%COMP%]{-o-object-fit:cover;object-fit:cover;width:100%;height:100%;color:#fff;margin:0;padding:0;border:0;font-size:100%}.statusIcons[_ngcontent-%COMP%]{bottom:0;left:5px;width:40px;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;position:absolute;color:#fff}.statusIcons[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{vertical-align:-webkit-baseline-middle;vertical-align:-moz-middle-with-baseline;font-size:20px}.videoButtons[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:24px}.videoButtons[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]{line-height:0}#camStatus[_ngcontent-%COMP%]{bottom:43px}#statusCam[_ngcontent-%COMP%], #statusMic[_ngcontent-%COMP%]{text-align:center;width:28px;height:28px;border-radius:50%;background:#c71100;margin:5px auto}.videoButtons[_ngcontent-%COMP%]{right:0;position:absolute;bottom:0;z-index:9999999;width:50px;text-align:center}.videoButtons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#000;width:30px;height:30px;margin:1px}.OT_widget-container[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;overflow:hidden}  .mat-focused .mat-form-field-label,   .mat-form-field-appearance-legacy .mat-form-field-label, mat-error[_ngcontent-%COMP%]{color:#cacaca!important}  .mat-form-field-appearance-legacy .mat-form-field-underline,   .mat-form-field.mat-focused .mat-form-field-ripple{background-color:#cacaca!important}input[_ngcontent-%COMP%]{caret-color:#fff!important}"]}),e}(),Lt=function(){var e=function(){function e(t,n){var i=this;_classCallCheck(this,e),this.utilsSrv=t,this.chatService=n,this.micButtonClicked=new o.o,this.camButtonClicked=new o.o,this.screenShareClicked=new o.o,this.layoutButtonClicked=new o.o,this.leaveSessionButtonClicked=new o.o,this.fullscreenIcon=At.BIG,this.logoUrl="https://raw.githubusercontent.com/OpenVidu/openvidu-call/master/openvidu-call-front/src/assets/images/",this.participantsNames=[],this.chatServiceSubscription=this.chatService.messagesUnreadObs.subscribe((function(e){i.newMessagesNum=e}))}return _createClass(e,[{key:"ngOnDestroy",value:function(){this.chatServiceSubscription.unsubscribe()}},{key:"sizeChange",value:function(e){var t=window.screen.height,n=window.screen.width,i=window.innerHeight;n!==window.innerWidth&&t!==i&&(this.fullscreenIcon=At.BIG)}},{key:"ngOnInit",value:function(){this.logoUrl+=this.lightTheme?"openvidu_logo_grey.png":"openvidu_logo.png"}},{key:"toggleMicrophone",value:function(){this.micButtonClicked.emit()}},{key:"toggleCamera",value:function(){this.camButtonClicked.emit()}},{key:"toggleScreenShare",value:function(){this.screenShareClicked.emit()}},{key:"toggleSpeakerLayout",value:function(){this.layoutButtonClicked.emit()}},{key:"leaveSession",value:function(){this.leaveSessionButtonClicked.emit()}},{key:"toggleChat",value:function(){this.chatService.toggleChat()}},{key:"toggleFullscreen",value:function(){this.utilsSrv.toggleFullscreen("videoRoomNavBar"),this.fullscreenIcon=this.fullscreenIcon===At.BIG?At.NORMAL:At.BIG}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.Qb(ht),o.Qb(rt))},e.\u0275cmp=o.Kb({type:e,selectors:[["app-toolbar"]],hostBindings:function(e,t){1&e&&o.ec("resize",(function(e){return t.sizeChange(e)}),!1,o.Ac)},inputs:{lightTheme:"lightTheme",mySessionId:"mySessionId",compact:"compact",showNotification:"showNotification",ovSettings:"ovSettings",isWebcamVideoEnabled:"isWebcamVideoEnabled",isWebcamAudioEnabled:"isWebcamAudioEnabled",isScreenEnabled:"isScreenEnabled",isAutoLayout:"isAutoLayout",isConnectionLost:"isConnectionLost",hasVideoDevices:"hasVideoDevices",hasAudioDevices:"hasAudioDevices"},outputs:{micButtonClicked:"micButtonClicked",camButtonClicked:"camButtonClicked",screenShareClicked:"screenShareClicked",layoutButtonClicked:"layoutButtonClicked",leaveSessionButtonClicked:"leaveSessionButtonClicked"},decls:20,vars:27,consts:[["id","header","role","heading","fxLayout","","fxLayoutAlign","center","fxLayoutGap","10px",1,"container"],["fxFlex","20%"],[3,"lightTheme","sessionId","compact","logoUrl"],["fxFlex","70%","fxFlexOrder","2"],["align","center",1,"buttonsContainer"],["id","navMicrophoneButton","mat-icon-button","",3,"disabled","click",4,"ngIf"],["id","navCameraButton","mat-icon-button","",3,"disabled","click",4,"ngIf"],["id","navScreenButton","mat-icon-button","",3,"disabled","click",4,"ngIf"],["mat-icon-button","",3,"disabled","click",4,"ngIf"],["mat-icon-button","","id","navLeaveButton",3,"click",4,"ngIf"],["fxFlex","10%","fxFlexOrder","3","align","end"],["id","navMicrophoneButton","mat-icon-button","",3,"disabled","click"],["matTooltip","Mute your audio",4,"ngIf"],["color","warn","matTooltip","Unmute your audio",4,"ngIf"],["matTooltip","Mute your audio"],["color","warn","matTooltip","Unmute your audio"],["id","navCameraButton","mat-icon-button","",3,"disabled","click"],["matTooltip","Mute your cam",4,"ngIf"],["color","warn","matTooltip","Unmute your cam",4,"ngIf"],["matTooltip","Mute your cam"],["color","warn","matTooltip","Unmute your cam"],["id","navScreenButton","mat-icon-button","",3,"disabled","click"],["matTooltip","Screen share","color","warn",4,"ngIf"],["matTooltip","Stop sharing",4,"ngIf"],["matTooltip","Screen share","color","warn"],["matTooltip","Stop sharing"],["mat-icon-button","",3,"disabled","click"],["matTooltip","Fullscreen"],["matTooltip","Enable speaker layout","color","warn",4,"ngIf"],["matTooltip","Disable speaker layout",4,"ngIf"],["matTooltip","Enable speaker layout","color","warn"],["matTooltip","Disable speaker layout"],["mat-icon-button","","id","navLeaveButton",3,"click"],["color","warn","matTooltip","Leave the session"],["matBadgePosition","above before","matTooltip","Chat","matBadgeColor","accent",3,"matBadge","matBadgeHidden"]],template:function(e,t){1&e&&(o.Wb(0,"mat-toolbar",0),o.Wb(1,"div",1),o.Rb(2,"app-toolbar-logo",2),o.Vb(),o.Wb(3,"div",3),o.Wb(4,"div",4),o.Kc(5,de,3,3,"button",5),o.jc(6,"hasAudio"),o.Kc(7,pe,3,3,"button",6),o.jc(8,"hasVideo"),o.Kc(9,ve,3,3,"button",7),o.jc(10,"hasScreenSharing"),o.Kc(11,be,3,2,"button",8),o.jc(12,"hasFullscreen"),o.Kc(13,Oe,3,3,"button",8),o.jc(14,"hasLayoutSpeaking"),o.Kc(15,Se,3,0,"button",9),o.jc(16,"hasExit"),o.Vb(),o.Vb(),o.Wb(17,"div",10),o.Kc(18,Me,3,3,"button",8),o.jc(19,"hasChat"),o.Vb(),o.Vb()),2&e&&(o.Gb("headerLight",t.lightTheme),o.Cb(2),o.pc("lightTheme",t.lightTheme)("sessionId",t.mySessionId)("compact",t.compact)("logoUrl",t.logoUrl),o.Cb(3),o.pc("ngIf",t.hasAudioDevices&&o.kc(6,13,t.ovSettings)),o.Cb(2),o.pc("ngIf",!t.ovSettings||t.hasVideoDevices&&o.kc(8,15,t.ovSettings)),o.Cb(2),o.pc("ngIf",o.kc(10,17,t.ovSettings)),o.Cb(2),o.pc("ngIf",o.kc(12,19,t.ovSettings)),o.Cb(2),o.pc("ngIf",o.kc(14,21,t.ovSettings)),o.Cb(2),o.pc("ngIf",o.kc(16,23,t.ovSettings)),o.Cb(3),o.pc("ngIf",o.kc(19,25,t.ovSettings)))},directives:function(){return[S.a,M.d,M.c,M.e,M.a,Nt,M.b,g.t,l.b,u.a,d.a,_.a]},pipes:function(){return[St,Mt,xt,kt,Pt,wt,Ot]},styles:["#header[_ngcontent-%COMP%]{color:#fff;height:40px;background-color:#333;padding:0 14px 0 0;position:absolute;top:0;left:0;z-index:999999;min-width:400px!important}.buttonsContainer[_ngcontent-%COMP%]{position:absolute;left:0;right:0}.headerLight[_ngcontent-%COMP%]{color:#706969!important;background-color:#eee!important}#navSessionInfo[_ngcontent-%COMP%]{height:100%;display:inline-flex}#navChatButton[_ngcontent-%COMP%]   .mat-badge-medium.mat-badge-overlap.mat-badge-before[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{left:-17px}#navChatButton[_ngcontent-%COMP%]   .mat-badge-medium.mat-badge-above[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{top:-6px}.mat-icon-button[disabled][_ngcontent-%COMP%]{color:#fff}.titleContent[_ngcontent-%COMP%]{font-family:Ubuntu,sans-serif;max-width:100px;margin:5px -18px;padding:0 15px;font-size:16px;overflow:hidden;text-overflow:ellipsis}.titleContentDark[_ngcontent-%COMP%]{background-color:#494949;color:#fff}.titleContentLight[_ngcontent-%COMP%]{background-color:#dfdfdf!important;color:#000}#header_img[_ngcontent-%COMP%]{max-width:135px;margin-right:10px;margin-top:-3px}#point[_ngcontent-%COMP%]{width:10px;height:10px;position:absolute;top:12px;right:33px;border-radius:50%;background-color:#ffa600;border:1px solid #000;z-index:99999}.pointLight[_ngcontent-%COMP%]{border:1px solid #fff!important}.tooltipList[_ngcontent-%COMP%]{white-space:pre}@media (max-width:600px){#navSessionInfo[_ngcontent-%COMP%]{display:none}}"]}),e}(),Nt=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Kb({type:e,selectors:[["app-toolbar-logo"]],inputs:{lightTheme:"lightTheme",compact:"compact",sessionId:"sessionId",logoUrl:"logoUrl"},decls:4,vars:2,consts:[["id","navSessionInfo"],["id","header_img","alt","OpenVidu Logo",3,"src"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],["id","session-title"]],template:function(e,t){1&e&&(o.Wb(0,"div",0),o.Wb(1,"a"),o.Rb(2,"img",1),o.Vb(),o.Kc(3,xe,3,5,"div",2),o.Vb()),2&e&&(o.Cb(2),o.pc("src",t.logoUrl,o.Ec),o.Cb(1),o.pc("ngIf",!t.compact&&t.sessionId))},directives:[g.t,g.q,p.a],styles:["#header[_ngcontent-%COMP%]{color:#fff;height:40px;background-color:#333;padding:0 14px 0 0;position:absolute;top:0;left:0;z-index:999999;min-width:400px!important}.buttonsContainer[_ngcontent-%COMP%]{position:absolute;left:0;right:0}.headerLight[_ngcontent-%COMP%]{color:#706969!important;background-color:#eee!important}#navSessionInfo[_ngcontent-%COMP%]{height:100%;display:inline-flex}#navChatButton[_ngcontent-%COMP%]   .mat-badge-medium.mat-badge-overlap.mat-badge-before[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{left:-17px}#navChatButton[_ngcontent-%COMP%]   .mat-badge-medium.mat-badge-above[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{top:-6px}.mat-icon-button[disabled][_ngcontent-%COMP%]{color:#fff}.titleContent[_ngcontent-%COMP%]{font-family:Ubuntu,sans-serif;max-width:100px;margin:5px -18px;padding:0 15px;font-size:16px;overflow:hidden;text-overflow:ellipsis}.titleContentDark[_ngcontent-%COMP%]{background-color:#494949;color:#fff}.titleContentLight[_ngcontent-%COMP%]{background-color:#dfdfdf!important;color:#000}#header_img[_ngcontent-%COMP%]{max-width:135px;margin-right:10px;margin-top:-3px}#point[_ngcontent-%COMP%]{width:10px;height:10px;position:absolute;top:12px;right:33px;border-radius:50%;background-color:#ffa600;border:1px solid #000;z-index:99999}.pointLight[_ngcontent-%COMP%]{border:1px solid #fff!important}.tooltipList[_ngcontent-%COMP%]{white-space:pre}@media (max-width:600px){#navSessionInfo[_ngcontent-%COMP%]{display:none}}"]}),e}(),Dt=function(){var e=function(){function e(){_classCallCheck(this,e),this.participantsNames=[]}return _createClass(e,[{key:"sizeChange",value:function(e){}},{key:"ngOnInit",value:function(){}},{key:"participants",set:function(e){var t=this;this.participantsNames=[],e.forEach((function(e){e.isCamera()&&t.participantsNames.push(e.getNickname())})),this.participantsNames=_toConsumableArray(this.participantsNames)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Kb({type:e,selectors:[["app-footer"]],hostBindings:function(e,t){1&e&&o.ec("resize",(function(e){return t.sizeChange(e)}),!1,o.Ac)},inputs:{participants:"participants",lightTheme:"lightTheme"},decls:9,vars:6,consts:[["fxLayout","","fxLayout.xs","row","fxLayoutAlign","center center","fxLayoutGap","2px","id","footer","role","heading",1,"container"],[1,"participantsButtonContainer"],["mat-icon-button","","matTooltip","Remote participants",1,""],["matBadgeSize","small","matBadgePosition","above after","matBadgeColor","accent",3,"matBadge"],["fxFlex","calc(100% - 40px)","fxFlexOrder","2"],[1,"participantNames"]],template:function(e,t){1&e&&(o.Wb(0,"mat-toolbar",0),o.Wb(1,"div",1),o.Wb(2,"button",2),o.Wb(3,"mat-icon",3),o.Mc(4,"people"),o.Vb(),o.Vb(),o.Vb(),o.Wb(5,"div",4),o.Wb(6,"span",5),o.Mc(7),o.jc(8,"tooltipList"),o.Vb(),o.Vb(),o.Vb()),2&e&&(o.Gb("headerLight",t.lightTheme),o.Cb(3),o.qc("matBadge",null==t.participantsNames?null:t.participantsNames.length),o.Cb(4),o.Nc(o.kc(8,4,t.participantsNames)))},directives:[S.a,M.d,M.c,M.e,l.b,d.a,u.a,_.a,M.a,M.b],pipes:[Et],styles:["#footer[_ngcontent-%COMP%]{color:#fff;height:25px;background-color:#333;padding:0 14px 0 0;position:absolute;bottom:0;left:0;z-index:999999;min-width:400px!important}.footerLight[_ngcontent-%COMP%]{color:#706969!important;background-color:#eee!important}.participantNames[_ngcontent-%COMP%]{font-size:small;height:inherit}.participantsButton[_ngcontent-%COMP%]{position:absolute;left:5px;top:none;height:-webkit-fill-available;height:-moz-available}.participantsButtonContainer[_ngcontent-%COMP%]{height:-webkit-fill-available;height:-moz-available}.mat-icon-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], .participantsButtonContainer[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{line-height:18px}"]}),e}(),jt=function(){var e=function(){function e(t,n,i,r,a,s){_classCallCheck(this,e),this.route=t,this.utilsSrv=n,this.oVSessionService=i,this.oVDevicesService=r,this.loggerSrv=a,this.storageSrv=s,this.USER_NICKNAME="openviduCallNickname",this.join=new o.o,this.leaveSession=new o.o,this.publisherCreated=new o.o,this.isVideoActive=!0,this.isAudioActive=!0,this.localUsers=[],this.nicknameFormControl=new h.g("",[h.G.maxLength(25),h.G.required]),this.matcher=new It,this.log=this.loggerSrv.get("RoomConfigComponent")}return _createClass(e,[{key:"beforeunloadHandler",value:function(){this.close()}},{key:"ngOnInit",value:function(){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.subscribeToUsers(),this.setNicknameForm(),this.setRandomAvatar(),this.columns=window.innerWidth>900?2:1,this.setSessionName(),e.next=7,this.oVDevicesService.initDevices();case 7:this.setDevicesInfo(),this.initwebcamPublisher();case 9:case"end":return e.stop()}}),e,this)})))}},{key:"ngOnDestroy",value:function(){this.oVUsersSubscription.unsubscribe()}},{key:"onCameraSelected",value:function(e){var t;return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var i,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(i=null===(t=e)||void 0===t?void 0:t.value)){n.next=9;break}if(!this.oVDevicesService.needUpdateVideoTrack(i)){n.next=8;break}return o=this.oVDevicesService.cameraNeedsMirror(i),n.next=6,this.oVSessionService.replaceTrack(i,null,o);case 6:this.oVDevicesService.setCamSelected(i),this.camSelected=this.oVDevicesService.getCamSelected();case 8:return n.abrupt("return",(this.oVSessionService.publishVideo(!0),void(this.isVideoActive=!0)));case 9:this.oVSessionService.publishVideo(!1),this.isVideoActive=!1;case 10:case"end":return n.stop()}}),n,this)})))}},{key:"onMicrophoneSelected",value:function(e){var t;return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var i,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(i=null===(t=e)||void 0===t?void 0:t.value)){n.next=10;break}if(!this.oVDevicesService.needUpdateAudioTrack(i)){n.next=9;break}return console.log(this.camSelected),o=this.oVDevicesService.cameraNeedsMirror(this.camSelected.device),n.next=7,this.oVSessionService.replaceTrack(null,i,o);case 7:this.oVDevicesService.setMicSelected(i),this.micSelected=this.oVDevicesService.getMicSelected();case 9:return n.abrupt("return",(this.publishAudio(!0),void(this.isAudioActive=!0)));case 10:this.publishAudio(!1),this.isAudioActive=!1;case 11:case"end":return n.stop()}}),n,this)})))}},{key:"toggleCam",value:function(){this.isVideoActive=!this.isVideoActive,this.oVSessionService.publishVideo(this.isVideoActive),this.oVSessionService.areBothConnected()?(this.oVSessionService.disableWebcamUser(),this.oVSessionService.publishScreenAudio(this.isAudioActive)):this.oVSessionService.isOnlyScreenConnected()&&this.oVSessionService.enableWebcamUser()}},{key:"toggleScreenShare",value:function(){var e=this;if(this.oVSessionService.areBothConnected())this.oVSessionService.disableScreenUser();else{if(this.oVSessionService.isOnlyWebcamConnected()){var t=this.initScreenPublisher();return t.on("accessAllowed",(function(n){t.stream.getMediaStream().getVideoTracks()[0].addEventListener("ended",(function(){e.log.d("Clicked native stop button. Stopping screen sharing"),e.toggleScreenShare()})),e.oVSessionService.enableScreenUser(t),e.oVSessionService.hasWebcamVideoActive()||e.oVSessionService.disableWebcamUser()})),void t.on("accessDenied",(function(t){e.log.w("ScreenShare: Access Denied")}))}this.oVSessionService.enableWebcamUser(),this.oVSessionService.disableScreenUser()}}},{key:"toggleMic",value:function(){this.isAudioActive=!this.isAudioActive,this.publishAudio(this.isAudioActive)}},{key:"takePhoto",value:function(){this.oVSessionService.setWebcamAvatar(),this.videoAvatar=this.oVSessionService.getWebCamAvatar(),this.oVSessionService.setAvatar(et.VIDEO)}},{key:"setNicknameForm",value:function(){if(this.externalConfig)this.nicknameFormControl.setValue(this.externalConfig.getNickname());else{var e=this.storageSrv.get(this.USER_NICKNAME)||this.utilsSrv.generateNickname();this.nicknameFormControl.setValue(e)}}},{key:"eventKeyPress",value:function(e){e&&13===e.keyCode&&this.nicknameFormControl.valid&&this.joinSession()}},{key:"onResize",value:function(e){this.columns=e.target.innerWidth>900?2:1}},{key:"joinSession",value:function(){this.nicknameFormControl.valid&&(this.oVSessionService.setWebcamName(this.nicknameFormControl.value),this.storageSrv.set(this.USER_NICKNAME,this.nicknameFormControl.value),this.join.emit()),this.scrollToBottom()}},{key:"close",value:function(){this.leaveSession.emit(),this.showConfigCard=!1}},{key:"setAvatar",value:function(e){var t=e===et.VIDEO?et.VIDEO:et.RANDOM;(t===et.RANDOM&&this.randomAvatar||t===et.VIDEO&&this.videoAvatar)&&(this.avatarSelected=t)}},{key:"setDevicesInfo",value:function(){this.hasVideoDevices=this.oVDevicesService.hasVideoDeviceAvailable(),this.hasAudioDevices=this.oVDevicesService.hasAudioDeviceAvailable(),this.microphones=this.oVDevicesService.getMicrophones(),this.cameras=this.oVDevicesService.getCameras(),this.camSelected=this.oVDevicesService.getCamSelected(),this.micSelected=this.oVDevicesService.getMicSelected()}},{key:"setSessionName",value:function(){var e=this;this.route.params.subscribe((function(t){e.mySessionId=e.externalConfig?e.externalConfig.getSessionName():t.roomName,e.oVSessionService.setSessionId(e.mySessionId)}))}},{key:"setRandomAvatar",value:function(){this.randomAvatar=this.utilsSrv.getOpenViduAvatar(),this.oVSessionService.setAvatar(et.RANDOM,this.randomAvatar),this.avatarSelected=et.RANDOM}},{key:"scrollToBottom",value:function(){try{this.bodyCard.nativeElement.scrollTop=this.bodyCard.nativeElement.scrollHeight}catch(e){}}},{key:"initScreenPublisher",value:function(){var e=Xe.SCREEN,t=this.oVSessionService.isWebCamEnabled()&&this.oVSessionService.hasWebcamVideoActive(),n=this.oVSessionService.createProperties(e,void 0,!0,!t&&this.isAudioActive,!1);try{return this.oVSessionService.initScreenPublisher(void 0,n)}catch(i){this.log.e(i),this.utilsSrv.handlerScreenShareError(i)}}},{key:"publishAudio",value:function(e){this.oVSessionService.isWebCamEnabled()?this.oVSessionService.publishWebcamAudio(e):this.oVSessionService.publishScreenAudio(e)}},{key:"subscribeToUsers",value:function(){var e=this;this.oVUsersSubscription=this.oVSessionService.OVUsers.subscribe((function(t){e.localUsers=t}))}},{key:"initwebcamPublisher",value:function(){var e,t,n=(null===(e=this.micSelected)||void 0===e?void 0:e.device)||void 0,i=(null===(t=this.camSelected)||void 0===t?void 0:t.device)||void 0,o=this.oVSessionService.createProperties(!!this.hasVideoDevices&&i,!!this.hasAudioDevices&&n,!!this.hasVideoDevices&&this.isVideoActive,!!this.hasAudioDevices&&this.isAudioActive,this.camSelected&&this.camSelected.type===dt.FRONT),r=this.oVSessionService.initCamPublisher(void 0,o);this.handlePublisherSuccess(r),this.handlePublisherError(r)}},{key:"emitPublisher",value:function(e){this.publisherCreated.emit(e)}},{key:"handlePublisherSuccess",value:function(e){var t=this;e.once("accessAllowed",(function(){return Object(i.a)(t,void 0,void 0,regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.oVDevicesService.areEmptyLabels()){t.next=8;break}return t.next=3,this.oVDevicesService.initDevices();case 3:if(!this.hasAudioDevices){t.next=6;break}n=e.stream.getMediaStream().getAudioTracks()[0].label,this.oVDevicesService.setMicSelected(n);case 6:this.hasVideoDevices&&(i=e.stream.getMediaStream().getVideoTracks()[0].label,this.oVDevicesService.setCamSelected(i)),this.setDevicesInfo();case 8:this.emitPublisher(e),this.ovSettings.isAutoPublish()?this.joinSession():this.showConfigCard=!0;case 9:case"end":return t.stop()}}),t,this)})))}))}},{key:"handlePublisherError",value:function(e){var t=this;e.once("accessDenied",(function(e){var n;"DEVICE_ACCESS_DENIED"===e.name&&(n="Access to media devices was not allowed."),"NO_INPUT_SOURCE_SET"===e.name&&(n="No video or audio devices have been found. Please, connect at least one."),t.utilsSrv.showErrorMessage(e.name.replace(/_/g," "),n,!0),t.log.e(e.message)}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.Qb(v.a),o.Qb(ht),o.Qb(nt),o.Qb(ft),o.Qb(tt),o.Qb(pt))},e.\u0275cmp=o.Kb({type:e,selectors:[["app-room-config"]],viewQuery:function(e,t){var n;1&e&&o.Rc(ke,!0),2&e&&o.wc(n=o.fc())&&(t.bodyCard=n.first)},hostBindings:function(e,t){1&e&&o.ec("beforeunload",(function(){return t.beforeunloadHandler()}),!1,o.Ac)},inputs:{externalConfig:"externalConfig",ovSettings:"ovSettings"},outputs:{join:"join",leaveSession:"leaveSession",publisherCreated:"publisherCreated"},decls:3,vars:6,consts:[["id","roomConfig",3,"ngStyle"],["class","modal",4,"ngIf"],[1,"modal"],[1,"modal-dialog","modal-xl"],[1,"modal-content","cardContainer"],[1,"modal-header","cardHeader"],[1,"headerLogo"],["id","header_img","alt","OpenVidu Logo","src","https://raw.githubusercontent.com/OpenVidu/openvidu-call/master/openvidu-call-front/src/assets/images/openvidu_logo_grey.png"],[1,"headerTitle"],["mat-mini-fab","","id","closeButton",1,"closeButton",3,"click"],["color","warn","matTooltip","Close"],[1,"modal-body"],["bodyCard",""],[1,"row","align-items-center"],[1,"col-sm-6","col-md-6","col-lg-6","leftSection"],[1,"videoContainer"],[4,"ngFor","ngForOf"],[1,"avatarButton"],["mat-stroked-button","",3,"click"],["matTooltip","Take Photo"],[2,"margin-left","5px"],[1,"col-sm-6","col-md-6","col-lg-6","rightSection"],[1,"avatarContainer"],["fxLayout","row","fxFill","","id","avatarSection",4,"ngIf"],["fxLayout","row","fxFill","","id","devicesSection"],["fxLayout","","fxFlex",""],["fxFlex","20","fxLayoutAlign","center center",1,"one"],["mat-mini-fab","",1,"deviceButton",3,"click"],["matTooltip","Nickname"],["fxFlex","80","fxLayoutAlign","center center",1,"two"],["id","nicknameForm",1,"alternate-theme"],["matInput","","placeholder","Nickname","autocomplete","off",3,"formControl","errorStateMatcher","keypress"],[4,"ngIf"],["fxLayout","row","fxFill","","id","devicesSection",4,"ngIf"],[1,"modal-footer",2,"justify-content","center"],["mat-flat-button","","color","accent","form","nicknameForm","id","joinButton",3,"click"],[3,"streamManager","className",4,"ngIf"],["class","cameraMessageContainer",4,"ngIf"],[3,"streamManager","className"],[1,"cameraMessageContainer"],["fxLayout","row","fxFill","","id","avatarSection"],["fxFlex","100","fxLayoutAlign","center center",1,""],["id","avatarContainer",3,"click"],["id","imgText",4,"ngIf"],["id","avatarImg",3,"src",4,"ngIf"],["id","imgText","color","accent",3,"diameter",4,"ngIf"],["id","imgText"],["id","avatarImg",3,"src"],["id","imgText","color","accent",3,"diameter"],["mat-mini-fab","","id","configCardMicrophoneButton",1,"deviceButton",3,"click"],["matTooltip","Microphone Enabled",4,"ngIf"],["color","warn","matTooltip","Microphone Disabled",4,"ngIf"],[1,"alternate-theme"],["placeholder","Microphone Options",3,"ngModel","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["matTooltip","Microphone Enabled"],["color","warn","matTooltip","Microphone Disabled"],[3,"value"],["mat-mini-fab","","id","configCardCameraButton",1,"deviceButton",3,"click"],["matTooltip","Camera Enabled",4,"ngIf"],["color","warn","matTooltip","Camera Disabled",4,"ngIf"],["placeholder","Camera Options",3,"ngModel","selectionChange"],["matTooltip","Camera Enabled"],["color","warn","matTooltip","Camera Disabled"],["mat-mini-fab","","id","configCardScreenButton",1,"deviceButton",3,"click"],["matTooltip","Screen Share Enabled",4,"ngIf"],["color","warn","matTooltip","Screen Share Disabled",4,"ngIf"],["matInput","","disabled","","placeholder","Screen",3,"ngModel"],["matTooltip","Screen Share Enabled"],["color","warn","matTooltip","Screen Share Disabled"]],template:function(e,t){1&e&&(o.Wb(0,"div",0),o.jc(1,"isAutoPublish"),o.Kc(2,qe,49,16,"div",1),o.Vb()),2&e&&(o.pc("ngStyle",o.tc(4,Ye,o.kc(1,2,t.ovSettings)?"none":"block")),o.Cb(2),o.pc("ngIf",t.showConfigCard))},directives:[g.w,p.b,g.t,l.b,u.a,d.a,g.s,M.d,M.f,M.a,M.c,h.I,h.t,h.u,C.c,O.b,h.c,h.s,h.h,Vt,x.c,C.b,k.a,h.v,P.n],pipes:[_t,St,Mt,xt],styles:[".cardHeader[_ngcontent-%COMP%]{background-color:#ccc;border-radius:14px 14px 0 0;text-align:center;height:50px}.headerLogo[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:inherit}.headerTitle[_ngcontent-%COMP%]{font-size:large;margin:auto}.videoContainer[_ngcontent-%COMP%]{width:100%;height:calc(100% - 50px);text-align:center;margin:auto}.avatarButton[_ngcontent-%COMP%]{text-align:center;margin-top:10px}.videoContainer[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline}.ovVideoSmall[_ngcontent-%COMP%]{position:absolute;width:30%;left:15px;bottom:46px}.cameraMessageContainer[_ngcontent-%COMP%]{height:100%;width:100%;text-align:center;border:2px solid;font-size:large;display:table}.cameraMessageContainer[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle}.deviceButton[_ngcontent-%COMP%]{box-shadow:none;background-color:#f5f5f5}.rightSection[_ngcontent-%COMP%]{padding-left:0!important;text-align:center}.avatarContainer[_ngcontent-%COMP%]{background-color:#f5f5f5;height:40px;text-align:center;display:flex}.avatarContainer[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:auto}.closeButton[_ngcontent-%COMP%]{position:absolute;top:5px;right:7px;box-shadow:none;background-color:transparent}#roomConfig[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%}#header_img[_ngcontent-%COMP%]{max-width:150px}#sessionInfo[_ngcontent-%COMP%]{margin-top:0}#joinButton[_ngcontent-%COMP%]{margin:15px;width:80%}#photoButton[_ngcontent-%COMP%]{margin:10px;text-align:center}#avatarContainer[_ngcontent-%COMP%]{border:1px solid #b6b6b6;width:100px;height:100px;margin:10px;position:relative;cursor:pointer;display:inline-block}#devicesSection[_ngcontent-%COMP%]{margin:15px 0}#avatarSection[_ngcontent-%COMP%], #devicesSection[_ngcontent-%COMP%]{height:-webkit-fit-content!important;height:-moz-fit-content!important;height:fit-content!important;min-height:auto!important}#imgText[_ngcontent-%COMP%]{display:table}#avatarImg[_ngcontent-%COMP%], #imgText[_ngcontent-%COMP%]{text-align:center;position:absolute;margin:auto;top:25%;left:0;right:0;bottom:25%}#avatarImg[_ngcontent-%COMP%]{height:83%;width:83%}#avatarContainer[_ngcontent-%COMP%], #avatarImg[_ngcontent-%COMP%]{border-radius:25%}#optionsContent[_ngcontent-%COMP%]{position:initial}#nicknameForm[_ngcontent-%COMP%], mat-form-field[_ngcontent-%COMP%]{width:100%}mat-card[_ngcontent-%COMP%]{max-width:85%!important;position:absolute;top:0;bottom:0;left:0;right:0;max-height:90%;margin:auto;padding:20px;overflow:auto;border:2px solid #fff;border-right:4px solid #fff}@media only screen and (max-width:959px){mat-card[_ngcontent-%COMP%]{max-width:80%!important;max-height:80%!important}}  .mat-option-text{color:#000!important}  .mat-slider-thumb{visibility:hidden}  .mat-slider-vertical .mat-slider-track-background,   .mat-slider-vertical .mat-slider-track-fill,   .mat-slider-vertical .mat-slider-track-wrapper{width:10px!important}[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#b8afaf;border-radius:4px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#888}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#e1e1e1;border-radius:4px}*[_ngcontent-%COMP%], [_ngcontent-%COMP%]:after, [_ngcontent-%COMP%]:before{box-sizing:border-box}.container[_ngcontent-%COMP%]{padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media (min-width:768px){.container[_ngcontent-%COMP%]{width:750px}}@media (min-width:992px){.container[_ngcontent-%COMP%]{width:970px}}@media (min-width:1200px){.container[_ngcontent-%COMP%]{width:1170px}}.container-fluid[_ngcontent-%COMP%]{padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}.row[_ngcontent-%COMP%]{margin-right:-15px;margin-left:-15px}.row-no-gutters[_ngcontent-%COMP%]{margin-right:0;margin-left:0}.row-no-gutters[_ngcontent-%COMP%]   [class*=col-][_ngcontent-%COMP%]{padding-right:0;padding-left:0}.col-lg-1[_ngcontent-%COMP%], .col-lg-10[_ngcontent-%COMP%], .col-lg-11[_ngcontent-%COMP%], .col-lg-12[_ngcontent-%COMP%], .col-lg-2[_ngcontent-%COMP%], .col-lg-3[_ngcontent-%COMP%], .col-lg-4[_ngcontent-%COMP%], .col-lg-5[_ngcontent-%COMP%], .col-lg-6[_ngcontent-%COMP%], .col-lg-7[_ngcontent-%COMP%], .col-lg-8[_ngcontent-%COMP%], .col-lg-9[_ngcontent-%COMP%], .col-md-1[_ngcontent-%COMP%], .col-md-10[_ngcontent-%COMP%], .col-md-11[_ngcontent-%COMP%], .col-md-12[_ngcontent-%COMP%], .col-md-2[_ngcontent-%COMP%], .col-md-3[_ngcontent-%COMP%], .col-md-4[_ngcontent-%COMP%], .col-md-5[_ngcontent-%COMP%], .col-md-6[_ngcontent-%COMP%], .col-md-7[_ngcontent-%COMP%], .col-md-8[_ngcontent-%COMP%], .col-md-9[_ngcontent-%COMP%], .col-sm-1[_ngcontent-%COMP%], .col-sm-10[_ngcontent-%COMP%], .col-sm-11[_ngcontent-%COMP%], .col-sm-12[_ngcontent-%COMP%], .col-sm-2[_ngcontent-%COMP%], .col-sm-3[_ngcontent-%COMP%], .col-sm-4[_ngcontent-%COMP%], .col-sm-5[_ngcontent-%COMP%], .col-sm-6[_ngcontent-%COMP%], .col-sm-7[_ngcontent-%COMP%], .col-sm-8[_ngcontent-%COMP%], .col-sm-9[_ngcontent-%COMP%], .col-xs-1[_ngcontent-%COMP%], .col-xs-10[_ngcontent-%COMP%], .col-xs-11[_ngcontent-%COMP%], .col-xs-12[_ngcontent-%COMP%], .col-xs-2[_ngcontent-%COMP%], .col-xs-3[_ngcontent-%COMP%], .col-xs-4[_ngcontent-%COMP%], .col-xs-5[_ngcontent-%COMP%], .col-xs-6[_ngcontent-%COMP%], .col-xs-7[_ngcontent-%COMP%], .col-xs-8[_ngcontent-%COMP%], .col-xs-9[_ngcontent-%COMP%]{position:relative;min-height:1px;padding-right:15px;padding-left:15px}.col-xs-1[_ngcontent-%COMP%], .col-xs-10[_ngcontent-%COMP%], .col-xs-11[_ngcontent-%COMP%], .col-xs-12[_ngcontent-%COMP%], .col-xs-2[_ngcontent-%COMP%], .col-xs-3[_ngcontent-%COMP%], .col-xs-4[_ngcontent-%COMP%], .col-xs-5[_ngcontent-%COMP%], .col-xs-6[_ngcontent-%COMP%], .col-xs-7[_ngcontent-%COMP%], .col-xs-8[_ngcontent-%COMP%], .col-xs-9[_ngcontent-%COMP%]{float:left}.col-xs-12[_ngcontent-%COMP%]{width:100%}.col-xs-11[_ngcontent-%COMP%]{width:91.66666667%}.col-xs-10[_ngcontent-%COMP%]{width:83.33333333%}.col-xs-9[_ngcontent-%COMP%]{width:75%}.col-xs-8[_ngcontent-%COMP%]{width:66.66666667%}.col-xs-7[_ngcontent-%COMP%]{width:58.33333333%}.col-xs-6[_ngcontent-%COMP%]{width:50%}.col-xs-5[_ngcontent-%COMP%]{width:41.66666667%}.col-xs-4[_ngcontent-%COMP%]{width:33.33333333%}.col-xs-3[_ngcontent-%COMP%]{width:25%}.col-xs-2[_ngcontent-%COMP%]{width:16.66666667%}.col-xs-1[_ngcontent-%COMP%]{width:8.33333333%}.col-xs-pull-12[_ngcontent-%COMP%]{right:100%}.col-xs-pull-11[_ngcontent-%COMP%]{right:91.66666667%}.col-xs-pull-10[_ngcontent-%COMP%]{right:83.33333333%}.col-xs-pull-9[_ngcontent-%COMP%]{right:75%}.col-xs-pull-8[_ngcontent-%COMP%]{right:66.66666667%}.col-xs-pull-7[_ngcontent-%COMP%]{right:58.33333333%}.col-xs-pull-6[_ngcontent-%COMP%]{right:50%}.col-xs-pull-5[_ngcontent-%COMP%]{right:41.66666667%}.col-xs-pull-4[_ngcontent-%COMP%]{right:33.33333333%}.col-xs-pull-3[_ngcontent-%COMP%]{right:25%}.col-xs-pull-2[_ngcontent-%COMP%]{right:16.66666667%}.col-xs-pull-1[_ngcontent-%COMP%]{right:8.33333333%}.col-xs-pull-0[_ngcontent-%COMP%]{right:auto}.col-xs-push-12[_ngcontent-%COMP%]{left:100%}.col-xs-push-11[_ngcontent-%COMP%]{left:91.66666667%}.col-xs-push-10[_ngcontent-%COMP%]{left:83.33333333%}.col-xs-push-9[_ngcontent-%COMP%]{left:75%}.col-xs-push-8[_ngcontent-%COMP%]{left:66.66666667%}.col-xs-push-7[_ngcontent-%COMP%]{left:58.33333333%}.col-xs-push-6[_ngcontent-%COMP%]{left:50%}.col-xs-push-5[_ngcontent-%COMP%]{left:41.66666667%}.col-xs-push-4[_ngcontent-%COMP%]{left:33.33333333%}.col-xs-push-3[_ngcontent-%COMP%]{left:25%}.col-xs-push-2[_ngcontent-%COMP%]{left:16.66666667%}.col-xs-push-1[_ngcontent-%COMP%]{left:8.33333333%}.col-xs-push-0[_ngcontent-%COMP%]{left:auto}.col-xs-offset-12[_ngcontent-%COMP%]{margin-left:100%}.col-xs-offset-11[_ngcontent-%COMP%]{margin-left:91.66666667%}.col-xs-offset-10[_ngcontent-%COMP%]{margin-left:83.33333333%}.col-xs-offset-9[_ngcontent-%COMP%]{margin-left:75%}.col-xs-offset-8[_ngcontent-%COMP%]{margin-left:66.66666667%}.col-xs-offset-7[_ngcontent-%COMP%]{margin-left:58.33333333%}.col-xs-offset-6[_ngcontent-%COMP%]{margin-left:50%}.col-xs-offset-5[_ngcontent-%COMP%]{margin-left:41.66666667%}.col-xs-offset-4[_ngcontent-%COMP%]{margin-left:33.33333333%}.col-xs-offset-3[_ngcontent-%COMP%]{margin-left:25%}.col-xs-offset-2[_ngcontent-%COMP%]{margin-left:16.66666667%}.col-xs-offset-1[_ngcontent-%COMP%]{margin-left:8.33333333%}.col-xs-offset-0[_ngcontent-%COMP%]{margin-left:0}@media (min-width:768px){.col-sm-1[_ngcontent-%COMP%], .col-sm-10[_ngcontent-%COMP%], .col-sm-11[_ngcontent-%COMP%], .col-sm-12[_ngcontent-%COMP%], .col-sm-2[_ngcontent-%COMP%], .col-sm-3[_ngcontent-%COMP%], .col-sm-4[_ngcontent-%COMP%], .col-sm-5[_ngcontent-%COMP%], .col-sm-6[_ngcontent-%COMP%], .col-sm-7[_ngcontent-%COMP%], .col-sm-8[_ngcontent-%COMP%], .col-sm-9[_ngcontent-%COMP%]{float:left}.col-sm-12[_ngcontent-%COMP%]{width:100%}.col-sm-11[_ngcontent-%COMP%]{width:91.66666667%}.col-sm-10[_ngcontent-%COMP%]{width:83.33333333%}.col-sm-9[_ngcontent-%COMP%]{width:75%}.col-sm-8[_ngcontent-%COMP%]{width:66.66666667%}.col-sm-7[_ngcontent-%COMP%]{width:58.33333333%}.col-sm-6[_ngcontent-%COMP%]{width:50%}.col-sm-5[_ngcontent-%COMP%]{width:41.66666667%}.col-sm-4[_ngcontent-%COMP%]{width:33.33333333%}.col-sm-3[_ngcontent-%COMP%]{width:25%}.col-sm-2[_ngcontent-%COMP%]{width:16.66666667%}.col-sm-1[_ngcontent-%COMP%]{width:8.33333333%}.col-sm-pull-12[_ngcontent-%COMP%]{right:100%}.col-sm-pull-11[_ngcontent-%COMP%]{right:91.66666667%}.col-sm-pull-10[_ngcontent-%COMP%]{right:83.33333333%}.col-sm-pull-9[_ngcontent-%COMP%]{right:75%}.col-sm-pull-8[_ngcontent-%COMP%]{right:66.66666667%}.col-sm-pull-7[_ngcontent-%COMP%]{right:58.33333333%}.col-sm-pull-6[_ngcontent-%COMP%]{right:50%}.col-sm-pull-5[_ngcontent-%COMP%]{right:41.66666667%}.col-sm-pull-4[_ngcontent-%COMP%]{right:33.33333333%}.col-sm-pull-3[_ngcontent-%COMP%]{right:25%}.col-sm-pull-2[_ngcontent-%COMP%]{right:16.66666667%}.col-sm-pull-1[_ngcontent-%COMP%]{right:8.33333333%}.col-sm-pull-0[_ngcontent-%COMP%]{right:auto}.col-sm-push-12[_ngcontent-%COMP%]{left:100%}.col-sm-push-11[_ngcontent-%COMP%]{left:91.66666667%}.col-sm-push-10[_ngcontent-%COMP%]{left:83.33333333%}.col-sm-push-9[_ngcontent-%COMP%]{left:75%}.col-sm-push-8[_ngcontent-%COMP%]{left:66.66666667%}.col-sm-push-7[_ngcontent-%COMP%]{left:58.33333333%}.col-sm-push-6[_ngcontent-%COMP%]{left:50%}.col-sm-push-5[_ngcontent-%COMP%]{left:41.66666667%}.col-sm-push-4[_ngcontent-%COMP%]{left:33.33333333%}.col-sm-push-3[_ngcontent-%COMP%]{left:25%}.col-sm-push-2[_ngcontent-%COMP%]{left:16.66666667%}.col-sm-push-1[_ngcontent-%COMP%]{left:8.33333333%}.col-sm-push-0[_ngcontent-%COMP%]{left:auto}.col-sm-offset-12[_ngcontent-%COMP%]{margin-left:100%}.col-sm-offset-11[_ngcontent-%COMP%]{margin-left:91.66666667%}.col-sm-offset-10[_ngcontent-%COMP%]{margin-left:83.33333333%}.col-sm-offset-9[_ngcontent-%COMP%]{margin-left:75%}.col-sm-offset-8[_ngcontent-%COMP%]{margin-left:66.66666667%}.col-sm-offset-7[_ngcontent-%COMP%]{margin-left:58.33333333%}.col-sm-offset-6[_ngcontent-%COMP%]{margin-left:50%}.col-sm-offset-5[_ngcontent-%COMP%]{margin-left:41.66666667%}.col-sm-offset-4[_ngcontent-%COMP%]{margin-left:33.33333333%}.col-sm-offset-3[_ngcontent-%COMP%]{margin-left:25%}.col-sm-offset-2[_ngcontent-%COMP%]{margin-left:16.66666667%}.col-sm-offset-1[_ngcontent-%COMP%]{margin-left:8.33333333%}.col-sm-offset-0[_ngcontent-%COMP%]{margin-left:0}}@media (min-width:992px){.col-md-1[_ngcontent-%COMP%], .col-md-10[_ngcontent-%COMP%], .col-md-11[_ngcontent-%COMP%], .col-md-12[_ngcontent-%COMP%], .col-md-2[_ngcontent-%COMP%], .col-md-3[_ngcontent-%COMP%], .col-md-4[_ngcontent-%COMP%], .col-md-5[_ngcontent-%COMP%], .col-md-6[_ngcontent-%COMP%], .col-md-7[_ngcontent-%COMP%], .col-md-8[_ngcontent-%COMP%], .col-md-9[_ngcontent-%COMP%]{float:left}.col-md-12[_ngcontent-%COMP%]{width:100%}.col-md-11[_ngcontent-%COMP%]{width:91.66666667%}.col-md-10[_ngcontent-%COMP%]{width:83.33333333%}.col-md-9[_ngcontent-%COMP%]{width:75%}.col-md-8[_ngcontent-%COMP%]{width:66.66666667%}.col-md-7[_ngcontent-%COMP%]{width:58.33333333%}.col-md-6[_ngcontent-%COMP%]{width:50%}.col-md-5[_ngcontent-%COMP%]{width:41.66666667%}.col-md-4[_ngcontent-%COMP%]{width:33.33333333%}.col-md-3[_ngcontent-%COMP%]{width:25%}.col-md-2[_ngcontent-%COMP%]{width:16.66666667%}.col-md-1[_ngcontent-%COMP%]{width:8.33333333%}.col-md-pull-12[_ngcontent-%COMP%]{right:100%}.col-md-pull-11[_ngcontent-%COMP%]{right:91.66666667%}.col-md-pull-10[_ngcontent-%COMP%]{right:83.33333333%}.col-md-pull-9[_ngcontent-%COMP%]{right:75%}.col-md-pull-8[_ngcontent-%COMP%]{right:66.66666667%}.col-md-pull-7[_ngcontent-%COMP%]{right:58.33333333%}.col-md-pull-6[_ngcontent-%COMP%]{right:50%}.col-md-pull-5[_ngcontent-%COMP%]{right:41.66666667%}.col-md-pull-4[_ngcontent-%COMP%]{right:33.33333333%}.col-md-pull-3[_ngcontent-%COMP%]{right:25%}.col-md-pull-2[_ngcontent-%COMP%]{right:16.66666667%}.col-md-pull-1[_ngcontent-%COMP%]{right:8.33333333%}.col-md-pull-0[_ngcontent-%COMP%]{right:auto}.col-md-push-12[_ngcontent-%COMP%]{left:100%}.col-md-push-11[_ngcontent-%COMP%]{left:91.66666667%}.col-md-push-10[_ngcontent-%COMP%]{left:83.33333333%}.col-md-push-9[_ngcontent-%COMP%]{left:75%}.col-md-push-8[_ngcontent-%COMP%]{left:66.66666667%}.col-md-push-7[_ngcontent-%COMP%]{left:58.33333333%}.col-md-push-6[_ngcontent-%COMP%]{left:50%}.col-md-push-5[_ngcontent-%COMP%]{left:41.66666667%}.col-md-push-4[_ngcontent-%COMP%]{left:33.33333333%}.col-md-push-3[_ngcontent-%COMP%]{left:25%}.col-md-push-2[_ngcontent-%COMP%]{left:16.66666667%}.col-md-push-1[_ngcontent-%COMP%]{left:8.33333333%}.col-md-push-0[_ngcontent-%COMP%]{left:auto}.col-md-offset-12[_ngcontent-%COMP%]{margin-left:100%}.col-md-offset-11[_ngcontent-%COMP%]{margin-left:91.66666667%}.col-md-offset-10[_ngcontent-%COMP%]{margin-left:83.33333333%}.col-md-offset-9[_ngcontent-%COMP%]{margin-left:75%}.col-md-offset-8[_ngcontent-%COMP%]{margin-left:66.66666667%}.col-md-offset-7[_ngcontent-%COMP%]{margin-left:58.33333333%}.col-md-offset-6[_ngcontent-%COMP%]{margin-left:50%}.col-md-offset-5[_ngcontent-%COMP%]{margin-left:41.66666667%}.col-md-offset-4[_ngcontent-%COMP%]{margin-left:33.33333333%}.col-md-offset-3[_ngcontent-%COMP%]{margin-left:25%}.col-md-offset-2[_ngcontent-%COMP%]{margin-left:16.66666667%}.col-md-offset-1[_ngcontent-%COMP%]{margin-left:8.33333333%}.col-md-offset-0[_ngcontent-%COMP%]{margin-left:0}}@media (min-width:1200px){.col-lg-1[_ngcontent-%COMP%], .col-lg-10[_ngcontent-%COMP%], .col-lg-11[_ngcontent-%COMP%], .col-lg-12[_ngcontent-%COMP%], .col-lg-2[_ngcontent-%COMP%], .col-lg-3[_ngcontent-%COMP%], .col-lg-4[_ngcontent-%COMP%], .col-lg-5[_ngcontent-%COMP%], .col-lg-6[_ngcontent-%COMP%], .col-lg-7[_ngcontent-%COMP%], .col-lg-8[_ngcontent-%COMP%], .col-lg-9[_ngcontent-%COMP%]{float:left}.col-lg-12[_ngcontent-%COMP%]{width:100%}.col-lg-11[_ngcontent-%COMP%]{width:91.66666667%}.col-lg-10[_ngcontent-%COMP%]{width:83.33333333%}.col-lg-9[_ngcontent-%COMP%]{width:75%}.col-lg-8[_ngcontent-%COMP%]{width:66.66666667%}.col-lg-7[_ngcontent-%COMP%]{width:58.33333333%}.col-lg-6[_ngcontent-%COMP%]{width:50%}.col-lg-5[_ngcontent-%COMP%]{width:41.66666667%}.col-lg-4[_ngcontent-%COMP%]{width:33.33333333%}.col-lg-3[_ngcontent-%COMP%]{width:25%}.col-lg-2[_ngcontent-%COMP%]{width:16.66666667%}.col-lg-1[_ngcontent-%COMP%]{width:8.33333333%}.col-lg-pull-12[_ngcontent-%COMP%]{right:100%}.col-lg-pull-11[_ngcontent-%COMP%]{right:91.66666667%}.col-lg-pull-10[_ngcontent-%COMP%]{right:83.33333333%}.col-lg-pull-9[_ngcontent-%COMP%]{right:75%}.col-lg-pull-8[_ngcontent-%COMP%]{right:66.66666667%}.col-lg-pull-7[_ngcontent-%COMP%]{right:58.33333333%}.col-lg-pull-6[_ngcontent-%COMP%]{right:50%}.col-lg-pull-5[_ngcontent-%COMP%]{right:41.66666667%}.col-lg-pull-4[_ngcontent-%COMP%]{right:33.33333333%}.col-lg-pull-3[_ngcontent-%COMP%]{right:25%}.col-lg-pull-2[_ngcontent-%COMP%]{right:16.66666667%}.col-lg-pull-1[_ngcontent-%COMP%]{right:8.33333333%}.col-lg-pull-0[_ngcontent-%COMP%]{right:auto}.col-lg-push-12[_ngcontent-%COMP%]{left:100%}.col-lg-push-11[_ngcontent-%COMP%]{left:91.66666667%}.col-lg-push-10[_ngcontent-%COMP%]{left:83.33333333%}.col-lg-push-9[_ngcontent-%COMP%]{left:75%}.col-lg-push-8[_ngcontent-%COMP%]{left:66.66666667%}.col-lg-push-7[_ngcontent-%COMP%]{left:58.33333333%}.col-lg-push-6[_ngcontent-%COMP%]{left:50%}.col-lg-push-5[_ngcontent-%COMP%]{left:41.66666667%}.col-lg-push-4[_ngcontent-%COMP%]{left:33.33333333%}.col-lg-push-3[_ngcontent-%COMP%]{left:25%}.col-lg-push-2[_ngcontent-%COMP%]{left:16.66666667%}.col-lg-push-1[_ngcontent-%COMP%]{left:8.33333333%}.col-lg-push-0[_ngcontent-%COMP%]{left:auto}.col-lg-offset-12[_ngcontent-%COMP%]{margin-left:100%}.col-lg-offset-11[_ngcontent-%COMP%]{margin-left:91.66666667%}.col-lg-offset-10[_ngcontent-%COMP%]{margin-left:83.33333333%}.col-lg-offset-9[_ngcontent-%COMP%]{margin-left:75%}.col-lg-offset-8[_ngcontent-%COMP%]{margin-left:66.66666667%}.col-lg-offset-7[_ngcontent-%COMP%]{margin-left:58.33333333%}.col-lg-offset-6[_ngcontent-%COMP%]{margin-left:50%}.col-lg-offset-5[_ngcontent-%COMP%]{margin-left:41.66666667%}.col-lg-offset-4[_ngcontent-%COMP%]{margin-left:33.33333333%}.col-lg-offset-3[_ngcontent-%COMP%]{margin-left:25%}.col-lg-offset-2[_ngcontent-%COMP%]{margin-left:16.66666667%}.col-lg-offset-1[_ngcontent-%COMP%]{margin-left:8.33333333%}.col-lg-offset-0[_ngcontent-%COMP%]{margin-left:0}}.modal-open[_ngcontent-%COMP%]{overflow:hidden}.modal[_ngcontent-%COMP%]{top:0;right:0;bottom:0;left:0;z-index:1050;overflow:hidden;-webkit-overflow-scrolling:touch;outline:0;display:block;height:100%}.modal.fade[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{transform:translate(0,-25%);transition:transform .3s ease-out}.modal.in[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{transform:translate(0,0)}.modal-open[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]{overflow-x:hidden;overflow-y:auto}.modal-dialog[_ngcontent-%COMP%]{width:auto;margin:30px;padding:100px 0;position:absolute;top:40%;left:50%;transform:translate(-50%,-50%)}.modal-content[_ngcontent-%COMP%]{position:relative;background-color:#fff;-webkit-background-clip:padding-box;background-clip:padding-box;border:1px solid rgba(0,0,0,.2);border-radius:15px;box-shadow:0 3px 9px rgba(0,0,0,.5);outline:0}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;right:0;bottom:0;left:0;z-index:1040;background-color:#000}.modal-backdrop.fade[_ngcontent-%COMP%]{opacity:0}.modal-backdrop.in[_ngcontent-%COMP%]{opacity:.5}.modal-header[_ngcontent-%COMP%]{padding:15px;border-bottom:1px solid #e5e5e5}.modal-header[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{margin-top:-2px}.modal-title[_ngcontent-%COMP%]{margin:0;line-height:1.42857143}.modal-body[_ngcontent-%COMP%]{position:relative;padding:15px}.modal-footer[_ngcontent-%COMP%]{padding:1px;text-align:center;border-top:1px solid #e5e5e5}.modal-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%] + .btn[_ngcontent-%COMP%]{margin-bottom:0;margin-left:5px}.modal-footer[_ngcontent-%COMP%]   .btn-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%] + .btn[_ngcontent-%COMP%]{margin-left:-1px}.modal-footer[_ngcontent-%COMP%]   .btn-block[_ngcontent-%COMP%] + .btn-block[_ngcontent-%COMP%]{margin-left:0}.modal-scrollbar-measure[_ngcontent-%COMP%]{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}@media (max-width:600px){.headerTitle[_ngcontent-%COMP%]{display:none}.headerLogo[_ngcontent-%COMP%]{right:0}}@media (max-width:767px){.row[_ngcontent-%COMP%]{height:100%}.leftSection[_ngcontent-%COMP%]{height:60%}.rightSection[_ngcontent-%COMP%]{padding-right:0!important}.headerTitle[_ngcontent-%COMP%]{font-size:medium}.modal-content[_ngcontent-%COMP%]{max-height:100%;height:100%}.modal-dialog[_ngcontent-%COMP%]{height:calc(100% - 10px);margin:5px;padding:0;position:relative;top:0;left:0;transform:none}.modal-body[_ngcontent-%COMP%]{padding:10px 20px;overflow:auto;height:calc(100% - 120px);overflow:-moz-scrollbars-vertical;overflow-x:hidden;overflow-y:scroll}.modal[_ngcontent-%COMP%]{max-height:100%}.videoContainer[_ngcontent-%COMP%]{width:60%}}@media (min-width:768px){.ovVideoSmall[_ngcontent-%COMP%]{width:40%}.row[_ngcontent-%COMP%]{display:flex!important}.modal-dialog[_ngcontent-%COMP%]{width:90%;margin:55px auto}.modal-content[_ngcontent-%COMP%]{box-shadow:0 5px 15px rgba(0,0,0,.5)}.modal-sm[_ngcontent-%COMP%]{width:300px}}@media (min-width:992px){.modal-lg[_ngcontent-%COMP%]{width:75%}}@media (min-width:1440px){.modal-xl[_ngcontent-%COMP%]{width:75%}}"]}),e}(),Ut=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=o.Ob({type:e}),e.\u0275inj=o.Nb({factory:function(t){return new(t||e)},providers:[mt,nt,ht,it,ft,tt,rt,ot,pt],imports:[[g.c,m.c,h.m,h.C,l.c,E.j,S.b,u.b,O.c,C.e,f.g,d.b,_.b,I.a,k.b,P.o,x.b,T.b,b.g,c.b,A.a,y.a.forRoot()]]}),e}()},"/dLB":function(e,t,n){"use strict";var i;t.__esModule=!0,(i=t.VideoInsertMode||(t.VideoInsertMode={})).AFTER="AFTER",i.APPEND="APPEND",i.BEFORE="BEFORE",i.PREPEND="PREPEND",i.REPLACE="REPLACE"},"/u9M":function(e,t,n){"use strict";t.__esModule=!0;var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n("LXjW")),o=i.tokenize,r=i.options.Options;function a(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function s(e){return e.replace(/"/g,"&quot;")}function c(e){if(!e)return"";var t=[];for(var n in e)t.push(n+'="'+s(e[n]+"")+'"');return t.join(" ")}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=new r(t);for(var n=o(e),i=[],l=0;l<n.length;l++){var u=n[l];if("nl"===u.type&&t.nl2br)i.push("<br>\n");else if(u.isLink&&t.check(u)){var d=t.resolve(u),g=d.formatted,h=d.formattedHref,p=d.tagName,f=d.className,m=d.target,v=d.attributes,b="<"+p+' href="'+s(h)+'"';f&&(b+=' class="'+s(f)+'"'),m&&(b+=' target="'+s(m)+'"'),v&&(b+=" "+c(v)),b+=">"+a(g)+"</"+p+">",i.push(b)}else i.push(a(u.toString()))}return i.join("")}if(!String.prototype.linkify)try{Object.defineProperty(String.prototype,"linkify",{set:function(){},get:function(){return function(e){return l(this,e)}}})}catch(u){String.prototype.linkify||(String.prototype.linkify=function(e){return l(this,e)})}t.default=l},"0srX":function(e,t,n){"use strict";n.r(t),n.d(t,"v1",(function(){return h})),n.d(t,"v3",(function(){return O})),n.d(t,"v4",(function(){return S})),n.d(t,"v5",(function(){return x}));var i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),o=new Uint8Array(16);function r(){if(!i)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(o)}for(var a=[],s=0;s<256;++s)a[s]=(s+256).toString(16).substr(1);var c,l,u=function(e,t){var n=t||0;return[a[e[n++]],a[e[n++]],a[e[n++]],a[e[n++]],"-",a[e[n++]],a[e[n++]],"-",a[e[n++]],a[e[n++]],"-",a[e[n++]],a[e[n++]],"-",a[e[n++]],a[e[n++]],a[e[n++]],a[e[n++]],a[e[n++]],a[e[n++]]].join("")},d=0,g=0,h=function(e,t,n){var i=t&&n||0,o=t||[],a=(e=e||{}).node||c,s=void 0!==e.clockseq?e.clockseq:l;if(null==a||null==s){var h=e.random||(e.rng||r)();null==a&&(a=c=[1|h[0],h[1],h[2],h[3],h[4],h[5]]),null==s&&(s=l=16383&(h[6]<<8|h[7]))}var p=void 0!==e.msecs?e.msecs:(new Date).getTime(),f=void 0!==e.nsecs?e.nsecs:g+1,m=p-d+(f-g)/1e4;if(m<0&&void 0===e.clockseq&&(s=s+1&16383),(m<0||p>d)&&void 0===e.nsecs&&(f=0),f>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");d=p,g=f,l=s;var v=(1e4*(268435455&(p+=122192928e5))+f)%4294967296;o[i++]=v>>>24&255,o[i++]=v>>>16&255,o[i++]=v>>>8&255,o[i++]=255&v;var b=p/4294967296*1e4&268435455;o[i++]=b>>>8&255,o[i++]=255&b,o[i++]=b>>>24&15|16,o[i++]=b>>>16&255,o[i++]=s>>>8|128,o[i++]=255&s;for(var y=0;y<6;++y)o[i+y]=a[y];return t||u(o)},p=function(e,t,n){var i=function(e,i,o,r){var a=o&&r||0;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=new Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(e)),"string"==typeof i&&(i=function(e){var t=[];return e.replace(/[a-fA-F0-9]{2}/g,(function(e){t.push(parseInt(e,16))})),t}(i)),!Array.isArray(e))throw TypeError("value must be an array of bytes");if(!Array.isArray(i)||16!==i.length)throw TypeError("namespace must be uuid string or an Array of 16 byte values");var s=n(i.concat(e));if(s[6]=15&s[6]|t,s[8]=63&s[8]|128,o)for(var c=0;c<16;++c)o[a+c]=s[c];return o||u(s)};try{i.name=e}catch(o){}return i.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",i.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",i};function f(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function m(e,t,n,i,o,r){return f((a=f(f(t,e),f(i,r)))<<(s=o)|a>>>32-s,n);var a,s}function v(e,t,n,i,o,r,a){return m(t&n|~t&i,e,t,o,r,a)}function b(e,t,n,i,o,r,a){return m(t&i|n&~i,e,t,o,r,a)}function y(e,t,n,i,o,r,a){return m(t^n^i,e,t,o,r,a)}function C(e,t,n,i,o,r,a){return m(n^(t|~i),e,t,o,r,a)}var O=p("v3",48,(function(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Array(t.length);for(var n=0;n<t.length;n++)e[n]=t.charCodeAt(n)}return function(e){var t,n,i,o=[],r=32*e.length;for(t=0;t<r;t+=8)n=e[t>>5]>>>t%32&255,i=parseInt("0123456789abcdef".charAt(n>>>4&15)+"0123456789abcdef".charAt(15&n),16),o.push(i);return o}(function(e,t){var n,i,o,r,a;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var s=1732584193,c=-271733879,l=-1732584194,u=271733878;for(n=0;n<e.length;n+=16)i=s,o=c,r=l,a=u,s=v(s,c,l,u,e[n],7,-680876936),u=v(u,s,c,l,e[n+1],12,-389564586),l=v(l,u,s,c,e[n+2],17,606105819),c=v(c,l,u,s,e[n+3],22,-1044525330),s=v(s,c,l,u,e[n+4],7,-176418897),u=v(u,s,c,l,e[n+5],12,1200080426),l=v(l,u,s,c,e[n+6],17,-1473231341),c=v(c,l,u,s,e[n+7],22,-45705983),s=v(s,c,l,u,e[n+8],7,1770035416),u=v(u,s,c,l,e[n+9],12,-1958414417),l=v(l,u,s,c,e[n+10],17,-42063),c=v(c,l,u,s,e[n+11],22,-1990404162),s=v(s,c,l,u,e[n+12],7,1804603682),u=v(u,s,c,l,e[n+13],12,-40341101),l=v(l,u,s,c,e[n+14],17,-1502002290),s=b(s,c=v(c,l,u,s,e[n+15],22,1236535329),l,u,e[n+1],5,-165796510),u=b(u,s,c,l,e[n+6],9,-1069501632),l=b(l,u,s,c,e[n+11],14,643717713),c=b(c,l,u,s,e[n],20,-373897302),s=b(s,c,l,u,e[n+5],5,-701558691),u=b(u,s,c,l,e[n+10],9,38016083),l=b(l,u,s,c,e[n+15],14,-660478335),c=b(c,l,u,s,e[n+4],20,-405537848),s=b(s,c,l,u,e[n+9],5,568446438),u=b(u,s,c,l,e[n+14],9,-1019803690),l=b(l,u,s,c,e[n+3],14,-187363961),c=b(c,l,u,s,e[n+8],20,1163531501),s=b(s,c,l,u,e[n+13],5,-1444681467),u=b(u,s,c,l,e[n+2],9,-51403784),l=b(l,u,s,c,e[n+7],14,1735328473),s=y(s,c=b(c,l,u,s,e[n+12],20,-1926607734),l,u,e[n+5],4,-378558),u=y(u,s,c,l,e[n+8],11,-2022574463),l=y(l,u,s,c,e[n+11],16,1839030562),c=y(c,l,u,s,e[n+14],23,-35309556),s=y(s,c,l,u,e[n+1],4,-1530992060),u=y(u,s,c,l,e[n+4],11,1272893353),l=y(l,u,s,c,e[n+7],16,-155497632),c=y(c,l,u,s,e[n+10],23,-1094730640),s=y(s,c,l,u,e[n+13],4,681279174),u=y(u,s,c,l,e[n],11,-358537222),l=y(l,u,s,c,e[n+3],16,-722521979),c=y(c,l,u,s,e[n+6],23,76029189),s=y(s,c,l,u,e[n+9],4,-640364487),u=y(u,s,c,l,e[n+12],11,-421815835),l=y(l,u,s,c,e[n+15],16,530742520),s=C(s,c=y(c,l,u,s,e[n+2],23,-995338651),l,u,e[n],6,-198630844),u=C(u,s,c,l,e[n+7],10,1126891415),l=C(l,u,s,c,e[n+14],15,-1416354905),c=C(c,l,u,s,e[n+5],21,-57434055),s=C(s,c,l,u,e[n+12],6,1700485571),u=C(u,s,c,l,e[n+3],10,-1894986606),l=C(l,u,s,c,e[n+10],15,-1051523),c=C(c,l,u,s,e[n+1],21,-2054922799),s=C(s,c,l,u,e[n+8],6,1873313359),u=C(u,s,c,l,e[n+15],10,-30611744),l=C(l,u,s,c,e[n+6],15,-1560198380),c=C(c,l,u,s,e[n+13],21,1309151649),s=C(s,c,l,u,e[n+4],6,-145523070),u=C(u,s,c,l,e[n+11],10,-1120210379),l=C(l,u,s,c,e[n+2],15,718787259),c=C(c,l,u,s,e[n+9],21,-343485551),s=f(s,i),c=f(c,o),l=f(l,r),u=f(u,a);return[s,c,l,u]}(function(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;var i=8*e.length;for(t=0;t<i;t+=8)n[t>>5]|=(255&e[t/8])<<t%32;return n}(e),8*e.length))})),S=function(e,t,n){var i=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||r)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var a=0;a<16;++a)t[i+a]=o[a];return t||u(o)};function M(e,t,n,i){switch(e){case 0:return t&n^~t&i;case 1:return t^n^i;case 2:return t&n^t&i^n&i;case 3:return t^n^i}}function _(e,t){return e<<t|e>>>32-t}var x=p("v5",80,(function(e){var t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var i=unescape(encodeURIComponent(e));e=new Array(i.length);for(var o=0;o<i.length;o++)e[o]=i.charCodeAt(o)}e.push(128);var r=Math.ceil((e.length/4+2)/16),a=new Array(r);for(o=0;o<r;o++){a[o]=new Array(16);for(var s=0;s<16;s++)a[o][s]=e[64*o+4*s]<<24|e[64*o+4*s+1]<<16|e[64*o+4*s+2]<<8|e[64*o+4*s+3]}for(a[r-1][14]=8*(e.length-1)/Math.pow(2,32),a[r-1][14]=Math.floor(a[r-1][14]),a[r-1][15]=8*(e.length-1)&4294967295,o=0;o<r;o++){for(var c=new Array(80),l=0;l<16;l++)c[l]=a[o][l];for(l=16;l<80;l++)c[l]=_(c[l-3]^c[l-8]^c[l-14]^c[l-16],1);var u=n[0],d=n[1],g=n[2],h=n[3],p=n[4];for(l=0;l<80;l++){var f=Math.floor(l/20),m=_(u,5)+M(f,d,g,h)+p+t[f]+c[l]>>>0;p=h,h=g,g=_(d,30)>>>0,d=u,u=m}n[0]=n[0]+u>>>0,n[1]=n[1]+d>>>0,n[2]=n[2]+g>>>0,n[3]=n[3]+h>>>0,n[4]=n[4]+p>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]}))},"0wxW":function(e,t,n){var i=n("de4E"),o=n("pLL0");t.JsonRPC=i,t.XmlRPC=o},"1Kca":function(e,t,n){"use strict";var i=n("dY/r");e.exports=function(e){var t,o={stun:(e||{}).stun||n("KFtI"),turn:(e||{}).turn||n("hw9W")},r=(e||{}).turnCount||0;function a(e,t){for(var n,r=[],a=[].concat(o[e]);a.length&&r.length<t;)n=Math.random()*a.length|0,r=r.concat(a.splice(n,1));return r.map((function(t){return"string"==typeof t||t instanceof String?i(e+":"+t):t}))}return t=[].concat(a("stun",(e||{}).stunCount||2)),r&&(t=t.concat(a("turn",r))),t}},"5kmN":function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0;var r=n("1Kca"),a=n("0srX"),s=n("bDgZ"),c=n("9m68").OpenViduLogger.getInstance(),l=function(){function e(e){var t=this;this.configuration=e,this.remoteCandidatesQueue=[],this.localCandidatesQueue=[],this.iceCandidateList=[],this.candidategatheringdone=!1,this.configuration.iceServers=this.configuration.iceServers&&this.configuration.iceServers.length>0?this.configuration.iceServers:r(),this.pc=new RTCPeerConnection({iceServers:this.configuration.iceServers}),this.id=e.id?e.id:this.generateUniqueId(),this.pc.onicecandidate=function(e){if(e.candidate){var n=e.candidate;n?(t.localCandidatesQueue.push({candidate:n.candidate}),t.candidategatheringdone=!1,t.configuration.onicecandidate(e.candidate)):t.candidategatheringdone||(t.candidategatheringdone=!0)}},this.pc.onsignalingstatechange=function(){if("stable"===t.pc.signalingState)for(;t.iceCandidateList.length>0;){var e=t.iceCandidateList.shift();t.pc.addIceCandidate(e)}},this.start()}return e.prototype.start=function(){var e=this;return new Promise((function(t,n){if("closed"===e.pc.signalingState&&n('The peer connection object is in "closed" state. This is most likely due to an invocation of the dispose method before accepting in the dialogue'),e.configuration.mediaStream){for(var i=0,o=e.configuration.mediaStream.getTracks();i<o.length;i++)e.pc.addTrack(o[i],e.configuration.mediaStream);t()}}))},e.prototype.dispose=function(){if(c.debug("Disposing WebRtcPeer"),this.pc){if("closed"===this.pc.signalingState)return;this.pc.close(),this.remoteCandidatesQueue=[],this.localCandidatesQueue=[]}},e.prototype.generateOffer=function(){var e=this;return new Promise((function(t,n){var i,o=!0;e.configuration.mediaConstraints&&(i="boolean"!=typeof e.configuration.mediaConstraints.audio||e.configuration.mediaConstraints.audio,o="boolean"!=typeof e.configuration.mediaConstraints.video||e.configuration.mediaConstraints.video);var r={offerToReceiveAudio:"sendonly"!==e.configuration.mode&&i,offerToReceiveVideo:"sendonly"!==e.configuration.mode&&o};c.debug("RTCPeerConnection constraints: "+JSON.stringify(r)),"Safari"===s.name&&-1!==s.ua.indexOf("Safari")?(i&&e.pc.addTransceiver("audio",{direction:e.configuration.mode}),o&&e.pc.addTransceiver("video",{direction:e.configuration.mode}),e.pc.createOffer().then((function(t){return c.debug("Created SDP offer"),e.pc.setLocalDescription(t)})).then((function(){var i=e.pc.localDescription;i?(c.debug("Local description set",i.sdp),t(i.sdp)):n("Local description is not defined")})).catch((function(e){return n(e)}))):e.pc.createOffer(r).then((function(t){return c.debug("Created SDP offer"),e.pc.setLocalDescription(t)})).then((function(){var i=e.pc.localDescription;i?(c.debug("Local description set",i.sdp),t(i.sdp)):n("Local description is not defined")})).catch((function(e){return n(e)}))}))},e.prototype.processAnswer=function(e,t){var n=this;return new Promise((function(i,o){var r={type:"answer",sdp:e};c.debug("SDP answer received, setting remote description"),"closed"===n.pc.signalingState&&o("RTCPeerConnection is closed"),n.setRemoteDescription(r,t,i,o)}))},e.prototype.setRemoteDescription=function(e,t,n,i){var o=this;s.isIonicIos?t?setTimeout((function(){c.info("setRemoteDescription run after timeout for Ionic iOS device"),o.pc.setRemoteDescription(new RTCSessionDescription(e)).then((function(){return n()})).catch((function(e){return i(e)}))}),250):this.pc.setRemoteDescription(new RTCSessionDescription(e)).then((function(){return n()})).catch((function(e){return i(e)})):this.pc.setRemoteDescription(e).then((function(){return n()})).catch((function(e){return i(e)}))},e.prototype.addIceCandidate=function(e){var t=this;return new Promise((function(n,i){switch(c.debug("Remote ICE candidate received",e),t.remoteCandidatesQueue.push(e),t.pc.signalingState){case"closed":i(new Error("PeerConnection object is closed"));break;case"stable":t.pc.remoteDescription?t.pc.addIceCandidate(e).then((function(){return n()})).catch((function(e){return i(e)})):(t.iceCandidateList.push(e),n());break;default:t.iceCandidateList.push(e),n()}}))},e.prototype.addIceConnectionStateChangeListener=function(e){var t=this;this.pc.oniceconnectionstatechange=function(){switch(t.pc.iceConnectionState){case"disconnected":c.warn("IceConnectionState of RTCPeerConnection "+t.id+" ("+e+') change to "disconnected". Possible network disconnection');break;case"failed":c.error("IceConnectionState of RTCPeerConnection "+t.id+" ("+e+') to "failed"');break;case"closed":c.log("IceConnectionState of RTCPeerConnection "+t.id+" ("+e+') change to "closed"');break;case"new":c.log("IceConnectionState of RTCPeerConnection "+t.id+" ("+e+') change to "new"');break;case"checking":c.log("IceConnectionState of RTCPeerConnection "+t.id+" ("+e+') change to "checking"');break;case"connected":c.log("IceConnectionState of RTCPeerConnection "+t.id+" ("+e+') change to "connected"');break;case"completed":c.log("IceConnectionState of RTCPeerConnection "+t.id+" ("+e+') change to "completed"')}}},e.prototype.generateUniqueId=function(){return a.v4()},e}();t.WebRtcPeer=l;var u=function(e){function t(t){return t.mode="recvonly",e.call(this,t)||this}return o(t,e),t}(l);t.WebRtcPeerRecvonly=u;var d=function(e){function t(t){return t.mode="sendonly",e.call(this,t)||this}return o(t,e),t}(l);t.WebRtcPeerSendonly=d;var g=function(e){function t(t){return t.mode="sendrecv",e.call(this,t)||this}return o(t,e),t}(l);t.WebRtcPeerSendrecv=g},"6+/i":function(e,t,n){var i;!function(t){"use strict";function o(){}var r=o.prototype,a=t.EventEmitter;function s(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function c(e){return function(){return this[e].apply(this,arguments)}}r.getListeners=function(e){var t,n,i=this._getEvents();if(e instanceof RegExp)for(n in t={},i)i.hasOwnProperty(n)&&e.test(n)&&(t[n]=i[n]);else t=i[e]||(i[e]=[]);return t},r.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},r.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&((t={})[e]=n),t||n},r.addListener=function(e,t){if(!function e(t){return"function"==typeof t||t instanceof RegExp||!(!t||"object"!=typeof t)&&e(t.listener)}(t))throw new TypeError("listener must be a function");var n,i=this.getListenersAsObject(e),o="object"==typeof t;for(n in i)i.hasOwnProperty(n)&&-1===s(i[n],t)&&i[n].push(o?t:{listener:t,once:!1});return this},r.on=c("addListener"),r.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},r.once=c("addOnceListener"),r.defineEvent=function(e){return this.getListeners(e),this},r.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},r.removeListener=function(e,t){var n,i,o=this.getListenersAsObject(e);for(i in o)o.hasOwnProperty(i)&&-1!==(n=s(o[i],t))&&o[i].splice(n,1);return this},r.off=c("removeListener"),r.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},r.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},r.manipulateListeners=function(e,t,n){var i,o,r=e?this.removeListener:this.addListener,a=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(i=n.length;i--;)r.call(this,t,n[i]);else for(i in t)t.hasOwnProperty(i)&&(o=t[i])&&("function"==typeof o?r.call(this,i,o):a.call(this,i,o));return this},r.removeEvent=function(e){var t,n=typeof e,i=this._getEvents();if("string"===n)delete i[e];else if(e instanceof RegExp)for(t in i)i.hasOwnProperty(t)&&e.test(t)&&delete i[t];else delete this._events;return this},r.removeAllListeners=c("removeEvent"),r.emitEvent=function(e,t){var n,i,o,r,a=this.getListenersAsObject(e);for(r in a)if(a.hasOwnProperty(r))for(n=a[r].slice(0),o=0;o<n.length;o++)!0===(i=n[o]).once&&this.removeListener(e,i.listener),i.listener.apply(this,t||[])===this._getOnceReturnValue()&&this.removeListener(e,i.listener);return this},r.trigger=c("emitEvent"),r.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},r.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},r._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},r._getEvents=function(){return this._events||(this._events={})},o.noConflict=function(){return t.EventEmitter=a,o},void 0===(i=(function(){return o}).call(t,n,t,e))||(e.exports=i)}("undefined"!=typeof window?window:this||{})},"74bm":function(e,t,n){"use strict";t.__esModule=!0;var i=n("BwMD"),o=n("Tt94"),r=n("9m68").OpenViduLogger.getInstance(),a=function(){function e(e,t){this.handlers={},this.type=e,this.options=t}return e.prototype.execMethod=function(e,t){var n=this;return new Promise((function(a,s){var c;if(r.info("Executing filter method to stream "+n.stream.streamId),"string"!=typeof t)try{c=JSON.stringify(t)}catch(u){var l="'params' property must be a JSON formatted object";r.error(l),s(l)}else c=t;n.stream.session.openvidu.sendRequest("execFilterMethod",{streamId:n.stream.streamId,method:e,params:c},(function(t,l){if(t)r.error("Error executing filter method for Stream "+n.stream.streamId,t),s(401===t.code?new o.OpenViduError(o.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to execute a filter method"):t);else{r.info("Filter method successfully executed on Stream "+n.stream.streamId);var u=Object.assign({},n.stream.filter);n.stream.filter.lastExecMethod={method:e,params:JSON.parse(c)},n.stream.session.emitEvent("streamPropertyChanged",[new i.StreamPropertyChangedEvent(n.stream.session,n.stream,"filter",n.stream.filter,u,"execFilterMethod")]),n.stream.streamManager.emitEvent("streamPropertyChanged",[new i.StreamPropertyChangedEvent(n.stream.streamManager,n.stream,"filter",n.stream.filter,u,"execFilterMethod")]),a()}}))}))},e.prototype.addEventListener=function(e,t){var n=this;return new Promise((function(i,a){r.info("Adding filter event listener to event "+e+" to stream "+n.stream.streamId),n.stream.session.openvidu.sendRequest("addFilterEventListener",{streamId:n.stream.streamId,eventType:e},(function(s,c){s?(r.error("Error adding filter event listener to event "+e+"for Stream "+n.stream.streamId,s),a(401===s.code?new o.OpenViduError(o.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to add a filter event listener"):s)):(n.handlers[e]=t,r.info("Filter event listener to event "+e+" successfully applied on Stream "+n.stream.streamId),i())}))}))},e.prototype.removeEventListener=function(e){var t=this;return new Promise((function(n,i){r.info("Removing filter event listener to event "+e+" to stream "+t.stream.streamId),t.stream.session.openvidu.sendRequest("removeFilterEventListener",{streamId:t.stream.streamId,eventType:e},(function(a,s){a?(r.error("Error removing filter event listener to event "+e+"for Stream "+t.stream.streamId,a),i(401===a.code?new o.OpenViduError(o.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to add a filter event listener"):a)):(delete t.handlers[e],r.info("Filter event listener to event "+e+" successfully removed on Stream "+t.stream.streamId),n())}))}))},e}();t.Filter=a},"8KVD":function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0;var r=function(e){function t(t,n,i,o,r){var a=e.call(this,t,n,i)||this;return a.connection=o,a.reason=r,a}return o(t,e),t.prototype.callDefaultBehavior=function(){},t}(n("hzOQ").Event);t.ConnectionEvent=r},"9m68":function(e,t,n){"use strict";t.__esModule=!0;var i=function(){function e(){this.logger=window.console,this.LOG_FNS=[this.logger.log,this.logger.debug,this.logger.info,this.logger.warn,this.logger.error],this.isProdMode=!1}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.isProdMode||this.LOG_FNS[0].apply(this.logger,arguments)},e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.isProdMode||this.LOG_FNS[1].apply(this.logger,arguments)},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.isProdMode||this.LOG_FNS[2].apply(this.logger,arguments)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.isProdMode||this.LOG_FNS[3].apply(this.logger,arguments)},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.LOG_FNS[4].apply(this.logger,arguments)},e.prototype.enableProdMode=function(){this.isProdMode=!0},e}();t.OpenViduLogger=i},AeG9:function(e,t,n){var i=!1;if(Object.defineProperty)try{Object.defineProperty({},"x",{})}catch(h){i=!0}Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,i=function(){},o=function(){return n.apply(this instanceof i&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return i.prototype=this.prototype,o.prototype=new i,o});var o=n("txJ/").EventEmitter,r=n("HgqT"),a=n("0wxW"),s=n("gUCu");function c(e){if(e){if(e instanceof Function)return{send:e};if(e.send instanceof Function)return e;if(e.postMessage instanceof Function)return e.send=e.postMessage,e;if(e.write instanceof Function)return e.send=e.write,e;if(void 0===e.onmessage&&!(e.pause instanceof Function))throw new SyntaxError("Transport is not a function nor a valid object")}}function l(e,t){i?(this.method=e,this.params=t):(Object.defineProperty(this,"method",{value:e,enumerable:!0}),Object.defineProperty(this,"params",{value:t,enumerable:!0}))}function u(e,t,n,a){var u=this;if(!e)throw new SyntaxError("Packer is not defined");if(!e.pack||!e.unpack)throw new SyntaxError("Packer is invalid");var d=function(e){if(!e)return{};for(var t in e){var n=e[t];"string"==typeof n&&(e[t]={response:n})}return e}(e.responseMethods);if(t instanceof Function){if(null!=n)throw new SyntaxError("There can't be parameters after onRequest");a=t,n=void 0,t=void 0}if(t&&t.send instanceof Function){if(n&&!(n instanceof Function))throw new SyntaxError("Only a function can be after transport");a=n,n=t,t=void 0}if(n instanceof Function){if(null!=a)throw new SyntaxError("There can't be parameters after onRequest");a=n,n=void 0}if(n&&n.send instanceof Function&&a&&!(a instanceof Function))throw new SyntaxError("Only a function can be after transport");t=t||{},o.call(this),a&&this.on("request",a),i?this.peerID=t.peerID:Object.defineProperty(this,"peerID",{value:t.peerID});var g=t.max_retries||0;function p(e){u.decode(e.data||e)}this.getTransport=function(){return n},this.setTransport=function(e){n&&(n.removeEventListener?n.removeEventListener("message",p):n.removeListener&&n.removeListener("data",p)),e&&(e.addEventListener?e.addEventListener("message",p):e.addListener&&e.addListener("data",p)),n=c(e)},i||Object.defineProperty(this,"transport",{get:this.getTransport.bind(this),set:this.setTransport.bind(this)}),this.setTransport(n);var f=t.request_timeout||5e3,m=t.ping_request_timeout||f,v=t.response_timeout||5e3,b=t.duplicates_timeout||5e3,y=0,C=new s,O=new s,S=new s,M={};function _(e,t){var n=setTimeout((function(){S.remove(e,t)}),b);S.set(n,e,t)}function x(t,n,o,r,a){l.call(this,t,n),this.getTransport=function(){return a},this.setTransport=function(e){a=c(e)},i||Object.defineProperty(this,"transport",{get:this.getTransport.bind(this),set:this.setTransport.bind(this)});var s=O.get(o,r);a||u.getTransport()||(i?this.duplicated=Boolean(s):Object.defineProperty(this,"duplicated",{value:Boolean(s)}));var g=d[t];this.pack=e.pack.bind(e,this,o),this.reply=function(t,n,i){if(t instanceof Function||t&&t.send instanceof Function){if(null!=n)throw new SyntaxError("There can't be parameters after callback");i=t,n=null,t=void 0}else if(n instanceof Function||n&&n.send instanceof Function){if(null!=i)throw new SyntaxError("There can't be parameters after callback");i=n,n=null}var a;return i=c(i),s&&clearTimeout(s.timeout),null!=r&&(t&&(t.dest=r),n&&(n.dest=r)),t||null!=n?(null!=u.peerID&&(t?t.from=u.peerID:n.from=u.peerID),a=e.pack(a=g?null==g.error&&t?{error:t}:{method:t?g.error:g.response,params:t||n}:{error:t,result:n},o)):a=s?s.message:e.pack({result:null},o),function(e,t,n){var i={message:e,timeout:setTimeout((function(){O.remove(t,n)}),v)};O.set(i,t,n)}(a,o,r),(i=i||this.getTransport()||u.getTransport())?i.send(a):a}}function k(e){var t=M[e];if(t){delete M[e];var n=C.pop(t.id,t.dest);n&&(clearTimeout(n.timeout),_(t.id,t.dest))}}r(x,l),this.cancel=function(e){if(e)return k(e);for(var e in M)k(e)},this.close=function(){var e=this.getTransport();e&&e.close&&e.close(4003,"Cancel request"),this.cancel(),S.forEach(clearTimeout),O.forEach((function(e){clearTimeout(e.timeout)}))},this.encode=function(t,n,i,o,r){if(n instanceof Function){if(null!=i)throw new SyntaxError("There can't be parameters after callback");r=n,o=void 0,i=void 0,n=void 0}else if(i instanceof Function){if(null!=o)throw new SyntaxError("There can't be parameters after callback");r=i,o=void 0,i=void 0}else if(o instanceof Function){if(null!=r)throw new SyntaxError("There can't be parameters after callback");r=o,o=void 0}null!=u.peerID&&((n=n||{}).from=u.peerID),null!=i&&((n=n||{}).dest=i);var a={method:t,params:n};if(r){var s=function(e,t){u.cancel(a),r(e,t)},l=function(e){return O.timeout=setTimeout(p,("ping"===t?m:f)*Math.pow(2,b++)),M[a]={id:v,dest:i},C.set(O,v,i),(e=e||_||u.getTransport())?e.send(a):a},h=function(e){e=c(e),console.warn(b+" retry for request message:",a);var t=S.pop(v,i);return clearTimeout(t),l(e)},p=function(){if(b<g)return h(o);var e=new Error("Request has timed out");e.request=a,e.retry=h,s(e)},v=y++,b=0,O={message:a=e.pack(a,v),callback:s,responseMethods:d[t]||{}},_=c(o);return l(o)}return a=e.pack(a),(o=o||this.getTransport())?o.send(a):a},this.decode=function(t,n){if(!t)throw new TypeError("Message is not defined");try{t=e.unpack(t)}catch(h){return console.debug(h,t)}var i=t.id,o=t.ack,r=t.method,a=t.params||{},s=a.from,d=a.dest;if(null==u.peerID||s!=u.peerID){if(null==i&&null==o){var g=new l(r,a);if(u.emit("request",g))return;return g}if(r){if(null==d||d==u.peerID){if(v=C.get(o,s)){var p=v.responseMethods;return r==p.error?M(v,a):r==p.response?M(v,null,a):y()}if(b=S.get(o,s))return k(b)}return y()}var f=t.error,m=t.result;if(!(f&&f.dest&&f.dest!=u.peerID||m&&m.dest&&m.dest!=u.peerID)){var v,b;if(!(v=C.get(o,s)))return(b=S.get(o,s))?k(b):console.warn("No callback was defined for this message",t);M(v,f,m)}}function y(){if(n=c(n)||u.getTransport()){var e=O.get(i,s);if(e)return n.send(e.message)}var t=new x(r,a,null!=i?i:o,s,n);if(!u.emit("request",t))return t}function M(e,t,n){e.callback(t,n)}function k(e){console.warn("Response already processed",t),clearTimeout(e),_(o,s)}}}r(u,o),u.RpcNotification=l,e.exports=u;var d=n("SYuc"),g=n("ee8k");(u.clients=d).transports=g,u.packers=a},BwMD:function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0;var r=function(e){function t(t,n,i,o,r,a){var s=e.call(this,!1,t,"streamPropertyChanged")||this;return s.stream=n,s.changedProperty=i,s.newValue=o,s.oldValue=r,s.reason=a,s}return o(t,e),t.prototype.callDefaultBehavior=function(){},t}(n("hzOQ").Event);t.StreamPropertyChangedEvent=r},DPKQ:function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0;var r=n("74bm"),a=n("bk74"),s=n("Dztv"),c=n("5kmN"),l=n("+FKC"),u=n("e8ps"),d=n("HxXY"),g=n("BwMD"),h=n("Tt94"),p=n("ttXH"),f=n("bDgZ"),m=n("9m68").OpenViduLogger.getInstance(),v=function(e){function t(t,n){var i=e.call(this)||this;return i.isSubscribeToRemote=!1,i.isLocalStreamReadyToPublish=!1,i.isLocalStreamPublished=!1,i.publishedOnce=!1,i.publisherStartSpeakingEventEnabled=!1,i.publisherStartSpeakingEventEnabledOnce=!1,i.publisherStopSpeakingEventEnabled=!1,i.publisherStopSpeakingEventEnabledOnce=!1,i.volumeChangeEventEnabled=!1,i.volumeChangeEventEnabledOnce=!1,i.session=t,n.hasOwnProperty("id")?(i.inboundStreamOpts=n,i.streamId=i.inboundStreamOpts.id,i.creationTime=i.inboundStreamOpts.createdAt,i.hasAudio=i.inboundStreamOpts.hasAudio,i.hasVideo=i.inboundStreamOpts.hasVideo,i.hasAudio&&(i.audioActive=i.inboundStreamOpts.audioActive),i.hasVideo&&(i.videoActive=i.inboundStreamOpts.videoActive,i.typeOfVideo=i.inboundStreamOpts.typeOfVideo?i.inboundStreamOpts.typeOfVideo:void 0,i.frameRate=-1===i.inboundStreamOpts.frameRate?void 0:i.inboundStreamOpts.frameRate,i.videoDimensions=i.inboundStreamOpts.videoDimensions),i.inboundStreamOpts.filter&&Object.keys(i.inboundStreamOpts.filter).length>0&&(i.inboundStreamOpts.filter.lastExecMethod&&0===Object.keys(i.inboundStreamOpts.filter.lastExecMethod).length&&delete i.inboundStreamOpts.filter.lastExecMethod,i.filter=i.inboundStreamOpts.filter)):(i.outboundStreamOpts=n,i.hasAudio=i.isSendAudio(),i.hasVideo=i.isSendVideo(),i.hasAudio&&(i.audioActive=!!i.outboundStreamOpts.publisherProperties.publishAudio),i.hasVideo&&(i.videoActive=!!i.outboundStreamOpts.publisherProperties.publishVideo,i.frameRate=i.outboundStreamOpts.publisherProperties.frameRate,i.typeOfVideo="undefined"!=typeof MediaStreamTrack&&i.outboundStreamOpts.publisherProperties.videoSource instanceof MediaStreamTrack?"CUSTOM":i.isSendScreen()?"SCREEN":"CAMERA"),i.outboundStreamOpts.publisherProperties.filter&&(i.filter=i.outboundStreamOpts.publisherProperties.filter)),i.ee.on("mediastream-updated",(function(){i.streamManager.updateMediaStream(i.mediaStream),m.debug("Video srcObject ["+i.mediaStream+"] updated in stream ["+i.streamId+"]")})),i}return o(t,e),t.prototype.on=function(t,n){return e.prototype.onAux.call(this,t,"Event '"+t+"' triggered by stream '"+this.streamId+"'",n),this},t.prototype.once=function(t,n){return e.prototype.onceAux.call(this,t,"Event '"+t+"' triggered once by stream '"+this.streamId+"'",n),this},t.prototype.off=function(t,n){return e.prototype.off.call(this,t,n),this},t.prototype.applyFilter=function(e,t){var n=this;return new Promise((function(i,o){m.info("Applying filter to stream "+n.streamId),"string"!=typeof(t=t||{})&&(t=JSON.stringify(t)),n.session.openvidu.sendRequest("applyFilter",{streamId:n.streamId,type:e,options:t},(function(a,s){if(a)m.error("Error applying filter for Stream "+n.streamId,a),o(401===a.code?new h.OpenViduError(h.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to apply a filter"):a);else{m.info("Filter successfully applied on Stream "+n.streamId);var c=n.filter;n.filter=new r.Filter(e,t),n.filter.stream=n,n.session.emitEvent("streamPropertyChanged",[new g.StreamPropertyChangedEvent(n.session,n,"filter",n.filter,c,"applyFilter")]),n.streamManager.emitEvent("streamPropertyChanged",[new g.StreamPropertyChangedEvent(n.streamManager,n,"filter",n.filter,c,"applyFilter")]),i(n.filter)}}))}))},t.prototype.removeFilter=function(){var e=this;return new Promise((function(t,n){m.info("Removing filter of stream "+e.streamId),e.session.openvidu.sendRequest("removeFilter",{streamId:e.streamId},(function(i,o){if(i)m.error("Error removing filter for Stream "+e.streamId,i),n(401===i.code?new h.OpenViduError(h.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to remove a filter"):i);else{m.info("Filter successfully removed from Stream "+e.streamId);var r=e.filter;delete e.filter,e.session.emitEvent("streamPropertyChanged",[new g.StreamPropertyChangedEvent(e.session,e,"filter",e.filter,r,"applyFilter")]),e.streamManager.emitEvent("streamPropertyChanged",[new g.StreamPropertyChangedEvent(e.streamManager,e,"filter",e.filter,r,"applyFilter")]),t()}}))}))},t.prototype.getRTCPeerConnection=function(){return this.webRtcPeer.pc},t.prototype.getMediaStream=function(){return this.mediaStream},t.prototype.setMediaStream=function(e){this.mediaStream=e},t.prototype.updateMediaStreamInVideos=function(){this.ee.emitEvent("mediastream-updated",[])},t.prototype.getWebRtcPeer=function(){return this.webRtcPeer},t.prototype.subscribeToMyRemote=function(e){this.isSubscribeToRemote=e},t.prototype.setOutboundStreamOptions=function(e){this.outboundStreamOpts=e},t.prototype.subscribe=function(){var e=this;return new Promise((function(t,n){e.initWebRtcPeerReceive(!1).then((function(){t()})).catch((function(e){n(e)}))}))},t.prototype.publish=function(){var e=this;return new Promise((function(t,n){e.isLocalStreamReadyToPublish?e.initWebRtcPeerSend(!1).then((function(){t()})).catch((function(e){n(e)})):e.ee.once("stream-ready-to-publish",(function(){e.publish().then((function(){t()})).catch((function(e){n(e)}))}))}))},t.prototype.disposeWebRtcPeer=function(){this.webRtcPeer&&(this.webRtcPeer.dispose(),this.stopWebRtcStats()),m.info((this.outboundStreamOpts?"Outbound ":"Inbound ")+"WebRTCPeer from 'Stream' with id ["+this.streamId+"] is now closed")},t.prototype.disposeMediaStream=function(){this.mediaStream&&(this.mediaStream.getAudioTracks().forEach((function(e){e.stop()})),this.mediaStream.getVideoTracks().forEach((function(e){e.stop()})),delete this.mediaStream),this.localMediaStreamWhenSubscribedToRemote&&(this.localMediaStreamWhenSubscribedToRemote.getAudioTracks().forEach((function(e){e.stop()})),this.localMediaStreamWhenSubscribedToRemote.getVideoTracks().forEach((function(e){e.stop()})),delete this.localMediaStreamWhenSubscribedToRemote),this.speechEvent&&(this.speechEvent.stop&&this.speechEvent.stop(),delete this.speechEvent),m.info((this.outboundStreamOpts?"Local ":"Remote ")+"MediaStream from 'Stream' with id ["+this.streamId+"] is now disposed")},t.prototype.displayMyRemote=function(){return this.isSubscribeToRemote},t.prototype.isSendAudio=function(){return!!this.outboundStreamOpts&&null!==this.outboundStreamOpts.publisherProperties.audioSource&&!1!==this.outboundStreamOpts.publisherProperties.audioSource},t.prototype.isSendVideo=function(){return!!this.outboundStreamOpts&&null!==this.outboundStreamOpts.publisherProperties.videoSource&&!1!==this.outboundStreamOpts.publisherProperties.videoSource},t.prototype.isSendScreen=function(){var e="screen"===this.outboundStreamOpts.publisherProperties.videoSource;return"Electron"===f.name&&(e="string"==typeof this.outboundStreamOpts.publisherProperties.videoSource&&this.outboundStreamOpts.publisherProperties.videoSource.startsWith("screen:")),!!this.outboundStreamOpts&&e},t.prototype.enableStartSpeakingEvent=function(){var e=this;this.setSpeechEventIfNotExists(),this.publisherStartSpeakingEventEnabled||(this.publisherStartSpeakingEventEnabled=!0,this.speechEvent.on("speaking",(function(){e.session.emitEvent("publisherStartSpeaking",[new u.PublisherSpeakingEvent(e.session,"publisherStartSpeaking",e.connection,e.streamId)]),e.publisherStartSpeakingEventEnabledOnce=!1})))},t.prototype.enableOnceStartSpeakingEvent=function(){var e=this;this.setSpeechEventIfNotExists(),this.publisherStartSpeakingEventEnabledOnce||(this.publisherStartSpeakingEventEnabledOnce=!0,this.speechEvent.once("speaking",(function(){e.publisherStartSpeakingEventEnabledOnce&&e.session.emitEvent("publisherStartSpeaking",[new u.PublisherSpeakingEvent(e.session,"publisherStartSpeaking",e.connection,e.streamId)]),e.disableStartSpeakingEvent(!0)})))},t.prototype.disableStartSpeakingEvent=function(e){if(this.speechEvent){if(this.publisherStartSpeakingEventEnabledOnce=!1,e){if(this.publisherStartSpeakingEventEnabled)return}else this.publisherStartSpeakingEventEnabled=!1;this.volumeChangeEventEnabled||this.volumeChangeEventEnabledOnce||this.publisherStopSpeakingEventEnabled||this.publisherStopSpeakingEventEnabledOnce?this.speechEvent.off("speaking"):(this.speechEvent.stop(),delete this.speechEvent)}},t.prototype.enableStopSpeakingEvent=function(){var e=this;this.setSpeechEventIfNotExists(),this.publisherStopSpeakingEventEnabled||(this.publisherStopSpeakingEventEnabled=!0,this.speechEvent.on("stopped_speaking",(function(){e.session.emitEvent("publisherStopSpeaking",[new u.PublisherSpeakingEvent(e.session,"publisherStopSpeaking",e.connection,e.streamId)]),e.publisherStopSpeakingEventEnabledOnce=!1})))},t.prototype.enableOnceStopSpeakingEvent=function(){var e=this;this.setSpeechEventIfNotExists(),this.publisherStopSpeakingEventEnabledOnce||(this.publisherStopSpeakingEventEnabledOnce=!0,this.speechEvent.once("stopped_speaking",(function(){e.publisherStopSpeakingEventEnabledOnce&&e.session.emitEvent("publisherStopSpeaking",[new u.PublisherSpeakingEvent(e.session,"publisherStopSpeaking",e.connection,e.streamId)]),e.disableStopSpeakingEvent(!0)})))},t.prototype.disableStopSpeakingEvent=function(e){if(this.speechEvent){if(this.publisherStopSpeakingEventEnabledOnce=!1,e){if(this.publisherStopSpeakingEventEnabled)return}else this.publisherStopSpeakingEventEnabled=!1;this.volumeChangeEventEnabled||this.volumeChangeEventEnabledOnce||this.publisherStartSpeakingEventEnabled||this.publisherStartSpeakingEventEnabledOnce?this.speechEvent.off("stopped_speaking"):(this.speechEvent.stop(),delete this.speechEvent)}},t.prototype.enableVolumeChangeEvent=function(e){var t=this;this.setSpeechEventIfNotExists()?this.volumeChangeEventEnabled&&!e||(this.volumeChangeEventEnabled=!0,this.speechEvent.on("volume_change",(function(e){var n={newValue:e,oldValue:t.speechEvent.oldVolumeValue};t.speechEvent.oldVolumeValue=e,t.streamManager.emitEvent("streamAudioVolumeChange",[new d.StreamManagerEvent(t.streamManager,"streamAudioVolumeChange",n)])}))):this.volumeChangeEventEnabled=!0},t.prototype.enableOnceVolumeChangeEvent=function(e){var t=this;this.setSpeechEventIfNotExists()?this.volumeChangeEventEnabledOnce&&!e||(this.volumeChangeEventEnabledOnce=!0,this.speechEvent.once("volume_change",(function(e){var n={newValue:e,oldValue:t.speechEvent.oldVolumeValue};t.speechEvent.oldVolumeValue=e,t.disableVolumeChangeEvent(!0),t.streamManager.emitEvent("streamAudioVolumeChange",[new d.StreamManagerEvent(t.streamManager,"streamAudioVolumeChange",n)])}))):this.volumeChangeEventEnabledOnce=!0},t.prototype.disableVolumeChangeEvent=function(e){if(this.speechEvent){if(this.volumeChangeEventEnabledOnce=!1,e){if(this.volumeChangeEventEnabled)return}else this.volumeChangeEventEnabled=!1;this.publisherStartSpeakingEventEnabled||this.publisherStartSpeakingEventEnabledOnce||this.publisherStopSpeakingEventEnabled||this.publisherStopSpeakingEventEnabledOnce?this.speechEvent.off("volume_change"):(this.speechEvent.stop(),delete this.speechEvent)}},t.prototype.isLocal=function(){return!this.inboundStreamOpts&&!!this.outboundStreamOpts},t.prototype.getSelectedIceCandidate=function(){var e=this;return new Promise((function(t,n){e.webRtcStats.getSelectedIceCandidateInfo().then((function(e){return t(e)})).catch((function(e){return n(e)}))}))},t.prototype.getRemoteIceCandidateList=function(){return this.webRtcPeer.remoteCandidatesQueue},t.prototype.getLocalIceCandidateList=function(){return this.webRtcPeer.localCandidatesQueue},t.prototype.streamIceConnectionStateBroken=function(){if(!this.getWebRtcPeer()||!this.getRTCPeerConnection())return!1;if(this.isLocal&&this.session.openvidu.advancedConfiguration.forceMediaReconnectionAfterNetworkDrop)return m.warn('OpenVidu Browser advanced configuration option "forceMediaReconnectionAfterNetworkDrop" is enabled. Publisher stream '+this.streamId+"will force a reconnection"),!0;var e=this.getRTCPeerConnection().iceConnectionState;return"disconnected"===e||"failed"===e},t.prototype.setSpeechEventIfNotExists=function(){if(this.mediaStream){if(!this.speechEvent){var e=this.harkOptions?this.harkOptions:this.session.openvidu.advancedConfiguration.publisherSpeakingEventsOptions||{};e.interval="number"==typeof e.interval?e.interval:100,e.threshold="number"==typeof e.threshold?e.threshold:-50,this.speechEvent=p(this.mediaStream,e)}return!0}return!1},t.prototype.initWebRtcPeerSend=function(e){var t=this;return new Promise((function(n,i){e||t.initHarkEvents();var o={audio:t.isSendAudio(),video:t.isSendVideo()},r={mediaStream:t.mediaStream,mediaConstraints:o,onicecandidate:t.connection.sendIceCandidate.bind(t.connection),iceServers:t.getIceServersConf(),simulcast:!1};e&&t.disposeWebRtcPeer(),t.webRtcPeer=t.displayMyRemote()?new c.WebRtcPeerSendrecv(r):new c.WebRtcPeerSendonly(r),t.webRtcPeer.addIceConnectionStateChangeListener("publisher of "+t.connection.connectionId),t.webRtcPeer.generateOffer().then((function(o){!function(o){m.debug("Sending SDP offer to publish as "+t.streamId,o);var r,a=e?"reconnectStream":"publishVideo";if(e)r={stream:t.streamId};else{var s="";t.isSendVideo()&&(s="undefined"!=typeof MediaStreamTrack&&t.outboundStreamOpts.publisherProperties.videoSource instanceof MediaStreamTrack?"CUSTOM":t.isSendScreen()?"SCREEN":"CAMERA"),r={doLoopback:t.displayMyRemote()||!1,hasAudio:t.isSendAudio(),hasVideo:t.isSendVideo(),audioActive:t.audioActive,videoActive:t.videoActive,typeOfVideo:s,frameRate:t.frameRate?t.frameRate:-1,videoDimensions:JSON.stringify(t.videoDimensions),filter:t.outboundStreamOpts.publisherProperties.filter}}r.sdpOffer=o,t.session.openvidu.sendRequest(a,r,(function(o,r){o?i(401===o.code?new h.OpenViduError(h.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to publish"):"Error on publishVideo: "+JSON.stringify(o)):t.webRtcPeer.processAnswer(r.sdpAnswer,!1).then((function(){t.streamId=r.id,t.creationTime=r.createdAt,t.isLocalStreamPublished=!0,t.publishedOnce=!0,t.displayMyRemote()&&(t.localMediaStreamWhenSubscribedToRemote=t.mediaStream,t.remotePeerSuccessfullyEstablished()),t.ee.emitEvent(e?"stream-reconnected-by-publisher":"stream-created-by-publisher",[]),t.initWebRtcStats(),m.info("'Publisher' ("+t.streamId+") successfully "+(e?"reconnected":"published")+" to session"),n()})).catch((function(e){i(e)}))}))}(o)})).catch((function(e){i(new Error("(publish) SDP offer error: "+JSON.stringify(e)))}))}))},t.prototype.initWebRtcPeerReceive=function(e){var t=this;return new Promise((function(n,i){var o={audio:t.inboundStreamOpts.hasAudio,video:t.inboundStreamOpts.hasVideo};m.debug("'Session.subscribe(Stream)' called. Constraints of generate SDP offer",o);var r={onicecandidate:t.connection.sendIceCandidate.bind(t.connection),mediaConstraints:o,iceServers:t.getIceServersConf(),simulcast:!1};t.webRtcPeer=new c.WebRtcPeerRecvonly(r),t.webRtcPeer.addIceConnectionStateChangeListener(t.streamId),t.webRtcPeer.generateOffer().then((function(o){!function(o){m.debug("Sending SDP offer to subscribe to "+t.streamId,o);var r=e?"reconnectStream":"receiveVideoFrom",a={sdpOffer:o};a[e?"stream":"sender"]=t.streamId,t.session.openvidu.sendRequest(r,a,(function(o,r){o?i(new Error("Error on recvVideoFrom: "+JSON.stringify(o))):(t.session.isFirstIonicIosSubscriber&&(t.session.isFirstIonicIosSubscriber=!1,setTimeout((function(){t.session.countDownForIonicIosSubscribersActive=!1}),400)),t.webRtcPeer.processAnswer(r.sdpAnswer,t.session.countDownForIonicIosSubscribersActive).then((function(){m.info("'Subscriber' ("+t.streamId+") successfully "+(e?"reconnected":"subscribed")),t.remotePeerSuccessfullyEstablished(),t.initWebRtcStats(),n()})).catch((function(e){i(e)})))}))}(o)})).catch((function(e){i(new Error("(subscribe) SDP offer error: "+JSON.stringify(e)))}))}))},t.prototype.remotePeerSuccessfullyEstablished=function(){var e;this.mediaStream=new MediaStream;for(var t=0,n=this.webRtcPeer.pc.getReceivers();t<n.length;t++)(e=n[t]).track&&this.mediaStream.addTrack(e.track);if(m.debug("Peer remote stream",this.mediaStream),this.mediaStream){if(this.streamManager instanceof a.Subscriber){if(this.mediaStream.getAudioTracks()[0]){var i=!!this.streamManager.properties.subscribeToAudio;this.mediaStream.getAudioTracks()[0].enabled=i}this.mediaStream.getVideoTracks()[0]&&(i=!!this.streamManager.properties.subscribeToVideo,this.mediaStream.getVideoTracks()[0].enabled=i)}this.updateMediaStreamInVideos(),this.initHarkEvents()}},t.prototype.initHarkEvents=function(){this.mediaStream.getAudioTracks()[0]&&(this.streamManager.remote&&(this.session.startSpeakingEventsEnabled&&this.enableStartSpeakingEvent(),this.session.startSpeakingEventsEnabledOnce&&this.enableOnceStartSpeakingEvent(),this.session.stopSpeakingEventsEnabled&&this.enableStopSpeakingEvent(),this.session.stopSpeakingEventsEnabledOnce&&this.enableOnceStopSpeakingEvent()),this.volumeChangeEventEnabled&&this.enableVolumeChangeEvent(!0),this.volumeChangeEventEnabledOnce&&this.enableOnceVolumeChangeEvent(!0))},t.prototype.initWebRtcStats=function(){this.webRtcStats=new l.WebRtcStats(this),this.webRtcStats.initWebRtcStats()},t.prototype.stopWebRtcStats=function(){this.webRtcStats&&this.webRtcStats.isEnabled()&&this.webRtcStats.stopWebRtcStats()},t.prototype.getIceServersConf=function(){return this.session.openvidu.advancedConfiguration.iceServers?"freeice"===this.session.openvidu.advancedConfiguration.iceServers?void 0:this.session.openvidu.advancedConfiguration.iceServers:this.session.openvidu.iceServers?this.session.openvidu.iceServers:void 0},t.prototype.gatherStatsForPeer=function(){var e=this;return new Promise((function(t,n){e.isLocal()?e.getRTCPeerConnection().getSenders().forEach((function(t){return t.getStats().then((function(t){t.forEach((function(t){if(e.isReportWanted(t)){var n={};n.type=t.type,n.timestamp=t.timestamp,n.id=t.id,"outbound-rtp"===t.type&&(n.ssrc=t.ssrc,n.firCount=t.firCount,n.pliCount=t.pliCount,n.nackCount=t.nackCount,n.qpSum=t.qpSum,n.mediaType=t.kind?t.kind:t.mediaType?t.mediaType:-1!==t.id.indexOf("VideoStream")?"video":"audio","video"===n.mediaType&&(n.framesEncoded=t.framesEncoded),n.packetsSent=t.packetsSent,n.bytesSent=t.bytesSent),"candidate-pair"===t.type&&void 0!==t.totalRoundTripTime&&(n.availableOutgoingBitrate=t.availableOutgoingBitrate,n.rtt=t.currentRoundTripTime,n.averageRtt=t.totalRoundTripTime/t.responsesReceived),m.log(n)}}))}))})):e.getRTCPeerConnection().getReceivers().forEach((function(t){return t.getStats().then((function(t){t.forEach((function(t){if(e.isReportWanted(t)){var n={};n.type=t.type,n.timestamp=t.timestamp,n.id=t.id,"inbound-rtp"===t.type&&(n.ssrc=t.ssrc,n.firCount=t.firCount,n.pliCount=t.pliCount,n.nackCount=t.nackCount,n.qpSum=t.qpSum,n.mediaType=t.kind?t.kind:t.mediaType?t.mediaType:-1!==t.id.indexOf("VideoStream")?"video":"audio","video"===n.mediaType&&(n.framesDecoded=t.framesDecoded),n.packetsReceived=t.packetsReceived,n.packetsLost=t.packetsLost,n.jitter=t.jitter,n.bytesReceived=t.bytesReceived),"candidate-pair"===t.type&&void 0!==t.totalRoundTripTime&&(n.availableIncomingBitrate=t.availableIncomingBitrate,n.rtt=t.currentRoundTripTime,n.averageRtt=t.totalRoundTripTime/t.responsesReceived),m.log(n)}}))}))}))}))},t.prototype.isReportWanted=function(e){return"inbound-rtp"===e.type&&!this.isLocal()||"outbound-rtp"===e.type&&this.isLocal()||"candidate-pair"===e.type&&e.nominated&&e.bytesSent>0},t}(s.EventDispatcher);t.Stream=v},Dztv:function(e,t,n){"use strict";t.__esModule=!0;var i=n("6+/i"),o=n("9m68").OpenViduLogger.getInstance(),r=function(){function e(){this.userHandlerArrowHandler=new WeakMap,this.ee=new i}return e.prototype.off=function(e,t){if(t){var n=this.userHandlerArrowHandler.get(t);n&&this.ee.off(e,n),this.userHandlerArrowHandler.delete(t)}else this.ee.removeAllListeners(e);return this},e.prototype.onAux=function(e,t,n){var i=function(e){e?o.info(t,e):o.info(t),n(e)};return this.userHandlerArrowHandler.set(n,i),this.ee.on(e,i),this},e.prototype.onceAux=function(e,t,n){var i=this,r=function(e){e?o.info(t,e):o.info(t),n(e),i.userHandlerArrowHandler.delete(n)};return this.userHandlerArrowHandler.set(n,r),this.ee.once(e,r),this},e}();t.EventDispatcher=r},EDod:function(e,t,n){var i=n("AeG9"),o=n("cUzU");Date.now=Date.now||function(){return+new Date};var r=console;e.exports=function(e){var t,n=this,a=e.ws,s=-1,c=0,l=!0,u=!1,d="DISCONNECTED",g=a.onreconnecting,h=a.onreconnected,p=a.onconnected,f=a.onerror;e.rpc.pull=function(e,t){t.reply(null,"push")},a.onreconnecting=function(){r.debug("--------- ONRECONNECTING -----------"),"RECONNECTING"!==d?(O(),d="RECONNECTING",g&&g()):r.error("Websocket already in RECONNECTING state when receiving a new ONRECONNECTING message. Ignoring it")},a.onreconnected=function(){r.debug("--------- ONRECONNECTED -----------"),"CONNECTED"!==d?(d="CONNECTED",b(),h&&h()):r.error("Websocket already in CONNECTED state when receiving a new ONRECONNECTED message. Ignoring it")},a.onconnected=function(){r.debug("--------- ONCONNECTED -----------"),"CONNECTED"!==d?(d="CONNECTED",l=!0,C(),p&&p()):r.error("Websocket already in CONNECTED state when receiving a new ONCONNECTED message. Ignoring it")},a.onerror=function(e){r.debug("--------- ONERROR -----------"),d="DISCONNECTED",O(),f&&f(e)};var m=new o(a);r.debug("Connecting websocket to URI: "+a.uri);var v=new i(i.packers.JsonRPC,{request_timeout:e.rpc.requestTimeout,ping_request_timeout:e.rpc.heartbeatRequestTimeout},m,(function(t){r.debug("Received request: "+JSON.stringify(t));try{var n=e.rpc[t.method];void 0===n?r.error("Method "+t.method+" not registered in client"):n(t.params,t)}catch(i){r.error("Exception processing request: "+JSON.stringify(t)),r.error(i)}}));function b(){r.debug("notReconnectIfNumLessThan = "+c+" (old="+s+")"),s=c}function y(){if(l){var t=null;0!=c&&c!=s||(t={interval:e.heartbeat||5e3}),c++,n.send("ping",t,(i=c,function(e,t){e&&(r.debug("Error in ping request #"+i+" ("+e.message+")"),i>s&&(l=!1,b(),r.debug("Server did not respond to ping message #"+i+". Reconnecting... "),m.reconnectWs()))}))}else r.debug("Trying to send ping, but ping is not enabled");var i}function C(){u||(r.debug("Starting ping (if configured)"),u=!0,null!=e.heartbeat&&(t=setInterval(y,e.heartbeat),y()))}function O(){clearInterval(t),u=!1,l=!1,c=-1,v.cancel()}this.send=function(e,t,n){"ping"!==e&&r.debug("Request: method:"+e+" params:"+JSON.stringify(t));var i=Date.now();v.encode(e,t,(function(o,a){if(o){try{r.error("ERROR:"+o.message+" in Request: method:"+e+" params:"+JSON.stringify(t)+" request:"+o.request),o.data&&r.error("ERROR DATA:"+JSON.stringify(o.data))}catch(s){}o.requestTime=i}n&&(null!=a&&"pong"!==a.value&&r.debug("Response: "+JSON.stringify(a)),n(o,a))}))},this.close=function(n,i){r.debug("Closing  with code: "+n+" because: "+i),null!=t&&(r.debug("Clearing ping interval"),clearInterval(t)),u=!1,l=!1,e.sendCloseMessage?(r.debug("Sending close message"),this.send("closeSession",null,(function(e,t){e&&r.error("Error sending close message: "+JSON.stringify(e)),m.close(n,i)}))):m.close(n,i)},this.forceClose=function(e){m.forceClose(e)},this.reconnect=function(){m.reconnectWs()},this.resetPing=function(){l=!0,c=0,C()}}},EcWD:function(e,t){var n,i,o="screen";if("undefined"!=typeof window&&"undefined"!=typeof navigator&&void 0!==navigator.userAgent){var r=void 0!==window.InstallTrigger;window.opera||navigator.userAgent.indexOf(" OPR/"),window,window.addEventListener("message",(function(e){e.origin==window.location.origin&&function(e){if("PermissionDeniedError"==e){if(i)return i("PermissionDeniedError");throw new Error("PermissionDeniedError")}"rtcmulticonnection-extension-loaded"==e&&(o="desktop"),e.sourceId&&i&&i(n=e.sourceId,!0===e.canRequestAudioTrack)}(e.data)}))}function a(e){if(!e)throw'"callback" parameter is mandatory.';if(n)return e(n);i=e,window.postMessage("get-sourceId","*")}function s(e,t){if(n="",r)return e(null,{mozMediaSource:"window",mediaSource:"window"});var s={mandatory:{chromeMediaSource:o,maxWidth:screen.width>1920?screen.width:1920,maxHeight:screen.height>1080?screen.height:1080},optional:[]};"desktop"!=o||n?("desktop"==o&&(s.mandatory.chromeMediaSourceId=n),e(null,s)):t?function(e){if(!e)throw'"callback" parameter is mandatory.';if(n)return e(n);i=e,window.postMessage("audio-plus-tab","*")}((function(t,n){s.mandatory.chromeMediaSourceId=t,n&&(s.canRequestAudioTrack=!0),e("PermissionDeniedError"==t?t:null,s)})):a((function(t){s.mandatory.chromeMediaSourceId=t,e("PermissionDeniedError"==t?t:null,s)}))}t.getScreenConstraints=s,t.getScreenConstraintsWithAudio=function(e){s(e,!0)},t.isChromeExtensionAvailable=function(e){if(e){if("desktop"==o)return e(!0);window.postMessage("are-you-there","*"),setTimeout((function(){e("screen"!=o)}),2e3)}},t.getChromeExtensionStatus=function(e,t){if(r)return t("not-chrome");2!=arguments.length&&(t=e,e="lfcgfepafnobdloecchnfaclibenjold");var n=document.createElement("img");n.src="chrome-extension://"+e+"/icon.png",n.onload=function(){o="screen",window.postMessage("are-you-there","*"),setTimeout((function(){t("screen"==o?"installed-disabled":"installed-enabled")}),2e3)},n.onerror=function(){t("not-installed")}},t.getSourceId=a},FlKs:function(e,t,n){"use strict";t.__esModule=!0,t.stateify=t.TokenState=t.CharacterState=void 0;var i=n("JUw6"),o=function(e){this.j=[],this.T=e||null};o.prototype={defaultTransition:!1,on:function(e,t){if(e instanceof Array){for(var n=0;n<e.length;n++)this.j.push([e[n],t]);return this}return this.j.push([e,t]),this},next:function(e){for(var t=0;t<this.j.length;t++){var n=this.j[t],i=n[1];if(this.test(e,n[0]))return i}return this.defaultTransition},accepts:function(){return!!this.T},test:function(e,t){return e===t},emit:function(){return this.T}};var r=(0,i.inherits)(o,(function(e){this.j=[],this.T=e||null}),{test:function(e,t){return e===t||t instanceof RegExp&&t.test(e)}}),a=(0,i.inherits)(o,(function(e){this.j=[],this.T=e||null}),{jump:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.next(new e(""));return n===this.defaultTransition?(n=new this.constructor(t),this.on(e,n)):t&&(n.T=t),n},test:function(e,t){return e instanceof t}});t.CharacterState=r,t.TokenState=a,t.stateify=function(e,t,n,i){for(var o=0,a=e.length,s=t,c=[],l=void 0;o<a&&(l=s.next(e[o]));)s=l,o++;if(o>=a)return[];for(;o<a-1;)l=new r(i),c.push(l),s.on(e[o],l),s=l,o++;return l=new r(n),c.push(l),s.on(e[a-1],l),c}},HgqT:function(e,t){e.exports="function"==typeof Object.create?function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},HxXY:function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0;var r=function(e){function t(t,n,i){var o=e.call(this,!1,t,n)||this;return o.value=i,o}return o(t,e),t.prototype.callDefaultBehavior=function(){},t}(n("hzOQ").Event);t.StreamManagerEvent=r},IXxz:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){var t=e.scanner.TOKENS,n=e.parser,i=n.State,o=e.parser.start,r=t.DOMAIN,a=t.LOCALHOST,s=t.NUM,c=t.SLASH,l=t.TLD,u=t.UNDERSCORE,d=t.DOT,g=t.AT;function h(e){this.v=e}e.inherits(n.TOKENS.Base,h,{type:"mention",isLink:!0,toHref:function(){return"/"+this.toString().substr(1)}});var p=o.jump(t.AT),f=new i,m=new i(h),v=new i,b=new i;p.on(u,f),f.on(u,f).on(d,f),p.on(r,m).on(a,m).on(l,m).on(s,m),f.on(r,m).on(a,m).on(l,m).on(s,m),m.on(r,m).on(a,m).on(l,m).on(s,m).on(u,m),m.on(c,v).on(d,v).on(g,v),v.on(u,b),b.on(u,b),v.on(r,m).on(a,m).on(l,m).on(s,m),b.on(r,m).on(a,m).on(l,m).on(s,m)}},JTMn:function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0;var r=n("ryRr"),a=n("74bm"),s=n("bk74"),c=n("Dztv"),l=n("8KVD"),u=n("+ig+"),d=n("rUL0"),g=n("ksJj"),h=n("suHS"),p=n("Te8r"),f=n("BwMD"),m=n("Tt94"),v=n("/dLB"),b=n("bDgZ"),y=n("9m68").OpenViduLogger.getInstance(),C=function(e){function t(t){var n=e.call(this)||this;return n.streamManagers=[],n.remoteStreamsCreated={},n.isFirstIonicIosSubscriber=!0,n.countDownForIonicIosSubscribersActive=!0,n.remoteConnections={},n.startSpeakingEventsEnabled=!1,n.startSpeakingEventsEnabledOnce=!1,n.stopSpeakingEventsEnabled=!1,n.stopSpeakingEventsEnabledOnce=!1,n.openvidu=t,n}return o(t,e),t.prototype.connect=function(e,t){var n=this;return new Promise((function(i,o){n.processToken(e),n.openvidu.checkSystemRequirements()?(n.options={sessionId:n.sessionId,participantId:e,metadata:t?n.stringClientMetadata(t):""},n.connectAux(e).then((function(){i()})).catch((function(e){o(e)}))):o(new m.OpenViduError(m.OpenViduErrorName.BROWSER_NOT_SUPPORTED,"Browser "+b.name+" (version "+b.version+") for "+b.os.family+" is not supported in OpenVidu"))}))},t.prototype.disconnect=function(){this.leave(!1,"disconnect")},t.prototype.subscribe=function(e,t,n,i){var o,r={};r=n&&"function"!=typeof n?{insertMode:void 0!==n.insertMode?"string"==typeof n.insertMode?v.VideoInsertMode[n.insertMode]:r.insertMode:v.VideoInsertMode.APPEND,subscribeToAudio:void 0===n.subscribeToAudio||n.subscribeToAudio,subscribeToVideo:void 0===n.subscribeToVideo||n.subscribeToVideo}:{insertMode:v.VideoInsertMode.APPEND,subscribeToAudio:!0,subscribeToVideo:!0},n&&"function"==typeof n?o=n:i&&(o=i),y.info("Subscribing to "+e.connection.connectionId),e.subscribe().then((function(){y.info("Subscribed correctly to "+e.connection.connectionId),void 0!==o&&o(void 0)})).catch((function(e){void 0!==o&&o(e)}));var a=new s.Subscriber(e,t,r);return a.targetElement&&e.streamManager.createVideoElement(a.targetElement,r.insertMode),a},t.prototype.subscribeAsync=function(e,t,n){var i=this;return new Promise((function(o,r){var a,s=function(e){e?r(e):o(a)};a=n?i.subscribe(e,t,n,s):i.subscribe(e,t,s)}))},t.prototype.unsubscribe=function(e){var t=e.stream.connection.connectionId;y.info("Unsubscribing from "+t),this.openvidu.sendRequest("unsubscribeFromVideo",{sender:e.stream.connection.connectionId},(function(n,i){n?y.error("Error unsubscribing from "+t,n):y.info("Unsubscribed correctly from "+t),e.stream.disposeWebRtcPeer(),e.stream.disposeMediaStream()})),e.stream.streamManager.removeAllVideos()},t.prototype.publish=function(e){var t=this;return new Promise((function(n,i){e.session=t,e.stream.session=t,e.stream.publishedOnce?e.initialize().then((function(){t.connection.addStream(e.stream),e.reestablishStreamPlayingEvent(),e.stream.publish().then((function(){n()})).catch((function(e){i(e)}))})).catch((function(e){i(e)})):(t.connection.addStream(e.stream),e.stream.publish().then((function(){n()})).catch((function(e){i(e)})))}))},t.prototype.unpublish=function(e){var t=e.stream;if(t.connection)if(t.connection===this.connection){y.info("Unpublishing local media ("+t.connection.connectionId+")"),this.openvidu.sendRequest("unpublishVideo",(function(e,t){e?y.error(e):y.info("Media unpublished correctly")})),t.disposeWebRtcPeer(),delete t.connection.stream;var n=new p.StreamEvent(!0,e,"streamDestroyed",e.stream,"unpublish");e.emitEvent("streamDestroyed",[n]),n.callDefaultBehavior()}else y.error("The associated Connection object of this Publisher is not your local Connection.Only moderators can force unpublish on remote Streams via 'forceUnpublish' method",t);else y.error("The associated Connection object of this Publisher is null",t)},t.prototype.forceDisconnect=function(e){var t=this;return new Promise((function(n,i){y.info("Forcing disconnect for connection "+e.connectionId),t.openvidu.sendRequest("forceDisconnect",{connectionId:e.connectionId},(function(t,o){t?(y.error("Error forcing disconnect for Connection "+e.connectionId,t),i(401===t.code?new m.OpenViduError(m.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to force a disconnection"):t)):(y.info("Forcing disconnect correctly for Connection "+e.connectionId),n())}))}))},t.prototype.forceUnpublish=function(e){var t=this;return new Promise((function(n,i){y.info("Forcing unpublish for stream "+e.streamId),t.openvidu.sendRequest("forceUnpublish",{streamId:e.streamId},(function(t,o){t?(y.error("Error forcing unpublish for Stream "+e.streamId,t),i(401===t.code?new m.OpenViduError(m.OpenViduErrorName.OPENVIDU_PERMISSION_DENIED,"You don't have permissions to force an unpublishing"):t)):(y.info("Forcing unpublish correctly for Stream "+e.streamId),n())}))}))},t.prototype.signal=function(e){var t=this;return new Promise((function(n,i){var o={};if(e.to&&e.to.length>0){var r=[];e.to.forEach((function(e){e.connectionId&&r.push(e.connectionId)})),o.to=r}else o.to=[];o.data=e.data?e.data:"";var a=e.type?e.type:"signal";a&&"signal:"!==a.substring(0,7)&&(a="signal:"+a),o.type=a,t.openvidu.sendRequest("sendMessage",{message:JSON.stringify(o)},(function(e,t){e?i(e):n()}))}))},t.prototype.on=function(t,n){if(e.prototype.onAux.call(this,t,"Event '"+t+"' triggered by 'Session'",n),"publisherStartSpeaking"===t)for(var i in this.startSpeakingEventsEnabled=!0,this.remoteConnections)(o=this.remoteConnections[i].stream)&&o.hasAudio&&o.enableStartSpeakingEvent();if("publisherStopSpeaking"===t)for(var i in this.stopSpeakingEventsEnabled=!0,this.remoteConnections){var o;(o=this.remoteConnections[i].stream)&&o.hasAudio&&o.enableStopSpeakingEvent()}return this},t.prototype.once=function(t,n){if(e.prototype.onceAux.call(this,t,"Event '"+t+"' triggered once by 'Session'",n),"publisherStartSpeaking"===t)for(var i in this.startSpeakingEventsEnabledOnce=!0,this.remoteConnections)(o=this.remoteConnections[i].stream)&&o.hasAudio&&o.enableOnceStartSpeakingEvent();if("publisherStopSpeaking"===t)for(var i in this.stopSpeakingEventsEnabledOnce=!0,this.remoteConnections){var o;(o=this.remoteConnections[i].stream)&&o.hasAudio&&o.enableOnceStopSpeakingEvent()}return this},t.prototype.off=function(t,n){if(e.prototype.off.call(this,t,n),"publisherStartSpeaking"===t&&0===this.ee.getListeners(t).length)for(var i in this.startSpeakingEventsEnabled=!1,this.remoteConnections)(o=this.remoteConnections[i].stream)&&o.disableStartSpeakingEvent(!1);if("publisherStopSpeaking"===t&&0===this.ee.getListeners(t).length)for(var i in this.stopSpeakingEventsEnabled=!1,this.remoteConnections){var o;(o=this.remoteConnections[i].stream)&&o.disableStopSpeakingEvent(!1)}return this},t.prototype.onParticipantJoined=function(e){var t=this;this.getConnection(e.id,"").then((function(t){y.warn("Connection "+e.id+" already exists in connections list")})).catch((function(n){var i=new r.Connection(t,e);t.remoteConnections[e.id]=i,t.ee.emitEvent("connectionCreated",[new l.ConnectionEvent(!1,t,"connectionCreated",i,"")])}))},t.prototype.onParticipantLeft=function(e){var t=this;this.getRemoteConnection(e.connectionId,"Remote connection "+e.connectionId+" unknown when 'onParticipantLeft'. Existing remote connections: "+JSON.stringify(Object.keys(this.remoteConnections))).then((function(n){if(n.stream){var i=n.stream,o=new p.StreamEvent(!0,t,"streamDestroyed",i,e.reason);t.ee.emitEvent("streamDestroyed",[o]),o.callDefaultBehavior(),delete t.remoteStreamsCreated[i.streamId],0===Object.keys(t.remoteStreamsCreated).length&&(t.isFirstIonicIosSubscriber=!0,t.countDownForIonicIosSubscribersActive=!0)}delete t.remoteConnections[n.connectionId],t.ee.emitEvent("connectionDestroyed",[new l.ConnectionEvent(!1,t,"connectionDestroyed",n,e.reason)])})).catch((function(e){y.error(e)}))},t.prototype.onParticipantPublished=function(e){var t,n=this,i=function(e){n.remoteConnections[e.connectionId]=e,n.remoteStreamsCreated[e.stream.streamId]||n.ee.emitEvent("streamCreated",[new p.StreamEvent(!1,n,"streamCreated",e.stream,"")]),n.remoteStreamsCreated[e.stream.streamId]=!0};this.getRemoteConnection(e.id,"Remote connection '"+e.id+"' unknown when 'onParticipantPublished'. Existing remote connections: "+JSON.stringify(Object.keys(this.remoteConnections))).then((function(n){t=n,e.metadata=n.data,t.options=e,t.initRemoteStreams(e.streams),i(t)})).catch((function(o){t=new r.Connection(n,e),i(t)}))},t.prototype.onParticipantUnpublished=function(e){var t=this;e.connectionId===this.connection.connectionId?this.stopPublisherStream(e.reason):this.getRemoteConnection(e.connectionId,"Remote connection '"+e.connectionId+"' unknown when 'onParticipantUnpublished'. Existing remote connections: "+JSON.stringify(Object.keys(this.remoteConnections))).then((function(n){var i=new p.StreamEvent(!0,t,"streamDestroyed",n.stream,e.reason);t.ee.emitEvent("streamDestroyed",[i]),i.callDefaultBehavior();var o=n.stream.streamId;delete t.remoteStreamsCreated[o],0===Object.keys(t.remoteStreamsCreated).length&&(t.isFirstIonicIosSubscriber=!0,t.countDownForIonicIosSubscribersActive=!0),n.removeStream(o)})).catch((function(e){y.error(e)}))},t.prototype.onParticipantEvicted=function(e){e.connectionId===this.connection.connectionId&&this.sessionId&&!this.connection.disposed&&this.leave(!0,e.reason)},t.prototype.onNewMessage=function(e){var t=this;y.info("New signal: "+JSON.stringify(e));var n=e.type?e.type.replace(/^(signal:)/,""):void 0;e.from?this.getConnection(e.from,"Connection '"+e.from+"' unknow when 'onNewMessage'. Existing remote connections: "+JSON.stringify(Object.keys(this.remoteConnections))+". Existing local connection: "+this.connection.connectionId).then((function(i){t.ee.emitEvent("signal",[new h.SignalEvent(t,n,e.data,i)]),"signal"!==e.type&&t.ee.emitEvent(e.type,[new h.SignalEvent(t,n,e.data,i)])})).catch((function(e){y.error(e)})):(this.ee.emitEvent("signal",[new h.SignalEvent(this,n,e.data,void 0)]),"signal"!==e.type&&this.ee.emitEvent(e.type,[new h.SignalEvent(this,n,e.data,void 0)]))},t.prototype.onStreamPropertyChanged=function(e){var t=this,n=function(n){if(n.stream&&n.stream.streamId===e.streamId){var i=n.stream,o=void 0;switch(e.property){case"audioActive":o=i.audioActive,e.newValue="true"===e.newValue,i.audioActive=e.newValue;break;case"videoActive":o=i.videoActive,e.newValue="true"===e.newValue,i.videoActive=e.newValue;break;case"videoDimensions":o=i.videoDimensions,e.newValue=JSON.parse(JSON.parse(e.newValue)),i.videoDimensions=e.newValue;break;case"filter":o=i.filter,e.newValue=Object.keys(e.newValue).length>0?e.newValue:void 0,void 0!==e.newValue?(i.filter=new a.Filter(e.newValue.type,e.newValue.options),i.filter.stream=i,e.newValue.lastExecMethod&&(i.filter.lastExecMethod=e.newValue.lastExecMethod)):delete i.filter,e.newValue=i.filter}t.ee.emitEvent("streamPropertyChanged",[new f.StreamPropertyChangedEvent(t,i,e.property,e.newValue,o,e.reason)]),i.streamManager&&i.streamManager.emitEvent("streamPropertyChanged",[new f.StreamPropertyChangedEvent(i.streamManager,i,e.property,e.newValue,o,e.reason)])}else y.error("No stream with streamId '"+e.streamId+"' found for connection '"+e.connectionId+"' on 'streamPropertyChanged' event")};e.connectionId===this.connection.connectionId?n(this.connection):this.getRemoteConnection(e.connectionId,"Remote connection "+e.connectionId+" unknown when 'onStreamPropertyChanged'. Existing remote connections: "+JSON.stringify(Object.keys(this.remoteConnections))).then((function(e){n(e)})).catch((function(e){y.error(e)}))},t.prototype.recvIceCandidate=function(e){var t={candidate:e.candidate,component:e.component,foundation:e.foundation,port:e.port,priority:e.priority,protocol:e.protocol,relatedAddress:e.relatedAddress,relatedPort:e.relatedPort,sdpMid:e.sdpMid,sdpMLineIndex:e.sdpMLineIndex,tcpType:e.tcpType,usernameFragment:e.usernameFragment,type:e.type,toJSON:function(){return{candidate:e.candidate}}};this.getConnection(e.senderConnectionId,"Connection not found for connectionId "+e.senderConnectionId+" owning endpoint "+e.endpointName+". Ice candidate will be ignored: "+t).then((function(n){var i=n.stream;i.getWebRtcPeer().addIceCandidate(t).catch((function(t){y.error("Error adding candidate for "+i.streamId+" stream of endpoint "+e.endpointName+": "+t)}))})).catch((function(e){y.error(e)}))},t.prototype.onSessionClosed=function(e){y.info("Session closed: "+JSON.stringify(e));var t=e.sessionId;void 0!==t?this.ee.emitEvent("session-closed",[{session:t}]):y.warn("Session undefined on session closed",e)},t.prototype.onLostConnection=function(e){y.warn("Lost connection in Session "+this.sessionId),this.sessionId&&!this.connection.disposed&&this.leave(!0,e)},t.prototype.onRecoveredConnection=function(){y.info("Recovered connection in Session "+this.sessionId),this.reconnectBrokenStreams(),this.ee.emitEvent("reconnected",[])},t.prototype.onMediaError=function(e){y.error("Media error: "+JSON.stringify(e));var t=e.error;t?this.ee.emitEvent("error-media",[{error:t}]):y.warn("Received undefined media error. Params:",e)},t.prototype.onRecordingStarted=function(e){this.ee.emitEvent("recordingStarted",[new d.RecordingEvent(this,"recordingStarted",e.id,e.name)])},t.prototype.onRecordingStopped=function(e){this.ee.emitEvent("recordingStopped",[new d.RecordingEvent(this,"recordingStopped",e.id,e.name,e.reason)])},t.prototype.onFilterEventDispatched=function(e){var t=e.connectionId;this.getConnection(t,"No connection found for connectionId "+t).then((function(t){y.info("Filter event dispatched");var n=t.stream;n.filter.handlers[e.eventType](new u.FilterEvent(n.filter,e.eventType,e.data))}))},t.prototype.reconnectBrokenStreams=function(){y.info("Re-establishing media connections...");var e=!1;this.connection.stream&&this.connection.stream.streamIceConnectionStateBroken()&&(y.warn("Re-establishing Publisher "+this.connection.stream.streamId),this.connection.stream.initWebRtcPeerSend(!0),e=!0);for(var t=0,n=Object.values(this.remoteConnections);t<n.length;t++){var i=n[t];i.stream&&i.stream.streamIceConnectionStateBroken()&&(y.warn("Re-establishing Subscriber "+i.stream.streamId),i.stream.initWebRtcPeerReceive(!0),e=!0)}e||y.info("There were no media streams in need of a reconnection")},t.prototype.emitEvent=function(e,t){this.ee.emitEvent(e,t)},t.prototype.leave=function(e,t){var n=this;if(y.info("Leaving Session (forced="+(e=!!e)+")"),this.connection){if(this.connection.disposed||e?this.openvidu.closeWs():this.openvidu.sendRequest("leaveRoom",(function(e,t){e&&y.error(e),n.openvidu.closeWs()})),this.stopPublisherStream(t),!this.connection.disposed){var i=new g.SessionDisconnectedEvent(this,t);this.ee.emitEvent("sessionDisconnected",[i]),i.callDefaultBehavior()}}else y.warn("You were not connected to the session "+this.sessionId)},t.prototype.initializeParams=function(e){return{token:e||"",session:this.sessionId,platform:b.description?b.description:"unknown",metadata:this.options.metadata?this.options.metadata:"",secret:this.openvidu.getSecret(),recorder:this.openvidu.getRecorder()}},t.prototype.connectAux=function(e){var t=this;return new Promise((function(n,i){t.openvidu.startWs((function(o){if(o)i(o);else{var a=t.initializeParams(e);t.openvidu.sendRequest("joinRoom",a,(function(e,o){if(e)i(e);else{t.capabilities={subscribe:!0,publish:"SUBSCRIBER"!==t.openvidu.role,forceUnpublish:"MODERATOR"===t.openvidu.role,forceDisconnect:"MODERATOR"===t.openvidu.role},t.connection=new r.Connection(t),t.connection.connectionId=o.id,t.connection.creationTime=o.createdAt,t.connection.data=o.metadata,t.connection.rpcSessionId=o.sessionId;var a={connections:new Array,streams:new Array};o.value.forEach((function(e){var n=new r.Connection(t,e);t.remoteConnections[n.connectionId]=n,a.connections.push(n),n.stream&&(t.remoteStreamsCreated[n.stream.streamId]=!0,a.streams.push(n.stream))})),t.ee.emitEvent("connectionCreated",[new l.ConnectionEvent(!1,t,"connectionCreated",t.connection,"")]),a.connections.forEach((function(e){t.ee.emitEvent("connectionCreated",[new l.ConnectionEvent(!1,t,"connectionCreated",e,"")])})),a.streams.forEach((function(e){t.ee.emitEvent("streamCreated",[new p.StreamEvent(!1,t,"streamCreated",e,"")])})),n()}}))}}))}))},t.prototype.stopPublisherStream=function(e){this.connection.stream&&(this.connection.stream.disposeWebRtcPeer(),this.connection.stream.isLocalStreamPublished&&this.connection.stream.ee.emitEvent("local-stream-destroyed",[e]))},t.prototype.stringClientMetadata=function(e){return"string"!=typeof e?JSON.stringify(e):e},t.prototype.getConnection=function(e,t){var n=this;return new Promise((function(i,o){var r=n.remoteConnections[e];r?i(r):n.connection.connectionId===e?i(n.connection):o(new m.OpenViduError(m.OpenViduErrorName.GENERIC_ERROR,t))}))},t.prototype.getRemoteConnection=function(e,t){var n=this;return new Promise((function(i,o){var r=n.remoteConnections[e];r?i(r):o(new m.OpenViduError(m.OpenViduErrorName.GENERIC_ERROR,t))}))},t.prototype.processToken=function(e){var t=e.match(/^(wss?\:)\/\/(([^:\/?#]*)(?:\:([0-9]+))?)([\/]{0,1}[^?#]*)(\?[^#]*|)(#.*|)$/);if(t){var n={protocol:t[1],host:t[2],hostname:t[3],port:t[4],pathname:t[5],search:t[6],hash:t[7]},i=e.split("?"),o=decodeURI(i[1]).split("&").map((function(e){return e.split("=")})).reduce((function(e,t){return e[t[0]]=t[1],e}),{});this.sessionId=o.sessionId;var r=o.secret,a=o.recorder,s=o.coturnIp,c=o.turnUsername,l=o.turnCredential,u=o.role,d=o.webrtcStatsInterval,g=o.version;if(r&&(this.openvidu.secret=r),a&&(this.openvidu.recorder=!0),c&&l){var h="turn:"+s+":3478";this.openvidu.iceServers=[{urls:["stun:"+s+":3478"]},{urls:[h,h+"?transport=tcp"],username:c,credential:l}],y.log("STUN/TURN server IP: "+s),y.log("TURN temp credentials ["+c+":"+l+"]")}u&&(this.openvidu.role=u),d&&(this.openvidu.webrtcStatsInterval=+d),g&&(y.info("openvidu-server version: "+g),g!==this.openvidu.libraryVersion&&y.error("OpenVidu Server ("+g+") and OpenVidu Browser ("+this.openvidu.libraryVersion+") versions do NOT match. There may be incompatibilities")),this.openvidu.wsUri="wss://"+n.host+"/openvidu",this.openvidu.httpUri="https://"+n.host}else y.error('Token "'+e+'" is not valid')},t}(c.EventDispatcher);t.Session=C},JUw6:function(e,t,n){"use strict";t.__esModule=!0,t.inherits=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=Object.create(e.prototype);for(var o in n)i[o]=n[o];return i.constructor=t,t.prototype=i,t}},KFtI:function(e){e.exports=JSON.parse('["stun.l.google.com:19302","stun1.l.google.com:19302","stun2.l.google.com:19302","stun3.l.google.com:19302","stun4.l.google.com:19302","stun.ekiga.net","stun.ideasip.com","stun.schlund.de","stun.stunprotocol.org:3478","stun.voiparound.com","stun.voipbuster.com","stun.voipstunt.com","stun.voxgratia.org"]')},LXjW:function(e,t,n){"use strict";t.__esModule=!0,t.tokenize=t.test=t.scanner=t.parser=t.options=t.inherits=t.find=void 0;var i=n("JUw6"),o=s(n("MW5i")),r=s(n("t/6/")),a=s(n("QSjB"));function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)});var c=function(e){return a.run(r.run(e))};t.find=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=c(e),i=[],o=0;o<n.length;o++){var r=n[o];!r.isLink||t&&r.type!==t||i.push(r.toObject())}return i},t.inherits=i.inherits,t.options=o,t.parser=a,t.scanner=r,t.test=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=c(e);return 1===n.length&&n[0].isLink&&(!t||n[0].type===t)},t.tokenize=c},MW5i:function(e,t,n){"use strict";t.__esModule=!0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o={defaultProtocol:"http",events:null,format:a,formatHref:a,nl2br:!1,tagName:"a",target:function(e,t){return"url"===t?"_blank":null},validate:!0,ignoreTags:[],attributes:null,className:"linkified"};function r(e){this.defaultProtocol=(e=e||{}).hasOwnProperty("defaultProtocol")?e.defaultProtocol:o.defaultProtocol,this.events=e.hasOwnProperty("events")?e.events:o.events,this.format=e.hasOwnProperty("format")?e.format:o.format,this.formatHref=e.hasOwnProperty("formatHref")?e.formatHref:o.formatHref,this.nl2br=e.hasOwnProperty("nl2br")?e.nl2br:o.nl2br,this.tagName=e.hasOwnProperty("tagName")?e.tagName:o.tagName,this.target=e.hasOwnProperty("target")?e.target:o.target,this.validate=e.hasOwnProperty("validate")?e.validate:o.validate,this.ignoreTags=[],this.attributes=e.attributes||e.linkAttributes||o.attributes,this.className=e.hasOwnProperty("className")?e.className:e.linkClass||o.className;for(var t=e.hasOwnProperty("ignoreTags")?e.ignoreTags:o.ignoreTags,n=0;n<t.length;n++)this.ignoreTags.push(t[n].toUpperCase())}function a(e){return e}t.defaults=o,t.Options=r,t.contains=function(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return!0;return!1},r.prototype={resolve:function(e){var t=e.toHref(this.defaultProtocol);return{formatted:this.get("format",e.toString(),e),formattedHref:this.get("formatHref",t,e),tagName:this.get("tagName",t,e),className:this.get("className",t,e),target:this.get("target",t,e),events:this.getObject("events",t,e),attributes:this.getObject("attributes",t,e)}},check:function(e){return this.get("validate",e.toString(),e)},get:function(e,t,n){var r=void 0,a=this[e];if(!a)return a;switch(void 0===a?"undefined":i(a)){case"function":return a(t,n.type);case"object":return"function"==typeof(r=a.hasOwnProperty(n.type)?a[n.type]:o[e])?r(t,n.type):r}return a},getObject:function(e,t,n){var i=this[e];return"function"==typeof i?i(t,n.type):i}}},P3vI:function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0;var r=n("Dztv"),a=n("HxXY"),s=n("oIG1"),c=n("/dLB"),l=n("bDgZ"),u=n("9m68").OpenViduLogger.getInstance(),d=function(e){function t(t,n){var i=e.call(this)||this;if(i.videos=[],i.lazyLaunchVideoElementCreatedEvent=!1,i.stream=t,i.stream.streamManager=i,i.remote=!i.stream.isLocal(),n){var o=void 0;"string"==typeof n?o=document.getElementById(n):n instanceof HTMLElement&&(o=n),o&&(i.firstVideoElement={targetElement:o,video:document.createElement("video"),id:"",canplayListenerAdded:!1},"Safari"===l.name&&i.firstVideoElement.video.setAttribute("playsinline","true"),i.targetElement=o,i.element=o)}return i.canPlayListener=function(){i.stream.isLocal()?i.stream.displayMyRemote()?(u.info("Your own remote 'Stream' with id ["+i.stream.streamId+"] video is now playing"),i.ee.emitEvent("remoteVideoPlaying",[new s.VideoElementEvent(i.videos[0].video,i,"remoteVideoPlaying")])):(u.info("Your local 'Stream' with id ["+i.stream.streamId+"] video is now playing"),i.ee.emitEvent("videoPlaying",[new s.VideoElementEvent(i.videos[0].video,i,"videoPlaying")])):(u.info("Remote 'Stream' with id ["+i.stream.streamId+"] video is now playing"),i.ee.emitEvent("videoPlaying",[new s.VideoElementEvent(i.videos[0].video,i,"videoPlaying")])),i.ee.emitEvent("streamPlaying",[new a.StreamManagerEvent(i,"streamPlaying",void 0)])},i}return o(t,e),t.prototype.on=function(t,n){return e.prototype.onAux.call(this,t,"Event '"+t+"' triggered by '"+(this.remote?"Subscriber":"Publisher")+"'",n),"videoElementCreated"===t&&this.stream&&this.lazyLaunchVideoElementCreatedEvent&&(this.ee.emitEvent("videoElementCreated",[new s.VideoElementEvent(this.videos[0].video,this,"videoElementCreated")]),this.lazyLaunchVideoElementCreatedEvent=!1),"streamPlaying"!==t&&"videoPlaying"!==t||this.videos[0]&&this.videos[0].video&&this.videos[0].video.currentTime>0&&!1===this.videos[0].video.paused&&!1===this.videos[0].video.ended&&4===this.videos[0].video.readyState&&(this.ee.emitEvent("streamPlaying",[new a.StreamManagerEvent(this,"streamPlaying",void 0)]),this.ee.emitEvent("videoPlaying",[new s.VideoElementEvent(this.videos[0].video,this,"videoPlaying")])),"streamAudioVolumeChange"===t&&this.stream.hasAudio&&this.stream.enableVolumeChangeEvent(!1),this},t.prototype.once=function(t,n){return e.prototype.onceAux.call(this,t,"Event '"+t+"' triggered once by '"+(this.remote?"Subscriber":"Publisher")+"'",n),"videoElementCreated"===t&&this.stream&&this.lazyLaunchVideoElementCreatedEvent&&this.ee.emitEvent("videoElementCreated",[new s.VideoElementEvent(this.videos[0].video,this,"videoElementCreated")]),"streamPlaying"!==t&&"videoPlaying"!==t||this.videos[0]&&this.videos[0].video&&this.videos[0].video.currentTime>0&&!1===this.videos[0].video.paused&&!1===this.videos[0].video.ended&&4===this.videos[0].video.readyState&&(this.ee.emitEvent("streamPlaying",[new a.StreamManagerEvent(this,"streamPlaying",void 0)]),this.ee.emitEvent("videoPlaying",[new s.VideoElementEvent(this.videos[0].video,this,"videoPlaying")])),"streamAudioVolumeChange"===t&&this.stream.hasAudio&&this.stream.enableOnceVolumeChangeEvent(!1),this},t.prototype.off=function(t,n){return e.prototype.off.call(this,t,n),"streamAudioVolumeChange"===t&&0===this.ee.getListeners(t).length&&this.stream.disableVolumeChangeEvent(!1),this},t.prototype.addVideoElement=function(e){this.initializeVideoProperties(e),this.stream.isLocal()&&this.stream.displayMyRemote()&&e.srcObject!==this.stream.getMediaStream()&&(e.srcObject=this.stream.getMediaStream());for(var t=0,n=this.videos;t<n.length;t++)if(n[t].video===e)return 0;for(var i=1,o=0,r=this.stream.session.streamManagers;o<r.length;o++)if(r[o].disassociateVideo(e)){i=-1;break}return this.stream.session.streamManagers.forEach((function(t){t.disassociateVideo(e)})),this.pushNewStreamManagerVideo({video:e,id:e.id,canplayListenerAdded:!1}),u.info("New video element associated to ",this),i},t.prototype.createVideoElement=function(e,t){var n;if("string"==typeof e){if(!(n=document.getElementById(e)))throw new Error("The provided 'targetElement' couldn't be resolved to any HTML element: "+e)}else{if(!(e instanceof HTMLElement))throw new Error("The provided 'targetElement' couldn't be resolved to any HTML element: "+e);n=e}var i=this.createVideo();this.initializeVideoProperties(i);var o=t||c.VideoInsertMode.APPEND;switch(o){case c.VideoInsertMode.AFTER:n.parentNode.insertBefore(i,n.nextSibling);break;case c.VideoInsertMode.APPEND:n.appendChild(i);break;case c.VideoInsertMode.BEFORE:n.parentNode.insertBefore(i,n);break;case c.VideoInsertMode.PREPEND:n.insertBefore(i,n.childNodes[0]);break;case c.VideoInsertMode.REPLACE:n.parentNode.replaceChild(i,n);break;default:o=c.VideoInsertMode.APPEND,n.appendChild(i)}var r={targetElement:n,video:i,insertMode:o,id:i.id,canplayListenerAdded:!1};return this.pushNewStreamManagerVideo(r),this.ee.emitEvent("videoElementCreated",[new s.VideoElementEvent(r.video,this,"videoElementCreated")]),this.lazyLaunchVideoElementCreatedEvent=!!this.firstVideoElement,i},t.prototype.updatePublisherSpeakingEventsOptions=function(e){var t=this.stream.harkOptions?this.stream.harkOptions:this.stream.session.openvidu.advancedConfiguration.publisherSpeakingEventsOptions||{},n="number"==typeof e.interval?e.interval:"number"==typeof t.interval?t.interval:100,i="number"==typeof e.threshold?e.threshold:"number"==typeof t.threshold?t.threshold:-50;this.stream.harkOptions={interval:n,threshold:i},this.stream.speechEvent&&(this.stream.speechEvent.setInterval(n),this.stream.speechEvent.setThreshold(i))},t.prototype.initializeVideoProperties=function(e){this.stream.isLocal()&&this.stream.displayMyRemote()||e.srcObject!==this.stream.getMediaStream()&&(e.srcObject=this.stream.getMediaStream()),e.autoplay=!0,e.controls=!1,"Safari"===l.name&&e.setAttribute("playsinline","true"),e.id||(e.id=(this.remote?"remote-":"local-")+"video-"+this.stream.streamId,!this.id&&this.targetElement&&(this.id=e.id)),this.remote||this.stream.displayMyRemote()||(e.muted=!0,"rotateY(180deg)"!==e.style.transform||this.stream.outboundStreamOpts.publisherProperties.mirror?this.stream.outboundStreamOpts.publisherProperties.mirror&&!this.stream.isSendScreen()&&this.mirrorVideo(e):this.removeMirrorVideo(e))},t.prototype.removeAllVideos=function(){for(var e=this,t=this.stream.session.streamManagers.length-1;t>=0;--t)this.stream.session.streamManagers[t]===this&&this.stream.session.streamManagers.splice(t,1);this.videos.forEach((function(t){t.video&&t.video.removeEventListener&&t.video.removeEventListener("canplay",e.canPlayListener),t.canplayListenerAdded=!1,t.targetElement&&(t.video.parentNode.removeChild(t.video),e.ee.emitEvent("videoElementDestroyed",[new s.VideoElementEvent(t.video,e,"videoElementDestroyed")])),e.removeSrcObject(t),e.videos.filter((function(e){return!e.targetElement}))}))},t.prototype.disassociateVideo=function(e){for(var t=!1,n=0;n<this.videos.length;n++)if(this.videos[n].video===e){this.videos[n].video.removeEventListener("canplay",this.canPlayListener),this.videos.splice(n,1),t=!0,u.info("Video element disassociated from ",this);break}return t},t.prototype.addPlayEventToFirstVideo=function(){this.videos[0]&&this.videos[0].video&&!this.videos[0].canplayListenerAdded&&(this.videos[0].video.addEventListener("canplay",this.canPlayListener),this.videos[0].canplayListenerAdded=!0)},t.prototype.updateMediaStream=function(e){this.videos.forEach((function(t){if(t.video.srcObject=e,l.isIonicIos){var n=t.video;t.video.parentElement.replaceChild(n,t.video),t.video=n}}))},t.prototype.emitEvent=function(e,t){this.ee.emitEvent(e,t)},t.prototype.createVideo=function(){return document.createElement("video")},t.prototype.removeSrcObject=function(e){e.video.srcObject=null},t.prototype.pushNewStreamManagerVideo=function(e){this.videos.push(e),this.addPlayEventToFirstVideo(),-1===this.stream.session.streamManagers.indexOf(this)&&this.stream.session.streamManagers.push(this)},t.prototype.mirrorVideo=function(e){l.isIonicIos||(e.style.transform="rotateY(180deg)",e.style.webkitTransform="rotateY(180deg)")},t.prototype.removeMirrorVideo=function(e){e.style.transform="unset",e.style.webkitTransform="unset"},t}(r.EventDispatcher);t.StreamManager=d},PEz1:function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0;var r=n("JTMn"),a=n("DPKQ"),s=n("P3vI"),c=n("Te8r"),l=n("BwMD"),u=n("oIG1"),d=n("Tt94"),g=n("bDgZ"),h=n("9m68").OpenViduLogger.getInstance(),p=function(e){function t(t,n,i){var o=e.call(this,new a.Stream(i.session?i.session:new r.Session(i),{publisherProperties:n,mediaConstraints:{}}),t)||this;return o.accessAllowed=!1,o.isSubscribedToRemote=!1,o.accessDenied=!1,o.properties=n,o.openvidu=i,o.stream.ee.on("local-stream-destroyed",(function(e){o.stream.isLocalStreamPublished=!1;var t=new c.StreamEvent(!0,o,"streamDestroyed",o.stream,e);o.emitEvent("streamDestroyed",[t]),t.callDefaultBehavior()})),o}return o(t,e),t.prototype.publishAudio=function(e){var t=this;this.stream.audioActive!==e&&((this.stream.displayMyRemote()?this.stream.localMediaStreamWhenSubscribedToRemote:this.stream.getMediaStream()).getAudioTracks().forEach((function(t){t.enabled=e})),this.session&&this.stream.streamId&&this.session.openvidu.sendRequest("streamPropertyChanged",{streamId:this.stream.streamId,property:"audioActive",newValue:e,reason:"publishAudio"},(function(n,i){n?h.error("Error sending 'streamPropertyChanged' event",n):(t.session.emitEvent("streamPropertyChanged",[new l.StreamPropertyChangedEvent(t.session,t.stream,"audioActive",e,!e,"publishAudio")]),t.emitEvent("streamPropertyChanged",[new l.StreamPropertyChangedEvent(t,t.stream,"audioActive",e,!e,"publishAudio")]))})),this.stream.audioActive=e,h.info("'Publisher' has "+(e?"published":"unpublished")+" its audio stream"))},t.prototype.publishVideo=function(e){var t=this;this.stream.videoActive!==e&&((this.stream.displayMyRemote()?this.stream.localMediaStreamWhenSubscribedToRemote:this.stream.getMediaStream()).getVideoTracks().forEach((function(t){t.enabled=e})),this.session&&this.stream.streamId&&this.session.openvidu.sendRequest("streamPropertyChanged",{streamId:this.stream.streamId,property:"videoActive",newValue:e,reason:"publishVideo"},(function(n,i){n?h.error("Error sending 'streamPropertyChanged' event",n):(t.session.emitEvent("streamPropertyChanged",[new l.StreamPropertyChangedEvent(t.session,t.stream,"videoActive",e,!e,"publishVideo")]),t.emitEvent("streamPropertyChanged",[new l.StreamPropertyChangedEvent(t,t.stream,"videoActive",e,!e,"publishVideo")]))})),this.stream.videoActive=e,h.info("'Publisher' has "+(e?"published":"unpublished")+" its video stream"))},t.prototype.subscribeToRemote=function(e){this.isSubscribedToRemote=e=void 0===e||e,this.stream.subscribeToMyRemote(e)},t.prototype.on=function(t,n){var i=this;return e.prototype.on.call(this,t,n),"streamCreated"===t&&(this.stream&&this.stream.isLocalStreamPublished?this.emitEvent("streamCreated",[new c.StreamEvent(!1,this,"streamCreated",this.stream,"")]):this.stream.ee.on("stream-created-by-publisher",(function(){i.emitEvent("streamCreated",[new c.StreamEvent(!1,i,"streamCreated",i.stream,"")])}))),"remoteVideoPlaying"===t&&this.stream.displayMyRemote()&&this.videos[0]&&this.videos[0].video&&this.videos[0].video.currentTime>0&&!1===this.videos[0].video.paused&&!1===this.videos[0].video.ended&&4===this.videos[0].video.readyState&&this.emitEvent("remoteVideoPlaying",[new u.VideoElementEvent(this.videos[0].video,this,"remoteVideoPlaying")]),"accessAllowed"===t&&this.accessAllowed&&this.emitEvent("accessAllowed",[]),"accessDenied"===t&&this.accessDenied&&this.emitEvent("accessDenied",[]),this},t.prototype.once=function(t,n){var i=this;return e.prototype.once.call(this,t,n),"streamCreated"===t&&(this.stream&&this.stream.isLocalStreamPublished?this.emitEvent("streamCreated",[new c.StreamEvent(!1,this,"streamCreated",this.stream,"")]):this.stream.ee.once("stream-created-by-publisher",(function(){i.emitEvent("streamCreated",[new c.StreamEvent(!1,i,"streamCreated",i.stream,"")])}))),"remoteVideoPlaying"===t&&this.stream.displayMyRemote()&&this.videos[0]&&this.videos[0].video&&this.videos[0].video.currentTime>0&&!1===this.videos[0].video.paused&&!1===this.videos[0].video.ended&&4===this.videos[0].video.readyState&&this.emitEvent("remoteVideoPlaying",[new u.VideoElementEvent(this.videos[0].video,this,"remoteVideoPlaying")]),"accessAllowed"===t&&this.accessAllowed&&this.emitEvent("accessAllowed",[]),"accessDenied"===t&&this.accessDenied&&this.emitEvent("accessDenied",[]),this},t.prototype.replaceTrack=function(e){var t=this,n=function(){var n,i=t.stream.displayMyRemote()?t.stream.localMediaStreamWhenSubscribedToRemote:t.stream.getMediaStream();n="video"===e.kind?i.getVideoTracks()[0]:i.getAudioTracks()[0],i.removeTrack(n),n.stop(),i.addTrack(e)};return new Promise((function(i,o){if(t.stream.isLocalStreamPublished){var r=t.stream.getRTCPeerConnection().getSenders(),a=void 0;"video"===e.kind?(a=r.find((function(e){return!!e.track&&"video"===e.track.kind})))||o(new Error("There's no replaceable track for that kind of MediaStreamTrack in this Publisher object")):"audio"===e.kind?(a=r.find((function(e){return!!e.track&&"audio"===e.track.kind})))||o(new Error("There's no replaceable track for that kind of MediaStreamTrack in this Publisher object")):o(new Error("Unknown track kind "+e.kind)),a.replaceTrack(e).then((function(){n(),i()})).catch((function(e){o(e)}))}else n(),i()}))},t.prototype.initialize=function(){var e=this;return new Promise((function(t,n){var i,o={},r={},a=function(t){e.accessDenied=!0,e.accessAllowed=!1,n(t)},s=function(n){if(e.accessAllowed=!0,e.accessDenied=!1,"undefined"!=typeof MediaStreamTrack&&e.properties.audioSource instanceof MediaStreamTrack&&(n.removeTrack(n.getAudioTracks()[0]),n.addTrack(e.properties.audioSource)),"undefined"!=typeof MediaStreamTrack&&e.properties.videoSource instanceof MediaStreamTrack&&(n.removeTrack(n.getVideoTracks()[0]),n.addTrack(e.properties.videoSource)),n.getAudioTracks()[0]){var i=null!=e.stream.audioActive?e.stream.audioActive:!!e.stream.outboundStreamOpts.publisherProperties.publishAudio;n.getAudioTracks()[0].enabled=i}if(n.getVideoTracks()[0]&&(i=null!=e.stream.videoActive?e.stream.videoActive:!!e.stream.outboundStreamOpts.publisherProperties.publishVideo,n.getVideoTracks()[0].enabled=i),e.initializeVideoReference(n),e.stream.displayMyRemote()||e.stream.updateMediaStreamInVideos(),delete e.firstVideoElement,e.stream.isSendVideo())if(e.stream.isSendScreen())e.videoReference.addEventListener("loadedmetadata",(function(){e.stream.videoDimensions={width:e.videoReference.videoWidth,height:e.videoReference.videoHeight},e.screenShareResizeInterval=setInterval((function(){var t=n.getVideoTracks()[0].getSettings(),i="Chrome"===g.name||"Opera"===g.name?e.videoReference.videoWidth:t.width,o="Chrome"===g.name||"Opera"===g.name?e.videoReference.videoHeight:t.height;if(e.stream.isLocalStreamPublished&&(i!==e.stream.videoDimensions.width||o!==e.stream.videoDimensions.height)){var r={width:e.stream.videoDimensions.width,height:e.stream.videoDimensions.height};e.stream.videoDimensions={width:i||0,height:o||0},e.session.openvidu.sendRequest("streamPropertyChanged",{streamId:e.stream.streamId,property:"videoDimensions",newValue:JSON.stringify(e.stream.videoDimensions),reason:"screenResized"},(function(t,n){t?h.error("Error sending 'streamPropertyChanged' event",t):(e.session.emitEvent("streamPropertyChanged",[new l.StreamPropertyChangedEvent(e.session,e.stream,"videoDimensions",e.stream.videoDimensions,r,"screenResized")]),e.emitEvent("streamPropertyChanged",[new l.StreamPropertyChangedEvent(e,e.stream,"videoDimensions",e.stream.videoDimensions,r,"screenResized")]))}))}}),500),e.stream.isLocalStreamReadyToPublish=!0,e.stream.ee.emitEvent("stream-ready-to-publish",[])}));else if(g.isIonicIos||"Safari"===g.name){e.videoReference.style.display="none",document.body.appendChild(e.videoReference);var o,r=function(){e.stream.videoDimensions={width:e.videoReference.videoWidth,height:e.videoReference.videoHeight},e.stream.isLocalStreamReadyToPublish=!0,e.stream.ee.emitEvent("stream-ready-to-publish",[]),document.body.removeChild(e.videoReference)};e.videoReference.addEventListener("loadedmetadata",(function(){0===e.videoReference.videoWidth?o=setInterval((function(){0!==e.videoReference.videoWidth&&(clearInterval(o),r())}),40):r()}))}else{var a=e.getVideoDimensions(n),s=a.width,c=a.height;e.stream.videoDimensions=("iOS"===g.os.family||"Android"===g.os.family)&&window.innerHeight>window.innerWidth?{width:c||0,height:s||0}:{width:s||0,height:c||0},e.stream.isLocalStreamReadyToPublish=!0,e.stream.ee.emitEvent("stream-ready-to-publish",[])}else e.stream.isLocalStreamReadyToPublish=!0,e.stream.ee.emitEvent("stream-ready-to-publish",[]);t()},c=function(t,n){e.clearPermissionDialogTimer(i,1250),e.stream.isSendScreen()&&e.stream.isSendAudio()?(r.audio=n,r.video=!1,i=Date.now(),e.setPermissionDialogTimer(1250),navigator.mediaDevices.getUserMedia(r).then((function(n){e.clearPermissionDialogTimer(i,1250),t.addTrack(n.getAudioTracks()[0]),s(t)})).catch((function(n){e.clearPermissionDialogTimer(i,1250),t.getAudioTracks().forEach((function(e){e.stop()})),t.getVideoTracks().forEach((function(e){e.stop()})),a(e.openvidu.generateAudioDeviceError(n,o))}))):s(t)},u=function(t){var n,r;switch(h.error(t),e.clearPermissionDialogTimer(i,1250),"Error"===t.name&&(t.name=t.constructor.name),t.name.toLowerCase()){case"notfounderror":navigator.mediaDevices.getUserMedia({audio:!1,video:o.video}).then((function(e){e.getVideoTracks().forEach((function(e){e.stop()})),n=d.OpenViduErrorName.INPUT_AUDIO_DEVICE_NOT_FOUND,r=t.toString(),a(new d.OpenViduError(n,r))})).catch((function(e){n=d.OpenViduErrorName.INPUT_VIDEO_DEVICE_NOT_FOUND,r=t.toString(),a(new d.OpenViduError(n,r))}));break;case"notallowederror":n=e.stream.isSendScreen()?d.OpenViduErrorName.SCREEN_CAPTURE_DENIED:d.OpenViduErrorName.DEVICE_ACCESS_DENIED,r=t.toString(),a(new d.OpenViduError(n,r));break;case"overconstrainederror":navigator.mediaDevices.getUserMedia({audio:!1,video:o.video}).then((function(e){e.getVideoTracks().forEach((function(e){e.stop()})),"deviceid"===t.constraint.toLowerCase()?(n=d.OpenViduErrorName.INPUT_AUDIO_DEVICE_NOT_FOUND,r="Audio input device with deviceId '"+o.audio.deviceId.exact+"' not found"):(n=d.OpenViduErrorName.PUBLISHER_PROPERTIES_ERROR,r="Audio input device doesn't support the value passed for constraint '"+t.constraint+"'"),a(new d.OpenViduError(n,r))})).catch((function(e){"deviceid"===t.constraint.toLowerCase()?(n=d.OpenViduErrorName.INPUT_VIDEO_DEVICE_NOT_FOUND,r="Video input device with deviceId '"+o.video.deviceId.exact+"' not found"):(n=d.OpenViduErrorName.PUBLISHER_PROPERTIES_ERROR,r="Video input device doesn't support the value passed for constraint '"+t.constraint+"'"),a(new d.OpenViduError(n,r))}));break;case"aborterror":case"notreadableerror":n=d.OpenViduErrorName.DEVICE_ALREADY_IN_USE,r=t.toString(),a(new d.OpenViduError(n,r));break;default:n=d.OpenViduErrorName.GENERIC_ERROR,r=t.toString(),a(new d.OpenViduError(n,r))}};e.openvidu.generateMediaConstraints(e.properties).then((function(t){var n,a;if(t.videoTrack&&t.audioTrack||t.audioTrack&&!1===(null===(n=t.constraints)||void 0===n?void 0:n.video)||t.videoTrack&&!1===(null===(a=t.constraints)||void 0===a?void 0:a.audio))s(e.openvidu.addAlreadyProvidedTracks(t,new MediaStream));else{e.stream.setOutboundStreamOptions({mediaConstraints:o=t.constraints,publisherProperties:e.properties});var l=void 0===o.audio||o.audio;r.audio=!e.stream.isSendScreen()&&l,r.video=o.video,i=Date.now(),e.setPermissionDialogTimer(1250),e.stream.isSendScreen()&&navigator.mediaDevices.getDisplayMedia&&"Electron"!==g.name?navigator.mediaDevices.getDisplayMedia({video:!0}).then((function(n){e.openvidu.addAlreadyProvidedTracks(t,n),c(n,l)})).catch((function(e){u(e)})):navigator.mediaDevices.getUserMedia(r).then((function(n){e.openvidu.addAlreadyProvidedTracks(t,n),c(n,l)})).catch((function(e){u(e)}))}})).catch((function(e){a(e)}))}))},t.prototype.getVideoDimensions=function(e){return e.getVideoTracks()[0].getSettings()},t.prototype.reestablishStreamPlayingEvent=function(){this.ee.getListeners("streamPlaying").length>0&&this.addPlayEventToFirstVideo()},t.prototype.initializeVideoReference=function(e){this.videoReference=document.createElement("video"),"Safari"===g.name&&this.videoReference.setAttribute("playsinline","true"),this.stream.setMediaStream(e),this.firstVideoElement&&this.createVideoElement(this.firstVideoElement.targetElement,this.properties.insertMode),this.videoReference.srcObject=e},t.prototype.setPermissionDialogTimer=function(e){var t=this;this.permissionDialogTimeout=setTimeout((function(){t.emitEvent("accessDialogOpened",[])}),e)},t.prototype.clearPermissionDialogTimer=function(e,t){clearTimeout(this.permissionDialogTimeout),Date.now()-e>t&&this.emitEvent("accessDialogClosed",[])},t}(s.StreamManager);t.Publisher=p},PPcv:function(e,t,n){"use strict";t.__esModule=!0;var i=n("tInm"),o=n("PEz1"),r=n("JTMn"),a=n("BwMD"),s=n("Tt94"),c=n("/dLB"),l=n("9m68"),u=n("+27z"),d=n("EcWD"),g=n("6+/i"),h=n("AeG9"),p=n("bDgZ");p.isIonicIos=("iPhone"===p.product||"iPad"===p.product)&&-1===p.ua.indexOf("Safari"),p.isIonicAndroid="Android"===p.os.family&&"Android Browser"==p.name;var f=n("vqFl"),m=l.OpenViduLogger.getInstance(),v=function(){function e(){var e=this;this.publishers=[],this.secret="",this.recorder=!1,this.advancedConfiguration={},this.webrtcStatsInterval=0,this.ee=new g,this.libraryVersion=f.version,m.info("'OpenVidu' initialized"),m.info("openvidu-browser version: "+this.libraryVersion),"iOS"!==p.os.family&&"Android"!==p.os.family||window.addEventListener("orientationchange",(function(){e.publishers.forEach((function(t){if(t.stream.isLocalStreamPublished&&t.stream&&t.stream.hasVideo&&t.stream.streamManager.videos[0])var n=0,i=t.stream.videoDimensions.width,o=t.stream.videoDimensions.height,r=setInterval((function(){new Promise((function(e,n){if(p.isIonicIos)e({newWidth:t.stream.streamManager.videos[0].video.videoWidth,newHeight:t.stream.streamManager.videos[0].video.videoHeight});else{var i=t.stream.getMediaStream().getVideoTracks()[0].getSettings();e({newWidth:-1!==p.name.toLowerCase().indexOf("firefox")?i.width:t.videoReference.videoWidth,newHeight:-1!==p.name.toLowerCase().indexOf("firefox")?i.height:t.videoReference.videoHeight})}})).then((function(e){s(i,o,e.newWidth,e.newHeight)}))}),75),s=function(i,o,s,c){++n>10&&clearTimeout(r),s===i&&c===o||(t.stream.videoDimensions={width:s||0,height:c||0},e.sendRequest("streamPropertyChanged",{streamId:t.stream.streamId,property:"videoDimensions",newValue:JSON.stringify(t.stream.videoDimensions),reason:"deviceRotated"},(function(n,r){n?m.error("Error sending 'streamPropertyChanged' event",n):(e.session.emitEvent("streamPropertyChanged",[new a.StreamPropertyChangedEvent(e.session,t.stream,"videoDimensions",t.stream.videoDimensions,{width:i,height:o},"deviceRotated")]),t.emitEvent("streamPropertyChanged",[new a.StreamPropertyChangedEvent(t,t.stream,"videoDimensions",t.stream.videoDimensions,{width:i,height:o},"deviceRotated")]))})),clearTimeout(r))}}))}))}return e.prototype.initSession=function(){return this.session=new r.Session(this),this.session},e.prototype.initPublisher=function(e,t,n){var i;i=t&&"function"!=typeof t?{audioSource:void 0!==(i=t).audioSource?i.audioSource:void 0,frameRate:"undefined"!=typeof MediaStreamTrack&&i.videoSource instanceof MediaStreamTrack?void 0:void 0!==i.frameRate?i.frameRate:void 0,insertMode:void 0!==i.insertMode?"string"==typeof i.insertMode?c.VideoInsertMode[i.insertMode]:i.insertMode:c.VideoInsertMode.APPEND,mirror:void 0===i.mirror||i.mirror,publishAudio:void 0===i.publishAudio||i.publishAudio,publishVideo:void 0===i.publishVideo||i.publishVideo,resolution:"undefined"!=typeof MediaStreamTrack&&i.videoSource instanceof MediaStreamTrack?void 0:void 0!==i.resolution?i.resolution:"640x480",videoSource:void 0!==i.videoSource?i.videoSource:void 0,filter:i.filter}:{insertMode:c.VideoInsertMode.APPEND,mirror:!0,publishAudio:!0,publishVideo:!0,resolution:"640x480"};var r,a=new o.Publisher(e,i,this);return t&&"function"==typeof t?r=t:n&&(r=n),a.initialize().then((function(){void 0!==r&&r(void 0),a.emitEvent("accessAllowed",[])})).catch((function(e){void 0!==r&&r(e),a.emitEvent("accessDenied",[e])})),this.publishers.push(a),a},e.prototype.initPublisherAsync=function(e,t){var n=this;return new Promise((function(i,o){var r,a=function(e){e?o(e):i(r)};r=t?n.initPublisher(e,t,a):n.initPublisher(e,a)}))},e.prototype.initLocalRecorder=function(e){return new i.LocalRecorder(e)},e.prototype.checkSystemRequirements=function(){var e=p.name,t=p.ua?p.ua:navigator.userAgent;return this.isIPhoneOrIPad(t)?this.isIOSWithSafari(t)?1:0:"Safari"===e||"Chrome"===e||"Chrome Mobile"===e||"Firefox"===e||"Firefox Mobile"===e||"Opera"===e||"Opera Mobile"===e||"Android Browser"===e||"Electron"===e||"Samsung Internet Mobile"===e||"Samsung Internet"===e?1:0},e.prototype.checkScreenSharingCapabilities=function(){var e=p.name,t=(null==p?void 0:p.version)?parseFloat(p.version):-1,n=p.os.family;return"iOS"===n||"Android"===n||"Chrome"!==e&&"Firefox"!==e&&"Opera"!==e&&"Electron"!==e&&"Safari"===e&&t<13?0:1},e.prototype.getDevices=function(){return new Promise((function(e,t){navigator.mediaDevices.enumerateDevices().then((function(t){var n,i=[];p.isIonicAndroid&&"undefined"!=typeof cordova&&(null===(n=null===cordova||void 0===cordova?void 0:cordova.plugins)||void 0===n?void 0:n.EnumerateDevicesPlugin)?cordova.plugins.EnumerateDevicesPlugin.getEnumerateDevices().then((function(n){var o=[],r=[],a=[];o=n.filter((function(e){return"audioinput"===e.kind})),r=t.filter((function(e){return"videoinput"===e.kind})),a=t.filter((function(e){return"audioinput"===e.kind})),r.forEach((function(e,t){i.push(e.label?{kind:e.kind,deviceId:e.deviceId,label:e.label}:{kind:e.kind,deviceId:e.deviceId,label:0===t?"Front Camera":1===t?"Back Camera":"Unknown Camera"})})),a.forEach((function(e,t){if(e.label)i.push({kind:e.kind,deviceId:e.deviceId,label:e.label});else{var n="";switch(t){case 0:n="Default";break;case 1:var r=o.filter((function(e){return e.label.includes("Built")}))[0];n=r?r.label:"Built-in Microphone";break;case 2:var a=o.filter((function(e){return e.label.includes("Wired")}))[0];n=a?a.label:"Headset earpiece";break;case 3:var s=o.filter((function(e){return e.label.includes("Bluetooth")}))[0];n=s?s.label:"Wireless";break;default:n="Unknown Microphone"}i.push({kind:e.kind,deviceId:e.deviceId,label:n})}})),e(i)})):(t.forEach((function(e){"audioinput"!==e.kind&&"videoinput"!==e.kind||i.push({kind:e.kind,deviceId:e.deviceId,label:e.label})})),e(i))})).catch((function(e){m.error("Error getting devices",e),t(e)}))}))},e.prototype.getUserMedia=function(e){var t=this;return new Promise((function(n,i){var o=function(e,o){var r={audio:void 0===o.audio||o.audio,video:!1};navigator.mediaDevices.getUserMedia(r).then((function(t){e.addTrack(t.getAudioTracks()[0]),n(e)})).catch((function(n){e.getAudioTracks().forEach((function(e){e.stop()})),e.getVideoTracks().forEach((function(e){e.stop()})),i(t.generateAudioDeviceError(n,r))}))};t.generateMediaConstraints(e).then((function(r){var a,c;if(r.videoTrack&&r.audioTrack||r.audioTrack&&!1===(null===(a=r.constraints)||void 0===a?void 0:a.video)||r.videoTrack&&!1===(null===(c=r.constraints)||void 0===c?void 0:c.audio))n(t.addAlreadyProvidedTracks(r,new MediaStream));else{r.videoTrack&&delete r.constraints.video,r.audioTrack&&delete r.constraints.audio;var l=!1;if("string"==typeof e.videoSource&&("screen"===e.videoSource||"window"===e.videoSource||"Electron"===p.name&&e.videoSource.startsWith("screen:"))&&(l=!r.audioTrack&&null!==e.audioSource&&!1!==e.audioSource,navigator.mediaDevices.getDisplayMedia&&"Electron"!==p.name))return void navigator.mediaDevices.getDisplayMedia({video:!0}).then((function(e){t.addAlreadyProvidedTracks(r,e),l?o(e,r.constraints):n(e)})).catch((function(e){var t=s.OpenViduErrorName.SCREEN_CAPTURE_DENIED,n=e.toString();i(new s.OpenViduError(t,n))}));navigator.mediaDevices.getUserMedia(l?{video:r.constraints.video}:r.constraints).then((function(e){t.addAlreadyProvidedTracks(r,e),l?o(e,r.constraints):n(e)})).catch((function(t){var n=t.toString();i(new s.OpenViduError("screen"!==e.videoSource?s.OpenViduErrorName.DEVICE_ACCESS_DENIED:s.OpenViduErrorName.SCREEN_CAPTURE_DENIED,n))}))}})).catch((function(e){i(e)}))}))},e.prototype.enableProdMode=function(){m.enableProdMode()},e.prototype.setAdvancedConfiguration=function(e){this.advancedConfiguration=e},e.prototype.generateMediaConstraints=function(e){var t=this;return new Promise((function(n,i){var o={audioTrack:void 0,videoTrack:void 0,constraints:{audio:void 0,video:void 0}},r=e.audioSource,a=e.videoSource;if(null!==r&&!1!==r||(o.constraints.audio=!1),null!==a&&!1!==a||(o.constraints.video=!1),!1===o.constraints.audio&&!1===o.constraints.video&&i(new s.OpenViduError(s.OpenViduErrorName.NO_INPUT_SOURCE_SET,"Properties 'audioSource' and 'videoSource' cannot be set to false or null at the same time")),"undefined"!=typeof MediaStreamTrack&&r instanceof MediaStreamTrack&&(o.audioTrack=r),"undefined"!=typeof MediaStreamTrack&&a instanceof MediaStreamTrack&&(o.videoTrack=a),void 0===r&&(o.constraints.audio=!0),void 0===a&&(o.constraints.video={width:{ideal:640},height:{ideal:480}}),null!==a&&!1!==a){if(e.resolution){var c=e.resolution.toLowerCase().split("x"),l=Number(c[0]),u=Number(c[1]);o.constraints.video={width:{ideal:l},height:{ideal:u}}}e.frameRate&&(o.constraints.video.frameRate={ideal:e.frameRate})}t.configureDeviceIdOrScreensharing(o,e,n,i),n(o)}))},e.prototype.startWs=function(e){var t={heartbeat:5e3,sendCloseMessage:!1,ws:{uri:this.wsUri,onconnected:e,ondisconnect:this.disconnectCallback.bind(this),onreconnecting:this.reconnectingCallback.bind(this),onreconnected:this.reconnectedCallback.bind(this)},rpc:{requestTimeout:1e4,participantJoined:this.session.onParticipantJoined.bind(this.session),participantPublished:this.session.onParticipantPublished.bind(this.session),participantUnpublished:this.session.onParticipantUnpublished.bind(this.session),participantLeft:this.session.onParticipantLeft.bind(this.session),participantEvicted:this.session.onParticipantEvicted.bind(this.session),recordingStarted:this.session.onRecordingStarted.bind(this.session),recordingStopped:this.session.onRecordingStopped.bind(this.session),sendMessage:this.session.onNewMessage.bind(this.session),streamPropertyChanged:this.session.onStreamPropertyChanged.bind(this.session),filterEventDispatched:this.session.onFilterEventDispatched.bind(this.session),iceCandidate:this.session.recvIceCandidate.bind(this.session),mediaError:this.session.onMediaError.bind(this.session)}};this.jsonRpcClient=new h.clients.JsonRpcClient(t)},e.prototype.closeWs=function(){this.jsonRpcClient.close(4102,"Connection closed by client")},e.prototype.sendRequest=function(e,t,n){t&&t instanceof Function&&(n=t,t={}),m.debug('Sending request: {method:"'+e+'", params: '+JSON.stringify(t)+"}"),this.jsonRpcClient.send(e,t,n)},e.prototype.getWsUri=function(){return this.wsUri},e.prototype.getSecret=function(){return this.secret},e.prototype.getRecorder=function(){return this.recorder},e.prototype.generateAudioDeviceError=function(e,t){var n,i;switch("Error"===e.name&&(e.name=e.constructor.name),e.name.toLowerCase()){case"notfounderror":return n=s.OpenViduErrorName.INPUT_AUDIO_DEVICE_NOT_FOUND,i=e.toString(),new s.OpenViduError(n,i);case"notallowederror":return n=s.OpenViduErrorName.DEVICE_ACCESS_DENIED,i=e.toString(),new s.OpenViduError(n,i);case"overconstrainederror":return"deviceid"===e.constraint.toLowerCase()?(n=s.OpenViduErrorName.INPUT_AUDIO_DEVICE_NOT_FOUND,i="Audio input device with deviceId '"+t.audio.deviceId.exact+"' not found"):(n=s.OpenViduErrorName.PUBLISHER_PROPERTIES_ERROR,i="Audio input device doesn't support the value passed for constraint '"+e.constraint+"'"),new s.OpenViduError(n,i);case"notreadableerror":return n=s.OpenViduErrorName.DEVICE_ALREADY_IN_USE,i=e.toString(),new s.OpenViduError(n,i);default:return new s.OpenViduError(s.OpenViduErrorName.INPUT_AUDIO_DEVICE_GENERIC_ERROR,e.toString())}},e.prototype.addAlreadyProvidedTracks=function(e,t){return e.videoTrack&&t.addTrack(e.videoTrack),e.audioTrack&&t.addTrack(e.audioTrack),t},e.prototype.configureDeviceIdOrScreensharing=function(e,t,n,i){var o=this,r=t.audioSource,a=t.videoSource;if("string"==typeof r&&(e.constraints.audio={deviceId:{exact:r}}),"string"==typeof a)if(this.isScreenShare(a))if(this.checkScreenSharingCapabilities())if("Electron"===p.name){var c=a.substr(a.indexOf("screen:")+"screen:".length);e.constraints.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:c}},n(e)}else{if(this.advancedConfiguration.screenShareChromeExtension&&-1===p.name.indexOf("Firefox")&&!navigator.mediaDevices.getDisplayMedia)return void d.getScreenConstraints((function(t,r){if(t||r.mandatory&&"screen"===r.mandatory.chromeMediaSource){if("permission-denied"!==t&&"PermissionDeniedError"!==t){var a=o.advancedConfiguration.screenShareChromeExtension.split("/").pop().trim();return void d.getChromeExtensionStatus(a,(function(e){if("installed-disabled"===e){var t=new s.OpenViduError(s.OpenViduErrorName.SCREEN_EXTENSION_DISABLED,"You must enable the screen extension");m.error(t),i(t)}if("not-installed"===e){var n=new s.OpenViduError(s.OpenViduErrorName.SCREEN_EXTENSION_NOT_INSTALLED,o.advancedConfiguration.screenShareChromeExtension);m.error(n),i(n)}}))}var c=new s.OpenViduError(s.OpenViduErrorName.SCREEN_CAPTURE_DENIED,"You must allow access to one window of your desktop");m.error(c),i(c)}else e.constraints.video=r,n(e)}));if(!navigator.mediaDevices.getDisplayMedia){var l=-1!==p.name.indexOf("Firefox")?t.videoSource:void 0;return void u.getScreenId(l,(function(t,r,a){if(t)if("not-installed"===t){var c=new s.OpenViduError(s.OpenViduErrorName.SCREEN_EXTENSION_NOT_INSTALLED,o.advancedConfiguration.screenShareChromeExtension?o.advancedConfiguration.screenShareChromeExtension:"https://chrome.google.com/webstore/detail/openvidu-screensharing/lfcgfepafnobdloecchnfaclibenjold");m.error(c),i(c)}else"installed-disabled"===t?(c=new s.OpenViduError(s.OpenViduErrorName.SCREEN_EXTENSION_DISABLED,"You must enable the screen extension"),m.error(c),i(c)):"permission-denied"===t?(c=new s.OpenViduError(s.OpenViduErrorName.SCREEN_CAPTURE_DENIED,"You must allow access to one window of your desktop"),m.error(c),i(c)):(c=new s.OpenViduError(s.OpenViduErrorName.GENERIC_ERROR,"Unknown error when accessing screen share"),m.error(c),m.error(t),i(c));else e.constraints.video=a.video,n(e)}))}n(e)}else{var g=new s.OpenViduError(s.OpenViduErrorName.SCREEN_SHARING_NOT_SUPPORTED,"You can only screen share in desktop Chrome, Firefox, Opera, Safari (>=13.0) or Electron. Detected client: "+p.name);m.error(g),i(g)}else this.setVideoSource(e,a)},e.prototype.setVideoSource=function(e,t){e.constraints.video||(e.constraints.video={}),e.constraints.video.deviceId={exact:t}},e.prototype.disconnectCallback=function(){m.warn("Websocket connection lost"),this.isRoomAvailable()?this.session.onLostConnection("networkDisconnect"):alert("Connection error. Please reload page.")},e.prototype.reconnectingCallback=function(){m.warn("Websocket connection lost (reconnecting)"),this.isRoomAvailable()?this.session.emitEvent("reconnecting",[]):alert("Connection error. Please reload page.")},e.prototype.reconnectedCallback=function(){var e=this;m.warn("Websocket reconnected"),this.isRoomAvailable()?this.sendRequest("connect",{sessionId:this.session.connection.rpcSessionId},(function(t,n){t?(m.error(t),m.warn("Websocket was able to reconnect to OpenVidu Server, but your Connection was already destroyed due to timeout. You are no longer a participant of the Session and your media streams have been destroyed"),e.session.onLostConnection("networkDisconnect"),e.jsonRpcClient.close(4101,"Reconnection fault")):(e.jsonRpcClient.resetPing(),e.session.onRecoveredConnection())})):alert("Connection error. Please reload page.")},e.prototype.isRoomAvailable=function(){return void 0!==this.session&&this.session instanceof r.Session||(m.warn("Session instance not found"),!1)},e.prototype.isScreenShare=function(e){return"screen"===e||"window"===e||"Electron"===p.name&&e.startsWith("screen:")},e.prototype.isIPhoneOrIPad=function(e){var t="ontouchend"in document,n=/\b(\w*Macintosh\w*)\b/.test(e)&&t,i=/\b(\w*iPhone\w*)\b/.test(e)&&/\b(\w*Mobile\w*)\b/.test(e)&&t;return n||i},e.prototype.isIOSWithSafari=function(e){return/\b(\w*Apple\w*)\b/.test(navigator.vendor)&&/\b(\w*Safari\w*)\b/.test(e)&&!/\b(\w*CriOS\w*)\b/.test(e)&&!/\b(\w*FxiOS\w*)\b/.test(e)},e}();t.OpenVidu=v},PZzU:function(e,t,n){"use strict";t.__esModule=!0;var i=n("PPcv");t.OpenVidu=i.OpenVidu;var o=n("JTMn");t.Session=o.Session;var r=n("PEz1");t.Publisher=r.Publisher;var a=n("bk74");t.Subscriber=a.Subscriber;var s=n("P3vI");t.StreamManager=s.StreamManager;var c=n("DPKQ");t.Stream=c.Stream;var l=n("ryRr");t.Connection=l.Connection;var u=n("tInm");t.LocalRecorder=u.LocalRecorder;var d=n("74bm");t.Filter=d.Filter;var g=n("Yn0Z");t.LocalRecorderState=g.LocalRecorderState;var h=n("Tt94");t.OpenViduError=h.OpenViduError;var p=n("/dLB");t.VideoInsertMode=p.VideoInsertMode;var f=n("hzOQ");t.Event=f.Event;var m=n("8KVD");t.ConnectionEvent=m.ConnectionEvent;var v=n("e8ps");t.PublisherSpeakingEvent=v.PublisherSpeakingEvent;var b=n("rUL0");t.RecordingEvent=b.RecordingEvent;var y=n("ksJj");t.SessionDisconnectedEvent=y.SessionDisconnectedEvent;var C=n("suHS");t.SignalEvent=C.SignalEvent;var O=n("Te8r");t.StreamEvent=O.StreamEvent;var S=n("HxXY");t.StreamManagerEvent=S.StreamManagerEvent;var M=n("oIG1");t.VideoElementEvent=M.VideoElementEvent;var _=n("BwMD");t.StreamPropertyChangedEvent=_.StreamPropertyChangedEvent;var x=n("+ig+");t.FilterEvent=x.FilterEvent;var k=n("Dztv");t.EventDispatcher=k.EventDispatcher},QSjB:function(e,t,n){"use strict";t.__esModule=!0,t.start=t.run=t.TOKENS=t.State=void 0;var i=n("FlKs"),o=n("vqGb"),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(o),a=n("dlaP"),s=function(e){return new i.TokenState(e)},c=s(),l=s(),u=s(),d=s(),g=s(),h=s(),p=s(),f=s(o.URL),m=s(),v=s(o.URL),b=s(o.URL),y=s(),C=s(),O=s(),S=s(),M=s(),_=s(o.URL),x=s(o.URL),k=s(o.URL),P=s(o.URL),w=s(),E=s(),I=s(),T=s(),A=s(),R=s(),V=s(o.EMAIL),L=s(),N=s(o.EMAIL),D=s(o.MAILTOEMAIL),j=s(),U=s(),W=s(),B=s(),F=s(o.NL);c.on(a.NL,F).on(a.PROTOCOL,l).on(a.MAILTO,u).on(a.SLASH,d),l.on(a.SLASH,d),d.on(a.SLASH,g),c.on(a.TLD,h).on(a.DOMAIN,h).on(a.LOCALHOST,f).on(a.NUM,h),g.on(a.TLD,b).on(a.DOMAIN,b).on(a.NUM,b).on(a.LOCALHOST,b),h.on(a.DOT,p),A.on(a.DOT,R),p.on(a.TLD,f).on(a.DOMAIN,h).on(a.NUM,h).on(a.LOCALHOST,h),R.on(a.TLD,V).on(a.DOMAIN,A).on(a.NUM,A).on(a.LOCALHOST,A),f.on(a.DOT,p),V.on(a.DOT,R),f.on(a.COLON,m).on(a.SLASH,b),m.on(a.NUM,v),v.on(a.SLASH,b),V.on(a.COLON,L),L.on(a.NUM,N);var z=[a.DOMAIN,a.AT,a.LOCALHOST,a.NUM,a.PLUS,a.POUND,a.PROTOCOL,a.SLASH,a.TLD,a.UNDERSCORE,a.SYM,a.AMPERSAND],G=[a.COLON,a.DOT,a.QUERY,a.PUNCTUATION,a.CLOSEBRACE,a.CLOSEBRACKET,a.CLOSEANGLEBRACKET,a.CLOSEPAREN,a.OPENBRACE,a.OPENBRACKET,a.OPENANGLEBRACKET,a.OPENPAREN];b.on(a.OPENBRACE,C).on(a.OPENBRACKET,O).on(a.OPENANGLEBRACKET,S).on(a.OPENPAREN,M),y.on(a.OPENBRACE,C).on(a.OPENBRACKET,O).on(a.OPENANGLEBRACKET,S).on(a.OPENPAREN,M),C.on(a.CLOSEBRACE,b),O.on(a.CLOSEBRACKET,b),S.on(a.CLOSEANGLEBRACKET,b),M.on(a.CLOSEPAREN,b),_.on(a.CLOSEBRACE,b),x.on(a.CLOSEBRACKET,b),k.on(a.CLOSEANGLEBRACKET,b),P.on(a.CLOSEPAREN,b),w.on(a.CLOSEBRACE,b),E.on(a.CLOSEBRACKET,b),I.on(a.CLOSEANGLEBRACKET,b),T.on(a.CLOSEPAREN,b),C.on(z,_),O.on(z,x),S.on(z,k),M.on(z,P),C.on(G,w),O.on(G,E),S.on(G,I),M.on(G,T),_.on(z,_),x.on(z,x),k.on(z,k),P.on(z,P),_.on(G,_),x.on(G,x),k.on(G,k),P.on(G,P),w.on(z,_),E.on(z,x),I.on(z,k),T.on(z,P),w.on(G,w),E.on(G,E),I.on(G,I),T.on(G,T),b.on(z,b),y.on(z,b),b.on(G,y),y.on(G,y),u.on(a.TLD,D).on(a.DOMAIN,D).on(a.NUM,D).on(a.LOCALHOST,D),D.on(z,D).on(G,j),j.on(z,D).on(G,j);var Q=[a.DOMAIN,a.NUM,a.PLUS,a.POUND,a.QUERY,a.UNDERSCORE,a.SYM,a.AMPERSAND,a.TLD];h.on(Q,U).on(a.AT,W),f.on(Q,U).on(a.AT,W),p.on(Q,U),U.on(Q,U).on(a.AT,W).on(a.DOT,B),B.on(Q,U),W.on(a.TLD,A).on(a.DOMAIN,A).on(a.LOCALHOST,V),t.State=i.TokenState,t.TOKENS=r,t.run=function(e){for(var t=e.length,n=0,i=[],r=[];n<t;){for(var a=c,s=null,l=null,u=0,d=null,g=-1;n<t&&!(s=a.next(e[n]));)r.push(e[n++]);for(;n<t&&(l=s||a.next(e[n]));)s=null,(a=l).accepts()?(g=0,d=a):g>=0&&g++,n++,u++;if(g<0)for(var h=n-u;h<n;h++)r.push(e[h]);else{r.length>0&&(i.push(new o.TEXT(r)),r=[]),n-=g,u-=g;var p=d.emit();i.push(new p(e.slice(n-u,n)))}}return r.length>0&&i.push(new o.TEXT(r)),i},t.start=c},RvMX:function(e,t,n){"use strict";t.__esModule=!0,t.createTokenClass=function(){return function(e){e&&(this.v=e)}}},SYuc:function(e,t,n){var i=n("EDod");t.JsonRpcClient=i},TDwH:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){var t=e.scanner.TOKENS,n=e.parser.start;function i(e){this.v=e}e.inherits(e.parser.TOKENS.Base,i,{type:"hashtag",isLink:!0});var o=n.jump(t.POUND),r=new e.parser.State(i);o.on(t.DOMAIN,r),o.on(t.TLD,r),o.on(t.LOCALHOST,r)}},TIDz:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return h}));var i=n("ofXK"),o=n("fXoL"),r=n("dP7y"),a=n("joaK"),s=n.n(a),c=n("bGVd"),l=n.n(c);n("mgp7");var u=function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"linkify",value:function(e,t){return e.linkify(t)}},{key:"find",value:function(e){return Object(r.find)(e)}},{key:"test",value:function(e){return"string"==typeof e?Object(r.test)(e):Object(r.test).apply(void 0,_toConsumableArray(e))}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.Mb({token:e,factory:e.\u0275fac}),e}(),d=new o.r("NgxLinkifyjsConfig"),g={enableHash:!0,enableMention:!0},h=function(){var e=function(){function e(t){_classCallCheck(this,e),this.config=t,t.enableHash&&s()(r),t.enableMention&&l()(r)}return _createClass(e,null,[{key:"forRoot",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g;return{ngModule:e,providers:[u,{provide:d,useValue:t}]}}}]),e}();return e.\u0275mod=o.Ob({type:e}),e.\u0275inj=o.Nb({factory:function(t){return new(t||e)(o.ac(d))},imports:[[i.c]]}),e}()},Te8r:function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0;var r=n("hzOQ"),a=n("PEz1"),s=n("JTMn"),c=n("9m68").OpenViduLogger.getInstance(),l=function(e){function t(t,n,i,o,r){var a=e.call(this,t,n,i)||this;return a.stream=o,a.reason=r,a}return o(t,e),t.prototype.callDefaultBehavior=function(){if("streamDestroyed"===this.type){if(this.target instanceof s.Session)c.info("Calling default behavior upon '"+this.type+"' event dispatched by 'Session'"),this.stream.disposeWebRtcPeer();else if(this.target instanceof a.Publisher){c.info("Calling default behavior upon '"+this.type+"' event dispatched by 'Publisher'"),clearInterval(this.target.screenShareResizeInterval),this.stream.isLocalStreamReadyToPublish=!1;for(var e=this.target.openvidu.publishers,t=0;t<e.length;t++)if(e[t]===this.target){e.splice(t,1);break}}this.stream.disposeMediaStream(),this.stream.streamManager&&this.stream.streamManager.removeAllVideos(),delete this.stream.session.remoteStreamsCreated[this.stream.streamId];var n=this.stream.session.remoteConnections[this.stream.connection.connectionId];if(n&&n.options){var i=n.options.streams;for(t=i.length-1;t>=0;--t)i[t].id===this.stream.streamId&&i.splice(t,1)}}},t}(r.Event);t.StreamEvent=l},Tt94:function(e,t,n){"use strict";var i;t.__esModule=!0,(i=t.OpenViduErrorName||(t.OpenViduErrorName={})).BROWSER_NOT_SUPPORTED="BROWSER_NOT_SUPPORTED",i.DEVICE_ACCESS_DENIED="DEVICE_ACCESS_DENIED",i.DEVICE_ALREADY_IN_USE="DEVICE_ALREADY_IN_USE",i.SCREEN_CAPTURE_DENIED="SCREEN_CAPTURE_DENIED",i.SCREEN_SHARING_NOT_SUPPORTED="SCREEN_SHARING_NOT_SUPPORTED",i.SCREEN_EXTENSION_NOT_INSTALLED="SCREEN_EXTENSION_NOT_INSTALLED",i.SCREEN_EXTENSION_DISABLED="SCREEN_EXTENSION_DISABLED",i.INPUT_VIDEO_DEVICE_NOT_FOUND="INPUT_VIDEO_DEVICE_NOT_FOUND",i.INPUT_AUDIO_DEVICE_NOT_FOUND="INPUT_AUDIO_DEVICE_NOT_FOUND",i.INPUT_AUDIO_DEVICE_GENERIC_ERROR="INPUT_AUDIO_DEVICE_GENERIC_ERROR",i.NO_INPUT_SOURCE_SET="NO_INPUT_SOURCE_SET",i.PUBLISHER_PROPERTIES_ERROR="PUBLISHER_PROPERTIES_ERROR",i.OPENVIDU_PERMISSION_DENIED="OPENVIDU_PERMISSION_DENIED",i.OPENVIDU_NOT_CONNECTED="OPENVIDU_NOT_CONNECTED",i.GENERIC_ERROR="GENERIC_ERROR",t.OpenViduError=function(e,t){this.name=e,this.message=t}},XiUz:function(e,t,n){"use strict";n.d(t,"g",(function(){return he})),n.d(t,"a",(function(){return L})),n.d(t,"f",(function(){return J})),n.d(t,"b",(function(){return K})),n.d(t,"d",(function(){return m})),n.d(t,"c",(function(){return ie})),n.d(t,"e",(function(){return M}));var i=n("fXoL"),o=n("pD6V"),r=n("cH1L"),a=n("XNiG"),s=n("1G5W"),c=["row","column","row-reverse","column-reverse"];function l(e){var t=_slicedToArray((e=e?e.toLowerCase():"").split(" "),3),n=t[0],i=t[1],o=t[2];return c.find((function(e){return e===n}))||(n=c[0]),"inline"===i&&(i="inline"!==o?o:"",o="inline"),[n,d(i),!!o]}function u(e){return _slicedToArray(l(e),1)[0].indexOf("row")>-1}function d(e){if(e)switch(e.toLowerCase()){case"reverse":case"wrap-reverse":case"reverse-wrap":e="wrap-reverse";break;case"no":case"none":case"nowrap":e="nowrap";break;default:e="wrap"}return e}var g=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"buildStyles",value:function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{display:n?"inline-flex":"flex","box-sizing":"border-box","flex-direction":e,"flex-wrap":t||null}}((t=_slicedToArray(l(e),3))[0],t[1],t[2]);var t}}]),n}(o.h);return e.\u0275fac=function(t){return h(t||e)},e.\u0275prov=Object(i.Mb)({factory:function(){return new e},token:e,providedIn:"root"}),e}(),h=i.Yb(g),p=["fxLayout","fxLayout.xs","fxLayout.sm","fxLayout.md","fxLayout.lg","fxLayout.xl","fxLayout.lt-sm","fxLayout.lt-md","fxLayout.lt-lg","fxLayout.lt-xl","fxLayout.gt-xs","fxLayout.gt-sm","fxLayout.gt-md","fxLayout.gt-lg"],f=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,o,r){var a;return _classCallCheck(this,n),(a=t.call(this,e,o,i,r)).DIRECTIVE_KEY="layout",a.styleCache=b,a.init(),a}return n}(o.b);return e.\u0275fac=function(t){return new(t||e)(i.Qb(i.l),i.Qb(o.i),i.Qb(g),i.Qb(o.f))},e.\u0275dir=i.Lb({type:e,features:[i.zb]}),e}(),m=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.apply(this,arguments)).inputs=p,e}return n}(f);return e.\u0275fac=function(t){return v(t||e)},e.\u0275dir=i.Lb({type:e,selectors:[["","fxLayout",""],["","fxLayout.xs",""],["","fxLayout.sm",""],["","fxLayout.md",""],["","fxLayout.lg",""],["","fxLayout.xl",""],["","fxLayout.lt-sm",""],["","fxLayout.lt-md",""],["","fxLayout.lt-lg",""],["","fxLayout.lt-xl",""],["","fxLayout.gt-xs",""],["","fxLayout.gt-sm",""],["","fxLayout.gt-md",""],["","fxLayout.gt-lg",""]],inputs:{fxLayout:"fxLayout","fxLayout.xs":"fxLayout.xs","fxLayout.sm":"fxLayout.sm","fxLayout.md":"fxLayout.md","fxLayout.lg":"fxLayout.lg","fxLayout.xl":"fxLayout.xl","fxLayout.lt-sm":"fxLayout.lt-sm","fxLayout.lt-md":"fxLayout.lt-md","fxLayout.lt-lg":"fxLayout.lt-lg","fxLayout.lt-xl":"fxLayout.lt-xl","fxLayout.gt-xs":"fxLayout.gt-xs","fxLayout.gt-sm":"fxLayout.gt-sm","fxLayout.gt-md":"fxLayout.gt-md","fxLayout.gt-lg":"fxLayout.gt-lg"},features:[i.zb]}),e}(),v=i.Yb(m),b=new Map,y={"margin-left":null,"margin-right":null,"margin-top":null,"margin-bottom":null},C=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;return _classCallCheck(this,n),(i=t.call(this))._styler=e,i}return _createClass(n,[{key:"buildStyles",value:function(e,t){return e.endsWith(E)?(n=e=e.slice(0,e.indexOf(E)),i=t.directionality,o="0px",r="0px","rtl"===i?r="-"+n:o="-"+n,{margin:"0px ".concat(o," ").concat("-"+n," ").concat(r)}):{};var n,i,o,r}},{key:"sideEffect",value:function(e,t,n){var i,o,r,a,s=n.items;if(e.endsWith(E)){var c=(i=e=e.slice(0,e.indexOf(E)),o=n.directionality,r="0px",a="0px","rtl"===o?a=i:r=i,{padding:"0px ".concat(r," ").concat(i," ").concat(a)});this._styler.applyStyleToElements(c,n.items)}else{var l=s.pop(),u=function(e,t){var n=I(t.directionality,t.layout),i=Object.assign({},y);return i[n]=e,i}(e,n);this._styler.applyStyleToElements(u,s),this._styler.applyStyleToElements(y,[l])}}}]),n}(o.h);return e.\u0275fac=function(t){return new(t||e)(i.ac(o.i))},e.\u0275prov=Object(i.Mb)({factory:function(){return new e(Object(i.ac)(o.i))},token:e,providedIn:"root"}),e}(),O=["fxLayoutGap","fxLayoutGap.xs","fxLayoutGap.sm","fxLayoutGap.md","fxLayoutGap.lg","fxLayoutGap.xl","fxLayoutGap.lt-sm","fxLayoutGap.lt-md","fxLayoutGap.lt-lg","fxLayoutGap.lt-xl","fxLayoutGap.gt-xs","fxLayoutGap.gt-sm","fxLayoutGap.gt-md","fxLayoutGap.gt-lg"],S=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,o,r,c,l){var u;_classCallCheck(this,n),(u=t.call(this,e,c,r,l)).zone=i,u.directionality=o,u.styleUtils=r,u.layout="row",u.DIRECTIVE_KEY="layout-gap",u.observerSubject=new a.a;var d=[u.directionality.change,u.observerSubject.asObservable()];return u.init(d),u.marshal.trackValue(u.nativeElement,"layout").pipe(Object(s.a)(u.destroySubject)).subscribe(u.onLayoutChange.bind(_assertThisInitialized(u))),u}return _createClass(n,[{key:"ngAfterContentInit",value:function(){this.buildChildObservable(),this.triggerUpdate()}},{key:"ngOnDestroy",value:function(){_get(_getPrototypeOf(n.prototype),"ngOnDestroy",this).call(this),this.observer&&this.observer.disconnect()}},{key:"onLayoutChange",value:function(e){var t=this,n=e.value.split(" ");this.layout=n[0],c.find((function(e){return e===t.layout}))||(this.layout="row"),this.triggerUpdate()}},{key:"updateWithValue",value:function(e){var t=this,n=this.childrenNodes.filter((function(e){return 1===e.nodeType&&t.willDisplay(e)})).sort((function(e,n){var i=+t.styler.lookupStyle(e,"order"),o=+t.styler.lookupStyle(n,"order");return isNaN(i)||isNaN(o)||i===o?0:i>o?1:-1}));if(n.length>0){var i=this.directionality.value,o=this.layout;"row"===o&&"rtl"===i?this.styleCache=x:"row"===o&&"rtl"!==i?this.styleCache=P:"column"===o&&"rtl"===i?this.styleCache=k:"column"===o&&"rtl"!==i&&(this.styleCache=w),this.addStyles(e,{directionality:i,items:n,layout:o})}}},{key:"clearStyles",value:function(){var e=Object.keys(this.mru).length>0,t=e?"padding":I(this.directionality.value,this.layout);e&&_get(_getPrototypeOf(n.prototype),"clearStyles",this).call(this),this.styleUtils.applyStyleToElements(_defineProperty({},t,""),this.childrenNodes)}},{key:"willDisplay",value:function(e){var t=this.marshal.getValue(e,"show-hide");return!0===t||void 0===t&&"none"!==this.styleUtils.lookupStyle(e,"display")}},{key:"buildChildObservable",value:function(){var e=this;this.zone.runOutsideAngular((function(){"undefined"!=typeof MutationObserver&&(e.observer=new MutationObserver((function(t){t.some((function(e){return e.addedNodes&&e.addedNodes.length>0||e.removedNodes&&e.removedNodes.length>0}))&&e.observerSubject.next()})),e.observer.observe(e.nativeElement,{childList:!0}))}))}},{key:"childrenNodes",get:function(){for(var e=this.nativeElement.children,t=[],n=e.length;n--;)t[n]=e[n];return t}}]),n}(o.b);return e.\u0275fac=function(t){return new(t||e)(i.Qb(i.l),i.Qb(i.A),i.Qb(r.c),i.Qb(o.i),i.Qb(C),i.Qb(o.f))},e.\u0275dir=i.Lb({type:e,features:[i.zb]}),e}(),M=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.apply(this,arguments)).inputs=O,e}return n}(S);return e.\u0275fac=function(t){return _(t||e)},e.\u0275dir=i.Lb({type:e,selectors:[["","fxLayoutGap",""],["","fxLayoutGap.xs",""],["","fxLayoutGap.sm",""],["","fxLayoutGap.md",""],["","fxLayoutGap.lg",""],["","fxLayoutGap.xl",""],["","fxLayoutGap.lt-sm",""],["","fxLayoutGap.lt-md",""],["","fxLayoutGap.lt-lg",""],["","fxLayoutGap.lt-xl",""],["","fxLayoutGap.gt-xs",""],["","fxLayoutGap.gt-sm",""],["","fxLayoutGap.gt-md",""],["","fxLayoutGap.gt-lg",""]],inputs:{fxLayoutGap:"fxLayoutGap","fxLayoutGap.xs":"fxLayoutGap.xs","fxLayoutGap.sm":"fxLayoutGap.sm","fxLayoutGap.md":"fxLayoutGap.md","fxLayoutGap.lg":"fxLayoutGap.lg","fxLayoutGap.xl":"fxLayoutGap.xl","fxLayoutGap.lt-sm":"fxLayoutGap.lt-sm","fxLayoutGap.lt-md":"fxLayoutGap.lt-md","fxLayoutGap.lt-lg":"fxLayoutGap.lt-lg","fxLayoutGap.lt-xl":"fxLayoutGap.lt-xl","fxLayoutGap.gt-xs":"fxLayoutGap.gt-xs","fxLayoutGap.gt-sm":"fxLayoutGap.gt-sm","fxLayoutGap.gt-md":"fxLayoutGap.gt-md","fxLayoutGap.gt-lg":"fxLayoutGap.gt-lg"},features:[i.zb]}),e}(),_=i.Yb(M),x=new Map,k=new Map,P=new Map,w=new Map,E=" grid";function I(e,t){switch(t){case"column":return"margin-bottom";case"column-reverse":return"margin-top";case"row":return"rtl"===e?"margin-left":"margin-right";case"row-reverse":return"rtl"===e?"margin-right":"margin-left";default:return"rtl"===e?"margin-left":"margin-right"}}function T(e){if(null==e)throw TypeError("Cannot convert undefined or null to object");for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(var o=0,r=n;o<r.length;o++){var a=r[o];if(null!=a)for(var s in a)a.hasOwnProperty(s)&&(e[s]=a[s])}return e}var A=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;return _classCallCheck(this,n),(i=t.call(this)).layoutConfig=e,i}return _createClass(n,[{key:"buildStyles",value:function(e,t){var n=_toArray(e.split(" ")),i=n[0],o=n[1],r=n.slice(2).join(" "),a=t.direction.indexOf("column")>-1?"column":"row",s=u(a)?"max-width":"max-height",c=u(a)?"min-width":"min-height",l=String(r).indexOf("calc")>-1,d=l||"auto"===r,g=String(r).indexOf("%")>-1&&!l,h=String(r).indexOf("px")>-1||String(r).indexOf("rem")>-1||String(r).indexOf("em")>-1||String(r).indexOf("vw")>-1||String(r).indexOf("vh")>-1,p=l||h;o="0"==o?0:o;var f=!(i="0"==i?0:i)&&!o,m={},v={"max-width":null,"max-height":null,"min-width":null,"min-height":null};switch(r||""){case"":var b=!1!==this.layoutConfig.useColumnBasisZero;r="row"===a?"0%":b?"0.000000001px":"auto";break;case"initial":case"nogrow":i=0,r="auto";break;case"grow":r="100%";break;case"noshrink":o=0,r="auto";break;case"auto":break;case"none":i=0,o=0,r="auto";break;default:p||g||isNaN(r)||(r+="%"),"0%"===r&&(p=!0),"0px"===r&&(r="0%"),m=T(v,l?{"flex-grow":i,"flex-shrink":o,"flex-basis":p?r:"100%"}:{flex:"".concat(i," ").concat(o," ").concat(p?r:"100%")})}return m.flex||m["flex-grow"]||(m=T(v,l?{"flex-grow":i,"flex-shrink":o,"flex-basis":r}:{flex:"".concat(i," ").concat(o," ").concat(r)})),"0%"!==r&&"0px"!==r&&"0.000000001px"!==r&&"auto"!==r&&(m[c]=f||p&&i?r:null,m[s]=f||!d&&o?r:null),m[c]||m[s]?t.hasWrap&&(m[l?"flex-basis":"flex"]=m[s]?l?m[s]:"".concat(i," ").concat(o," ").concat(m[s]):l?m[c]:"".concat(i," ").concat(o," ").concat(m[c])):m=T(v,l?{"flex-grow":i,"flex-shrink":o,"flex-basis":r}:{flex:"".concat(i," ").concat(o," ").concat(r)}),T(m,{"box-sizing":"border-box"})}}]),n}(o.h);return e.\u0275fac=function(t){return new(t||e)(i.ac(o.e))},e.\u0275prov=Object(i.Mb)({factory:function(){return new e(Object(i.ac)(o.e))},token:e,providedIn:"root"}),e}(),R=["fxFlex","fxFlex.xs","fxFlex.sm","fxFlex.md","fxFlex.lg","fxFlex.xl","fxFlex.lt-sm","fxFlex.lt-md","fxFlex.lt-lg","fxFlex.lt-xl","fxFlex.gt-xs","fxFlex.gt-sm","fxFlex.gt-md","fxFlex.gt-lg"],V=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,o,r,a){var c;return _classCallCheck(this,n),(c=t.call(this,e,r,i,a)).layoutConfig=o,c.DIRECTIVE_KEY="flex",c.direction="",c.wrap=!1,c.flexGrow="1",c.flexShrink="1",c.init(),c.parentElement&&(c.marshal.trackValue(c.parentElement,"layout").pipe(Object(s.a)(c.destroySubject)).subscribe(c.onLayoutChange.bind(_assertThisInitialized(c))),c.marshal.trackValue(c.nativeElement,"layout-align").pipe(Object(s.a)(c.destroySubject)).subscribe(c.triggerReflow.bind(_assertThisInitialized(c)))),c}return _createClass(n,[{key:"onLayoutChange",value:function(e){var t=e.value.split(" ");this.direction=t[0],this.wrap=void 0!==t[1]&&"wrap"===t[1],this.triggerUpdate()}},{key:"updateWithValue",value:function(e){this.direction||(this.direction=this.getFlexFlowDirection(this.parentElement,!1!==this.layoutConfig.addFlexToParent));var t=this.direction,n=t.startsWith("row"),i=this.wrap;n&&i?this.styleCache=U:n&&!i?this.styleCache=D:!n&&i?this.styleCache=W:n||i||(this.styleCache=j);var r=String(e).replace(";",""),a=Object(o.j)(r,this.flexGrow,this.flexShrink);this.addStyles(a.join(" "),{direction:t,hasWrap:i})}},{key:"triggerReflow",value:function(){var e=this.activatedValue;if(void 0!==e){var t=Object(o.j)(e+"",this.flexGrow,this.flexShrink);this.marshal.updateElement(this.nativeElement,this.DIRECTIVE_KEY,t.join(" "))}}},{key:"shrink",get:function(){return this.flexShrink},set:function(e){this.flexShrink=e||"1",this.triggerReflow()}},{key:"grow",get:function(){return this.flexGrow},set:function(e){this.flexGrow=e||"1",this.triggerReflow()}}]),n}(o.b);return e.\u0275fac=function(t){return new(t||e)(i.Qb(i.l),i.Qb(o.i),i.Qb(o.e),i.Qb(A),i.Qb(o.f))},e.\u0275dir=i.Lb({type:e,inputs:{shrink:["fxShrink","shrink"],grow:["fxGrow","grow"]},features:[i.zb]}),e}(),L=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.apply(this,arguments)).inputs=R,e}return n}(V);return e.\u0275fac=function(t){return N(t||e)},e.\u0275dir=i.Lb({type:e,selectors:[["","fxFlex",""],["","fxFlex.xs",""],["","fxFlex.sm",""],["","fxFlex.md",""],["","fxFlex.lg",""],["","fxFlex.xl",""],["","fxFlex.lt-sm",""],["","fxFlex.lt-md",""],["","fxFlex.lt-lg",""],["","fxFlex.lt-xl",""],["","fxFlex.gt-xs",""],["","fxFlex.gt-sm",""],["","fxFlex.gt-md",""],["","fxFlex.gt-lg",""]],inputs:{fxFlex:"fxFlex","fxFlex.xs":"fxFlex.xs","fxFlex.sm":"fxFlex.sm","fxFlex.md":"fxFlex.md","fxFlex.lg":"fxFlex.lg","fxFlex.xl":"fxFlex.xl","fxFlex.lt-sm":"fxFlex.lt-sm","fxFlex.lt-md":"fxFlex.lt-md","fxFlex.lt-lg":"fxFlex.lt-lg","fxFlex.lt-xl":"fxFlex.lt-xl","fxFlex.gt-xs":"fxFlex.gt-xs","fxFlex.gt-sm":"fxFlex.gt-sm","fxFlex.gt-md":"fxFlex.gt-md","fxFlex.gt-lg":"fxFlex.gt-lg"},features:[i.zb]}),e}(),N=i.Yb(L),D=new Map,j=new Map,U=new Map,W=new Map,B=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"buildStyles",value:function(e){return{order:e&&parseInt(e,10)||""}}}]),n}(o.h);return e.\u0275fac=function(t){return F(t||e)},e.\u0275prov=Object(i.Mb)({factory:function(){return new e},token:e,providedIn:"root"}),e}(),F=i.Yb(B),z=["fxFlexOrder","fxFlexOrder.xs","fxFlexOrder.sm","fxFlexOrder.md","fxFlexOrder.lg","fxFlexOrder.xl","fxFlexOrder.lt-sm","fxFlexOrder.lt-md","fxFlexOrder.lt-lg","fxFlexOrder.lt-xl","fxFlexOrder.gt-xs","fxFlexOrder.gt-sm","fxFlexOrder.gt-md","fxFlexOrder.gt-lg"],G=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,o,r){var a;return _classCallCheck(this,n),(a=t.call(this,e,o,i,r)).DIRECTIVE_KEY="flex-order",a.styleCache=Q,a.init(),a}return n}(o.b);return e.\u0275fac=function(t){return new(t||e)(i.Qb(i.l),i.Qb(o.i),i.Qb(B),i.Qb(o.f))},e.\u0275dir=i.Lb({type:e,features:[i.zb]}),e}(),Q=new Map,K=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.apply(this,arguments)).inputs=z,e}return n}(G);return e.\u0275fac=function(t){return H(t||e)},e.\u0275dir=i.Lb({type:e,selectors:[["","fxFlexOrder",""],["","fxFlexOrder.xs",""],["","fxFlexOrder.sm",""],["","fxFlexOrder.md",""],["","fxFlexOrder.lg",""],["","fxFlexOrder.xl",""],["","fxFlexOrder.lt-sm",""],["","fxFlexOrder.lt-md",""],["","fxFlexOrder.lt-lg",""],["","fxFlexOrder.lt-xl",""],["","fxFlexOrder.gt-xs",""],["","fxFlexOrder.gt-sm",""],["","fxFlexOrder.gt-md",""],["","fxFlexOrder.gt-lg",""]],inputs:{fxFlexOrder:"fxFlexOrder","fxFlexOrder.xs":"fxFlexOrder.xs","fxFlexOrder.sm":"fxFlexOrder.sm","fxFlexOrder.md":"fxFlexOrder.md","fxFlexOrder.lg":"fxFlexOrder.lg","fxFlexOrder.xl":"fxFlexOrder.xl","fxFlexOrder.lt-sm":"fxFlexOrder.lt-sm","fxFlexOrder.lt-md":"fxFlexOrder.lt-md","fxFlexOrder.lt-lg":"fxFlexOrder.lt-lg","fxFlexOrder.lt-xl":"fxFlexOrder.lt-xl","fxFlexOrder.gt-xs":"fxFlexOrder.gt-xs","fxFlexOrder.gt-sm":"fxFlexOrder.gt-sm","fxFlexOrder.gt-md":"fxFlexOrder.gt-md","fxFlexOrder.gt-lg":"fxFlexOrder.gt-lg"},features:[i.zb]}),e}(),H=i.Yb(K),q={margin:0,width:"100%",height:"100%","min-width":"100%","min-height":"100%"},Y=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"buildStyles",value:function(e){return q}}]),n}(o.h);return e.\u0275fac=function(t){return Z(t||e)},e.\u0275prov=Object(i.Mb)({factory:function(){return new e},token:e,providedIn:"root"}),e}(),Z=i.Yb(Y),J=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,o,r){var a;return _classCallCheck(this,n),(a=t.call(this,e,o,i,r)).styleCache=X,a.addStyles(""),a}return n}(o.b);return e.\u0275fac=function(t){return new(t||e)(i.Qb(i.l),i.Qb(o.i),i.Qb(Y),i.Qb(o.f))},e.\u0275dir=i.Lb({type:e,selectors:[["","fxFill",""],["","fxFlexFill",""]],features:[i.zb]}),e}(),X=new Map,$=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"buildStyles",value:function(e,t){var n={},i=_slicedToArray(e.split(" "),2),o=i[0],r=i[1];switch(o){case"center":n["justify-content"]="center";break;case"space-around":n["justify-content"]="space-around";break;case"space-between":n["justify-content"]="space-between";break;case"space-evenly":n["justify-content"]="space-evenly";break;case"end":case"flex-end":n["justify-content"]="flex-end";break;case"start":case"flex-start":default:n["justify-content"]="flex-start"}switch(r){case"start":case"flex-start":n["align-items"]=n["align-content"]="flex-start";break;case"center":n["align-items"]=n["align-content"]="center";break;case"end":case"flex-end":n["align-items"]=n["align-content"]="flex-end";break;case"space-between":n["align-content"]="space-between",n["align-items"]="stretch";break;case"space-around":n["align-content"]="space-around",n["align-items"]="stretch";break;case"baseline":n["align-content"]="stretch",n["align-items"]="baseline";break;case"stretch":default:n["align-items"]=n["align-content"]="stretch"}return T(n,{display:t.inline?"inline-flex":"flex","flex-direction":t.layout,"box-sizing":"border-box","max-width":"stretch"===r?u(t.layout)?null:"100%":null,"max-height":"stretch"===r&&u(t.layout)?"100%":null})}}]),n}(o.h);return e.\u0275fac=function(t){return ee(t||e)},e.\u0275prov=Object(i.Mb)({factory:function(){return new e},token:e,providedIn:"root"}),e}(),ee=i.Yb($),te=["fxLayoutAlign","fxLayoutAlign.xs","fxLayoutAlign.sm","fxLayoutAlign.md","fxLayoutAlign.lg","fxLayoutAlign.xl","fxLayoutAlign.lt-sm","fxLayoutAlign.lt-md","fxLayoutAlign.lt-lg","fxLayoutAlign.lt-xl","fxLayoutAlign.gt-xs","fxLayoutAlign.gt-sm","fxLayoutAlign.gt-md","fxLayoutAlign.gt-lg"],ne=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,o,r){var a;return _classCallCheck(this,n),(a=t.call(this,e,o,i,r)).DIRECTIVE_KEY="layout-align",a.layout="row",a.inline=!1,a.init(),a.marshal.trackValue(a.nativeElement,"layout").pipe(Object(s.a)(a.destroySubject)).subscribe(a.onLayoutChange.bind(_assertThisInitialized(a))),a}return _createClass(n,[{key:"updateWithValue",value:function(e){var t=this.layout||"row",n=this.inline;"row"===t&&n?this.styleCache=le:"row"!==t||n?"row-reverse"===t&&n?this.styleCache=de:"row-reverse"!==t||n?"column"===t&&n?this.styleCache=ue:"column"!==t||n?"column-reverse"===t&&n?this.styleCache=ge:"column-reverse"!==t||n||(this.styleCache=ce):this.styleCache=ae:this.styleCache=se:this.styleCache=re,this.addStyles(e,{layout:t,inline:n})}},{key:"onLayoutChange",value:function(e){var t=this,n=e.value.split(" ");this.layout=n[0],this.inline=e.value.includes("inline"),c.find((function(e){return e===t.layout}))||(this.layout="row"),this.triggerUpdate()}}]),n}(o.b);return e.\u0275fac=function(t){return new(t||e)(i.Qb(i.l),i.Qb(o.i),i.Qb($),i.Qb(o.f))},e.\u0275dir=i.Lb({type:e,features:[i.zb]}),e}(),ie=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.apply(this,arguments)).inputs=te,e}return n}(ne);return e.\u0275fac=function(t){return oe(t||e)},e.\u0275dir=i.Lb({type:e,selectors:[["","fxLayoutAlign",""],["","fxLayoutAlign.xs",""],["","fxLayoutAlign.sm",""],["","fxLayoutAlign.md",""],["","fxLayoutAlign.lg",""],["","fxLayoutAlign.xl",""],["","fxLayoutAlign.lt-sm",""],["","fxLayoutAlign.lt-md",""],["","fxLayoutAlign.lt-lg",""],["","fxLayoutAlign.lt-xl",""],["","fxLayoutAlign.gt-xs",""],["","fxLayoutAlign.gt-sm",""],["","fxLayoutAlign.gt-md",""],["","fxLayoutAlign.gt-lg",""]],inputs:{fxLayoutAlign:"fxLayoutAlign","fxLayoutAlign.xs":"fxLayoutAlign.xs","fxLayoutAlign.sm":"fxLayoutAlign.sm","fxLayoutAlign.md":"fxLayoutAlign.md","fxLayoutAlign.lg":"fxLayoutAlign.lg","fxLayoutAlign.xl":"fxLayoutAlign.xl","fxLayoutAlign.lt-sm":"fxLayoutAlign.lt-sm","fxLayoutAlign.lt-md":"fxLayoutAlign.lt-md","fxLayoutAlign.lt-lg":"fxLayoutAlign.lt-lg","fxLayoutAlign.lt-xl":"fxLayoutAlign.lt-xl","fxLayoutAlign.gt-xs":"fxLayoutAlign.gt-xs","fxLayoutAlign.gt-sm":"fxLayoutAlign.gt-sm","fxLayoutAlign.gt-md":"fxLayoutAlign.gt-md","fxLayoutAlign.gt-lg":"fxLayoutAlign.gt-lg"},features:[i.zb]}),e}(),oe=i.Yb(ie),re=new Map,ae=new Map,se=new Map,ce=new Map,le=new Map,ue=new Map,de=new Map,ge=new Map,he=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=i.Ob({type:e}),e.\u0275inj=i.Nb({factory:function(t){return new(t||e)},imports:[[o.c,r.a]]}),e}()},YUcS:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n("fXoL"),o=n("ofXK"),r=n("pD6V"),a=n("znSr"),s=n("XiUz");n("8LU1");var c,l,u=((l=function e(){_classCallCheck(this,e)}).\u0275mod=i.Ob({type:l}),l.\u0275inj=i.Nb({factory:function(e){return new(e||l)},imports:[[r.c]]}),l),d=((c=function(){function e(t,n){_classCallCheck(this,e),Object(o.J)(n)&&!t&&console.warn("Warning: Flex Layout loaded on the server without FlexLayoutServerModule")}return _createClass(e,null,[{key:"withConfig",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return{ngModule:e,providers:t.serverLoaded?[{provide:r.e,useValue:Object.assign(Object.assign({},r.d),t)},{provide:r.a,useValue:n,multi:!0},{provide:r.g,useValue:!0}]:[{provide:r.e,useValue:Object.assign(Object.assign({},r.d),t)},{provide:r.a,useValue:n,multi:!0}]}}}]),e}()).\u0275mod=i.Ob({type:c}),c.\u0275inj=i.Nb({factory:function(e){return new(e||c)(i.ac(r.g),i.ac(i.C))},imports:[[s.g,a.c,u],s.g,a.c,u]}),c)},Yn0Z:function(e,t,n){"use strict";var i;t.__esModule=!0,(i=t.LocalRecorderState||(t.LocalRecorderState={})).READY="READY",i.RECORDING="RECORDING",i.PAUSED="PAUSED",i.FINISHED="FINISHED"},bDgZ:function(e,t,n){(function(e){var i;(function(){"use strict";var o={function:!0,object:!0},r=o[typeof window]&&window||this,a=o[typeof t]&&t&&o[typeof e]&&e&&!e.nodeType&&e&&"object"==typeof global&&global;!a||a.global!==a&&a.window!==a&&a.self!==a||(r=a);var s=Math.pow(2,53)-1,c=/\bOpera/,l=Object.prototype,u=l.hasOwnProperty,d=l.toString;function g(e){return(e=String(e)).charAt(0).toUpperCase()+e.slice(1)}function h(e){return e=b(e),/^(?:webOS|i(?:OS|P))/.test(e)?e:g(e)}function p(e,t){for(var n in e)u.call(e,n)&&t(e[n],n,e)}function f(e){return null==e?g(e):d.call(e).slice(8,-1)}function m(e){return String(e).replace(/([ -])(?!$)/g,"$1?")}function v(e,t){var n=null;return function(e,t){var n=-1,i=e?e.length:0;if("number"==typeof i&&i>-1&&i<=s)for(;++n<i;)t(e[n],n);else p(e,t)}(e,(function(i,o){n=t(n,i,o,e)})),n}function b(e){return String(e).replace(/^ +| +$/g,"")}var y=function e(t){var n=r,i=t&&"object"==typeof t&&"String"!=f(t);i&&(n=t,t=null);var o=n.navigator||{},a=o.userAgent||"";t||(t=a);var s,l,u,g,y=i?!!o.likeChrome:/\bChrome\b/.test(t)&&!/internal|\n/i.test(d.toString()),C=i?"Object":"ScriptBridgingProxyObject",O=i?"Object":"Environment",S=i&&n.java?"JavaPackage":f(n.java),M=i?"Object":"RuntimeObject",_=/\bJava/.test(S)&&n.java,x=_&&f(n.environment)==O,k=_?"a":"\u03b1",P=_?"b":"\u03b2",w=n.document||{},E=n.operamini||n.opera,I=c.test(I=i&&E?E["[[Class]]"]:f(E))?I:E=null,T=t,A=[],R=null,V=t==a,L=V&&E&&"function"==typeof E.version&&E.version(),N=v([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"],(function(e,n){return e||RegExp("\\b"+(n.pattern||m(n))+"\\b","i").exec(t)&&(n.label||n)})),D=v(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Waterfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"],(function(e,n){return e||RegExp("\\b"+(n.pattern||m(n))+"\\b","i").exec(t)&&(n.label||n)})),j=B([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),U=v({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1}},(function(e,n,i){return e||(n[j]||n[/^[a-z]+(?: +[a-z]+\b)*/i.exec(j)]||RegExp("\\b"+m(i)+"(?:\\b|\\w*\\d)","i").exec(t))&&i})),W=v(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "],(function(e,n){var i=n.pattern||m(n);return!e&&(e=RegExp("\\b"+i+"(?:/[\\d.]+|[ \\w.]*)","i").exec(t))&&(e=function(e,t,n){var i={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return t&&n&&/^Win/i.test(e)&&!/^Windows Phone /i.test(e)&&(i=i[/[\d.]+$/.exec(e)])&&(e="Windows "+i),e=String(e),t&&n&&(e=e.replace(RegExp(t,"i"),n)),h(e.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(e,i,n.label||n)),e}));function B(e){return v(e,(function(e,n){var i=n.pattern||m(n);return!e&&(e=RegExp("\\b"+i+" *\\d+[.\\w_]*","i").exec(t)||RegExp("\\b"+i+" *\\w+-[\\w]*","i").exec(t)||RegExp("\\b"+i+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(t))&&((e=String(n.label&&!RegExp(i,"i").test(n.label)?n.label:e).split("/"))[1]&&!/[\d.]+/.test(e[0])&&(e[0]+=" "+e[1]),n=n.label||n,e=h(e[0].replace(RegExp(i,"i"),n).replace(RegExp("; *(?:"+n+"[_-])?","i")," ").replace(RegExp("("+n+")[-_.]?(\\w)","i"),"$1 $2"))),e}))}if(N&&(N=[N]),U&&!j&&(j=B([U])),(s=/\bGoogle TV\b/.exec(j))&&(j=s[0]),/\bSimulator\b/i.test(t)&&(j=(j?j+" ":"")+"Simulator"),"Opera Mini"==D&&/\bOPiOS\b/.test(t)&&A.push("running in Turbo/Uncompressed mode"),"IE"==D&&/\blike iPhone OS\b/.test(t)?(U=(s=e(t.replace(/like iPhone OS/,""))).manufacturer,j=s.product):/^iP/.test(j)?(D||(D="Safari"),W="iOS"+((s=/ OS ([\d_]+)/i.exec(t))?" "+s[1].replace(/_/g,"."):"")):"Konqueror"!=D||/buntu/i.test(W)?U&&"Google"!=U&&(/Chrome/.test(D)&&!/\bMobile Safari\b/i.test(t)||/\bVita\b/.test(j))||/\bAndroid\b/.test(W)&&/^Chrome/.test(D)&&/\bVersion\//i.test(t)?(D="Android Browser",W=/\bAndroid\b/.test(W)?W:"Android"):"Silk"==D?(/\bMobi/i.test(t)||(W="Android",A.unshift("desktop mode")),/Accelerated *= *true/i.test(t)&&A.unshift("accelerated")):"PaleMoon"==D&&(s=/\bFirefox\/([\d.]+)\b/.exec(t))?A.push("identifying as Firefox "+s[1]):"Firefox"==D&&(s=/\b(Mobile|Tablet|TV)\b/i.exec(t))?(W||(W="Firefox OS"),j||(j=s[1])):!D||(s=!/\bMinefield\b/i.test(t)&&/\b(?:Firefox|Safari)\b/.exec(D))?(D&&!j&&/[\/,]|^[^(]+?\)/.test(t.slice(t.indexOf(s+"/")+8))&&(D=null),(s=j||U||W)&&(j||U||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(W))&&(D=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(W)?W:s)+" Browser")):"Electron"==D&&(s=(/\bChrome\/([\d.]+)\b/.exec(t)||0)[1])&&A.push("Chromium "+s):W="Kubuntu",L||(L=v(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))","Version",m(D),"(?:Firefox|Minefield|NetFront)"],(function(e,n){return e||(RegExp(n+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(t)||0)[1]||null}))),(s=("iCab"==N&&parseFloat(L)>3?"WebKit":/\bOpera\b/.test(D)&&(/\bOPR\b/.test(t)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(t)&&!/^(?:Trident|EdgeHTML)$/.test(N)&&"WebKit"||!N&&/\bMSIE\b/i.test(t)&&("Mac OS"==W?"Tasman":"Trident")||"WebKit"==N&&/\bPlayStation\b(?! Vita\b)/i.test(D)&&"NetFront")&&(N=[s]),"IE"==D&&(s=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(t)||0)[1])?(D+=" Mobile",W="Windows Phone "+(/\+$/.test(s)?s:s+".x"),A.unshift("desktop mode")):/\bWPDesktop\b/i.test(t)?(D="IE Mobile",W="Windows Phone 8.x",A.unshift("desktop mode"),L||(L=(/\brv:([\d.]+)/.exec(t)||0)[1])):"IE"!=D&&"Trident"==N&&(s=/\brv:([\d.]+)/.exec(t))&&(D&&A.push("identifying as "+D+(L?" "+L:"")),D="IE",L=s[1]),V){if(/^(?:boolean|number|string|undefined)$/.test(g=null!=(u=n)?typeof u.global:"number")||"object"==g&&!u.global)f(s=n.runtime)==C?(D="Adobe AIR",W=s.flash.system.Capabilities.os):f(s=n.phantom)==M?(D="PhantomJS",L=(s=s.version||null)&&s.major+"."+s.minor+"."+s.patch):"number"==typeof w.documentMode&&(s=/\bTrident\/(\d+)/i.exec(t))?((s=+s[1]+4)!=(L=[L,w.documentMode])[1]&&(A.push("IE "+L[1]+" mode"),N&&(N[1]=""),L[1]=s),L="IE"==D?String(L[1].toFixed(1)):L[0]):"number"==typeof w.documentMode&&/^(?:Chrome|Firefox)\b/.test(D)&&(A.push("masking as "+D+" "+L),D="IE",L="11.0",N=["Trident"],W="Windows");else if(_&&(T=(s=_.lang.System).getProperty("os.arch"),W=W||s.getProperty("os.name")+" "+s.getProperty("os.version")),x){try{L=n.require("ringo/engine").version.join("."),D="RingoJS"}catch(z){(s=n.system)&&s.global.system==n.system&&(D="Narwhal",W||(W=s[0].os||null))}D||(D="Rhino")}else"object"==typeof n.process&&!n.process.browser&&(s=n.process)&&("object"==typeof s.versions&&("string"==typeof s.versions.electron?(A.push("Node "+s.versions.node),D="Electron",L=s.versions.electron):"string"==typeof s.versions.nw&&(A.push("Chromium "+L,"Node "+s.versions.node),D="NW.js",L=s.versions.nw)),D||(D="Node.js",T=s.arch,W=s.platform,L=(L=/[\d.]+/.exec(s.version))?L[0]:null));W=W&&h(W)}if(L&&(s=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(L)||/(?:alpha|beta)(?: ?\d)?/i.exec(t+";"+(V&&o.appMinorVersion))||/\bMinefield\b/i.test(t)&&"a")&&(R=/b/i.test(s)?"beta":"alpha",L=L.replace(RegExp(s+"\\+?$"),"")+("beta"==R?P:k)+(/\d+\+?/.exec(s)||"")),"Fennec"==D||"Firefox"==D&&/\b(?:Android|Firefox OS)\b/.test(W))D="Firefox Mobile";else if("Maxthon"==D&&L)L=L.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(j))"Xbox 360"==j&&(W=null),"Xbox 360"==j&&/\bIEMobile\b/.test(t)&&A.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(D)&&(!D||j||/Browser|Mobi/.test(D))||"Windows CE"!=W&&!/Mobi/i.test(t))if("IE"==D&&V)try{null===n.external&&A.unshift("platform preview")}catch(z){A.unshift("embedded")}else(/\bBlackBerry\b/.test(j)||/\bBB10\b/.test(t))&&(s=(RegExp(j.replace(/ +/g," *")+"/([.\\d]+)","i").exec(t)||0)[1]||L)?(W=((s=[s,/BB10/.test(t)])[1]?(j=null,U="BlackBerry"):"Device Software")+" "+s[0],L=null):this!=p&&"Wii"!=j&&(V&&E||/Opera/.test(D)&&/\b(?:MSIE|Firefox)\b/i.test(t)||"Firefox"==D&&/\bOS X (?:\d+\.){2,}/.test(W)||"IE"==D&&(W&&!/^Win/.test(W)&&L>5.5||/\bWindows XP\b/.test(W)&&L>8||8==L&&!/\bTrident\b/.test(t)))&&!c.test(s=e.call(p,t.replace(c,"")+";"))&&s.name&&(s="ing as "+s.name+((s=s.version)?" "+s:""),c.test(D)?(/\bIE\b/.test(s)&&"Mac OS"==W&&(W=null),s="identify"+s):(s="mask"+s,D=I?h(I.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(s)&&(W=null),V||(L=null)),N=["Presto"],A.push(s));else D+=" Mobile";(s=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(t)||0)[1])&&(s=[parseFloat(s.replace(/\.(\d)$/,".0$1")),s],"Safari"==D&&"+"==s[1].slice(-1)?(D="WebKit Nightly",R="alpha",L=s[1].slice(0,-1)):L!=s[1]&&L!=(s[2]=(/\bSafari\/([\d.]+\+?)/i.exec(t)||0)[1])||(L=null),s[1]=(/\bChrome\/([\d.]+)/i.exec(t)||0)[1],537.36==s[0]&&537.36==s[2]&&parseFloat(s[1])>=28&&"WebKit"==N&&(N=["Blink"]),V&&(y||s[1])?(N&&(N[1]="like Chrome"),s=s[1]||((s=s[0])<530?1:s<532?2:s<532.05?3:s<533?4:s<534.03?5:s<534.07?6:s<534.1?7:s<534.13?8:s<534.16?9:s<534.24?10:s<534.3?11:s<535.01?12:s<535.02?"13+":s<535.07?15:s<535.11?16:s<535.19?17:s<536.05?18:s<536.1?19:s<537.01?20:s<537.11?"21+":s<537.13?23:s<537.18?24:s<537.24?25:s<537.36?26:"Blink"!=N?"27":"28")):(N&&(N[1]="like Safari"),s=(s=s[0])<400?1:s<500?2:s<526?3:s<533?4:s<534?"4+":s<535?5:s<537?6:s<538?7:s<601?8:"8"),N&&(N[1]+=" "+(s+="number"==typeof s?".x":/[.+]/.test(s)?"":"+")),"Safari"==D&&(!L||parseInt(L)>45)&&(L=s)),"Opera"==D&&(s=/\bzbov|zvav$/.exec(W))?(D+=" ",A.unshift("desktop mode"),"zvav"==s?(D+="Mini",L=null):D+="Mobile",W=W.replace(RegExp(" *"+s+"$"),"")):"Safari"==D&&/\bChrome\b/.exec(N&&N[1])&&(A.unshift("desktop mode"),D="Chrome Mobile",L=null,/\bOS X\b/.test(W)?(U="Apple",W="iOS 4.3+"):W=null),L&&0==L.indexOf(s=/[\d.]+$/.exec(W))&&t.indexOf("/"+s+"-")>-1&&(W=b(W.replace(s,""))),N&&!/\b(?:Avant|Nook)\b/.test(D)&&(/Browser|Lunascape|Maxthon/.test(D)||"Safari"!=D&&/^iOS/.test(W)&&/\bSafari\b/.test(N[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(D)&&N[1])&&(s=N[N.length-1])&&A.push(s),A.length&&(A=["("+A.join("; ")+")"]),U&&j&&j.indexOf(U)<0&&A.push("on "+U),j&&A.push((/^on /.test(A[A.length-1])?"":"on ")+j),W&&(s=/ ([\d.+]+)$/.exec(W),l=s&&"/"==W.charAt(W.length-s[0].length-1),W={architecture:32,family:s&&!l?W.replace(s[0],""):W,version:s?s[1]:null,toString:function(){var e=this.version;return this.family+(e&&!l?" "+e:"")+(64==this.architecture?" 64-bit":"")}}),(s=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(T))&&!/\bi686\b/i.test(T)?(W&&(W.architecture=64,W.family=W.family.replace(RegExp(" *"+s),"")),D&&(/\bWOW64\b/i.test(t)||V&&/\w(?:86|32)$/.test(o.cpuClass||o.platform)&&!/\bWin64; x64\b/i.test(t))&&A.unshift("32-bit")):W&&/^OS X/.test(W.family)&&"Chrome"==D&&parseFloat(L)>=39&&(W.architecture=64),t||(t=null);var F={};return F.description=t,F.layout=N&&N[0],F.manufacturer=U,F.name=D,F.prerelease=R,F.product=j,F.ua=t,F.version=D&&L,F.os=W||{architecture:null,family:null,version:null,toString:function(){return"null"}},F.parse=e,F.toString=function(){return this.description||""},F.version&&A.unshift(L),F.name&&A.unshift(D),W&&D&&(W!=String(W).split(" ")[0]||W!=D.split(" ")[0]&&!j)&&A.push(j?"("+W+")":"on "+W),A.length&&(F.description=A.join(" ")),F}();r.platform=y,void 0===(i=(function(){return y}).call(t,n,t,e))||(e.exports=i)}).call(this)}).call(this,n("YuTi")(e))},bGVd:function(e,t,n){e.exports=n("IXxz").default},bk74:function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0;var r=n("P3vI"),a=n("9m68").OpenViduLogger.getInstance(),s=function(e){function t(t,n,i){var o=e.call(this,t,n)||this;return o.element=o.targetElement,o.stream=t,o.properties=i,o}return o(t,e),t.prototype.subscribeToAudio=function(e){return this.stream.getMediaStream().getAudioTracks().forEach((function(t){t.enabled=e})),this.stream.audioActive=e,a.info("'Subscriber' has "+(e?"subscribed to":"unsubscribed from")+" its audio stream"),this},t.prototype.subscribeToVideo=function(e){return this.stream.getMediaStream().getVideoTracks().forEach((function(t){t.enabled=e})),this.stream.videoActive=e,a.info("'Subscriber' has "+(e?"subscribed to":"unsubscribed from")+" its video stream"),this},t}(r.StreamManager);t.Subscriber=s},cUzU:function(e,t,n){"use strict";var i=console;e.exports=function(e){var t,n=!1,o=e.uri,r=!1,a=new WebSocket(o);a.onopen=function(){i.debug("WebSocket connected to "+o),e.onconnected&&e.onconnected()},a.onerror=function(t){i.error("Could not connect to "+o+" (invoking onerror if defined)",t),e.onerror&&e.onerror(t)};var s=function(){3===a.readyState?n?i.debug("Connection closed by user"):(i.debug("Connection closed unexpectecly. Reconnecting..."),c(2e3,1)):i.debug("Close callback from previous websocket. Ignoring it")};function c(n,l){if(i.debug("reconnect (attempt #"+l+", max="+n+")"),1===l){if(r)return void i.warn("Trying to reconnect when already reconnecting... Ignoring this reconnection.");r=!0,e.onreconnecting&&e.onreconnecting()}!function(n,l){i.debug("Reconnection attempt #"+l),a.close(),(a=new WebSocket(o)).onopen=function(){i.debug("Reconnected to "+o+" after "+l+" attempts..."),r=!1,t(),e.onreconnected()&&e.onreconnected(),a.onclose=s},a.onerror=function(t){i.warn("Reconnection error: ",t),l===n?e.ondisconnect&&e.ondisconnect():setTimeout((function(){c(n,l+1)}),3e3)}}(n,l)}a.onclose=s,this.close=function(){n=!0,a.close()},this.reconnectWs=function(){i.debug("reconnectWs"),c(2e3,1)},this.send=function(e){a.send(e)},this.addEventListener=function(e,n){(t=function(){a.addEventListener(e,n)})()}}},dNgK:function(e,t,n){"use strict";n.d(t,"a",(function(){return k})),n.d(t,"b",(function(){return _}));var i=n("rDax"),o=n("+rOU"),r=n("ofXK"),a=n("fXoL"),s=n("FKr1"),c=n("bTqV"),l=n("XNiG"),u=n("IzEk"),d=n("1G5W"),g=n("R0Ic"),h=n("u47x"),p=n("0MNC");function f(e,t){if(1&e){var n=a.Xb();a.Wb(0,"div",1),a.Wb(1,"button",2),a.ec("click",(function(){return a.Bc(n),a.ic().action()})),a.Mc(2),a.Vb(),a.Vb()}if(2&e){var i=a.ic();a.Cb(2),a.Nc(i.data.action)}}function m(e,t){}var v=Math.pow(2,31)-1,b=function(){function e(t,n){var i=this;_classCallCheck(this,e),this._overlayRef=n,this._afterDismissed=new l.a,this._afterOpened=new l.a,this._onAction=new l.a,this._dismissedByAction=!1,this.containerInstance=t,this.onAction().subscribe((function(){return i.dismiss()})),t._onExit.subscribe((function(){return i._finishDismiss()}))}return _createClass(e,[{key:"dismiss",value:function(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}},{key:"dismissWithAction",value:function(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete())}},{key:"closeWithAction",value:function(){this.dismissWithAction()}},{key:"_dismissAfter",value:function(e){var t=this;this._durationTimeoutId=setTimeout((function(){return t.dismiss()}),Math.min(e,v))}},{key:"_open",value:function(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}},{key:"_finishDismiss",value:function(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}},{key:"afterDismissed",value:function(){return this._afterDismissed.asObservable()}},{key:"afterOpened",value:function(){return this.containerInstance._onEnter}},{key:"onAction",value:function(){return this._onAction.asObservable()}}]),e}(),y=new a.r("MatSnackBarData"),C=function e(){_classCallCheck(this,e),this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"},O=function(){var e=function(){function e(t,n){_classCallCheck(this,e),this.snackBarRef=t,this.data=n}return _createClass(e,[{key:"action",value:function(){this.snackBarRef.dismissWithAction()}},{key:"hasAction",get:function(){return!!this.data.action}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.Qb(b),a.Qb(y))},e.\u0275cmp=a.Kb({type:e,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-simple-snackbar"],decls:3,vars:2,consts:[["class","mat-simple-snackbar-action",4,"ngIf"],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(e,t){1&e&&(a.Wb(0,"span"),a.Mc(1),a.Vb(),a.Kc(2,f,3,1,"div",0)),2&e&&(a.Cb(1),a.Nc(t.data.message),a.Cb(1),a.pc("ngIf",t.hasAction))},directives:[r.t,c.b],styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}\n"],encapsulation:2,changeDetection:0}),e}(),S={snackBarState:Object(g.n)("state",[Object(g.k)("void, hidden",Object(g.l)({transform:"scale(0.8)",opacity:0})),Object(g.k)("visible",Object(g.l)({transform:"scale(1)",opacity:1})),Object(g.m)("* => visible",Object(g.e)("150ms cubic-bezier(0, 0, 0.2, 1)")),Object(g.m)("* => void, * => hidden",Object(g.e)("75ms cubic-bezier(0.4, 0.0, 1, 1)",Object(g.l)({opacity:0})))])},M=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,o,r){var a;return _classCallCheck(this,n),(a=t.call(this))._ngZone=e,a._elementRef=i,a._changeDetectorRef=o,a.snackBarConfig=r,a._destroyed=!1,a._onExit=new l.a,a._onEnter=new l.a,a._animationState="void",a.attachDomPortal=function(e){return a._assertNotAttached(),a._applySnackBarClasses(),a._portalOutlet.attachDomPortal(e)},a._role="assertive"!==r.politeness||r.announcementMessage?"off"===r.politeness?null:"status":"alert",a}return _createClass(n,[{key:"attachComponentPortal",value:function(e){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachComponentPortal(e)}},{key:"attachTemplatePortal",value:function(e){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachTemplatePortal(e)}},{key:"onAnimationEnd",value:function(e){var t=e.fromState,n=e.toState;if(("void"===n&&"void"!==t||"hidden"===n)&&this._completeExit(),"visible"===n){var i=this._onEnter;this._ngZone.run((function(){i.next(),i.complete()}))}}},{key:"enter",value:function(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges())}},{key:"exit",value:function(){return this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),this._onExit}},{key:"ngOnDestroy",value:function(){this._destroyed=!0,this._completeExit()}},{key:"_completeExit",value:function(){var e=this;this._ngZone.onMicrotaskEmpty.asObservable().pipe(Object(u.a)(1)).subscribe((function(){e._onExit.next(),e._onExit.complete()}))}},{key:"_applySnackBarClasses",value:function(){var e=this._elementRef.nativeElement,t=this.snackBarConfig.panelClass;t&&(Array.isArray(t)?t.forEach((function(t){return e.classList.add(t)})):e.classList.add(t)),"center"===this.snackBarConfig.horizontalPosition&&e.classList.add("mat-snack-bar-center"),"top"===this.snackBarConfig.verticalPosition&&e.classList.add("mat-snack-bar-top")}},{key:"_assertNotAttached",value:function(){if(this._portalOutlet.hasAttached())throw Error("Attempting to attach snack bar content after content is already attached")}}]),n}(o.a);return e.\u0275fac=function(t){return new(t||e)(a.Qb(a.A),a.Qb(a.l),a.Qb(a.h),a.Qb(C))},e.\u0275cmp=a.Kb({type:e,selectors:[["snack-bar-container"]],viewQuery:function(e,t){var n;1&e&&a.Ic(o.c,!0),2&e&&a.wc(n=a.fc())&&(t._portalOutlet=n.first)},hostAttrs:[1,"mat-snack-bar-container"],hostVars:2,hostBindings:function(e,t){1&e&&a.Hb("@state.done",(function(e){return t.onAnimationEnd(e)})),2&e&&(a.Db("role",t._role),a.Qc("@state",t._animationState))},features:[a.zb],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,t){1&e&&a.Kc(0,m,0,0,"ng-template",0)},directives:[o.c],styles:[".mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}.cdk-high-contrast-active .mat-snack-bar-container{border:solid 1px}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}\n"],encapsulation:2,data:{animation:[S.snackBarState]}}),e}(),_=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=a.Ob({type:e}),e.\u0275inj=a.Nb({factory:function(t){return new(t||e)},imports:[[i.f,o.i,r.c,c.c,s.i],s.i]}),e}(),x=new a.r("mat-snack-bar-default-options",{providedIn:"root",factory:function(){return new C}}),k=function(){var e=function(){function e(t,n,i,o,r,a){_classCallCheck(this,e),this._overlay=t,this._live=n,this._injector=i,this._breakpointObserver=o,this._parentSnackBar=r,this._defaultConfig=a,this._snackBarRefAtThisLevel=null}return _createClass(e,[{key:"openFromComponent",value:function(e,t){return this._attach(e,t)}},{key:"openFromTemplate",value:function(e,t){return this._attach(e,t)}},{key:"open",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,i=Object.assign(Object.assign({},this._defaultConfig),n);return i.data={message:e,action:t},i.announcementMessage||(i.announcementMessage=e),this.openFromComponent(O,i)}},{key:"dismiss",value:function(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}},{key:"ngOnDestroy",value:function(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}},{key:"_attachSnackBarContainer",value:function(e,t){var n=new o.h(t&&t.viewContainerRef&&t.viewContainerRef.injector||this._injector,new WeakMap([[C,t]])),i=new o.d(M,t.viewContainerRef,n),r=e.attach(i);return r.instance.snackBarConfig=t,r.instance}},{key:"_attach",value:function(e,t){var n=Object.assign(Object.assign(Object.assign({},new C),this._defaultConfig),t),i=this._createOverlay(n),r=this._attachSnackBarContainer(i,n),s=new b(r,i);if(e instanceof a.M){var c=new o.j(e,null,{$implicit:n.data,snackBarRef:s});s.instance=r.attachTemplatePortal(c)}else{var l=this._createInjector(n,s),u=new o.d(e,void 0,l),g=r.attachComponentPortal(u);s.instance=g.instance}return this._breakpointObserver.observe(p.b.HandsetPortrait).pipe(Object(d.a)(i.detachments())).subscribe((function(e){var t=i.overlayElement.classList;e.matches?t.add("mat-snack-bar-handset"):t.remove("mat-snack-bar-handset")})),this._animateSnackBar(s,n),this._openedSnackBarRef=s,this._openedSnackBarRef}},{key:"_animateSnackBar",value:function(e,t){var n=this;e.afterDismissed().subscribe((function(){n._openedSnackBarRef==e&&(n._openedSnackBarRef=null),t.announcementMessage&&n._live.clear()})),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe((function(){e.containerInstance.enter()})),this._openedSnackBarRef.dismiss()):e.containerInstance.enter(),t.duration&&t.duration>0&&e.afterOpened().subscribe((function(){return e._dismissAfter(t.duration)})),t.announcementMessage&&this._live.announce(t.announcementMessage,t.politeness)}},{key:"_createOverlay",value:function(e){var t=new i.d;t.direction=e.direction;var n=this._overlay.position().global(),o="rtl"===e.direction,r="left"===e.horizontalPosition||"start"===e.horizontalPosition&&!o||"end"===e.horizontalPosition&&o,a=!r&&"center"!==e.horizontalPosition;return r?n.left("0"):a?n.right("0"):n.centerHorizontally(),"top"===e.verticalPosition?n.top("0"):n.bottom("0"),t.positionStrategy=n,this._overlay.create(t)}},{key:"_createInjector",value:function(e,t){return new o.h(e&&e.viewContainerRef&&e.viewContainerRef.injector||this._injector,new WeakMap([[b,t],[y,e.data]]))}},{key:"_openedSnackBarRef",get:function(){var e=this._parentSnackBar;return e?e._openedSnackBarRef:this._snackBarRefAtThisLevel},set:function(e){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=e:this._snackBarRefAtThisLevel=e}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.ac(i.c),a.ac(h.k),a.ac(a.s),a.ac(p.a),a.ac(e,12),a.ac(x))},e.\u0275prov=Object(a.Mb)({factory:function(){return new e(Object(a.ac)(i.c),Object(a.ac)(h.k),Object(a.ac)(a.p),Object(a.ac)(p.a),Object(a.ac)(e,12),Object(a.ac)(x))},token:e,providedIn:_}),e}()},dP7y:function(e,t,n){e.exports=n("LXjW")},"dY/r":function(e,t){var n=["stun:","turn:"];e.exports=function(e){var t,i,o=(e||{}).url||e,r={};return"string"==typeof o||o instanceof String?(o=o.trim(),(t=n[n.indexOf(o.slice(0,5))])?(i=(o=o.slice(5)).split("@"),r.username=e.username,r.credential=e.credential,i.length>1&&(o=i[1],i=i[0].split(":"),r.username=i[0],r.credential=(e||{}).credential||i[1]||""),r.url=t+o,r.urls=[r.url],r):e):e}},de4E:function(e,t){t.pack=function(e,t){var n={jsonrpc:"2.0"};if(e.method)n.method=e.method,e.params&&(n.params=e.params),null!=t&&(n.id=t);else if(null!=t){if(e.error){if(void 0!==e.result)throw new TypeError("Both result and error are defined");n.error=e.error}else{if(void 0===e.result)throw new TypeError("No result or error is defined");n.result=e.result}n.id=t}return JSON.stringify(n)},t.unpack=function(e){var t=e;("string"==typeof e||e instanceof String)&&(t=JSON.parse(e));var n=t.jsonrpc;if("2.0"!==n)throw new TypeError("Invalid JsonRPC version '"+n+"': "+e);if(null==t.method){if(null==t.id)throw new TypeError("Invalid message: "+e);var i=void 0!==t.result,o=void 0!==t.error;if(i&&o)throw new TypeError("Both result and error are defined: "+e);if(!i&&!o)throw new TypeError("No result or error is defined: "+e);t.ack=t.id,delete t.id}return t}},dlaP:function(e,t,n){"use strict";t.__esModule=!0,t.AMPERSAND=t.CLOSEPAREN=t.CLOSEANGLEBRACKET=t.CLOSEBRACKET=t.CLOSEBRACE=t.OPENPAREN=t.OPENANGLEBRACKET=t.OPENBRACKET=t.OPENBRACE=t.WS=t.TLD=t.SYM=t.UNDERSCORE=t.SLASH=t.MAILTO=t.PROTOCOL=t.QUERY=t.POUND=t.PLUS=t.NUM=t.NL=t.LOCALHOST=t.PUNCTUATION=t.DOT=t.COLON=t.AT=t.DOMAIN=t.Base=void 0;var i=n("RvMX"),o=n("JUw6"),r=(0,i.createTokenClass)();function a(e){var t=e?{v:e}:{};return(0,o.inherits)(r,(0,i.createTokenClass)(),t)}r.prototype={toString:function(){return this.v+""}};var s=a(),c=a("@"),l=a(":"),u=a("."),d=a(),g=a(),h=a("\n"),p=a(),f=a("+"),m=a("#"),v=a(),b=a("mailto:"),y=a("?"),C=a("/"),O=a("_"),S=a(),M=a(),_=a(),x=a("{"),k=a("["),P=a("<"),w=a("("),E=a("}"),I=a("]"),T=a(">"),A=a(")"),R=a("&");t.Base=r,t.DOMAIN=s,t.AT=c,t.COLON=l,t.DOT=u,t.PUNCTUATION=d,t.LOCALHOST=g,t.NL=h,t.NUM=p,t.PLUS=f,t.POUND=m,t.QUERY=y,t.PROTOCOL=v,t.MAILTO=b,t.SLASH=C,t.UNDERSCORE=O,t.SYM=S,t.TLD=M,t.WS=_,t.OPENBRACE=x,t.OPENBRACKET=k,t.OPENANGLEBRACKET=P,t.OPENPAREN=w,t.CLOSEBRACE=E,t.CLOSEBRACKET=I,t.CLOSEANGLEBRACKET=T,t.CLOSEPAREN=A,t.AMPERSAND=R},e8ps:function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0;var r=function(e){function t(t,n,i,o){var r=e.call(this,!1,t,n)||this;return r.type=n,r.connection=i,r.streamId=o,r}return o(t,e),t.prototype.callDefaultBehavior=function(){},t}(n("hzOQ").Event);t.PublisherSpeakingEvent=r},ee8k:function(e,t,n){var i=n("cUzU");t.WebSocketWithReconnection=i},gUCu:function(e,t){function n(){var e={};this.forEach=function(t){for(var n in e){var i=e[n];for(var o in i)t(i[o])}},this.get=function(t,n){var i=e[n];if(null!=i)return i[t]},this.remove=function(t,n){var i=e[n];if(null!=i){for(var o in delete i[t],i)return!1;delete e[n]}},this.set=function(t,n,i){if(null==t)return this.remove(n,i);var o=e[i];null==o&&(e[i]=o={}),o[n]=t}}n.prototype.pop=function(e,t){var n=this.get(e,t);if(null!=n)return this.remove(e,t),n},e.exports=n},hw9W:function(e){e.exports=JSON.parse("[]")},hzOQ:function(e,t,n){"use strict";t.__esModule=!0;var i=function(){function e(e,t,n){this.hasBeenPrevented=!1,this.cancelable=e,this.target=t,this.type=n}return e.prototype.isDefaultPrevented=function(){return this.hasBeenPrevented},e.prototype.preventDefault=function(){this.callDefaultBehavior=function(){},this.hasBeenPrevented=!0},e}();t.Event=i},joaK:function(e,t,n){e.exports=n("TDwH").default},ksJj:function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0;var r=n("hzOQ"),a=n("9m68").OpenViduLogger.getInstance(),s=function(e){function t(t,n){var i=e.call(this,!0,t,"sessionDisconnected")||this;return i.reason=n,i}return o(t,e),t.prototype.callDefaultBehavior=function(){a.info("Calling default behavior upon '"+this.type+"' event dispatched by 'Session'");var e=this.target;for(var t in e.remoteConnections)e.remoteConnections[t].stream&&(e.remoteConnections[t].stream.disposeWebRtcPeer(),e.remoteConnections[t].stream.disposeMediaStream(),e.remoteConnections[t].stream.streamManager&&e.remoteConnections[t].stream.streamManager.removeAllVideos(),delete e.remoteStreamsCreated[e.remoteConnections[t].stream.streamId],e.remoteConnections[t].dispose()),delete e.remoteConnections[t]},t}(r.Event);t.SessionDisconnectedEvent=s},mgp7:function(e,t,n){e.exports=n("/u9M").default},oIG1:function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0;var r=function(e){function t(t,n,i){var o=e.call(this,!1,n,i)||this;return o.element=t,o}return o(t,e),t.prototype.callDefaultBehavior=function(){},t}(n("hzOQ").Event);t.VideoElementEvent=r},pD6V:function(e,t,n){"use strict";n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return m})),n.d(t,"e",(function(){return v})),n.d(t,"g",(function(){return b})),n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return M})),n.d(t,"i",(function(){return z})),n.d(t,"h",(function(){return G})),n.d(t,"j",(function(){return Q})),n.d(t,"f",(function(){return H}));var i=n("fXoL"),o=n("ofXK"),r=n("XNiG"),a=n("2Vo4"),s=n("HDdC"),c=n("VRyK"),l=(n("7Hc7"),n("LRne"),n("xgIS"),n("pLZG")),u=(n("lJxs"),n("Kj3r"),n("eIep"),n("1G5W"),n("IzEk"),n("vkgz")),d={provide:i.b,useFactory:function(e,t){return function(){if(Object(o.I)(t)){var n=Array.from(e.querySelectorAll("[class*=".concat(g,"]"))),i=/\bflex-layout-.+?\b/g;n.forEach((function(e){e.classList.contains(g+"ssr")&&e.parentNode?e.parentNode.removeChild(e):e.className.replace(i,"")}))}}},deps:[o.e,i.C],multi:!0},g="flex-layout-",h=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=i.Ob({type:e}),e.\u0275inj=i.Nb({factory:function(t){return new(t||e)},providers:[d]}),e}(),p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;_classCallCheck(this,e),this.matches=t,this.mediaQuery=n,this.mqAlias=i,this.suffix=o,this.priority=r,this.property=""}return _createClass(e,[{key:"clone",value:function(){return new e(this.matches,this.mediaQuery,this.mqAlias,this.suffix)}}]),e}(),f=function(){var e=function(){function e(){_classCallCheck(this,e),this.stylesheet=new Map}return _createClass(e,[{key:"addStyleToElement",value:function(e,t,n){var i=this.stylesheet.get(e);i?i.set(t,n):this.stylesheet.set(e,new Map([[t,n]]))}},{key:"clearStyles",value:function(){this.stylesheet.clear()}},{key:"getStyleForElement",value:function(e,t){var n=this.stylesheet.get(e),i="";if(n){var o=n.get(t);"number"!=typeof o&&"string"!=typeof o||(i=o+"")}return i}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Object(i.Mb)({factory:function(){return new e},token:e,providedIn:"root"}),e}(),m={addFlexToParent:!0,addOrientationBps:!1,disableDefaultBps:!1,disableVendorPrefixes:!1,serverLoaded:!1,useColumnBasisZero:!0,printWithBreakpoints:[],mediaTriggerAutoRestore:!0,ssrObserveBreakpoints:[]},v=new i.r("Flex Layout token, config options for the library",{providedIn:"root",factory:function(){return m}}),b=new i.r("FlexLayoutServerLoaded",{providedIn:"root",factory:function(){return!1}}),y=new i.r("Flex Layout token, collect all breakpoints into one provider",{providedIn:"root",factory:function(){return null}});function C(e,t){return e=e?e.clone():new p,t&&(e.mqAlias=t.alias,e.mediaQuery=t.mediaQuery,e.suffix=t.suffix,e.priority=t.priority),e}var O=["row","column","row-reverse","column-reverse"];function S(e){if(e)switch(e.toLowerCase()){case"reverse":case"wrap-reverse":case"reverse-wrap":e="wrap-reverse";break;case"no":case"none":case"nowrap":e="nowrap";break;default:e="wrap"}return e}var M=function(){var e=function(){function e(t,n,i,o){_classCallCheck(this,e),this.elementRef=t,this.styleBuilder=n,this.styler=i,this.marshal=o,this.DIRECTIVE_KEY="",this.inputs=[],this.mru={},this.destroySubject=new r.a,this.styleCache=new Map}return _createClass(e,[{key:"ngOnChanges",value:function(e){var t=this;Object.keys(e).forEach((function(n){if(-1!==t.inputs.indexOf(n)){var i=n.split(".").slice(1).join(".");t.setValue(e[n].currentValue,i)}}))}},{key:"ngOnDestroy",value:function(){this.destroySubject.next(),this.destroySubject.complete(),this.marshal.releaseElement(this.nativeElement)}},{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.marshal.init(this.elementRef.nativeElement,this.DIRECTIVE_KEY,this.updateWithValue.bind(this),this.clearStyles.bind(this),e)}},{key:"addStyles",value:function(e,t){var n=this.styleBuilder,i=n.shouldCache,o=this.styleCache.get(e);o&&i||(o=n.buildStyles(e,t),i&&this.styleCache.set(e,o)),this.mru=Object.assign({},o),this.applyStyleToElement(o),n.sideEffect(e,o,t)}},{key:"clearStyles",value:function(){var e=this;Object.keys(this.mru).forEach((function(t){e.mru[t]=""})),this.applyStyleToElement(this.mru),this.mru={}}},{key:"triggerUpdate",value:function(){this.marshal.triggerUpdate(this.nativeElement,this.DIRECTIVE_KEY)}},{key:"getFlexFlowDirection",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e){var n=this.styler.getFlowDirection(e),i=_slicedToArray(n,2),o=i[0],r=i[1];if(!r&&t){var a=function(e){var t=function(e){var t=_slicedToArray((e=e?e.toLowerCase():"").split(" "),3),n=t[0],i=t[1],o=t[2];return O.find((function(e){return e===n}))||(n=O[0]),"inline"===i&&(i="inline"!==o?o:"",o="inline"),[n,S(i),!!o]}(e),n=_slicedToArray(t,3);return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{display:n?"inline-flex":"flex","box-sizing":"border-box","flex-direction":e,"flex-wrap":t||null}}(n[0],n[1],n[2])}(o);this.styler.applyStyleToElements(a,[e])}return o.trim()}return"row"}},{key:"applyStyleToElement",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.nativeElement;this.styler.applyStyleToElement(n,e,t)}},{key:"setValue",value:function(e,t){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,e,t)}},{key:"updateWithValue",value:function(e){this.addStyles(e)}},{key:"parentElement",get:function(){return this.elementRef.nativeElement.parentElement}},{key:"nativeElement",get:function(){return this.elementRef.nativeElement}},{key:"activatedValue",get:function(){return this.marshal.getValue(this.nativeElement,this.DIRECTIVE_KEY)},set:function(e){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,e,this.marshal.activatedAlias)}}]),e}();return e.\u0275fac=function(e){i.dc()},e.\u0275dir=i.Lb({type:e,features:[i.Ab]}),e}(),_=[{alias:"xs",mediaQuery:"screen and (min-width: 0px) and (max-width: 599.9px)",priority:1e3},{alias:"sm",mediaQuery:"screen and (min-width: 600px) and (max-width: 959.9px)",priority:900},{alias:"md",mediaQuery:"screen and (min-width: 960px) and (max-width: 1279.9px)",priority:800},{alias:"lg",mediaQuery:"screen and (min-width: 1280px) and (max-width: 1919.9px)",priority:700},{alias:"xl",mediaQuery:"screen and (min-width: 1920px) and (max-width: 4999.9px)",priority:600},{alias:"lt-sm",overlapping:!0,mediaQuery:"screen and (max-width: 599.9px)",priority:950},{alias:"lt-md",overlapping:!0,mediaQuery:"screen and (max-width: 959.9px)",priority:850},{alias:"lt-lg",overlapping:!0,mediaQuery:"screen and (max-width: 1279.9px)",priority:750},{alias:"lt-xl",overlapping:!0,priority:650,mediaQuery:"screen and (max-width: 1919.9px)"},{alias:"gt-xs",overlapping:!0,mediaQuery:"screen and (min-width: 600px)",priority:-950},{alias:"gt-sm",overlapping:!0,mediaQuery:"screen and (min-width: 960px)",priority:-850},{alias:"gt-md",overlapping:!0,mediaQuery:"screen and (min-width: 1280px)",priority:-750},{alias:"gt-lg",overlapping:!0,mediaQuery:"screen and (min-width: 1920px)",priority:-650}],x="(orientation: portrait) and (min-width: 600px) and (max-width: 839.9px)",k="(orientation: landscape) and (min-width: 960px) and (max-width: 1279.9px)",P="(orientation: portrait) and (min-width: 840px)",w="(orientation: landscape) and (min-width: 1280px)",E={HANDSET:"(orientation: portrait) and (max-width: 599.9px), (orientation: landscape) and (max-width: 959.9px)",TABLET:"".concat(x," , ").concat(k),WEB:"".concat(P,", ").concat(w," "),HANDSET_PORTRAIT:"(orientation: portrait) and (max-width: 599.9px)",TABLET_PORTRAIT:x+" ",WEB_PORTRAIT:""+P,HANDSET_LANDSCAPE:"(orientation: landscape) and (max-width: 959.9px)]",TABLET_LANDSCAPE:""+k,WEB_LANDSCAPE:""+w},I=[{alias:"handset",priority:2e3,mediaQuery:E.HANDSET},{alias:"handset.landscape",priority:2e3,mediaQuery:E.HANDSET_LANDSCAPE},{alias:"handset.portrait",priority:2e3,mediaQuery:E.HANDSET_PORTRAIT},{alias:"tablet",priority:2100,mediaQuery:E.TABLET},{alias:"tablet.landscape",priority:2100,mediaQuery:E.TABLET},{alias:"tablet.portrait",priority:2100,mediaQuery:E.TABLET_PORTRAIT},{alias:"web",priority:2200,mediaQuery:E.WEB,overlapping:!0},{alias:"web.landscape",priority:2200,mediaQuery:E.WEB_LANDSCAPE,overlapping:!0},{alias:"web.portrait",priority:2200,mediaQuery:E.WEB_PORTRAIT,overlapping:!0}],T=/(\.|-|_)/g;function A(e){var t=e.length>0?e.charAt(0):"",n=e.length>1?e.slice(1):"";return t.toUpperCase()+n}var R=new i.r("Token (@angular/flex-layout) Breakpoints",{providedIn:"root",factory:function(){var e=Object(i.V)(y),t=Object(i.V)(v),n=[].concat.apply([],(e||[]).map((function(e){return Array.isArray(e)?e:[e]})));return function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i={};return e.forEach((function(e){i[e.alias]=e})),n.forEach((function(e){i[e.alias]?function(e){if(null==e)throw TypeError("Cannot convert undefined or null to object");for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(var o=0,r=n;o<r.length;o++){var a=r[o];if(null!=a)for(var s in a)a.hasOwnProperty(s)&&(e[s]=a[s])}}(i[e.alias],e):i[e.alias]=e})),(t=Object.keys(i).map((function(e){return i[e]}))).forEach((function(e){e.suffix||(e.suffix=e.alias.replace(T,"|").split("|").map(A).join(""),e.overlapping=!!e.overlapping)})),t}((t.disableDefaultBps?[]:_).concat(t.addOrientationBps?I:[]),n)}});function V(e,t){return(t&&t.priority||0)-(e&&e.priority||0)}function L(e,t){return(e.priority||0)-(t.priority||0)}var N=function(){var e=function(){function e(t){_classCallCheck(this,e),this.findByMap=new Map,this.items=_toConsumableArray(t).sort(L)}return _createClass(e,[{key:"findByAlias",value:function(e){return e?this.findWithPredicate(e,(function(t){return t.alias==e})):null}},{key:"findByQuery",value:function(e){return this.findWithPredicate(e,(function(t){return t.mediaQuery==e}))}},{key:"findWithPredicate",value:function(e,t){var n=this.findByMap.get(e);return n||(n=this.items.find(t)||null,this.findByMap.set(e,n)),n||null}},{key:"overlappings",get:function(){return this.items.filter((function(e){return 1==e.overlapping}))}},{key:"aliases",get:function(){return this.items.map((function(e){return e.alias}))}},{key:"suffixes",get:function(){return this.items.map((function(e){return e.suffix?e.suffix:""}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i.ac(R))},e.\u0275prov=Object(i.Mb)({factory:function(){return new e(Object(i.ac)(R))},token:e,providedIn:"root"}),e}(),D=function(){var e=function(){function e(t,n,i){_classCallCheck(this,e),this._zone=t,this._platformId=n,this._document=i,this.source=new a.a(new p(!0)),this.registry=new Map,this._observable$=this.source.asObservable()}return _createClass(e,[{key:"isActive",value:function(e){var t=this.registry.get(e);return!!t&&t.matches}},{key:"observe",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e&&e.length){var i=this._observable$.pipe(Object(l.a)((function(t){return!n||e.indexOf(t.mediaQuery)>-1}))),o=new s.a((function(n){var i=t.registerQuery(e);if(i.length){var o=i.pop();i.forEach((function(e){n.next(e)})),t.source.next(o)}n.complete()}));return Object(c.a)(o,i)}return this._observable$}},{key:"registerQuery",value:function(e){var t=this,n=Array.isArray(e)?e:[e],i=[];return function(e,t){var n=e.filter((function(e){return!j[e]}));if(n.length>0){var i=n.join(", ");try{var o=t.createElement("style");o.setAttribute("type","text/css"),o.styleSheet||o.appendChild(t.createTextNode("\n/*\n  @angular/flex-layout - workaround for possible browser quirk with mediaQuery listeners\n  see http://bit.ly/2sd4HMP\n*/\n@media ".concat(i," {.fx-query-test{ }}\n"))),t.head.appendChild(o),n.forEach((function(e){return j[e]=o}))}catch(r){console.error(r)}}}(n,this._document),n.forEach((function(e){var n=t.registry.get(e);n||((n=t.buildMQL(e)).addListener((function(n){t._zone.run((function(){return t.source.next(new p(n.matches,e))}))})),t.registry.set(e,n)),n.matches&&i.push(new p(!0,e))})),i}},{key:"buildMQL",value:function(e){return function(e,t){return t&&window.matchMedia("all").addListener?window.matchMedia(e):{matches:"all"===e||""===e,media:e,addListener:function(){},removeListener:function(){}}}(e,Object(o.I)(this._platformId))}},{key:"activations",get:function(){var e=[];return this.registry.forEach((function(t,n){t.matches&&e.push(n)})),e}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i.ac(i.A),i.ac(i.C),i.ac(o.e))},e.\u0275prov=Object(i.Mb)({factory:function(){return new e(Object(i.ac)(i.A),Object(i.ac)(i.C),Object(i.ac)(o.e))},token:e,providedIn:"root"}),e}(),j={},U={alias:"print",mediaQuery:"print",priority:1e3},W=function(){var e=function(){function e(t,n,i){_classCallCheck(this,e),this.breakpoints=t,this.layoutConfig=n,this._document=i,this.registeredBeforeAfterPrintHooks=!1,this.isPrintingBeforeAfterEvent=!1,this.isPrinting=!1,this.queue=new B,this.deactivations=[]}return _createClass(e,[{key:"withPrintQuery",value:function(e){return[].concat(_toConsumableArray(e),["print"])}},{key:"isPrintEvent",value:function(e){return e.mediaQuery.startsWith("print")}},{key:"getEventBreakpoints",value:function(e){var t=e.mediaQuery,n=this.breakpoints.findByQuery(t);return(n?[].concat(_toConsumableArray(this.printBreakPoints),[n]):this.printBreakPoints).sort(V)}},{key:"updateEvent",value:function(e){var t=this.breakpoints.findByQuery(e.mediaQuery);return this.isPrintEvent(e)&&(t=this.getEventBreakpoints(e)[0],e.mediaQuery=t?t.mediaQuery:""),C(e,t)}},{key:"registerBeforeAfterPrintHooks",value:function(e){var t=this;this._document.defaultView&&!this.registeredBeforeAfterPrintHooks&&(this.registeredBeforeAfterPrintHooks=!0,this._document.defaultView.addEventListener("beforeprint",(function(){t.isPrinting||(t.isPrintingBeforeAfterEvent=!0,t.startPrinting(e,t.getEventBreakpoints(new p(!0,"print"))),e.updateStyles())})),this._document.defaultView.addEventListener("afterprint",(function(){t.isPrintingBeforeAfterEvent=!1,t.isPrinting&&(t.stopPrinting(e),e.updateStyles())})))}},{key:"interceptEvents",value:function(e){var t=this;return this.registerBeforeAfterPrintHooks(e),function(n){t.isPrintEvent(n)?n.matches&&!t.isPrinting?(t.startPrinting(e,t.getEventBreakpoints(n)),e.updateStyles()):n.matches||!t.isPrinting||t.isPrintingBeforeAfterEvent||(t.stopPrinting(e),e.updateStyles()):t.collectActivations(n)}}},{key:"blockPropagation",value:function(){var e=this;return function(t){return!(e.isPrinting||e.isPrintEvent(t))}}},{key:"startPrinting",value:function(e,t){this.isPrinting=!0,e.activatedBreakpoints=this.queue.addPrintBreakpoints(t)}},{key:"stopPrinting",value:function(e){e.activatedBreakpoints=this.deactivations,this.deactivations=[],this.queue.clear(),this.isPrinting=!1}},{key:"collectActivations",value:function(e){if(!this.isPrinting||this.isPrintingBeforeAfterEvent)if(e.matches)this.isPrintingBeforeAfterEvent||(this.deactivations=[]);else{var t=this.breakpoints.findByQuery(e.mediaQuery);t&&(this.deactivations.push(t),this.deactivations.sort(V))}}},{key:"printAlias",get:function(){return this.layoutConfig.printWithBreakpoints||[]}},{key:"printBreakPoints",get:function(){var e=this;return this.printAlias.map((function(t){return e.breakpoints.findByAlias(t)})).filter((function(e){return null!==e}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i.ac(N),i.ac(v),i.ac(o.e))},e.\u0275prov=Object(i.Mb)({factory:function(){return new e(Object(i.ac)(N),Object(i.ac)(v),Object(i.ac)(o.e))},token:e,providedIn:"root"}),e}(),B=function(){function e(){_classCallCheck(this,e),this.printBreakpoints=[]}return _createClass(e,[{key:"addPrintBreakpoints",value:function(e){var t=this;return e.push(U),e.sort(V),e.forEach((function(e){return t.addBreakpoint(e)})),this.printBreakpoints}},{key:"addBreakpoint",value:function(e){e&&void 0===this.printBreakpoints.find((function(t){return t.mediaQuery===e.mediaQuery}))&&(this.printBreakpoints=function(e){return!!e&&e.mediaQuery.startsWith("print")}(e)?[e].concat(_toConsumableArray(this.printBreakpoints)):[].concat(_toConsumableArray(this.printBreakpoints),[e]))}},{key:"clear",value:function(){this.printBreakpoints=[]}}]),e}();function F(e){for(var t in e){var n=e[t]||"";switch(t){case"display":e.display="flex"===n?["-webkit-flex","flex"]:"inline-flex"===n?["-webkit-inline-flex","inline-flex"]:n;break;case"align-items":case"align-self":case"align-content":case"flex":case"flex-basis":case"flex-flow":case"flex-grow":case"flex-shrink":case"flex-wrap":case"justify-content":e["-webkit-"+t]=n;break;case"flex-direction":n=n||"row",e["-webkit-flex-direction"]=n,e["flex-direction"]=n;break;case"order":e.order=e["-webkit-"+t]=isNaN(+n)?"0":n}}return e}var z=function(){var e=function(){function e(t,n,i,o){_classCallCheck(this,e),this._serverStylesheet=t,this._serverModuleLoaded=n,this._platformId=i,this.layoutConfig=o}return _createClass(e,[{key:"applyStyleToElement",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i={};"string"==typeof t&&(i[t]=n,t=i),i=this.layoutConfig.disableVendorPrefixes?t:F(t),this._applyMultiValueStyleToElement(i,e)}},{key:"applyStyleToElements",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=this.layoutConfig.disableVendorPrefixes?e:F(e);n.forEach((function(e){t._applyMultiValueStyleToElement(i,e)}))}},{key:"getFlowDirection",value:function(e){var t=this.lookupStyle(e,"flex-direction");return[t||"row",this.lookupInlineStyle(e,"flex-direction")||Object(o.J)(this._platformId)&&this._serverModuleLoaded?t:""]}},{key:"lookupAttributeValue",value:function(e,t){return e.getAttribute(t)||""}},{key:"lookupInlineStyle",value:function(e,t){return Object(o.I)(this._platformId)?e.style.getPropertyValue(t):this._getServerStyle(e,t)}},{key:"lookupStyle",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i="";return e&&((i=this.lookupInlineStyle(e,t))||(Object(o.I)(this._platformId)?n||(i=getComputedStyle(e).getPropertyValue(t)):this._serverModuleLoaded&&(i=this._serverStylesheet.getStyleForElement(e,t)))),i?i.trim():""}},{key:"_applyMultiValueStyleToElement",value:function(e,t){var n=this;Object.keys(e).sort().forEach((function(i){var r=e[i],a=Array.isArray(r)?r:[r];a.sort();var s,c=_createForOfIteratorHelper(a);try{for(c.s();!(s=c.n()).done;){var l=s.value;l=l?l+"":"",Object(o.I)(n._platformId)||!n._serverModuleLoaded?Object(o.I)(n._platformId)?t.style.setProperty(i,l):n._setServerStyle(t,i,l):n._serverStylesheet.addStyleToElement(t,i,l)}}catch(u){c.e(u)}finally{c.f()}}))}},{key:"_setServerStyle",value:function(e,t,n){t=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();var i=this._readStyleAttribute(e);i[t]=n||"",this._writeStyleAttribute(e,i)}},{key:"_getServerStyle",value:function(e,t){return this._readStyleAttribute(e)[t]||""}},{key:"_readStyleAttribute",value:function(e){var t={},n=e.getAttribute("style");if(n)for(var i=n.split(/;+/g),o=0;o<i.length;o++){var r=i[o].trim();if(r.length>0){var a=r.indexOf(":");if(-1===a)throw new Error("Invalid CSS style: "+r);t[r.substr(0,a).trim()]=r.substr(a+1).trim()}}return t}},{key:"_writeStyleAttribute",value:function(e,t){var n="";for(var i in t)t[i]&&(n+=i+":"+t[i]+";");e.setAttribute("style",n)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i.ac(f),i.ac(b),i.ac(i.C),i.ac(v))},e.\u0275prov=Object(i.Mb)({factory:function(){return new e(Object(i.ac)(f),Object(i.ac)(b),Object(i.ac)(i.C),Object(i.ac)(v))},token:e,providedIn:"root"}),e}(),G=function(){function e(){_classCallCheck(this,e),this.shouldCache=!0}return _createClass(e,[{key:"sideEffect",value:function(e,t,n){}}]),e}();function Q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"1",i=[t,n,e],o=e.indexOf("calc");if(o>0){i[2]=K(e.substring(o).trim());var r=e.substr(0,o).trim().split(" ");2==r.length&&(i[0]=r[0],i[1]=r[1])}else if(0==o)i[2]=K(e.trim());else{var a=e.split(" ");i=3===a.length?a:[t,n,e]}return i}function K(e){return e.replace(/[\s]/g,"").replace(/[\/\*\+\-]/g," $& ")}var H=function(){var e=function(){function e(t,n,i){_classCallCheck(this,e),this.matchMedia=t,this.breakpoints=n,this.hook=i,this.activatedBreakpoints=[],this.elementMap=new Map,this.elementKeyMap=new WeakMap,this.watcherMap=new WeakMap,this.updateMap=new WeakMap,this.clearMap=new WeakMap,this.subject=new r.a,this.observeActivations()}return _createClass(e,[{key:"onMediaChange",value:function(e){var t=this.findByQuery(e.mediaQuery);t&&((e=C(e,t)).matches&&-1===this.activatedBreakpoints.indexOf(t)?(this.activatedBreakpoints.push(t),this.activatedBreakpoints.sort(V),this.updateStyles()):e.matches||-1===this.activatedBreakpoints.indexOf(t)||(this.activatedBreakpoints.splice(this.activatedBreakpoints.indexOf(t),1),this.activatedBreakpoints.sort(V),this.updateStyles()))}},{key:"init",value:function(e,t,n,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];q(this.updateMap,e,t,n),q(this.clearMap,e,t,i),this.buildElementKeyMap(e,t),this.watchExtraTriggers(e,t,o)}},{key:"getValue",value:function(e,t,n){var i=this.elementMap.get(e);if(i){var o=void 0!==n?i.get(n):this.getActivatedValues(i,t);if(o)return o.get(t)}}},{key:"hasValue",value:function(e,t){var n=this.elementMap.get(e);if(n){var i=this.getActivatedValues(n,t);if(i)return void 0!==i.get(t)||!1}return!1}},{key:"setValue",value:function(e,t,n,i){var o=this.elementMap.get(e);if(o){var r=(o.get(i)||new Map).set(t,n);o.set(i,r),this.elementMap.set(e,o)}else o=(new Map).set(i,(new Map).set(t,n)),this.elementMap.set(e,o);var a=this.getValue(e,t);void 0!==a&&this.updateElement(e,t,a)}},{key:"trackValue",value:function(e,t){return this.subject.asObservable().pipe(Object(l.a)((function(n){return n.element===e&&n.key===t})))}},{key:"updateStyles",value:function(){var e=this;this.elementMap.forEach((function(t,n){var i=new Set(e.elementKeyMap.get(n)),o=e.getActivatedValues(t);o&&o.forEach((function(t,o){e.updateElement(n,o,t),i.delete(o)})),i.forEach((function(i){if(o=e.getActivatedValues(t,i)){var r=o.get(i);e.updateElement(n,i,r)}else e.clearElement(n,i)}))}))}},{key:"clearElement",value:function(e,t){var n=this.clearMap.get(e);if(n){var i=n.get(t);i&&(i(),this.subject.next({element:e,key:t,value:""}))}}},{key:"updateElement",value:function(e,t,n){var i=this.updateMap.get(e);if(i){var o=i.get(t);o&&(o(n),this.subject.next({element:e,key:t,value:n}))}}},{key:"releaseElement",value:function(e){var t=this.watcherMap.get(e);t&&(t.forEach((function(e){return e.unsubscribe()})),this.watcherMap.delete(e));var n=this.elementMap.get(e);n&&(n.forEach((function(e,t){return n.delete(t)})),this.elementMap.delete(e))}},{key:"triggerUpdate",value:function(e,t){var n=this,i=this.elementMap.get(e);if(i){var o=this.getActivatedValues(i,t);o&&(t?this.updateElement(e,t,o.get(t)):o.forEach((function(t,i){return n.updateElement(e,i,t)})))}}},{key:"buildElementKeyMap",value:function(e,t){var n=this.elementKeyMap.get(e);n||(n=new Set,this.elementKeyMap.set(e,n)),n.add(t)}},{key:"watchExtraTriggers",value:function(e,t,n){var i=this;if(n&&n.length){var o=this.watcherMap.get(e);if(o||(o=new Map,this.watcherMap.set(e,o)),!o.get(t)){var r=Object(c.a).apply(void 0,_toConsumableArray(n)).subscribe((function(){var n=i.getValue(e,t);i.updateElement(e,t,n)}));o.set(t,r)}}}},{key:"findByQuery",value:function(e){return this.breakpoints.findByQuery(e)}},{key:"getActivatedValues",value:function(e,t){for(var n=0;n<this.activatedBreakpoints.length;n++){var i=e.get(this.activatedBreakpoints[n].alias);if(i&&(void 0===t||i.has(t)))return i}var o=e.get("");return void 0===t||o&&o.has(t)?o:void 0}},{key:"observeActivations",value:function(){var e=this.breakpoints.items.map((function(e){return e.mediaQuery}));this.matchMedia.observe(this.hook.withPrintQuery(e)).pipe(Object(u.a)(this.hook.interceptEvents(this)),Object(l.a)(this.hook.blockPropagation())).subscribe(this.onMediaChange.bind(this))}},{key:"activatedAlias",get:function(){return this.activatedBreakpoints[0]?this.activatedBreakpoints[0].alias:""}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i.ac(D),i.ac(N),i.ac(W))},e.\u0275prov=Object(i.Mb)({factory:function(){return new e(Object(i.ac)(D),Object(i.ac)(N),Object(i.ac)(W))},token:e,providedIn:"root"}),e}();function q(e,t,n,i){if(void 0!==i){var o=e.get(t);o||(o=new Map,e.set(t,o)),o.set(n,i)}}},pLL0:function(e,t){t.pack=function(e){throw new TypeError("Not yet implemented")},t.unpack=function(e){throw new TypeError("Not yet implemented")}},rUL0:function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0;var r=function(e){function t(t,n,i,o,r){var a=e.call(this,!1,t,n)||this;return a.id=i,o!==i&&(a.name=o),a.reason=r,a}return o(t,e),t.prototype.callDefaultBehavior=function(){},t}(n("hzOQ").Event);t.RecordingEvent=r},ryRr:function(e,t,n){"use strict";t.__esModule=!0;var i=n("DPKQ"),o=n("9m68").OpenViduLogger.getInstance(),r=function(){function e(e,t){this.session=e,this.disposed=!1;var n="'Connection' created ";t?(n+="(remote) with 'connectionId' ["+t.id+"]",this.options=t,this.connectionId=t.id,this.creationTime=t.createdAt,t.metadata&&(this.data=t.metadata),t.streams&&this.initRemoteStreams(t.streams)):n+="(local)",o.info(n)}return e.prototype.sendIceCandidate=function(e){o.debug((this.stream.outboundStreamOpts?"Local":"Remote")+"candidate for"+this.connectionId,e),this.session.openvidu.sendRequest("onIceCandidate",{endpointName:this.connectionId,candidate:e.candidate,sdpMid:e.sdpMid,sdpMLineIndex:e.sdpMLineIndex},(function(e,t){e&&o.error("Error sending ICE candidate: "+JSON.stringify(e))}))},e.prototype.initRemoteStreams=function(e){var t=this;e.forEach((function(e){var n={id:e.id,createdAt:e.createdAt,connection:t,hasAudio:e.hasAudio,hasVideo:e.hasVideo,audioActive:e.audioActive,videoActive:e.videoActive,typeOfVideo:e.typeOfVideo,frameRate:e.frameRate,videoDimensions:e.videoDimensions?JSON.parse(e.videoDimensions):void 0,filter:e.filter?e.filter:void 0},o=new i.Stream(t.session,n);t.addStream(o)})),o.info("Remote 'Connection' with 'connectionId' ["+this.connectionId+"] is now configured for receiving Streams with options: ",this.stream.inboundStreamOpts)},e.prototype.addStream=function(e){e.connection=this,this.stream=e},e.prototype.removeStream=function(e){delete this.stream},e.prototype.dispose=function(){this.stream&&delete this.stream,this.disposed=!0},e}();t.Connection=r},suHS:function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0;var r=function(e){function t(t,n,i,o){var r=e.call(this,!1,t,"signal")||this;return n&&(r.type="signal:"+n),r.data=i,r.from=o,r}return o(t,e),t.prototype.callDefaultBehavior=function(){},t}(n("hzOQ").Event);t.SignalEvent=r},"t/6/":function(e,t,n){"use strict";t.__esModule=!0,t.start=t.run=t.TOKENS=t.State=void 0;var i=n("FlKs"),o=n("dlaP"),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(o),a="aaa|aarp|abarth|abb|abbott|abbvie|abc|able|abogado|abudhabi|ac|academy|accenture|accountant|accountants|aco|active|actor|ad|adac|ads|adult|ae|aeg|aero|aetna|af|afamilycompany|afl|africa|ag|agakhan|agency|ai|aig|aigo|airbus|airforce|airtel|akdn|al|alfaromeo|alibaba|alipay|allfinanz|allstate|ally|alsace|alstom|am|americanexpress|americanfamily|amex|amfam|amica|amsterdam|analytics|android|anquan|anz|ao|aol|apartments|app|apple|aq|aquarelle|ar|arab|aramco|archi|army|arpa|art|arte|as|asda|asia|associates|at|athleta|attorney|au|auction|audi|audible|audio|auspost|author|auto|autos|avianca|aw|aws|ax|axa|az|azure|ba|baby|baidu|banamex|bananarepublic|band|bank|bar|barcelona|barclaycard|barclays|barefoot|bargains|baseball|basketball|bauhaus|bayern|bb|bbc|bbt|bbva|bcg|bcn|bd|be|beats|beauty|beer|bentley|berlin|best|bestbuy|bet|bf|bg|bh|bharti|bi|bible|bid|bike|bing|bingo|bio|biz|bj|black|blackfriday|blanco|blockbuster|blog|bloomberg|blue|bm|bms|bmw|bn|bnl|bnpparibas|bo|boats|boehringer|bofa|bom|bond|boo|book|booking|boots|bosch|bostik|boston|bot|boutique|box|br|bradesco|bridgestone|broadway|broker|brother|brussels|bs|bt|budapest|bugatti|build|builders|business|buy|buzz|bv|bw|by|bz|bzh|ca|cab|cafe|cal|call|calvinklein|cam|camera|camp|cancerresearch|canon|capetown|capital|capitalone|car|caravan|cards|care|career|careers|cars|cartier|casa|case|caseih|cash|casino|cat|catering|catholic|cba|cbn|cbre|cbs|cc|cd|ceb|center|ceo|cern|cf|cfa|cfd|cg|ch|chanel|channel|chase|chat|cheap|chintai|chloe|christmas|chrome|chrysler|church|ci|cipriani|circle|cisco|citadel|citi|citic|city|cityeats|ck|cl|claims|cleaning|click|clinic|clinique|clothing|cloud|club|clubmed|cm|cn|co|coach|codes|coffee|college|cologne|com|comcast|commbank|community|company|compare|computer|comsec|condos|construction|consulting|contact|contractors|cooking|cookingchannel|cool|coop|corsica|country|coupon|coupons|courses|cr|credit|creditcard|creditunion|cricket|crown|crs|cruise|cruises|csc|cu|cuisinella|cv|cw|cx|cy|cymru|cyou|cz|dabur|dad|dance|data|date|dating|datsun|day|dclk|dds|de|deal|dealer|deals|degree|delivery|dell|deloitte|delta|democrat|dental|dentist|desi|design|dev|dhl|diamonds|diet|digital|direct|directory|discount|discover|dish|diy|dj|dk|dm|dnp|do|docs|doctor|dodge|dog|doha|domains|dot|download|drive|dtv|dubai|duck|dunlop|duns|dupont|durban|dvag|dvr|dz|earth|eat|ec|eco|edeka|edu|education|ee|eg|email|emerck|energy|engineer|engineering|enterprises|epost|epson|equipment|er|ericsson|erni|es|esq|estate|esurance|et|etisalat|eu|eurovision|eus|events|everbank|exchange|expert|exposed|express|extraspace|fage|fail|fairwinds|faith|family|fan|fans|farm|farmers|fashion|fast|fedex|feedback|ferrari|ferrero|fi|fiat|fidelity|fido|film|final|finance|financial|fire|firestone|firmdale|fish|fishing|fit|fitness|fj|fk|flickr|flights|flir|florist|flowers|fly|fm|fo|foo|food|foodnetwork|football|ford|forex|forsale|forum|foundation|fox|fr|free|fresenius|frl|frogans|frontdoor|frontier|ftr|fujitsu|fujixerox|fun|fund|furniture|futbol|fyi|ga|gal|gallery|gallo|gallup|game|games|gap|garden|gb|gbiz|gd|gdn|ge|gea|gent|genting|george|gf|gg|ggee|gh|gi|gift|gifts|gives|giving|gl|glade|glass|gle|global|globo|gm|gmail|gmbh|gmo|gmx|gn|godaddy|gold|goldpoint|golf|goo|goodhands|goodyear|goog|google|gop|got|gov|gp|gq|gr|grainger|graphics|gratis|green|gripe|grocery|group|gs|gt|gu|guardian|gucci|guge|guide|guitars|guru|gw|gy|hair|hamburg|hangout|haus|hbo|hdfc|hdfcbank|health|healthcare|help|helsinki|here|hermes|hgtv|hiphop|hisamitsu|hitachi|hiv|hk|hkt|hm|hn|hockey|holdings|holiday|homedepot|homegoods|homes|homesense|honda|honeywell|horse|hospital|host|hosting|hot|hoteles|hotels|hotmail|house|how|hr|hsbc|ht|htc|hu|hughes|hyatt|hyundai|ibm|icbc|ice|icu|id|ie|ieee|ifm|ikano|il|im|imamat|imdb|immo|immobilien|in|industries|infiniti|info|ing|ink|institute|insurance|insure|int|intel|international|intuit|investments|io|ipiranga|iq|ir|irish|is|iselect|ismaili|ist|istanbul|it|itau|itv|iveco|iwc|jaguar|java|jcb|jcp|je|jeep|jetzt|jewelry|jio|jlc|jll|jm|jmp|jnj|jo|jobs|joburg|jot|joy|jp|jpmorgan|jprs|juegos|juniper|kaufen|kddi|ke|kerryhotels|kerrylogistics|kerryproperties|kfh|kg|kh|ki|kia|kim|kinder|kindle|kitchen|kiwi|km|kn|koeln|komatsu|kosher|kp|kpmg|kpn|kr|krd|kred|kuokgroup|kw|ky|kyoto|kz|la|lacaixa|ladbrokes|lamborghini|lamer|lancaster|lancia|lancome|land|landrover|lanxess|lasalle|lat|latino|latrobe|law|lawyer|lb|lc|lds|lease|leclerc|lefrak|legal|lego|lexus|lgbt|li|liaison|lidl|life|lifeinsurance|lifestyle|lighting|like|lilly|limited|limo|lincoln|linde|link|lipsy|live|living|lixil|lk|loan|loans|locker|locus|loft|lol|london|lotte|lotto|love|lpl|lplfinancial|lr|ls|lt|ltd|ltda|lu|lundbeck|lupin|luxe|luxury|lv|ly|ma|macys|madrid|maif|maison|makeup|man|management|mango|map|market|marketing|markets|marriott|marshalls|maserati|mattel|mba|mc|mckinsey|md|me|med|media|meet|melbourne|meme|memorial|men|menu|meo|merckmsd|metlife|mg|mh|miami|microsoft|mil|mini|mint|mit|mitsubishi|mk|ml|mlb|mls|mm|mma|mn|mo|mobi|mobile|mobily|moda|moe|moi|mom|monash|money|monster|mopar|mormon|mortgage|moscow|moto|motorcycles|mov|movie|movistar|mp|mq|mr|ms|msd|mt|mtn|mtr|mu|museum|mutual|mv|mw|mx|my|mz|na|nab|nadex|nagoya|name|nationwide|natura|navy|nba|nc|ne|nec|net|netbank|netflix|network|neustar|new|newholland|news|next|nextdirect|nexus|nf|nfl|ng|ngo|nhk|ni|nico|nike|nikon|ninja|nissan|nissay|nl|no|nokia|northwesternmutual|norton|now|nowruz|nowtv|np|nr|nra|nrw|ntt|nu|nyc|nz|obi|observer|off|office|okinawa|olayan|olayangroup|oldnavy|ollo|om|omega|one|ong|onl|online|onyourside|ooo|open|oracle|orange|org|organic|origins|osaka|otsuka|ott|ovh|pa|page|panasonic|panerai|paris|pars|partners|parts|party|passagens|pay|pccw|pe|pet|pf|pfizer|pg|ph|pharmacy|phd|philips|phone|photo|photography|photos|physio|piaget|pics|pictet|pictures|pid|pin|ping|pink|pioneer|pizza|pk|pl|place|play|playstation|plumbing|plus|pm|pn|pnc|pohl|poker|politie|porn|post|pr|pramerica|praxi|press|prime|pro|prod|productions|prof|progressive|promo|properties|property|protection|pru|prudential|ps|pt|pub|pw|pwc|py|qa|qpon|quebec|quest|qvc|racing|radio|raid|re|read|realestate|realtor|realty|recipes|red|redstone|redumbrella|rehab|reise|reisen|reit|reliance|ren|rent|rentals|repair|report|republican|rest|restaurant|review|reviews|rexroth|rich|richardli|ricoh|rightathome|ril|rio|rip|rmit|ro|rocher|rocks|rodeo|rogers|room|rs|rsvp|ru|rugby|ruhr|run|rw|rwe|ryukyu|sa|saarland|safe|safety|sakura|sale|salon|samsclub|samsung|sandvik|sandvikcoromant|sanofi|sap|sapo|sarl|sas|save|saxo|sb|sbi|sbs|sc|sca|scb|schaeffler|schmidt|scholarships|school|schule|schwarz|science|scjohnson|scor|scot|sd|se|search|seat|secure|security|seek|select|sener|services|ses|seven|sew|sex|sexy|sfr|sg|sh|shangrila|sharp|shaw|shell|shia|shiksha|shoes|shop|shopping|shouji|show|showtime|shriram|si|silk|sina|singles|site|sj|sk|ski|skin|sky|skype|sl|sling|sm|smart|smile|sn|sncf|so|soccer|social|softbank|software|sohu|solar|solutions|song|sony|soy|space|spiegel|spot|spreadbetting|sr|srl|srt|st|stada|staples|star|starhub|statebank|statefarm|statoil|stc|stcgroup|stockholm|storage|store|stream|studio|study|style|su|sucks|supplies|supply|support|surf|surgery|suzuki|sv|swatch|swiftcover|swiss|sx|sy|sydney|symantec|systems|sz|tab|taipei|talk|taobao|target|tatamotors|tatar|tattoo|tax|taxi|tc|tci|td|tdk|team|tech|technology|tel|telecity|telefonica|temasek|tennis|teva|tf|tg|th|thd|theater|theatre|tiaa|tickets|tienda|tiffany|tips|tires|tirol|tj|tjmaxx|tjx|tk|tkmaxx|tl|tm|tmall|tn|to|today|tokyo|tools|top|toray|toshiba|total|tours|town|toyota|toys|tr|trade|trading|training|travel|travelchannel|travelers|travelersinsurance|trust|trv|tt|tube|tui|tunes|tushu|tv|tvs|tw|tz|ua|ubank|ubs|uconnect|ug|uk|unicom|university|uno|uol|ups|us|uy|uz|va|vacations|vana|vanguard|vc|ve|vegas|ventures|verisign|versicherung|vet|vg|vi|viajes|video|vig|viking|villas|vin|vip|virgin|visa|vision|vista|vistaprint|viva|vivo|vlaanderen|vn|vodka|volkswagen|volvo|vote|voting|voto|voyage|vu|vuelos|wales|walmart|walter|wang|wanggou|warman|watch|watches|weather|weatherchannel|webcam|weber|website|wed|wedding|weibo|weir|wf|whoswho|wien|wiki|williamhill|win|windows|wine|winners|wme|wolterskluwer|woodside|work|works|world|wow|ws|wtc|wtf|xbox|xerox|xfinity|xihuan|xin|xn--11b4c3d|xn--1ck2e1b|xn--1qqw23a|xn--2scrj9c|xn--30rr7y|xn--3bst00m|xn--3ds443g|xn--3e0b707e|xn--3hcrj9c|xn--3oq18vl8pn36a|xn--3pxu8k|xn--42c2d9a|xn--45br5cyl|xn--45brj9c|xn--45q11c|xn--4gbrim|xn--54b7fta0cc|xn--55qw42g|xn--55qx5d|xn--5su34j936bgsg|xn--5tzm5g|xn--6frz82g|xn--6qq986b3xl|xn--80adxhks|xn--80ao21a|xn--80aqecdr1a|xn--80asehdb|xn--80aswg|xn--8y0a063a|xn--90a3ac|xn--90ae|xn--90ais|xn--9dbq2a|xn--9et52u|xn--9krt00a|xn--b4w605ferd|xn--bck1b9a5dre4c|xn--c1avg|xn--c2br7g|xn--cck2b3b|xn--cg4bki|xn--clchc0ea0b2g2a9gcd|xn--czr694b|xn--czrs0t|xn--czru2d|xn--d1acj3b|xn--d1alf|xn--e1a4c|xn--eckvdtc9d|xn--efvy88h|xn--estv75g|xn--fct429k|xn--fhbei|xn--fiq228c5hs|xn--fiq64b|xn--fiqs8s|xn--fiqz9s|xn--fjq720a|xn--flw351e|xn--fpcrj9c3d|xn--fzc2c9e2c|xn--fzys8d69uvgm|xn--g2xx48c|xn--gckr3f0f|xn--gecrj9c|xn--gk3at1e|xn--h2breg3eve|xn--h2brj9c|xn--h2brj9c8c|xn--hxt814e|xn--i1b6b1a6a2e|xn--imr513n|xn--io0a7i|xn--j1aef|xn--j1amh|xn--j6w193g|xn--jlq61u9w7b|xn--jvr189m|xn--kcrx77d1x4a|xn--kprw13d|xn--kpry57d|xn--kpu716f|xn--kput3i|xn--l1acc|xn--lgbbat1ad8j|xn--mgb9awbf|xn--mgba3a3ejt|xn--mgba3a4f16a|xn--mgba7c0bbn0a|xn--mgbaakc7dvf|xn--mgbaam7a8h|xn--mgbab2bd|xn--mgbai9azgqp6j|xn--mgbayh7gpa|xn--mgbb9fbpob|xn--mgbbh1a|xn--mgbbh1a71e|xn--mgbc0a9azcg|xn--mgbca7dzdo|xn--mgberp4a5d4ar|xn--mgbgu82a|xn--mgbi4ecexp|xn--mgbpl2fh|xn--mgbt3dhd|xn--mgbtx2b|xn--mgbx4cd0ab|xn--mix891f|xn--mk1bu44c|xn--mxtq1m|xn--ngbc5azd|xn--ngbe9e0a|xn--ngbrx|xn--node|xn--nqv7f|xn--nqv7fs00ema|xn--nyqy26a|xn--o3cw4h|xn--ogbpf8fl|xn--p1acf|xn--p1ai|xn--pbt977c|xn--pgbs0dh|xn--pssy2u|xn--q9jyb4c|xn--qcka1pmc|xn--qxam|xn--rhqv96g|xn--rovu88b|xn--rvc1e0am3e|xn--s9brj9c|xn--ses554g|xn--t60b56a|xn--tckwe|xn--tiq49xqyj|xn--unup4y|xn--vermgensberater-ctb|xn--vermgensberatung-pwb|xn--vhquv|xn--vuq861b|xn--w4r85el8fhu5dnra|xn--w4rs40l|xn--wgbh1c|xn--wgbl6a|xn--xhq521b|xn--xkc2al3hye2a|xn--xkc2dl3a5ee0h|xn--y9a3aq|xn--yfro4i67o|xn--ygbi2ammx|xn--zfr164b|xperia|xxx|xyz|yachts|yahoo|yamaxun|yandex|ye|yodobashi|yoga|yokohama|you|youtube|yt|yun|za|zappos|zara|zero|zip|zippo|zm|zone|zuerich|zw".split("|"),s="0123456789".split(""),c="0123456789abcdefghijklmnopqrstuvwxyz".split(""),l=[" ","\f","\r","\t","\v","\xa0","\u1680","\u180e"],u=[],d=function(e){return new i.CharacterState(e)},g=d(),h=d(o.NUM),p=d(o.DOMAIN),f=d(),m=d(o.WS);g.on("@",d(o.AT)).on(".",d(o.DOT)).on("+",d(o.PLUS)).on("#",d(o.POUND)).on("?",d(o.QUERY)).on("/",d(o.SLASH)).on("_",d(o.UNDERSCORE)).on(":",d(o.COLON)).on("{",d(o.OPENBRACE)).on("[",d(o.OPENBRACKET)).on("<",d(o.OPENANGLEBRACKET)).on("(",d(o.OPENPAREN)).on("}",d(o.CLOSEBRACE)).on("]",d(o.CLOSEBRACKET)).on(">",d(o.CLOSEANGLEBRACKET)).on(")",d(o.CLOSEPAREN)).on("&",d(o.AMPERSAND)).on([",",";","!",'"',"'"],d(o.PUNCTUATION)),g.on("\n",d(o.NL)).on(l,m),m.on(l,m);for(var v=0;v<a.length;v++){var b=(0,i.stateify)(a[v],g,o.TLD,o.DOMAIN);u.push.apply(u,b)}var y=(0,i.stateify)("file",g,o.DOMAIN,o.DOMAIN),C=(0,i.stateify)("ftp",g,o.DOMAIN,o.DOMAIN),O=(0,i.stateify)("http",g,o.DOMAIN,o.DOMAIN),S=(0,i.stateify)("mailto",g,o.DOMAIN,o.DOMAIN);u.push.apply(u,y),u.push.apply(u,C),u.push.apply(u,O),u.push.apply(u,S);var M=y.pop(),_=C.pop(),x=O.pop(),k=S.pop(),P=d(o.DOMAIN),w=d(o.PROTOCOL),E=d(o.MAILTO);_.on("s",P).on(":",w),x.on("s",P).on(":",w),u.push(P),M.on(":",w),P.on(":",w),k.on(":",E);var I=(0,i.stateify)("localhost",g,o.LOCALHOST,o.DOMAIN);u.push.apply(u,I),g.on(s,h),h.on("-",f).on(s,h).on(c,p),p.on("-",f).on(c,p);for(var T=0;T<u.length;T++)u[T].on("-",f).on(c,p);f.on("-",f).on(s,p).on(c,p),g.defaultTransition=d(o.SYM);var A=g;t.State=i.CharacterState,t.TOKENS=r,t.run=function(e){for(var t=e.replace(/[A-Z]/g,(function(e){return e.toLowerCase()})),n=e.length,i=[],o=0;o<n;){for(var r=g,a=null,s=0,c=null,l=-1;o<n&&(a=r.next(t[o]));)(r=a).accepts()?(l=0,c=r):l>=0&&l++,s++,o++;if(!(l<0)){o-=l,s-=l;var u=c.emit();i.push(new u(e.substr(o-s,s)))}}return i},t.start=A},tInm:function(e,t,n){"use strict";t.__esModule=!0;var i=n("Yn0Z"),o=n("bDgZ"),r=n("9m68").OpenViduLogger.getInstance(),a=function(){function e(e){this.stream=e,this.chunks=[],this.connectionId=this.stream.connection?this.stream.connection.connectionId:"default-connection",this.id=this.stream.streamId+"_"+this.connectionId+"_localrecord",this.state=i.LocalRecorderState.READY}return e.prototype.record=function(e){var t=this;return new Promise((function(n,o){try{if("undefined"==typeof MediaRecorder)throw r.error("MediaRecorder not supported on your browser. See compatibility in https://caniuse.com/#search=MediaRecorder"),Error("MediaRecorder not supported on your browser. See compatibility in https://caniuse.com/#search=MediaRecorder");if(t.state!==i.LocalRecorderState.READY)throw Error("'LocalRecord.record()' needs 'LocalRecord.state' to be 'READY' (current value: '"+t.state+"'). Call 'LocalRecorder.clean()' or init a new LocalRecorder before");r.log("Starting local recording of stream '"+t.stream.streamId+"' of connection '"+t.connectionId+"'");var a={};"function"==typeof MediaRecorder.isTypeSupported?e?(MediaRecorder.isTypeSupported(e)||o(new Error('mimeType "'+e+'" is not supported')),a={mimeType:e}):r.log("No mimeType parameter provided. Using default codecs"):r.warn("MediaRecorder#isTypeSupported is not supported. Using default codecs"),t.mediaRecorder=new MediaRecorder(t.stream.getMediaStream(),a),t.mediaRecorder.start(10)}catch(s){o(s)}t.mediaRecorder.ondataavailable=function(e){t.chunks.push(e.data)},t.mediaRecorder.onerror=function(e){r.error("MediaRecorder error: ",e)},t.mediaRecorder.onstart=function(){r.log("MediaRecorder started (state="+t.mediaRecorder.state+")")},t.mediaRecorder.onstop=function(){t.onStopDefault()},t.mediaRecorder.onpause=function(){r.log("MediaRecorder paused (state="+t.mediaRecorder.state+")")},t.mediaRecorder.onresume=function(){r.log("MediaRecorder resumed (state="+t.mediaRecorder.state+")")},t.mediaRecorder.onwarning=function(e){r.log("MediaRecorder warning: "+e)},t.state=i.LocalRecorderState.RECORDING,n()}))},e.prototype.stop=function(){var e=this;return new Promise((function(t,n){try{if(e.state===i.LocalRecorderState.READY||e.state===i.LocalRecorderState.FINISHED)throw Error("'LocalRecord.stop()' needs 'LocalRecord.state' to be 'RECORDING' or 'PAUSED' (current value: '"+e.state+"'). Call 'LocalRecorder.start()' before");e.mediaRecorder.onstop=function(){e.onStopDefault(),t()},e.mediaRecorder.stop()}catch(o){n(o)}}))},e.prototype.pause=function(){var e=this;return new Promise((function(t,n){try{e.state!==i.LocalRecorderState.RECORDING&&n(Error("'LocalRecord.pause()' needs 'LocalRecord.state' to be 'RECORDING' (current value: '"+e.state+"'). Call 'LocalRecorder.start()' or 'LocalRecorder.resume()' before")),e.mediaRecorder.pause(),e.state=i.LocalRecorderState.PAUSED}catch(o){n(o)}}))},e.prototype.resume=function(){var e=this;return new Promise((function(t,n){try{if(e.state!==i.LocalRecorderState.PAUSED)throw Error("'LocalRecord.resume()' needs 'LocalRecord.state' to be 'PAUSED' (current value: '"+e.state+"'). Call 'LocalRecorder.pause()' before");e.mediaRecorder.resume(),e.state=i.LocalRecorderState.RECORDING}catch(o){n(o)}}))},e.prototype.preview=function(e){if(this.state!==i.LocalRecorderState.FINISHED)throw Error("'LocalRecord.preview()' needs 'LocalRecord.state' to be 'FINISHED' (current value: '"+this.state+"'). Call 'LocalRecorder.stop()' before");if(this.videoPreview=document.createElement("video"),this.videoPreview.id=this.id,this.videoPreview.autoplay=!0,"Safari"===o.name&&this.videoPreview.setAttribute("playsinline","true"),"string"==typeof e){var t=document.getElementById(e);t&&(this.videoPreview=t.appendChild(this.videoPreview))}else this.videoPreview=e.appendChild(this.videoPreview);return this.videoPreview.src=this.videoPreviewSrc,this.videoPreview},e.prototype.clean=function(){var e=this,t=function(){delete e.blob,e.chunks=[],delete e.mediaRecorder,e.state=i.LocalRecorderState.READY};this.state===i.LocalRecorderState.RECORDING||this.state===i.LocalRecorderState.PAUSED?this.stop().then((function(){return t()})).catch((function(){return t()})):t()},e.prototype.download=function(){if(this.state!==i.LocalRecorderState.FINISHED)throw Error("'LocalRecord.download()' needs 'LocalRecord.state' to be 'FINISHED' (current value: '"+this.state+"'). Call 'LocalRecorder.stop()' before");var e=document.createElement("a");e.style.display="none",document.body.appendChild(e);var t=window.URL.createObjectURL(this.blob);e.href=t,e.download=this.id+".webm",e.click(),window.URL.revokeObjectURL(t),document.body.removeChild(e)},e.prototype.getBlob=function(){if(this.state!==i.LocalRecorderState.FINISHED)throw Error("Call 'LocalRecord.stop()' before getting Blob file");return this.blob},e.prototype.uploadAsBinary=function(e,t){var n=this;return new Promise((function(o,r){if(n.state!==i.LocalRecorderState.FINISHED)r(Error("'LocalRecord.uploadAsBinary()' needs 'LocalRecord.state' to be 'FINISHED' (current value: '"+n.state+"'). Call 'LocalRecorder.stop()' before"));else{var a=new XMLHttpRequest;if(a.open("POST",e,!0),"object"==typeof t)for(var s=0,c=Object.keys(t);s<c.length;s++){var l=c[s];a.setRequestHeader(l,t[l])}a.onreadystatechange=function(){4===a.readyState&&("2"===a.status.toString().charAt(0)?o(a.responseText):r(a.status))},a.send(n.blob)}}))},e.prototype.uploadAsMultipartfile=function(e,t){var n=this;return new Promise((function(o,r){if(n.state!==i.LocalRecorderState.FINISHED)r(Error("'LocalRecord.uploadAsMultipartfile()' needs 'LocalRecord.state' to be 'FINISHED' (current value: '"+n.state+"'). Call 'LocalRecorder.stop()' before"));else{var a=new XMLHttpRequest;if(a.open("POST",e,!0),"object"==typeof t)for(var s=0,c=Object.keys(t);s<c.length;s++){var l=c[s];a.setRequestHeader(l,t[l])}var u=new FormData;u.append("file",n.blob,n.id+".webm"),a.onreadystatechange=function(){4===a.readyState&&("2"===a.status.toString().charAt(0)?o(a.responseText):r(a.status))},a.send(u)}}))},e.prototype.onStopDefault=function(){r.log("MediaRecorder stopped  (state="+this.mediaRecorder.state+")"),this.blob=new Blob(this.chunks,{type:"video/webm"}),this.chunks=[],this.videoPreviewSrc=window.URL.createObjectURL(this.blob),this.state=i.LocalRecorderState.FINISHED},e}();t.LocalRecorder=a},tMSY:function(e,t){function n(){}e.exports=n,n.mixin=function(e){var t=e.prototype||e;t.isWildEmitter=!0,t.on=function(e,t,n){this.callbacks=this.callbacks||{};var i=3===arguments.length,o=i?arguments[1]:void 0,r=i?arguments[2]:arguments[1];return r._groupName=o,(this.callbacks[e]=this.callbacks[e]||[]).push(r),this},t.once=function(e,t,n){var i=this,o=3===arguments.length,r=o?arguments[1]:void 0,a=o?arguments[2]:arguments[1];function s(){i.off(e,s),a.apply(this,arguments)}return this.on(e,r,s),this},t.releaseGroup=function(e){var t,n,i,o;for(t in this.callbacks=this.callbacks||{},this.callbacks)for(n=0,i=(o=this.callbacks[t]).length;n<i;n++)o[n]._groupName===e&&(o.splice(n,1),n--,i--);return this},t.off=function(e,t){this.callbacks=this.callbacks||{};var n,i=this.callbacks[e];return i?1===arguments.length?(delete this.callbacks[e],this):(-1!==(n=i.indexOf(t))&&(i.splice(n,1),0===i.length&&delete this.callbacks[e]),this):this},t.emit=function(e){this.callbacks=this.callbacks||{};var t,n,i,o=[].slice.call(arguments,1),r=this.callbacks[e],a=this.getWildcardCallbacks(e);if(r)for(t=0,n=(i=r.slice()).length;t<n&&i[t];++t)i[t].apply(this,o);if(a)for(n=a.length,t=0,n=(i=a.slice()).length;t<n&&i[t];++t)i[t].apply(this,[e].concat(o));return this},t.getWildcardCallbacks=function(e){this.callbacks=this.callbacks||{};var t,n,i=[];for(t in this.callbacks)n=t.split("*"),("*"===t||2===n.length&&e.slice(0,n[0].length)===n[0])&&(i=i.concat(this.callbacks[t]));return i}},n.mixin(n)},ttXH:function(e,t,n){var i,o=n("tMSY");"undefined"!=typeof window&&(i=window.AudioContext||window.webkitAudioContext);var r=null;e.exports=function(e,t){var n=new o;if(!i)return n;var a,s,c,l=(t=t||{}).smoothing||.1,u=t.interval||50,d=t.threshold,g=t.play,h=t.history||10,p=!0;r=t.audioContext||r||new i,(c=r.createAnalyser()).fftSize=512,c.smoothingTimeConstant=l,s=new Float32Array(c.frequencyBinCount),e.jquery&&(e=e[0]),e instanceof HTMLAudioElement||e instanceof HTMLVideoElement?(a=r.createMediaElementSource(e),void 0===g&&(g=!0),d=d||-50):(a=r.createMediaStreamSource(e),d=d||-50),a.connect(c),g&&c.connect(r.destination),n.speaking=!1,n.suspend=function(){return r.suspend()},n.resume=function(){return r.resume()},Object.defineProperty(n,"state",{get:function(){return r.state}}),r.onstatechange=function(){n.emit("state_change",r.state)},n.setThreshold=function(e){d=e},n.setInterval=function(e){u=e},n.stop=function(){p=!1,n.emit("volume_change",-100,d),n.speaking&&(n.speaking=!1,n.emit("stopped_speaking")),c.disconnect(),a.disconnect()},n.speakingHistory=[];for(var f=0;f<h;f++)n.speakingHistory.push(0);return function e(){setTimeout((function(){if(p){var t=function(e,t){var n=-1/0;e.getFloatFrequencyData(t);for(var i=4,o=t.length;i<o;i++)t[i]>n&&t[i]<0&&(n=t[i]);return n}(c,s);n.emit("volume_change",t,d);var i=0;if(t>d&&!n.speaking){for(var o=n.speakingHistory.length-3;o<n.speakingHistory.length;o++)i+=n.speakingHistory[o];i>=2&&(n.speaking=!0,n.emit("speaking"))}else if(t<d&&n.speaking){for(o=0;o<n.speakingHistory.length;o++)i+=n.speakingHistory[o];0==i&&(n.speaking=!1,n.emit("stopped_speaking"))}n.speakingHistory.shift(),n.speakingHistory.push(0+(t>d)),e()}}),u)}(),n}},"txJ/":function(e,t){var n=Object.create||function(e){var t=function(){};return t.prototype=e,new t},i=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return n},o=Function.prototype.bind||function(e){var t=this;return function(){return t.apply(e,arguments)}};function r(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=n(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0;var a,s=10;try{var c={};Object.defineProperty&&Object.defineProperty(c,"x",{value:0}),a=0===c.x}catch(O){a=!1}function l(e){return void 0===e._maxListeners?r.defaultMaxListeners:e._maxListeners}function u(e,t,n){if(t)e.call(n);else for(var i=e.length,o=C(e,i),r=0;r<i;++r)o[r].call(n)}function d(e,t,n,i){if(t)e.call(n,i);else for(var o=e.length,r=C(e,o),a=0;a<o;++a)r[a].call(n,i)}function g(e,t,n,i,o){if(t)e.call(n,i,o);else for(var r=e.length,a=C(e,r),s=0;s<r;++s)a[s].call(n,i,o)}function h(e,t,n,i,o,r){if(t)e.call(n,i,o,r);else for(var a=e.length,s=C(e,a),c=0;c<a;++c)s[c].call(n,i,o,r)}function p(e,t,n,i){if(t)e.apply(n,i);else for(var o=e.length,r=C(e,o),a=0;a<o;++a)r[a].apply(n,i)}function f(e,t,i,o){var r,a,s;if("function"!=typeof i)throw new TypeError('"listener" argument must be a function');if((a=e._events)?(a.newListener&&(e.emit("newListener",t,i.listener?i.listener:i),a=e._events),s=a[t]):(a=e._events=n(null),e._eventsCount=0),s){if("function"==typeof s?s=a[t]=o?[i,s]:[s,i]:o?s.unshift(i):s.push(i),!s.warned&&(r=l(e))&&r>0&&s.length>r){s.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+s.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=s.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",c.name,c.message)}}else s=a[t]=i,++e._eventsCount;return e}function m(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function v(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},r=o.call(m,i);return r.listener=n,i.wrapFn=r,r}function b(e,t,n){var i=e._events;if(!i)return[];var o=i[t];return o?"function"==typeof o?n?[o.listener||o]:[o]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(o):C(o,o.length):[]}function y(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function C(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}a?Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||e!=e)throw new TypeError('"defaultMaxListeners" must be a positive number');s=e}}):r.defaultMaxListeners=s,r.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},r.prototype.getMaxListeners=function(){return l(this)},r.prototype.emit=function(e){var t,n,i,o,r,a,s="error"===e;if(a=this._events)s=s&&null==a.error;else if(!s)return!1;if(s){if(arguments.length>1&&(t=arguments[1]),t instanceof Error)throw t;var c=new Error('Unhandled "error" event. ('+t+")");throw c.context=t,c}if(!(n=a[e]))return!1;var l="function"==typeof n;switch(i=arguments.length){case 1:u(n,l,this);break;case 2:d(n,l,this,arguments[1]);break;case 3:g(n,l,this,arguments[1],arguments[2]);break;case 4:h(n,l,this,arguments[1],arguments[2],arguments[3]);break;default:for(o=new Array(i-1),r=1;r<i;r++)o[r-1]=arguments[r];p(n,l,this,o)}return!0},r.prototype.on=r.prototype.addListener=function(e,t){return f(this,e,t,!1)},r.prototype.prependListener=function(e,t){return f(this,e,t,!0)},r.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,v(this,e,t)),this},r.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,v(this,e,t)),this},r.prototype.removeListener=function(e,t){var i,o,r,a,s;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(o=this._events))return this;if(!(i=o[e]))return this;if(i===t||i.listener===t)0==--this._eventsCount?this._events=n(null):(delete o[e],o.removeListener&&this.emit("removeListener",e,i.listener||t));else if("function"!=typeof i){for(r=-1,a=i.length-1;a>=0;a--)if(i[a]===t||i[a].listener===t){s=i[a].listener,r=a;break}if(r<0)return this;0===r?i.shift():function(e,t){for(var n=t,i=n+1,o=e.length;i<o;n+=1,i+=1)e[n]=e[i];e.pop()}(i,r),1===i.length&&(o[e]=i[0]),o.removeListener&&this.emit("removeListener",e,s||t)}return this},r.prototype.removeAllListeners=function(e){var t,o,r;if(!(o=this._events))return this;if(!o.removeListener)return 0===arguments.length?(this._events=n(null),this._eventsCount=0):o[e]&&(0==--this._eventsCount?this._events=n(null):delete o[e]),this;if(0===arguments.length){var a,s=i(o);for(r=0;r<s.length;++r)"removeListener"!==(a=s[r])&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=n(null),this._eventsCount=0,this}if("function"==typeof(t=o[e]))this.removeListener(e,t);else if(t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},r.prototype.listeners=function(e){return b(this,e,!0)},r.prototype.rawListeners=function(e){return b(this,e,!1)},r.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):y.call(e,t)},r.prototype.listenerCount=y,r.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},vqFl:function(e){e.exports=JSON.parse('{"_args":[["openvidu-browser@2.15.0","C:\\\\Users\\\\Hrach\\\\Desktop\\\\metl_tv_frontend"]],"_from":"openvidu-browser@2.15.0","_id":"openvidu-browser@2.15.0","_inBundle":false,"_integrity":"sha512-agnyeYIf1ze5ynGqNw32zFedlov9JZzjoFQHNMwuAoFYc2/24Aajs9cyw3j0m7v8xmMkqWSOYvsu7kGc8z1mZg==","_location":"/openvidu-browser","_phantomChildren":{},"_requested":{"type":"version","registry":true,"raw":"openvidu-browser@2.15.0","name":"openvidu-browser","escapedName":"openvidu-browser","rawSpec":"2.15.0","saveSpec":null,"fetchSpec":"2.15.0"},"_requiredBy":["/","/openvidu-angular"],"_resolved":"https://registry.npmjs.org/openvidu-browser/-/openvidu-browser-2.15.0.tgz","_spec":"2.15.0","_where":"C:\\\\Users\\\\Hrach\\\\Desktop\\\\metl_tv_frontend","author":{"name":"OpenVidu"},"bugs":{"url":"https://github.com/OpenVidu/openvidu/issues"},"dependencies":{"@types/node":"13.13.2","@types/platform":"1.3.2","freeice":"2.2.2","hark":"1.2.3","platform":"1.3.5","uuid":"7.0.3","wolfy87-eventemitter":"5.2.9"},"description":"OpenVidu Browser","devDependencies":{"browserify":"16.5.1","grunt":"1.1.0","grunt-cli":"1.3.2","grunt-contrib-copy":"1.0.0","grunt-contrib-sass":"1.0.0","grunt-contrib-uglify":"4.0.1","grunt-contrib-watch":"1.1.0","grunt-postcss":"0.9.0","grunt-string-replace":"1.3.1","grunt-ts":"6.0.0-beta.22","terser":"4.6.11","tsify":"4.0.1","tslint":"6.1.1","typedoc":"0.17.4","typescript":"3.8.3"},"homepage":"https://github.com/OpenVidu/openvidu#readme","license":"Apache-2.0","main":"lib/index.js","name":"openvidu-browser","repository":{"type":"git","url":"git://github.com/OpenVidu/openvidu.git"},"scripts":{"browserify":"VERSION=${VERSION:-dev}; cd src && ../node_modules/browserify/bin/cmd.js Main.ts -p [ tsify ] --exclude kurento-browser-extensions --debug -o ../static/js/openvidu-browser-$VERSION.js -v","browserify-prod":"VERSION=${VERSION:-dev}; cd src && ../node_modules/browserify/bin/cmd.js --debug Main.ts -p [ tsify ] --exclude kurento-browser-extensions | ../node_modules/terser/bin/terser --source-map content=inline --output ../static/js/openvidu-browser-$VERSION.min.js","build":"cd src/OpenVidu && ./../../node_modules/typescript/bin/tsc && cd ../.. && ./node_modules/typescript/bin/tsc --declaration src/index.ts --outDir ./lib --sourceMap --lib dom,es5,es2015.promise,scripthost","docs":"./generate-docs.sh"},"types":"lib/index.d.ts","version":"2.15.0"}')},vqGb:function(e,t,n){"use strict";t.__esModule=!0,t.URL=t.TEXT=t.NL=t.EMAIL=t.MAILTOEMAIL=t.Base=void 0;var i=n("RvMX"),o=n("JUw6"),r=n("dlaP");function a(e){return e instanceof r.DOMAIN||e instanceof r.TLD}var s=(0,i.createTokenClass)();s.prototype={type:"token",isLink:!1,toString:function(){for(var e=[],t=0;t<this.v.length;t++)e.push(this.v[t].toString());return e.join("")},toHref:function(){return this.toString()},toObject:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"http";return{type:this.type,value:this.toString(),href:this.toHref(e)}}};var c=(0,o.inherits)(s,(0,i.createTokenClass)(),{type:"email",isLink:!0}),l=(0,o.inherits)(s,(0,i.createTokenClass)(),{type:"email",isLink:!0,toHref:function(){return"mailto:"+this.toString()}}),u=(0,o.inherits)(s,(0,i.createTokenClass)(),{type:"text"}),d=(0,o.inherits)(s,(0,i.createTokenClass)(),{type:"nl"}),g=(0,o.inherits)(s,(0,i.createTokenClass)(),{type:"url",isLink:!0,toHref:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"http",t=!1,n=!1,i=this.v,o=[],s=0;i[s]instanceof r.PROTOCOL;)t=!0,o.push(i[s].toString().toLowerCase()),s++;for(;i[s]instanceof r.SLASH;)n=!0,o.push(i[s].toString()),s++;for(;a(i[s]);)o.push(i[s].toString().toLowerCase()),s++;for(;s<i.length;s++)o.push(i[s].toString());return o=o.join(""),t||n||(o=e+"://"+o),o},hasProtocol:function(){return this.v[0]instanceof r.PROTOCOL}});t.Base=s,t.MAILTOEMAIL=c,t.EMAIL=l,t.NL=d,t.TEXT=u,t.URL=g},zkoq:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("fXoL"),o=n("FKr1");n("8LU1"),n("cH1L");var r=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=i.Ob({type:e}),e.\u0275inj=i.Nb({factory:function(t){return new(t||e)},imports:[[o.k,o.i],o.k,o.i]}),e}()},znSr:function(e,t,n){"use strict";n.d(t,"c",(function(){return C})),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return v}));var i=n("fXoL"),o=n("ofXK"),r=n("pD6V"),a=(n("8LU1"),n("1G5W"),n("jhN1")),s=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a,s,c,l){var u;return _classCallCheck(this,n),(u=t.call(this,e,null,i,r)).ngClassInstance=l,u.DIRECTIVE_KEY="ngClass",u.ngClassInstance||(u.ngClassInstance=new o.q(a,s,e,c)),u.init(),u.setValue("",""),u}return _createClass(n,[{key:"updateWithValue",value:function(e){this.ngClassInstance.ngClass=e,this.ngClassInstance.ngDoCheck()}},{key:"ngDoCheck",value:function(){this.ngClassInstance.ngDoCheck()}},{key:"klass",set:function(e){this.ngClassInstance.klass=e,this.setValue(e,"")}}]),n}(r.b);return e.\u0275fac=function(t){return new(t||e)(i.Qb(i.l),i.Qb(r.i),i.Qb(r.f),i.Qb(i.t),i.Qb(i.u),i.Qb(i.F),i.Qb(o.q,10))},e.\u0275dir=i.Lb({type:e,inputs:{klass:["class","klass"]},features:[i.zb]}),e}(),c=["ngClass","ngClass.xs","ngClass.sm","ngClass.md","ngClass.lg","ngClass.xl","ngClass.lt-sm","ngClass.lt-md","ngClass.lt-lg","ngClass.lt-xl","ngClass.gt-xs","ngClass.gt-sm","ngClass.gt-md","ngClass.gt-lg"],l=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.apply(this,arguments)).inputs=c,e}return n}(s);return e.\u0275fac=function(t){return u(t||e)},e.\u0275dir=i.Lb({type:e,selectors:[["","ngClass",""],["","ngClass.xs",""],["","ngClass.sm",""],["","ngClass.md",""],["","ngClass.lg",""],["","ngClass.xl",""],["","ngClass.lt-sm",""],["","ngClass.lt-md",""],["","ngClass.lt-lg",""],["","ngClass.lt-xl",""],["","ngClass.gt-xs",""],["","ngClass.gt-sm",""],["","ngClass.gt-md",""],["","ngClass.gt-lg",""]],inputs:{ngClass:"ngClass","ngClass.xs":"ngClass.xs","ngClass.sm":"ngClass.sm","ngClass.md":"ngClass.md","ngClass.lg":"ngClass.lg","ngClass.xl":"ngClass.xl","ngClass.lt-sm":"ngClass.lt-sm","ngClass.lt-md":"ngClass.lt-md","ngClass.lt-lg":"ngClass.lt-lg","ngClass.lt-xl":"ngClass.lt-xl","ngClass.gt-xs":"ngClass.gt-xs","ngClass.gt-sm":"ngClass.gt-sm","ngClass.gt-md":"ngClass.gt-md","ngClass.gt-lg":"ngClass.gt-lg"},features:[i.zb]}),e}(),u=i.Yb(l),d=function e(t,n){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];_classCallCheck(this,e),this.key=t,this.value=n,this.key=i?t.replace(/['"]/g,"").trim():t.trim(),this.value=i?n.replace(/['"]/g,"").trim():n.trim(),this.value=this.value.replace(/;/,"")};function g(e){var t=typeof e;return"object"===t?e.constructor===Array?"array":e.constructor===Set?"set":"object":t}function h(e){var t=_toArray(e.split(":")),n=t[0],i=t.slice(1);return new d(n,i.join(":"))}function p(e,t){return t.key&&(e[t.key]=t.value),e}var f=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a,s,c,l,u,d){var g;_classCallCheck(this,n),(g=t.call(this,e,null,i,r)).sanitizer=a,g.ngStyleInstance=l,g.DIRECTIVE_KEY="ngStyle",g.ngStyleInstance||(g.ngStyleInstance=new o.w(e,s,c)),g.init();var h=g.nativeElement.getAttribute("style")||"";return g.fallbackStyles=g.buildStyleMap(h),g.isServer=u&&Object(o.J)(d),g}return _createClass(n,[{key:"updateWithValue",value:function(e){var t=this.buildStyleMap(e);this.ngStyleInstance.ngStyle=Object.assign(Object.assign({},this.fallbackStyles),t),this.isServer&&this.applyStyleToElement(t),this.ngStyleInstance.ngDoCheck()}},{key:"clearStyles",value:function(){this.ngStyleInstance.ngStyle=this.fallbackStyles,this.ngStyleInstance.ngDoCheck()}},{key:"buildStyleMap",value:function(e){var t,n,o,r=this,a=function(e){return r.sanitizer.sanitize(i.J.STYLE,e)||""};if(e)switch(g(e)){case"string":return y(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:";";return String(e).trim().split(t).map((function(e){return e.trim()})).filter((function(e){return""!==e}))}(e),a);case"array":return y(e,a);case"set":default:return n=a,o=[],"set"===g(t=e)?t.forEach((function(e){return o.push(e)})):Object.keys(t).forEach((function(e){o.push("".concat(e,":").concat(t[e]))})),function(e,t){return e.map(h).filter((function(e){return!!e})).map((function(e){return t&&(e.value=t(e.value)),e})).reduce(p,{})}(o,n)}return{}}},{key:"ngDoCheck",value:function(){this.ngStyleInstance.ngDoCheck()}}]),n}(r.b);return e.\u0275fac=function(t){return new(t||e)(i.Qb(i.l),i.Qb(r.i),i.Qb(r.f),i.Qb(a.b),i.Qb(i.u),i.Qb(i.F),i.Qb(o.w,10),i.Qb(r.g),i.Qb(i.C))},e.\u0275dir=i.Lb({type:e,features:[i.zb]}),e}(),m=["ngStyle","ngStyle.xs","ngStyle.sm","ngStyle.md","ngStyle.lg","ngStyle.xl","ngStyle.lt-sm","ngStyle.lt-md","ngStyle.lt-lg","ngStyle.lt-xl","ngStyle.gt-xs","ngStyle.gt-sm","ngStyle.gt-md","ngStyle.gt-lg"],v=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.apply(this,arguments)).inputs=m,e}return n}(f);return e.\u0275fac=function(t){return b(t||e)},e.\u0275dir=i.Lb({type:e,selectors:[["","ngStyle",""],["","ngStyle.xs",""],["","ngStyle.sm",""],["","ngStyle.md",""],["","ngStyle.lg",""],["","ngStyle.xl",""],["","ngStyle.lt-sm",""],["","ngStyle.lt-md",""],["","ngStyle.lt-lg",""],["","ngStyle.lt-xl",""],["","ngStyle.gt-xs",""],["","ngStyle.gt-sm",""],["","ngStyle.gt-md",""],["","ngStyle.gt-lg",""]],inputs:{ngStyle:"ngStyle","ngStyle.xs":"ngStyle.xs","ngStyle.sm":"ngStyle.sm","ngStyle.md":"ngStyle.md","ngStyle.lg":"ngStyle.lg","ngStyle.xl":"ngStyle.xl","ngStyle.lt-sm":"ngStyle.lt-sm","ngStyle.lt-md":"ngStyle.lt-md","ngStyle.lt-lg":"ngStyle.lt-lg","ngStyle.lt-xl":"ngStyle.lt-xl","ngStyle.gt-xs":"ngStyle.gt-xs","ngStyle.gt-sm":"ngStyle.gt-sm","ngStyle.gt-md":"ngStyle.gt-md","ngStyle.gt-lg":"ngStyle.gt-lg"},features:[i.zb]}),e}(),b=i.Yb(v);function y(e,t){return e.map(h).filter((function(e){return!!e})).map((function(e){return t&&(e.value=t(e.value)),e})).reduce(p,{})}var C=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=i.Ob({type:e}),e.\u0275inj=i.Nb({factory:function(t){return new(t||e)},imports:[[r.c]]}),e}()},zrcO:function(e,t,n){"use strict";n.r(t),n.d(t,"UsersModule",(function(){return Sn}));var i=n("ofXK"),o=n("tyNb"),r=n("mrSG"),a=n("3Pt+"),s=n("Esjb"),c=n("cLpZ"),l=n("vV3i"),u=n("wd/R"),d=n("VqRH"),g=n("fXoL"),h=n("lwos"),p=n("7dP1"),f=n("tVj7"),m=n("Cnuz"),v=n("5eHb"),b=n("PPbg"),y=n("0IaG"),C=n("FFj9"),O=n("Xa2L"),S=n("fZdh");function M(e,t){if(1&e&&(g.Rb(0,"img",24),g.jc(1,"getImgPath")),2&e){var n=g.ic();g.pc("src",g.lc(1,1,n.coverImg,"images"),g.Ec)}}function _(e,t){if(1&e&&g.Rb(0,"img",24),2&e){var n=g.ic();g.pc("src",n.coverImgSrc,g.Ec)}}function x(e,t){if(1&e){var n=g.Xb();g.Wb(0,"dropzone",25,26),g.ec("thumbnail",(function(e){return g.Bc(n),g.ic().onAddedFile(e)})),g.Vb()}if(2&e){var i=g.ic();g.pc("config",i.dropzoneConfig)("message","Click or drag an image to upload")}}function k(e,t){if(1&e&&(g.Rb(0,"img",27),g.jc(1,"getImgPath")),2&e){var n=g.ic();g.pc("src",g.lc(1,1,n.profileImg,"images"),g.Ec)}}function P(e,t){if(1&e&&g.Rb(0,"img",27),2&e){var n=g.ic();g.pc("src",n.avatarImgSrc,g.Ec)}}function w(e,t){1&e&&(g.Wb(0,"span",28),g.Mc(1,"First name is required"),g.Vb())}function E(e,t){1&e&&(g.Wb(0,"span",28),g.Mc(1," First name should contain only alphabetical characters "),g.Vb())}function I(e,t){1&e&&(g.Wb(0,"span",28),g.Mc(1,"Last name is required"),g.Vb())}function T(e,t){1&e&&(g.Wb(0,"span",28),g.Mc(1," Last name should contain only alphabetical characters "),g.Vb())}function A(e,t){1&e&&(g.Wb(0,"span",28),g.Mc(1,"User name is required"),g.Vb())}function R(e,t){1&e&&(g.Wb(0,"span",28),g.Mc(1," Please write alphabetical characters before numbers for username "),g.Vb())}function V(e,t){1&e&&(g.Wb(0,"span",28),g.Mc(1,"E-mail is required"),g.Vb())}function L(e,t){1&e&&(g.Wb(0,"span",28),g.Mc(1,"E-mail is "),g.Wb(2,"strong"),g.Mc(3,"invalid"),g.Vb(),g.Vb())}function N(e,t){1&e&&(g.Wb(0,"span",28),g.Mc(1,"Birth day is required"),g.Vb())}function D(e,t){1&e&&g.Rb(0,"mat-spinner",29),2&e&&g.pc("diameter",15)}var j,U,W=((j=function(){function e(t,n,i,o,r,a,s,c,u,d){_classCallCheck(this,e),this.fb=t,this.loader=n,this.auth=i,this.usersService=o,this._userInfoService=r,this.toastr=a,this.userStore=s,this.router=c,this.dialog=u,this.uploadFile=d,this.isSubmitted=!1,this.subscriptions=[],this.currentDate=new Date,this.dropzoneConfig=l.a,this.dropzoneFiles=[],this.coverFile=[],this.coverShowImg=!1,this.avatarShowImg=!1,this._getUserInfo()}return _createClass(e,[{key:"initForm",value:function(){this.profileForm=this.fb.group({id:[""],first_name:[{value:"",disabled:!0},[a.G.required,Object(s.a)(c.g)]],last_name:[{value:"",disabled:!0},[a.G.required,Object(s.a)(c.g)]],username:["",[a.G.required,Object(s.a)(c.f)]],email:["",[a.G.required,Object(s.a)(c.a)]],birthday:[""]})}},{key:"ngOnInit",value:function(){this.initForm(),this.profileForm.patchValue(Object.assign(Object.assign({},this.authUser),{birthday:u(this.authUser.birthday).format("MM/DD/YYYY")}))}},{key:"dateChanged",value:function(e){}},{key:"_getUserInfo",value:function(){var e=this;this._userInfoService._userInfo.subscribe((function(t){e.authUser=t,console.log(e.authUser)}))}},{key:"editImage",value:function(e,t){var n=this;this.dialog.open(d.a,{maxWidth:"60vw",maxHeight:"70vh",height:"100%",width:"100%",data:{title:"Profile Image Cropper",shape:t,file:e.target.files[0]}}).afterClosed().subscribe((function(e){if(console.log(e),e){if("square"===e.shape){n.imageCoverFile=e.blob,n.coverShowImg=!0;var t=new FileReader;t.onload=function(e){n.coverImgSrc=e.target.result.toString()},t.readAsDataURL(n.imageCoverFile)}if("circle"===e.shape){n.imageAvatarFile=e.blob,n.avatarShowImg=!0;var i=new FileReader;i.onload=function(e){n.avatarImgSrc=e.target.result.toString()},i.readAsDataURL(n.imageAvatarFile)}}}))}},{key:"onAddedFile",value:function(e){this.dropzoneFiles.push(e[0]),this.profileForm.patchValue({avatar:e[0].name}),console.log(e)}},{key:"addCoverImg",value:function(e){this.coverFile.push(e.target.files[0]),this.profileForm.patchValue({cover:e.target.files[0].name})}},{key:"buildFormData",value:function(){var e=new FormData,t=this.profileForm.value,n=Object.entries(this.dropzoneFiles).length>0;for(var i in Object.entries(this.coverFile),this.profileForm.value)"birthday"===i?t.birthday&&e.append(i,u(new Date(this.profileForm.value[i])).format("YYYY-MM-DD")):"avatar"===i&&n||e.append(i,this.profileForm.value[i]);if(n){var o=this.dropzoneFiles[0],r="avatar_".concat(Date.now(),".jpg");e.append("avatar",r),e.append("user_avatar_file",o,r)}return e}},{key:"saveChanges",value:function(){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("++++++++"),!this.coverShowImg){e.next=7;break}return(t=new FormData).append("image",this.imageCoverFile),t.append("belonging","profile_cover_img"),t.append("duration",""),e.next=7,this.uploadFile.uploadFile(t,"image").subscribe((function(e){console.log(e),i.coverShowImg=!1,i.saveEditeProfile("cover",e.path)}));case 7:if(!this.avatarShowImg){e.next=14;break}return(n=new FormData).append("image",this.imageAvatarFile),n.append("belonging","profile_avatar_img"),n.append("duration",""),e.next=14,this.uploadFile.uploadFile(n,"image").subscribe((function(e){console.log(e),i.coverShowImg=!1,i.saveEditeProfile("avatar",e.path)}));case 14:this.avatarShowImg||this.coverShowImg||this.saveEditeProfile();case 15:case"end":return e.stop()}}),e,this)})))}},{key:"saveEditeProfile",value:function(e,t){var n=this,i=this.buildFormData();e&&t&&i.append(e,t),console.log(i),this.usersService.saveProfileChanges(i).subscribe((function(e){return Object(r.a)(n,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(e),n=e.hasOwnProperty("token")?null==e?void 0:e.token:"",t.t0=n,!t.t0){t.next=9;break}return localStorage.setItem("token",n),this.userStore.setAuthUser(n),this.toastr.success("The changes are saved successfully"),t.next=9,this.router.navigateByUrl("users/"+this.profileForm.value.username);case 9:case"end":return t.stop()}}),t,this)})))}))}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach((function(e){return e.unsubscribe()}))}},{key:"firstName",get:function(){return this.profileForm.get("first_name")}},{key:"lastName",get:function(){return this.profileForm.get("last_name")}},{key:"email",get:function(){return this.profileForm.get("email")}},{key:"pass",get:function(){return this.profileForm.get("password")}},{key:"username",get:function(){return this.profileForm.get("username")}},{key:"confirmPass",get:function(){return this.profileForm.get("confirm_password")}},{key:"birthday",get:function(){return this.profileForm.get("birthday")}},{key:"profileImg",get:function(){return!!this.authUser&&this.authUser.avatar}},{key:"coverImg",get:function(){return!!this.authUser&&this.authUser.cover}}]),e}()).\u0275fac=function(e){return new(e||j)(g.Qb(a.f),g.Qb(h.a),g.Qb(p.a),g.Qb(f.a),g.Qb(m.a),g.Qb(v.b),g.Qb(b.a),g.Qb(o.e),g.Qb(y.b),g.Qb(C.a))},j.\u0275cmp=g.Kb({type:j,selectors:[["app-profile"]],decls:37,vars:16,consts:[[1,"flex-wrap-reverse",3,"formGroup"],[1,"editPart"],["id","profile-cover-image",1,"editCoverDiv"],["class","editCover","alt","",3,"src",4,"ngIf"],[1,"coverImgEditDiv"],["src","assets/img/edit.svg","alt","",1,"remove-profile-img",3,"click"],["type","file","hidden","",3,"change"],["coverChangeImg",""],[1,"editPart1"],[1,"right-side","mx-auto","ml-xl-4","pl-lg-2"],[1,"userImg"],["id","dropzone","class","profileImgDropzone single",3,"config","message","thumbnail",4,"ngIf"],[1,"profile-img"],["class","profileImage","alt","",3,"src",4,"ngIf"],["avatarChangeImg",""],[1,"left-side","pr-lg-2"],["placeholder","First Name","formControlName","first_name",1,"login-input"],["class","error",4,"ngIf"],["placeholder","Last Name","formControlName","last_name",1,"login-input"],["placeholder","User name","formControlName","username",1,"login-input"],["placeholder","Email","formControlName","email",1,"login-input"],[1,"actions"],[1,"save-profile-changes",3,"click"],[3,"diameter",4,"ngIf"],["alt","",1,"editCover",3,"src"],["id","dropzone",1,"profileImgDropzone","single",3,"config","message","thumbnail"],["dropzone",""],["alt","",1,"profileImage",3,"src"],[1,"error"],[3,"diameter"]],template:function(e,t){if(1&e){var n=g.Xb();g.Wb(0,"form",0),g.Wb(1,"div",1),g.Wb(2,"div",2),g.Kc(3,M,2,4,"img",3),g.Kc(4,_,1,1,"img",3),g.Wb(5,"div",4),g.Wb(6,"img",5),g.ec("click",(function(){return g.Bc(n),g.xc(8).click()})),g.Vb(),g.Vb(),g.Wb(7,"input",6,7),g.ec("change",(function(e){return t.editImage(e,"square")})),g.Vb(),g.Vb(),g.Wb(9,"div",8),g.Wb(10,"div",9),g.Wb(11,"div",10),g.Kc(12,x,2,2,"dropzone",11),g.Wb(13,"div",12),g.Kc(14,k,2,4,"img",13),g.Kc(15,P,1,1,"img",13),g.Wb(16,"img",5),g.ec("click",(function(){return g.Bc(n),g.xc(18).click()})),g.Vb(),g.Wb(17,"input",6,14),g.ec("change",(function(e){return t.editImage(e,"circle")})),g.Vb(),g.Vb(),g.Vb(),g.Vb(),g.Wb(19,"div",15),g.Rb(20,"input",16),g.Kc(21,w,2,0,"span",17),g.Kc(22,E,2,0,"span",17),g.Rb(23,"input",18),g.Kc(24,I,2,0,"span",17),g.Kc(25,T,2,0,"span",17),g.Rb(26,"input",19),g.Kc(27,A,2,0,"span",17),g.Kc(28,R,2,0,"span",17),g.Rb(29,"input",20),g.Kc(30,V,2,0,"span",17),g.Kc(31,L,4,0,"span",17),g.Kc(32,N,2,0,"span",17),g.Wb(33,"div",21),g.Wb(34,"a",22),g.ec("click",(function(){return t.saveChanges()})),g.Mc(35,"Save changes"),g.Vb(),g.Kc(36,D,1,1,"mat-spinner",23),g.Vb(),g.Vb(),g.Vb(),g.Vb(),g.Vb()}2&e&&(g.pc("formGroup",t.profileForm),g.Cb(3),g.pc("ngIf",!t.coverShowImg),g.Cb(1),g.pc("ngIf",t.coverShowImg),g.Cb(8),g.pc("ngIf",!t.profileImg),g.Cb(2),g.pc("ngIf",!t.avatarShowImg),g.Cb(1),g.pc("ngIf",t.avatarShowImg),g.Cb(6),g.pc("ngIf",t.isSubmitted&&t.firstName.hasError("required")),g.Cb(1),g.pc("ngIf",t.isSubmitted&&t.firstName.hasError("patternInvalid")),g.Cb(2),g.pc("ngIf",t.isSubmitted&&t.lastName.hasError("required")),g.Cb(1),g.pc("ngIf",t.isSubmitted&&t.lastName.hasError("patternInvalid")),g.Cb(2),g.pc("ngIf",t.isSubmitted&&t.username.hasError("required")),g.Cb(1),g.pc("ngIf",t.isSubmitted&&t.username.hasError("patternInvalid")),g.Cb(2),g.pc("ngIf",t.isSubmitted&&t.email.hasError("required")),g.Cb(1),g.pc("ngIf",t.isSubmitted&&t.email.hasError("patternInvalid")),g.Cb(1),g.pc("ngIf",t.isSubmitted&&t.birthday.hasError("required")),g.Cb(4),g.pc("ngIf",t.loader.formProcessing))},directives:[a.I,a.t,a.k,i.t,a.c,a.s,a.i,l.b,O.c],pipes:[S.a],styles:[".login-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%;height:100vh}.login-logo[_ngcontent-%COMP%]{cursor:pointer}.login-content-right[_ngcontent-%COMP%]{background:#fff;width:57%}.login-content-left[_ngcontent-%COMP%]{width:43%;display:flex;flex-direction:column;align-items:center;justify-content:center;position:relative;background:url(back-login.53f102952f1c83155d3a.png)}.login-abs[_ngcontent-%COMP%]{position:absolute;right:0}.login-btn[_ngcontent-%COMP%]{background:#fff;color:#18b587!important}.login-btn[_ngcontent-%COMP%], .register-btn[_ngcontent-%COMP%]{border-radius:28px 0 0 28px;width:128px;height:57px;display:flex;justify-content:center;align-items:center;font-size:20px;font-family:Muli-Bold;transition:.3s ease-in-out}.register-btn[_ngcontent-%COMP%]{color:#fff!important;cursor:pointer}.register-btn[_ngcontent-%COMP%]:hover{background:#fff;color:#18b587!important}.login-content-right[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;padding-left:150px}.login-title[_ngcontent-%COMP%]{color:#545454;font-size:32px;font-family:Muli-Bold;margin-bottom:32px}.login-input[_ngcontent-%COMP%]{width:100%;height:51px;box-shadow:0 0 6px rgba(0,109,204,.18);padding:15px 32px;margin-bottom:8px;margin-top:20px;color:#8c8888;font-size:16px;font-family:Muli-Regular}.login-input[_ngcontent-%COMP%]:focus{box-shadow:0 0 6px #18b587}.forgot-password[_ngcontent-%COMP%]{text-align:right;color:#545454;font-size:16px;font-family:Muli-Regular;cursor:pointer;transition:.3s ease-in-out}.forgot-password[_ngcontent-%COMP%]:hover{color:#f53c6f}.login-block[_ngcontent-%COMP%]{width:430px}.login-submit[_ngcontent-%COMP%]{width:100%;height:51px;background:#f53c6f;padding:15px 32px;margin-bottom:32px;color:#fff!important;font-size:16px;font-family:Muli-Regular;display:flex;justify-content:center;align-items:center;margin-top:47px;transition:.3s ease-in-out;cursor:pointer}.login-submit[_ngcontent-%COMP%]:hover{background:#c52551}.register-block[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.register-select[_ngcontent-%COMP%]{width:200px;height:51px;box-shadow:0 0 6px rgba(0,109,204,.18);padding:15px 32px;margin-bottom:8px;margin-top:20px;color:#cecece;font-size:16px;font-family:Muli-Regular;outline:none;border:0}.register-select[_ngcontent-%COMP%]:focus{box-shadow:0 0 6px rgba(245,60,111,.14);border:.5px solid #f53c6f}.register-day[_ngcontent-%COMP%]{width:100px;height:51px;box-shadow:0 0 6px rgba(0,109,204,.18);padding:15px 32px;margin-bottom:8px;margin-top:20px;color:#cecece;font-size:16px;font-family:Muli-Regular;outline:none;border:0}.register-day[_ngcontent-%COMP%]:focus{box-shadow:0 0 6px rgba(245,60,111,.14);border:.5px solid #f53c6f}@media (max-width:1400px){.login-logo[_ngcontent-%COMP%]{width:250px;margin-left:100px}.login-content-left[_ngcontent-%COMP%]{align-items:start}}@media (max-width:1200px){.login-logo[_ngcontent-%COMP%]{margin-left:40px}.login-content-right[_ngcontent-%COMP%]{padding-left:80px}}@media (max-width:991px){.login-content-left[_ngcontent-%COMP%]{align-items:start;height:400px;width:100%}.login-content-right[_ngcontent-%COMP%]{padding-left:0;width:100%;align-items:center;margin-top:60px}.login-content[_ngcontent-%COMP%]{height:auto;flex-direction:column}}@media (max-width:480px){.register-block[_ngcontent-%COMP%]{flex-direction:column}.register-day[_ngcontent-%COMP%], .register-select[_ngcontent-%COMP%]{width:100%}.login-block[_ngcontent-%COMP%]{width:90%}.login-title[_ngcontent-%COMP%]{font-size:27px}.forgot-password[_ngcontent-%COMP%], .login-title[_ngcontent-%COMP%]{text-align:center}.login-btn[_ngcontent-%COMP%]{width:128px;margin-right:0}.login-btn[_ngcontent-%COMP%], .register-btn[_ngcontent-%COMP%]{height:45px;font-size:16px}.login-logo[_ngcontent-%COMP%]{width:150px}}.birthday-block[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{cursor:pointer}.actions[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:32px;margin-top:47px}.actions[_ngcontent-%COMP%]   .register-submit[_ngcontent-%COMP%]{width:100%;height:51px;background:#f53c6f;padding:15px 32px;color:#fff!important;font-size:16px;font-family:Muli-Regular;display:flex;justify-content:center;align-items:center;transition:.3s ease-in-out;cursor:pointer}.actions[_ngcontent-%COMP%]   .register-submit[_ngcontent-%COMP%]:hover{background:#c52551}.actions[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin-left:20px}@media screen and (max-width:1250px){form[_ngcontent-%COMP%]{flex-direction:column-reverse}}form[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]{flex:1;min-width:360px;width:100%;max-width:400px;margin:0 auto}@media only screen and (min-width:769px) and (max-width:1024px){form[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]{padding:0!important}}@media screen and (max-width:410px){form[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]{min-width:260px}}@media screen and (min-width:375px) and (max-width:510px){form[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]{flex:none!important;width:calc(100% - 5px)!important;min-width:270px!important}}@media screen and (min-width:320px) and (max-width:375px){form[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]{flex:none!important;width:calc(100% - 15px)!important;min-width:270px!important}}form[_ngcontent-%COMP%]   .save-profile-changes[_ngcontent-%COMP%]{width:100%;height:51px;background-color:#18b587;padding:15px 32px;color:#fff!important;font-size:16px;font-family:Muli-Regular;display:flex;justify-content:center;align-items:center;transition:.3s ease-in-out;cursor:pointer}form[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]   .profile-img[_ngcontent-%COMP%]{max-width:400%;width:100%;height:400px;border-radius:50%;position:relative}@media only screen and (max-width:1250px){form[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]   .profile-img[_ngcontent-%COMP%]{background-position:50% 50%!important}}@media only screen and (max-width:425px){form[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]   .profile-img[_ngcontent-%COMP%]{height:250px}}form[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]   .profile-img[_ngcontent-%COMP%]   .remove-profile-img[_ngcontent-%COMP%]{cursor:pointer;position:absolute;right:7px;top:6px;color:#fff;padding:5px;height:50px}@media only screen and (max-width:500px){form[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]   .profile-img[_ngcontent-%COMP%]   .remove-profile-img[_ngcontent-%COMP%]{height:40px}}.editPart[_ngcontent-%COMP%]{display:flex;flex-direction:column}.editPart1[_ngcontent-%COMP%]{display:flex!important;margin-top:20px}.editCover[_ngcontent-%COMP%]{width:100%;max-width:1200px;height:300px;-o-object-fit:cover;object-fit:cover}@media screen and (max-width:500px){.editCover[_ngcontent-%COMP%]{height:200px}}@media screen and (max-width:375px){.editCover[_ngcontent-%COMP%]{height:150px}}.editCoverDiv[_ngcontent-%COMP%]{position:relative}.coverImgEditDiv[_ngcontent-%COMP%]{position:absolute;top:10px;right:20px;height:50px;cursor:pointer}@media screen and (max-width:500px){.coverImgEditDiv[_ngcontent-%COMP%]{height:40px!important}}.coverImgEditDiv[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:40px!important}@media screen and (max-width:1250px){.left-side[_ngcontent-%COMP%]{margin-top:20px!important}}@media screen and (max-width:1200px){.editPart1[_ngcontent-%COMP%]{flex-direction:column;justify-content:center}}.profileImage[_ngcontent-%COMP%]{max-width:400%;width:100%;height:400px;border-radius:50%}"]}),j),B=n("PZzU"),F=n("9xOu"),z=n("A7+4"),G=n("tk/3"),Q=((U=function(){function e(t){_classCallCheck(this,e),this.httpClient=t}return _createClass(e,[{key:"getToken",value:function(e){return this.httpClient.get(F.c+"users/session/get-token",{params:e})}},{key:"getSession",value:function(){return this.httpClient.post(F.c+"api/sessions",{})}},{key:"leaveSession",value:function(e){return this.httpClient.get(F.c+"users/session/leave",{params:e})}}]),e}()).\u0275fac=function(e){return new(e||U)(g.ac(G.b))},U.\u0275prov=g.Mb({token:U,factory:U.\u0275fac,providedIn:"root"}),U),K=n("wDcp"),H=n("il7l"),q=n("n/vF"),Y=n("sAj1"),Z=n("gHg8"),J=n("8hAm"),X=n("KUGs"),$=n("51Q/"),ee=n("yEwS"),te=["video"];function ne(e,t){1&e&&g.Rb(0,"mat-spinner",2),2&e&&g.pc("diameter",100)}function ie(e,t){if(1&e&&(g.Wb(0,"li",26),g.Mc(1),g.Vb()),2&e){var n=t.$implicit;g.Cb(1),g.Oc(" #",n.name," ")}}function oe(e,t){if(1&e){var n=g.Xb();g.Wb(0,"div",27),g.Wb(1,"div",28),g.Rb(2,"i",29),g.Wb(3,"span"),g.Mc(4),g.Vb(),g.Vb(),g.Wb(5,"div",30),g.ec("click",(function(){return g.Bc(n),g.ic(3).openSocialShareModal()})),g.Rb(6,"i",31),g.Wb(7,"p"),g.Mc(8,"Share"),g.Vb(),g.Vb(),g.Vb()}if(2&e){var i=g.ic(3);g.Cb(4),g.Nc(i.participants.length)}}function re(e,t){if(1&e&&(g.Wb(0,"div",32),g.Wb(1,"span",33),g.Mc(2),g.Vb(),g.Wb(3,"span",34),g.Mc(4,"\xb7"),g.Vb(),g.Wb(5,"span",35),g.Mc(6),g.jc(7,"dateFromNow"),g.Vb(),g.Vb()),2&e){var n=g.ic(3);g.Cb(2),g.Oc("",n.participants.length," watching now"),g.Cb(4),g.Nc(g.kc(7,2,n.savedVideoSettings.created_at))}}function ae(e,t){1&e&&(g.Wb(0,"span",36),g.Mc(1,"Live"),g.Vb())}function se(e,t){if(1&e){var n=g.Xb();g.Wb(0,"app-chat-box",37),g.ec("sendMessage",(function(e){return g.Bc(n),g.ic(3).sendMessage(e)})),g.Vb()}if(2&e){var i=g.ic(3);g.pc("openViduToken",i.openViduToken)("messages",i.messages)("session",i.session)("videoId",i.videoId)("videoRecordingState",i.recordingState)}}function ce(e,t){if(1&e){var n=g.Xb();g.Ub(0),g.Wb(1,"div",7),g.Wb(2,"div",8),g.Wb(3,"div",9),g.Wb(4,"app-video-js-record",10),g.ec("recordingStarted",(function(e){return g.Bc(n),g.ic(2).getRecordedVideoId(e)})),g.Vb(),g.Vb(),g.Wb(5,"div",11),g.Wb(6,"div",12),g.Wb(7,"div",13),g.Wb(8,"ul",14),g.Kc(9,ie,2,1,"li",15),g.Vb(),g.Kc(10,oe,9,1,"div",16),g.Vb(),g.Wb(11,"h3"),g.Mc(12),g.Vb(),g.Kc(13,re,8,4,"div",17),g.Kc(14,ae,2,0,"span",18),g.Vb(),g.Vb(),g.Wb(15,"div",19),g.Wb(16,"div"),g.Rb(17,"img",20),g.jc(18,"getImgPath"),g.Vb(),g.Wb(19,"div"),g.Wb(20,"p",21),g.Mc(21),g.Vb(),g.Wb(22,"p",22),g.Mc(23),g.Vb(),g.Vb(),g.Vb(),g.Rb(24,"app-stocks-marquee",23),g.Vb(),g.Wb(25,"div",24),g.Kc(26,se,1,5,"app-chat-box",25),g.Vb(),g.Vb(),g.Tb()}if(2&e){var i=g.ic(2);g.Cb(4),g.pc("openViduToken",i.openViduToken)("thumbnailFile",i.thumbnailFile)("videoSettings",i.videoSettings)("participants",i.participants),g.Cb(5),g.pc("ngForOf",i.videoSettings.tags),g.Cb(1),g.pc("ngIf",i.videoId),g.Cb(2),g.Nc(i.videoSettings.name),g.Cb(1),g.pc("ngIf",i.videoId),g.Cb(1),g.pc("ngIf",i.videoId),g.Cb(3),g.pc("src",g.lc(18,15,i.channelUser.channel.avatar,"images"),g.Ec),g.Cb(4),g.Nc(i.channelUser.channel.name),g.Cb(2),g.Oc("",i.channelUser.channel.subscribers_count+" subscriber"+(1===i.channelUser.channel.subscribers_count?"":"s")," "),g.Cb(1),g.pc("stocks",i.userStocks)("videoStreaming",!0),g.Cb(2),g.pc("ngIf",i.videoId)}}function le(e,t){1&e&&(g.Wb(0,"div",38),g.Wb(1,"div",39),g.Rb(2,"img",40),g.Wb(3,"p",41),g.Wb(4,"b"),g.Mc(5,"There is no session data defined."),g.Vb(),g.Rb(6,"br"),g.Mc(7," Please return to the "),g.Wb(8,"a",42),g.Mc(9,"'Start live video' page"),g.Vb(),g.Vb(),g.Vb(),g.Vb())}function ue(e,t){if(1&e){var n=g.Xb();g.Wb(0,"div",43),g.Wb(1,"div",39),g.Rb(2,"img",44),g.Wb(3,"p",41),g.Wb(4,"b"),g.Mc(5,"There was a problem while loading streaming session."),g.Vb(),g.Rb(6,"br"),g.Wb(7,"small"),g.Mc(8,"Please "),g.Wb(9,"a",45),g.ec("click",(function(){return g.Bc(n),g.ic(2).reloadPage()})),g.Mc(10,"reload"),g.Vb(),g.Mc(11," the page or try again later."),g.Vb(),g.Vb(),g.Vb(),g.Wb(12,"div",46),g.Wb(13,"div",39),g.Rb(14,"img",47),g.Wb(15,"p",48),g.Wb(16,"b"),g.Mc(17,"There was a problem while loading streaming session."),g.Vb(),g.Rb(18,"br"),g.Wb(19,"small"),g.Mc(20,"Please "),g.Wb(21,"a",45),g.ec("click",(function(){return g.Bc(n),g.ic(2).reloadPage()})),g.Mc(22,"reload"),g.Vb(),g.Mc(23," the page or try again later."),g.Vb(),g.Vb(),g.Vb(),g.Vb(),g.Vb()}}function de(e,t){if(1&e&&(g.Wb(0,"div",3),g.Kc(1,ce,27,18,"ng-container",4),g.Kc(2,le,10,0,"div",5),g.Kc(3,ue,24,0,"div",6),g.Vb()),2&e){var n=g.ic();g.Cb(1),g.pc("ngIf",n.openViduToken),g.Cb(1),g.pc("ngIf",!n.sessionData&&!n.videoSettings),g.Cb(1),g.pc("ngIf",!n.openViduToken&&n.sessionData&&n.videoSettings)}}var ge,he=((ge=function(){function e(t,n,i,o,r,a,s,c,l,u,d,g,h,p,f,m){_classCallCheck(this,e),this.ref=t,this.toastr=n,this.elRef=i,this.openViduService=o,this.subject=r,this._userInfoService=a,this.videoService=s,this.chatService=c,this.videoChatService=l,this.stocksService=u,this.router=d,this.route=g,this.dialog=h,this.loader=p,this.usersService=f,this.getUrlParts=m,this.videoJSPlayerOptions={autoplay:!0,controls:!0,fluid:!1,sources:[]},this.OPENVIDU_SERVER_URL="https://localhost:4443",this.OPENVIDU_SERVER_SECRET="MY_SECRET",this.subscribers=[],this.recordingState="idle",this.webcams=[],this.tags=[],this.participants=[],this.thumbnailUploaded=!1,this.apiUrl=F.c,this.sessionData={sessionName:"",myUserName:""},this.userStocks=[],this.messages=[],this.subscriptions=[],this._getUserInfo()}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.getUserChannel(),this.getVideoSessionData(),this.sessionData&&this.videoSettings&&this.joinSession(),this.subscriptions.push(this.subject.getVideoRecordingState().subscribe((function(t){"finished"===t.recordingState&&e.leaveSession(),t.viaSocket||e.sendRecordingState(t.recording)}))),this.subscriptions.push(this.stocksService.getUserStocks({user_id:this.authUser.id}).subscribe((function(t){e.userStocks=(null==t?void 0:t.user_stocks)||[]})))}},{key:"_getUserInfo",value:function(){var e=this;this._userInfoService._userInfo.subscribe((function(t){e.authUser=t,console.log(e.authUser,"Video")}))}},{key:"beforeunloadHandler",value:function(){this.leaveSession(),"started"===this.recordingState&&this.removeLiveVideoByToken()}},{key:"alertOfLeaving",value:function(){this.toastr.error("Please stop recording first")}},{key:"getUserChannel",value:function(){var e=this;this.subscriptions.push(this.usersService.getUserInfo({username:this.authUser.username}).subscribe((function(t){e.channelUser=t})))}},{key:"getVideoSessionData",value:function(){var e=localStorage.getItem("session"),t=localStorage.getItem("video_settings");this.sessionData=e?JSON.parse(e):null,this.videoSettings=t?JSON.parse(t):null,console.log(this.videoSettings,this.sessionData)}},{key:"joinSession",value:function(){var e=this;this.OV=new B.OpenVidu,this.session=this.OV.initSession(),this.getStreamEvents(),this.loader.dataLoading=!0,this.subscriptions.push(this.openViduService.getToken({email:this.authUser.email,sessionName:this.sessionData.sessionName,role:"PUBLISHER"}).subscribe((function(t){console.log(t),e.openViduToken=t,e.receiveMessage(),e.receiveRecordingState(),e.session.connect(t,{clientData:e.sessionData,avatar:e.authUser.avatar,from_user:e.authUser}).then((function(){if(e.loader.dataLoading=!1,t.includes("PUBLISHER")){var n=e.elRef.nativeElement.querySelector("video"),i=e.OV.initPublisher(n,{audioSource:void 0,videoSource:void 0,publishAudio:!0,publishVideo:!0,resolution:"640x480",frameRate:30,insertMode:"APPEND",mirror:!1});console.log(i),e.session.publish(i),e.mainStreamManager=i,e.publisher=i}})).catch((function(t){e.toastr.error("There was a problem white loading streaming session"),console.log(t)}))})))}},{key:"getStreamEvents",value:function(){var e=this;this.session.on("streamCreated",(function(t){e.elRef.nativeElement.querySelector("video"),e.thumbnailFile=e.videoSettings.thumbnail,e.session.subscribe(t.stream,void 0)})),this.session.on("connectionCreated",(function(t){var n=JSON.parse(t.connection.data.replace(/}%\/%{/g,","));e.participants.push(n.clientData.myUserName)})),this.session.on("connectionDestroyed",(function(t){var n=JSON.parse(t.connection.data.replace(/}%\/%{/g,","));e.participants=e.participants.filter((function(e){return e!==n.clientData.myUserName}))})),this.session.on("streamDestroyed",(function(t){e.deleteSubscriber(t.stream.streamManager),e.leaveSession()}))}},{key:"updateMainStreamManager",value:function(e){this.mainStreamManager=e}},{key:"deleteSubscriber",value:function(e){console.log(this.subscribers)}},{key:"getRecordedVideoId",value:function(e){this.savedVideoSettings=e,this.videoId=null==e?void 0:e.id;var t=this.getUrlParts.transform(window.location.href).hostName;this.shareUrl="".concat(t,"users/video/watch?session=").concat(this.sessionData.sessionName,"&publisher=").concat(this.authUser.username,"&id=").concat(this.videoId)}},{key:"leaveSession",value:function(){console.log("leaving session!!!"),this.session&&this.session.disconnect(),this.subscribers=[],delete this.publisher,delete this.session,delete this.OV,this.thumbnailFile=[],this.thumbnailUploaded=!1,this.sessionData&&this.subscriptions.push(this.openViduService.leaveSession({token:this.openViduToken,sessionName:this.sessionData.sessionName,role:"publisher"}).subscribe((function(){})))}},{key:"sendMessage",value:function(e){var t=this;console.log(e),this.session.signal({data:e.message,to:[],type:"my-chat"}).then((function(){t.subscriptions.push(t.videoChatService.saveVideoMessage(Object.assign({video_id:t.videoId},e)).subscribe((function(e){t.messages=e})))})).catch((function(e){console.error(e)}))}},{key:"sendRecordingState",value:function(e){this.session&&this.session.signal({data:e,to:[],type:"recording-state"}).then((function(){}))}},{key:"receiveRecordingState",value:function(){var e=this;this.session.on("signal:recording-state",(function(t){e.recordingState=t.data?"started":"finished","finished"===e.recordingState&&(e.tags=[]),e.subject.setVideoRecordingState(Object.assign({recordingState:e.recordingState},{viaSocket:!0}))}))}},{key:"receiveMessage",value:function(){var e=this;this.session.on("signal:my-chat",(function(t){e.subject.setMsgData({message:t.data,from_user:t.from.data})}))}},{key:"removeLiveVideoByToken",value:function(){this.videoService.removeVideoByToken({token:this.openViduToken}).subscribe((function(){}))}},{key:"reloadPage",value:function(){location.reload()}},{key:"ngOnDestroy",value:function(){"started"===this.recordingState&&this.removeLiveVideoByToken(),this.leaveSession(),this.subscriptions.forEach((function(e){return e.unsubscribe()}))}},{key:"openSocialShareModal",value:function(){if(console.log("modal"),console.log(this.recordingState),"started"===this.recordingState&&this.dialog.open(z.a,{width:"500px",height:"400px",data:{shareUrl:this.shareUrl}}).afterClosed().subscribe((function(e){})),"finished"===this.recordingState){var e=this.getUrlParts.transform(window.location.href).hostName;this.shareUrl="".concat(e,"videos/play?id=").concat(this.videoId),this.dialog.open(z.a,{width:"500px",height:"400px",data:{shareUrl:this.shareUrl}}).afterClosed().subscribe((function(e){}))}}},{key:"ngAfterViewInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||ge)(g.Qb(g.h),g.Qb(v.b),g.Qb(g.l),g.Qb(Q),g.Qb(K.a),g.Qb(m.a),g.Qb(C.a),g.Qb(H.a),g.Qb(q.a),g.Qb(Y.a),g.Qb(o.e),g.Qb(o.a),g.Qb(y.b),g.Qb(h.a),g.Qb(f.a),g.Qb(Z.a))},ge.\u0275cmp=g.Kb({type:ge,selectors:[["app-video"]],viewQuery:function(e,t){var n;1&e&&g.Rc(te,!0),2&e&&g.wc(n=g.fc())&&(t.videoEl=n.first)},hostBindings:function(e,t){1&e&&g.ec("beforeunload",(function(){return t.beforeunloadHandler()}),!1,g.Ac)},decls:2,vars:2,consts:[["class","session-loader",3,"diameter",4,"ngIf"],["id","video-stream-container",4,"ngIf"],[1,"session-loader",3,"diameter"],["id","video-stream-container"],[4,"ngIf"],["class","no-stored-session-data",4,"ngIf"],["class","stream-errors",4,"ngIf"],["id","video-chat-container",1,"videoContainerLivePartDiv"],[1,"left"],[1,"video-container","liveVideo"],[3,"openViduToken","thumbnailFile","videoSettings","participants","recordingStarted"],["id","video-info-row"],["id","video-info"],[1,"videoTagsAndActions"],["id","video-tags-list"],["class","tag",4,"ngFor","ngForOf"],["id","video-info-actions",4,"ngIf"],["class","details-row",4,"ngIf"],["class","live-now",4,"ngIf"],["id","channel-info"],["id","channel-avatar",1,"avatar",3,"src"],["id","channel-name"],[1,"subscribers-count"],[3,"stocks","videoStreaming"],[1,"chat-container"],[3,"openViduToken","messages","session","videoId","videoRecordingState","sendMessage",4,"ngIf"],[1,"tag"],["id","video-info-actions"],["id","participants-count"],[1,"fa","fa-users"],["id","share-wrap",3,"click"],[1,"fas","fa-share-alt"],[1,"details-row"],[1,"watchers-count"],[1,"dot"],[1,"date"],[1,"live-now"],[3,"openViduToken","messages","session","videoId","videoRecordingState","sendMessage"],[1,"no-stored-session-data"],[1,"d-flex","flex-column","justify-content-center","align-items-center","mx-auto","py-5","mt-5"],["src","assets/img/errorPage.svg","alt","no-stored-session-data-img","width","500","height","370"],[1,"text-center"],["routerLink","/users/video/start-live-video"],[1,"stream-errors"],["src","assets/img/errorLoading.svg","alt","no-stored-session-data-img","width","150","height","200"],[1,"reload",3,"click"],[1,"d-none"],["src","assets/img/dataError.svg","alt","stream-errors-img","width","334","height","471"],[1,"text-center","top"]],template:function(e,t){1&e&&(g.Kc(0,ne,1,1,"mat-spinner",0),g.Kc(1,de,4,3,"div",1)),2&e&&(g.pc("ngIf",t.loader.dataLoading),g.Cb(1),g.pc("ngIf",!t.loader.dataLoading))},directives:[i.t,O.c,J.a,i.s,X.a,$.a,o.h],pipes:[S.a,ee.a],styles:[".session-container[_ngcontent-%COMP%]{height:100vh}#img-div[_ngcontent-%COMP%]{text-align:center}#img-div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:200px}.join-session-btn[_ngcontent-%COMP%]{background-color:#18b587;width:25%;margin-top:33px;border:none}#video-chat-container[_ngcontent-%COMP%]{display:flex}#video-chat-container[_ngcontent-%COMP%]   .video-container[_ngcontent-%COMP%]{flex:1;display:flex;align-items:flex-start}#video-chat-container[_ngcontent-%COMP%]   .chat-container[_ngcontent-%COMP%]{flex:0.5;margin-left:10px;display:flex}@media (max-width:750px){#video-chat-container[_ngcontent-%COMP%]   .chat-container[_ngcontent-%COMP%]{margin-left:0}}#video-chat-container[_ngcontent-%COMP%]   app-video-js-record[_ngcontent-%COMP%]{flex:1;position:relative;width:100%;overflow:hidden;padding:30% 0}#streaming-not-started-yet[_ngcontent-%COMP%]{width:500px;height:400px;display:flex;align-items:center;justify-content:center;font-family:Muli-Light;background:#efefef}.stream-container[_ngcontent-%COMP%]{overflow:hidden}.stream-errors[_ngcontent-%COMP%]{display:flex}@media (max-width:767px){.stream-errors[_ngcontent-%COMP%]{flex-direction:column}}.reload[_ngcontent-%COMP%]{text-decoration:underline;color:#000}#video-stream-container[_ngcontent-%COMP%]{height:100vh}#video-info-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:20px}#video-info-row[_ngcontent-%COMP%]   #video-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-family:Muli-Bold,sans-serif;margin-top:10px}#video-info-row[_ngcontent-%COMP%]   #video-info-actions[_ngcontent-%COMP%]{display:flex}#video-info-row[_ngcontent-%COMP%]   #video-info-actions[_ngcontent-%COMP%]   #participants-count[_ngcontent-%COMP%]{display:flex;align-items:center;color:#545454;font-size:12px}#video-info-row[_ngcontent-%COMP%]   #video-info-actions[_ngcontent-%COMP%]   #participants-count[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:Muli-Light,sans-serif}#video-info-row[_ngcontent-%COMP%]   #video-info-actions[_ngcontent-%COMP%]   #share-wrap[_ngcontent-%COMP%]{margin-left:10px}#channel-info[_ngcontent-%COMP%]{border-top:.5px solid #c9c9c9;border-bottom:.5px solid #c9c9c9;display:flex;flex-direction:row;margin-bottom:20px;margin-top:12px;padding:12px 0}#channel-info[_ngcontent-%COMP%]   #channel-name[_ngcontent-%COMP%]{font-family:Muli-Bold,sans-serif;color:#545454;font-size:16px;margin-bottom:4px;overflow:hidden;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical}#share-wrap[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer}#share-wrap[_ngcontent-%COMP%], #share-wrap[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;color:#545454}#share-wrap[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-left:5px;font-family:Muli-Light,sans-serif;margin-bottom:0!important}.left[_ngcontent-%COMP%]{flex:1}#video-tags-list[_ngcontent-%COMP%]{display:flex}#video-tags-list[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]{color:#0035c6;font-size:16px;font-family:Muli-Bold,sans-serif;margin-right:16px}.live-now[_ngcontent-%COMP%]{width:52px;height:20px;position:static}.details-row[_ngcontent-%COMP%]{display:flex;align-items:center}.details-row[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{margin:0 10px}.liveVideo[_ngcontent-%COMP%]{display:flex!important}@media (max-width:750px){.videoContainerLivePartDiv[_ngcontent-%COMP%]{flex-direction:column}}#video-info[_ngcontent-%COMP%], #video-info-row[_ngcontent-%COMP%]{width:100%}.videoTagsAndActions[_ngcontent-%COMP%]{display:flex;justify-content:space-between}"]}),ge),pe=n("+xpX"),fe=["ovSessionComponent"];function me(e,t){if(1&e){var n=g.Xb();g.Wb(0,"div",2),g.Wb(1,"div",3),g.Wb(2,"h1"),g.Mc(3,"Join a video session"),g.Vb(),g.Wb(4,"form",4),g.Wb(5,"p"),g.Wb(6,"label"),g.Mc(7,"Participant"),g.Vb(),g.Rb(8,"input",5),g.Vb(),g.Wb(9,"p"),g.Wb(10,"label"),g.Mc(11,"Session"),g.Vb(),g.Rb(12,"input",6),g.Vb(),g.Wb(13,"p",7),g.Wb(14,"button",8),g.ec("click",(function(){return g.Bc(n),g.ic().joinSession()})),g.Mc(15,"Join!"),g.Vb(),g.Vb(),g.Vb(),g.Vb(),g.Vb()}if(2&e){var i=g.ic();g.Cb(4),g.pc("formGroup",i.joinSessionForm)}}function ve(e,t){if(1&e){var n=g.Xb();g.Wb(0,"div",9),g.Wb(1,"opv-session",10,11),g.ec("sessionCreated",(function(e){return g.Bc(n),g.ic().handlerSessionCreatedEvent(e)}))("publisherCreated",(function(e){return g.Bc(n),g.ic().handlerPublisherCreatedEvent(e)}))("error",(function(e){return g.Bc(n),g.ic().handlerErrorEvent(e)})),g.Vb(),g.Vb()}if(2&e){var i=g.ic();g.Cb(1),g.pc("sessionName",i.mySessionId)("user",i.myUserName)("tokens",i.tokens)}}var be,ye=((be=function(){function e(t,n,i,o){_classCallCheck(this,e),this.fb=t,this.openViduService=n,this.toastr=i,this.elRef=o,this.OPENVIDU_SERVER_URL="https://localhost/:4443",this.OPENVIDU_SERVER_SECRET="MY_SECRET",this.mySessionId="SessionA",this.myUserName="Participant"+Math.floor(100*Math.random()),this.tokens=[],this.session=!1,this.initForm()}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"initForm",value:function(){this.joinSessionForm=this.fb.group({mySessionId:["SessionB"],myUserName:["Participant"+Math.floor(100*Math.random())]})}},{key:"joinSession",value:function(){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.getToken();case 1:case"end":return e.stop()}}),e,this)})))}},{key:"getToken",value:function(){var e=this;this.openViduService.getToken({email:"admin@gmail.com",sessionName:"SessionA"}).subscribe((function(t){console.log(t),e.tokens.push(t),e.session=!0,console.log("getToken ",e.tokens)}),(function(e){console.log(e)}))}},{key:"leaveSession",value:function(){}},{key:"handlerSessionCreatedEvent",value:function(e){var t=this;console.log("SESSION CREATED EVENT",e),e.on("streamCreated",(function(e){console.log("stream created!!!")})),e.on("streamDestroyed",(function(e){})),e.on("sessionDisconnected",(function(e){t.session=!1,t.tokens=[]}))}},{key:"handlerPublisherCreatedEvent",value:function(e){e.on("streamCreated",(function(e){console.log("Publisher streamCreated",e)}))}},{key:"handlerErrorEvent",value:function(e){console.log("error",e)}},{key:"myMethod",value:function(){this.ovLocalUsers=this.ovSessionComponent.getLocalUsers(),this.ovLayout=this.ovSessionComponent.getOpenviduLayout(),this.ovLayoutOptions=this.ovSessionComponent.getOpenviduLayoutOptions()}},{key:"ngOnDestroy",value:function(){this.leaveSession()}}]),e}()).\u0275fac=function(e){return new(e||be)(g.Qb(a.f),g.Qb(Q),g.Qb(v.b),g.Qb(g.l))},be.\u0275cmp=g.Kb({type:be,selectors:[["app-video-library"]],viewQuery:function(e,t){var n;1&e&&g.Rc(fe,!0),2&e&&g.wc(n=g.fc())&&(t.ovSessionComponent=n.first)},decls:2,vars:2,consts:[["id","join",4,"ngIf"],["id","session",4,"ngIf"],["id","join"],["id","join-dialog"],[1,"form-group",3,"formGroup"],["id","userName","formControlName","mySessionId","required","",1,"form-control"],["id","sessionId","formControlName","myUserName","required","",1,"form-control"],[1,"text-center"],["type","button",1,"btn","btn-lg","btn-success","join-session-btn",3,"click"],["id","session"],[3,"sessionName","user","tokens","sessionCreated","publisherCreated","error"],["ovSessionComponent",""]],template:function(e,t){1&e&&(g.Kc(0,me,16,1,"div",0),g.Kc(1,ve,3,3,"div",1)),2&e&&(g.pc("ngIf",!t.session),g.Cb(1),g.pc("ngIf",t.session))},directives:[i.t,a.I,a.t,a.k,a.c,a.s,a.i,a.D,pe.OpenviduSessionComponent],styles:["#join[_ngcontent-%COMP%]{text-align:center}#join[_ngcontent-%COMP%], #session[_ngcontent-%COMP%]{position:absolute;margin:auto;top:100px;bottom:0;left:0;right:0;height:70%;width:45%}"]}),be),Ce=n("kmnG"),Oe=n("d3UM"),Se=n("NFeN"),Me=n("FKr1"),_e=n("t9lf");function xe(e,t){1&e&&(g.Wb(0,"div",5),g.Rb(1,"mat-spinner",6),g.Wb(2,"strong"),g.Mc(3,"Loading devices info"),g.Vb(),g.Vb()),2&e&&(g.Cb(1),g.pc("diameter",20))}function ke(e,t){if(1&e&&(g.Wb(0,"mat-option",20),g.Mc(1),g.Vb()),2&e){var n=t.$implicit;g.pc("value",n.label),g.Cb(1),g.Oc(" ",n.label," ")}}var Pe=function(){return{kind:"videoinput"}};function we(e,t){if(1&e){var n=g.Xb();g.Wb(0,"div",15),g.Wb(1,"span",14),g.Mc(2,"videocam"),g.Vb(),g.Wb(3,"mat-form-field",16),g.Wb(4,"mat-select",17),g.Kc(5,ke,2,2,"mat-option",18),g.jc(6,"filterDevices"),g.Vb(),g.Vb(),g.Wb(7,"mat-icon",19),g.ec("click",(function(){return g.Bc(n),g.ic(2).getConnectedDevices()})),g.Mc(8,"refresh"),g.Vb(),g.Vb()}if(2&e){var i=g.ic(2);g.Cb(5),g.pc("ngForOf",g.lc(6,1,i.userMediaDevices,g.sc(4,Pe)))}}function Ee(e,t){if(1&e){var n=g.Xb();g.Wb(0,"div",21),g.Wb(1,"mat-icon"),g.Mc(2,"videocam_off"),g.Vb(),g.Ub(3),g.Wb(4,"span"),g.Mc(5,"Can't find camera. Make sure it's connected and try again"),g.Vb(),g.Wb(6,"mat-icon",19),g.ec("click",(function(){return g.Bc(n),g.ic(2).getConnectedDevices()})),g.Mc(7,"refresh"),g.Vb(),g.Tb(),g.Vb()}}function Ie(e,t){if(1&e&&(g.Wb(0,"mat-option",20),g.Mc(1),g.Vb()),2&e){var n=t.$implicit;g.pc("value",n.label),g.Cb(1),g.Oc(" ",n.label," ")}}var Te=function(){return{kind:"audioinput"}};function Ae(e,t){if(1&e){var n=g.Xb();g.Wb(0,"div",15),g.Wb(1,"span",14),g.Mc(2,"mic"),g.Vb(),g.Wb(3,"mat-form-field",16),g.Wb(4,"mat-select",22),g.Kc(5,Ie,2,2,"mat-option",18),g.jc(6,"filterDevices"),g.Vb(),g.Vb(),g.Wb(7,"mat-icon",19),g.ec("click",(function(){return g.Bc(n),g.ic(2).getConnectedDevices()})),g.Mc(8,"refresh"),g.Vb(),g.Vb()}if(2&e){var i=g.ic(2);g.Cb(5),g.pc("ngForOf",g.lc(6,1,i.userMediaDevices,g.sc(4,Te)))}}function Re(e,t){if(1&e){var n=g.Xb();g.Wb(0,"div",21),g.Wb(1,"mat-icon"),g.Mc(2,"mic"),g.Vb(),g.Wb(3,"span"),g.Mc(4,"Can't find microphone. Make sure it's connected and try again"),g.Vb(),g.Wb(5,"mat-icon",19),g.ec("click",(function(){return g.Bc(n),g.ic(2).getConnectedDevices()})),g.Mc(6,"refresh"),g.Vb(),g.Vb()}}function Ve(e,t){if(1&e){var n=g.Xb();g.Wb(0,"form",7),g.Wb(1,"div",8),g.Wb(2,"div",9),g.Wb(3,"div",10),g.Kc(4,we,9,5,"div",11),g.Kc(5,Ee,8,0,"div",12),g.Vb(),g.Wb(6,"div",10),g.Kc(7,Ae,9,5,"div",11),g.Kc(8,Re,7,0,"div",12),g.Vb(),g.Vb(),g.Vb(),g.Wb(9,"button",13),g.ec("click",(function(){return g.Bc(n),g.ic().startLiveVideo()})),g.Wb(10,"span",14),g.Mc(11," video_call "),g.Vb(),g.Wb(12,"span"),g.Mc(13,"Start live video"),g.Vb(),g.Vb(),g.Vb()}if(2&e){var i=g.ic();g.pc("formGroup",i.deviceRecognitionForm),g.Cb(4),g.pc("ngIf",!i.videoDevice.hasError("required")),g.Cb(1),g.pc("ngIf",i.videoDevice.hasError("required")),g.Cb(2),g.pc("ngIf",!i.audioDevice.hasError("required")),g.Cb(1),g.pc("ngIf",i.audioDevice.hasError("required")),g.Cb(1),g.pc("disabled",!i.deviceRecognitionForm.valid)}}var Le,Ne=((Le=function(){function e(t,n,i,o){_classCallCheck(this,e),this.toastr=t,this.fb=n,this._userInfoService=i,this.router=o,this.deviceStatus="idle",this.checked=new g.o,this._getAuthInfo()}return _createClass(e,[{key:"ngOnInit",value:function(){this.initForm()}},{key:"_getAuthInfo",value:function(){var e=this;this._userInfoService._userInfo.subscribe((function(t){e.authUser=t,console.log(e.authUser,"Check streaming requirements  AUTHUSER DATA")}))}},{key:"initForm",value:function(){this.deviceRecognitionForm=this.fb.group({video_device:["",a.G.required],audio_device:["",a.G.required]})}},{key:"startLiveVideo",value:function(){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.checked.emit(!0);case 1:case"end":return e.stop()}}),e,this)})))}},{key:"ngAfterViewInit",value:function(){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getConnectedDevices(!0);case 2:case"end":return e.stop()}}),e,this)})))}},{key:"getConnectedDevices",value:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0],Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then((function(){t.deviceStatus="loading",navigator.mediaDevices.enumerateDevices().then((function(e){var n,i;t.deviceStatus="loaded",t.userMediaDevices=e,t.defaultVideoDevice=e.find((function(e){return"videoinput"===e.kind})),t.deviceRecognitionForm.patchValue({video_device:null===(n=t.defaultVideoDevice)||void 0===n?void 0:n.label}),t.defaultAudioDevice=e.find((function(e){return"audioinput"===e.kind})),t.deviceRecognitionForm.patchValue({audio_device:null===(i=t.defaultAudioDevice)||void 0===i?void 0:i.label})})).catch((function(e){t.deviceRecognitionForm.patchValue({audio_device:"",video_device:""}),t.toastr.error(e.message)}))})).catch((function(e){console.log(e),t.deviceStatus="failed",t.deviceRecognitionForm.patchValue({audio_device:"",video_device:""}),console.log(t.deviceRecognitionForm.value),t.toastr.error(e.message)}));case 1:case"end":return e.stop()}}),e)})))}},{key:"audioDevice",get:function(){return this.deviceRecognitionForm.get("audio_device")}},{key:"videoDevice",get:function(){return this.deviceRecognitionForm.get("video_device")}}]),e}()).\u0275fac=function(e){return new(e||Le)(g.Qb(v.b),g.Qb(a.f),g.Qb(m.a),g.Qb(o.e))},Le.\u0275cmp=g.Kb({type:Le,selectors:[["app-check-requirements"]],outputs:{checked:"checked"},decls:13,vars:2,consts:[[1,"start-live-video-page"],[1,"text"],["href","https://www.copyright.gov/dmca-directory/","target","_blank"],["class","loader",4,"ngIf"],[3,"formGroup",4,"ngIf"],[1,"loader"],[3,"diameter"],[3,"formGroup"],["id","devices"],[1,"item-wrap"],[1,"item"],["class","info border",4,"ngIf"],["class","error-msg",4,"ngIf"],["type","button",1,"btn",3,"disabled","click"],[1,"material-icons"],[1,"info","border"],[2,"width","88%"],["formControlName","video_device"],[3,"value",4,"ngFor","ngForOf"],[1,"refresh",3,"click"],[3,"value"],[1,"error-msg"],["formControlName","audio_device"]],template:function(e,t){1&e&&(g.Wb(0,"div",0),g.Wb(1,"div",1),g.Wb(2,"h1"),g.Mc(3,"Start live video"),g.Vb(),g.Wb(4,"p"),g.Mc(5,"Start sharing your story and connecting with viewers. Get your webcam ready, check your lighting, and click below to go live! We ask that you keep in mind of the "),g.Wb(6,"a",2),g.Mc(7,"DMCA rules"),g.Vb(),g.Mc(8," and please do not play any music that is not owned by you while you stream. We will remove any videos that are in violation of the DMCA. "),g.Rb(9,"br"),g.Mc(10," Smile, you look great! "),g.Vb(),g.Kc(11,xe,4,1,"div",3),g.Kc(12,Ve,14,6,"form",4),g.Vb(),g.Vb()),2&e&&(g.Cb(11),g.pc("ngIf","loaded"!==t.deviceStatus&&"failed"!==t.deviceStatus),g.Cb(1),g.pc("ngIf","loaded"===t.deviceStatus||"failed"===t.deviceStatus))},directives:[i.t,O.c,a.I,a.t,a.k,Ce.c,Oe.a,a.s,a.i,i.s,Se.a,Me.n],pipes:[_e.a],styles:[".start-live-video-page[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;max-width:810px;margin:160px auto 0;padding:144px 0 80px 280px;background-size:contain;background-position:0 0;background-repeat:no-repeat;background-image:url(/assets/img/live-video.png)}.start-live-video-page[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{max-width:532px}.start-live-video-page[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;color:#18b587}.start-live-video-page[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:16px;margin-bottom:0;font-size:16px;color:#545454}.start-live-video-page[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]{display:flex;padding:10px;align-items:center;justify-content:center}.start-live-video-page[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{margin-left:10px;color:#18b587}.start-live-video-page[_ngcontent-%COMP%]   .refresh[_ngcontent-%COMP%]{cursor:pointer}.start-live-video-page[_ngcontent-%COMP%]   .item-wrap[_ngcontent-%COMP%]{margin-top:16px}.start-live-video-page[_ngcontent-%COMP%]   .item-wrap[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{margin-bottom:8px}.start-live-video-page[_ngcontent-%COMP%]   .item-wrap[_ngcontent-%COMP%]   .item.d-flex[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-right:40px}.start-live-video-page[_ngcontent-%COMP%]   .item-wrap[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;justify-content:space-between;color:#18b587;font-size:14px;margin-bottom:2px}.start-live-video-page[_ngcontent-%COMP%]   .item-wrap[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .edit[_ngcontent-%COMP%]{font-size:16px;color:#545454;cursor:pointer}.start-live-video-page[_ngcontent-%COMP%]   .item-wrap[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .edit[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:20px;margin-left:4px}.start-live-video-page[_ngcontent-%COMP%]   .item-wrap[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;align-items:center}.start-live-video-page[_ngcontent-%COMP%]   .item-wrap[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info.border[_ngcontent-%COMP%]{border:0!important}.start-live-video-page[_ngcontent-%COMP%]   .item-wrap[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info.border[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:not(.material-icons){border-bottom:.5px solid #dcdcdc}.start-live-video-page[_ngcontent-%COMP%]   .item-wrap[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:not(.material-icons){flex:1}.start-live-video-page[_ngcontent-%COMP%]   .item-wrap[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{margin-right:8px}.start-live-video-page[_ngcontent-%COMP%]   .item-wrap[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{color:#545454;font-weight:600;font-size:16px}.start-live-video-page[_ngcontent-%COMP%]   .item-wrap[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:20px}.start-live-video-page[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-top:24px;padding:8px 32px;display:flex;align-items:center;background:#f53c6f;font-size:16px;color:#fff;border-radius:0;transition:.3s ease-in-out}.start-live-video-page[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:8px}.start-live-video-page[_ngcontent-%COMP%]   .error-msg[_ngcontent-%COMP%]{display:flex}"]}),Le),De=n("FtGj"),je=n("fFb+"),Ue=n("A5z7"),We=n("qFsG"),Be=n("/1cH"),Fe=n("QibW"),ze=["chipsInput"],Ge=["tagList"];function Qe(e,t){1&e&&(g.Wb(0,"mat-error"),g.Mc(1,"The stream name is required"),g.Vb())}function Ke(e,t){if(1&e){var n=g.Xb();g.Wb(0,"mat-chip",28),g.ec("removed",(function(){g.Bc(n);var e=t.$implicit;return g.ic().remove(e)})),g.Mc(1),g.Wb(2,"mat-icon",29),g.Mc(3,"cancel"),g.Vb(),g.Vb()}if(2&e){var i=t.$implicit;g.Cb(1),g.Oc(" ",i.name," ")}}function He(e,t){if(1&e&&(g.Wb(0,"mat-option",31),g.Mc(1),g.Vb()),2&e){var n=t.$implicit;g.pc("value",n),g.Cb(1),g.Oc(" ",null==n?null:n.tag_details.name," ")}}function qe(e,t){if(1&e&&(g.Wb(0,"mat-optgroup",30),g.Kc(1,He,2,2,"mat-option",19),g.Vb()),2&e){var n=t.$implicit;g.pc("label",n.name),g.Cb(1),g.pc("ngForOf",n.values)}}function Ye(e,t){1&e&&(g.Wb(0,"mat-error"),g.Mc(1,"Please provide some tags describing your live video "),g.Vb())}function Ze(e,t){1&e&&(g.Wb(0,"mat-error"),g.Mc(1,"Only 3 tags please"),g.Vb())}function Je(e,t){if(1&e){var n=g.Xb();g.Wb(0,"mat-autocomplete",11,12),g.ec("optionSelected",(function(e){return g.Bc(n),g.ic().autocompleteSelect(e)})),g.Wb(2,"mat-option"),g.Mc(3," OK "),g.Vb(),g.Vb()}}function Xe(e,t){if(1&e&&(g.Wb(0,"option",31),g.Mc(1),g.Vb()),2&e){var n=t.$implicit;g.pc("value",n.id),g.Cb(1),g.Nc(n.name)}}function $e(e,t){1&e&&(g.Wb(0,"mat-error"),g.Mc(1," The stream category is required "),g.Vb())}function et(e,t){1&e&&(g.Wb(0,"mat-error"),g.Mc(1," The stream description is required "),g.Vb())}function tt(e,t){if(1&e&&(g.Wb(0,"mat-radio-button",31),g.Mc(1),g.Wb(2,"mat-icon"),g.Mc(3),g.Vb(),g.Vb()),2&e){var n=t.$implicit;g.pc("value",n.name),g.Cb(1),g.Oc(" ",n.name," "),g.Cb(2),g.Nc(n.icon)}}function nt(e,t){1&e&&g.Rb(0,"mat-spinner",35),2&e&&g.pc("diameter",15)}function it(e,t){1&e&&(g.Wb(0,"mat-error"),g.Mc(1," The thumbnail is required "),g.Vb())}function ot(e,t){if(1&e){var n=g.Xb();g.Ub(0),g.Wb(1,"label",32),g.ec("click",(function(){return g.Bc(n),g.ic().uploadImg()})),g.Wb(2,"span",33),g.Mc(3,"backup"),g.Vb(),g.Mc(4," Upload Thumbnail "),g.Vb(),g.Kc(5,nt,1,1,"mat-spinner",34),g.Kc(6,it,2,0,"mat-error",4),g.Tb()}if(2&e){var i=g.ic();g.Cb(5),g.pc("ngIf",i.loader.fileProcessing),g.Cb(1),g.pc("ngIf",i.startStreamingForm.get("thumbnail").hasError("required")&&i.isSubmitted)}}function rt(e,t){if(1&e){var n=g.Xb();g.Wb(0,"div",36),g.Wb(1,"mat-icon",37),g.ec("click",(function(){g.Bc(n);var e=g.ic();return e.removeUploadedThumbnail(e.thumbnailImage)})),g.Mc(2,"clear "),g.Vb(),g.Rb(3,"img",38),g.Vb()}if(2&e){var i=g.ic();g.Cb(3),g.qc("src",i.apiUrl+"uploads/images/"+i.imageName,g.Ec)}}var at,st=((at=function(){function e(t,n,i,o,r,a,s){_classCallCheck(this,e),this.videoService=t,this.toastr=n,this.fb=i,this.loader=o,this.dialog=r,this.uploadFile=a,this._userInfoService=s,this.isSubmitted=!1,this.thumbnailUploading=!1,this.thumbnailUploaded=!1,this.apiUrl=F.c,this.tags=[],this.sessionName="SessionA",this.separatorKeysCodes=[De.g,De.c],this.privacyTypes=[{name:"Public",icon:"public"},{name:"Private",icon:"lock"}],this.savedTags=[],this.count=0,this.limit=F.j,this.formReady=new g.o,this._getAuthInfo()}return _createClass(e,[{key:"ngOnInit",value:function(){this.selectedPrivacy=this.privacyTypes[0],this.initForm(),this.getVideoCategories()}},{key:"_getAuthInfo",value:function(){var e=this;this._userInfoService._userInfo.subscribe((function(t){e.authUser=t,console.log(e.authUser,"Collect steaming details  AUTHUSER DATA")}))}},{key:"initForm",value:function(){this.startStreamingForm=this.fb.group({name:["",a.G.required],description:["",[a.G.required,a.G.maxLength(this.limit)]],category_id:["",a.G.required],tags:[[],a.G.required],sessionName:[this.sessionName],myUserName:[this.authUser.username],thumbnail:["",a.G.required],privacy:["Public"],status:["live"]})}},{key:"getVideoCategories",value:function(){var e=this;this.videoService.getVideoCategories().subscribe((function(t){e.videoCategories=t}))}},{key:"getVideoTags",value:function(){var e=this;this.videoService.getVideoTags().subscribe((function(t){e.savedTags=t}))}},{key:"changedPrivacy",value:function(e){this.selectedPrivacy=this.privacyTypes.find((function(t){return t.name===e.value}))}},{key:"autocompleteSelect",value:function(e){console.log(e)}},{key:"add",value:function(e){console.log("add");var t=e.input;if(this.tags.length<3){var n=e.value;(n||"").trim()&&(this.tags.push({name:n.trim()}),this.startStreamingForm.patchValue({tags:this.tags}))}t&&(t.value="")}},{key:"resetValue",value:function(e){e.target.value&&this.tags.length>=3&&(e.target.value="")}},{key:"remove",value:function(e){var t=this.tags.indexOf(e);t>=0&&(this.tags.splice(t,1),this.startStreamingForm.patchValue({tags:this.tags}))}},{key:"uploadImg",value:function(){var e=this;this.dialog.open(je.a,{maxWidth:"591px",maxHeight:"479px",height:"100%",width:"100%",data:{countUploadFile:"oneFile",type:"image"}}).afterClosed().subscribe((function(t){if(t){if(e.thumbnailUploading=!0,e.loader.fileProcessing=!0,"string"==typeof t)return e.thumbnailUploading=!1,e.loader.fileProcessing=!1,e.toastr.error(t);if(!t[0].type.includes("image"))return e.thumbnailUploading=!1,e.loader.fileProcessing=!1,e.toastr.error(t);var n=new FormData;t.forEach((function(e){n.append("image",e.file),n.append("belonging","thumbnail_image"),n.append("duration","")})),e.uploadFile.uploadFile(n,"image").subscribe((function(t){e.thumbnailImage=t.path,e.imageName=t.path,e.startStreamingForm.patchValue({thumbnail:e.imageName}),e.toastr.success(t.message),e.thumbnailUploading=!1,e.loader.fileProcessing=!1,e.thumbnailUploaded=!0}))}}))}},{key:"getThumbnailFile",value:function(e){}},{key:"removeUploadedThumbnail",value:function(e){var t=this;console.log(e),this.videoService.deleteFile(e,"image").subscribe((function(e){t.thumbnailImage="",t.toastr.success("The thumbnail has been removed successfully"),t.thumbnailUploaded=!1,t.startStreamingForm.patchValue({thumbnail:""})}))}},{key:"submit",value:function(){var e,t=this;this.isSubmitted=!0,this.startStreamingForm.valid&&this.tags.length<=3&&this.formReady.emit(Object.assign({categoryName:null===(e=this.videoCategories.find((function(e){return e.id===+t.startStreamingForm.value.category_id})))||void 0===e?void 0:e.name},this.startStreamingForm.value))}},{key:"resetTextArea",value:function(e){e.target.value.length>this.limit&&(e.target.value=e.target.value.slice(0,this.limit),this.startStreamingForm.value.description=e.target.value),this.count=e.target.value.length}},{key:"autoCompleteTagsSelected",value:function(e){this.tags.length<3&&(this.tags.push({name:e.option.viewValue}),this.startStreamingForm.patchValue({tags:this.tags}))}},{key:"streamName",get:function(){return this.startStreamingForm.get("name")}},{key:"streamDesc",get:function(){return this.startStreamingForm.get("description")}},{key:"streamCategory",get:function(){return this.startStreamingForm.get("category_id")}},{key:"streamTags",get:function(){return this.startStreamingForm.get("tags")}}]),e}()).\u0275fac=function(e){return new(e||at)(g.Qb(C.a),g.Qb(v.b),g.Qb(a.f),g.Qb(h.a),g.Qb(y.b),g.Qb(C.a),g.Qb(m.a))},at.\u0275cmp=g.Kb({type:at,selectors:[["app-stream-details-form"]],viewQuery:function(e,t){var n;1&e&&(g.Rc(ze,!0),g.Rc(Ge,!0)),2&e&&(g.wc(n=g.fc())&&(t.chipsInput=n.first),g.wc(n=g.fc())&&(t.tagList=n.first))},outputs:{formReady:"formReady"},decls:40,vars:19,consts:[["id","start-streaming-form",3,"formGroup"],[1,"start-live-video"],["id","video-name"],["formControlName","name","placeholder","Video name",1,"liveVideo"],[4,"ngIf"],["id","video-tags"],["aria-label","Fruit selection","formControlName","tags"],["tagList",""],[3,"removed",4,"ngFor","ngForOf"],["type","text","placeholder","Tags...","matInput","","maxlength","10",1,"liveVideo",3,"matChipInputFor","matChipInputSeparatorKeyCodes","matAutocomplete","input","matChipInputTokenEnd"],["chipsInput",""],[3,"optionSelected"],["auto","matAutocomplete"],[3,"label",4,"ngFor","ngForOf"],["align","end"],[3,"optionSelected",4,"ngIf"],["id","video-categories"],["formControlName","category_id",1,"liveVideo"],["selected","","disabled","",3,"value"],[3,"value",4,"ngFor","ngForOf"],["id","video-description"],["formControlName","description","placeholder","Video description",3,"input"],["id","privacy"],["formControlName","privacy",3,"change"],["id","thumbnail"],["id","uploaded-thumbnail-container",4,"ngIf"],[1,"actions"],["type","button",1,"btn","btn-lg","btn-success","join-session-btn",3,"click"],[3,"removed"],["matChipRemove",""],[3,"label"],[3,"value"],["for","custom-thumbnail",3,"click"],[1,"material-icons"],[3,"diameter",4,"ngIf"],[3,"diameter"],["id","uploaded-thumbnail-container"],["id","remove-thumbnail",3,"click"],["id","uploaded-thumbnail",3,"src"]],template:function(e,t){if(1&e&&(g.Wb(0,"form",0),g.Wb(1,"div",1),g.Wb(2,"div",2),g.Rb(3,"input",3),g.Kc(4,Qe,2,0,"mat-error",4),g.Vb(),g.Wb(5,"div",5),g.Wb(6,"mat-form-field"),g.Wb(7,"mat-chip-list",6,7),g.Kc(9,Ke,4,1,"mat-chip",8),g.Wb(10,"input",9,10),g.ec("input",(function(e){return t.resetValue(e)}))("matChipInputTokenEnd",(function(e){return t.add(e)})),g.Vb(),g.Vb(),g.Wb(12,"mat-autocomplete",11,12),g.ec("optionSelected",(function(e){return t.autoCompleteTagsSelected(e)})),g.Kc(14,qe,2,2,"mat-optgroup",13),g.Vb(),g.Wb(15,"mat-hint",14),g.Mc(16,"Please press 'Enter' after the tag name and write not more than 3 tags"),g.Vb(),g.Vb(),g.Kc(17,Ye,2,0,"mat-error",4),g.Kc(18,Ze,2,0,"mat-error",4),g.Vb(),g.Kc(19,Je,4,0,"mat-autocomplete",15),g.Wb(20,"div",16),g.Wb(21,"select",17),g.Wb(22,"option",18),g.Mc(23,"Category"),g.Vb(),g.Kc(24,Xe,2,2,"option",19),g.Vb(),g.Kc(25,$e,2,0,"mat-error",4),g.Vb(),g.Wb(26,"div",20),g.Wb(27,"textarea",21),g.ec("input",(function(e){return t.resetTextArea(e)})),g.Vb(),g.Kc(28,et,2,0,"mat-error",4),g.Wb(29,"p"),g.Mc(30),g.Vb(),g.Vb(),g.Wb(31,"div",22),g.Wb(32,"mat-radio-group",23),g.ec("change",(function(e){return t.changedPrivacy(e)})),g.Kc(33,tt,4,3,"mat-radio-button",19),g.Vb(),g.Vb(),g.Wb(34,"div",24),g.Kc(35,ot,7,2,"ng-container",4),g.Kc(36,rt,4,1,"div",25),g.Vb(),g.Wb(37,"div",26),g.Wb(38,"button",27),g.ec("click",(function(){return t.submit()})),g.Mc(39," Start live video "),g.Vb(),g.Vb(),g.Vb(),g.Vb()),2&e){var n=g.xc(8),i=g.xc(13);g.pc("formGroup",t.startStreamingForm),g.Cb(4),g.pc("ngIf",t.streamName.hasError("required")&&t.isSubmitted),g.Cb(5),g.pc("ngForOf",t.tags),g.Cb(1),g.pc("matChipInputFor",n)("matChipInputSeparatorKeyCodes",t.separatorKeysCodes)("matAutocomplete",i),g.Cb(4),g.pc("ngForOf",t.savedTags),g.Cb(3),g.pc("ngIf",0===t.tags.length&&t.isSubmitted),g.Cb(1),g.pc("ngIf",t.tags.length>3&&t.isSubmitted),g.Cb(1),g.pc("ngIf",t.savedTags.length>0),g.Cb(3),g.pc("value",""),g.Cb(2),g.pc("ngForOf",t.videoCategories),g.Cb(1),g.pc("ngIf",t.streamCategory.hasError("required")&&t.isSubmitted),g.Cb(3),g.pc("ngIf",t.streamDesc.hasError("required")&&t.isSubmitted),g.Cb(2),g.Pc(" Max length symbols ",t.count," / ",t.limit," "),g.Cb(3),g.pc("ngForOf",t.privacyTypes),g.Cb(2),g.pc("ngIf",!t.thumbnailUploaded),g.Cb(1),g.pc("ngIf",t.thumbnailUploaded)}},directives:[a.I,a.t,a.k,a.c,a.s,a.i,i.t,Ce.c,Ue.d,i.s,We.b,Ue.c,Be.d,Be.a,Ce.f,a.E,a.x,a.H,Fe.b,Ce.b,Ue.a,Se.a,Ue.e,Me.m,Me.n,Fe.a,O.c],styles:[".start-live-video[_ngcontent-%COMP%]{width:100%;max-width:548px;margin:64px auto 0}#start-streaming-form[_ngcontent-%COMP%]{font-family:Muli-Regular}#start-streaming-form[_ngcontent-%COMP%]   #video-tags[_ngcontent-%COMP%]{margin-top:24px}#start-streaming-form[_ngcontent-%COMP%]   #video-name[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:18px;margin-top:24px;width:100%;height:51px;background:#fff 0 0 no-repeat padding-box;box-shadow:0 0 6px #eee;color:#8c8888;padding-left:5px;border:2px solid #8c8888}#start-streaming-form[_ngcontent-%COMP%]   #privacy[_ngcontent-%COMP%], #start-streaming-form[_ngcontent-%COMP%]   #video-categories[_ngcontent-%COMP%]{margin-top:24px}#start-streaming-form[_ngcontent-%COMP%]   #privacy[_ngcontent-%COMP%]   .liveVideo[_ngcontent-%COMP%], #start-streaming-form[_ngcontent-%COMP%]   #video-categories[_ngcontent-%COMP%]   .liveVideo[_ngcontent-%COMP%]{font-size:18px;padding-left:5px}#start-streaming-form[_ngcontent-%COMP%]   #privacy[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], #start-streaming-form[_ngcontent-%COMP%]   #video-categories[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;height:51px;background:#fff 0 0 no-repeat padding-box;box-shadow:0 0 6px #eee;padding-left:5px;border:2px solid #8c8888;font:normal normal normal 16px/20px Muli-Regular;color:#8c8888;outline:none}#start-streaming-form[_ngcontent-%COMP%]   #privacy[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]:disabled, #start-streaming-form[_ngcontent-%COMP%]   #video-categories[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]:disabled{color:silver}#start-streaming-form[_ngcontent-%COMP%]   #video-description[_ngcontent-%COMP%]{margin:24px 0}#start-streaming-form[_ngcontent-%COMP%]   #video-description[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{font-size:18px;padding-left:5px;border:2px solid #8c8888;width:100%;height:151px;background:#fff 0 0 no-repeat padding-box;box-shadow:0 0 6px #eee;opacity:1;outline:none;resize:none}#start-streaming-form[_ngcontent-%COMP%]   label[for=custom-thumbnail][_ngcontent-%COMP%]{margin:0;font-size:18px;padding:12px 16px;background:#eee 0 0 no-repeat padding-box;font:normal normal normal 18px/19px Muli-Regular;color:#8c8888;cursor:pointer}#start-streaming-form[_ngcontent-%COMP%]   label[for=custom-thumbnail][_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{vertical-align:text-bottom;margin-right:10px}#start-streaming-form[_ngcontent-%COMP%]   #thumbnail[_ngcontent-%COMP%]{display:flex;align-items:center}#start-streaming-form[_ngcontent-%COMP%]   #thumbnail[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin-left:20px}#start-streaming-form[_ngcontent-%COMP%]   #custom-thumbnail[_ngcontent-%COMP%]{display:none}#start-streaming-form[_ngcontent-%COMP%]   #uploaded-thumbnail-container[_ngcontent-%COMP%]{position:relative}#start-streaming-form[_ngcontent-%COMP%]   #uploaded-thumbnail-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{position:absolute;right:0}#start-streaming-form[_ngcontent-%COMP%]   #uploaded-thumbnail-container[_ngcontent-%COMP%]   #uploaded-thumbnail[_ngcontent-%COMP%]{max-width:100%;-o-object-fit:cover;object-fit:cover}#start-streaming-form[_ngcontent-%COMP%]   #uploaded-thumbnail-container[_ngcontent-%COMP%]   #remove-thumbnail[_ngcontent-%COMP%]{color:#545454;cursor:pointer}#start-streaming-form[_ngcontent-%COMP%]   #video-tags[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;font-size:18px}#start-streaming-form[_ngcontent-%COMP%]   #video-tags[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]   .liveVideo[_ngcontent-%COMP%]{font-size:18px}#start-streaming-form[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{margin-bottom:8px}#start-streaming-form[_ngcontent-%COMP%]   .item.d-flex[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-right:40px}#start-streaming-form[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;justify-content:space-between;color:#18b587;font-size:14px;margin-bottom:2px}#start-streaming-form[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .edit[_ngcontent-%COMP%]{font-size:16px;color:#545454;cursor:pointer}#start-streaming-form[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .edit[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:20px;margin-left:4px}#start-streaming-form[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;align-items:center}#start-streaming-form[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info.border[_ngcontent-%COMP%]{border:0!important}#start-streaming-form[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info.border[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:not(.material-icons){border-bottom:.5px solid #dcdcdc}#start-streaming-form[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:not(.material-icons){flex:1}#start-streaming-form[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{margin-right:8px}#start-streaming-form[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{color:#545454;font-weight:600;font-size:16px}#start-streaming-form[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:20px}#start-streaming-form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-top:32px;border:0;border-radius:0;padding:8px 32px;background:#f53c6f;box-shadow:0 0 6px rgba(0,109,204,.18);font-family:Muli-Light;font-size:16px;color:#fff}"]}),at);function ct(e,t){if(1&e){var n=g.Xb();g.Wb(0,"app-check-requirements",2),g.ec("checked",(function(){return g.Bc(n),g.ic().requirementsChecked=!0})),g.Vb()}}function lt(e,t){if(1&e){var n=g.Xb();g.Wb(0,"app-stream-details-form",3),g.ec("formReady",(function(e){return g.Bc(n),g.ic().getPublisherData(e)})),g.Vb()}}var ut,dt=((ut=function(){function e(t,n){_classCallCheck(this,e),this.subject=t,this.router=n,this.sessionData={sessionName:"",myUserName:""},this.requirementsChecked=!1}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"getPublisherData",value:function(e){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.sessionData={sessionName:e.sessionName,myUserName:e.myUserName},this.videoSettings=e,this.subject.setSessionData(this.sessionData),localStorage.setItem("session",JSON.stringify(this.sessionData)),localStorage.setItem("video_settings",JSON.stringify(this.videoSettings)),t.next=7,this.router.navigate(["users/video/publish"]);case 7:case"end":return t.stop()}}),t,this)})))}}]),e}()).\u0275fac=function(e){return new(e||ut)(g.Qb(K.a),g.Qb(o.e))},ut.\u0275cmp=g.Kb({type:ut,selectors:[["app-publisher-flow"]],decls:2,vars:2,consts:[[3,"checked",4,"ngIf"],[3,"formReady",4,"ngIf"],[3,"checked"],[3,"formReady"]],template:function(e,t){1&e&&(g.Kc(0,ct,1,0,"app-check-requirements",0),g.Kc(1,lt,1,0,"app-stream-details-form",1)),2&e&&(g.pc("ngIf",!t.requirementsChecked),g.Cb(1),g.pc("ngIf",t.requirementsChecked))},directives:[i.t,Ne,st],styles:[""]}),ut),gt=["videoElement"];function ht(e,t){1&e&&(g.Wb(0,"div",3),g.Wb(1,"h2"),g.Mc(2,"Live video ended"),g.Vb(),g.Vb())}var pt,ft,mt=((ft=function(){function e(t){_classCallCheck(this,e),this.subject=t,this.videoJSPlayerOptions={width:640,height:480,autoplay:!0,controls:!0,fluid:!1,sources:[]}}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.subject.getVideoRecordingState().subscribe((function(t){if(console.log("STATE!!!!"+t.recordingState),e.recordingState=t.recordingState,"finished"===e.recordingState){var n=document.getElementById("live-video");console.log(n)}}))}},{key:"ngAfterViewInit",value:function(){this._streamManager.addVideoElement(this.elementRef.nativeElement);var e=document.getElementById("live-video");console.log(e),e.setAttribute("controls","controls"),e.controls=!0}},{key:"streamManager",set:function(e){this._streamManager=e,this.elementRef&&this._streamManager.addVideoElement(this.elementRef.nativeElement)}}]),e}()).\u0275fac=function(e){return new(e||ft)(g.Qb(K.a))},ft.\u0275cmp=g.Kb({type:ft,selectors:[["app-ov-video"]],viewQuery:function(e,t){var n;1&e&&g.Rc(gt,!0),2&e&&g.wc(n=g.fc())&&(t.elementRef=n.first)},inputs:{streamManager:"streamManager"},decls:3,vars:1,consts:[["controls","","muted","","id","live-video","width","640","height","480"],["videoElement",""],["id","live-session-finished",4,"ngIf"],["id","live-session-finished"]],template:function(e,t){1&e&&(g.Rb(0,"video",0,1),g.Kc(2,ht,3,0,"div",2)),2&e&&(g.Cb(2),g.pc("ngIf","finished"===t.recordingState))},directives:[i.t],styles:["#live-session-finished[_ngcontent-%COMP%]{position:absolute;top:-3px;left:15px;width:640px;height:100%;color:#fff;-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px);display:flex;align-items:center;justify-content:center}"]}),ft),vt=((pt=function(){function e(t){_classCallCheck(this,e),this.toastr=t}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"getNicknameTag",value:function(){return JSON.parse(this.streamManager.stream.connection.data.replace(/}%\/%{/g,",")).clientData.myUserName}}]),e}()).\u0275fac=function(e){return new(e||pt)(g.Qb(v.b))},pt.\u0275cmp=g.Kb({type:pt,selectors:[["app-user-video"]],inputs:{streamManager:"streamManager"},decls:2,vars:1,consts:[[3,"streamManager"]],template:function(e,t){1&e&&(g.Wb(0,"div"),g.Rb(1,"app-ov-video",0),g.Vb()),2&e&&(g.Cb(1),g.pc("streamManager",t.streamManager))},directives:[mt],styles:["ov-video[_ngcontent-%COMP%]{width:100%;height:auto;float:left;cursor:pointer}div[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;background:#f8f8f8;padding-left:5px;padding-right:5px;color:#777;font-weight:700;border-bottom-right-radius:4px}p[_ngcontent-%COMP%]{margin:0}"]}),pt);function bt(e,t){1&e&&g.Rb(0,"mat-spinner",4),2&e&&g.pc("diameter",100)}function yt(e,t){if(1&e&&(g.Wb(0,"li",26),g.Mc(1),g.Vb()),2&e){var n=t.$implicit;g.Cb(1),g.Oc(" #",n.name," ")}}function Ct(e,t){if(1&e&&(g.Wb(0,"div",27),g.Wb(1,"span",28),g.Mc(2),g.Vb(),g.Wb(3,"span",29),g.Mc(4,"\xb7"),g.Vb(),g.Wb(5,"span",30),g.Mc(6),g.jc(7,"dateFromNow"),g.Vb(),g.Vb()),2&e){var n=g.ic(5);g.Cb(2),g.Oc("",n.participants.length," watching now"),g.Cb(4),g.Oc("Started streaming ",g.kc(7,2,n.videoSettings.created_at),"")}}function Ot(e,t){1&e&&(g.Wb(0,"span",31),g.Mc(1,"Live"),g.Vb())}function St(e,t){1&e&&(g.Wb(0,"p"),g.Mc(1,"Stream destroyed."),g.Vb())}function Mt(e,t){if(1&e){var n=g.Xb();g.Ub(0),g.Wb(1,"div",10),g.Wb(2,"div",11),g.Wb(3,"div",12),g.Wb(4,"ul",13),g.Kc(5,yt,2,1,"li",14),g.Vb(),g.Wb(6,"div",15),g.Wb(7,"div",16),g.Rb(8,"i",17),g.Wb(9,"span"),g.Mc(10),g.Vb(),g.Vb(),g.Wb(11,"div",18),g.ec("click",(function(){return g.Bc(n),g.ic(4).openSocialShareModal()})),g.Rb(12,"i",19),g.Wb(13,"p"),g.Mc(14,"Share"),g.Vb(),g.Vb(),g.Vb(),g.Vb(),g.Wb(15,"h3"),g.Mc(16),g.Vb(),g.Kc(17,Ct,8,4,"div",20),g.Kc(18,Ot,2,0,"span",21),g.Vb(),g.Vb(),g.Wb(19,"div",22),g.Wb(20,"div"),g.Rb(21,"img",23),g.jc(22,"getImgPath"),g.Vb(),g.Wb(23,"div"),g.Wb(24,"p",24),g.Mc(25),g.Vb(),g.Wb(26,"p",25),g.Mc(27),g.Vb(),g.Vb(),g.Vb(),g.Kc(28,St,2,0,"p",3),g.Tb()}if(2&e){var i=g.ic(4);g.Cb(5),g.pc("ngForOf",i.videoSettings.tags),g.Cb(5),g.Nc(i.participants.length),g.Cb(6),g.Nc(i.videoSettings.name),g.Cb(1),g.pc("ngIf",i.videoId),g.Cb(1),g.pc("ngIf",i.videoId),g.Cb(3),g.pc("src",g.lc(22,9,i.channelInfo.avatar,"images"),g.Ec),g.Cb(4),g.Nc(i.channelInfo.name),g.Cb(2),g.Oc("",i.channelInfo.subscribers_count+" subscriber"+(1===i.channelInfo.subscribers_count?"":"s")," "),g.Cb(1),g.pc("ngIf",i.streamDestroyed)}}function _t(e,t){if(1&e){var n=g.Xb();g.Wb(0,"div",7),g.Wb(1,"div",8),g.Wb(2,"app-user-video",9),g.ec("click",(function(){g.Bc(n);var e=t.$implicit;return g.ic(3).updateMainStreamManager(e)})),g.Vb(),g.Vb(),g.Kc(3,Mt,29,12,"ng-container",3),g.Vb()}if(2&e){var i=t.$implicit,o=g.ic(3);g.Cb(2),g.pc("streamManager",i),g.Cb(1),g.pc("ngIf",o.streamCreated&&o.openViduToken&&o.videoFound)}}function xt(e,t){if(1&e){var n=g.Xb();g.Wb(0,"app-chat-box",32),g.ec("sendMessage",(function(e){return g.Bc(n),g.ic(3).sendMessage(e)})),g.Vb()}if(2&e){var i=g.ic(3);g.pc("openViduToken",i.openViduToken)("session",i.session)("videoRecordingState",i.recordingState)("messages",i.messages)("videoId",i.videoId)}}function kt(e,t){if(1&e&&(g.Ub(0),g.Kc(1,_t,4,2,"div",5),g.Kc(2,xt,1,5,"app-chat-box",6),g.Tb()),2&e){var n=g.ic(2);g.Cb(1),g.pc("ngForOf",n.subscribers),g.Cb(1),g.pc("ngIf",n.videoId)}}function Pt(e,t){1&e&&(g.Wb(0,"p"),g.Mc(1,"Video streaming session is not found."),g.Vb())}function wt(e,t){1&e&&(g.Ub(0),g.Wb(1,"p"),g.Mc(2,"The session does not exist."),g.Vb(),g.Tb())}function Et(e,t){1&e&&(g.Ub(0),g.Wb(1,"p"),g.Mc(2,"There was a problem creating the video stream."),g.Vb(),g.Tb())}function It(e,t){if(1&e&&(g.Wb(0,"div",1),g.Kc(1,bt,1,1,"mat-spinner",2),g.Kc(2,kt,3,2,"ng-container",3),g.Kc(3,Pt,2,0,"p",3),g.Kc(4,wt,3,0,"ng-container",3),g.Kc(5,Et,3,0,"ng-container",3),g.Vb()),2&e){var n=g.ic();g.Cb(1),g.pc("ngIf",n.loader.dataLoading),g.Cb(1),g.pc("ngIf",n.streamCreated),g.Cb(1),g.pc("ngIf",!n.videoFound&&!n.loader.dataLoading),g.Cb(1),g.pc("ngIf",!n.openViduToken&&!n.loader.dataLoading&&n.videoFound),g.Cb(1),g.pc("ngIf",!n.streamCreated&&!n.loader.dataLoading&&n.videoFound)}}var Tt,At,Rt,Vt,Lt=((Rt=function(){function e(t,n,i,o,r,a,s,c,l,u,d){_classCallCheck(this,e),this._userInfoService=t,this.route=n,this.openViduService=i,this.videoService=o,this.chatService=r,this.subject=a,this.loader=s,this.toastr=c,this.dialog=l,this.elRef=u,this.getUrlParts=d,this.recordingState="started",this.sessionData={sessionName:"",myUserName:""},this.streamDestroyed=!1,this.participants=[],this.subscribers=[],this.tags=[],this.messages=[],this._getAuthInfo()}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.getSessionData(),this.getRecordingState(),this.joinSession();var t=this.getUrlParts.transform(window.location.href).hostName;this.shareUrl="".concat(t,"users/video/watch?session=").concat(this.sessionData.sessionName,"&publisher=").concat(this.authUser.username,"&id=").concat(this.videoId),this.subject.publish.subscribe((function(t){console.log(t),e.publisher.publishAudio(t)}))}},{key:"_getAuthInfo",value:function(){var e=this;this._userInfoService._userInfo.subscribe((function(t){e.authUser=t,console.log(e.authUser,"Join video streaming  AUTHUSER DATA")}))}},{key:"openSocialShareModal",value:function(){console.log("modal"),this.dialog.open(z.a,{width:"500px",height:"400px",data:{shareUrl:this.shareUrl}}).afterClosed().subscribe((function(e){}))}},{key:"beforeunloadHandler",value:function(){this.leaveSession()}},{key:"getRecordingState",value:function(){var e=this;this.subject.getVideoRecordingState().subscribe((function(t){"finished"===t.recordingState&&e.leaveSession()}))}},{key:"getSessionData",value:function(){var e=this,t=this.route.snapshot.queryParams;t&&t.hasOwnProperty("session")&&(this.sessionData.sessionName=t.session,this.sessionData.myUserName=this.authUser.username,this.recordingState="started",this.videoId=t.id,this.videoService.getVideoById({id:this.videoId}).subscribe((function(t){e.videoFound="live"===(null==t?void 0:t.status),e.videoSettings=t,e.channelInfo=null==t?void 0:t.channel,console.log("video!!!",t)})))}},{key:"joinSession",value:function(){var e=this;this.OV=new B.OpenVidu,this.session=this.OV.initSession(),this.loader.dataLoading=!0,this.getStreamEvents(),this.openViduService.getToken({email:this.authUser.email,sessionName:this.sessionData.sessionName,role:"SUBSCRIBER"}).subscribe((function(t){e.openViduToken=t,e.receiveMessage(),e.recordingState="started",e.receiveRecordingState(),e.session.connect(t,{clientData:e.sessionData,avatar:e.authUser.avatar,from_user:e.authUser}).then((function(){e.loader.dataLoading=!1})).catch((function(t){e.toastr.error("There was a problem white loading streaming session")}))}))}},{key:"getStreamEvents",value:function(){var e=this;this.session.on("streamCreated",(function(t){e.streamCreated=!0,e.elRef.nativeElement.querySelector("video");var n=e.session.subscribe(t.stream,void 0);e.subscribers.push(n)})),this.session.on("connectionCreated",(function(t){console.log("connection created!!!");var n=JSON.parse(t.connection.data.replace(/}%\/%{/g,","));e.participants.push(n.clientData.myUserName),e.videoService.updateParticipantsCount({video_id:e.videoId,participants:e.participants.length}).subscribe()})),this.session.on("connectionDestroyed",(function(t){var n=JSON.parse(t.connection.data.replace(/}%\/%{/g,","));e.participants=e.participants.filter((function(e){return e!==n.clientData.myUserName}))})),this.session.on("streamDestroyed",(function(t){e.streamDestroyed=!0,e.openViduToken=null,e.leaveSession()}))}},{key:"receiveRecordingState",value:function(){var e=this;this.session.on("signal:recording-state",(function(t){Object.assign({event:t},{socket:!0}),e.recordingState=t.data?"started":"finished","finished"===e.recordingState&&(e.tags=[]),e.subject.setVideoRecordingState(Object.assign({recordingState:e.recordingState},{viaSocket:!0}))}))}},{key:"receiveMessage",value:function(){var e=this;this.session.on("signal:my-chat",(function(t){e.subject.setMsgData({message:t.data,from:t.from.data})}))}},{key:"sendMessage",value:function(e){var t=this;console.log(e),this.session.signal({data:e.message,to:[],type:"my-chat"}).then((function(){t.chatService.saveVideoMessage(Object.assign({video_id:t.videoId},e)).subscribe((function(e){t.messages=e}))})).catch((function(e){console.error(e)}))}},{key:"updateMainStreamManager",value:function(e){this.mainStreamManager=e}},{key:"leaveSession",value:function(){this.session&&this.session.disconnect(),this.sessionData&&this.openViduService.leaveSession({token:this.openViduToken,sessionName:this.sessionData.sessionName,role:"subscriber"}).subscribe((function(){}))}},{key:"ngOnDestroy",value:function(){this.leaveSession()}}]),e}()).\u0275fac=function(e){return new(e||Rt)(g.Qb(m.a),g.Qb(o.a),g.Qb(Q),g.Qb(C.a),g.Qb(H.a),g.Qb(K.a),g.Qb(h.a),g.Qb(v.b),g.Qb(y.b),g.Qb(g.l),g.Qb(Z.a))},Rt.\u0275cmp=g.Kb({type:Rt,selectors:[["app-join-video-streaming"]],viewQuery:function(e,t){var n;1&e&&g.Rc($.a,!0),2&e&&g.wc(n=g.fc())&&(t.chatBox=n.first)},hostBindings:function(e,t){1&e&&g.ec("beforeunload",(function(){return t.beforeunloadHandler()}),!1,g.Ac)},decls:1,vars:1,consts:[["id","video-chat-container",4,"ngIf"],["id","video-chat-container"],["class","session-loader",3,"diameter",4,"ngIf"],[4,"ngIf"],[1,"session-loader",3,"diameter"],["class","stream-container col-md-6 col-xs-6",4,"ngFor","ngForOf"],[3,"openViduToken","session","videoRecordingState","messages","videoId","sendMessage",4,"ngIf"],[1,"stream-container","col-md-6","col-xs-6"],[1,"video-container"],[3,"streamManager","click"],["id","video-info-row"],["id","video-info"],[1,"videoTagsAndActions"],["id","video-tags-list"],["class","tag",4,"ngFor","ngForOf"],["id","video-info-actions"],["id","participants-count"],[1,"fa","fa-users"],["id","share-wrap",3,"click"],[1,"fas","fa-share-alt"],["class","details-row",4,"ngIf"],["class","live-now",4,"ngIf"],["id","channel-info"],["id","channel-avatar",1,"avatar",3,"src"],["id","channel-name"],[1,"subscribers-count"],[1,"tag"],[1,"details-row"],[1,"watchers-count"],[1,"dot"],[1,"date"],[1,"live-now"],[3,"openViduToken","session","videoRecordingState","messages","videoId","sendMessage"]],template:function(e,t){1&e&&g.Kc(0,It,6,5,"div",0),2&e&&g.pc("ngIf",t.openViduToken&&t.videoFound)},directives:[i.t,O.c,i.s,vt,$.a],pipes:[S.a,ee.a],styles:["#video-chat-container[_ngcontent-%COMP%]{display:flex;height:100vh}@media (max-width:1300px){#video-chat-container[_ngcontent-%COMP%]{flex-direction:column}}#video-tags-list[_ngcontent-%COMP%]{display:flex}#video-tags-list[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]{color:#0035c6;font-size:16px;font-family:Muli-Bold,sans-serif;margin-right:16px}.live-now[_ngcontent-%COMP%]{width:52px;height:20px;position:static}.details-row[_ngcontent-%COMP%]{display:flex;align-items:center}.details-row[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{margin:0 10px}#channel-info[_ngcontent-%COMP%]{border-top:.5px solid #c9c9c9;border-bottom:.5px solid #c9c9c9;display:flex;flex-direction:row;margin-bottom:20px;margin-top:12px;padding:12px 0}#channel-info[_ngcontent-%COMP%]   #channel-name[_ngcontent-%COMP%]{font-family:Muli-Bold,sans-serif;color:#545454;font-size:16px;margin-bottom:4px;overflow:hidden;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical}#video-info-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:20px}@media (max-width:1300px){#video-info-row[_ngcontent-%COMP%]{max-width:640px;width:100%}}#video-info-row[_ngcontent-%COMP%]   #video-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-family:Muli-Bold,sans-serif;margin-top:10px}#video-info-row[_ngcontent-%COMP%]   #video-info-actions[_ngcontent-%COMP%]{display:flex}#video-info-row[_ngcontent-%COMP%]   #video-info-actions[_ngcontent-%COMP%]   #participants-count[_ngcontent-%COMP%]{display:flex;align-items:center;color:#545454;font-size:12px}#video-info-row[_ngcontent-%COMP%]   #video-info-actions[_ngcontent-%COMP%]   #participants-count[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:Muli-Light,sans-serif}#video-info-row[_ngcontent-%COMP%]   #video-info-actions[_ngcontent-%COMP%]   #share-wrap[_ngcontent-%COMP%]{display:flex;margin-left:10px;align-items:center;cursor:pointer;font-size:12px;color:#545454}#video-info-row[_ngcontent-%COMP%]   #video-info-actions[_ngcontent-%COMP%]   #share-wrap[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-left:5px;color:#545454;font-size:12px;font-family:Muli-Light,sans-serif;margin-bottom:0!important}#video-info[_ngcontent-%COMP%], #video-info-row[_ngcontent-%COMP%]{width:100%}.videoTagsAndActions[_ngcontent-%COMP%]{display:flex;justify-content:space-between}"]}),Rt),Nt=((At=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||At)},At.\u0275cmp=g.Kb({type:At,selectors:[["app-subscriber-flow"]],decls:1,vars:0,template:function(e,t){1&e&&g.Rb(0,"app-join-video-streaming")},directives:[Lt],styles:[""]}),At),Dt=((Tt=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"canDeactivate",value:function(e,t,n,i){return"started"!==e.recordingState||(e.alertOfLeaving(),!1)}}]),e}()).\u0275fac=function(e){return new(e||Tt)},Tt.\u0275prov=g.Mb({token:Tt,factory:Tt.\u0275fac,providedIn:"root"}),Tt),jt=n("MeVE"),Ut=((Vt=function(){function e(t,n){_classCallCheck(this,e),this._userInfoService=t,this.userStore=n,this._getAuthInfo()}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"_getAuthInfo",value:function(){var e=this;this._userInfoService._userInfo.subscribe((function(t){e.authUser=t,console.log(e.authUser,"Show Notifications  AUTHUSER DATA")}))}}]),e}()).\u0275fac=function(e){return new(e||Vt)(g.Qb(m.a),g.Qb(b.a))},Vt.\u0275cmp=g.Kb({type:Vt,selectors:[["app-show-notifications"]],decls:2,vars:4,consts:[[3,"notificationsCategory","authUser"]],template:function(e,t){1&e&&(g.Rb(0,"app-notifications-list",0),g.Rb(1,"app-notifications-list",0)),2&e&&(g.pc("notificationsCategory","new")("authUser",t.authUser),g.Cb(1),g.pc("notificationsCategory","early")("authUser",t.authUser))},directives:[jt.a],styles:[""]}),Vt),Wt=n("iing"),Bt=n("yUsM"),Ft=n("WHgu"),zt=n("STbY");function Gt(e,t){if(1&e){var n=g.Xb();g.Wb(0,"a",31),g.ec("click",(function(){return g.Bc(n),g.ic(3).connectWithUser()})),g.Wb(1,"mat-icon"),g.Mc(2,"person_add"),g.Vb(),g.Wb(3,"span"),g.Mc(4,"Connect"),g.Vb(),g.Vb()}}function Qt(e,t){if(1&e&&(g.Wb(0,"a",32),g.Wb(1,"mat-icon"),g.Mc(2,"check"),g.Vb(),g.Wb(3,"span"),g.Mc(4,"Waiting for confirmation"),g.Vb(),g.Vb()),2&e){g.ic();var n=g.xc(4);g.pc("matMenuTriggerFor",n)}}function Kt(e,t){if(1&e&&(g.Wb(0,"button",33),g.Wb(1,"mat-icon"),g.Mc(2,"check"),g.Vb(),g.Wb(3,"span"),g.Mc(4,"Connected"),g.Vb(),g.Vb()),2&e){g.ic();var n=g.xc(12);g.pc("matMenuTriggerFor",n)}}function Ht(e,t){if(1&e){var n=g.Xb();g.Wb(0,"a",34),g.ec("click",(function(){return g.Bc(n),g.ic(3).toggleBottomChatBox()})),g.Wb(1,"mat-icon"),g.Mc(2,"chat"),g.Vb(),g.Wb(3,"span"),g.Mc(4,"Message"),g.Vb(),g.Vb()}}function qt(e,t){if(1&e){var n=g.Xb();g.Ub(0),g.Kc(1,Gt,5,0,"a",24),g.Kc(2,Qt,5,1,"a",25),g.Wb(3,"mat-menu",null,26),g.Wb(5,"button",27),g.ec("click",(function(){g.Bc(n);var e=g.ic(2);return e.cancelUsersConnecting(e.usersConnection)})),g.Wb(6,"mat-icon"),g.Mc(7,"close"),g.Vb(),g.Wb(8,"span"),g.Mc(9,"Cancel"),g.Vb(),g.Vb(),g.Vb(),g.Kc(10,Kt,5,1,"button",28),g.Wb(11,"mat-menu",null,29),g.Wb(13,"button",27),g.ec("click",(function(){return g.Bc(n),g.ic(2).disconnectUser()})),g.Wb(14,"mat-icon"),g.Mc(15,"close"),g.Vb(),g.Wb(16,"span"),g.Mc(17,"Disconnect"),g.Vb(),g.Vb(),g.Vb(),g.Kc(18,Ht,5,0,"a",30),g.Tb()}if(2&e){var i=g.ic(2);g.Cb(1),g.pc("ngIf","idle"===i.usersConnectionStatus),g.Cb(1),g.pc("ngIf","pending"===i.usersConnectionStatus),g.Cb(8),g.pc("ngIf","connected"===i.usersConnectionStatus),g.Cb(8),g.pc("ngIf",i.isMessageBtnShown())}}function Yt(e,t){if(1&e&&(g.Wb(0,"button",35),g.Wb(1,"mat-icon"),g.Mc(2,"edit"),g.Vb(),g.Mc(3," Edit profile "),g.Vb()),2&e){var n=g.ic(2);g.pc("routerLink","/users/"+n.authUser.username+"/edit")}}function Zt(e,t){if(1&e&&(g.Wb(0,"li",36),g.Wb(1,"a",37),g.Mc(2),g.Vb(),g.Vb()),2&e){var n=t.$implicit,i=g.ic(2);g.pc("hidden",!i.ownProfile&&n.ownPageOnly),g.Cb(1),g.pc("routerLink","/users/"+i.profileUser.username+"/tab/"+n.link),g.Cb(1),g.Nc(n.name)}}function Jt(e,t){if(1&e){var n=g.Xb();g.Wb(0,"div",38),g.Wb(1,"router-outlet",39),g.ec("activate",(function(e){return g.Bc(n),g.ic(2).onOutletLoaded(e)})),g.Vb(),g.Vb()}}function Xt(e,t){if(1&e&&(g.Wb(0,"div",1),g.Wb(1,"table"),g.Wb(2,"tr"),g.Wb(3,"td",2),g.Mc(4,"My Profile"),g.Vb(),g.Wb(5,"td",3),g.Mc(6,"My Channel"),g.Vb(),g.Vb(),g.Vb(),g.Wb(7,"div",4),g.Rb(8,"img",5),g.jc(9,"getImgPath"),g.Vb(),g.Wb(10,"div",6),g.Wb(11,"div",7),g.Wb(12,"div",8),g.Wb(13,"div",9),g.Wb(14,"div",10),g.Wb(15,"label",11),g.Rb(16,"img",12),g.jc(17,"getImgPath"),g.Vb(),g.Vb(),g.Wb(18,"div"),g.Wb(19,"strong",13),g.Mc(20),g.Vb(),g.Wb(21,"p",14),g.Mc(22),g.Vb(),g.Vb(),g.Vb(),g.Wb(23,"div",15),g.Kc(24,qt,19,4,"ng-container",16),g.Kc(25,Yt,4,1,"button",17),g.Vb(),g.Vb(),g.Rb(26,"div",8),g.Vb(),g.Rb(27,"div",18),g.Vb(),g.Wb(28,"div",6),g.Wb(29,"div",19),g.Wb(30,"ul",20),g.Kc(31,Zt,3,3,"li",21),g.Vb(),g.Vb(),g.Rb(32,"div",22),g.Vb(),g.Kc(33,Jt,2,0,"div",23),g.Vb()),2&e){var n=g.ic();g.Cb(3),g.pc("routerLink","/users/"+(null==n.authUser?null:n.authUser.username))("routerLinkActive","active"),g.Cb(2),g.pc("routerLink","/channels/"+(null==n.authUser?null:n.authUser.username)),g.Cb(3),g.pc("src",g.lc(9,11,null==n.profileUser?null:n.profileUser.cover,"images"),g.Ec),g.Cb(8),g.pc("src",g.lc(17,14,null==n.profileUser?null:n.profileUser.avatar,"images"),g.Ec),g.Cb(4),g.Nc((null==n.profileUser?null:n.profileUser.first_name)+" "+(null==n.profileUser?null:n.profileUser.last_name)),g.Cb(2),g.Oc("",n.connectionsCount+" connection"+(1===n.connectionsCount?"":"s")," "),g.Cb(2),g.pc("ngIf",!n.ownProfile),g.Cb(1),g.pc("ngIf",n.ownProfile),g.Cb(6),g.pc("ngForOf",n.profileTabs),g.Cb(2),g.pc("ngIf",n.authUser&&n.connections.length>0&&n.profileUserStocks)}}var $t,en=(($t=function(){function e(t,n,i,o,r,a,s,c,l){_classCallCheck(this,e),this._userInfoService=t,this.userStore=n,this.usersConnectionsStore=i,this.groupsMessagesStore=o,this.usersService=r,this.socketService=a,this.stocksService=s,this.route=c,this.router=l,this.profileTabs=F.s,this.subscriptions=[],this.connectionsCount=0,this.connections=[],this.connectionRequests=[],this.ownProfile=!1,this.usersConnectionStatus="idle",this.attemptedToConnect=!1,this.isBlocked=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.passedUsername=this.route.snapshot.params.username,this._getAuthInfo(),this.getUserInfo(),this.ownProfile&&this.trackUserConnections()}},{key:"trackAuthUserChanges",value:function(){var e=this;this.subscriptions.push(this.userStore.authUser$.subscribe((function(t){e.authUser=t})))}},{key:"_getAuthInfo",value:function(){var e=this;this._userInfoService._userInfo.subscribe((function(t){e.authUser=t,console.log(e.authUser,"dsadsadas")}))}},{key:"getUserInfo",value:function(){var e=this;this.ownProfile=this.authUser.username===this.passedUsername,this.passedUsername&&this.subscriptions.push(this.usersService.getUserInfo({username:this.passedUsername,own_channel:this.ownProfile}).subscribe((function(t){t&&(e.profileUser=t,e.checkIfUsersConnected(),e.getAcceptedDeclinedRequests(),e.getConnectWithUser(),e.getDisconnectUsers(),e.cancelledUsersConnecting(),e.getBlockUnblockUser(),e.getConnectionsChanges(),e.ownProfile?e.profileUserStocks=[]:(e.getProfileUserStocks(),e.connectionsCount=e.profileUser.users_connections.filter((function(e){return e.confirmed})).length,console.log(e.profileUser)))})))}},{key:"trackUserConnections",value:function(){var e=this;this.subscriptions.push(this.usersConnectionsStore.usersMessages$.subscribe((function(t){e.connectionsCount=t.filter((function(e){return 1===e.users_connections[0].confirmed})).length,e.connections=t.filter((function(e){return 1===e.users_connections[0].confirmed})),e.connectionRequests=t.filter((function(e){return 0===e.users_connections[0].confirmed}))})))}},{key:"getConnectionsChanges",value:function(){var e=this;this.subscriptions.push(this.usersConnectionsStore.usersMessages$.subscribe((function(t){var n;e.usersConnection=null===(n=t.find((function(t){return t.id===e.profileUser.id})))||void 0===n?void 0:n.users_connections[0]})))}},{key:"getAcceptedDeclinedRequests",value:function(){var e=this;this.subscriptions.push(this.socketService.acceptedConnection().subscribe((function(t){var n=t.notification,i=t.profile_user_contacts;(n.to_user.id===e.authUser.id&&n.from_user.id===e.profileUser.id||n.to_user.id===e.profileUser.id&&n.from_user.id===e.authUser.id)&&(e.usersConnectionStatus="connected",e.isBlocked=!1),n.from_user.id!==e.authUser.id&&(e.connectionsCount=i.length)}))),this.subscriptions.push(this.socketService.declinedConnection().subscribe((function(){console.log("declined"),e.usersConnectionStatus="idle"})))}},{key:"checkIfUsersConnected",value:function(){var e=this;this.usersService.checkIfUsersConnected({user_id:this.authUser.id,channel_user_id:this.profileUser.id}).subscribe((function(t){e.usersConnection=t,t&&(e.connections=t.connection_users.filter((function(t){return t.id!==e.authUser.id})),e.usersConnectionStatus=t.confirmed?"connected":"pending",e.isBlocked=!!t.is_blocked)}))}},{key:"connectWithUser",value:function(){this.attemptedToConnect=!0,this.usersConnectionStatus="pending",this.socketService.connectWithUser({from_user:this.authUser,to_user:this.profileUser,msg:"<strong>".concat(this.authUser.first_name+" "+this.authUser.last_name,"</strong>\n                has sent a connection request to you")})}},{key:"getConnectWithUser",value:function(){var e=this;this.socketService.getConnectWithUser().subscribe((function(t){e.usersConnection=t.connection}))}},{key:"cancelUsersConnecting",value:function(e){console.log(e),this.socketService.cancelUsersConnecting({authUser:this.authUser,channelUser:this.profileUser,connection_id:e.id})}},{key:"cancelledUsersConnecting",value:function(){var e=this;this.socketService.cancelledUsersConnecting().subscribe((function(t){console.log(t,"cancelled"),e.usersConnectionStatus="idle"}))}},{key:"disconnectUser",value:function(){console.log(this.usersConnection),this.socketService.disconnectUsers({to_user:this.profileUser,from_user:this.authUser,connection_id:this.usersConnection.id,msg:"<strong>".concat(this.authUser.first_name," ").concat(this.authUser.last_name,"</strong> has broken the connection between you two")}),this.usersConnectionStatus="idle"}},{key:"getDisconnectUsers",value:function(){var e=this;this.subscriptions.push(this.socketService.getDisconnectUsers().subscribe((function(t){var n=t.to_user,i=t.profile_user_contacts;console.log(n.users_connections),e.connectionsCount=i.length,e.usersConnectionStatus="idle"})))}},{key:"getBlockUnblockUser",value:function(){var e=this;this.subscriptions.push(this.socketService.getBlockUnblockUser().subscribe((function(t){console.log("get block/unblock",t),e.isBlocked=!0})))}},{key:"isMessageBtnShown",value:function(){return/connected|test/.test(this.usersConnectionStatus)&&!this.isBlocked}},{key:"toggleBottomChatBox",value:function(){var e=this,t=this.usersConnectionsStore.usersMessages.find((function(t){return t.id===e.profileUser.id}));t&&(this.usersConnectionsStore.showBottomChatBox=!0,this.groupsMessagesStore.showBottomChatBox=!1,this.usersConnectionsStore.changeUser(t))}},{key:"getProfileUserStocks",value:function(){var e=this;this.stocksService.getUserStocks({user_id:this.profileUser.id}).subscribe((function(t){e.profileUserStocks=null==t?void 0:t.user_stocks}))}},{key:"onOutletLoaded",value:function(e){this.connections&&(e.connections=this.connections,e.connectionRequests=this.connectionRequests,e.authUser=this.authUser,e.profileUser=this.profileUser,this.profileUserStocks&&(e.profileUserStocks=this.profileUserStocks))}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach((function(e){return e.unsubscribe()}))}}]),e}()).\u0275fac=function(e){return new(e||$t)(g.Qb(m.a),g.Qb(b.a),g.Qb(Wt.a),g.Qb(Bt.a),g.Qb(f.a),g.Qb(Ft.a),g.Qb(Y.a),g.Qb(o.a),g.Qb(o.e))},$t.\u0275cmp=g.Kb({type:$t,selectors:[["app-show-profile"]],decls:1,vars:1,consts:[["id","profile-wrap",4,"ngIf"],["id","profile-wrap"],[1,"myProfile",3,"routerLink","routerLinkActive"],[1,"myChannel",3,"routerLink"],["id","profile-cover-image"],[3,"src"],[1,"row"],["id","user-details"],[1,"details-row"],["id","details-block"],[1,"avatar-container"],["for",""],["id","profile-image",1,"avatar",2,"cursor","unset",3,"src"],["id","user-full-name"],[1,"connections-count"],["id","profile-actions-block"],[4,"ngIf"],["type","button","id","edit-profile",3,"routerLink",4,"ngIf"],["id","group-actions"],["id","group-tabs"],[1,"nav-tabs"],["class","nav-item",3,"hidden",4,"ngFor","ngForOf"],["id","search-in-current-tab"],["class","tab-content",4,"ngIf"],["class","add-friend-btn",3,"click",4,"ngIf"],["class","waiting-for-confirmation-btn",3,"matMenuTriggerFor",4,"ngIf"],["pendingMenu","matMenu"],["mat-menu-item","",3,"click"],["class","users-connected-btn",3,"matMenuTriggerFor",4,"ngIf"],["menu","matMenu"],["class","toggle-chat-box-btn",3,"click",4,"ngIf"],[1,"add-friend-btn",3,"click"],[1,"waiting-for-confirmation-btn",3,"matMenuTriggerFor"],[1,"users-connected-btn",3,"matMenuTriggerFor"],[1,"toggle-chat-box-btn",3,"click"],["type","button","id","edit-profile",3,"routerLink"],[1,"nav-item",3,"hidden"],["routerLinkActive","active",1,"nav-link",3,"routerLink"],[1,"tab-content"],[3,"activate"]],template:function(e,t){1&e&&g.Kc(0,Xt,34,17,"div",0),2&e&&g.pc("ngIf",t.profileUser)},directives:[i.t,o.f,o.g,i.s,zt.e,zt.b,Se.a,zt.d,o.h,o.j],pipes:[S.a],styles:["#group-tabs[_ngcontent-%COMP%], .stocks-watchlist[_ngcontent-%COMP%]{margin-top:40px}.nav-tabs[_ngcontent-%COMP%]{border-bottom:0;display:flex;flex-wrap:wrap;padding-left:0;list-style:none}.nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{color:#fff!important;width:156px;font-size:12px;box-shadow:0 0 6px rgba(0,0,0,.06);font-family:Muli-Bold;margin-bottom:25px}.nav-link[_ngcontent-%COMP%]{padding:5px;height:31px;background:#fff;color:#545454!important;display:flex;justify-content:center;align-items:center}.nav-link[_ngcontent-%COMP%]:hover{border:0}.nav-link.active[_ngcontent-%COMP%]{background:#f53c6f!important;color:#fff!important}.dropdown[_ngcontent-%COMP%]{cursor:pointer}.dropdown[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{width:100%;padding:0 12px;color:#777;font-size:14px}.dropdown[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]{color:#777;font-size:14px;font-family:Muli-Light}.watchlist-search[_ngcontent-%COMP%]{display:flex;position:relative;width:100%;height:31px;background:#fff 0 0 no-repeat padding-box;margin-right:3px}.watchlist-search.bordered[_ngcontent-%COMP%]{box-shadow:0 3px 8px rgba(0,0,0,.24)}.watchlist-search[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;color:#6a6a6a;right:11px;top:10px}.watchlist-search[_ngcontent-%COMP%]   .watchlist-input[_ngcontent-%COMP%]{font-family:Muli-Light;background:#fff;color:#545454;font-size:16px;padding-left:10px}#profile-wrap[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{margin-bottom:20px}#profile-wrap[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:100px;height:35px;text-align:center;cursor:pointer}#profile-wrap[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   .myProfile[_ngcontent-%COMP%]{margin-right:15px}#profile-wrap[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{background-color:#f53c6f;color:#fff}#profile-cover-image[_ngcontent-%COMP%]{margin-bottom:20px}#profile-cover-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:300px;width:100%;-o-object-fit:cover;object-fit:cover}#details-block[_ngcontent-%COMP%], #profile-actions-block[_ngcontent-%COMP%]{display:flex;align-items:center}#user-full-name[_ngcontent-%COMP%]{display:block}.connections-count[_ngcontent-%COMP%]{margin-top:4px;color:#545454;font-size:14px;font-family:Muli-Light,sans-serif}.details-row[_ngcontent-%COMP%]{justify-content:space-between}#edit-profile[_ngcontent-%COMP%], .details-row[_ngcontent-%COMP%]{display:flex;align-items:center}#edit-profile[_ngcontent-%COMP%]{width:119px;height:36px;padding:15px 32px;color:#fff!important;font-size:16px;font-family:Muli-Light;justify-content:center;transition:.3s ease-in-out;background:#18b587;width:170px}@media (max-width:425px){#edit-profile[_ngcontent-%COMP%]{max-width:170px!important;width:100%!important;padding:15px;white-space:nowrap}}@media (max-width:425px) and (max-width:390px){#edit-profile[_ngcontent-%COMP%]{padding:15px 8px}}#user-details[_ngcontent-%COMP%]{width:98%;margin:auto}.users-connected-btn[_ngcontent-%COMP%]{margin-left:16px;margin-right:16px}.toggle-chat-box-btn[_ngcontent-%COMP%], .users-connected-btn[_ngcontent-%COMP%]{width:119px;height:36px;padding:15px 32px;color:#fff!important;font-size:16px;font-family:Muli-Light;display:flex;justify-content:center;align-items:center;transition:.3s ease-in-out;background:#18b587}.add-friend-btn[_ngcontent-%COMP%]{width:119px;background:#18b587;background-color:#f53c6f}.add-friend-btn[_ngcontent-%COMP%], .waiting-for-confirmation-btn[_ngcontent-%COMP%]{height:36px;color:#fff!important;font-size:16px;font-family:Muli-Light;display:flex;justify-content:center;align-items:center;transition:.3s ease-in-out;padding:0;margin-right:16px}.waiting-for-confirmation-btn[_ngcontent-%COMP%]{width:119px;background:#18b587;width:210px;background-color:#b3b3b3}"]}),$t);function tn(e,t){if(1&e&&(g.Ub(0),g.Wb(1,"div",2),g.Wb(2,"div",3),g.Wb(3,"div",4),g.Rb(4,"img",5),g.jc(5,"getImgPath"),g.Vb(),g.Wb(6,"div",6),g.Wb(7,"div",7),g.Mc(8),g.Vb(),g.Vb(),g.Vb(),g.Wb(9,"div",8),g.Wb(10,"button",9),g.Rb(11,"i",10),g.Vb(),g.Wb(12,"mat-menu",null,11),g.Wb(14,"button",12),g.Rb(15,"img",13),g.Mc(16," Disconnection "),g.Vb(),g.Vb(),g.Vb(),g.Vb(),g.Tb()),2&e){var n=t.$implicit,i=g.xc(13);g.Cb(4),g.pc("src",g.lc(5,5,n.avatar,"user_avatars"),g.Ec),g.Cb(3),g.pc("routerLink","/users/"+n.username),g.Cb(1),g.Nc(n.first_name+" "+n.last_name),g.Cb(2),g.pc("matMenuTriggerFor",i),g.Cb(4),g.pc("disableRipple",!0)}}var nn,on=((nn=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||nn)},nn.\u0275cmp=g.Kb({type:nn,selectors:[["app-connections-tab"]],inputs:{authUser:"authUser",connections:"connections"},decls:2,vars:1,consts:[[1,"connections-container"],[4,"ngFor","ngForOf"],[1,"connection"],[1,"left"],[1,"img","user-avatar"],[1,"avatar",3,"src"],[1,"text"],[1,"name",3,"routerLink"],[1,"right"],[1,"show-actions",3,"matMenuTriggerFor"],[1,"fas","fa-ellipsis-h"],["menu","matMenu"],["mat-menu-item","",3,"disableRipple"],["src","assets/img/iconDis.png","alt","",1,"iconDis"]],template:function(e,t){1&e&&(g.Wb(0,"div",0),g.Kc(1,tn,17,8,"ng-container",1),g.Vb()),2&e&&(g.Cb(1),g.pc("ngForOf",t.connections))},directives:[i.s,o.f,zt.d,zt.e,zt.b],pipes:[S.a],styles:[".connections-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:41px;width:100%;max-width:1122px}@media only screen and (max-width:768px){.connections-container[_ngcontent-%COMP%]{display:block;margin-top:60px}}.connections-container[_ngcontent-%COMP%]   .subTabsContainer[_ngcontent-%COMP%]{display:flex;width:100%;max-width:1122px}.connections-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;background:#fff 0 0 no-repeat padding-box;border:1px solid #d8d8d8;opacity:1;padding:23px 21px;max-width:493px;width:100%;margin-bottom:15px;margin-right:15px}@media only screen and (max-width:1440px){.connections-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]{margin-top:15px}}@media only screen and (max-width:1024px){.connections-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]{padding:11px 10px}}.connections-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{display:flex}.connections-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]{position:relative;margin:auto}.connections-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:60px!important;height:60px;margin-right:21px}@media only screen and (max-width:500px){.connections-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:40px!important;height:40px!important}}@media only screen and (max-width:320px){.connections-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{margin-right:11px!important;width:35px!important;height:35px!important}}.connections-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{display:flex;align-items:center;font-family:Muli-Regular,sans-serif;letter-spacing:0;color:#5b5b5b;opacity:1}@media only screen and (max-width:320px){.connections-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:15px!important}}.connections-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{cursor:pointer}.connections-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(.connection-actions   button)[_ngcontent-%COMP%]{background:transparent;width:28px;height:6px;opacity:1}.connections-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .connection-actions[_ngcontent-%COMP%]{display:flex;width:200px;justify-content:space-around;margin-left:50px}@media only screen and (max-width:500px){.connections-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .connection-actions[_ngcontent-%COMP%]{margin-left:20px;width:80%}}.connections-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .connection-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:119px;height:36px;padding:15px 32px;color:#fff!important;font-size:16px;font-family:Muli-Light;display:flex;justify-content:center;align-items:center;transition:.3s ease-in-out;background:#18b587;font-size:14px}.iconDis[_ngcontent-%COMP%]{width:18px!important;height:18px!important}"]}),nn);function rn(e,t){if(1&e){var n=g.Xb();g.Ub(0),g.Wb(1,"div",2),g.Wb(2,"div",3),g.Wb(3,"div",4),g.Rb(4,"img",5),g.jc(5,"getImgPath"),g.Vb(),g.Wb(6,"div",6),g.Wb(7,"div",7),g.Mc(8),g.Vb(),g.Vb(),g.Vb(),g.Wb(9,"div",8),g.Wb(10,"div",9),g.Wb(11,"button",10),g.ec("click",(function(){g.Bc(n);var e=t.$implicit;return g.ic().confirmConnection(e)})),g.Wb(12,"span"),g.Mc(13,"Confirm"),g.Vb(),g.Vb(),g.Wb(14,"button",11),g.ec("click",(function(){g.Bc(n);var e=t.$implicit;return g.ic().declineConnection(e)})),g.Wb(15,"strong"),g.Mc(16,"Decline"),g.Vb(),g.Vb(),g.Vb(),g.Vb(),g.Vb(),g.Tb()}if(2&e){var i=t.$implicit;g.Cb(4),g.pc("src",g.lc(5,2,i.avatar,"user_avatars"),g.Ec),g.Cb(4),g.Nc(i.first_name+" "+i.last_name)}}var an,sn=((an=function(){function e(){_classCallCheck(this,e),this.connectionRequests=[]}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"confirmConnection",value:function(e){}},{key:"declineConnection",value:function(e){}}]),e}()).\u0275fac=function(e){return new(e||an)},an.\u0275cmp=g.Kb({type:an,selectors:[["app-connection-requests-tab"]],inputs:{authUser:"authUser",connectionRequests:"connectionRequests"},decls:2,vars:1,consts:[[1,"connection-requests-container"],[4,"ngFor","ngForOf"],[1,"connection"],[1,"left"],[1,"img","user-avatar"],[1,"avatar",3,"src"],[1,"text"],[1,"name"],[1,"right"],[1,"connection-actions"],[1,"confirm-connection-btn",3,"click"],[1,"decline-connection-btn",3,"click"]],template:function(e,t){1&e&&(g.Wb(0,"div",0),g.Kc(1,rn,17,5,"ng-container",1),g.Vb()),2&e&&(g.Cb(1),g.pc("ngForOf",t.connectionRequests))},directives:[i.s],pipes:[S.a],styles:[".connection-requests-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:41px;width:100%;max-width:1122px}@media only screen and (max-width:768px){.connection-requests-container[_ngcontent-%COMP%]{display:block;margin-top:60px}}.connection-requests-container[_ngcontent-%COMP%]   .subTabsContainer[_ngcontent-%COMP%]{display:flex;width:100%;max-width:1122px}.connection-requests-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;background:#fff 0 0 no-repeat padding-box;border:1px solid #d8d8d8;opacity:1;padding:23px 21px;max-width:493px;width:100%;margin-bottom:15px;margin-right:15px}@media only screen and (max-width:1440px){.connection-requests-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]{margin-top:15px}}@media only screen and (max-width:1024px){.connection-requests-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]{padding:11px 10px}}.connection-requests-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{display:flex}.connection-requests-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]{position:relative;margin:auto}.connection-requests-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:60px!important;height:60px;margin-right:21px}@media only screen and (max-width:500px){.connection-requests-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:40px!important;height:40px!important}}@media only screen and (max-width:320px){.connection-requests-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{margin-right:11px!important;width:35px!important;height:35px!important}}.connection-requests-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{display:flex;align-items:center;font-family:Muli-Regular;letter-spacing:0;color:#5b5b5b;opacity:1}@media only screen and (max-width:320px){.connection-requests-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:15px!important}}.connection-requests-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(.connection-actions   button)[_ngcontent-%COMP%]{background:transparent;width:28px;height:6px;opacity:1}.connection-requests-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .connection-actions[_ngcontent-%COMP%]{display:flex;width:200px;justify-content:space-around;margin-left:50px}@media only screen and (max-width:500px){.connection-requests-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .connection-actions[_ngcontent-%COMP%]{margin-left:20px;width:80%}}.connection-requests-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .connection-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:119px;height:36px;padding:15px 32px;color:#fff!important;font-size:16px;font-family:Muli-Light;display:flex;justify-content:center;align-items:center;transition:.3s ease-in-out;background:#18b587;font-size:14px}.connection-requests-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .connection-actions[_ngcontent-%COMP%]   .confirm-connection-btn[_ngcontent-%COMP%]{background:#18b587 0 0 no-repeat padding-box;opacity:1;text-align:left;font:normal normal normal 13px/19px Muli-Regular;letter-spacing:0;color:#fff}@media only screen and (max-width:500px){.connection-requests-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .connection-actions[_ngcontent-%COMP%]   .confirm-connection-btn[_ngcontent-%COMP%]{padding:15px 25px!important;width:60px!important}}.connection-requests-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .connection-actions[_ngcontent-%COMP%]   .decline-connection-btn[_ngcontent-%COMP%]{background-color:transparent;text-align:left;font:normal normal normal 13px/19px Muli-Regular;letter-spacing:0;color:#5b5b5b!important;opacity:1}@media only screen and (max-width:500px){.connection-requests-container[_ngcontent-%COMP%]   .connection[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .connection-actions[_ngcontent-%COMP%]   .decline-connection-btn[_ngcontent-%COMP%]{padding:15px 25px!important;width:60px!important}}"]}),an),cn=n("pLZG"),ln=n("RSRA"),un=n("WKnA");function dn(e,t){1&e&&(g.Wb(0,"small",2),g.Mc(1," No stocks added to watchlist"),g.Vb())}function gn(e,t){if(1&e){var n=g.Xb();g.Wb(0,"app-stock-tiles",3),g.ec("updatedStocksList",(function(e){return g.Bc(n),g.ic().saveUpdatedStocksList(e)}))("updatedStocksPriority",(function(e){return g.Bc(n),g.ic().updateStocksPriority(e)})),g.Vb()}if(2&e){var i=g.ic();g.pc("stocks",i.filteredStocks)("userStocks",i.userStocks)("followingAllowed",!0)}}var hn,pn,fn,mn,vn=[{path:"video",children:[{path:"check-streaming-requirements",component:dt,data:{title:"Streaming requirements check"}},{path:"start-live-video",component:dt,data:{title:"Devices and requirements check"}},{path:"publish",component:he,canDeactivate:[Dt],data:{title:"Start live streaming"}},{path:"watch",component:Nt,data:{title:"Watch live stream"}},{path:"openvidu-test",component:ye}]},{path:"notifications",component:Ut},{path:":username",children:[{path:"",component:en},{path:"edit",component:W,pathMatch:"full",data:{title:"User profile-form"}},{path:"tab",component:en,children:[{path:"watchlist",component:(pn=function(){function e(t,n){_classCallCheck(this,e),this.stocksStore=t,this.stocksService=n,this.subscriptions=[],this.userStocks=[],this.filteredStocks=[],this.stocksLoading=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.authUser.id===this.profileUser.id?this.trackUserStocks():this.getProfileUserStocks()}},{key:"trackUserStocks",value:function(){var e=this;this.stocksLoading=!0,this.subscriptions.push(this.stocksStore.userStocks$.pipe(Object(cn.a)((function(e){return!e.initial}))).subscribe((function(t){e.userStocks=t.stocks,e.filteredStocks=e.userStocks,e.stocksLoading=!1})))}},{key:"getProfileUserStocks",value:function(){console.log("OK",this.profileUserStocks),this.userStocks=this.profileUserStocks,this.filteredStocks=this.userStocks,this.stocksLoading=!1}},{key:"saveUpdatedStocksList",value:function(e){var t=this;this.subscriptions.push(this.stocksService.updateFollowedStocks(Object.assign({user_id:this.authUser.id},{stocks:e})).subscribe((function(e){t.userStocks=(null==e?void 0:e.user_stocks)||[],t.stocksStore.setUserStocks({stocks:t.userStocks,empty:0===t.userStocks.length})})))}},{key:"updateStocksPriority",value:function(e){var t={order_type:"custom",rows:JSON.stringify(e),user_id:this.authUser.id};this.stocksStore.setUserStocks({stocks:e,dragdrop:!0}),this.stocksService.updateUserStocksPriority(t).subscribe((function(e){localStorage.setItem("token",e.hasOwnProperty("token")?e.token:"")}))}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach((function(e){return e.unsubscribe()}))}}]),e}(),pn.\u0275fac=function(e){return new(e||pn)(g.Qb(ln.a),g.Qb(Y.a))},pn.\u0275cmp=g.Kb({type:pn,selectors:[["app-watchlist-tab"]],inputs:{authUser:"authUser",profileUser:"profileUser",profileUserStocks:"profileUserStocks"},decls:2,vars:2,consts:[["class","error",4,"ngIf"],[3,"stocks","userStocks","followingAllowed","updatedStocksList","updatedStocksPriority",4,"ngIf"],[1,"error"],[3,"stocks","userStocks","followingAllowed","updatedStocksList","updatedStocksPriority"]],template:function(e,t){1&e&&(g.Kc(0,dn,2,0,"small",0),g.Kc(1,gn,1,3,"app-stock-tiles",1)),2&e&&(g.pc("ngIf",0===(null==t.userStocks?null:t.userStocks.length)),g.Cb(1),g.pc("ngIf",(null==t.userStocks?null:t.userStocks.length)>0))},directives:[i.t,un.a],styles:[""]}),pn)},{path:"connections",component:on},{path:"requests",component:sn},{path:"cards",component:(hn=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}(),hn.\u0275fac=function(e){return new(e||hn)},hn.\u0275cmp=g.Kb({type:hn,selectors:[["app-cards-tab"]],decls:2,vars:0,template:function(e,t){1&e&&(g.Wb(0,"p"),g.Mc(1,"cards-tab works!"),g.Vb())},styles:[""]}),hn)}]}]}],bn=((fn=function e(){_classCallCheck(this,e)}).\u0275mod=g.Ob({type:fn}),fn.\u0275inj=g.Nb({factory:function(e){return new(e||fn)},imports:[[o.i.forChild(vn)],o.i]}),fn),yn=n("PCNd"),Cn=((mn=function e(){_classCallCheck(this,e)}).\u0275mod=g.Ob({type:mn}),mn.\u0275inj=g.Nb({factory:function(e){return new(e||mn)},imports:[[i.c,yn.a,o.i]]}),mn);n("uhAG");var On,Sn=((On=function e(){_classCallCheck(this,e)}).\u0275mod=g.Ob({type:On}),On.\u0275inj=g.Nb({factory:function(e){return new(e||On)},imports:[[i.c,bn,pe.OpenviduSessionModule,yn.a,Cn]]}),On)}}]);
//# sourceMappingURL=users-users-module-es5.8f6e04ea62c950b28e5b.js.map