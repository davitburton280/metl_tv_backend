function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{Jn5M:function(e,t,n){"use strict";n.r(t),n.d(t,"VideosModule",(function(){return _t}));var i=n("ofXK"),o=n("tyNb"),c=n("9xOu"),s=n("fXoL"),a=n("FFj9"),r=n("wDcp"),l=n("HHsJ"),u=n("Rnal"),d=n("ZP/m"),m=n("NFeN"),p=n("86ia"),b=n("Xa2L"),g=n("mrSG"),h=n("JOq8"),v=n("wgiU"),f=n("wd/R"),C=n("fZdh"),y=n("yEwS");function _(e,t){1&e&&(s.Xb(0,"span",19),s.Rc(1,"Live now"),s.Wb())}function P(e,t){1&e&&(s.Xb(0,"div",20),s.Xb(1,"mat-icon"),s.Rc(2,"turned_in"),s.Wb(),s.Xb(3,"span"),s.Rc(4,"Saved"),s.Wb(),s.Wb())}function O(e,t){if(1&e){var n=s.Yb();s.Xb(0,"li",21),s.jc("click",(function(){s.Ic(n);var e=t.$implicit;return s.nc(2).getVideosByTag(e.name)})),s.Xb(1,"span"),s.Rc(2),s.Wb(),s.Wb()}if(2&e){var i=t.$implicit;s.Cb(2),s.Sc(i.name)}}function k(e,t){1&e&&(s.Xb(0,"div",22),s.Xb(1,"span",23),s.Rc(2,"New"),s.Wb(),s.Wb())}function M(e,t){if(1&e){var n=s.Yb();s.Xb(0,"div",2),s.Xb(1,"div",3),s.Xb(2,"img",4),s.jc("click",(function(){s.Ic(n);var e=t.$implicit;return s.nc().openVideoPage(e,e.user.username)})),s.oc(3,"getImgPath"),s.Wb(),s.Pc(4,_,2,0,"span",5),s.Xb(5,"span",6),s.Rc(6),s.Wb(),s.Wb(),s.Xb(7,"div",7),s.Xb(8,"h4",8),s.Rc(9),s.Wb(),s.Xb(10,"div",9),s.Xb(11,"span",10),s.jc("click",(function(){s.Ic(n);var e=t.$implicit;return s.nc().openChannelPage(e.user.channel,e.user.username)})),s.Rc(12),s.Wb(),s.Xb(13,"span",11),s.Rc(14,"\xb7"),s.Wb(),s.Xb(15,"span",12),s.Rc(16),s.Wb(),s.Xb(17,"span",11),s.Rc(18,"\xb7"),s.Wb(),s.Xb(19,"span",13),s.Rc(20),s.oc(21,"dateFromNow"),s.Wb(),s.Wb(),s.Xb(22,"p",14),s.Rc(23),s.Wb(),s.Pc(24,P,5,0,"div",15),s.Xb(25,"div",16),s.Xb(26,"ul"),s.Pc(27,O,3,1,"li",17),s.Wb(),s.Wb(),s.Pc(28,k,3,0,"div",18),s.Wb(),s.Wb()}if(2&e){var i=t.$implicit,o=s.nc();s.Cb(2),s.uc("src",s.pc(3,11,i.thumbnail),s.Kc),s.Cb(2),s.uc("ngIf","live"===i.status),s.Cb(2),s.Sc(i.duration),s.Cb(3),s.Sc(i.name),s.Cb(3),s.Tc(" ",i.user.channel.name," "),s.Cb(4),s.Tc(" ","live"===i.status?"17k watching":i.views+" view"+(1===i.views?"":"s")," "),s.Cb(4),s.Sc(s.pc(21,13,i.created_at)),s.Cb(3),s.Tc(" ",i.description," "),s.Cb(1),s.uc("ngIf",o.checkIfSavedByCurrentUser(i)),s.Cb(3),s.uc("ngForOf",null==i?null:i.tags),s.Cb(1),s.uc("ngIf",o.checkIfNewVideo(i))}}var w,x=((w=function(){function e(t){_classCallCheck(this,e),this.router=t,this.trackByElement=v.a}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"openVideoPage",value:function(e,t){return Object(g.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=Object(h.a)(e,t),n.next=3,this.router.navigate([i.route],{queryParams:i.params});case 3:case"end":return n.stop()}}),n,this)})))}},{key:"openChannelPage",value:function(e,t){return Object(g.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.router.navigate(["channels/show"],{queryParams:{username:t}});case 2:case"end":return e.stop()}}),e,this)})))}},{key:"checkIfSavedByCurrentUser",value:function(e){var t=this;return e.users_vids.find((function(e){var n;return e.username===(null===(n=t.authUser)||void 0===n?void 0:n.username)&&e.users_videos.saved}))}},{key:"checkIfNewVideo",value:function(e){var t=f.duration(f().diff(e.created_at));return Math.floor(t.asDays())<7}},{key:"getVideosByTag",value:function(e){return Object(g.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.router.navigate(["videos"],{queryParams:{tag:e}});case 2:case"end":return t.stop()}}),t,this)})))}}]),e}()).\u0275fac=function(e){return new(e||w)(s.Rb(o.d))},w.\u0275cmp=s.Lb({type:w,selectors:[["app-show-regular-list"]],inputs:{items:"items",authUser:"authUser"},decls:2,vars:2,consts:[["id","regular-video-list-container"],["class","video-container flex-wrap",4,"ngFor","ngForOf","ngForTrackBy"],[1,"video-container","flex-wrap"],[1,"thumbnail"],[3,"src","click"],["class","live-now",4,"ngIf"],[1,"duration"],[1,"details"],[1,"title"],[1,"shortened-details"],[1,"channel-name",3,"click"],[1,"dot"],[1,"watchers-count"],[1,"upload-time"],[1,"shortened-description"],["class","saved-video",4,"ngIf"],[1,"tags"],[3,"click",4,"ngFor","ngForOf"],["class","is-new-video",4,"ngIf"],[1,"live-now"],[1,"saved-video"],[3,"click"],[1,"is-new-video"],[1,"new"]],template:function(e,t){1&e&&(s.Xb(0,"div",0),s.Pc(1,M,29,15,"div",1),s.Wb()),2&e&&(s.Cb(1),s.uc("ngForOf",t.items.videos)("ngForTrackBy",t.trackByElement))},directives:[i.l,i.m,m.a],pipes:[C.a,y.a],styles:["#regular-video-list-container[_ngcontent-%COMP%]   .shortened-description[_ngcontent-%COMP%]{-webkit-line-clamp:4}#regular-video-list-container[_ngcontent-%COMP%]   .is-new-video[_ngcontent-%COMP%]   .new[_ngcontent-%COMP%]{background-color:#18b587;color:#fff;padding:2px}@media (max-width:992px){#regular-video-list-container[_ngcontent-%COMP%]   .is-new-video[_ngcontent-%COMP%]{margin-bottom:10px}}#regular-video-list-container[_ngcontent-%COMP%]   .channel-name[_ngcontent-%COMP%]{cursor:pointer}.playlist-container[_ngcontent-%COMP%]{display:flex;margin-bottom:30px}.playlist-container[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]{position:relative}.playlist-container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{padding-left:32px;max-width:310px}@media screen and (max-width:1022px){.playlist-container[_ngcontent-%COMP%]{flex-direction:column}.playlist-container[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]{max-width:432px;width:100%}.playlist-container[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{padding-left:0;margin-top:8px}}"]}),w);function W(e,t){if(1&e){var n=s.Yb();s.Vb(0),s.Xb(1,"div",3),s.jc("click",(function(){s.Ic(n);var e=s.nc().$implicit;return s.nc().openPlaylistPage(e,e.videos[0].id)})),s.Xb(2,"div",4),s.Xb(3,"div",5),s.Xb(4,"mat-icon"),s.Rc(5,"playlist_add_check"),s.Wb(),s.Xb(6,"p",6),s.Rc(7),s.Wb(),s.Xb(8,"p",7),s.Rc(9),s.Wb(),s.Wb(),s.Sb(10,"img",8),s.oc(11,"getImgPath"),s.Wb(),s.Sb(12,"div",9),s.Wb(),s.Sb(13,"div",10),s.Ub()}if(2&e){var i=s.nc().$implicit;s.Cb(7),s.Sc(i.name),s.Cb(2),s.Sc(i.videos.length+(1===i.videos.length?" video":" videos")),s.Cb(1),s.uc("src",s.pc(11,3,i.thumbnail),s.Kc)}}function R(e,t){if(1&e&&(s.Xb(0,"div",1),s.Pc(1,W,14,5,"ng-container",2),s.Wb()),2&e){var n=t.$implicit;s.Cb(1),s.uc("ngIf",n.videos.length>0)}}var X,I=((X=function(){function e(t){_classCallCheck(this,e),this.router=t}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"openPlaylistPage",value:function(e,t){return Object(g.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i={id:t,playlist_id:e.id},n.next=3,this.router.navigate(["videos/play"],{queryParams:i});case 3:case"end":return n.stop()}}),n,this)})))}}]),e}()).\u0275fac=function(e){return new(e||X)(s.Rb(o.d))},X.\u0275cmp=s.Lb({type:X,selectors:[["app-show-playlists-list"]],inputs:{items:"items",authUser:"authUser"},decls:1,vars:1,consts:[["class","playlist-container",4,"ngFor","ngForOf"],[1,"playlist-container"],[4,"ngIf"],[1,"thumbnail-container",3,"click"],[1,"thumbnail"],[1,"short-details"],[1,"name"],[1,"video-count"],[3,"src"],[1,"fake-bg","thumbnail"],[1,"details"]],template:function(e,t){1&e&&s.Pc(0,R,2,1,"div",0),2&e&&s.uc("ngForOf",t.items.playlists)},directives:[i.l,i.m,m.a],pipes:[C.a],styles:[".playlist-container[_ngcontent-%COMP%]{width:432px;display:flex;margin-bottom:30px}.playlist-container[_ngcontent-%COMP%]   .thumbnail-container[_ngcontent-%COMP%]{position:relative;cursor:pointer}.playlist-container[_ngcontent-%COMP%]   .thumbnail-container[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]{position:relative}.playlist-container[_ngcontent-%COMP%]   .thumbnail-container[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]   .short-details[_ngcontent-%COMP%]{position:absolute;top:10px;left:10px;color:#fff}.playlist-container[_ngcontent-%COMP%]   .thumbnail-container[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]   .short-details[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-weight:700}.playlist-container[_ngcontent-%COMP%]   .thumbnail-container[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:400px;height:249px;-o-object-fit:cover;object-fit:cover;cursor:pointer}@media screen and (max-width:991px){.playlist-container[_ngcontent-%COMP%]   .thumbnail-container[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:432px!important;width:100%!important}}.playlist-container[_ngcontent-%COMP%]   .thumbnail-container[_ngcontent-%COMP%]   .fake-bg[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;top:0;background:rgba(1,1,1,.2)}"]}),X);function S(e,t){if(1&e){var n=s.Yb();s.Xb(0,"button",11),s.jc("click",(function(){s.Ic(n);var e=s.nc().$implicit;return s.nc().subscribeToChannel(e)})),s.Rc(1),s.Wb()}if(2&e){var i=s.nc().$implicit,o=s.nc();s.Hb("subscribed",o.checkIfSubscribed(i)),s.Cb(1),s.Tc("",o.checkIfSubscribed(i)?"Subscribed":"Subscribe"," ")}}function V(e,t){if(1&e&&(s.Xb(0,"li"),s.Xb(1,"span"),s.Rc(2),s.Wb(),s.Wb()),2&e){var n=t.$implicit;s.Cb(2),s.Sc(n.name)}}function D(e,t){if(1&e){var n=s.Yb();s.Xb(0,"div",12),s.Xb(1,"div",3),s.Xb(2,"img",13),s.jc("click",(function(){s.Ic(n);var e=t.$implicit,i=s.nc().$implicit;return s.nc().openVideoPage(e,i.user.username)})),s.oc(3,"getImgPath"),s.Wb(),s.Xb(4,"span",14),s.Rc(5),s.Wb(),s.Wb(),s.Xb(6,"div",15),s.Xb(7,"h4",16),s.Rc(8),s.Wb(),s.Xb(9,"div",7),s.Xb(10,"span",17),s.Rc(11),s.Wb(),s.Xb(12,"span",18),s.Rc(13,"\xb7"),s.Wb(),s.Xb(14,"span",19),s.Rc(15),s.Wb(),s.Xb(16,"span",18),s.Rc(17,"\xb7"),s.Wb(),s.Xb(18,"span",20),s.Rc(19),s.oc(20,"dateFromNow"),s.Wb(),s.Wb(),s.Xb(21,"p",21),s.Rc(22),s.Wb(),s.Xb(23,"div",22),s.Xb(24,"ul"),s.Pc(25,V,3,1,"li",1),s.Wb(),s.Wb(),s.Wb(),s.Wb()}if(2&e){var i=t.$implicit,o=s.nc().$implicit;s.Cb(2),s.uc("src",s.pc(3,8,i.thumbnail),s.Kc),s.Cb(3),s.Sc(i.duration),s.Cb(3),s.Sc(i.name),s.Cb(3),s.Sc(o.name),s.Cb(4),s.Tc(" ","live"===i.status?"17k watching":i.views+" view"+(1===i.views?"":"s")," "),s.Cb(4),s.Sc(s.pc(20,10,i.created_at)),s.Cb(3),s.Tc(" ",i.description," "),s.Cb(3),s.uc("ngForOf",null==i?null:i.tags)}}function F(e,t){if(1&e){var n=s.Yb();s.Vb(0),s.Xb(1,"div",2),s.Xb(2,"div",3),s.Xb(3,"img",4),s.jc("click",(function(){s.Ic(n);var e=t.$implicit;return s.nc().openChannelPage(e,null==e.user?null:e.user.username)})),s.oc(4,"getImgPath"),s.Wb(),s.Wb(),s.Xb(5,"div",5),s.Xb(6,"p",6),s.jc("click",(function(){s.Ic(n);var e=t.$implicit;return s.nc().openChannelPage(e,null==e||null==e.user?null:e.user.username)})),s.Rc(7),s.Wb(),s.Xb(8,"div",7),s.Xb(9,"p",8),s.Rc(10),s.Wb(),s.Wb(),s.Xb(11,"p"),s.Rc(12),s.Wb(),s.Pc(13,S,2,3,"button",9),s.Wb(),s.Wb(),s.Pc(14,D,26,12,"div",10),s.Ub()}if(2&e){var i=t.$implicit,o=s.nc();s.Cb(3),s.uc("src",s.qc(4,6,i.avatar,"avatars"),s.Kc),s.Cb(4),s.Sc(i.name),s.Cb(3),s.Sc(i.videos.length+(1===i.videos.length?" video":" videos")),s.Cb(2),s.Sc(o.getDesc(i.description)),s.Cb(1),s.uc("ngIf",(null==i||null==i.user?null:i.user.username)!==(null==o.authUser?null:o.authUser.username)),s.Cb(1),s.uc("ngForOf",i.videos)}}var j,U=((j=function(){function e(t,n,i){_classCallCheck(this,e),this.router=t,this.subject=n,this.channelsService=i}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"openChannelPage",value:function(e,t){return Object(g.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.router.navigate(["channels/show"],{queryParams:{username:t}});case 2:case"end":return e.stop()}}),e,this)})))}},{key:"openVideoPage",value:function(e,t){return Object(g.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=Object(h.a)(e,t),n.next=3,this.router.navigate([i.route],{queryParams:i.params});case 3:case"end":return n.stop()}}),n,this)})))}},{key:"subscribeToChannel",value:function(e){var t=this;this.channelsService.subscribeToChannel({user_id:this.authUser.id,channel_id:e.id}).subscribe((function(n){t.channelsService.getUserChannelSubscriptions({user_id:t.authUser.id}).subscribe((function(n){t.subject.setUserSubscriptions(n),t.checkIfSubscribed(e)?e.subscribers=e.subscribers.filter((function(e){var n;return e.id!==(null===(n=t.authUser)||void 0===n?void 0:n.id)})):e.subscribers.push(t.authUser)}))}))}},{key:"checkIfSubscribed",value:function(e){var t=this;return e.subscribers.find((function(e){var n;return e.id===(null===(n=t.authUser)||void 0===n?void 0:n.id)}))}},{key:"getDesc",value:function(e){return null==e?void 0:e.replace(/<br\s*[\/]?>/gi,"\n")}}]),e}()).\u0275fac=function(e){return new(e||j)(s.Rb(o.d),s.Rb(r.a),s.Rb(l.a))},j.\u0275cmp=s.Lb({type:j,selectors:[["app-show-search-results"]],inputs:{channelsVideos:"channelsVideos",authUser:"authUser"},decls:2,vars:1,consts:[["id","search-results-container"],[4,"ngFor","ngForOf"],[1,"channel-item"],[1,"thumbnail"],[1,"avatar",3,"src","click"],[1,"info"],[1,"name",3,"click"],[1,"shortened-details"],[1,"video-count"],["class","btn subscribe-to-channel-btn",3,"subscribed","click",4,"ngIf"],["class","video-container",4,"ngFor","ngForOf"],[1,"btn","subscribe-to-channel-btn",3,"click"],[1,"video-container"],[3,"src","click"],[1,"duration"],[1,"details"],[1,"title"],[1,"channel-name"],[1,"dot"],[1,"watchers-count"],[1,"upload-time"],[1,"shortened-description"],[1,"tags"]],template:function(e,t){1&e&&(s.Xb(0,"div",0),s.Pc(1,F,15,9,"ng-container",1),s.Wb()),2&e&&(s.Cb(1),s.uc("ngForOf",t.channelsVideos))},directives:[i.l,i.m],pipes:[C.a,y.a],styles:["#my-subscriptions[_ngcontent-%COMP%]{text-align:center;color:#18b587}.channel-item[_ngcontent-%COMP%]{display:flex;margin-bottom:32px;flex-wrap:wrap}.channel-item[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:240px!important;height:240px}.channel-item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{margin-top:4px;min-width:250px;max-width:350px}.channel-item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{color:#545454;font-size:24px;font-family:Muli-Bold;cursor:pointer}.channel-item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{margin-left:26px;margin-top:-3px}.channel-item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;font-family:Muli-Light}.channel-item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .videos-count[_ngcontent-%COMP%], .channel-item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .watchers-count[_ngcontent-%COMP%]{font-size:14px;color:#818181}#search-results-container[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]{width:100%;max-width:432px;height:243px;display:flex;align-items:center;justify-content:center}#search-results-container[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;max-width:432px}#search-results-container[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{padding-left:32px;max-width:310px}@media screen and (max-width:1022px){#search-results-container[_ngcontent-%COMP%]{flex-direction:column}#search-results-container[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]{max-width:432px;width:100%}#search-results-container[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{padding-left:0;margin-top:8px}}"]}),j);function T(e,t){if(1&e){var n=s.Yb();s.Xb(0,"button",6),s.jc("click",(function(){s.Ic(n);var e=s.nc();return e.showFilters=!e.showFilters})),s.Xb(1,"mat-icon"),s.Rc(2,"tune"),s.Wb(),s.Xb(3,"span"),s.Rc(4,"Filters"),s.Wb(),s.Wb()}}function L(e,t){if(1&e){var n=s.Yb();s.Xb(0,"app-video-filters",7),s.jc("filter",(function(e){return s.Ic(n),s.nc().getFilteredList(e)})),s.Wb()}}function q(e,t){1&e&&s.Sb(0,"mat-spinner",8),2&e&&s.uc("diameter",20)}function B(e,t){if(1&e&&(s.Vb(0),s.Sb(1,"app-show-regular-list",9),s.Sb(2,"app-show-playlists-list",9),s.Ub()),2&e){var n=s.nc();s.Cb(1),s.uc("items",n.items)("authUser",n.authUser),s.Cb(1),s.uc("items",n.items)("authUser",n.authUser)}}function $(e,t){if(1&e&&(s.Vb(0),s.Sb(1,"app-show-search-results",10),s.Ub()),2&e){var n=s.nc();s.Cb(1),s.uc("channelsVideos",n.channelsVideos)("authUser",n.authUser)}}function E(e,t){1&e&&(s.Xb(0,"div"),s.Xb(1,"span",11),s.Rc(2,"No results found"),s.Wb(),s.Wb())}var A,N=((A=function(){function e(t,n,i,o,s,a,r){var l=this;_classCallCheck(this,e),this.videoService=t,this.router=n,this.subject=i,this.channelsService=o,this.route=s,this.getAuthUser=a,this.getExactParams=r,this.items={videos:[],playlists:[]},this.channelsVideos=[],this.apiUrl=c.b,this.showTrending=!1,this.showFilters=!1,this.filters={},this.filterStatus="idle",this.subscriptions=[],this.loadingVideos=!1,this.authUser=this.getAuthUser.transform(),this.subscriptions.push(this.route.queryParams.subscribe((function(e){var t,n;l.search=null===(t=l.route.snapshot.queryParams)||void 0===t?void 0:t.search,l.showTrending=l.router.url.includes("trending"),l.selectedTag=null===(n=l.route.snapshot.queryParams)||void 0===n?void 0:n.tag,l.search?l.searchChannelsVideos({search:l.search,filters:l.filters}):l.getVideosList({search:l.search,filters:l.filters,tag:l.selectedTag})})))}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"getFilteredList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.filters=e,this.filterStatus="applied",this.search?this.searchChannelsVideos({search:this.search,filters:this.filters}):this.getVideosList({filters:this.filters})}},{key:"getVideosList",value:function(e){var t=this;e=this.getExactParams.transform(e),this.videoService.get(Object.assign({withPlaylists:this.showTrending?0:1,trending:this.showTrending?1:0},e)).subscribe((function(e){t.items=e}))}},{key:"searchChannelsVideos",value:function(e){var t,n=this;e=this.getExactParams.transform(e),this.loadingVideos=!0,this.channelsService.searchWithVideos(Object.assign({user_id:null===(t=this.authUser)||void 0===t?void 0:t.id},e)).subscribe((function(e){n.loadingVideos=!1,n.channelsVideos=e}))}},{key:"isFiltersShown",value:function(){var e;return(null===(e=this.items.videos)||void 0===e?void 0:e.length)>0||this.search&&this.channelsVideos.find((function(e){return e.videos.length>0}))||"applied"===this.filterStatus&&!this.loadingVideos}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach((function(e){return e.unsubscribe()}))}}]),e}()).\u0275fac=function(e){return new(e||A)(s.Rb(a.a),s.Rb(o.d),s.Rb(r.a),s.Rb(l.a),s.Rb(o.a),s.Rb(u.a),s.Rb(d.a))},A.\u0275cmp=s.Lb({type:A,selectors:[["app-show-videos"]],decls:8,vars:6,consts:[[1,"all-videos"],["class","filter-toggle-btn",3,"click",4,"ngIf"],[3,"filter",4,"ngIf"],["id","videos-list"],[3,"diameter",4,"ngIf"],[4,"ngIf"],[1,"filter-toggle-btn",3,"click"],[3,"filter"],[3,"diameter"],[3,"items","authUser"],[3,"channelsVideos","authUser"],[1,"error"]],template:function(e,t){1&e&&(s.Xb(0,"div",0),s.Pc(1,T,5,0,"button",1),s.Pc(2,L,1,0,"app-video-filters",2),s.Xb(3,"div",3),s.Pc(4,q,1,1,"mat-spinner",4),s.Pc(5,B,3,4,"ng-container",5),s.Pc(6,$,2,2,"ng-container",5),s.Wb(),s.Pc(7,E,3,0,"div",5),s.Wb()),2&e&&(s.Cb(1),s.uc("ngIf",t.isFiltersShown()),s.Cb(1),s.uc("ngIf",t.showFilters),s.Cb(2),s.uc("ngIf",t.loadingVideos),s.Cb(1),s.uc("ngIf",!t.search&&!t.loadingVideos),s.Cb(1),s.uc("ngIf",t.search&&!t.loadingVideos),s.Cb(1),s.uc("ngIf",t.search&&0===(null==t.channelsVideos?null:t.channelsVideos.length)))},directives:[i.m,m.a,p.a,b.b,x,I,U],styles:[".filter-toggle-btn[_ngcontent-%COMP%]{text-transform:uppercase;background-color:unset;display:flex;align-items:center;font-family:Muli-Bold;padding:10px}.filter-toggle-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:10px}"]}),A),Y=n("GJOa"),Q=n("7dP1"),H=n("5eHb"),z=n("lwos"),K=n("Y9zH"),J=["target"];n("LllP"),n("vWzC");var G,Z,ee,te=((G=function(){function e(t){_classCallCheck(this,e),this.elementRef=t}return _createClass(e,[{key:"ngOnInit",value:function(){this.initPlayer()}},{key:"initPlayer",value:function(){return Object(g.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.getElementsByTagName("video")[0],this.videoUrl=c.b+"uploads/videos/"+this.videoData.filename,t.setAttribute("src",this.videoUrl),t.setAttribute("poster",c.b+"uploads/thumbnails/"+this.videoData.thumbnail),t.poster=c.b+"uploads/thumbnails/"+this.videoData.thumbnail,t.muted=!0,t.load(),e.next=9,t.play();case 9:case"end":return e.stop()}}),e,this)})))}},{key:"ngOnDestroy",value:function(){this.player&&this.player.dispose()}}]),e}()).\u0275fac=function(e){return new(e||G)(s.Rb(s.l))},G.\u0275cmp=s.Lb({type:G,selectors:[["app-vjs-player"]],viewQuery:function(e,t){var n;1&e&&s.Nc(J,!0),2&e&&s.Dc(n=s.kc())&&(t.target=n.first)},inputs:{options:"options",videoData:"videoData"},decls:3,vars:0,consts:[[1,"container"],["controls","","muted","","playsinline","","preload","none","width","640","height","480","data-setup","{}"],["target",""]],template:function(e,t){1&e&&(s.Xb(0,"div",0),s.Sb(1,"video",1,2),s.Wb())},styles:[".container[_ngcontent-%COMP%]{margin:50px auto;max-width:500px;width:100%;height:480px}.plyr[_ngcontent-%COMP%]{height:400px!important;width:100%}.plyr[_ngcontent-%COMP%]   .plyr__control--overlaid[_ngcontent-%COMP%]{background-color:#18b587!important}.plyr[_ngcontent-%COMP%]   .plyr--video[_ngcontent-%COMP%]   .plyr__control[aria-expanded=true][_ngcontent-%COMP%], .plyr[_ngcontent-%COMP%]   .plyr__controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus, .plyr[_ngcontent-%COMP%]   .plyr__controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#18b587!important}.plyr--full-ui[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]{color:#18b587!important}"]}),G),ne=n("dJ++"),ie=n("0IaG"),oe=n("3Pt+"),ce=n("MFHO"),se=n("kmnG"),ae=n("qFsG"),re=n("ihCf"),le=["cEditable"],ue=((Z=function(){function e(t,n,i,o,c,a){_classCallCheck(this,e),this.fb=t,this.videoService=n,this.getAuthUser=i,this.subject=o,this.cdr=c,this.fixLineBreaks=a,this.inputFocused=!1,this.isSubmitted=!1,this.editComment=!1,this.selectedComment=null,this.reply=!1,this.isReplyComment=!1,this.parentComment=null,this.commentAdded=new s.o,this.commentUpdated=new s.o,this.editingCancelled=new s.o}return _createClass(e,[{key:"ngOnInit",value:function(){this.authUser=this.getAuthUser.transform(),this.placeholderText=this.getPlaceholderText(),this.videoCommentsForm=this.fb.group({id:[""],from_id:[this.authUser.id],comment:["",oe.w.required],video_id:[this.videoData.id],to_user_id:[0],to_comment_id:[0],is_reply:[0]})}},{key:"saveComment",value:function(){var e=this;this.isSubmitted=!0,this.videoCommentsForm.valid&&(this.reply?this.videoCommentsForm.patchValue({to_comment_id:this.selectedComment.id,to_user_id:this.selectedComment.user.id,is_reply:1}):this.isReplyComment&&this.videoCommentsForm.patchValue({to_comment_id:this.parentComment.id,to_user_id:this.parentComment.user.id,is_reply:1}),this.editComment?this.videoService.updateVideoComment(this.videoCommentsForm.value).subscribe((function(t){e.commentUpdated.emit(t),e.videoCommentsForm.get("comment").reset()})):this.videoService.addVideoComment(this.videoCommentsForm.value).subscribe((function(t){e.inputFocused=!1,e.commentAdded.emit(t),e.videoCommentsForm.get("comment").reset()})))}},{key:"onCancel",value:function(){this.inputFocused=!1,this.videoCommentsForm.get("comment").reset(),this.editComment&&this.editingCancelled.emit()}},{key:"getPlaceholderText",value:function(){return"Add a public "+(this.reply?"reply":"comment")+"..."}},{key:"ngAfterViewInit",value:function(){this.editComment&&(this.videoCommentsForm.patchValue({comment:this.fixLineBreaks.transform(this.selectedComment.comment),id:this.selectedComment.id}),this.inputFocused=!0,this.cdr.detectChanges())}},{key:"commentCtrl",get:function(){return this.videoCommentsForm.get("comment")}}]),e}()).\u0275fac=function(e){return new(e||Z)(s.Rb(oe.e),s.Rb(a.a),s.Rb(u.a),s.Rb(r.a),s.Rb(s.h),s.Rb(ce.a))},Z.\u0275cmp=s.Lb({type:Z,selectors:[["app-video-comments-form"]],viewQuery:function(e,t){var n;1&e&&s.Wc(le,!0),2&e&&s.Dc(n=s.kc())&&(t.cEditable=n.first)},inputs:{videoData:"videoData",editComment:"editComment",selectedComment:"selectedComment",reply:"reply",isReplyComment:"isReplyComment",parentComment:"parentComment"},outputs:{commentAdded:"added",commentUpdated:"updated",editingCancelled:"cancelled"},decls:14,vars:10,consts:[[1,"w-100",3,"formGroup"],[1,"d-flex","mt-3","comment-input-container"],[1,"avatar",3,"src"],["type","hidden","formControlName","comment"],["floatLabel","never"],["matInput","","cdkTextareaAutosize","","formControlName","comment",1,"comment-input",3,"placeholder","focus"],["cEditable",""],[1,"d-flex","justify-content-end"],[3,"ngClass"],["type","button",1,"btn","text-btn",3,"click"],["type","button",1,"ml-3","px-2","btn","enter",3,"click"]],template:function(e,t){1&e&&(s.Xb(0,"form",0),s.Xb(1,"div",1),s.Sb(2,"img",2),s.oc(3,"getImgPath"),s.Sb(4,"input",3),s.Xb(5,"mat-form-field",4),s.Xb(6,"textarea",5,6),s.jc("focus",(function(){return t.inputFocused=!0})),s.Wb(),s.Wb(),s.Wb(),s.Xb(8,"div",7),s.Xb(9,"div",8),s.Xb(10,"button",9),s.jc("click",(function(){return t.onCancel()})),s.Rc(11,"Cancel"),s.Wb(),s.Xb(12,"button",10),s.jc("click",(function(){return t.saveComment()})),s.Rc(13),s.Wb(),s.Wb(),s.Wb(),s.Wb()),2&e&&(s.uc("formGroup",t.videoCommentsForm),s.Cb(2),s.uc("src",s.qc(3,7,t.authUser.channel.avatar,"avatars"),s.Kc),s.Cb(4),s.uc("placeholder",t.placeholderText),s.Cb(3),s.uc("ngClass",t.inputFocused?"d-flex":"d-none"),s.Cb(3),s.Hb("green-bg",t.videoCommentsForm.valid),s.Cb(1),s.Tc("",t.reply?"Reply":"Comment"," "))},directives:[oe.y,oe.p,oe.i,oe.c,oe.o,oe.h,se.c,ae.b,re.b,i.k],pipes:[C.a],styles:["form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%!important}form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{overflow:hidden;resize:none}form[_ngcontent-%COMP%]   .comment-input-container[_ngcontent-%COMP%]{position:relative}form[_ngcontent-%COMP%]   .content-editable-textarea[_ngcontent-%COMP%]{flex:1}form[_ngcontent-%COMP%]   .content-editable-textarea[_ngcontent-%COMP%]:focus{outline:none}form[_ngcontent-%COMP%]   .content-editable-textarea.focused-border[_ngcontent-%COMP%]{border-bottom:2px solid #18b587!important}form[_ngcontent-%COMP%]   .btn.enter[_ngcontent-%COMP%]{background-color:#777;color:#fff;text-transform:uppercase}form[_ngcontent-%COMP%]   .btn.text-btn[_ngcontent-%COMP%]{outline:none;color:#777;text-transform:uppercase;font-weight:700}"]}),Z),de=n("bTqV"),me=n("STbY"),pe=((ee=function(){function e(t){_classCallCheck(this,e),this.getAuthUser=t,this.commentSelected=new s.o,this.remove=new s.o}return _createClass(e,[{key:"ngOnInit",value:function(){this.authUser=this.getAuthUser.transform()}},{key:"selectComment",value:function(e){this.commentSelected.emit(e)}},{key:"removeComment",value:function(e){this.remove.emit(e)}}]),e}()).\u0275fac=function(e){return new(e||ee)(s.Rb(u.a))},ee.\u0275cmp=s.Lb({type:ee,selectors:[["app-comment-actions"]],inputs:{comment:"comment"},outputs:{commentSelected:"commentSelected",remove:"remove"},decls:16,vars:1,consts:[[1,"more-actions"],["mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"]],template:function(e,t){if(1&e&&(s.Xb(0,"div",0),s.Xb(1,"button",1),s.Xb(2,"mat-icon"),s.Rc(3,"more_vert"),s.Wb(),s.Wb(),s.Xb(4,"mat-menu",null,2),s.Xb(6,"button",3),s.jc("click",(function(){return t.selectComment(t.comment)})),s.Xb(7,"mat-icon"),s.Rc(8,"edit"),s.Wb(),s.Xb(9,"span"),s.Rc(10,"Edit"),s.Wb(),s.Wb(),s.Xb(11,"button",3),s.jc("click",(function(){return t.removeComment(t.comment)})),s.Xb(12,"mat-icon"),s.Rc(13,"delete"),s.Wb(),s.Xb(14,"span"),s.Rc(15,"Delete"),s.Wb(),s.Wb(),s.Wb(),s.Wb()),2&e){var n=s.Ec(5);s.Cb(1),s.uc("matMenuTriggerFor",n)}},directives:[de.a,me.c,m.a,me.d,me.a],styles:[""]}),ee);function be(e,t){1&e&&s.Sb(0,"i",26)}function ge(e,t){if(1&e){var n=s.Yb();s.Xb(0,"div",27),s.Xb(1,"app-video-comments-form",28),s.jc("added",(function(e){return s.Ic(n),s.nc(4).commentAdded(e)})),s.Wb(),s.Wb()}if(2&e){var i=s.nc(4);s.Cb(1),s.uc("videoData",i.videoData)("reply",!0)("selectedComment",i.selectedComment)}}function he(e,t){if(1&e){var n=s.Yb();s.Xb(0,"p",29),s.jc("click",(function(){s.Ic(n);var e=s.nc(2).$implicit;return s.nc(2).toggleReplies(e)})),s.Xb(1,"mat-icon"),s.Rc(2),s.Wb(),s.Xb(3,"span"),s.Rc(4),s.Wb(),s.Wb()}if(2&e){var i=s.nc(2).$implicit,o=s.nc(2);s.Cb(2),s.Tc("expand_",o.showReplies&&o.selectedComment===i?"more":"less",""),s.Cb(2),s.Sc(o.getRepliesTogglerText(i))}}function ve(e,t){1&e&&s.Sb(0,"i",26)}function fe(e,t){if(1&e&&(s.Vb(0),s.Sb(1,"img",9),s.oc(2,"getImgPath"),s.Xb(3,"div",10),s.Xb(4,"div",11),s.Xb(5,"div",12),s.Xb(6,"span"),s.Rc(7),s.Wb(),s.Pc(8,ve,1,0,"i",13),s.Wb(),s.Xb(9,"div",14),s.Rc(10),s.oc(11,"dateFromNow"),s.Wb(),s.Wb(),s.Sb(12,"div",15),s.Xb(13,"div",16),s.Xb(14,"div",17),s.Sb(15,"i",33),s.Xb(16,"span"),s.Rc(17," 22k "),s.Wb(),s.Sb(18,"i",34),s.Wb(),s.Wb(),s.Wb(),s.Ub()),2&e){var n=s.nc().$implicit,i=s.nc(5);s.Cb(1),s.uc("src",s.qc(2,7,null==n.user?null:n.user.channel.avatar,"avatars"),s.Kc),s.Cb(4),s.Hb("author",i.isAuthor(n)),s.Cb(2),s.Sc(null==n||null==n.user?null:n.user.full_name),s.Cb(1),s.uc("ngIf",i.isAuthor(n)),s.Cb(2),s.Sc(s.pc(11,10,n.created_at)),s.Cb(2),s.uc("innerHTML",n.comment,s.Jc)}}function Ce(e,t){if(1&e){var n=s.Yb();s.Xb(0,"app-comment-actions",35),s.jc("remove",(function(e){return s.Ic(n),s.nc(6).removeComment(e)}))("commentSelected",(function(e){return s.Ic(n),s.nc(6).selectComment(e,!1,!0)})),s.Wb()}if(2&e){var i=s.nc().$implicit;s.uc("comment",i)}}function ye(e,t){if(1&e){var n=s.Yb();s.Xb(0,"app-video-comments-form",36),s.jc("updated",(function(e){return s.Ic(n),s.nc(6).getUpdatedComments(e)}))("cancelled",(function(){return s.Ic(n),s.nc(6).editReply=!1})),s.Wb()}if(2&e){var i=s.nc(4).$implicit,o=s.nc(2);s.uc("editComment",!0)("selectedComment",o.selectedReply)("isReplyComment",!0)("parentComment",i)("videoData",o.videoData)}}function _e(e,t){if(1&e&&(s.Vb(0),s.Xb(1,"div",31),s.Xb(2,"div",4),s.Pc(3,fe,19,12,"ng-container",5),s.Wb(),s.Xb(4,"div",7),s.Pc(5,Ce,1,1,"app-comment-actions",8),s.Wb(),s.Wb(),s.Pc(6,ye,1,5,"app-video-comments-form",32),s.Ub()),2&e){var n=t.$implicit,i=s.nc(5);s.Cb(3),s.uc("ngIf",n.id!==(null==i.selectedReply?null:i.selectedReply.id)||!i.editReply),s.Cb(2),s.uc("ngIf",i.isMyComment(n)&&!i.editReply),s.Cb(1),s.uc("ngIf",i.editReply&&n.id===i.selectedReply.id)}}function Pe(e,t){if(1&e&&(s.Xb(0,"div",30),s.Pc(1,_e,7,3,"ng-container",2),s.Wb()),2&e){var n=s.nc(2).$implicit;s.Cb(1),s.uc("ngForOf",n.replies)}}function Oe(e,t){if(1&e){var n=s.Yb();s.Vb(0),s.Sb(1,"img",9),s.oc(2,"getImgPath"),s.Xb(3,"div",10),s.Xb(4,"div",11),s.Xb(5,"div",12),s.Rc(6),s.Pc(7,be,1,0,"i",13),s.Wb(),s.Xb(8,"div",14),s.Rc(9),s.oc(10,"dateFromNow"),s.Wb(),s.Wb(),s.Sb(11,"div",15),s.Xb(12,"div",16),s.Xb(13,"div",17),s.Xb(14,"i",18),s.jc("click",(function(){s.Ic(n);var e=s.nc().$implicit;return s.nc(2).likeDislikeComment(e)})),s.Wb(),s.Xb(15,"span",19),s.Rc(16),s.Wb(),s.Xb(17,"i",20),s.jc("click",(function(){s.Ic(n);var e=s.nc().$implicit;return s.nc(2).likeDislikeComment(e,!1)})),s.Wb(),s.Wb(),s.Xb(18,"div",21),s.Xb(19,"span",22),s.jc("click",(function(){s.Ic(n);var e=s.nc().$implicit;return s.nc(2).selectComment(e,!0)})),s.Rc(20,"Reply"),s.Wb(),s.Pc(21,ge,2,3,"div",23),s.Wb(),s.Wb(),s.Pc(22,he,5,2,"p",24),s.Pc(23,Pe,2,1,"div",25),s.Wb(),s.Ub()}if(2&e){var i,o,c=s.nc().$implicit,a=s.nc(2),r=null==(i=a.checkUserCommentConnection(c))?null:i.liked,l=null==(o=a.checkUserCommentConnection(c))?null:o.disliked;s.Cb(1),s.uc("src",s.qc(2,15,null==c.user?null:c.user.channel.avatar,"avatars"),s.Kc),s.Cb(4),s.Hb("author",a.isAuthor(c)),s.Cb(1),s.Tc(" ",null==c||null==c.user?null:c.user.full_name," "),s.Cb(1),s.uc("ngIf",a.isAuthor(c)),s.Cb(2),s.Sc(s.pc(10,18,c.created_at)),s.Cb(2),s.uc("innerHTML",c.comment,s.Jc),s.Cb(3),s.Hb("liked",r),s.Cb(2),s.Tc(" ",a.getLikersCount(c.reactors)," "),s.Cb(1),s.Hb("disliked",l),s.Cb(4),s.uc("ngIf",a.showReplyForm&&c.id===a.selectedComment.id),s.Cb(1),s.uc("ngIf",c.replies.length>0),s.Cb(1),s.uc("ngIf",a.showReplies&&a.selectedComment===c)}}function ke(e,t){if(1&e){var n=s.Yb();s.Xb(0,"app-video-comments-form",37),s.jc("updated",(function(e){return s.Ic(n),s.nc(3).getUpdatedComments(e)}))("cancelled",(function(){return s.Ic(n),s.nc(3).editComment=!1})),s.Wb()}if(2&e){var i=s.nc(3);s.uc("editComment",!0)("selectedComment",i.selectedComment)("videoData",i.videoData)}}function Me(e,t){if(1&e){var n=s.Yb();s.Xb(0,"app-comment-actions",35),s.jc("remove",(function(e){return s.Ic(n),s.nc(3).removeComment(e)}))("commentSelected",(function(e){return s.Ic(n),s.nc(3).selectComment(e)})),s.Wb()}if(2&e){var i=s.nc().$implicit;s.uc("comment",i)}}function we(e,t){if(1&e&&(s.Vb(0),s.Xb(1,"div",3),s.Xb(2,"div",4),s.Pc(3,Oe,24,20,"ng-container",5),s.Pc(4,ke,1,3,"app-video-comments-form",6),s.Wb(),s.Xb(5,"div",7),s.Pc(6,Me,1,1,"app-comment-actions",8),s.Wb(),s.Wb(),s.Ub()),2&e){var n=t.$implicit,i=s.nc(2);s.Cb(2),s.Hb("w-100",i.editComment),s.Cb(1),s.uc("ngIf",n.id!==(null==i.selectedComment?null:i.selectedComment.id)&&!i.showReplyForm||i.showReplyForm||!i.editComment),s.Cb(1),s.uc("ngIf",i.editComment&&n.id===i.selectedComment.id),s.Cb(2),s.uc("ngIf",i.isMyComment(n)&&!i.editComment)}}function xe(e,t){if(1&e&&(s.Xb(0,"div",1),s.Pc(1,we,7,5,"ng-container",2),s.Wb()),2&e){var n=s.nc();s.Cb(1),s.uc("ngForOf",n.videoComments)}}var We,Re=((We=function(){function e(t,n,i,o){_classCallCheck(this,e),this.subject=t,this.videoService=n,this.getAuthUser=i,this.dialog=o,this.subscriptions=[],this.showReplyForm=!1,this.showReplies=!1,this.editReply=!1,this.trackByElement=v.a,this.videoComments=[],this.editComment=!1,this.authUser=this.getAuthUser.transform()}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"isAuthor",value:function(e){return e.user.id===this.videoData.author_id}},{key:"isMyComment",value:function(e){return e.user.id===this.authUser.id}},{key:"getUpdatedComments",value:function(e){var t=this;this.videoComments=e,this.editComment=!1,this.editReply=!1,this.selectedComment=e.find((function(e){var n;return e.id===(null===(n=t.selectedComment)||void 0===n?void 0:n.id)})),this.selectedReply=e.find((function(e){var n;return e.id===(null===(n=t.selectedReply)||void 0===n?void 0:n.id)}))}},{key:"getRepliesTogglerText",value:function(e){var t=e.replies.length;return"View "+t+(t>1?" replies":" reply")}},{key:"selectComment",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t||n?n?(this.editReply=!0,this.selectedReply=e):(this.showReplyForm=this.selectedComment!==e||!this.showReplyForm,this.selectedComment=e):(this.editComment=!this.editComment,this.showReplyForm=!this.editComment,this.selectedComment=e)}},{key:"removeComment",value:function(e){var t=this;this.subscriptions.push(this.dialog.open(ne.a).afterClosed().subscribe((function(n){n&&t.videoService.removeVideoComment({user_id:t.authUser.id,id:e.id,video_id:e.video_id}).subscribe((function(e){t.videoComments=e,console.log(t.videoComments),t.selectedComment=e.find((function(e){var n;return e.id===(null===(n=t.selectedComment)||void 0===n?void 0:n.id)}))}))})))}},{key:"commentAdded",value:function(e){var t=this;this.videoComments=e,this.showReplyForm=!1,this.showReplies=!0,this.selectedComment=e.find((function(e){return e.id===t.selectedComment.id}))}},{key:"toggleReplies",value:function(e){this.showReplies=!this.showReplies,this.selectedComment=e}},{key:"likeDislikeComment",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.buildParams(e,n);this.videoService.updateCommentLikes(i).subscribe((function(e){t.videoComments=e}))}},{key:"buildParams",value:function(e,t){var n={video_id:e.video_id,comment_id:e.id,user_id:this.authUser.id,liked:0,disliked:0,likes:e.likes,dislikes:e.dislikes},i=this.checkUserCommentConnection(e);return n.likes=Math.max(0,(null==i?void 0:i.liked)?--e.likes:+e.likes),n.dislikes=Math.max(0,(null==i?void 0:i.disliked)?--e.dislikes:+e.dislikes),t?n.liked=+!(null==i?void 0:i.liked):n.disliked=+!(null==i?void 0:i.disliked),n}},{key:"getLikersCount",value:function(e){return e.filter((function(e){return null==e?void 0:e.users_comments.liked})).length}},{key:"checkUserCommentConnection",value:function(e){var t=this,n=e.reactors.find((function(e){return e.id===t.authUser.id}));return null==n?void 0:n.users_comments}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach((function(e){return e.unsubscribe()}))}}]),e}()).\u0275fac=function(e){return new(e||We)(s.Rb(r.a),s.Rb(a.a),s.Rb(u.a),s.Rb(ie.b))},We.\u0275cmp=s.Lb({type:We,selectors:[["app-video-comments-list"]],inputs:{videoData:"videoData",videoComments:"videoComments",editComment:"editComment"},decls:1,vars:1,consts:[["class","comments-container",4,"ngIf"],[1,"comments-container"],[4,"ngFor","ngForOf"],[1,"comment","d-flex","mt-4"],[1,"left-group"],[4,"ngIf"],["class","w-100",3,"editComment","selectedComment","videoData","updated","cancelled",4,"ngIf"],[1,"right-group"],[3,"comment","remove","commentSelected",4,"ngIf"],[1,"avatar",3,"src"],[1,"details"],[1,"d-flex","align-items-center","mb-2"],[1,"mr-3","user-name"],["class","fas fa-check-circle ml-1",4,"ngIf"],[1,"comment-date"],[1,"comment-text","mb-2",3,"innerHTML"],[1,"likes-reply"],[1,"comments-like","mb-2"],[1,"fa","fa-thumbs-up","mr-1",3,"click"],[1,"likes-count"],[1,"fa","fa-thumbs-down","ml-3",3,"click"],[1,"reply-container"],[1,"reply",3,"click"],["class","add-reply",4,"ngIf"],["class","replies-toggler mt-3",3,"click",4,"ngIf"],["class","replies",4,"ngIf"],[1,"fas","fa-check-circle","ml-1"],[1,"add-reply"],[1,"w-100",3,"videoData","reply","selectedComment","added"],[1,"replies-toggler","mt-3",3,"click"],[1,"replies"],[1,"d-flex","mt-4","reply"],["class","w-100",3,"editComment","selectedComment","isReplyComment","parentComment","videoData","updated","cancelled",4,"ngIf"],[1,"fa","fa-thumbs-up","mr-3"],[1,"fa","fa-thumbs-down","ml-3"],[3,"comment","remove","commentSelected"],[1,"w-100",3,"editComment","selectedComment","isReplyComment","parentComment","videoData","updated","cancelled"],[1,"w-100",3,"editComment","selectedComment","videoData","updated","cancelled"]],template:function(e,t){1&e&&s.Pc(0,xe,2,1,"div",0),2&e&&s.uc("ngIf",t.videoComments.length>0)},directives:[i.m,i.l,ue,m.a,pe],pipes:[C.a,y.a],styles:[".comments-container[_ngcontent-%COMP%]{margin-top:50px}.comments-container[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%], .comments-container[_ngcontent-%COMP%]   .reply[_ngcontent-%COMP%]{justify-content:space-between}.comments-container[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .left-group[_ngcontent-%COMP%], .comments-container[_ngcontent-%COMP%]   .reply[_ngcontent-%COMP%]   .left-group[_ngcontent-%COMP%]{display:flex;width:70%}.comments-container[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .left-group[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%], .comments-container[_ngcontent-%COMP%]   .reply[_ngcontent-%COMP%]   .left-group[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{width:70%}.comments-container[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .left-group[_ngcontent-%COMP%]   .author[_ngcontent-%COMP%], .comments-container[_ngcontent-%COMP%]   .reply[_ngcontent-%COMP%]   .left-group[_ngcontent-%COMP%]   .author[_ngcontent-%COMP%]{height:26px;background-color:#777;color:#fff!important;border-radius:20px;text-align:center;display:flex;align-items:center;justify-content:center;padding:0 5px;font-family:Muli-Regular,serif!important}.comments-container[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .left-group[_ngcontent-%COMP%]   .replies-toggler[_ngcontent-%COMP%], .comments-container[_ngcontent-%COMP%]   .reply[_ngcontent-%COMP%]   .left-group[_ngcontent-%COMP%]   .replies-toggler[_ngcontent-%COMP%]{display:flex;align-items:center;color:#0e9d6a;cursor:pointer;font-family:Muli-Bold,serif;font-size:14px}.comments-container[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .left-group[_ngcontent-%COMP%]   .comment-date[_ngcontent-%COMP%], .comments-container[_ngcontent-%COMP%]   .reply[_ngcontent-%COMP%]   .left-group[_ngcontent-%COMP%]   .comment-date[_ngcontent-%COMP%]{font-size:12px;color:#818181;font-family:Muli-Light,serif}.comments-container[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .left-group[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%], .comments-container[_ngcontent-%COMP%]   .reply[_ngcontent-%COMP%]   .left-group[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{color:#545454;font-family:Muli-Bold,serif}.comments-container[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .left-group[_ngcontent-%COMP%]   .likes-reply[_ngcontent-%COMP%], .comments-container[_ngcontent-%COMP%]   .reply[_ngcontent-%COMP%]   .left-group[_ngcontent-%COMP%]   .likes-reply[_ngcontent-%COMP%]{display:flex;width:100%}.comments-container[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .left-group[_ngcontent-%COMP%]   .likes-reply[_ngcontent-%COMP%]   .comments-like[_ngcontent-%COMP%], .comments-container[_ngcontent-%COMP%]   .reply[_ngcontent-%COMP%]   .left-group[_ngcontent-%COMP%]   .likes-reply[_ngcontent-%COMP%]   .comments-like[_ngcontent-%COMP%]{color:#777}.comments-container[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .left-group[_ngcontent-%COMP%]   .likes-reply[_ngcontent-%COMP%]   .comments-like[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%], .comments-container[_ngcontent-%COMP%]   .reply[_ngcontent-%COMP%]   .left-group[_ngcontent-%COMP%]   .likes-reply[_ngcontent-%COMP%]   .comments-like[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%]{cursor:pointer}.comments-container[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .left-group[_ngcontent-%COMP%]   .likes-reply[_ngcontent-%COMP%]   .reply-container[_ngcontent-%COMP%], .comments-container[_ngcontent-%COMP%]   .reply[_ngcontent-%COMP%]   .left-group[_ngcontent-%COMP%]   .likes-reply[_ngcontent-%COMP%]   .reply-container[_ngcontent-%COMP%]{width:80%}.comments-container[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .left-group[_ngcontent-%COMP%]   .likes-reply[_ngcontent-%COMP%]   .reply[_ngcontent-%COMP%], .comments-container[_ngcontent-%COMP%]   .reply[_ngcontent-%COMP%]   .left-group[_ngcontent-%COMP%]   .likes-reply[_ngcontent-%COMP%]   .reply[_ngcontent-%COMP%]{text-transform:uppercase;color:#777;margin-left:15px;font-family:Muli-Bold,serif;font-size:14px;cursor:pointer}"]}),We),Xe=n("FtGj"),Ie=n("A5z7");function Se(e,t){1&e&&(s.Xb(0,"mat-error"),s.Rc(1," The video name is required "),s.Wb())}function Ve(e,t){if(1&e){var n=s.Yb();s.Xb(0,"mat-chip",16),s.jc("removed",(function(){s.Ic(n);var e=t.$implicit;return s.nc().remove(e)})),s.Rc(1),s.Xb(2,"mat-icon",17),s.Rc(3,"cancel"),s.Wb(),s.Wb()}if(2&e){var i=t.$implicit;s.Cb(1),s.Tc(" ",i.name," ")}}function De(e,t){1&e&&(s.Xb(0,"mat-error"),s.Rc(1,"Please provide some tags describing your live video "),s.Wb())}var Fe,je=((Fe=function(){function e(t,n){_classCallCheck(this,e),this.fb=t,this.toastr=n,this.formReady=new s.o,this.isSubmitted=!1,this.separatorKeysCodes=[Xe.g,Xe.c],this.videoDetailsForm=this.fb.group({name:["",oe.w.required],tags:[[],oe.w.required]})}return _createClass(e,[{key:"ngOnInit",value:function(){this.videoDetailsForm.patchValue({name:this.videoData.name})}},{key:"add",value:function(e){var t=e.input,n=e.value;(n||"").trim()&&(3===this.videoData.tags.length?this.toastr.error("We don't support more than 3 tags per video"):(this.videoData.tags.push({name:n.trim()}),this.videoDetailsForm.patchValue({tags:this.videoData.tags}))),t&&(t.value="")}},{key:"remove",value:function(e){var t=this.videoData.tags.indexOf(e);t>=0&&(this.videoData.tags.splice(t,1),this.videoDetailsForm.patchValue({tags:this.videoData.tags}))}},{key:"saveDetails",value:function(){this.videoDetailsForm.patchValue({tags:this.videoData.tags}),this.isSubmitted=!0,this.videoDetailsForm.valid&&this.formReady.emit(this.videoDetailsForm.value)}}]),e}()).\u0275fac=function(e){return new(e||Fe)(s.Rb(oe.e),s.Rb(H.b))},Fe.\u0275cmp=s.Lb({type:Fe,selectors:[["app-video-details-form"]],inputs:{videoData:"videoData"},outputs:{formReady:"formReady"},decls:21,vars:6,consts:[["id","tags-form",3,"formGroup"],[1,"left-group"],["id","video-name"],["matInput","","formControlName","name"],[4,"ngIf"],[1,"right-group"],["id","video-tags"],[1,"example-chip-list"],["formControlName","tags"],["tagList",""],[3,"removed",4,"ngFor","ngForOf"],["placeholder","Tags...",3,"matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputTokenEnd"],["chipsInput",""],["align","end"],[1,"actions"],["id","save-tags",3,"click"],[3,"removed"],["matChipRemove",""]],template:function(e,t){if(1&e&&(s.Xb(0,"form",0),s.Xb(1,"div",1),s.Xb(2,"div",2),s.Xb(3,"mat-form-field"),s.Sb(4,"input",3),s.Wb(),s.Pc(5,Se,2,0,"mat-error",4),s.Wb(),s.Wb(),s.Xb(6,"div",5),s.Xb(7,"div",6),s.Xb(8,"mat-form-field",7),s.Xb(9,"mat-chip-list",8,9),s.Pc(11,Ve,4,1,"mat-chip",10),s.Xb(12,"input",11,12),s.jc("matChipInputTokenEnd",(function(e){return t.add(e)})),s.Wb(),s.Wb(),s.Xb(14,"mat-hint",13),s.Rc(15,"Please press 'Enter' after the tag name"),s.Wb(),s.Wb(),s.Pc(16,De,2,0,"mat-error",4),s.Wb(),s.Xb(17,"div",14),s.Xb(18,"button",15),s.jc("click",(function(){return t.saveDetails()})),s.Xb(19,"mat-icon"),s.Rc(20,"checked"),s.Wb(),s.Wb(),s.Wb(),s.Wb(),s.Wb()),2&e){var n=s.Ec(10);s.uc("formGroup",t.videoDetailsForm),s.Cb(5),s.uc("ngIf",t.isSubmitted&&t.videoDetailsForm.get("name").hasError("required")),s.Cb(6),s.uc("ngForOf",t.videoData.tags),s.Cb(1),s.uc("matChipInputFor",n)("matChipInputSeparatorKeyCodes",t.separatorKeysCodes),s.Cb(4),s.uc("ngIf",0===t.videoData.tags.length&&t.isSubmitted)}},directives:[oe.y,oe.p,oe.i,se.c,ae.b,oe.c,oe.o,oe.h,i.m,Ie.c,i.l,Ie.b,se.f,m.a,se.b,Ie.a,Ie.d],styles:["#tags-form[_ngcontent-%COMP%]{display:flex;align-items:flex-end;justify-content:space-between;flex-wrap:wrap}#tags-form[_ngcontent-%COMP%]   .right-group[_ngcontent-%COMP%]{display:flex;align-items:center}#tags-form[_ngcontent-%COMP%]   .right-group[_ngcontent-%COMP%]   #video-tags[_ngcontent-%COMP%]{width:250px}#tags-form[_ngcontent-%COMP%]   .right-group[_ngcontent-%COMP%]   #video-tags[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}#tags-form[_ngcontent-%COMP%]   .right-group[_ngcontent-%COMP%]   #save-tags[_ngcontent-%COMP%]{background-color:#18b587;color:#fff;display:flex;align-items:center;font-size:16px;border-radius:0;transition:.3s ease-in-out;margin-left:30px}@media screen and (max-width:767px){#tags-form[_ngcontent-%COMP%]   .right-group[_ngcontent-%COMP%]   #save-tags[_ngcontent-%COMP%]{margin-left:0}}"]}),Fe),Ue=n("AytR"),Te=n("CPAS");function Le(e,t){if(1&e){var n=s.Yb();s.Xb(0,"div",14),s.jc("click",(function(){s.Ic(n);var e=s.nc().$implicit,t=s.nc(2);return t.removeVideoFromPlaylist(e,t.playlistId)})),s.Xb(1,"span",15),s.Rc(2,"delete"),s.Wb(),s.Wb()}}function qe(e,t){if(1&e){var n=s.Yb();s.Vb(0),s.Xb(1,"div",7),s.jc("click",(function(){s.Ic(n);var e=t.$implicit,i=s.nc(2);return i.openVideoPage(e,null==i.playlistData?null:i.playlistData.id)})),s.Xb(2,"div",8),s.Sb(3,"img",9),s.oc(4,"getImgPath"),s.Wb(),s.Xb(5,"div",10),s.Xb(6,"p",11),s.jc("click",(function(){s.Ic(n);var e=t.$implicit,i=s.nc(2);return i.openVideoPage(e,null==i.playlistData?null:i.playlistData.id)})),s.Rc(7),s.Wb(),s.Xb(8,"p",12),s.Rc(9),s.Wb(),s.Wb(),s.Pc(10,Le,3,0,"div",13),s.Wb(),s.Ub()}if(2&e){var i=t.$implicit,o=s.nc(2);s.Cb(1),s.Hb("selected",o.videoId===i.id),s.Cb(2),s.uc("src",s.pc(4,6,i.thumbnail),s.Kc),s.Cb(4),s.Sc(i.name),s.Cb(2),s.Sc(i.channel.name),s.Cb(1),s.uc("ngIf",o.authUser.id===o.playlistData.channel.id)}}function Be(e,t){if(1&e&&(s.Xb(0,"div",4),s.Xb(1,"h2"),s.Rc(2),s.Wb(),s.Xb(3,"div",5),s.Pc(4,qe,11,8,"ng-container",6),s.Wb(),s.Wb()),2&e){var n=s.nc();s.Cb(2),s.Sc(n.playlistData.name),s.Cb(2),s.uc("ngForOf",n.playlistData.videos)}}function $e(e,t){if(1&e){var n=s.Yb();s.Xb(0,"div",18),s.Xb(1,"div",8),s.Xb(2,"img",19),s.jc("click",(function(){s.Ic(n);var e=s.nc().$implicit;return s.nc().openVideoPage(e)})),s.oc(3,"getImgPath"),s.Wb(),s.Wb(),s.Xb(4,"div",10),s.Xb(5,"p",20),s.Rc(6),s.Wb(),s.Xb(7,"p",21),s.Rc(8),s.Wb(),s.Xb(9,"div",22),s.Xb(10,"span",23),s.Rc(11),s.Wb(),s.Xb(12,"span",24),s.Rc(13,"\xb7"),s.Wb(),s.Xb(14,"span",25),s.Rc(15),s.oc(16,"dateFromNow"),s.Wb(),s.Wb(),s.Wb(),s.Wb()}if(2&e){var i=s.nc().$implicit;s.Cb(2),s.uc("src",s.pc(3,5,i.thumbnail),s.Kc),s.Cb(4),s.Sc(i.name),s.Cb(2),s.Sc(i.channel.name),s.Cb(3),s.Tc(" ","live"===i.status?"17k watching":i.views+" view"+(1===i.views?"":"s")," "),s.Cb(4),s.Sc(s.pc(16,7,i.created_at))}}function Ee(e,t){if(1&e&&(s.Xb(0,"div",16),s.Pc(1,$e,17,9,"div",17),s.Wb()),2&e){var n=t.index;s.Cb(1),s.uc("ngIf",n<5)}}var Ae,Ne=((Ae=function(){function e(t,n,i,o,s,a){_classCallCheck(this,e),this.route=t,this.playlistsService=n,this.videoService=i,this.getAuthUser=o,this.router=s,this.dialog=a,this.playlistOpened=!1,this.videoSuggestions=[],this.apiUrl=c.b,this.isProduction=Ue.a.production,this.authUser=this.getAuthUser.transform()}return _createClass(e,[{key:"ngOnInit",value:function(){var e,t,n=this;this.urlParams=this.route.snapshot.queryParams,this.videoId=+(null===(e=this.urlParams)||void 0===e?void 0:e.id),this.playlistId=null===(t=this.urlParams)||void 0===t?void 0:t.playlist_id,this.playlistOpened=!!this.playlistId,this.playlistOpened&&this.playlistsService.getById({playlist_id:this.playlistId}).subscribe((function(e){n.playlistData=e})),this.videoService.get({limit:c.c}).subscribe((function(e){n.videoSuggestions=e.videos}))}},{key:"openVideoPage",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i={id:e.id,playlist_id:n};this.router.navigateByUrl("/",{skipLocationChange:!0}).then((function(){return Object(g.a)(t,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.router.navigate(["/videos/play"],{queryParams:i});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})))}))}},{key:"removeVideoFromPlaylist",value:function(e,t){var n=this;this.dialog.open(ne.a).afterClosed().subscribe((function(i){i&&n.playlistsService.removeVideoFromPlaylist({playlist_id:t,video_id:e.id}).subscribe((function(t){var i=n.playlistData.videos.indexOf(e);n.playlistData.videos=t.videos;var o=n.playlistData.videos[i];o&&n.openVideoPage(o)}))}))}}]),e}()).\u0275fac=function(e){return new(e||Ae)(s.Rb(o.a),s.Rb(Te.a),s.Rb(a.a),s.Rb(u.a),s.Rb(o.d),s.Rb(ie.b))},Ae.\u0275cmp=s.Lb({type:Ae,selectors:[["app-video-suggestions"]],decls:5,vars:3,consts:[["class","playlist-wrap",4,"ngIf"],["class","suggested-videos",4,"ngFor","ngForOf"],[3,"hidden"],["src","assets/img/ads.png",1,"ads"],[1,"playlist-wrap"],[1,"list-wrap"],[4,"ngFor","ngForOf"],[1,"playlist-video",3,"click"],[1,"thumbnail-container"],[3,"src"],[1,"details-container"],[1,"video-name",3,"click"],[1,"main-text-3"],["class","remove-btn-container",3,"click",4,"ngIf"],[1,"remove-btn-container",3,"click"],[1,"material-icons"],[1,"suggested-videos"],["class","suggested-video",4,"ngIf"],[1,"suggested-video"],[3,"src","click"],[1,"video-name"],[1,"channel-sub-name"],[1,"details-row"],[1,"watchers-count"],[1,"dot"],[1,"upload-time"]],template:function(e,t){1&e&&(s.Pc(0,Be,5,2,"div",0),s.Pc(1,Ee,2,1,"div",1),s.Xb(2,"div",2),s.Sb(3,"img",3),s.Sb(4,"img",3),s.Wb()),2&e&&(s.uc("ngIf",t.playlistOpened&&t.playlistData&&t.playlistData.videos.length>0),s.Cb(1),s.uc("ngForOf",t.videoSuggestions),s.Cb(1),s.uc("hidden",t.isProduction))},directives:[i.m,i.l],pipes:[C.a,y.a],styles:[".playlist-wrap[_ngcontent-%COMP%]{box-shadow:0 0 6px rgba(0,0,0,.1)}.playlist-wrap[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.playlist-wrap[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#e3e3e3;border-radius:10px}.playlist-wrap[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#cbcbcb;border-radius:10px}.playlist-wrap[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}.playlist-wrap[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{padding:6px 12px;background:#f8f8f8;font-size:16px;color:#545454}.playlist-wrap[_ngcontent-%COMP%]   .list-wrap[_ngcontent-%COMP%]{margin-bottom:40px;max-height:440px;overflow:auto;padding:0 12px 16px;margin-top:16px}.playlist-wrap[_ngcontent-%COMP%]   .list-wrap[_ngcontent-%COMP%]   .ads-info[_ngcontent-%COMP%]:last-child{margin:0}.playlist-wrap[_ngcontent-%COMP%]   .list-wrap[_ngcontent-%COMP%]   .playlist-video[_ngcontent-%COMP%]{cursor:pointer}.playlist-wrap[_ngcontent-%COMP%]   .list-wrap[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:68px;height:51px}.playlist-wrap[_ngcontent-%COMP%]   .list-wrap[_ngcontent-%COMP%]   .video-name[_ngcontent-%COMP%]{font-size:14px}.playlist-wrap[_ngcontent-%COMP%]   .list-wrap[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]{margin-left:12px;margin-top:8px;cursor:pointer}.playlist-wrap[_ngcontent-%COMP%]   .list-wrap[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{color:#18b587}.playlist-wrap[_ngcontent-%COMP%]   .list-wrap[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px;color:#545454;transition:.3s}.suggested-video[_ngcontent-%COMP%]   .video-name[_ngcontent-%COMP%], .suggested-video[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer}.selected[_ngcontent-%COMP%]{background-color:#f4f4f4}.details-row[_ngcontent-%COMP%]{display:flex;align-items:center}.details-row[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{margin:0 5px}"]}),Ae);function Ye(e,t){if(1&e){var n=s.Yb();s.Xb(0,"app-user-tags",5),s.jc("tagSelected",(function(e){return s.Ic(n),s.nc().getVideosByTag(e)})),s.Wb()}}function Qe(e,t){1&e&&(s.Xb(0,"span"),s.Rc(1,"No tags defined for this video"),s.Wb())}function He(e,t){if(1&e){var n=s.Yb();s.Xb(0,"p",30),s.jc("click",(function(){s.Ic(n);var e=t.$implicit;return s.nc(3).openVideoByTag(e.name)})),s.Rc(1),s.Wb()}if(2&e){var i=t.$implicit;s.Cb(1),s.Tc(" #",i.name,"")}}function ze(e,t){if(1&e&&(s.Vb(0),s.Pc(1,He,2,1,"p",29),s.Ub()),2&e){var n=s.nc(2);s.Cb(1),s.uc("ngForOf",n.videoData.tags)}}function Ke(e,t){if(1&e){var n=s.Yb();s.Xb(0,"button",34),s.jc("click",(function(){s.Ic(n);var e=s.nc(3);return e.showTagsForm=!e.showTagsForm})),s.Xb(1,"mat-icon"),s.Rc(2,"edit"),s.Wb(),s.Xb(3,"span"),s.Rc(4,"Edit details"),s.Wb(),s.Wb()}}function Je(e,t){if(1&e&&(s.Xb(0,"div",31),s.Xb(1,"p",32),s.Rc(2),s.Wb(),s.Pc(3,Ke,5,0,"button",33),s.Wb()),2&e){var n=s.nc(2);s.Cb(2),s.Sc(null==n.videoData?null:n.videoData.name),s.Cb(1),s.uc("ngIf",!n.showTagsForm&&(null==n.authUser?null:n.authUser.id)===n.videoData.author_id)}}function Ge(e,t){if(1&e){var n=s.Yb();s.Xb(0,"app-video-details-form",35),s.jc("formReady",(function(e){return s.Ic(n),s.nc(2).saveVideoDetails(e)})),s.Wb()}if(2&e){var i=s.nc(2);s.uc("videoData",i.videoData)}}function Ze(e,t){if(1&e){var n=s.Yb();s.Xb(0,"div",36),s.jc("click",(function(){s.Ic(n);var e=s.nc(2);return e.openChannelPage(e.videoData)})),s.Sb(1,"img",37),s.oc(2,"getImgPath"),s.Xb(3,"div"),s.Xb(4,"p",38),s.Rc(5),s.Wb(),s.Xb(6,"p",39),s.Rc(7),s.Wb(),s.Wb(),s.Wb()}if(2&e){var i=s.nc(2);s.Cb(1),s.uc("src",s.qc(2,3,i.videoData.channel.avatar,"avatars"),s.Kc),s.Cb(4),s.Sc(i.videoData.channel.name),s.Cb(2),s.Sc(i.buildSubscribersCountText(i.videoData))}}function et(e,t){if(1&e){var n=s.Yb();s.Xb(0,"app-video-comments-form",40),s.jc("added",(function(e){return s.Ic(n),s.nc(2).commentAdded(e)})),s.Wb()}if(2&e){var i=s.nc(2);s.uc("videoData",i.videoData)}}function tt(e,t){if(1&e){var n=s.Yb();s.Vb(0),s.Xb(1,"div",6),s.Sb(2,"app-vjs-player",7),s.Wb(),s.Xb(3,"div",8),s.Xb(4,"div",9),s.Pc(5,Qe,2,0,"span",3),s.Pc(6,ze,2,1,"ng-container",3),s.Wb(),s.Xb(7,"div",10),s.Xb(8,"div",11),s.jc("click",(function(){s.Ic(n);var e=s.nc();return e.updateLikes(e.videoData,"like")})),s.Sb(9,"i",12),s.Xb(10,"p"),s.Rc(11),s.Wb(),s.Wb(),s.Xb(12,"div",11),s.jc("click",(function(){s.Ic(n);var e=s.nc();return e.updateLikes(e.videoData,"dislike")})),s.Sb(13,"i",13),s.Xb(14,"p"),s.Rc(15),s.Wb(),s.Wb(),s.Xb(16,"div",14),s.Sb(17,"i",15),s.Xb(18,"p"),s.Rc(19,"Share"),s.Wb(),s.Wb(),s.Xb(20,"div",11),s.jc("click",(function(){s.Ic(n);var e=s.nc();return e.saveVideo(e.videoData)})),s.Sb(21,"i",16),s.Xb(22,"p"),s.Rc(23),s.Wb(),s.Wb(),s.Wb(),s.Wb(),s.Xb(24,"div",17),s.Pc(25,Je,4,2,"div",18),s.Pc(26,Ge,1,1,"app-video-details-form",19),s.Wb(),s.Xb(27,"div",20),s.Xb(28,"span",21),s.Rc(29),s.Wb(),s.Xb(30,"span",22),s.Rc(31,"\xb7"),s.Wb(),s.Xb(32,"span",23),s.Rc(33),s.oc(34,"dateFromNow"),s.Wb(),s.Wb(),s.Pc(35,Ze,8,6,"div",24),s.Xb(36,"div",25),s.Pc(37,et,1,1,"app-video-comments-form",26),s.Sb(38,"mat-spinner",27),s.Sb(39,"app-video-comments-list",28),s.Wb(),s.Ub()}if(2&e){var i=s.nc();s.Cb(2),s.uc("videoData",i.videoData)("options",i.videoJSPlayerOptions),s.Cb(3),s.uc("ngIf",0===(null==i.videoData.tags?null:i.videoData.tags.length)),s.Cb(1),s.uc("ngIf",(null==i.videoData.tags?null:i.videoData.tags.length)>0),s.Cb(3),s.Hb("liked",null==i.userVideoConnection?null:i.userVideoConnection.liked),s.Cb(2),s.Sc(i.videoData.likes),s.Cb(2),s.Hb("disliked",null==i.userVideoConnection?null:i.userVideoConnection.disliked),s.Cb(2),s.Sc(i.videoData.dislikes),s.Cb(5),s.Hb("saved","saved"===(null==i.userVideoConnection?null:i.userVideoConnection.saved)),s.Cb(3),s.Sc("saved"===(null==i.userVideoConnection?null:i.userVideoConnection.saved)?"Saved":"Save"),s.Cb(2),s.uc("ngIf",!i.showTagsForm),s.Cb(1),s.uc("ngIf",i.showTagsForm),s.Cb(3),s.Sc((null==i.videoData?null:i.videoData.views)+" view"+(1===(null==i.videoData?null:i.videoData.views)?"":"s")),s.Cb(4),s.Sc(s.pc(34,23,i.videoData.created_at)),s.Cb(2),s.uc("ngIf",null==i.videoData?null:i.videoData.channel),s.Cb(2),s.uc("ngIf",i.auth.loggedIn()),s.Cb(1),s.uc("diameter",15)("hidden","finished"===i.commentsLoading),s.Cb(1),s.uc("videoData",i.videoData)("videoComments",i.videoComments)}}function nt(e,t){1&e&&s.Sb(0,"app-video-suggestions")}function it(e,t){1&e&&s.Sb(0,"app-video-suggestions")}var ot,ct=((ot=function(){function e(t,n,i,o,s,a,r){_classCallCheck(this,e),this.route=t,this.videoService=n,this.router=i,this.getAuthUser=o,this.auth=s,this.toastr=a,this.loader=r,this.apiUrl=c.b,this.userVideoConnection={liked:0,disliked:0,saved:"",viewed:!1},this.videoJSPlayerOptions=c.m,this.showTagsForm=!1,this.isSmallScreen=Y.a.isSmallScreen(),this.commentsRefreshed=!1,this.videoComments=[],this.commentsLoading="idle",this.subscriptions=[],this.authUser=this.getAuthUser.transform()}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.subscriptions.push(this.videoService.getVideoById({id:this.route.snapshot.queryParams.id}).subscribe((function(t){e.videoData=t,e.auth.loggedIn()&&(e.userVideoConnection=e.checkUserVideoConnection(t),e.updateViewsCount(t),e.indexUserTags(t),e.getComments())})))}},{key:"checkUserVideoConnection",value:function(e){var t,n,i,o=this,c=null==e?void 0:e.users_vids.find((function(e){return e.id===o.authUser.id}));return c?{liked:null===(t=c.users_videos)||void 0===t?void 0:t.liked,disliked:null===(n=c.users_videos)||void 0===n?void 0:n.disliked,saved:c.users_videos.saved?"saved":"",viewed:!!(null===(i=null==c?void 0:c.users_videos)||void 0===i?void 0:i.viewed)}:this.userVideoConnection}},{key:"updateViewsCount",value:function(e){var t=this;this.userVideoConnection.viewed||this.subscriptions.push(this.videoService.updateViews({user_id:this.authUser.id,video_id:e.id}).subscribe((function(e){t.videoData=e})))}},{key:"updateLikes",value:function(e,t){this.auth.loggedIn()?(e=this.getLikesState(t,e),this.videoService.updateLikes({video_id:e.id,user_id:this.authUser.id,likes:e.likes,dislikes:e.dislikes,liked:this.userVideoConnection.liked,disliked:this.userVideoConnection.disliked,saved:e.saved}).subscribe((function(e){}))):this.toastr.error("Please log in first to take this action")}},{key:"getLikesState",value:function(e,t){return"like"===e?(this.userVideoConnection.liked=+!this.userVideoConnection.liked,this.userVideoConnection.disliked&&(t.dislikes+=0===t.dislikes?0:-1),this.userVideoConnection.disliked=0,t.likes+=this.userVideoConnection.liked?1:-1):(this.userVideoConnection.disliked=+!this.userVideoConnection.disliked,this.userVideoConnection.liked&&(t.likes+=0===t.likes?0:-1),this.userVideoConnection.liked=0,t.dislikes+=this.userVideoConnection.disliked?1:-1),t}},{key:"indexUserTags",value:function(e){var t,n={user_id:this.authUser.id,video_id:e.id,tags:null===(t=this.videoData)||void 0===t?void 0:t.tags};this.subscriptions.push(this.videoService.indexUserTags(n).subscribe((function(e){})))}},{key:"openChannelPage",value:function(e){this.router.navigate(["channels/show"],{queryParams:{username:e.users_vids[0].username}})}},{key:"openVideoByTag",value:function(e){return Object(g.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.router.navigate(["videos"],{queryParams:{tag:e}});case 2:case"end":return t.stop()}}),t,this)})))}},{key:"saveVideo",value:function(e){var t=this;this.subscriptions.push(this.videoService.saveVideo({video_id:e.id,user_id:this.authUser.id,saved:"saved"===this.userVideoConnection.saved?0:1}).subscribe((function(e){t.userVideoConnection.saved=e.saved?"saved":""})))}},{key:"saveVideoDetails",value:function(e){var t=this;this.videoData.tags=e.tags,this.subscriptions.push(this.videoService.saveVideoDetails(Object.assign(Object.assign({},e),{video_id:this.videoData.id})).subscribe((function(e){t.videoData=e,t.showTagsForm=!1})))}},{key:"getComments",value:function(){var e=this;this.commentsLoading="loading",this.subscriptions.push(this.videoService.getVideoComments({video_id:this.videoData.id}).subscribe((function(t){e.videoComments=t,e.commentsLoading="finished"})))}},{key:"commentAdded",value:function(e){this.commentsRefreshed=!0,this.videoComments=e}},{key:"getVideosByTag",value:function(e){return Object(g.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.router.navigate(["videos"],{queryParams:{tag:e}});case 2:case"end":return t.stop()}}),t,this)})))}},{key:"buildSubscribersCountText",value:function(e){var t=e.channel.subscribers_count;return t+" subscriber"+(1===t?"":"s")}},{key:"ngAfterViewInit",value:function(){}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach((function(e){return e.unsubscribe()}))}}]),e}()).\u0275fac=function(e){return new(e||ot)(s.Rb(o.a),s.Rb(a.a),s.Rb(o.d),s.Rb(u.a),s.Rb(Q.a),s.Rb(H.b),s.Rb(z.a))},ot.\u0275cmp=s.Lb({type:ot,selectors:[["app-play-video"]],decls:7,vars:4,consts:[[3,"tagSelected",4,"ngIf"],[1,"ads-block"],[1,"ads-block-left"],[4,"ngIf"],[1,"ads-block-right"],[3,"tagSelected"],[1,"videoWrap"],[3,"videoData","options"],[1,"main-tags"],[1,"main-tags-text"],[1,"main-tags-like"],[1,"main-tags-share",3,"click"],[1,"fas","fa-thumbs-up"],[1,"fas","fa-thumbs-down"],[1,"main-tags-share"],[1,"fas","fa-share-alt"],[1,"fas","fa-plus-square"],[1,"tags-container"],["class","editable-details",4,"ngIf"],[3,"videoData","formReady",4,"ngIf"],[1,"details-row"],[1,"views-count"],[1,"dot"],[1,"date"],["class","channel-block",3,"click",4,"ngIf"],[1,"comments-block"],["class","w-100",3,"videoData","added",4,"ngIf"],[3,"diameter","hidden"],[3,"videoData","videoComments"],["class","tag",3,"click",4,"ngFor","ngForOf"],[1,"tag",3,"click"],[1,"editable-details"],[1,"video-title"],["id","add-tags",3,"click",4,"ngIf"],["id","add-tags",3,"click"],[3,"videoData","formReady"],[1,"channel-block",3,"click"],["alt","avatar",1,"avatar",3,"src"],[1,"channel-name"],[1,"subscribers-count"],[1,"w-100",3,"videoData","added"]],template:function(e,t){1&e&&(s.Pc(0,Ye,1,0,"app-user-tags",0),s.Xb(1,"div",1),s.Xb(2,"div",2),s.Pc(3,tt,40,25,"ng-container",3),s.Pc(4,nt,1,0,"app-video-suggestions",3),s.Wb(),s.Xb(5,"div",4),s.Pc(6,it,1,0,"app-video-suggestions",3),s.Wb(),s.Wb()),2&e&&(s.uc("ngIf",t.auth.loggedIn()),s.Cb(3),s.uc("ngIf",t.videoData),s.Cb(1),s.uc("ngIf",t.isSmallScreen),s.Cb(2),s.uc("ngIf",!t.isSmallScreen))},directives:[i.m,K.a,te,b.b,Re,i.l,m.a,je,ue,Ne],pipes:[y.a,C.a],styles:[".plyr[_ngcontent-%COMP%]{height:400px!important;width:100%}.plyr[_ngcontent-%COMP%]   .plyr__control--overlaid[_ngcontent-%COMP%]{background-color:#18b587!important}.plyr[_ngcontent-%COMP%]   .plyr--video[_ngcontent-%COMP%]   .plyr__control[aria-expanded=true][_ngcontent-%COMP%], .plyr[_ngcontent-%COMP%]   .plyr__controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus, .plyr[_ngcontent-%COMP%]   .plyr__controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#18b587!important}.plyr--full-ui[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%], .saved[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .saved[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#18b587!important}#add-tags[_ngcontent-%COMP%]{background-color:#18b587;color:#fff;margin-left:10px;display:flex;align-items:center;padding:8px 24px}.tag[_ngcontent-%COMP%]{cursor:pointer}.details-row[_ngcontent-%COMP%]{display:flex;align-items:center}.details-row[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{margin:0 10px}.channel-block[_ngcontent-%COMP%]{cursor:pointer;border-top:.5px solid #c9c9c9;border-bottom:.5px solid #c9c9c9;padding:12px 0}.main-tags[_ngcontent-%COMP%], .tags-container[_ngcontent-%COMP%]   .editable-details[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.main-tags[_ngcontent-%COMP%]{margin-bottom:16px;margin-top:24px;align-items:flex-start}.main-tags[_ngcontent-%COMP%]   .main-tags-text[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;flex:1;margin-right:24px;align-items:center}.main-tags[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#0035c6;font-size:16px;font-family:Muli-Bold;margin-right:16px;margin-bottom:8px}.main-tags[_ngcontent-%COMP%]   .main-tags-like[_ngcontent-%COMP%]{display:flex;color:#545454}.main-tags[_ngcontent-%COMP%]   .main-tags-share[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer}.main-tags[_ngcontent-%COMP%]   .main-tags-share[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-left:5px;color:#545454;font-size:12px;font-family:Muli-Light;margin-bottom:0!important}"]}),ot);function st(e,t){if(1&e){var n=s.Yb();s.Xb(0,"li",18),s.jc("click",(function(){s.Ic(n);var e=t.$implicit;return s.nc(4).getVideosByTag(e.name)})),s.Xb(1,"span"),s.Rc(2),s.Wb(),s.Wb()}if(2&e){var i=t.$implicit;s.Cb(2),s.Sc(i.name)}}function at(e,t){if(1&e){var n=s.Yb();s.Xb(0,"div",4),s.Xb(1,"div",5),s.Xb(2,"img",6),s.jc("click",(function(){s.Ic(n);var e=t.$implicit,i=s.nc(3);return i.openVideoPage(e,i.userVideos.username)})),s.oc(3,"getImgPath"),s.Wb(),s.Xb(4,"span",7),s.Rc(5),s.Wb(),s.Wb(),s.Xb(6,"div",8),s.Xb(7,"h4",9),s.Rc(8),s.Wb(),s.Xb(9,"div",10),s.Xb(10,"span",11),s.jc("click",(function(){s.Ic(n);var e=t.$implicit;return s.nc(3).openChannelPage(e.user.channel,e.user.username)})),s.Rc(11),s.Wb(),s.Xb(12,"span",12),s.Rc(13,"\xb7"),s.Wb(),s.Xb(14,"span",13),s.Rc(15),s.Wb(),s.Xb(16,"span",12),s.Rc(17,"\xb7"),s.Wb(),s.Xb(18,"span",14),s.Rc(19),s.oc(20,"dateFromNow"),s.Wb(),s.Wb(),s.Xb(21,"p",15),s.Rc(22),s.Wb(),s.Xb(23,"div",16),s.Xb(24,"ul"),s.Pc(25,st,3,1,"li",17),s.Wb(),s.Wb(),s.Wb(),s.Wb()}if(2&e){var i=t.$implicit;s.Cb(2),s.uc("src",s.pc(3,8,i.thumbnail),s.Kc),s.Cb(3),s.Sc(i.duration),s.Cb(3),s.Sc(i.name),s.Cb(3),s.Sc(i.channel.name),s.Cb(4),s.Tc(" ","live"===i.status?"17k watching":i.views+" view"+(1===i.views?"":"s")," "),s.Cb(4),s.Sc(s.pc(20,10,i.created_at)),s.Cb(3),s.Tc(" ",i.description," "),s.Cb(3),s.uc("ngForOf",null==i?null:i.tags)}}function rt(e,t){if(1&e&&(s.Vb(0),s.Pc(1,at,26,12,"div",3),s.Ub()),2&e){var n=s.nc(2);s.Cb(1),s.uc("ngForOf",n.userVideos.users_vids)}}function lt(e,t){if(1&e&&(s.Xb(0,"div",1),s.Pc(1,rt,2,1,"ng-container",2),s.Wb()),2&e){var n=s.nc();s.Cb(1),s.uc("ngIf",!n.search)}}var ut,dt,mt,pt,bt=((ut=function(){function e(t,n,i,o,s,a){_classCallCheck(this,e),this.videoService=t,this.router=n,this.subject=i,this.channelsService=o,this.route=s,this.getAuthUser=a,this.channelsVideos=[],this.apiUrl=c.b}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.authUser=this.getAuthUser.transform(),this.videoService.getUserSavedVideos({user_id:this.authUser.id}).subscribe((function(t){e.userVideos=t}))}},{key:"openVideoPage",value:function(e,t){return Object(g.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=Object(h.a)(e,t),n.next=3,this.router.navigate([i.route],{queryParams:i.params});case 3:case"end":return n.stop()}}),n,this)})))}},{key:"openChannelPage",value:function(e,t){this.router.navigate(["channels/show"],{queryParams:{username:t}})}},{key:"getVideosByTag",value:function(e){return Object(g.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.router.navigate(["videos"],{queryParams:{tag:e}});case 2:case"end":return t.stop()}}),t,this)})))}}]),e}()).\u0275fac=function(e){return new(e||ut)(s.Rb(a.a),s.Rb(o.d),s.Rb(r.a),s.Rb(l.a),s.Rb(o.a),s.Rb(u.a))},ut.\u0275cmp=s.Lb({type:ut,selectors:[["app-show-saved-videos"]],decls:1,vars:1,consts:[["id","videos-list",4,"ngIf"],["id","videos-list"],[4,"ngIf"],["class","video-container flex-wrap",4,"ngFor","ngForOf"],[1,"video-container","flex-wrap"],[1,"thumbnail"],[3,"src","click"],[1,"duration"],[1,"details"],[1,"title"],[1,"shortened-details"],[1,"channel-name",3,"click"],[1,"dot"],[1,"watchers-count"],[1,"upload-time"],[1,"shortened-description"],[1,"tags"],[3,"click",4,"ngFor","ngForOf"],[3,"click"]],template:function(e,t){1&e&&s.Pc(0,lt,2,1,"div",0),2&e&&s.uc("ngIf",t.userVideos)},directives:[i.m,i.l],pipes:[C.a,y.a],styles:[".filter-toggle-btn[_ngcontent-%COMP%]{text-transform:uppercase;background-color:unset;display:flex;align-items:center;font-family:Muli-Bold;padding:10px}.filter-toggle-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:10px}"]}),ut),gt=n("NUQi"),ht=n("8OJ3"),vt=n("qe5e"),ft=[{path:"test",component:(dt=function(){function e(){_classCallCheck(this,e),this.config={controls:!0,bigPlayButton:!1,width:320,height:240,fluid:!1,plugins:{record:{audio:!0,video:!0,maxLength:110,debug:!0}}}}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ngAfterViewInit",value:function(){this.player=Object(ht.default)(document.getElementById("video"),this.config,(function(){var e="Using video.js "+ht.default.VERSION+" with videojs-record "+ht.default.getPluginVersion("record")+" and recordrtc "+vt.version;ht.default.log(e)}),(function(){}));var e=this.player;this.player.on("finishRecord",(function(){console.log("finished recording: ",e.recordedData)}))}}]),e}(),dt.\u0275fac=function(e){return new(e||dt)},dt.\u0275cmp=s.Lb({type:dt,selectors:[["app-videojs-test"]],decls:1,vars:0,consts:[["id","video","playsinline","",1,"video-js"]],template:function(e,t){1&e&&s.Sb(0,"video",0)},styles:[""]}),dt)},{path:"",component:N,pathMatch:"full",data:{title:"Videos"}},{path:"play",component:ct,data:{title:"Play Video"}},{path:"saved",component:bt,canActivate:[gt.a],data:{title:"Saved Videos"}}],Ct=((mt=function e(){_classCallCheck(this,e)}).\u0275mod=s.Pb({type:mt}),mt.\u0275inj=s.Ob({factory:function(e){return new(e||mt)},imports:[[o.f.forChild(ft)],o.f]}),mt),yt=n("PCNd"),_t=((pt=function e(){_classCallCheck(this,e)}).\u0275mod=s.Pb({type:pt}),pt.\u0275inj=s.Ob({factory:function(e){return new(e||pt)},imports:[[i.c,Ct,yt.a]]}),pt)},LllP:function(e,t,n){"use strict";n.r(t);var i=n("8OJ3"),o=n("7zRj"),c=n.n(o);function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var a=function e(t){var n=this;if(i.default.browser.IS_IE8)for(var o in n=c.a.createElement("custom"),e.prototype)"constructor"!==o&&(n[o]=e.prototype[o]);return n.id=t.id,n.label=n.id,n.width=t.width,n.height=t.height,n.bitrate=t.bandwidth,n.enabled_=t.enabled,Object.defineProperty(n,"enabled",{get:function(){return n.enabled_()},set:function(e){n.enabled_(e)}}),n},r=function(e){var t,n;function o(){var t,n=s(s(t=e.call(this)||this));if(i.default.browser.IS_IE8)for(var a in n=c.a.createElement("custom"),o.prototype)"constructor"!==a&&(n[a]=o.prototype[a]);return n.levels_=[],n.selectedIndex_=-1,Object.defineProperty(n,"selectedIndex",{get:function(){return n.selectedIndex_}}),Object.defineProperty(n,"length",{get:function(){return n.levels_.length}}),n||s(t)}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r=o.prototype;return r.addQualityLevel=function(e){var t=this.getQualityLevelById(e.id);if(t)return t;var n=this.levels_.length;return t=new a(e),""+n in this||Object.defineProperty(this,n,{get:function(){return this.levels_[n]}}),this.levels_.push(t),this.trigger({qualityLevel:t,type:"addqualitylevel"}),t},r.removeQualityLevel=function(e){for(var t=null,n=0,i=this.length;n<i;n++)if(this[n]===e){t=this.levels_.splice(n,1)[0],this.selectedIndex_===n?this.selectedIndex_=-1:this.selectedIndex_>n&&this.selectedIndex_--;break}return t&&this.trigger({qualityLevel:e,type:"removequalitylevel"}),t},r.getQualityLevelById=function(e){for(var t=0,n=this.length;t<n;t++){var i=this[t];if(i.id===e)return i}return null},r.dispose=function(){this.selectedIndex_=-1,this.levels_.length=0},o}(i.default.EventTarget);for(var l in r.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"},r.prototype.allowedEvents_)r.prototype["on"+l]=null;var u=function(e){return t=this,i.default.mergeOptions({},e),n=t.qualityLevels,o=new r,t.on("dispose",(function e(){o.dispose(),t.qualityLevels=n,t.off("dispose",e)})),t.qualityLevels=function(){return o},t.qualityLevels.VERSION="2.0.9",o;var t,n,o};(i.default.registerPlugin||i.default.plugin)("qualityLevels",u),u.VERSION="2.0.9",t.default=u},vWzC:function(e,t,n){"use strict";n.r(t);var i=n("8OJ3"),o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=(function(){function e(e){this.value=e}function t(t){var n,i;function o(n,i){try{var s=t[n](i),a=s.value;a instanceof e?Promise.resolve(a.value).then((function(e){o("next",e)}),(function(e){o("throw",e)})):c(s.done?"return":"normal",s.value)}catch(r){c("throw",r)}}function c(e,t){switch(e){case"return":n.resolve({value:t,done:!0});break;case"throw":n.reject(t);break;default:n.resolve({value:t,done:!1})}(n=n.next)?o(n.key,n.arg):i=null}this._invoke=function(e,t){return new Promise((function(c,s){var a={key:e,arg:t,resolve:c,reject:s,next:null};i?i=i.next=a:(n=i=a,o(e,t))}))},"function"!=typeof t.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)}}(),function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}),s=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},r=i.default.getComponent("MenuButton"),l=i.default.getComponent("Menu"),u=i.default.getComponent("Component"),d=i.default.dom,m=function(e){function t(n){return c(this,t),a(this,e.call(this,n,{title:n.localize("Quality"),name:"QualityButton"}))}return s(t,e),t.prototype.createItems=function(){return[]},t.prototype.createMenu=function(){var e,t=new l(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var n=d.createEl("li",{className:"vjs-menu-title",innerHTML:(e=this.options_.title,"string"!=typeof e?e:e.charAt(0).toUpperCase()+e.slice(1)),tabIndex:-1}),i=new u(this.player_,{el:n});this.hideThreshold_+=1,t.addItem(i)}if(this.items=this.createItems(),this.items)for(var o=0;o<this.items.length;o++)t.addItem(this.items[o]);return t},t}(r),p=function(e){function t(n,i,o,s){c(this,t);var r=a(this,e.call(this,n,{label:i.label,selectable:!0,selected:i.selected||!1}));return r.item=i,r.qualityButton=o,r.plugin=s,r}return s(t,e),t.prototype.handleClick=function(){for(var e=0;e<this.qualityButton.items.length;++e)this.qualityButton.items[e].selected(!1);this.plugin.setQuality(this.item.value),this.selected(!0)},t}(i.default.getComponent("MenuItem")),b={},g=i.default.registerPlugin||i.default.plugin,h=function(){function e(t,n){c(this,e),this.player=t,this.config=n,this.player.qualityLevels&&this.getHls()&&(this.createQualityButton(),this.bindPlayerEvents())}return e.prototype.getHls=function(){return this.player.tech({IWillNotUseThisInPlugins:!0}).hls},e.prototype.bindPlayerEvents=function(){this.player.qualityLevels().on("addqualitylevel",this.onAddQualityLevel.bind(this))},e.prototype.createQualityButton=function(){var e=this.player;this._qualityButton=new m(e);var t=e.controlBar.children().length-2,n=e.controlBar.addChild(this._qualityButton,{componentClass:"qualitySelector"},this.config.placementIndex||t);if(n.addClass("vjs-quality-selector"),this.config.displayCurrentQuality)this.setButtonInnerText("auto");else{var i=" "+(this.config.vjsIconClass||"vjs-icon-hd");n.menuButton_.$(".vjs-icon-placeholder").className+=i}n.removeClass("vjs-hidden")},e.prototype.setButtonInnerText=function(e){this._qualityButton.menuButton_.$(".vjs-icon-placeholder").innerHTML=e},e.prototype.getQualityMenuItem=function(e){return new p(this.player,e,this._qualityButton,this)},e.prototype.onAddQualityLevel=function(){for(var e=this,t=this.player,n=t.qualityLevels().levels_||[],i=[],c=function(t){if(!i.filter((function(e){return e.item&&e.item.value===n[t].height})).length){var o=e.getQualityMenuItem.call(e,{label:n[t].height+"p",value:n[t].height});i.push(o)}},s=0;s<n.length;++s)c(s);i.sort((function(e,t){return"object"!==(void 0===e?"undefined":o(e))||"object"!==(void 0===t?"undefined":o(t))||e.item.value<t.item.value?-1:e.item.value>t.item.value?1:0})),i.push(this.getQualityMenuItem.call(this,{label:t.localize("Auto"),value:"auto",selected:!0})),this._qualityButton&&(this._qualityButton.createItems=function(){return i},this._qualityButton.update())},e.prototype.setQuality=function(e){var t=this.player.qualityLevels();this._currentQuality=e,this.config.displayCurrentQuality&&this.setButtonInnerText("auto"===e?e:e+"p");for(var n=0;n<t.length;++n){var i=t[n];i.enabled=i.height===e||"auto"===e}this._qualityButton.unpressButton()},e.prototype.getCurrentQuality=function(){return this._currentQuality||"auto"},e}(),v=function(e){var t=this;this.ready((function(){!function(e,t){e.addClass("vjs-hls-quality-selector"),e.hlsQualitySelector=new h(e,t)}(t,i.default.mergeOptions(b,e))}))};g("hlsQualitySelector",v),v.VERSION="1.1.4",t.default=v}}]);