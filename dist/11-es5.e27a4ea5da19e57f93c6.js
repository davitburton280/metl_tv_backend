function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"2yxt":function(e,t,n){"use strict";n.r(t),n.d(t,"ChatModule",(function(){return Ue}));var o,s,i=n("ofXK"),c=n("tyNb"),r=n("fXoL"),a=n("3Pt+"),u=((o=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||o)},o.\u0275cmp=r.Lb({type:o,selectors:[["app-show-chatrooms"]],decls:194,vars:0,consts:[[1,"chatrooms-list"],[1,"create-post"],[1,"img"],["src","assets/img/item-4.png","alt",""],[1,"select"],["name","","id",""],["value",""],[1,"input"],["placeholder","Title","type","text"],[1,"add-photo"],["type","file"],[1,"material-icons"],[1,"btn"],[1,"post"],[1,"categories"],[1,"active"],[1,"search"],["placeholder","Search","type","text"],[1,"chatrooms-items"],[1,"item"],[1,"posted"],[1,"info"],[1,"left-wrap"],[1,"voting-container"],[1,"vote-up-btn","active"],[1,"vote-count"],[1,"vote-down-btn"],[1,"right-wrap"],["src","assets/img/jp-valeryunsplash.png","alt",""],[1,"post-menu"],[1,"menu"],["href",""],[1,"dotes"]],template:function(e,t){1&e&&(r.Xb(0,"div",0),r.Xb(1,"h1"),r.Rc(2,"Chat Rooms"),r.Wb(),r.Xb(3,"div",1),r.Xb(4,"div",2),r.Sb(5,"img",3),r.Xb(6,"span"),r.Rc(7,"Create Post"),r.Wb(),r.Wb(),r.Xb(8,"div",4),r.Xb(9,"select",5),r.Xb(10,"option",6),r.Rc(11,"Choose community"),r.Wb(),r.Xb(12,"option",6),r.Rc(13,"option"),r.Wb(),r.Wb(),r.Wb(),r.Xb(14,"div",7),r.Sb(15,"input",8),r.Wb(),r.Xb(16,"label",9),r.Sb(17,"input",10),r.Xb(18,"span",11),r.Rc(19,"image"),r.Wb(),r.Rc(20," Add Photo or Video "),r.Wb(),r.Xb(21,"div",12),r.Xb(22,"button",13),r.Rc(23,"Post"),r.Wb(),r.Wb(),r.Wb(),r.Xb(24,"ul",14),r.Xb(25,"li"),r.Xb(26,"a",15),r.Xb(27,"span",11),r.Rc(28,"whatshot"),r.Wb(),r.Rc(29,"Hot"),r.Wb(),r.Wb(),r.Xb(30,"li"),r.Xb(31,"a"),r.Xb(32,"span",11),r.Rc(33,"new_releases"),r.Wb(),r.Rc(34,"New"),r.Wb(),r.Wb(),r.Xb(35,"li"),r.Xb(36,"a"),r.Xb(37,"span",11),r.Rc(38,"trending_up"),r.Wb(),r.Rc(39,"Top"),r.Wb(),r.Wb(),r.Xb(40,"li"),r.Xb(41,"a"),r.Xb(42,"span",11),r.Rc(43,"new_releases"),r.Wb(),r.Rc(44,"Best of the week"),r.Wb(),r.Wb(),r.Wb(),r.Xb(45,"div",16),r.Sb(46,"input",17),r.Xb(47,"span",11),r.Rc(48,"search"),r.Wb(),r.Wb(),r.Xb(49,"div",18),r.Xb(50,"div",19),r.Xb(51,"div",20),r.Xb(52,"p"),r.Rc(53,"Posted by"),r.Xb(54,"span"),r.Rc(55,"u/alotasalad"),r.Wb(),r.Wb(),r.Xb(56,"p"),r.Rc(57,"4 minutes ago"),r.Wb(),r.Wb(),r.Xb(58,"div",21),r.Xb(59,"div",22),r.Xb(60,"div",23),r.Xb(61,"button",24),r.Xb(62,"span",11),r.Rc(63,"forward"),r.Wb(),r.Wb(),r.Xb(64,"div",25),r.Rc(65,"50k"),r.Wb(),r.Xb(66,"button",26),r.Xb(67,"span",11),r.Rc(68,"forward"),r.Wb(),r.Wb(),r.Wb(),r.Wb(),r.Xb(69,"div",27),r.Xb(70,"p"),r.Rc(71,"This is my friends loss but to make matters even worse he borrowed the money from his Nigerian boss and yolod everything on fds otw up and down did I forget to mention that 4K in the the account right now is also his bosses money \ud83d\udcb0"),r.Wb(),r.Sb(72,"img",28),r.Xb(73,"div",29),r.Xb(74,"div",30),r.Xb(75,"a",31),r.Xb(76,"span",11),r.Rc(77,"chat_bubble"),r.Wb(),r.Rc(78,"Comments"),r.Wb(),r.Xb(79,"a",31),r.Xb(80,"span",11),r.Rc(81,"share"),r.Wb(),r.Rc(82,"Share"),r.Wb(),r.Wb(),r.Xb(83,"div",32),r.Xb(84,"span",11),r.Rc(85,"more_vert"),r.Wb(),r.Wb(),r.Wb(),r.Wb(),r.Wb(),r.Wb(),r.Xb(86,"div",19),r.Xb(87,"div",20),r.Xb(88,"p"),r.Rc(89,"Posted by"),r.Xb(90,"span"),r.Rc(91,"u/alotasalad"),r.Wb(),r.Wb(),r.Xb(92,"p"),r.Rc(93,"4 minutes ago"),r.Wb(),r.Wb(),r.Xb(94,"div",21),r.Xb(95,"div",22),r.Xb(96,"div",23),r.Xb(97,"button",24),r.Xb(98,"span",11),r.Rc(99,"forward"),r.Wb(),r.Wb(),r.Xb(100,"div",25),r.Rc(101,"50k"),r.Wb(),r.Xb(102,"button",26),r.Xb(103,"span",11),r.Rc(104,"forward"),r.Wb(),r.Wb(),r.Wb(),r.Wb(),r.Xb(105,"div",27),r.Xb(106,"p"),r.Rc(107,"This is my friends loss but to make matters even worse he borrowed the money from his Nigerian boss and yolod everything on fds otw up and down did I forget to mention that 4K in the the account right now is also his bosses money \ud83d\udcb0"),r.Wb(),r.Sb(108,"img",28),r.Xb(109,"div",29),r.Xb(110,"div",30),r.Xb(111,"a",31),r.Xb(112,"span",11),r.Rc(113,"chat_bubble"),r.Wb(),r.Rc(114,"Comments"),r.Wb(),r.Xb(115,"a",31),r.Xb(116,"span",11),r.Rc(117,"share"),r.Wb(),r.Rc(118,"Share"),r.Wb(),r.Wb(),r.Xb(119,"div",32),r.Xb(120,"span",11),r.Rc(121,"more_vert"),r.Wb(),r.Wb(),r.Wb(),r.Wb(),r.Wb(),r.Wb(),r.Xb(122,"div",19),r.Xb(123,"div",20),r.Xb(124,"p"),r.Rc(125,"Posted by"),r.Xb(126,"span"),r.Rc(127,"u/alotasalad"),r.Wb(),r.Wb(),r.Xb(128,"p"),r.Rc(129,"4 minutes ago"),r.Wb(),r.Wb(),r.Xb(130,"div",21),r.Xb(131,"div",22),r.Xb(132,"div",23),r.Xb(133,"button",24),r.Xb(134,"span",11),r.Rc(135,"forward"),r.Wb(),r.Wb(),r.Xb(136,"div",25),r.Rc(137,"50k"),r.Wb(),r.Xb(138,"button",26),r.Xb(139,"span",11),r.Rc(140,"forward"),r.Wb(),r.Wb(),r.Wb(),r.Wb(),r.Xb(141,"div",27),r.Xb(142,"p"),r.Rc(143,"This is my friends loss but to make matters even worse he borrowed the money from his Nigerian boss and yolod everything on fds otw up and down did I forget to mention that 4K in the the account right now is also his bosses money \ud83d\udcb0"),r.Wb(),r.Sb(144,"img",28),r.Xb(145,"div",29),r.Xb(146,"div",30),r.Xb(147,"a",31),r.Xb(148,"span",11),r.Rc(149,"chat_bubble"),r.Wb(),r.Rc(150,"Comments"),r.Wb(),r.Xb(151,"a",31),r.Xb(152,"span",11),r.Rc(153,"share"),r.Wb(),r.Rc(154,"Share"),r.Wb(),r.Wb(),r.Xb(155,"div",32),r.Xb(156,"span",11),r.Rc(157,"more_vert"),r.Wb(),r.Wb(),r.Wb(),r.Wb(),r.Wb(),r.Wb(),r.Xb(158,"div",19),r.Xb(159,"div",20),r.Xb(160,"p"),r.Rc(161,"Posted by"),r.Xb(162,"span"),r.Rc(163,"u/alotasalad"),r.Wb(),r.Wb(),r.Xb(164,"p"),r.Rc(165,"4 minutes ago"),r.Wb(),r.Wb(),r.Xb(166,"div",21),r.Xb(167,"div",22),r.Xb(168,"div",23),r.Xb(169,"button",24),r.Xb(170,"span",11),r.Rc(171,"forward"),r.Wb(),r.Wb(),r.Xb(172,"div",25),r.Rc(173,"50k"),r.Wb(),r.Xb(174,"button",26),r.Xb(175,"span",11),r.Rc(176,"forward"),r.Wb(),r.Wb(),r.Wb(),r.Wb(),r.Xb(177,"div",27),r.Xb(178,"p"),r.Rc(179,"This is my friends loss but to make matters even worse he borrowed the money from his Nigerian boss and yolod everything on fds otw up and down did I forget to mention that 4K in the the account right now is also his bosses money \ud83d\udcb0"),r.Wb(),r.Sb(180,"img",28),r.Xb(181,"div",29),r.Xb(182,"div",30),r.Xb(183,"a",31),r.Xb(184,"span",11),r.Rc(185,"chat_bubble"),r.Wb(),r.Rc(186,"Comments"),r.Wb(),r.Xb(187,"a",31),r.Xb(188,"span",11),r.Rc(189,"share"),r.Wb(),r.Rc(190,"Share"),r.Wb(),r.Wb(),r.Xb(191,"div",32),r.Xb(192,"span",11),r.Rc(193,"more_vert"),r.Wb(),r.Wb(),r.Wb(),r.Wb(),r.Wb(),r.Wb(),r.Wb(),r.Wb())},directives:[a.t,a.y],styles:[".categories[_ngcontent-%COMP%]{display:flex;padding-bottom:10px;flex-wrap:wrap;border-bottom:.5px solid #e2e2e2;margin-bottom:24px}.categories[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-right:2px;margin-bottom:8px;width:-webkit-max-content;width:-moz-max-content;width:max-content}.categories[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{height:22px;border-radius:11px;padding:2px 11px;display:flex;justify-content:center;align-items:center;background:#eee;transition:.3s ease-in-out;color:#545454!important;font-size:14px;font-family:Muli-Regular;cursor:pointer}.categories[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%], .categories[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:#f53c6f;color:#fff!important;cursor:pointer}.chatrooms-list[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:32px;color:#18b587;font-weight:700}.chatrooms-list[_ngcontent-%COMP%]   .create-post[_ngcontent-%COMP%]{margin:32px 0;padding:16px 24px 24px;background:#f5f5f5}.chatrooms-list[_ngcontent-%COMP%]   .create-post[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{display:flex;align-items:center}.chatrooms-list[_ngcontent-%COMP%]   .create-post[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;-o-object-fit:cover;object-fit:cover}.chatrooms-list[_ngcontent-%COMP%]   .create-post[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:16px;font-size:16px;font-weight:700;color:#545454}.chatrooms-list[_ngcontent-%COMP%]   .create-post[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]{margin-top:12px}.chatrooms-list[_ngcontent-%COMP%]   .create-post[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{min-width:240px;padding:8px 12px;border:0;color:#545454;outline:none}.chatrooms-list[_ngcontent-%COMP%]   .create-post[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{margin-top:12px}.chatrooms-list[_ngcontent-%COMP%]   .create-post[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:8px 14px;border:0;color:#545454;outline:none}.chatrooms-list[_ngcontent-%COMP%]   .create-post[_ngcontent-%COMP%]   .add-photo[_ngcontent-%COMP%]{margin-top:24px;margin-bottom:0;width:100%;display:flex;align-items:center;color:#c9c9c9;font-size:16px;font-weight:700;transition:all .1s ease;cursor:pointer}.chatrooms-list[_ngcontent-%COMP%]   .create-post[_ngcontent-%COMP%]   .add-photo[_ngcontent-%COMP%]:hover{color:#18b587}.chatrooms-list[_ngcontent-%COMP%]   .create-post[_ngcontent-%COMP%]   .add-photo[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:8px}.chatrooms-list[_ngcontent-%COMP%]   .create-post[_ngcontent-%COMP%]   .add-photo[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.chatrooms-list[_ngcontent-%COMP%]   .create-post[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:12px;padding:0;cursor:auto}.chatrooms-list[_ngcontent-%COMP%]   .create-post[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:6px 24px;background:#c9c9c9;color:#fff}.chatrooms-list[_ngcontent-%COMP%]   .create-post[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#18b587}.chatrooms-list[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{position:relative;margin-bottom:24px}.chatrooms-list[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px 48px 12px 16px;border:0;background:hsla(0,0%,50.6%,.13)}.chatrooms-list[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;right:14px;top:50%;transform:translateY(-50%);color:#545454;cursor:pointer}.chatrooms-list[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%]{margin-bottom:16px;padding:0;border:0}.chatrooms-list[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}.chatrooms-list[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px;margin-right:8px}.chatrooms-list[_ngcontent-%COMP%]   .chatrooms-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{margin-bottom:32px;padding:12px;background:#f5f5f5}.chatrooms-list[_ngcontent-%COMP%]   .chatrooms-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .posted[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.chatrooms-list[_ngcontent-%COMP%]   .chatrooms-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .posted[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:12px;color:#545454}.chatrooms-list[_ngcontent-%COMP%]   .chatrooms-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .posted[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:12px;color:#18b587}.chatrooms-list[_ngcontent-%COMP%]   .chatrooms-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;margin-top:16px}.chatrooms-list[_ngcontent-%COMP%]   .chatrooms-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .left-wrap[_ngcontent-%COMP%]   .voting-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.chatrooms-list[_ngcontent-%COMP%]   .chatrooms-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .left-wrap[_ngcontent-%COMP%]   .voting-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;background:transparent;color:#c9c9c9}.chatrooms-list[_ngcontent-%COMP%]   .chatrooms-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .left-wrap[_ngcontent-%COMP%]   .voting-container[_ngcontent-%COMP%]   button.vote-up-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{transform:rotate(-90deg)}.chatrooms-list[_ngcontent-%COMP%]   .chatrooms-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .left-wrap[_ngcontent-%COMP%]   .voting-container[_ngcontent-%COMP%]   button.vote-down-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{transform:rotate(90deg)}.chatrooms-list[_ngcontent-%COMP%]   .chatrooms-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .left-wrap[_ngcontent-%COMP%]   .voting-container[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{color:#18b587}.chatrooms-list[_ngcontent-%COMP%]   .chatrooms-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .left-wrap[_ngcontent-%COMP%]   .voting-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:24px}.chatrooms-list[_ngcontent-%COMP%]   .chatrooms-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .left-wrap[_ngcontent-%COMP%]   .voting-container[_ngcontent-%COMP%]   .vote-count[_ngcontent-%COMP%]{margin:8px 0;text-align:center;font-size:12px;color:#545454}.chatrooms-list[_ngcontent-%COMP%]   .chatrooms-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .right-wrap[_ngcontent-%COMP%]{flex:1;padding:0 36px 4px 12px}.chatrooms-list[_ngcontent-%COMP%]   .chatrooms-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .right-wrap[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:12px;color:#545454}.chatrooms-list[_ngcontent-%COMP%]   .chatrooms-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .right-wrap[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;margin-top:16px}.chatrooms-list[_ngcontent-%COMP%]   .chatrooms-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .right-wrap[_ngcontent-%COMP%]   .post-menu[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:16px;color:#545454}.chatrooms-list[_ngcontent-%COMP%]   .chatrooms-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .right-wrap[_ngcontent-%COMP%]   .post-menu[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]{display:flex}.chatrooms-list[_ngcontent-%COMP%]   .chatrooms-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .right-wrap[_ngcontent-%COMP%]   .post-menu[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-right:40px;display:flex;text-decoration:none;color:#545454;transition:all .1s ease}.chatrooms-list[_ngcontent-%COMP%]   .chatrooms-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .right-wrap[_ngcontent-%COMP%]   .post-menu[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#18b587}.chatrooms-list[_ngcontent-%COMP%]   .chatrooms-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .right-wrap[_ngcontent-%COMP%]   .post-menu[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:12px}.chatrooms-list[_ngcontent-%COMP%]   .chatrooms-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .right-wrap[_ngcontent-%COMP%]   .post-menu[_ngcontent-%COMP%]   .dotes[_ngcontent-%COMP%]{display:flex;cursor:pointer}"]}),o),g=n("il7l"),l=n("Rnal"),p=n("WHgu"),b=n("wDcp"),d=n("kktJ"),h=n("Y9zH"),m=n("TU8p"),f=n("GJOa"),C=n("FtGj"),M=n("dJ++"),_=((s=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||s)},s.\u0275cmp=r.Lb({type:s,selectors:[["app-show-chat-group-members"]],decls:2,vars:0,template:function(e,t){1&e&&(r.Xb(0,"p"),r.Rc(1,"show-chat-group-members works!"),r.Wb())},styles:[""]}),s),v=n("wd/R"),P=n("AytR"),O=n("tVj7"),x=n("5eHb"),k=n("0IaG"),w=n("MFHO"),y=n("bTqV"),W=n("NFeN"),X=n("kmnG"),G=n("A5z7"),U=n("qFsG"),S=n("/1cH"),R=n("STbY"),I=n("ihCf"),T=n("FKr1"),F=n("Qu3c"),j=n("fZdh"),B=n("vsDL"),L=["chipsInput"],z=["groupMessagesList"];function D(e,t){if(1&e){var n=r.Yb();r.Xb(0,"li",59),r.jc("click",(function(){r.Ic(n);var e=t.$implicit;return r.nc().makeGroupActive(e)})),r.Xb(1,"div",14),r.Sb(2,"img",16),r.oc(3,"getImgPath"),r.Xb(4,"div",60),r.Xb(5,"div",61),r.Rc(6),r.Wb(),r.Xb(7,"span"),r.Rc(8),r.oc(9,"fixLineBreaks"),r.Wb(),r.Wb(),r.Wb(),r.Xb(10,"div",34),r.Xb(11,"button",62),r.Xb(12,"strong"),r.Rc(13),r.Wb(),r.Wb(),r.Wb(),r.Wb()}if(2&e){var o=t.$implicit,s=r.nc();r.Hb("active",o.id===(null==s.selectedGroup?null:s.selectedGroup.id))("unconfirmed",!s.ifConfirmedToJoinTheGroup(o)),r.Cb(2),r.uc("src",r.qc(3,9,o.avatar,"group_avatars"),r.Kc),r.Cb(4),r.Sc(o.name),r.Cb(2),r.Sc(r.qc(9,12,null==o.chat_group_messages[o.chat_group_messages.length-1]?null:o.chat_group_messages[o.chat_group_messages.length-1].message," ")),r.Cb(3),r.uc("hidden",!s.isSeenByAuthUser(o.chat_group_messages)),r.Cb(2),r.Sc(s.isSeenByAuthUser(o.chat_group_messages))}}function H(e,t){if(1&e){var n=r.Yb();r.Xb(0,"mat-chip",63),r.jc("removed",(function(){r.Ic(n);var e=t.$implicit;return r.nc().removeInputMember(e)})),r.Rc(1),r.Xb(2,"mat-icon",64),r.Rc(3,"cancel"),r.Wb(),r.Wb()}if(2&e){var o=t.$implicit;r.Cb(1),r.Tc(" ",o.first_name+" "+o.last_name," ")}}function A(e,t){if(1&e&&(r.Xb(0,"mat-option",65),r.Rc(1),r.Wb()),2&e){var n=t.$implicit;r.uc("value",n),r.Cb(1),r.Tc(" ",n.first_name+" "+n.last_name," ")}}function N(e,t){if(1&e){var n=r.Yb();r.Xb(0,"mat-icon",30),r.jc("click",(function(){r.Ic(n);var e=r.nc().$implicit;return r.nc(2).removeSavedMember(e.id)})),r.Rc(1,"cancel "),r.Wb()}}function J(e,t){if(1&e&&(r.Xb(0,"li",67),r.Sb(1,"img",68),r.oc(2,"getImgPath"),r.Pc(3,N,2,0,"mat-icon",69),r.Sb(4,"div",70),r.Wb()),2&e){var n=t.$implicit,o=r.nc(2);r.Hb("pending",!n.chat_groups_members.confirmed),r.Cb(1),r.uc("matTooltip",n.name)("src",r.qc(2,6,n.avatar,"user_avatars"),r.Kc),r.Cb(2),r.uc("ngIf",n.id!==(null==o.selectedGroup?null:o.selectedGroup.creator_id)),r.Cb(1),r.uc("ngClass",o.getUserCurrentStatus(n)?"online":"offline")}}function Y(e,t){if(1&e&&(r.Xb(0,"ul"),r.Pc(1,J,5,9,"li",66),r.Wb()),2&e){var n=r.nc();r.Cb(1),r.uc("ngForOf",n.groupMembers)}}function V(e,t){if(1&e){var n=r.Yb();r.Xb(0,"div",71),r.jc("click",(function(){return r.Ic(n),r.nc().removeGroup()})),r.Xb(1,"a"),r.Sb(2,"i",72),r.Wb(),r.Wb()}}function q(e,t){if(1&e){var n=r.Yb();r.Xb(0,"button",40),r.jc("click",(function(){return r.Ic(n),r.nc().leaveGroup()})),r.Rc(1," Leave group "),r.Wb()}}function K(e,t){if(1&e&&(r.Vb(0),r.Sb(1,"img",82),r.oc(2,"getImgPath"),r.Ub()),2&e){var n=t.$implicit,o=r.nc(3);r.Cb(1),r.uc("matTooltip",o.getSeenTooltip(n))("src",r.qc(2,2,n.avatar,"user_avatars"),r.Kc)}}function E(e,t){if(1&e&&(r.Vb(0),r.Xb(1,"li",74),r.Xb(2,"div",75),r.Xb(3,"div",76),r.Xb(4,"div",77),r.Sb(5,"img",78),r.oc(6,"getImgPath"),r.Wb(),r.Xb(7,"div",61),r.Rc(8),r.Wb(),r.Wb(),r.Xb(9,"div",79),r.Rc(10),r.oc(11,"date"),r.Wb(),r.Wb(),r.Sb(12,"div",80),r.Xb(13,"div",81),r.Pc(14,K,3,5,"ng-container",49),r.Wb(),r.Wb(),r.Ub()),2&e){var n=t.$implicit,o=r.nc(2);r.Cb(1),r.uc("ngClass",o.getMessageClass(n.from_user)),r.Cb(4),r.uc("src",r.qc(6,6,n.from_user.avatar,"user_avatars"),r.Kc),r.Cb(3),r.Sc(n.from_user.first_name+" "+n.from_user.last_name),r.Cb(2),r.Sc(r.qc(11,9,n.created_at,"HH:mm")),r.Cb(2),r.uc("innerHTML",n.message,r.Jc),r.Cb(2),r.uc("ngForOf",n.seen_by)}}function $(e,t){if(1&e&&(r.Xb(0,"div"),r.Xb(1,"li",73),r.Xb(2,"span"),r.Rc(3),r.oc(4,"getDateText"),r.Wb(),r.Wb(),r.Pc(5,E,15,12,"ng-container",49),r.Wb()),2&e){var n=t.$implicit;r.Cb(3),r.Sc(r.pc(4,2,n.key)),r.Cb(2),r.uc("ngForOf",n.value)}}function Q(e,t){if(1&e&&(r.Xb(0,"small",83),r.Rc(1),r.Wb()),2&e){var n=r.nc();r.Cb(1),r.Sc(n.typingText.text)}}var Z,ee=((Z=function(){function e(t,n,o,s,i,c,u,g,l){var p=this;_classCallCheck(this,e),this.fb=t,this.chatService=n,this.usersService=o,this.socketService=s,this.subject=i,this.toastr=c,this.dialog=u,this.groupBy=g,this.fixLineBreaks=l,this.showGroupChatForm=!1,this.showMembersInput=!1,this.userContacts=[],this.groupMembers=[],this.socketGroupsUsers=[],this.inputGroupMembers=[],this.filteredContacts=[],this.memberCtrl=new a.f,this.subscriptions=[],this.typingText={group:null,text:null},this.separatorKeysCodes=[C.g,C.c],this.groupRemoved=new r.o,this.selectedGroupMessages=[],this.selectedRawMessages=[],this.groupsMessages=[],this.haveGroupJoinInvitation=!1,this.isProduction=P.a.production,this.subscriptions.push(this.memberCtrl.valueChanges.subscribe((function(e){e&&(p.filteredContacts=p.userContacts.filter((function(t){var n=(t.first_name+" "+t.last_name).toLowerCase();return!!n.includes(e)&&!p.groupMembers.find((function(e){return e.name.toLowerCase()===n}))})))})))}return _createClass(e,[{key:"ngOnInit",value:function(){this.initGroupChatForms(),this.initForm(),this.getGroupsMessages(),this.addUserToSocket(),this.getUserContacts(),this.getGroupJoinInvitation(),this.getChatNotifications(),this.getMessagesFromSocket(),this.getTyping(),this.getSeen()}},{key:"initGroupChatForms",value:function(){this.groupChatForm=this.fb.group({creator_id:[this.authUser.id],name:["",a.x.required],username:[this.authUser.username]}),this.groupChatDetailsForm=this.fb.group({group_id:[""],member_ids:["",a.x.required]})}},{key:"initForm",value:function(){var e,t;this.chatForm=this.fb.group({from:[this.authUser.username],from_id:[this.authUser.id],group_id:[null===(e=this.selectedGroup)||void 0===e?void 0:e.id],avatar:[null===(t=this.authUser)||void 0===t?void 0:t.avatar],from_user:[this.authUser],to_id:[null],to_user:[null],to_group:[this.selectedGroup],message:["",a.x.required],personal:[1]})}},{key:"addUserToSocket",value:function(){this.socketService.addNewUser(Object.assign(Object.assign({},this.authUser),{group:!0}))}},{key:"getUserContacts",value:function(){var e=this;this.subscriptions.push(this.usersService.getUserContacts({user_id:this.authUser.id,blocked:0}).subscribe((function(t){e.userContacts=t})))}},{key:"getGroupsMessages",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.subscriptions.push(this.chatService.getGroupsMessages({user_id:this.authUser.id,blocked:0}).subscribe((function(n){var o,s,i;e.groupsMessages=n,e.selectedGroup=n.find((function(e){return e.name===t}))||n[0],e.selectedGroupMessages=e.groupBy.transform(null===(o=e.selectedGroup)||void 0===o?void 0:o.chat_group_messages,"created_at"),e.selectedGroup&&((null===(s=e.selectedGroup)||void 0===s?void 0:s.chat_group_messages.length)>0&&e.scrollMsgsToBottom(),e.groupChatDetailsForm.patchValue({group_id:e.selectedGroup.id}),e.chatForm.patchValue({group_id:e.selectedGroup.id}),e.groupMembers=null===(i=e.selectedGroup)||void 0===i?void 0:i.chat_group_members)})))}},{key:"makeGroupActive",value:function(e){this.selectedGroup=e,this.groupChatDetailsForm.patchValue({group_id:this.selectedGroup.id}),this.chatForm.patchValue({group_id:this.selectedGroup.id}),this.selectedGroupMessages=this.groupBy.transform(e.chat_group_messages,"created_at"),this.typingText.group=e,this.getTypingTextStatus({group:e.name,message:""}),this.getGroupMembers()}},{key:"addGroup",value:function(){var e=this;this.groupChatForm.valid&&this.subscriptions.push(this.chatService.addGroup(this.groupChatForm.value).subscribe((function(t){e.selectedGroup=t.find((function(t){return e.groupChatForm.value.name===t.name})),e.getGroupsMessages(e.selectedGroup),e.socketService.setNewGroup(e.groupChatForm.value),e.groupChatForm.patchValue({name:""})})))}},{key:"changeAvatar",value:function(e){var t=this,n=e.target.files[0],o=new FormData;o.append("avatar",n.name),o.append("group_id",this.selectedGroup.id),o.append("member_id",this.authUser.id),o.append("group_avatar_file",n),this.subscriptions.push(this.chatService.changeGroupAvatar(o).subscribe((function(e){t.groupsMessages=e,t.selectedGroup=t.groupsMessages.find((function(e){return t.selectedGroup.id===e.id}))})))}},{key:"removeInputMember",value:function(e){var t=this.inputGroupMembers.indexOf(e);t>=0&&(this.inputGroupMembers.splice(t,1),this.groupChatDetailsForm.patchValue({member_ids:this.inputGroupMembers}))}},{key:"removeSavedMember",value:function(e){var t=this;this.subscriptions.push(this.dialog.open(M.a).afterClosed().subscribe((function(n){n&&t.chatService.removeGroupMember({group_id:t.selectedGroup.id,member_id:e}).subscribe((function(e){t.groupMembers=null==e?void 0:e.chat_group_members}))})))}},{key:"removeGroup",value:function(){var e=this;this.subscriptions.push(this.dialog.open(M.a).afterClosed().subscribe((function(t){t&&e.chatService.removeGroup({group_id:e.selectedGroup.id}).subscribe((function(t){e.socketService.removeGroup({group:e.selectedGroup.name,username:e.authUser.username}),e.groupsMessages=t,e.selectedGroup=null}))})))}},{key:"autoCompleteMemberSelected",value:function(e){var t=e.option.value;this.inputGroupMembers.find((function(e){return e.id===t}))||(this.inputGroupMembers.push(e.option.value),this.groupChatDetailsForm.patchValue({member_ids:this.inputGroupMembers})),this.chipsInput.nativeElement.value="",this.memberCtrl.setValue("")}},{key:"addMember",value:function(e){var t=this;this.chipsInput.nativeElement.value="",this.memberCtrl.setValue(""),console.log(this.groupChatDetailsForm.value,this.selectedGroup),this.subscriptions.push(this.chatService.addGroupMembers(this.groupChatDetailsForm.value).subscribe((function(e){t.groupMembers=null==e?void 0:e.chat_group_members,t.socketService.inviteToNewGroup({members:t.inputGroupMembers,group_id:t.selectedGroup.id}),t.inputGroupMembers=[]})))}},{key:"leaveGroup",value:function(){var e=this;this.subscriptions.push(this.dialog.open(M.a).afterClosed().subscribe((function(t){t&&e.chatService.leaveGroup({member_id:e.authUser.id,group_id:e.selectedGroup.id}).subscribe((function(t){e.groupsMessages=t,e.socketService.leaveGroup({group:e.selectedGroup.name,username:e.authUser.username}),e.selectedGroup=null}))})))}},{key:"openAllMembersModal",value:function(){this.subscriptions.push(this.dialog.open(_,{width:"300px",height:"400px"}).afterClosed().subscribe((function(e){})))}},{key:"ifConfirmedToJoinTheGroup",value:function(e){var t=this;return null==e?void 0:e.chat_group_members.find((function(e){return e.id===t.authUser.id&&e.chat_groups_members.confirmed}))}},{key:"getGroupJoinInvitation",value:function(){var e=this;this.subscriptions.push(this.socketService.inviteToGroupSent().subscribe((function(t){e.chatService.getChatGroups({user_id:e.authUser.id}).subscribe((function(n){e.groupsMessages=n,e.selectedGroup=e.groupsMessages.find((function(e){return t.group_id===e.id})),e.haveGroupJoinInvitation=!0,console.log(e.selectedGroup)}))})))}},{key:"acceptGroupJoin",value:function(){var e=this;this.subscriptions.push(this.chatService.acceptGroupJoin({group_id:this.selectedGroup.id,member_id:this.authUser.id}).subscribe((function(t){e.groupsMessages=t,e.selectedGroup=e.groupsMessages.find((function(t){return e.selectedGroup.id===t.id})),console.log(e.selectedGroup),e.haveGroupJoinInvitation=!1,e.socketService.acceptJoinToGroup({group:e.selectedGroup.name,username:e.authUser.username})})))}},{key:"declineGroupJoin",value:function(){var e=this;this.subscriptions.push(this.chatService.declineGroupJoin({group_id:this.selectedGroup.id,member_id:this.authUser.id}).subscribe((function(t){var n;e.groupsMessages=t,e.socketService.declineJoinToGroup({group:null===(n=e.selectedGroup)||void 0===n?void 0:n.name,username:e.authUser.username}),e.selectedGroup=e.groupsMessages.find((function(t){return e.selectedGroup.id===t.id}))})))}},{key:"getChatNotifications",value:function(){var e=this;this.subscriptions.push(this.socketService.getChatNotifications().subscribe((function(t){var n,o;e.socketGroupsUsers=t.groupsUsers,t.groupRemoved?e.getGroupsMessages():t.groupCreated?(e.selectedGroup=e.groupsMessages.find((function(e){return e.name===t.group})),e.selectedGroup&&(e.groupChatDetailsForm.patchValue({group_id:e.selectedGroup.id}),e.groupMembers=null===(n=e.selectedGroup)||void 0===n?void 0:n.chat_group_members)):t.joiningChat||(e.toastr.info(t.msg),(t.acceptingJoinGroup||t.decliningJoinGroup||t.leavingGroup)&&(e.selectedGroup=e.groupsMessages.find((function(e){return e.name===t.group})),e.selectedGroup&&e.getGroupMembers()),e.groupMembers=null===(o=e.selectedGroup)||void 0===o?void 0:o.chat_group_members)})))}},{key:"getGroupMembers",value:function(){var e=this;this.subscriptions.push(this.chatService.getGroupMembers({group_id:this.selectedGroup.id}).subscribe((function(t){e.groupMembers=null==t?void 0:t.chat_group_members})))}},{key:"getUserCurrentStatus",value:function(e){var t,n,o=null===(t=this.groupsMessages.find((function(t){var n;return t.id===(null===(n=null==e?void 0:e.chat_groups_members)||void 0===n?void 0:n.group_id)})))||void 0===t?void 0:t.name;return!(!this.socketGroupsUsers||o!==(null===(n=this.selectedGroup)||void 0===n?void 0:n.name)||!this.socketGroupsUsers.find((function(t){return t.group===o&&e.username===t.username})))}},{key:"sendMessage",value:function(e){var t=this;if(this.chatForm.patchValue({message:this.fixLineBreaks.transform(e.target.value)}),13===e.keyCode&&!e.shiftKey&&""!==this.chatForm.value.message.trim()&&this.chatForm.valid){var n=Object.assign(Object.assign({},this.chatForm.value),{group:this.selectedGroup.name});this.subscriptions.push(this.chatService.saveGroupMessage(n).subscribe((function(e){t.socketService.sendMessage(n),t.scrollMsgsToBottom()}))),this.chatForm.patchValue({message:""})}}},{key:"scrollMsgsToBottom",value:function(){try{this.messagesList.nativeElement.scrollTop=this.messagesList.nativeElement.scrollHeight}catch(e){console.log(e)}}},{key:"getMessagesFromSocket",value:function(){var e=this;this.subscriptions.push(this.socketService.onNewMessage().subscribe((function(t){t.group&&(console.log("new message group chat!!!"),e.getGroupsMessages(e.selectedGroup.name),e.typingText={group:null,text:null})})))}},{key:"getMessageClass",value:function(e){return this.scrollMsgsToBottom(),e.id===this.authUser.id?"my-message":"other-message"}},{key:"getSeen",value:function(){var e=this;this.subscriptions.push(this.socketService.getSeen().subscribe((function(t){e.getGroupsMessages(e.selectedGroup.name)})))}},{key:"setSeen",value:function(){var e,t=null===(e=this.selectedGroup)||void 0===e?void 0:e.chat_group_messages,n=t[t.length-1],o=(null==n?void 0:n.from_id)===this.authUser.id;this.scrollMsgsToBottom(),o||this.socketService.setSeen({message_id:null==n?void 0:n.id,from_id:this.chatForm.value.from_id,to_id:this.chatForm.value.to_id,from_user:this.chatForm.value.from_user,group:this.selectedGroup.name,group_id:this.selectedGroup.id,seen:1,seen_at:v().format("YYYY-MM-DD, h:mm:ss a")})}},{key:"getSeenTooltip",value:function(e){var t=e.group_chat_messages_seen.created_at,n=v(t).isSame(new Date,"week"),o=v(t).format(n?"ddd HH:mm":"MMM DD, YYYY HH:mm");return"".concat(e.first_name," ").concat(e.last_name," at ").concat(o)}},{key:"getTyping",value:function(){var e=this;this.socketService.getTyping().subscribe((function(t){var n;console.log(t.group,null===(n=e.selectedGroup)||void 0===n?void 0:n.name),e.getTypingTextStatus(t)}))}},{key:"setTyping",value:function(){this.socketService.setTyping({from_user:this.chatForm.value.from_user,group:this.selectedGroup.name,message:this.chatForm.value.message})}},{key:"getTypingTextStatus",value:function(e){var t,n,o=(null===(t=e.from_user)||void 0===t?void 0:t.id)!==this.authUser.id&&e.group===this.selectedGroup.name&&e.message;this.typingText={group:o?(null===(n=this.selectedGroup)||void 0===n?void 0:n.name)===e.group:null,text:o?e.from_user.username+" is typing...":null}}},{key:"isChatUsersListSize",value:function(){return f.a.isChatUsersListSize()}},{key:"isSeenByAuthUser",value:function(e){var t=this;return e.filter((function(e){var n=!1;return e.from_id!==t.authUser.id&&(n=!e.seen_by.find((function(e){return e.id===t.authUser.id}))),n})).length}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach((function(e){return e.unsubscribe()}))}}]),e}()).\u0275fac=function(e){return new(e||Z)(r.Rb(a.e),r.Rb(g.a),r.Rb(O.a),r.Rb(p.a),r.Rb(b.a),r.Rb(x.b),r.Rb(k.b),r.Rb(d.a),r.Rb(w.a))},Z.\u0275cmp=r.Lb({type:Z,selectors:[["app-group-chat"]],viewQuery:function(e,t){var n;1&e&&(r.Wc(L,!0),r.Wc(z,!0)),2&e&&(r.Dc(n=r.kc())&&(t.chipsInput=n.first),r.Dc(n=r.kc())&&(t.messagesList=n.first))},inputs:{authUser:"authUser"},outputs:{groupRemoved:"groupRemoved"},decls:85,vars:38,consts:[[1,"chat-wrap"],[1,"people-groups-container",3,"hidden"],["id","groups-list",1,"list-wrap"],[1,"create-group-chat",3,"hidden","click"],["src","assets/img/noun_create.png","alt",""],["id","group-chat-form",3,"formGroup","hidden"],["formControlName","name","placeholder","Group name"],["mat-icon-button","",3,"click"],[1,"list"],["class","list-chat-group",3,"active","unconfirmed","click",4,"ngFor","ngForOf"],[1,"chat",3,"hidden"],[1,"chat-top"],[3,"formGroup","hidden"],[1,"chat-about"],[1,"left"],["for","group-avatar-input"],[1,"img",3,"src"],["id","group-avatar-input","type","file",3,"hidden","change"],[1,"group-name"],[1,"center"],[1,"member-add",3,"hidden"],["aria-label","Fruit selection","formControlName","member_ids"],["tagList",""],[3,"removed",4,"ngFor","ngForOf"],["type","text","placeholder","Member name from your contacts","matInput","","maxlength","10",3,"formControl","matChipInputFor","matChipInputSeparatorKeyCodes","matAutocomplete"],["chipsInput",""],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["align","end"],[3,"click"],[1,"members-list",3,"hidden"],[4,"ngIf"],["id","show-more-members",3,"click"],[1,"right"],["mat-icon-button","",3,"disableRipple","click"],["class","remove",3,"click",4,"ngIf"],["mat-icon-button","",1,"dotes",3,"matMenuTriggerFor","disableRipple"],[1,"fas","fa-ellipsis-v"],["menu","matMenu"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"click",4,"ngIf"],[1,"confirm-joining-group",3,"hidden"],[1,"actions"],[1,"accept-btn",3,"click"],[1,"decline-btn",3,"click"],["id","group-messages",1,"chat-history"],["groupMessagesList",""],[3,"hidden"],[4,"ngFor","ngForOf"],["class","text-center font-italic d-block",4,"ngIf"],[1,"chat-message-form",3,"hidden"],[1,"chat-form",3,"formGroup"],["cdkTextareaAutosize","","formControlName","message","placeholder","Type your message",1,"flex-1","mx-3",3,"keyup","focus","keyup.enter"],[1,"icons",3,"hidden"],["href",""],["src","assets/img/gif-24px.svg","alt",""],["src","assets/img/mood-24px.svg","alt",""],["src","assets/img/send-24px.svg","alt",""],[1,"list-chat-group",3,"click"],[1,"text"],[1,"name"],[1,"seen-circle",3,"hidden"],[3,"removed"],["matChipRemove",""],[3,"value"],["class","group-member",3,"pending",4,"ngFor","ngForOf"],[1,"group-member"],[1,"avatar",3,"matTooltip","src"],[3,"click",4,"ngIf"],[1,"status",3,"ngClass"],[1,"remove",3,"click"],[1,"fas","fa-trash"],[1,"data-list"],[1,"message-container",3,"ngClass"],[1,"message-date","mb-0","pl-0","d-flex","justify-content-between","align-items-center"],[1,"d-flex","align-items-center"],[1,"img"],[1,"avatar",3,"src"],[1,"date"],[1,"message",3,"innerHTML"],[1,"seen"],[1,"seen-avatar",3,"matTooltip","src"],[1,"text-center","font-italic","d-block"]],template:function(e,t){if(1&e&&(r.Xb(0,"div",0),r.Xb(1,"div",1),r.Xb(2,"div",2),r.Xb(3,"button",3),r.jc("click",(function(){return t.showGroupChatForm=!0})),r.Sb(4,"img",4),r.Rc(5," Create new group "),r.Wb(),r.Xb(6,"form",5),r.Sb(7,"input",6),r.Xb(8,"button",7),r.jc("click",(function(){return t.addGroup()})),r.Xb(9,"mat-icon"),r.Rc(10,"done"),r.Wb(),r.Wb(),r.Xb(11,"button",7),r.jc("click",(function(){return t.showGroupChatForm=!1})),r.Xb(12,"mat-icon"),r.Rc(13,"close"),r.Wb(),r.Wb(),r.Wb(),r.Xb(14,"ul",8),r.Pc(15,D,14,15,"li",9),r.Wb(),r.Wb(),r.Wb(),r.Xb(16,"div",10),r.Xb(17,"div",11),r.Xb(18,"form",12),r.Xb(19,"div",13),r.Xb(20,"div",14),r.Xb(21,"label",15),r.Sb(22,"img",16),r.oc(23,"getImgPath"),r.Wb(),r.Xb(24,"input",17),r.jc("change",(function(e){return t.changeAvatar(e)})),r.Wb(),r.Xb(25,"div",18),r.Rc(26),r.Wb(),r.Wb(),r.Xb(27,"div",19),r.Xb(28,"div",20),r.Xb(29,"mat-form-field"),r.Xb(30,"mat-chip-list",21,22),r.Pc(32,H,4,1,"mat-chip",23),r.Sb(33,"input",24,25),r.Wb(),r.Xb(35,"mat-autocomplete",26,27),r.jc("optionSelected",(function(e){return t.autoCompleteMemberSelected(e)})),r.Pc(37,A,2,2,"mat-option",28),r.Wb(),r.Xb(38,"mat-hint",29),r.Rc(39,"Please press 'Enter' after the name"),r.Wb(),r.Wb(),r.Xb(40,"button",30),r.jc("click",(function(e){return t.addMember(e)})),r.Rc(41,"Add"),r.Wb(),r.Wb(),r.Xb(42,"div",31),r.Pc(43,Y,2,1,"ul",32),r.Xb(44,"a",33),r.jc("click",(function(){return t.openAllMembersModal()})),r.Rc(45," Show more "),r.Wb(),r.Wb(),r.Wb(),r.Xb(46,"div",34),r.Xb(47,"button",35),r.jc("click",(function(){return t.showMembersInput=!t.showMembersInput})),r.Xb(48,"mat-icon"),r.Rc(49,"people"),r.Wb(),r.Wb(),r.Pc(50,V,3,0,"div",36),r.Xb(51,"button",37),r.Sb(52,"i",38),r.Wb(),r.Xb(53,"mat-menu",null,39),r.Xb(55,"button",40),r.jc("click",(function(){return t.showMembersInput=!t.showMembersInput})),r.Rc(56," Add members "),r.Wb(),r.Pc(57,q,2,0,"button",41),r.Wb(),r.Wb(),r.Wb(),r.Wb(),r.Xb(58,"div",42),r.Xb(59,"p"),r.Rc(60,"Please accept or decline joining to the "),r.Xb(61,"strong"),r.Rc(62),r.Wb(),r.Rc(63," group"),r.Wb(),r.Xb(64,"div",43),r.Xb(65,"button",44),r.jc("click",(function(){return t.acceptGroupJoin()})),r.Rc(66,"Accept"),r.Wb(),r.Xb(67,"button",45),r.jc("click",(function(){return t.declineGroupJoin()})),r.Rc(68,"Decline"),r.Wb(),r.Wb(),r.Wb(),r.Wb(),r.Xb(69,"ul",46,47),r.Xb(71,"div",48),r.Pc(72,$,6,4,"div",49),r.Wb(),r.Wb(),r.Pc(73,Q,2,1,"small",50),r.Xb(74,"div",51),r.Xb(75,"form",52),r.Xb(76,"textarea",53),r.jc("keyup",(function(){return t.setTyping()}))("focus",(function(){return t.setSeen()}))("keyup.enter",(function(e){return t.sendMessage(e)})),r.Rc(77,"                "),r.Wb(),r.Wb(),r.Xb(78,"div",54),r.Xb(79,"a",55),r.Sb(80,"img",56),r.Wb(),r.Xb(81,"a",55),r.Sb(82,"img",57),r.Wb(),r.Xb(83,"a",55),r.Sb(84,"img",58),r.Wb(),r.Wb(),r.Wb(),r.Wb(),r.Wb()),2&e){var n=r.Ec(31),o=r.Ec(36),s=r.Ec(54);r.Cb(1),r.Hb("responsive-list",t.isChatUsersListSize()),r.uc("hidden",t.isChatUsersListSize()),r.Cb(2),r.uc("hidden",t.showGroupChatForm),r.Cb(3),r.uc("formGroup",t.groupChatForm)("hidden",!t.showGroupChatForm),r.Cb(9),r.uc("ngForOf",t.groupsMessages),r.Cb(1),r.uc("hidden",!t.selectedGroup),r.Cb(2),r.uc("formGroup",t.groupChatDetailsForm)("hidden",!t.selectedGroup||!t.ifConfirmedToJoinTheGroup(t.selectedGroup)),r.Cb(4),r.uc("src",r.qc(23,35,null==t.selectedGroup?null:t.selectedGroup.avatar,"group_avatars"),r.Kc),r.Cb(2),r.uc("hidden",!0),r.Cb(2),r.Sc(null==t.selectedGroup?null:t.selectedGroup.name),r.Cb(2),r.uc("hidden",!t.showMembersInput),r.Cb(4),r.uc("ngForOf",t.inputGroupMembers),r.Cb(1),r.uc("formControl",t.memberCtrl)("matChipInputFor",n)("matChipInputSeparatorKeyCodes",t.separatorKeysCodes)("matAutocomplete",o),r.Cb(4),r.uc("ngForOf",t.filteredContacts),r.Cb(5),r.uc("hidden",t.showMembersInput),r.Cb(1),r.uc("ngIf",(null==t.groupMembers?null:t.groupMembers.length)>0),r.Cb(4),r.uc("disableRipple",!0),r.Cb(3),r.uc("ngIf",t.authUser.id===(null==t.selectedGroup?null:t.selectedGroup.creator_id)),r.Cb(1),r.uc("matMenuTriggerFor",s)("disableRipple",!0),r.Cb(6),r.uc("ngIf",t.authUser.id!==(null==t.selectedGroup?null:t.selectedGroup.creator_id)),r.Cb(1),r.uc("hidden",!t.selectedGroup||t.ifConfirmedToJoinTheGroup(t.selectedGroup)),r.Cb(4),r.Sc(null==t.selectedGroup?null:t.selectedGroup.name),r.Cb(9),r.uc("hidden",0===(null==t.selectedGroupMessages?null:t.selectedGroupMessages.length)),r.Cb(1),r.uc("ngForOf",t.selectedGroupMessages),r.Cb(1),r.uc("ngIf",t.typingText.text),r.Cb(1),r.uc("hidden",!t.selectedGroup),r.Cb(1),r.uc("formGroup",t.chatForm),r.Cb(3),r.uc("hidden",t.isProduction)}},directives:[a.z,a.q,a.i,a.c,a.p,a.h,y.a,W.a,i.m,X.c,G.c,U.b,G.b,S.c,a.l,a.g,S.a,X.f,i.n,R.c,R.d,R.a,I.b,G.a,G.d,T.n,F.a,i.l],pipes:[j.a,w.a,B.a,i.f],styles:[".chat-wrap[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;height:100vh}.chat-wrap[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;background-size:cover;background-position:50%;background-repeat:no-repeat}.responsive-list[_ngcontent-%COMP%]{flex:0 0 100%!important}.responsive-list[_ngcontent-%COMP%]   .more-btn[_ngcontent-%COMP%]{display:block}.my-message[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%], .my-message[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{display:none}@media only screen and (max-width:374px){.mat-form-field-appearance-legacy[_ngcontent-%COMP%]   .mat-hint[_ngcontent-%COMP%]{white-space:nowrap!important;text-overflow:ellipsis!important;overflow:hidden!important}}.list-chat-group[_ngcontent-%COMP%]{display:flex}.list-chat-group[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{width:90%;display:flex}.list-chat-group[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{display:flex;justify-content:center;padding-top:15px}.list-chat-group.unconfirmed[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.3)!important}.chat-top[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background:#f5f5f5;padding:12px 16px}.chat-top[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%}.chat-top[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;margin-top:20px}.chat-top[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .accept-btn[_ngcontent-%COMP%]{background:#18b587;background-color:#18b587}.chat-top[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .accept-btn[_ngcontent-%COMP%], .chat-top[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .decline-btn[_ngcontent-%COMP%]{width:119px;height:36px;padding:15px 32px;color:#fff!important;font-size:16px;font-family:Muli-Light;display:flex;justify-content:center;align-items:center;transition:.3s ease-in-out}.chat-top[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .decline-btn[_ngcontent-%COMP%]{background:#18b587;background-color:#f53c6f}.center[_ngcontent-%COMP%]{width:50%;display:flex}@media only screen and (min-width:374px) and (max-width:767px){.center[_ngcontent-%COMP%]{width:100%}}@media only screen and (max-width:374px){.center[_ngcontent-%COMP%]{width:80%}}.center[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:70%;padding:5px}@media only screen and (min-width:374px) and (max-width:767px){.center[_ngcontent-%COMP%]   .member-add[_ngcontent-%COMP%]{justify-content:space-between}}.center[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]{display:flex;align-items:center}@media only screen and (max-width:374px){.center[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]{display:block}}.center[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:horizontal;overflow:hidden}@media only screen and (max-width:374px){.center[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-bottom:10px!important}}.center[_ngcontent-%COMP%]   .members-list[_ngcontent-%COMP%]   #show-more-members[_ngcontent-%COMP%]{width:110px;color:#18b587;margin-left:10px}.center[_ngcontent-%COMP%]   .member-add[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%}.center[_ngcontent-%COMP%]   .member-add[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:119px;height:36px;padding:15px 32px;color:#fff!important;font-size:16px;font-family:Muli-Light;display:flex;justify-content:center;align-items:center;transition:.3s ease-in-out;background:#18b587;width:50px}#group-chat-form[_ngcontent-%COMP%]{display:flex;margin-bottom:10px}#group-chat-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:5px;margin-left:25px}#group-chat-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{font-size:14px;color:#c9c9c9;font-family:Muli-Light}#group-chat-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{font-size:14px;color:#c9c9c9;font-family:Muli-Light}.group-member[_ngcontent-%COMP%]{position:relative;width:42px;border-radius:42px;margin-left:5px}.group-member[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{position:absolute;width:14px;height:14px;border-radius:14px;top:28px;right:0;padding:0;line-height:0}.group-member[_ngcontent-%COMP%]   .status.offline[_ngcontent-%COMP%]{background-color:grey}.group-member[_ngcontent-%COMP%]   .status.online[_ngcontent-%COMP%]{background-color:#18b587}.group-member.pending[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.5)}.group-member.pending[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{opacity:.5}.group-member[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);margin-left:auto;margin-right:auto;display:none;cursor:pointer}.group-member[_ngcontent-%COMP%]:hover{background-color:rgba(0,0,0,.5)}.group-member[_ngcontent-%COMP%]:hover   mat-icon[_ngcontent-%COMP%]{display:block}.group-member[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{opacity:.5}.seen-circle[_ngcontent-%COMP%]{background-color:#f53c6f!important;color:#fff;width:20px;height:20px;border-radius:20px;font-size:12px}"]}),Z),te=n("m6dw"),ne=n("S6NB"),oe=n("RVqm"),se=n("yEwS");function ie(e,t){if(1&e){var n=r.Yb();r.Xb(0,"button",8),r.jc("click",(function(){return r.Ic(n),r.nc().toggleBlockedUsers(!1)})),r.Xb(1,"mat-icon"),r.Rc(2,"arrow_backward"),r.Wb(),r.Xb(3,"span"),r.Rc(4,"Active contacts"),r.Wb(),r.Wb()}}function ce(e,t){if(1&e){var n=r.Yb();r.Xb(0,"div",9),r.Xb(1,"button",10),r.Sb(2,"i",11),r.Wb(),r.Xb(3,"mat-menu",null,12),r.Xb(5,"button",13),r.jc("click",(function(){return r.Ic(n),r.nc().toggleBlockedUsers(!1)})),r.Sb(6,"i",14),r.Rc(7," Active users "),r.Wb(),r.Xb(8,"button",13),r.jc("click",(function(){return r.Ic(n),r.nc().toggleBlockedUsers(!0)})),r.Sb(9,"i",15),r.Rc(10," Blocked users "),r.Wb(),r.Wb(),r.Wb()}if(2&e){var o=r.Ec(4),s=r.nc();r.Cb(1),r.uc("matMenuTriggerFor",o),r.Cb(4),r.Hb("active",!s.showBlockedUsers),r.Cb(3),r.Hb("active",s.showBlockedUsers)}}function re(e,t){if(1&e&&(r.Xb(0,"div",28),r.Xb(1,"div"),r.Xb(2,"span",29),r.Rc(3),r.oc(4,"fixLineBreaks"),r.Wb(),r.Wb(),r.Xb(5,"div"),r.Xb(6,"span",30),r.Rc(7),r.oc(8,"dateFromNow"),r.Wb(),r.Wb(),r.Wb()),2&e){var n=r.nc().lastMsg;r.Cb(3),r.Sc(r.pc(4,2,n.message)),r.Cb(4),r.Tc(" ",r.pc(8,4,n.created_at)," ")}}function ae(e,t){if(1&e){var n=r.Yb();r.Xb(0,"button",13),r.jc("click",(function(){r.Ic(n);var e=r.nc(2).user;return r.nc(2).unreadLastMessages(e)})),r.Rc(1," Unread "),r.Wb()}}function ue(e,t){if(1&e){var n=r.Yb();r.Xb(0,"button",13),r.jc("click",(function(){r.Ic(n);var e=r.nc(2).user;return r.nc(2).blockUser(e)})),r.Rc(1," Block "),r.Wb()}}function ge(e,t){if(1&e&&(r.Vb(0),r.Xb(1,"button",31),r.Sb(2,"i",32),r.Wb(),r.Xb(3,"mat-menu",null,12),r.Pc(5,ae,2,0,"button",33),r.Pc(6,ue,2,0,"button",33),r.Wb(),r.Ub()),2&e){var n=r.Ec(4),o=r.nc(),s=o.lastMsg,i=o.user,c=r.nc(2);r.Cb(1),r.uc("matMenuTriggerFor",n)("disableRipple",!0),r.Cb(4),r.uc("ngIf",c.ifUnreadShown(s,i)),r.Cb(1),r.uc("ngIf",!c.showBlockedUsers)}}function le(e,t){if(1&e&&(r.Vb(0),r.Xb(1,"button",34),r.Xb(2,"strong"),r.Rc(3),r.Wb(),r.Wb(),r.Ub()),2&e){var n=r.nc(2).$implicit,o=r.nc();r.Cb(3),r.Sc(o.getUnseenMessagesCount(n))}}function pe(e,t){if(1&e){var n=r.Yb();r.Xb(0,"div",18),r.Xb(1,"div",19),r.jc("click",(function(){r.Ic(n);var e=t.lastMsg,o=r.nc().$implicit;return r.nc().selectUserMessages(o,e)})),r.Xb(2,"div",20),r.Sb(3,"img",21),r.oc(4,"getImgPath"),r.Sb(5,"div",22),r.Wb(),r.Xb(6,"div",23),r.Xb(7,"div",24),r.Rc(8),r.Wb(),r.Pc(9,re,9,6,"div",25),r.Wb(),r.Wb(),r.Xb(10,"div",26),r.Pc(11,ge,7,4,"ng-container",27),r.Pc(12,le,4,1,"ng-container",27),r.Wb(),r.Wb()}if(2&e){var o=t.user,s=t.lastMsg,i=r.nc().$implicit,c=r.nc();r.Cb(2),r.Hb("blocked",c.ifContactBlocked(o)),r.Cb(1),r.uc("src",r.qc(4,9,o.avatar,"user_avatars"),r.Kc),r.Cb(2),r.uc("hidden",0===c.onlineUsers.length)("ngClass",c.getUserCurrentStatus(o.username)?"online":"offline"),r.Cb(3),r.Sc(o.first_name+" "+o.last_name),r.Cb(1),r.uc("ngIf",s),r.Cb(2),r.uc("ngIf",c.ifMoreActionsShown(s,o)),r.Cb(1),r.uc("ngIf",c.ifLastMessageUnseen(s)&&c.getUnseenMessagesCount(i))}}var be=function(e,t){return{user:e,lastMsg:t}};function de(e,t){if(1&e&&(r.Xb(0,"li"),r.Tb(1,16),r.Pc(2,pe,13,12,"ng-template",null,17,r.Qc),r.Wb()),2&e){var n=t.$implicit,o=r.Ec(3),s=r.nc();r.Hb("active",(null==s.selectedUserMessages?null:s.selectedUserMessages.id)===n.id),r.Cb(1),r.uc("ngTemplateOutlet",o)("ngTemplateOutletContext",r.zc(4,be,n,s.getUserLastMessage(null==n?null:n.direct_messages)))}}var he,me=((he=function(){function e(t,n,o,s){_classCallCheck(this,e),this.socketService=t,this.usersService=n,this.userMessagesStore=o,this.mobileHelper=s,this.refresh=new r.o,this.subscriptions=[],this.filteredUsersMessages=[],this.blockedUsers=[],this.onlineUsers=[],this.showBlockedUsers=!1,this.notificationsStore=oe.a}return _createClass(e,[{key:"ngOnInit",value:function(){this.getUserMessages(),this.getOnlineUsers(),this.getBlockUnblockUser(),this.getAcceptedDeclinedRequests(),this.getCancelledUsersConnection(),this.getDisconnectUser()}},{key:"selectUserMessages",value:function(e,t){this.selectedUserMessages=e,this.userMessagesStore.changeUser(e)}},{key:"getUserMessages",value:function(){var e=this;this.userMessagesStore.userMessages$.subscribe((function(t){console.log("users list!!!",t),e.filteredUsersMessages=t.filter((function(t){return!!t.users_connections[0].is_blocked===e.showBlockedUsers})),e.selectedUserMessages=e.filteredUsersMessages[0],e.userMessagesStore.changeUser(e.selectedUserMessages)}))}},{key:"toggleBlockedUsers",value:function(e){this.showBlockedUsers=e,this.filteredUsersMessages=this.userMessagesStore.userMessages.filter((function(t){var n;return!!(null===(n=t.users_connections)||void 0===n?void 0:n[0].is_blocked)===e})),this.selectedUserMessages=this.filteredUsersMessages[0],this.userMessagesStore.changeUser(this.selectedUserMessages)}},{key:"unreadLastMessages",value:function(e){}},{key:"getOnlineUsers",value:function(){var e=this;this.socketService.getConnectedUsers({username:this.authUser.username}),this.subscriptions.push(this.socketService.userOnlineFeedback().subscribe((function(t){e.onlineUsers=t})))}},{key:"getAcceptedDeclinedRequests",value:function(){var e=this;this.subscriptions.push(this.socketService.acceptedConnection().subscribe((function(t){console.log("accepted",t),e.refresh.emit()})))}},{key:"getCancelledUsersConnection",value:function(){var e=this;this.subscriptions.push(this.socketService.cancelledUsersConnecting().subscribe((function(t){console.log("cancelled"),e.refresh.emit()})))}},{key:"getDisconnectUser",value:function(){var e=this;this.subscriptions.push(this.socketService.getDisconnectUsers({}).subscribe((function(t){console.log("disconnected",t),e.setNotifications(t),e.refresh.emit()})))}},{key:"blockUser",value:function(e){var t,n=this,o={connection_id:null===(t=e.users_connections)||void 0===t?void 0:t[0].id,user:this.authUser,block:+!this.showBlockedUsers,contact_username:e.username};this.subscriptions.push(this.usersService.blockUser(o).subscribe((function(t){var o;n.refresh.emit(),n.socketService.blockUnblockUser({connection_id:null===(o=e.users_connections)||void 0===o?void 0:o[0].id,block:+!n.showBlockedUsers,from_id:n.authUser.id,to_id:e.id,msg:"<strong>".concat(n.authUser.first_name," ").concat(n.authUser.last_name,"</strong> has blocked the connection between you two"),contact_username:e.username})})))}},{key:"getBlockUnblockUser",value:function(){var e=this;this.subscriptions.push(this.socketService.getBlockUnblockUser().subscribe((function(t){console.log("get block/unblock",t),e.setNotifications(t),e.refresh.emit()})))}},{key:"setNotifications",value:function(e){var t=this.notificationsStore.notifications;t.unshift(e),this.notificationsStore.setNotifications(t)}},{key:"getUserLastMessage",value:function(e){return e[e.length-1]}},{key:"getUserCurrentStatus",value:function(e){return 0===this.onlineUsers.length||this.onlineUsers.includes(e)}},{key:"ifContactsListActionsShown",value:function(){return this.filteredUsersMessages.length>0}},{key:"ifContactBlocked",value:function(e){var t;return null===(t=e.users_connections)||void 0===t?void 0:t[0].is_blocked}},{key:"ifUnreadShown",value:function(e,t){return(null==e?void 0:e.from_id)!==this.authUser.id&&!t.users_connections[0].is_blocked}},{key:"ifMoreActionsShown",value:function(e,t){return!t.users_connections[0].is_blocked&&(!e||(null==e?void 0:e.from_id)===this.authUser.id||(null==e?void 0:e.seen))}},{key:"ifLastMessageUnseen",value:function(e){return!(null==e?void 0:e.seen)&&(null==e?void 0:e.from_id)!==this.authUser.id}},{key:"getUnseenMessagesCount",value:function(e){return e.direct_messages.filter((function(e){return!e.seen})).length}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach((function(e){return e.unsubscribe()}))}}]),e}()).\u0275fac=function(e){return new(e||he)(r.Rb(p.a),r.Rb(O.a),r.Rb(ne.a),r.Rb(te.a))},he.\u0275cmp=r.Lb({type:he,selectors:[["app-users-list"]],inputs:{authUser:"authUser"},outputs:{refresh:"refresh"},decls:8,vars:6,consts:[[1,"people-groups-container",3,"hidden"],["id","people-list",1,"list-wrap"],[1,"top-actions"],["id","back-to-active-users"],[3,"click",4,"ngIf"],["class","three-dot-actions",4,"ngIf"],[1,"list","align-items-center"],[3,"active",4,"ngFor","ngForOf"],[3,"click"],[1,"three-dot-actions"],[1,"show-actions",3,"matMenuTriggerFor"],[1,"fas","fa-ellipsis-h"],["menu","matMenu"],["mat-menu-item","",3,"click"],[1,"fas","fa-users"],[1,"fa","fa-users-slash"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["itemTemplate",""],[1,"d-flex","user-last-msg","align-items-center","justify-content-between"],[1,"left-group",3,"click"],[1,"img","user-avatar"],[1,"avatar",3,"src"],[1,"status",3,"hidden","ngClass"],[1,"text"],[1,"name"],["class","d-flex align-items-center",4,"ngIf"],[1,"ml-auto","more-btn"],[4,"ngIf"],[1,"d-flex","align-items-center"],[1,"latest-message"],[1,"ml-4","latest-msg-date"],["mat-icon-button","",1,"more-actions-btn",3,"matMenuTriggerFor","disableRipple"],[1,"fas","fa-ellipsis-v"],["mat-menu-item","",3,"click",4,"ngIf"],[1,"seen-circle"]],template:function(e,t){1&e&&(r.Xb(0,"div",0),r.Xb(1,"div",1),r.Xb(2,"div",2),r.Xb(3,"div",3),r.Pc(4,ie,5,0,"button",4),r.Wb(),r.Pc(5,ce,11,5,"div",5),r.Wb(),r.Xb(6,"ul",6),r.Pc(7,de,4,7,"li",7),r.Wb(),r.Wb(),r.Wb()),2&e&&(r.Hb("responsive-list",t.mobileHelper.isChatUsersListSize()),r.uc("hidden",t.mobileHelper.isChatUsersListSize()),r.Cb(4),r.uc("ngIf",t.showBlockedUsers),r.Cb(1),r.uc("ngIf",t.ifContactsListActionsShown()),r.Cb(2),r.uc("ngForOf",t.filteredUsersMessages))},directives:[i.n,i.m,W.a,R.c,R.d,R.a,i.s,i.l,y.a],pipes:[j.a,w.a,se.a],styles:[".chat-wrap[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;height:100vh}.chat-wrap[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;background-size:cover;background-position:50%;background-repeat:no-repeat}.responsive-list[_ngcontent-%COMP%]{flex:0 0 100%!important}.responsive-list[_ngcontent-%COMP%]   .more-btn[_ngcontent-%COMP%]{display:block}.my-message[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%], .my-message[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{display:none}@media only screen and (max-width:374px){.mat-form-field-appearance-legacy[_ngcontent-%COMP%]   .mat-hint[_ngcontent-%COMP%]{white-space:nowrap!important;text-overflow:ellipsis!important;overflow:hidden!important}}.people-groups-container[_ngcontent-%COMP%]{flex:0 0 316px;background:#f5f5f5;max-width:317px;width:100%;height:100vh}.people-groups-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.people-groups-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.people-groups-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#dcdcdc;border-radius:4px}.people-groups-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#aeaeae}.people-groups-container[_ngcontent-%COMP%]   .create-group-chat[_ngcontent-%COMP%]{padding:0 15px;margin:4px 0 16px;background:transparent;color:#18b587;font-size:16px;font-family:Muli-Bold}.people-groups-container[_ngcontent-%COMP%]   .create-group-chat[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;margin-right:2px}.people-groups-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{max-height:600px;overflow-x:auto}.people-groups-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:6px 10px;display:flex;border-left:5px solid transparent;cursor:pointer;transition:all .3s ease}.people-groups-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{border-left:5px solid #18b587;background:#fff}.people-groups-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{color:#18b587}.people-groups-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#18b587;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden}.people-groups-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{border-left:5px solid #f53c6f;background:#fff}.people-groups-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover   .text[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%], .people-groups-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover   .text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#f53c6f}.people-groups-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{margin-right:22px}.people-groups-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{text-transform:capitalize;font-size:16px;font-weight:500;color:#545454}.people-groups-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-top:4px;display:block;font-size:14px;font-weight:300;color:#acacac}@media screen and (max-width:1029px){.people-groups-container[_ngcontent-%COMP%]{flex:1}}.user-last-msg[_ngcontent-%COMP%]{width:98%}.right[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{cursor:pointer}.left-group[_ngcontent-%COMP%]{display:flex;width:94%}.seen-circle[_ngcontent-%COMP%]{background-color:#f53c6f!important;color:#fff;width:20px;height:20px;border-radius:20px;font-size:12px}.more-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:transparent}.top-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding-right:20px}.top-actions[_ngcontent-%COMP%]   .show-actions[_ngcontent-%COMP%]{background-color:#c9c9c9;padding:5px;border-radius:35px;width:30px;height:30px;color:#fff;margin-bottom:10px}.top-actions[_ngcontent-%COMP%]   .show-actions[_ngcontent-%COMP%]:hover{background-color:#18b587}.top-actions[_ngcontent-%COMP%]   #back-to-active-users[_ngcontent-%COMP%]{padding-left:10px}.top-actions[_ngcontent-%COMP%]   #back-to-active-users[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:unset;border:none}.top-actions[_ngcontent-%COMP%]   #back-to-active-users[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:5px}.user-avatar[_ngcontent-%COMP%]{position:relative}.user-avatar[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:48px!important;height:48px}.user-avatar[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{position:absolute;width:14px;height:14px;border-radius:14px;top:35px;right:0;padding:0;line-height:0}.user-avatar[_ngcontent-%COMP%]   .status.offline[_ngcontent-%COMP%]{background-color:grey}.user-avatar[_ngcontent-%COMP%]   .status.online[_ngcontent-%COMP%]{background-color:#18b587}.latest-message[_ngcontent-%COMP%]{display:-webkit-box!important;-webkit-line-clamp:1;overflow:hidden;-webkit-box-orient:vertical}.latest-msg-date[_ngcontent-%COMP%]{margin-left:10px!important;display:flex!important;white-space:nowrap!important;margin-top:3px!important}@media screen and (max-width:374px){.latest-msg-date[_ngcontent-%COMP%]{font-size:8px!important;margin-left:6px!important}}.more-actions-btn[_ngcontent-%COMP%]{width:20px!important}.blocked[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.5)!important}.blocked[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{opacity:.5}"]}),he),fe=n("UGRM");function Ce(e,t){if(1&e){var n=r.Yb();r.Xb(0,"app-users-list",3),r.jc("refresh",(function(){return r.Ic(n),r.nc().getUsersMessages()})),r.Wb()}if(2&e){var o=r.nc();r.uc("authUser",o.authUser)}}function Me(e,t){if(1&e&&r.Sb(0,"app-direct-chat-messages",4),2&e){var n=r.nc();r.uc("authUser",n.authUser)}}var _e,ve=((_e=function(){function e(t,n){_classCallCheck(this,e),this.chatService=t,this.userMessagesStore=n,this.usersMessages=[],this.subscriptions=[]}return _createClass(e,[{key:"ngOnInit",value:function(){this.getUsersMessages()}},{key:"getUsersMessages",value:function(){var e=this;this.subscriptions.push(this.chatService.getDirectMessages({user_id:this.authUser.id,blocked:0}).subscribe((function(t){e.usersMessages=t,e.userMessagesStore.setUserMessages(t)})))}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach((function(e){return e.unsubscribe()}))}}]),e}()).\u0275fac=function(e){return new(e||_e)(r.Rb(g.a),r.Rb(ne.a))},_e.\u0275cmp=r.Lb({type:_e,selectors:[["app-direct-mongo-chat"]],inputs:{authUser:"authUser"},features:[r.Bb([{provide:te.a,useClass:te.a}])],decls:3,vars:2,consts:[[1,"chat-wrap"],[3,"authUser","refresh",4,"ngIf"],[3,"authUser",4,"ngIf"],[3,"authUser","refresh"],[3,"authUser"]],template:function(e,t){1&e&&(r.Xb(0,"div",0),r.Pc(1,Ce,1,1,"app-users-list",1),r.Pc(2,Me,1,1,"app-direct-chat-messages",2),r.Wb()),2&e&&(r.Cb(1),r.uc("ngIf",t.usersMessages.length>0),r.Cb(1),r.uc("ngIf",t.usersMessages.length>0))},directives:[i.n,me,fe.a],styles:[".chat-wrap[_ngcontent-%COMP%]{display:flex}app-users-list[_ngcontent-%COMP%]{max-width:317px;width:100%}app-direct-chat-messages[_ngcontent-%COMP%]{width:100%}"]}),_e);function Pe(e,t){if(1&e&&r.Sb(0,"app-group-chat",6),2&e){var n=r.nc(2);r.uc("authUser",n.authUser)}}function Oe(e,t){if(1&e){var n=r.Yb();r.Xb(0,"app-direct-mongo-chat",7),r.jc("newMessagesCountReceived",(function(e){return r.Ic(n),r.nc(2).newMessagesCountInDirect=e})),r.Wb()}if(2&e){var o=r.nc(2);r.uc("authUser",o.authUser)}}function xe(e,t){if(1&e){var n=r.Yb();r.Vb(0),r.Sb(1,"app-user-tags"),r.Xb(2,"div"),r.Xb(3,"div",1),r.Xb(4,"button",2),r.jc("click",(function(){return r.Ic(n),r.nc().changeTab("direct")})),r.Rc(5,"Chat "),r.Wb(),r.Xb(6,"button",3),r.jc("click",(function(){return r.Ic(n),r.nc().changeTab("group")})),r.Rc(7,"Group Chat "),r.Wb(),r.Wb(),r.Pc(8,Pe,1,1,"app-group-chat",4),r.Pc(9,Oe,1,1,"app-direct-mongo-chat",5),r.Wb(),r.Ub()}if(2&e){var o=r.nc();r.Cb(4),r.Hb("active","direct"==o.activeTab),r.uc("matBadge",o.newMessagesCountInDirect.toString())("matBadgeHidden","direct"===o.activeTab||0===o.newMessagesCountInDirect),r.Cb(2),r.Hb("active","group"===o.activeTab),r.uc("matBadge",o.newMessagesCountInGroups.toString())("matBadgeHidden","group"===o.activeTab||0===o.newMessagesCountInGroups),r.Cb(2),r.uc("ngIf","group"==o.activeTab&&o.authUser),r.Cb(1),r.uc("ngIf","direct"===o.activeTab&&o.authUser)}}var ke,we,ye,We=[{path:"rooms",component:u,data:{title:"Chat rooms"}},{path:"messages",component:(ke=function(){function e(t,n,o,s,i,c){_classCallCheck(this,e),this.chatService=t,this.getAuthUser=n,this.socketService=o,this.subject=s,this.datePipe=i,this.groupBy=c,this.activeTab="direct",this.groupsMessages=[],this.groupsLoaded=!1,this.subscriptions=[],this.newMessagesCountInGroups=0,this.newMessagesCountInDirect=0}return _createClass(e,[{key:"ngOnInit",value:function(){this.authUser=this.getAuthUser.transform(),this.getGroupsMessages()}},{key:"changeTab",value:function(e){this.activeTab=e}},{key:"getGroupsMessages",value:function(){var e=this;this.subscriptions.push(this.chatService.getGroupsMessages({user_id:this.authUser.id,blocked:0}).subscribe((function(t){e.groupsMessages=t,e.groupsLoaded=!0;var n=t.filter((function(e){return e.new_messages_count>0}));console.log(n),e.newMessagesCountInGroups=n.length,e.subject.setNewMessagesSourceData({source:n,type:"group"})})))}}]),e}(),ke.\u0275fac=function(e){return new(e||ke)(r.Rb(g.a),r.Rb(l.a),r.Rb(p.a),r.Rb(b.a),r.Rb(i.f),r.Rb(d.a))},ke.\u0275cmp=r.Lb({type:ke,selectors:[["app-show-messages"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"tab-wrap"],["matBadgePosition","before",1,"tab","direct-tab",3,"matBadge","matBadgeHidden","click"],[1,"tab","group-tab",3,"matBadge","matBadgeHidden","click"],[3,"authUser",4,"ngIf"],[3,"authUser","newMessagesCountReceived",4,"ngIf"],[3,"authUser"],[3,"authUser","newMessagesCountReceived"]],template:function(e,t){1&e&&r.Pc(0,xe,10,10,"ng-container",0),2&e&&r.uc("ngIf",t.authUser)},directives:[i.n,h.a,m.a,ee,ve],styles:[".categories[_ngcontent-%COMP%]{display:flex;padding-bottom:10px;flex-wrap:wrap;border-bottom:.5px solid #e2e2e2;margin-bottom:24px}.categories[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-right:2px;margin-bottom:8px;width:-webkit-max-content;width:-moz-max-content;width:max-content}.categories[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{height:22px;border-radius:11px;padding:2px 11px;display:flex;justify-content:center;align-items:center;background:#eee;transition:.3s ease-in-out;color:#545454!important;font-size:14px;font-family:Muli-Regular;cursor:pointer}.categories[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%], .categories[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:#f53c6f;color:#fff!important;cursor:pointer}.categories.border-none[_ngcontent-%COMP%]{border:0;margin:0}.direct-tab[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{z-index:300;left:0}.tab-wrap[_ngcontent-%COMP%]{display:flex;padding-bottom:16px;width:100%;max-width:317px;background-color:#f5f5f5}.tab-wrap[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]{flex:1;padding:6px 16px;font-size:16px;font-weight:500;background:#c9c9c9;color:#fff;text-align:left;transition:all .3s ease}.tab-wrap[_ngcontent-%COMP%]   .tab.active[_ngcontent-%COMP%]{background:#f53c6f}.tab-wrap[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:not(.active):hover{background:#18b587;color:#fff}@media (max-width:1111px){.tab-wrap[_ngcontent-%COMP%]{max-width:100%;padding-bottom:0}}"]}),ke),data:{title:"Chat"}}],Xe=((we=function e(){_classCallCheck(this,e)}).\u0275mod=r.Pb({type:we}),we.\u0275inj=r.Ob({factory:function(e){return new(e||we)},imports:[[c.f.forChild(We)],c.f]}),we),Ge=n("PCNd"),Ue=((ye=function e(){_classCallCheck(this,e)}).\u0275mod=r.Pb({type:ye}),ye.\u0275inj=r.Ob({factory:function(e){return new(e||ye)},imports:[[i.c,Xe,Ge.a]]}),ye)}}]);