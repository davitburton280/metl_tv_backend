function _classCallCheck(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,i){for(var n=0;n<i.length;n++){var a=i[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,i,n){return i&&_defineProperties(e.prototype,i),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"55j5":function(e,i,n){"use strict";n.r(i),n.d(i,"ChannelsModule",(function(){return q}));var a,t=n("ofXK"),c=n("tyNb"),s=n("9xOu"),r=n("3Pt+"),o=n("fXoL"),b=n("FFj9"),u=n("Rnal"),l=n("tk/3"),h=((a=function(){function e(i){_classCallCheck(this,e),this.httpClient=i}return _createClass(e,[{key:"changeProfileImage",value:function(e){return this.httpClient.post(s.b+"users/change-profile-image",e)}},{key:"changeCoverImage",value:function(e){return this.httpClient.post(s.b+"users/change-cover-image",e)}},{key:"getUserInfo",value:function(e){return this.httpClient.get(s.b+"users/get-user-info",{params:e})}}]),e}()).\u0275fac=function(e){return new(e||a)(o.fc(l.b))},a.\u0275prov=o.Nb({token:a,factory:a.\u0275fac,providedIn:"root"}),a),f=n("1m4N"),v=n("hKYS"),d=n("kUS0"),p=n("bhfF");function g(e,i){if(1&e){var n=o.Yb();o.Xb(0,"div",23),o.Xb(1,"input",24),o.jc("change",(function(e){return o.Gc(n),o.nc(2).coverChangeEvent(e)})),o.Wb(),o.Xb(2,"ngx-photo-editor",25),o.jc("imageCropped",(function(e){return o.Gc(n),o.nc(2).coverCropped(e)})),o.Wb(),o.Wb()}if(2&e){var a=o.nc(2);o.sc("hidden",!0),o.Cb(2),o.sc("imageChanedEvent",a.coverChangedEvent)("autoCrop",!1)("viewMode",3)}}function m(e,i){if(1&e&&o.Sb(0,"img",26),2&e){var n=o.nc(2);o.sc("src",n.apiUrl+"uploads/avatars/"+n.channelUser.avatar,o.Ic)}}function C(e,i){1&e&&o.Sb(0,"img",27),2&e&&o.sc("src","assets/img/default-user.png",o.Ic)}function U(e,i){if(1&e){var n=o.Yb();o.Xb(0,"div",23),o.Xb(1,"input",28),o.jc("change",(function(e){return o.Gc(n),o.nc(2).profileChangeEvent(e)})),o.Wb(),o.Xb(2,"ngx-photo-editor",29),o.jc("imageCropped",(function(e){return o.Gc(n),o.nc(2).profileCropped(e)})),o.Wb(),o.Wb()}if(2&e){var a=o.nc(2);o.sc("hidden",!0),o.Cb(2),o.sc("imageChanedEvent",a.profileChangedEvent)("aspectRatio",4/3)("viewMode",1)("resizeToWidth",500)}}function I(e,i){1&e&&(o.Xb(0,"div",8),o.Sb(1,"i",30),o.Xb(2,"a",31),o.Pc(3,"Subscribe"),o.Wb(),o.Wb())}function W(e,i){if(1&e){var n=o.Yb();o.Xb(0,"li",32),o.Xb(1,"a",33),o.jc("click",(function(){o.Gc(n);var e=i.$implicit;return o.nc(2).changeActiveTab(e)})),o.Pc(2),o.Wb(),o.Wb()}if(2&e){var a=i.$implicit,t=o.nc(2);o.Cb(1),o.Hb("active",a===t.activeTab),o.uc("id","",a.link,"-tab"),o.uc("href","#",a.link,"",o.Ic),o.Cb(1),o.Qc(a.name)}}function X(e,i){if(1&e&&o.Sb(0,"img",45),2&e){var n=o.nc(2).$implicit,a=o.nc(5);o.sc("src",a.apiUrl+"uploads/thumbnails/"+n.thumbnail,o.Ic)}}function k(e,i){1&e&&o.Sb(0,"img",45),2&e&&o.sc("src","assets/img/video-thumbnail-default.png",o.Ic)}function w(e,i){1&e&&(o.Xb(0,"span",46),o.Pc(1,"Live now"),o.Wb())}function y(e,i){if(1&e&&o.Sb(0,"img",47),2&e){var n=o.nc(4).$implicit,a=o.nc(3);o.sc("src",a.apiUrl+"uploads/avatars/"+n.avatar,o.Ic)}}function P(e,i){1&e&&o.Sb(0,"img",47),2&e&&o.sc("src","assets/img/default-user.png",o.Ic)}function N(e,i){if(1&e){var n=o.Yb();o.Xb(0,"div",38),o.jc("click",(function(){o.Gc(n);var e=o.nc().$implicit,i=o.nc(2).$implicit;return o.nc(3).openVideoPage(e,i.username)})),o.Nc(1,X,1,1,"img",39),o.Nc(2,k,1,1,"img",39),o.Nc(3,w,2,0,"span",40),o.Xb(4,"div",41),o.Nc(5,y,1,1,"img",42),o.Nc(6,P,1,1,"img",42),o.Xb(7,"div"),o.Xb(8,"p",12),o.Pc(9),o.Wb(),o.Xb(10,"p",43),o.Pc(11),o.Wb(),o.Xb(12,"p",44),o.Pc(13,"17k watching"),o.Wb(),o.Wb(),o.Wb(),o.Wb()}if(2&e){var a=o.nc().$implicit,t=o.nc(2).$implicit;o.Cb(1),o.sc("ngIf",a.thumbnail),o.Cb(1),o.sc("ngIf",!a.thumbnail),o.Cb(1),o.sc("ngIf","live"===a.status),o.Cb(2),o.sc("ngIf",t.avatar),o.Cb(1),o.sc("ngIf",!t.avatar),o.Cb(3),o.Qc(a.name),o.Cb(2),o.Qc(t.full_name)}}function S(e,i){1&e&&(o.Vb(0),o.Nc(1,N,14,7,"ng-template",37),o.Ub())}function V(e,i){if(1&e&&(o.Vb(0),o.Xb(1,"p",35),o.Pc(2),o.Wb(),o.Xb(3,"owl-carousel-o",36),o.Nc(4,S,2,0,"ng-container",34),o.Wb(),o.Ub()),2&e){var n=o.nc().$implicit,a=o.nc(3);o.Cb(2),o.Qc(n.full_name),o.Cb(1),o.sc("options",a.owlOptions),o.Cb(1),o.sc("ngForOf",n.videos)}}function _(e,i){if(1&e&&(o.Vb(0),o.Nc(1,V,5,3,"ng-container",1),o.Ub()),2&e){var n=i.$implicit;o.Cb(1),o.sc("ngIf",n.videos.length>0)}}function F(e,i){if(1&e&&(o.Vb(0),o.Nc(1,_,2,1,"ng-container",34),o.Ub()),2&e){var n=o.nc(2);o.Cb(1),o.sc("ngForOf",n.watchlistVideos)}}function T(e,i){1&e&&o.Sb(0,"img",49)}function j(e,i){if(1&e&&o.Sb(0,"img",45),2&e){var n=o.nc(2).$implicit,a=o.nc(3);o.tc("src",a.apiUrl+"uploads/thumbnails/"+n.thumbnail,o.Ic)}}function O(e,i){if(1&e&&o.Sb(0,"img",47),2&e){var n=o.nc(5);o.sc("src",n.apiUrl+"uploads/avatars/"+n.authUser.avatar,o.Ic)}}function E(e,i){1&e&&o.Sb(0,"img",47),2&e&&o.sc("src","assets/img/default-user.png",o.Ic)}function $(e,i){if(1&e){var n=o.Yb();o.Xb(0,"div",38),o.jc("click",(function(){o.Gc(n);var e=o.nc().$implicit,i=o.nc(3);return i.openVideoPage(e,i.authUser.username)})),o.Nc(1,T,1,0,"img",48),o.Nc(2,j,1,1,"img",39),o.Xb(3,"div",41),o.Nc(4,O,1,1,"img",42),o.Nc(5,E,1,1,"img",42),o.Xb(6,"div"),o.Xb(7,"p",12),o.Pc(8),o.Wb(),o.Xb(9,"p",43),o.Pc(10),o.Wb(),o.Xb(11,"p",44),o.Pc(12,"17k watching"),o.Wb(),o.Wb(),o.Wb(),o.Wb()}if(2&e){var a=o.nc().$implicit,t=o.nc(3);o.Cb(1),o.sc("ngIf",!a.thumbnail||"undefined"===a.thumbnail),o.Cb(1),o.sc("ngIf",a.thumbnail&&"undefined"!==a.thumbnail),o.Cb(2),o.sc("ngIf",t.authUser.avatar),o.Cb(1),o.sc("ngIf",!t.authUser.avatar),o.Cb(3),o.Qc(a.name),o.Cb(2),o.Qc(t.authUser.full_name)}}function R(e,i){1&e&&(o.Vb(0),o.Nc(1,$,13,6,"ng-template",37),o.Ub())}function x(e,i){if(1&e&&(o.Vb(0),o.Xb(1,"p",35),o.Pc(2,"Recent videos"),o.Wb(),o.Xb(3,"owl-carousel-o"),o.Nc(4,R,2,0,"ng-container",34),o.Wb(),o.Ub()),2&e){var n=o.nc(2);o.Cb(4),o.sc("ngForOf",n.currentUser.videos)}}function A(e,i){if(1&e){var n=o.Yb();o.Vb(0),o.Xb(1,"div",3),o.Nc(2,g,3,4,"div",4),o.Xb(3,"label",5),o.Sb(4,"img",6),o.Wb(),o.Wb(),o.Xb(5,"div",7),o.Xb(6,"div",8),o.Xb(7,"label",9),o.Nc(8,m,1,1,"img",10),o.Nc(9,C,1,1,"img",11),o.Wb(),o.Nc(10,U,3,5,"div",4),o.Xb(11,"div"),o.Xb(12,"p",12),o.Pc(13),o.Wb(),o.Xb(14,"p",13),o.Pc(15,"83,7 subscribers"),o.Wb(),o.Wb(),o.Wb(),o.Nc(16,I,4,0,"div",14),o.Wb(),o.Xb(17,"div",15),o.Xb(18,"div",16),o.Xb(19,"ul",17),o.Nc(20,W,3,5,"li",18),o.Wb(),o.Xb(21,"form",19),o.Xb(22,"div",20),o.Xb(23,"input",21),o.jc("keyup.enter",(function(){return o.Gc(n),o.nc().searchVideos()})),o.Wb(),o.Sb(24,"i",22),o.Wb(),o.Wb(),o.Wb(),o.Nc(25,F,2,1,"ng-container",1),o.Nc(26,x,5,1,"ng-container",1),o.Wb(),o.Ub()}if(2&e){var a=o.nc();o.Cb(2),o.sc("ngIf",a.channelUser.username===a.authUser.username),o.Cb(2),o.sc("src",a.channelUser.cover?a.apiUrl+"uploads/covers/"+a.channelUser.cover:"assets/img/default-thumbnail.png",o.Ic),o.Cb(4),o.sc("ngIf",a.channelUser.avatar),o.Cb(1),o.sc("ngIf",!a.channelUser.avatar),o.Cb(1),o.sc("ngIf",a.channelUser.username===a.authUser.username),o.Cb(3),o.Qc(a.channelUser.channel.name),o.Cb(3),o.sc("ngIf",a.channelUser.username!==a.authUser.username),o.Cb(4),o.sc("ngForOf",a.allTabs),o.Cb(1),o.sc("formGroup",a.searchVideosForm),o.Cb(4),o.sc("ngIf","Watchlist"===a.activeTab.name),o.Cb(1),o.sc("ngIf","Videos"===a.activeTab.name)}}function G(e,i){1&e&&(o.Xb(0,"div",50),o.Xb(1,"p"),o.Pc(2,"Channel with such name is not found"),o.Wb(),o.Wb())}var M,Q,Y,B=[{path:"show",component:(M=function(){function e(i,n,a,t,c,o,b){_classCallCheck(this,e),this.videoService=i,this.getAuthUser=n,this.router=a,this.usersService=t,this.base64ToFile=c,this.route=o,this.fb=b,this.owlOptions=s.d,this.watchlistVideos=[],this.activeTab=s.e[0],this.allTabs=s.e,this.apiUrl=s.b,this.authUser=this.getAuthUser.transform(),this.passedUsername=this.route.snapshot.queryParams.username,this.searchVideosForm=this.fb.group({search:["",r.t.required]})}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.passedUsername&&this.usersService.getUserInfo({username:this.passedUsername}).subscribe((function(i){e.channelUser=i,console.log(e.channelUser.username,e.authUser.username)})),this.videoService.getUserVideos({user_id:this.authUser.id}).subscribe((function(i){e.currentUser=i})),this.videoService.getVideosByAuthor({}).subscribe((function(i){e.watchlistVideos=i}))}},{key:"changeActiveTab",value:function(e){this.activeTab=e,this.searchVideos()}},{key:"openVideoPage",value:function(e,i){var n,a;console.log(i),"live"===e.status?(n="user/video/watch",a={session:e.session_name,publisher:i}):(n="videos/play",a={id:e.id}),this.router.navigate([n],{queryParams:a})}},{key:"coverChangeEvent",value:function(e){this.coverChangedEvent=e}},{key:"profileChangeEvent",value:function(e){this.profileChangedEvent=e}},{key:"profileCropped",value:function(e){var i=this;this.profileBase64=e.base64;var n="profile_".concat(Date.now(),".jpg"),a=new FormData;a.append("avatar_file",this.base64ToFile.transform(e.base64),n),a.append("avatar",n),a.append("id",this.authUser.id),this.usersService.changeProfileImage(a).subscribe((function(e){localStorage.setItem("token",e.token),i.authUser=i.getAuthUser.transform(),i.channelUser=i.authUser}))}},{key:"coverCropped",value:function(e){var i=this;this.coverBase64=e.base64;var n=new FormData,a="cover_".concat(Date.now(),".jpg");n.append("cover_file",this.base64ToFile.transform(e.base64),a),n.append("cover",a),n.append("id",this.authUser.id),this.usersService.changeCoverImage(n).subscribe((function(e){localStorage.setItem("token",e.token),i.authUser=i.getAuthUser.transform(),i.channelUser=i.authUser}))}},{key:"searchVideos",value:function(){var e=this.searchVideosForm.value;e.search&&("Watchlist"===this.activeTab.name?this.searchInVideosByAuthor(e):"Videos"===this.activeTab.name&&this.searchInUserVideos(e))}},{key:"searchInVideosByAuthor",value:function(e){var i=this;this.videoService.searchInVideosByAuthor(e).subscribe((function(e){i.watchlistVideos=e}))}},{key:"searchInUserVideos",value:function(e){var i=this;this.currentUser.videos=[],this.videoService.searchInUserVideos(Object.assign({user_id:this.authUser.id},e)).subscribe((function(e){i.currentUser.videos=e.videos}))}}]),e}(),M.\u0275fac=function(e){return new(e||M)(o.Rb(b.a),o.Rb(u.a),o.Rb(c.d),o.Rb(h),o.Rb(f.a),o.Rb(c.a),o.Rb(r.c))},M.\u0275cmp=o.Lb({type:M,selectors:[["app-show-channel"]],decls:4,vars:2,consts:[[1,"profile-list"],[4,"ngIf"],["class","channel-not-found",4,"ngIf"],[1,"profile-block"],[3,"hidden",4,"ngIf"],["for","cover-image-input"],["id","cover-image",3,"src"],[1,"sub-block"],[1,"d-flex","align-items-center"],["for","profile-image-input"],["class","avatar list-img",3,"src",4,"ngIf"],["class","avatar","id","profile-image",3,"src",4,"ngIf"],[1,"main-text-1"],[1,"main-text-4"],["class","d-flex align-items-center",4,"ngIf"],[1,"watchlist","pWatchlist"],[1,"profile-list","user-profile-block"],["id","profileList","role","tablist",1,"nav","nav-tabs"],["class","nav-item",4,"ngFor","ngForOf"],[3,"formGroup"],[1,"watchlist-search"],["placeholder","Search","formControlName","search",1,"watchlist-input",3,"keyup.enter"],[1,"fas","fa-search"],[3,"hidden"],["type","file","id","cover-image-input",3,"change"],[3,"imageChanedEvent","autoCrop","viewMode","imageCropped"],[1,"avatar","list-img",3,"src"],["id","profile-image",1,"avatar",3,"src"],["type","file","id","profile-image-input",3,"change"],[3,"imageChanedEvent","aspectRatio","viewMode","resizeToWidth","imageCropped"],[1,"sub-bell","fas","fa-bell"],[1,"subscribe-btn"],[1,"nav-item"],["data-toggle","tab","role","tab","aria-controls","pWatch","aria-selected","true",1,"nav-link",3,"id","href","click"],[4,"ngFor","ngForOf"],[1,"trending-text"],[3,"options"],["carouselSlide",""],[1,"item","main-carousel-item",3,"click"],["class","main-item-img",3,"src",4,"ngIf"],["class","live-now",4,"ngIf"],[1,"main-item-block"],["class","avatar",3,"src",4,"ngIf"],[1,"main-text-2"],[1,"main-text-3"],[1,"main-item-img",3,"src"],[1,"live-now"],[1,"avatar",3,"src"],["class","main-item-img","src","assets/img/video-thumbnail-default.png",4,"ngIf"],["src","assets/img/video-thumbnail-default.png",1,"main-item-img"],[1,"channel-not-found"]],template:function(e,i){1&e&&(o.Xb(0,"div",0),o.Sb(1,"app-categories"),o.Nc(2,A,27,11,"ng-container",1),o.Nc(3,G,3,0,"div",2),o.Wb()),2&e&&(o.Cb(2),o.sc("ngIf",i.channelUser),o.Cb(1),o.sc("ngIf",!i.channelUser))},directives:[v.a,t.m,t.l,r.v,r.m,r.g,r.b,r.l,r.f,d.a,p.a,p.c],styles:[".profile-block[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:100%}"]}),M)}],D=((Q=function e(){_classCallCheck(this,e)}).\u0275mod=o.Pb({type:Q}),Q.\u0275inj=o.Ob({factory:function(e){return new(e||Q)},imports:[[c.e.forChild(B)],c.e]}),Q),L=n("PCNd"),q=((Y=function e(){_classCallCheck(this,e)}).\u0275mod=o.Pb({type:Y}),Y.\u0275inj=o.Ob({factory:function(e){return new(e||Y)},imports:[[t.c,D,L.a,d.b]]}),Y)}}]);