(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"55j5":function(t,n,e){"use strict";e.r(n),e.d(n,"ChannelsModule",(function(){return bn}));var s=e("ofXK"),i=e("tyNb"),c=e("mrSG"),o=e("9xOu"),a=e("3Pt+"),r=e("pLZG"),l=e("fXoL"),h=e("FFj9"),b=e("wDcp"),g=e("ZP/m"),d=e("sAj1"),u=e("Rnal"),p=e("Xa2L"),f=e("WKnA");function m(t,n){1&t&&l.Sb(0,"mat-spinner",4),2&t&&l.uc("diameter",20)}function C(t,n){1&t&&(l.Xb(0,"small",5),l.Rc(1," No stocks added to watchlist"),l.Wb())}function P(t,n){if(1&t){const t=l.Yb();l.Xb(0,"app-stock-tiles",6),l.jc("updatedStocksList",(function(n){return l.Ic(t),l.nc(2).saveUpdatedStocksList(n)}))("updatedStocksPriority",(function(n){return l.Ic(t),l.nc(2).updateStocksPriority(n)})),l.Wb()}if(2&t){const t=l.nc(2);l.uc("stocks",t.filteredStocks)("userStocks",t.userStocks)("followingAllowed",!0)}}function v(t,n){if(1&t&&(l.Xb(0,"div"),l.Pc(1,m,1,1,"mat-spinner",1),l.Pc(2,C,2,0,"small",2),l.Pc(3,P,1,3,"app-stock-tiles",3),l.Wb()),2&t){const t=l.nc();l.Cb(1),l.uc("ngIf","loading"===t.stocksLoading),l.Cb(1),l.uc("ngIf",0===(null==t.userStocks?null:t.userStocks.length)&&"finished"===t.stocksLoading),l.Cb(1),l.uc("ngIf",(null==t.userStocks?null:t.userStocks.length)>0)}}let _=(()=>{class t{constructor(t,n,e,s,i,c,a,r){this.videoService=t,this.subjectService=n,this.router=e,this.getExactParams=s,this.stocksService=i,this.getAuthUser=c,this.subject=a,this.cdr=r,this.apiUrl=o.c,this.subscriptions=[],this.userStocks=[],this.filteredStocks=[],this.stocksLoading="idle"}ngOnInit(){this.authUser=this.getAuthUser.transform(),this.search=localStorage.getItem("searchStock"),this.stocksLoading="loading",this.subscriptions.push(this.subject.currentUserStocks.pipe(Object(r.a)(t=>!t.initial)).subscribe(t=>{this.userStocks=t.stocks,this.filteredStocks=this.userStocks,this.stocksLoading="finished"}))}getSearchResults(t){this.search=t,this.filteredStocks=t.search?this.userStocks.filter(n=>n.name.toLowerCase().includes(t.search)):this.userStocks}saveUpdatedStocksList(t){this.stocksLoading="loading",this.subscriptions.push(this.stocksService.updateFollowedStocks(Object.assign({user_id:this.authUser.id},{stocks:t})).subscribe(t=>{this.userStocks=(null==t?void 0:t.user_stocks)||[],this.subject.changeUserStocks({stocks:this.userStocks,empty:0===this.userStocks.length}),this.stocksLoading="finished",this.cdr.detectChanges()}))}updateStocksPriority(t){const n={order_type:"custom",rows:JSON.stringify(t),user_id:this.authUser.id};this.subject.changeUserStocks({stocks:t,dragdrop:!0}),this.stocksService.updateUserStocksPriority(n).subscribe(t=>{localStorage.setItem("token",t.hasOwnProperty("token")?t.token:"")})}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(n){return new(n||t)(l.Rb(h.a),l.Rb(b.a),l.Rb(i.d),l.Rb(g.a),l.Rb(d.a),l.Rb(u.a),l.Rb(b.a),l.Rb(l.h))},t.\u0275cmp=l.Lb({type:t,selectors:[["app-watchlist-tab"]],inputs:{channelUser:"channelUser"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"diameter",4,"ngIf"],["class","error",4,"ngIf"],[3,"stocks","userStocks","followingAllowed","updatedStocksList","updatedStocksPriority",4,"ngIf"],[3,"diameter"],[1,"error"],[3,"stocks","userStocks","followingAllowed","updatedStocksList","updatedStocksPriority"]],template:function(t,n){1&t&&l.Pc(0,v,4,3,"div",0),2&t&&l.uc("ngIf",n.filteredStocks&&n.channelUser.username===n.authUser.username)},directives:[s.n,p.b,f.a],styles:[""]}),t})();var M=e("sMQj"),O=e("86ia");function y(t,n){if(1&t){const t=l.Yb();l.Xb(0,"app-video-filters",2),l.jc("filter",(function(n){return l.Ic(t),l.nc().getFilteredVideos(n)})),l.Wb()}}let k=(()=>{class t{constructor(t,n,e,s){this.router=t,this.videoService=n,this.subjectService=e,this.getExactParams=s,this.owlOptions=o.k,this.apiUrl=o.c,this.showFilters=!1,this.search="",this.filters=null,this.userVideos=[],this.videosLoaded=!1}ngOnInit(){this.subjectService.getToggleFiltersData().subscribe(t=>{this.showFilters=t})}getUserVideos(t){(t=this.getExactParams.transform(t)).user_id=this.channelUser.id,this.videoService.getUserVideos(t).subscribe(t=>{this.videosLoaded=!0,this.channelUser.videos=null==t?void 0:t.videos})}getSearchResults(t){this.search=t,this.getUserVideos({search:this.search,filters:this.filters})}getFilteredVideos(t){this.filters=t,this.getUserVideos({search:this.search,filters:this.filters})}}return t.\u0275fac=function(n){return new(n||t)(l.Rb(i.d),l.Rb(h.a),l.Rb(b.a),l.Rb(g.a))},t.\u0275cmp=l.Lb({type:t,selectors:[["app-videos-tab"]],inputs:{channelUser:"channelUser",authUser:"authUser"},decls:2,vars:3,consts:[[3,"filter",4,"ngIf"],[3,"videos","removable"],[3,"filter"]],template:function(t,n){1&t&&(l.Pc(0,y,1,0,"app-video-filters",0),l.Sb(1,"app-videos-list-holder",1)),2&t&&(l.uc("ngIf",n.showFilters),l.Cb(1),l.uc("videos",n.channelUser.videos)("removable",n.authUser.username===n.channelUser.username))},directives:[s.n,M.a,O.a],styles:[""]}),t})();var x=e("0IaG"),U=e("CPAS");function S(t,n){1&t&&(l.Xb(0,"span",11),l.Rc(1,"Playlist name is required"),l.Wb())}function w(t,n){1&t&&(l.Xb(0,"span",11),l.Rc(1,"Playlist description is required"),l.Wb())}function W(t,n){1&t&&(l.Xb(0,"span",11),l.Rc(1,"Playlist privacy is required"),l.Wb())}let I=(()=>{class t{constructor(t,n,e,s){this.data=t,this.modal=n,this.fb=e,this.playlistService=s,this.isSubmitted=!1,console.log(t),this.addPlaylistForm=this.fb.group({channel_id:t.channel_id,name:["",a.x.required],description:["",a.x.required],privacy:["",a.x.required]})}ngOnInit(){}createPlaylist(){this.isSubmitted=!0,this.addPlaylistForm.valid&&this.playlistService.addPlaylist(this.addPlaylistForm.value).subscribe(t=>{this.modal.close()})}cancel(){this.modal.close()}get nameCtrl(){return this.addPlaylistForm.get("name")}get privacyCtrl(){return this.addPlaylistForm.get("privacy")}get descCtrl(){return this.addPlaylistForm.get("description")}}return t.\u0275fac=function(n){return new(n||t)(l.Rb(x.a),l.Rb(x.d),l.Rb(a.e),l.Rb(U.a))},t.\u0275cmp=l.Lb({type:t,selectors:[["app-add-playlist-dialog"]],decls:20,vars:7,consts:[[1,"add-playlist-modal"],[3,"formGroup"],["type","text","placeholder","Playlist Name","formControlName","name"],["class","error",4,"ngIf"],["id","playlist-description","cols","30","rows","10","formControlName","description","placeholder","Playlist Description"],[1,"select"],["id","visibility","formControlName","privacy"],[3,"value"],[1,"btn-wrap"],[1,"btn","cancel",3,"click"],[1,"btn","create",3,"click"],[1,"error"]],template:function(t,n){1&t&&(l.Xb(0,"div",0),l.Xb(1,"form",1),l.Sb(2,"input",2),l.Pc(3,S,2,0,"span",3),l.Sb(4,"textarea",4),l.Pc(5,w,2,0,"span",3),l.Xb(6,"div",5),l.Xb(7,"select",6),l.Xb(8,"option",7),l.Rc(9,"Visibility"),l.Wb(),l.Xb(10,"option",7),l.Rc(11,"Public"),l.Wb(),l.Xb(12,"option",7),l.Rc(13,"Private"),l.Wb(),l.Wb(),l.Wb(),l.Pc(14,W,2,0,"span",3),l.Xb(15,"div",8),l.Xb(16,"button",9),l.jc("click",(function(){return n.cancel()})),l.Rc(17,"Cancel"),l.Wb(),l.Xb(18,"button",10),l.jc("click",(function(){return n.createPlaylist()})),l.Rc(19,"Create"),l.Wb(),l.Wb(),l.Wb(),l.Wb()),2&t&&(l.Cb(1),l.uc("formGroup",n.addPlaylistForm),l.Cb(2),l.uc("ngIf",n.nameCtrl.hasError("required")&&n.isSubmitted),l.Cb(2),l.uc("ngIf",n.descCtrl.hasError("required")&&n.isSubmitted),l.Cb(3),l.uc("value",""),l.Cb(2),l.uc("value",0),l.Cb(2),l.uc("value",1),l.Cb(2),l.uc("ngIf",n.privacyCtrl.hasError("required")&&n.isSubmitted))},directives:[a.z,a.q,a.i,a.c,a.p,a.h,s.n,a.w,a.t,a.y],styles:[".add-playlist-modal[_ngcontent-%COMP%]{overflow:auto;max-height:100%;padding:32px;width:100%;max-width:890px;top:50%;left:50%;transform:translateX(-50%) translateY(-50%);position:absolute;background:#fff;z-index:1001}.add-playlist-modal[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .add-playlist-modal[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .add-playlist-modal[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:12px 24px;background:#f4f4f4;color:#545454;margin-bottom:32px;border:0;outline:none}.add-playlist-modal[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:162px;min-height:96px;max-height:280px;resize:none}.add-playlist-modal[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:auto;min-width:284px}.add-playlist-modal[_ngcontent-%COMP%]   .btn-wrap[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.add-playlist-modal[_ngcontent-%COMP%]   .btn-wrap[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-left:24px;background:#18b587;color:#fff;font-size:16px;border-radius:0;padding:8px 24px;line-height:normal}.add-playlist-modal[_ngcontent-%COMP%]   .btn-wrap[_ngcontent-%COMP%]   .btn.cancel[_ngcontent-%COMP%]{background:#c9c9c9}"]}),t})();var X=e("dJ++"),R=e("wgiU"),F=e("NFeN"),T=e("fZdh");function j(t,n){if(1&t){const t=l.Yb();l.Xb(0,"app-video-filters",4),l.jc("filter",(function(n){return l.Ic(t),l.nc().getFilteredPlaylists(n)})),l.Wb()}}function L(t,n){1&t&&(l.Vb(0),l.Xb(1,"mat-icon"),l.Rc(2,"visibility_off"),l.Wb(),l.Xb(3,"span"),l.Rc(4,"Private"),l.Wb(),l.Ub())}function B(t,n){1&t&&(l.Vb(0),l.Xb(1,"mat-icon"),l.Rc(2,"visibility_on"),l.Wb(),l.Xb(3,"span"),l.Rc(4,"Public"),l.Wb(),l.Ub())}function E(t,n){if(1&t){const t=l.Yb();l.Xb(0,"tr"),l.Xb(1,"td"),l.Xb(2,"div",9),l.Xb(3,"img",10),l.jc("click",(function(){l.Ic(t);const e=n.$implicit;return l.nc(3).goToEditPage(e)})),l.oc(4,"getImgPath"),l.Wb(),l.Xb(5,"div",11),l.Xb(6,"h3"),l.Rc(7),l.Wb(),l.Xb(8,"p"),l.Rc(9),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Xb(10,"td"),l.Pc(11,L,5,0,"ng-container",2),l.Pc(12,B,5,0,"ng-container",2),l.Wb(),l.Xb(13,"td"),l.Xb(14,"span"),l.Rc(15),l.oc(16,"date"),l.Wb(),l.Wb(),l.Xb(17,"td"),l.Xb(18,"span"),l.Rc(19),l.oc(20,"date"),l.Wb(),l.Wb(),l.Xb(21,"td"),l.Xb(22,"span"),l.Rc(23),l.Wb(),l.Wb(),l.Xb(24,"td"),l.Xb(25,"span",12),l.jc("click",(function(){l.Ic(t);const e=n.$implicit;return l.nc(3).goToEditPage(e)})),l.Rc(26,"create"),l.Wb(),l.Xb(27,"mat-icon",13),l.jc("click",(function(){l.Ic(t);const e=n.$implicit,s=l.nc(3);return s.removePlaylist(e.id,s.channelUser.id)})),l.Rc(28,"delete"),l.Wb(),l.Wb(),l.Wb()}if(2&t){const t=n.$implicit;l.Cb(3),l.uc("src",l.pc(4,8,t.thumbnail),l.Kc),l.Cb(4),l.Sc(t.name),l.Cb(2),l.Sc(t.description),l.Cb(2),l.uc("ngIf",t.privacy),l.Cb(1),l.uc("ngIf",!t.privacy),l.Cb(3),l.Sc(l.qc(16,10,t.created_at,"d MMM, yyyy")),l.Cb(4),l.Sc(l.qc(20,13,t.updated_at,"d MMM, yyyy")),l.Cb(4),l.Sc(t.videos.length)}}function A(t,n){if(1&t&&(l.Xb(0,"table",7),l.Xb(1,"tr"),l.Xb(2,"th"),l.Rc(3,"Playlist"),l.Wb(),l.Xb(4,"th"),l.Rc(5,"Visibility"),l.Wb(),l.Xb(6,"th"),l.Rc(7,"Created at"),l.Wb(),l.Xb(8,"th"),l.Rc(9,"Last updated"),l.Wb(),l.Xb(10,"th"),l.Rc(11,"Video count"),l.Wb(),l.Sb(12,"th"),l.Wb(),l.Pc(13,E,29,16,"tr",8),l.Wb()),2&t){const t=l.nc(2);l.Cb(13),l.uc("ngForOf",t.playlists)("ngForTrackBy",t.trackByElement)}}function q(t,n){if(1&t){const t=l.Yb();l.Vb(0),l.Xb(1,"button",5),l.jc("click",(function(){return l.Ic(t),l.nc().openAddPlaylistModal()})),l.Rc(2,"Add New Playlist"),l.Wb(),l.Pc(3,A,14,2,"table",6),l.Ub()}if(2&t){const t=l.nc();l.Cb(3),l.uc("ngIf",t.playlists.length>0)}}function V(t,n){if(1&t){const t=l.Yb();l.Vb(0),l.Xb(1,"div",16),l.Xb(2,"div",17),l.jc("click",(function(){l.Ic(t);const e=n.$implicit;return l.nc(2).openPlaylistPage(e,null==e.videos[0]?null:e.videos[0].id)})),l.Sb(3,"img",18),l.oc(4,"getImgPath"),l.Xb(5,"div",19),l.Xb(6,"p",20),l.Xb(7,"span",21),l.Rc(8,"playlist_play"),l.Wb(),l.Wb(),l.Xb(9,"p"),l.Rc(10),l.Wb(),l.Xb(11,"p",22),l.Rc(12),l.Wb(),l.Wb(),l.Wb(),l.Xb(13,"div",11),l.Xb(14,"h2"),l.Rc(15),l.Wb(),l.Xb(16,"p"),l.Rc(17),l.Wb(),l.Wb(),l.Wb(),l.Ub()}if(2&t){const t=n.$implicit;l.Cb(3),l.uc("src",l.pc(4,5,t.thumbnail),l.Kc),l.Cb(7),l.Sc(t.name),l.Cb(2),l.Sc(t.videos.length+(1===t.videos.length?" video":" videos")),l.Cb(3),l.Sc(t.name),l.Cb(2),l.Sc(t.description)}}function Y(t,n){if(1&t&&(l.Vb(0),l.Xb(1,"div",14),l.Pc(2,V,18,7,"ng-container",15),l.Wb(),l.Ub()),2&t){const t=l.nc();l.Cb(2),l.uc("ngForOf",t.playlists)}}function D(t,n){1&t&&(l.Xb(0,"div",23),l.Xb(1,"small",24),l.Rc(2,"No playlists found for this channel"),l.Wb(),l.Wb())}let z=(()=>{class t{constructor(t,n,e,s,i){this.router=t,this.playlistsService=n,this.subjectService=e,this.dialog=s,this.getExactParams=i,this.playlists=[],this.apiUrl=o.c,this.showFilters=!1,this.search="",this.filters=null,this.subscriptions=[],this.trackByElement=R.a}ngOnInit(){this.search=localStorage.getItem("search"),this.getPlaylists({search:this.search,filters:this.filters}),this.getFiltersToggleState()}getFiltersToggleState(){this.subscriptions.push(this.subjectService.getToggleFiltersData().subscribe(t=>{this.showFilters=t}))}getPlaylists(t){t=this.getExactParams.transform(t),this.playlistsService.get(Object.assign({channel_id:this.channelUser.channel.id,user_id:this.authUser.id},t)).subscribe(t=>{this.playlists=t})}openAddPlaylistModal(){this.dialog.open(I,{data:{channel_id:this.channelUser.channel.id}}).afterClosed().subscribe(t=>{this.getPlaylists({search:this.search,filters:this.filters})})}openPlaylistPage(t,n){this.router.navigate(["videos/play"],{queryParams:{id:n,playlist_id:t.id}})}getSearchResults(t){this.search=t,this.getPlaylists({search:t,filters:this.filters})}getFilteredPlaylists(t){this.filters=t,this.getPlaylists({search:this.search,filters:t})}goToEditPage(t){this.router.navigate(["playlists/single/"+t.id])}removePlaylist(t,n){this.dialog.open(X.a).afterClosed().subscribe(e=>{e&&this.playlistsService.removePlaylist({id:t,channel_id:n}).subscribe(t=>{this.getPlaylists({search:this.search,filters:this.filters})})})}}return t.\u0275fac=function(n){return new(n||t)(l.Rb(i.d),l.Rb(U.a),l.Rb(b.a),l.Rb(x.b),l.Rb(g.a))},t.\u0275cmp=l.Lb({type:t,selectors:[["app-playlists-tab"]],inputs:{channelUser:"channelUser",authUser:"authUser"},decls:5,vars:4,consts:[[3,"filter",4,"ngIf"],[1,"playlist-tab"],[4,"ngIf"],["id","no-playlists-found",4,"ngIf"],[3,"filter"],[1,"btn","new-playlist",3,"click"],["class","table-responsive",4,"ngIf"],[1,"table-responsive"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"img-info"],[1,"thumbnail",3,"src","click"],[1,"info"],[1,"material-icons",3,"click"],[3,"click"],[1,"playlists-items"],[4,"ngFor","ngForOf"],[1,"item"],[1,"top-wrap",3,"click"],[1,"thumbnail",3,"src"],[1,"overlay-info"],[1,"icon"],[1,"material-icons"],[1,"video-count"],["id","no-playlists-found"],[1,"error"]],template:function(t,n){1&t&&(l.Pc(0,j,1,0,"app-video-filters",0),l.Xb(1,"div",1),l.Pc(2,q,4,1,"ng-container",2),l.Pc(3,Y,3,1,"ng-container",2),l.Pc(4,D,3,0,"div",3),l.Wb()),2&t&&(l.uc("ngIf",n.showFilters),l.Cb(2),l.uc("ngIf",n.authUser.username===n.channelUser.username),l.Cb(1),l.uc("ngIf",n.authUser.username!==n.channelUser.username),l.Cb(1),l.uc("ngIf",0===n.playlists.length))},directives:[s.n,O.a,s.m,F.a],pipes:[T.a,s.f],styles:[".playlist-tab[_ngcontent-%COMP%]   .new-playlist[_ngcontent-%COMP%]{background:#18b587;border-radius:0;color:#fff;padding:8px 24px}.playlist-tab[_ngcontent-%COMP%]   #no-playlists-found[_ngcontent-%COMP%]{margin-top:20px}.playlist-tab[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{display:table;margin:24px 0;width:100%}.playlist-tab[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table-row}.playlist-tab[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   .td[_ngcontent-%COMP%]{border-bottom:0}.playlist-tab[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{text-align:right}.playlist-tab[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child   .material-icons[_ngcontent-%COMP%]{transition:.3s}.playlist-tab[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child   .material-icons[_ngcontent-%COMP%]:hover{color:#18b587}.playlist-tab[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .playlist-tab[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle;color:#545454;font-family:Muli-Bold,sans-serif;white-space:nowrap;font-size:16px;padding:12px 0}.playlist-tab[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child   .material-icons[_ngcontent-%COMP%], .playlist-tab[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child   .material-icons[_ngcontent-%COMP%]{margin:0}.playlist-tab[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%], .playlist-tab[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{margin-right:12px!important;vertical-align:middle;cursor:pointer}.playlist-tab[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .img-info[_ngcontent-%COMP%], .playlist-tab[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .img-info[_ngcontent-%COMP%]{display:flex;align-items:flex-start}.playlist-tab[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .img-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .playlist-tab[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .img-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:144px;cursor:pointer}.playlist-tab[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .img-info[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%], .playlist-tab[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .img-info[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{margin-left:24px}.playlist-tab[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .img-info[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .playlist-tab[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .img-info[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{max-width:240px;font-size:16px;font-family:Muli-Bold;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden}.playlist-tab[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .img-info[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .playlist-tab[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .img-info[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{max-width:240px;font-size:12px;font-weight:400;-webkit-line-clamp:2;display:-webkit-box;-webkit-box-orient:vertical;overflow:hidden}@media screen and (max-width:991px){.playlist-tab[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{display:block;overflow-x:auto}}.playlists-items[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.playlists-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{flex:0 0 calc(33.3% - 21px);margin-right:32px;margin-bottom:32px;cursor:pointer}.playlists-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:nth-child(3n+3){margin-right:0}.playlists-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .top-wrap[_ngcontent-%COMP%]{position:relative;height:216px}.playlists-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .top-wrap[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;-o-object-fit:cover;object-fit:cover}.playlists-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .top-wrap[_ngcontent-%COMP%]   .overlay-info[_ngcontent-%COMP%]{padding:16px;position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.38)}.playlists-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .top-wrap[_ngcontent-%COMP%]   .overlay-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;font-size:16px;font-weight:700;margin-bottom:8px}.playlists-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{margin-top:24px}.playlists-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#545454;font-size:16px;font-weight:700}.playlists-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:8px;margin-bottom:0;color:#545454;font-size:15px;font-weight:500}@media screen and (max-width:991px){.playlists-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{flex:0 0 calc(50% - 21px)}}@media screen and (max-width:767px){.playlists-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{flex:0 0 100%}}"]}),t})();var N=e("fm3l"),H=e("tVj7"),G=e("1m4N"),$=e("HHsJ"),K=e("7dP1"),J=e("lwos"),Q=e("JEAd"),Z=e("5eHb"),tt=e("il7l"),nt=e("Y9zH"),et=e("WHgu"),st=e("kUS0"),it=e("bTqV"),ct=e("kmnG"),ot=e("qFsG"),at=e("STbY");function rt(t,n){if(1&t){const t=l.Yb();l.Xb(0,"div",19),l.Xb(1,"input",20),l.jc("change",(function(n){return l.Ic(t),l.nc().coverChangeEvent(n)})),l.Wb(),l.Sb(2,"input",21),l.Xb(3,"ngx-photo-editor",22),l.jc("imageCropped",(function(n){return l.Ic(t),l.nc().coverCropped(n)})),l.Wb(),l.Wb()}if(2&t){const t=l.nc();l.uc("hidden",!0),l.Cb(3),l.uc("imageChanedEvent",t.coverChangedEvent)("autoCrop",!1)("viewMode",3)}}function lt(t,n){if(1&t){const t=l.Yb();l.Xb(0,"button",23),l.jc("click",(function(){return l.Ic(t),l.nc().removeCover()})),l.Xb(1,"mat-icon"),l.Rc(2,"clear"),l.Wb(),l.Wb()}}function ht(t,n){1&t&&(l.Xb(0,"mat-icon",24),l.Rc(1,"add"),l.Wb())}function bt(t,n){if(1&t){const t=l.Yb();l.Xb(0,"mat-icon",25),l.jc("click",(function(){return l.Ic(t),l.nc().removeAvatar()})),l.Rc(1,"clear "),l.Wb()}}function gt(t,n){if(1&t){const t=l.Yb();l.Xb(0,"div",19),l.Xb(1,"input",26),l.jc("change",(function(n){return l.Ic(t),l.nc().profileChangeEvent(n)})),l.Wb(),l.Sb(2,"input",27),l.Xb(3,"ngx-photo-editor",28),l.jc("imageCropped",(function(n){return l.Ic(t),l.nc().profileCropped(n)})),l.Wb(),l.Wb()}if(2&t){const t=l.nc();l.uc("hidden",!0),l.Cb(3),l.uc("imageChanedEvent",t.profileChangedEvent)("aspectRatio",4/3)("viewMode",1)("resizeToWidth",500)}}function dt(t,n){if(1&t&&(l.Xb(0,"p",29),l.Rc(1),l.Wb()),2&t){const t=l.nc();l.Cb(1),l.Sc(t.channelUser.channel.name)}}function ut(t,n){if(1&t){const t=l.Yb();l.Xb(0,"mat-form-field"),l.Xb(1,"input",30),l.jc("keyup.enter",(function(n){return l.Ic(t),n.preventDefault()})),l.Wb(),l.Wb()}}function pt(t,n){1&t&&(l.Xb(0,"div",31),l.Sb(1,"mat-spinner",32),l.Wb()),2&t&&(l.Cb(1),l.uc("diameter",50))}function ft(t,n){if(1&t){const t=l.Yb();l.Xb(0,"a",41),l.jc("click",(function(){return l.Ic(t),l.nc(2).connectWithUser()})),l.Xb(1,"mat-icon"),l.Rc(2,"person_add"),l.Wb(),l.Xb(3,"span"),l.Rc(4,"Connect"),l.Wb(),l.Wb()}}function mt(t,n){1&t&&(l.Xb(0,"a",42),l.Xb(1,"mat-icon"),l.Rc(2,"check"),l.Wb(),l.Xb(3,"span"),l.Rc(4,"Waiting for confirmation"),l.Wb(),l.Wb())}function Ct(t,n){if(1&t&&(l.Xb(0,"button",43),l.Xb(1,"mat-icon"),l.Rc(2,"check"),l.Wb(),l.Xb(3,"span"),l.Rc(4,"Connected"),l.Wb(),l.Wb()),2&t){l.nc();const t=l.Ec(5);l.uc("matMenuTriggerFor",t)}}function Pt(t,n){if(1&t){const t=l.Yb();l.Xb(0,"a",44),l.jc("click",(function(){return l.Ic(t),l.nc(2).toggleBottomChatBox()})),l.Xb(1,"mat-icon"),l.Rc(2,"chat"),l.Wb(),l.Xb(3,"span"),l.Rc(4,"Message"),l.Wb(),l.Wb()}}function vt(t,n){if(1&t){const t=l.Yb();l.Xb(0,"a",45),l.jc("click",(function(){l.Ic(t);const n=l.nc(2);return n.subscribeToChannel(n.channelUser.channel)})),l.Xb(1,"mat-icon"),l.Rc(2,"favorite_border"),l.Wb(),l.Xb(3,"span"),l.Rc(4,"Subscribe"),l.Wb(),l.Wb()}}function _t(t,n){if(1&t){const t=l.Yb();l.Xb(0,"a",46),l.jc("click",(function(){l.Ic(t);const n=l.nc(2);return n.subscribeToChannel(n.channelUser.channel)})),l.Xb(1,"mat-icon"),l.Rc(2,"favorite"),l.Wb(),l.Xb(3,"span"),l.Rc(4,"Subscribed"),l.Wb(),l.Wb()}}function Mt(t,n){if(1&t){const t=l.Yb();l.Xb(0,"div",8),l.Pc(1,ft,5,0,"a",33),l.Pc(2,mt,5,0,"a",34),l.Pc(3,Ct,5,1,"button",35),l.Xb(4,"mat-menu",null,36),l.Xb(6,"button",37),l.jc("click",(function(){return l.Ic(t),l.nc().disconnectUser()})),l.Xb(7,"mat-icon"),l.Rc(8,"close"),l.Wb(),l.Xb(9,"span"),l.Rc(10,"Disconnect"),l.Wb(),l.Wb(),l.Wb(),l.Pc(11,Pt,5,0,"a",38),l.Pc(12,vt,5,0,"a",39),l.Pc(13,_t,5,0,"a",40),l.Wb()}if(2&t){const t=l.nc();l.Cb(1),l.uc("ngIf","idle"===t.usersConnectionStatus),l.Cb(1),l.uc("ngIf","pending"===t.usersConnectionStatus),l.Cb(1),l.uc("ngIf","connected"===t.usersConnectionStatus),l.Cb(8),l.uc("ngIf","connected"===t.usersConnectionStatus),l.Cb(1),l.uc("ngIf",!t.subscribedToChannel),l.Cb(1),l.uc("ngIf",t.subscribedToChannel)}}function Ot(t,n){if(1&t){const t=l.Yb();l.Xb(0,"button",50),l.jc("click",(function(){return l.Ic(t),l.nc(2).toggleEditMode()})),l.Xb(1,"mat-icon"),l.Rc(2,"edit"),l.Wb(),l.Rc(3," Edit channel "),l.Wb()}}function yt(t,n){if(1&t){const t=l.Yb();l.Xb(0,"button",51),l.jc("click",(function(){return l.Ic(t),l.nc(2).toggleEditMode()})),l.Xb(1,"mat-icon"),l.Rc(2,"cancel"),l.Wb(),l.Rc(3," Cancel "),l.Wb()}}function kt(t,n){if(1&t){const t=l.Yb();l.Xb(0,"button",52),l.jc("click",(function(){return l.Ic(t),l.nc(2).saveChanges()})),l.Xb(1,"mat-icon"),l.Rc(2,"save"),l.Wb(),l.Rc(3," Save changes "),l.Wb()}}function xt(t,n){if(1&t&&(l.Xb(0,"div",8),l.Pc(1,Ot,4,0,"button",47),l.Pc(2,yt,4,0,"button",48),l.Pc(3,kt,4,0,"button",49),l.Wb()),2&t){const t=l.nc();l.Cb(1),l.uc("ngIf",!t.editMode),l.Cb(1),l.uc("ngIf",t.editMode),l.Cb(1),l.uc("ngIf",t.editMode)}}const Ut=function(t){return{opacity:t}};let St=(()=>{class t{constructor(t,n,e,s,i,c,a,r){this.usersService=t,this.base64ToFile=n,this.getAuthUser=e,this.channelService=s,this.subject=i,this.socketService=c,this.loader=a,this.fb=r,this.apiUrl=o.c,this.subscribedToChannel=!1,this.subscribersCount=0,this.changingImage=!1,this.editMode=!1,this.subscriptions=[],this.attemptedToConnect=!1,this.usersConnectionStatus="idle",this.toggleChatBox=new l.o}ngOnInit(){this.channelUser&&(this.checkChannelSubscription(),this.initChannelForm(),this.checkIfUsersConnected(),this.getAcceptedDeclinedRequests(),this.getDisconnectUser())}initChannelForm(){this.channelForm=this.fb.group({id:[""],avatar:[""],cover:[""],name:["",a.x.required],username:[""]}),this.channelForm.patchValue({name:this.channelUser.channel.name,id:this.channelUser.channel.id,username:this.channelUser.username,avatar:this.channelUser.channel.avatar,cover:this.channelUser.channel.cover})}checkIfUsersConnected(){this.usersService.checkIfUsersConnected({user_id:this.authUser.id,channel_user_id:this.channelUser.id}).subscribe(t=>{this.usersConnection=t,t&&(this.usersConnectionStatus=t.confirmed?"connected":"pending")})}coverChangeEvent(t){this.coverChangedEvent=t}profileChangeEvent(t){this.profileChangedEvent=t}detectImageChange(){(this.profileChangedEvent||this.coverChangedEvent)&&(this.loader.dataLoading=!1,this.changingImage=!1,console.log("Avatar changed"),console.log(this.changingImage))}profileCropped(t){this.changingImage=!0,this.profileBase64=t.base64;const n=`avatar_${Date.now()}.jpg`,e=new FormData;this.channelForm.patchValue({avatar:n}),e.append("avatar_file",this.base64ToFile.transform(t.base64),n),e.append("avatar",n),e.append("id",this.authUser.id),this.subscriptions.push(this.usersService.changeProfileImage(e).subscribe(t=>{this.changeAuthUserInfo(t)}))}coverCropped(t){this.coverBase64=t.base64,this.changingImage=!0;const n=new FormData,e=`cover_${Date.now()}.jpg`;this.channelForm.patchValue({cover:e}),n.append("cover_file",this.base64ToFile.transform(t.base64),e),n.append("cover",e),n.append("id",this.authUser.id),this.loader.dataLoading=!0,this.subscriptions.push(this.usersService.changeCoverImage(n).subscribe(t=>{this.changeAuthUserInfo(t)}))}removeCover(){this.channelUser.channel.cover="",this.channelForm.patchValue({cover:this.channelUser.channel.cover})}removeAvatar(){this.channelUser.channel.avatar="",this.channelForm.patchValue({avatar:this.channelUser.channel.avatar})}subscribeToChannel(t){this.subscriptions.push(this.channelService.subscribeToChannel({user_id:this.authUser.id,channel_id:t.id}).subscribe(t=>{this.subscribedToChannel="Subscribed"===t.status,this.subscribersCount=t.subscribers_count,this.subscriptions.push(this.channelService.getUserChannelSubscriptions({user_id:this.authUser.id}).subscribe(t=>{this.subject.setUserSubscriptions(t)}))}))}checkChannelSubscription(){this.subscriptions.push(this.channelService.checkChannelSubscription({user_id:this.authUser.id,channel_id:this.channelUser.channel.id}).subscribe(t=>{this.subscribedToChannel="Subscribed"===t.status,this.subscribersCount=t.subscribers_count}))}changeAuthUserInfo(t){localStorage.setItem("token",t.token),this.authUser=this.getAuthUser.transform(),this.channelUser=this.authUser,this.changingImage=!1,this.subject.changeAuthUser(t.hasOwnProperty("token")?t.token:"")}toggleEditMode(){this.editMode=!this.editMode}saveChanges(){console.log("save changes!!!"),console.log(this.channelForm.value),console.log("save changes!!!"),this.channelForm.valid&&this.subscriptions.push(this.channelService.changeChannelDetails(this.channelForm.value).subscribe(t=>{this.editMode=!1,this.changeAuthUserInfo(t)}))}toggleBottomChatBox(){this.toggleChatBox.emit(this.channelUser)}connectWithUser(){this.attemptedToConnect=!0,this.usersConnectionStatus="pending",this.socketService.connectWithUser({authUser:this.authUser,channelUser:this.channelUser})}getAcceptedDeclinedRequests(){this.subscriptions.push(this.socketService.acceptedConnection().subscribe(t=>{console.log("accepted",t),this.usersConnectionStatus="connected"})),this.subscriptions.push(this.socketService.declinedConnection().subscribe(t=>{console.log("declined"),this.usersConnectionStatus="idle"}))}disconnectUser(){this.socketService.disconnectUsers({id:this.usersConnection.id,to_username:this.channelUser.username}),this.usersConnectionStatus="idle"}getDisconnectUser(){this.subscriptions.push(this.socketService.getDisconnectUsers({}).subscribe(t=>{console.log("disconnected",t),this.usersConnectionStatus="idle"}))}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(n){return new(n||t)(l.Rb(H.a),l.Rb(G.a),l.Rb(u.a),l.Rb($.a),l.Rb(b.a),l.Rb(et.a),l.Rb(J.a),l.Rb(a.e))},t.\u0275cmp=l.Lb({type:t,selectors:[["app-channel-profile"]],inputs:{channelUser:"channelUser",authUser:"authUser"},outputs:{toggleChatBox:"toggleChatBox"},decls:25,vars:23,consts:[[3,"formGroup"],[1,"profile-block"],[3,"hidden",4,"ngIf"],[1,"cover-image-container"],["for","cover-image-input"],["id","cover-image",3,"src","load"],["mat-icon-button","","type","button","class","remove-cover-btn",3,"click",4,"ngIf"],[1,"sub-block"],[1,"d-flex","align-items-center"],[1,"avatar-container"],["for","profile-image-input"],["id","profile-image",1,"avatar",3,"ngStyle","src","load"],["id","add-photo-btn",4,"ngIf"],["class","remove-avatar-btn",3,"click",4,"ngIf"],["class","channel-name","id","channel-name",4,"ngIf"],[4,"ngIf"],[1,"subscribers-count"],["class","loader",4,"ngIf"],["class","d-flex align-items-center",4,"ngIf"],[3,"hidden"],["type","file","id","cover-image-input",3,"change"],["type","hidden","formControlName","cover"],[3,"imageChanedEvent","autoCrop","viewMode","imageCropped"],["mat-icon-button","","type","button",1,"remove-cover-btn",3,"click"],["id","add-photo-btn"],[1,"remove-avatar-btn",3,"click"],["type","file","id","profile-image-input",3,"change"],["type","hidden","formControlName","avatar"],[3,"imageChanedEvent","aspectRatio","viewMode","resizeToWidth","imageCropped"],["id","channel-name",1,"channel-name"],["matInput","","formControlName","name","id","channel-name-input",3,"keyup.enter"],[1,"loader"],[3,"diameter"],["class","add-friend-btn",3,"click",4,"ngIf"],["class","waiting-for-confirmation-btn",4,"ngIf"],["class","users-connected-btn",3,"matMenuTriggerFor",4,"ngIf"],["menu","matMenu"],["mat-menu-item","",3,"click"],["class","toggle-chat-box-btn",3,"click",4,"ngIf"],["class","subscribe-btn",3,"click",4,"ngIf"],["class","subscribe-btn subscribed",3,"click",4,"ngIf"],[1,"add-friend-btn",3,"click"],[1,"waiting-for-confirmation-btn"],[1,"users-connected-btn",3,"matMenuTriggerFor"],[1,"toggle-chat-box-btn",3,"click"],[1,"subscribe-btn",3,"click"],[1,"subscribe-btn","subscribed",3,"click"],["class","btn","type","button","id","edit-channel",3,"click",4,"ngIf"],["class","btn","type","button","id","cancel-changes",3,"click",4,"ngIf"],["class","btn","type","button","id","save-channel-details",3,"click",4,"ngIf"],["type","button","id","edit-channel",1,"btn",3,"click"],["type","button","id","cancel-changes",1,"btn",3,"click"],["type","button","id","save-channel-details",1,"btn",3,"click"]],template:function(t,n){1&t&&(l.Xb(0,"form",0),l.Xb(1,"div",1),l.Pc(2,rt,4,4,"div",2),l.Xb(3,"div",3),l.Xb(4,"label",4),l.Xb(5,"img",5),l.jc("load",(function(){return n.detectImageChange()})),l.oc(6,"getImgPath"),l.Wb(),l.Wb(),l.Pc(7,lt,3,0,"button",6),l.Wb(),l.Wb(),l.Xb(8,"div",7),l.Xb(9,"div",8),l.Xb(10,"div",9),l.Xb(11,"label",10),l.Xb(12,"img",11),l.jc("load",(function(){return n.detectImageChange()})),l.oc(13,"getImgPath"),l.Wb(),l.Pc(14,ht,2,0,"mat-icon",12),l.Wb(),l.Pc(15,bt,2,0,"mat-icon",13),l.Wb(),l.Pc(16,gt,4,5,"div",2),l.Xb(17,"div"),l.Pc(18,dt,2,1,"p",14),l.Pc(19,ut,2,0,"mat-form-field",15),l.Xb(20,"p",16),l.Rc(21),l.Wb(),l.Wb(),l.Wb(),l.Pc(22,pt,2,1,"div",17),l.Pc(23,Mt,14,6,"div",18),l.Pc(24,xt,4,3,"div",18),l.Wb(),l.Wb()),2&t&&(l.uc("formGroup",n.channelForm),l.Cb(2),l.uc("ngIf",n.channelUser.username===n.authUser.username),l.Cb(3),l.uc("src",l.qc(6,15,null==n.channelUser.channel?null:n.channelUser.channel.cover,"covers"),l.Kc),l.Cb(2),l.uc("ngIf",n.editMode&&n.channelUser.channel.cover),l.Cb(5),l.uc("ngStyle",l.yc(21,Ut,n.editMode?.5:1))("src",l.qc(13,18,n.channelUser.channel.avatar,"avatars"),l.Kc),l.Cb(2),l.uc("ngIf",n.editMode&&!n.channelUser.channel.avatar),l.Cb(1),l.uc("ngIf",n.editMode&&n.channelUser.channel.avatar),l.Cb(1),l.uc("ngIf",n.channelUser.username===n.authUser.username),l.Cb(2),l.uc("ngIf",!n.editMode),l.Cb(1),l.uc("ngIf",n.editMode),l.Cb(2),l.Tc("",n.subscribersCount+" subscriber"+(1===n.subscribersCount?"":"s")," "),l.Cb(1),l.uc("ngIf",n.changingImage),l.Cb(1),l.uc("ngIf",n.channelUser.username!==n.authUser.username),l.Cb(1),l.uc("ngIf",n.channelUser.username===n.authUser.username))},directives:[a.z,a.q,a.i,s.n,s.o,a.c,a.p,a.h,st.a,it.a,F.a,ct.c,ot.b,p.b,at.d,at.a,at.c],pipes:[T.a],styles:[".sub-bell[_ngcontent-%COMP%]{color:#f53c6f;margin-right:16px}.subscribe-btn[_ngcontent-%COMP%], .users-connected-btn[_ngcontent-%COMP%]{margin-left:16px;margin-right:16px}.subscribe-btn[_ngcontent-%COMP%], .toggle-chat-box-btn[_ngcontent-%COMP%], .users-connected-btn[_ngcontent-%COMP%]{width:119px;height:36px;padding:15px 32px;color:#fff!important;font-size:16px;font-family:Muli-Light;display:flex;justify-content:center;align-items:center;transition:.3s ease-in-out;background:#18b587}.add-friend-btn[_ngcontent-%COMP%]{width:119px;background:#18b587;background-color:#f53c6f}.add-friend-btn[_ngcontent-%COMP%], .waiting-for-confirmation-btn[_ngcontent-%COMP%]{height:36px;color:#fff!important;font-size:16px;font-family:Muli-Light;display:flex;justify-content:center;align-items:center;transition:.3s ease-in-out;padding:0;margin-right:16px}.waiting-for-confirmation-btn[_ngcontent-%COMP%]{width:119px;background:#18b587;width:210px;background-color:#b3b3b3}.loader[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:52px;margin-left:10px;margin-top:-17px}#add-photo-btn[_ngcontent-%COMP%]{position:absolute;left:9px;top:10px;cursor:pointer}.cover-image-container[_ngcontent-%COMP%]{position:relative}.cover-image-container[_ngcontent-%COMP%]   .remove-cover-btn[_ngcontent-%COMP%]{position:absolute;right:0}.cover-image-container[_ngcontent-%COMP%]   .remove-cover-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{background-color:#000;color:#fff;border-radius:20px;font-size:16px}label[for=cover-image-input][_ngcontent-%COMP%]{width:100%}#edit-channel[_ngcontent-%COMP%], #save-channel-details[_ngcontent-%COMP%]{background:#18b587}#cancel-changes[_ngcontent-%COMP%], #edit-channel[_ngcontent-%COMP%], #save-channel-details[_ngcontent-%COMP%]{border-radius:0;color:#fff;padding:8px 24px;display:flex;align-items:center}#cancel-changes[_ngcontent-%COMP%]{background:#c9c9c9;margin-right:20px}.avatar-container[_ngcontent-%COMP%]{position:relative}.avatar-container[_ngcontent-%COMP%]   .remove-avatar-btn[_ngcontent-%COMP%]{position:absolute;right:20px;top:13px;color:#000;font-size:16px;cursor:pointer}.subscribed[_ngcontent-%COMP%]{background-color:#b3b3b3!important}"]}),t})();var wt=e("IK1q"),Wt=e("IG0y"),It=e("MFHO");function Xt(t,n){1&t&&(l.Xb(0,"h2"),l.Rc(1,"Description"),l.Wb())}function Rt(t,n){if(1&t){const t=l.Yb();l.Xb(0,"button",10),l.jc("click",(function(){return l.Ic(t),l.nc().editModeOn()})),l.Rc(1,"Edit "),l.Wb()}}function Ft(t,n){1&t&&(l.Xb(0,"mat-error"),l.Rc(1," Not more than 100 characters please "),l.Wb())}let Tt=(()=>{class t{constructor(t,n,e,s){this.fb=t,this.channelService=n,this.getAuthUser=e,this.fixLineBreaks=s,this.editMode=!1,this.authUser=this.getAuthUser.transform()}ngOnInit(){this.aboutForm=this.fb.group({description:["",[a.x.required,a.x.maxLength(o.f)]],id:["",a.x.required],username:["",a.x.required]}),this.aboutForm.patchValue({username:this.channelUser.username,id:this.channelUser.channel.id,description:this.fixLineBreaks.transform(this.channelUser.channel.description)})}editModeOn(){this.editMode=!0}saveChannelDescription(){this.aboutForm.valid&&this.channelService.saveDescription(this.aboutForm.value).subscribe(t=>{this.channelUser=t,document.querySelector(".description").innerHTML=this.channelUser.channel.description,this.editMode=!1})}ngAfterViewInit(){document.querySelector(".description").innerHTML=this.channelUser.channel.description}}return t.\u0275fac=function(n){return new(n||t)(l.Rb(a.e),l.Rb($.a),l.Rb(u.a),l.Rb(It.a))},t.\u0275cmp=l.Lb({type:t,selectors:[["app-about-tab"]],inputs:{channelUser:"channelUser"},decls:17,vars:11,consts:[[1,"about-tab"],[1,"info"],[4,"ngIf"],[1,"date"],["class","btn",3,"click",4,"ngIf"],[1,"description",3,"hidden"],[1,"edit-form-controls",3,"hidden"],["id","channel-about-form",3,"formGroup"],["rows","15","formControlName","description"],[1,"save",3,"click"],[1,"btn",3,"click"]],template:function(t,n){1&t&&(l.Xb(0,"div",0),l.Xb(1,"div",1),l.Pc(2,Xt,2,0,"h2",2),l.Xb(3,"div",3),l.Xb(4,"span"),l.Rc(5),l.oc(6,"date"),l.Wb(),l.Pc(7,Rt,2,0,"button",4),l.Wb(),l.Wb(),l.Xb(8,"div",5),l.Xb(9,"p"),l.Rc(10),l.Wb(),l.Wb(),l.Xb(11,"div",6),l.Xb(12,"form",7),l.Sb(13,"textarea",8),l.Xb(14,"button",9),l.jc("click",(function(){return n.saveChannelDescription()})),l.Rc(15,"Save"),l.Wb(),l.Pc(16,Ft,2,0,"mat-error",2),l.Wb(),l.Wb(),l.Wb()),2&t&&(l.Cb(2),l.uc("ngIf",null==n.channelUser.channel?null:n.channelUser.channel.description),l.Cb(3),l.Tc("Joined ",l.qc(6,8,n.channelUser.channel.created_at,"d MMM, yyyy"),""),l.Cb(2),l.uc("ngIf",!n.editMode&&n.authUser.username===n.channelUser.username),l.Cb(1),l.uc("hidden",n.editMode),l.Cb(2),l.Sc(n.channelUser.channel.description),l.Cb(1),l.uc("hidden",!n.editMode),l.Cb(1),l.uc("formGroup",n.aboutForm),l.Cb(4),l.uc("ngIf",n.aboutForm.get("description").hasError("maxlength")))},directives:[s.n,a.z,a.q,a.i,a.c,a.p,a.h,ct.b],pipes:[s.f],styles:[".about-tab[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.about-tab[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:16px;color:#18b587;font-family:Muli-Bold}.about-tab[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{margin-top:0;display:flex;align-items:center}.about-tab[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px;color:#545454;font-family:Muli-Bold}@media screen and (max-width:400px){.about-tab[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:center}}.about-tab[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-left:24px;background:#18b587;color:#fff;padding:4px 18px;border-radius:0}.about-tab[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{margin-top:24px;padding:24px;background:#f4f4f4;color:#545454;font-size:16px}.about-tab[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%}.about-tab[_ngcontent-%COMP%]   .save[_ngcontent-%COMP%]{margin-top:24px;background:#c9c9c9;color:#545454;padding:4px 18px;border-radius:0}.about-tab[_ngcontent-%COMP%]   .save.active[_ngcontent-%COMP%]{background:#18b587;color:#fff}"]}),t})();var jt=e("wd/R");const Lt=["directMessagesList"];function Bt(t,n){1&t&&(l.Xb(0,"div",16),l.Sb(1,"mat-spinner",17),l.Wb()),2&t&&(l.Cb(1),l.uc("diameter",30))}function Et(t,n){if(1&t&&(l.Xb(0,"div",25),l.Sb(1,"img",26),l.oc(2,"getImgPath"),l.Wb()),2&t){const t=l.nc().$implicit,n=l.nc();l.Cb(1),l.uc("src",l.qc(2,1,n.getSeenAvatar(t),"user_avatars"),l.Kc)}}function At(t,n){if(1&t&&(l.Xb(0,"div",18),l.Xb(1,"div",19),l.Vb(2),l.Xb(3,"div",20),l.Sb(4,"img",21),l.oc(5,"getImgPath"),l.Xb(6,"p",22),l.Rc(7),l.Wb(),l.Xb(8,"div",23),l.Rc(9),l.oc(10,"date"),l.Wb(),l.Wb(),l.Ub(),l.Wb(),l.Pc(11,Et,3,4,"div",24),l.Wb()),2&t){const t=n.$implicit,e=l.nc();l.Cb(1),l.uc("ngClass",e.getMessageClass(null==t?null:t.from_user)),l.Cb(3),l.Hb("selectable",t.from!==e.authUser.username),l.uc("src",l.qc(5,7,t.avatar,"user_avatars"),l.Kc),l.Cb(3),l.Sc(t.message),l.Cb(2),l.Sc(l.qc(10,10,t.created_at,"HH:mm")),l.Cb(2),l.uc("ngIf",t.seen)}}function qt(t,n){if(1&t&&(l.Xb(0,"div",27),l.Xb(1,"small",28),l.Rc(2),l.Wb(),l.Wb()),2&t){const t=l.nc();l.Cb(2),l.Sc(t.typingText)}}let Vt=(()=>{class t{constructor(t,n,e,s,i){this.fb=t,this.getAuthUser=n,this.chatService=e,this.socketService=s,this.usersService=i,this.loadingMessages=!1,this.messages=[],this.close=new l.o}ngOnInit(){this.authUser=this.getAuthUser.transform(),this.initForm(),this.addUserToSocket(),this.loadPreviousMessages(),this.checkIfUsersConnected(),this.getTyping(),this.getMessagesFromSocket()}initForm(){this.chatForm=this.fb.group({from:[this.authUser.username],from_id:[this.authUser.id],to_id:[this.channelUser.id],avatar:[this.authUser.avatar],message:["",a.x.required],from_user:[this.authUser],to_user:[this.channelUser],connection_id:[""],bottom_chat:1})}checkIfUsersConnected(){this.usersService.checkIfUsersConnected({user_id:this.authUser.id,channel_user_id:this.channelUser.id}).subscribe(t=>{t&&(this.chatForm.patchValue({connection_id:t.id}),console.log(this.chatForm.value))})}addUserToSocket(){this.socketService.addNewUser(this.authUser)}loadPreviousMessages(){this.loadingMessages=!0,this.chatService.getMessagesBetweenTwoUsers({to_id:this.channelUser.id,from_id:this.authUser.id}).subscribe(t=>{this.messages=t,this.loadingMessages=!1})}sendMessage(){if(this.chatForm.valid){const t=this.chatForm.value;this.chatService.saveDirectMessage(t).subscribe(n=>{this.messages=n,this.socketService.sendMessage(t),this.chatForm.patchValue({message:""}),this.setTyping()})}}getMessagesFromSocket(){this.socketService.onNewMessage().subscribe(t=>{this.typingText=null,this.loadPreviousMessages()})}setTyping(){this.socketService.setTyping({from_user:this.chatForm.value.from_user,to_user:this.chatForm.value.to_user,message:this.chatForm.value.message})}getTyping(){this.socketService.getTyping().subscribe(t=>{this.typingText=t.message?t.from_user.username+" is typing...":null})}closeChatBox(){this.close.emit()}getMessageClass(t){return t.id===this.authUser.id?"my-message":"other-message"}setSeen(){var t;const n=this.messages;n.length>0&&((null===(t=n[n.length-1])||void 0===t?void 0:t.from_id)===this.authUser.id||(this.scrollMsgsToBottom(),this.socketService.setSeen({from_id:this.chatForm.value.from_id,to_id:this.chatForm.value.to_id,from_user:this.chatForm.value.from_user,to_user:this.chatForm.value.to_user,seen:1,seen_at:jt().format("YYYY-MM-DD, h:mm:ss a")})))}getSeen(){this.socketService.getSeen().subscribe(t=>{this.loadPreviousMessages()})}getSeenAvatar(t){return t.from_user.id!==this.authUser.id?t.from_user.avatar:t.to_user.id!==this.authUser.id?t.to_user.avatar:void 0}scrollMsgsToBottom(){try{this.messagesList.nativeElement.scrollTop=this.messagesList.nativeElement.scrollHeight}catch(t){console.log(t)}}ngAfterViewChecked(){this.scrollMsgsToBottom()}ngOnDestroy(){this.setTyping()}}return t.\u0275fac=function(n){return new(n||t)(l.Rb(a.e),l.Rb(u.a),l.Rb(tt.a),l.Rb(et.a),l.Rb(H.a))},t.\u0275cmp=l.Lb({type:t,selectors:[["app-chat-bottom-box"]],viewQuery:function(t,n){var e;1&t&&l.Wc(Lt,!0),2&t&&l.Dc(e=l.kc())&&(n.messagesList=e.first)},inputs:{channelUser:"channelUser"},outputs:{close:"close"},decls:22,vars:9,consts:[[3,"formGroup"],[1,"bottom_chat"],[1,"w-100","h-100","position-relative"],[1,"d-flex","justify-content-between","border-bottom","py-3"],["id","profile-image",1,"avatar",3,"src"],["src","assets/img/x.svg","alt","close-chat-box",1,"close-box",3,"click"],[1,"chat-information"],["directMessagesList",""],["class","loader",4,"ngIf"],["class","chat-block d-flex flex-column",4,"ngFor","ngForOf"],["class","typing-text-container",4,"ngIf"],[1,"textarea","d-flex","align-items-end"],[1,"add-btn"],["formControlName","message","placeholder","Message",1,"flex-1","mx-3",3,"keyup","focus","keyup.enter"],[1,"send-btn",3,"click"],["alt","send button","src","assets/img/send.svg"],[1,"loader"],[3,"diameter"],[1,"chat-block","d-flex","flex-column"],[1,"w-100",3,"ngClass"],[1,"d-flex","w-100","align-items-center","position-relative"],[1,"avatar",3,"src"],[1,"chat-block-2","w-100"],[1,"abs"],["class","seen",4,"ngIf"],[1,"seen"],[1,"seen-avatar",3,"src"],[1,"typing-text-container"],[1,"text-center","font-italic","d-block"]],template:function(t,n){1&t&&(l.Xb(0,"form",0),l.Xb(1,"div",1),l.Xb(2,"div",2),l.Xb(3,"div",3),l.Xb(4,"div"),l.Sb(5,"img",4),l.oc(6,"getImgPath"),l.Xb(7,"span"),l.Rc(8),l.Wb(),l.Wb(),l.Xb(9,"div"),l.Xb(10,"img",5),l.jc("click",(function(){return n.closeChatBox()})),l.Wb(),l.Wb(),l.Wb(),l.Xb(11,"div",6,7),l.Pc(13,Bt,2,1,"div",8),l.Pc(14,At,12,13,"div",9),l.Wb(),l.Pc(15,qt,3,1,"div",10),l.Xb(16,"div",11),l.Xb(17,"button",12),l.Rc(18,"+"),l.Wb(),l.Xb(19,"input",13),l.jc("keyup",(function(){return n.setTyping()}))("focus",(function(){return n.setSeen()}))("keyup.enter",(function(){return n.sendMessage()})),l.Wb(),l.Xb(20,"button",14),l.jc("click",(function(){return n.sendMessage()})),l.Sb(21,"img",15),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb()),2&t&&(l.uc("formGroup",n.chatForm),l.Cb(5),l.uc("src",l.qc(6,6,n.channelUser.channel.avatar,"avatars"),l.Kc),l.Cb(3),l.Sc(n.channelUser.first_name+" "+n.channelUser.last_name),l.Cb(5),l.uc("ngIf",n.loadingMessages),l.Cb(1),l.uc("ngForOf",n.messages),l.Cb(1),l.uc("ngIf",n.typingText))},directives:[a.z,a.q,a.i,s.n,s.m,a.c,a.p,a.h,p.b,s.l],pipes:[T.a,s.f],styles:[".bottom_chat[_ngcontent-%COMP%]{position:fixed;bottom:16px;right:16px;padding:0 20px 30px;box-shadow:0 0 3px #c9c9c9;width:350px;height:400px;background-color:#fff;z-index:9999}.bottom_chat[_ngcontent-%COMP%]   .chat-information[_ngcontent-%COMP%]{width:100%;max-height:400px;overflow-y:scroll;height:calc(100% - 115px);padding:14px 12px 30px}.bottom_chat[_ngcontent-%COMP%]   .chat-information[_ngcontent-%COMP%]::-webkit-scrollbar{width:12px}.bottom_chat[_ngcontent-%COMP%]   .chat-information[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.bottom_chat[_ngcontent-%COMP%]   .chat-information[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#dcdcdc;border-radius:4px}.bottom_chat[_ngcontent-%COMP%]   .chat-information[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#aeaeae}.bottom_chat[_ngcontent-%COMP%]   .chat-information[_ngcontent-%COMP%]   .chat-block[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between;align-items:center;margin-bottom:18px}.bottom_chat[_ngcontent-%COMP%]   .chat-information[_ngcontent-%COMP%]   .chat-block[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:24px!important;height:24px!important}.bottom_chat[_ngcontent-%COMP%]   .chat-information[_ngcontent-%COMP%]   .chat-block[_ngcontent-%COMP%]   .chat-block-1[_ngcontent-%COMP%]{margin:0;color:#9b9b9b;font-size:14px;font-family:Muli-Light,sans-serif;width:86px!important}.bottom_chat[_ngcontent-%COMP%]   .chat-information[_ngcontent-%COMP%]   .chat-block[_ngcontent-%COMP%]   .chat-block-2[_ngcontent-%COMP%]{margin-bottom:0;margin-left:16px;flex:1;color:#545454;font-size:14px;font-family:Muli-Light,sans-serif}.bottom_chat[_ngcontent-%COMP%]   .chat-information[_ngcontent-%COMP%]   .chat-block[_ngcontent-%COMP%]   .chat-block-1[_ngcontent-%COMP%], .bottom_chat[_ngcontent-%COMP%]   .chat-information[_ngcontent-%COMP%]   .chat-block[_ngcontent-%COMP%]   .chat-block-2[_ngcontent-%COMP%]{max-width:85%;overflow:hidden;text-overflow:ellipsis}.bottom_chat[_ngcontent-%COMP%]   .chat-information[_ngcontent-%COMP%]   .seen[_ngcontent-%COMP%]{width:100%;text-align:right}.bottom_chat[_ngcontent-%COMP%]   .chat-information[_ngcontent-%COMP%]   .seen[_ngcontent-%COMP%]   .seen-avatar[_ngcontent-%COMP%]{width:20px;height:20px;border-radius:20px}.bottom_chat[_ngcontent-%COMP%]   .typing-text-container[_ngcontent-%COMP%]{margin-top:-12px}.bottom_chat[_ngcontent-%COMP%]   .textarea[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0;width:100%}.bottom_chat[_ngcontent-%COMP%]   .textarea[_ngcontent-%COMP%]   .add-btn[_ngcontent-%COMP%]{width:20px;height:20px;display:flex;align-items:center;justify-content:center;border-radius:50%}.bottom_chat[_ngcontent-%COMP%]   .textarea[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:0;border-bottom:1px solid #ddd;padding:5px 10px}.bottom_chat[_ngcontent-%COMP%]   .textarea[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border:0;border-bottom:1px solid #ddd}.bottom_chat[_ngcontent-%COMP%]   .textarea[_ngcontent-%COMP%]   .send-btn[_ngcontent-%COMP%]{background-color:transparent;border:0;outline:0}.flex-1[_ngcontent-%COMP%]{flex:1}.close-box[_ngcontent-%COMP%]{cursor:pointer}.my-message[_ngcontent-%COMP%]{margin-bottom:16px}.my-message[_ngcontent-%COMP%]   .chat-block-2[_ngcontent-%COMP%]{background:#18b587;color:#fff!important;padding:5px}.my-message[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{justify-content:flex-end}.my-message[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:none}.other-message[_ngcontent-%COMP%]{margin-bottom:16px}.other-message[_ngcontent-%COMP%]   .chat-block-2[_ngcontent-%COMP%]{background:#f5f5f5;color:#545454;padding:5px}.other-message[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:0!important}.abs[_ngcontent-%COMP%]{position:absolute;font-size:11px;top:-14px;right:0}"]}),t})();function Yt(t,n){1&t&&l.Sb(0,"mat-spinner",5),2&t&&l.uc("diameter",15)}function Dt(t,n){if(1&t){const t=l.Yb();l.Xb(0,"app-user-tags",21),l.jc("tagSelected",(function(n){return l.Ic(t),l.nc(2).getVideosByTag(n)})),l.Wb()}}function zt(t,n){if(1&t){const t=l.Yb();l.Xb(0,"app-channel-profile",22),l.jc("toggleChatBox",(function(){return l.Ic(t),l.nc(2).toggleChatBox()})),l.Wb()}if(2&t){const t=l.nc(2);l.uc("channelUser",t.channelUser)("authUser",t.authUser)}}function Nt(t,n){if(1&t){const t=l.Yb();l.Xb(0,"li",23),l.Xb(1,"a",24),l.jc("click",(function(){l.Ic(t);const e=n.$implicit;return l.nc(2).changeActiveTab(e)})),l.Rc(2),l.Wb(),l.Wb()}if(2&t){const t=n.$implicit,e=l.nc(2);l.Cb(1),l.Hb("active",t===e.activeTab),l.wc("id","",t.link,"-tab"),l.uc("href","#"+t.link,l.Kc),l.Cb(1),l.Sc(t.name)}}function Ht(t,n){1&t&&l.Sb(0,"mat-spinner",5),2&t&&l.uc("diameter",15)}function Gt(t,n){if(1&t){const t=l.Yb();l.Xb(0,"button",25),l.jc("click",(function(){return l.Ic(t),l.nc(2).toggleFilters()})),l.Xb(1,"mat-icon"),l.Rc(2,"tune"),l.Wb(),l.Wb()}if(2&t){const t=l.nc(2);l.Hb("filters-active",t.showFilters)}}function $t(t,n){if(1&t){const t=l.Yb();l.Xb(0,"app-search-videos-form",26),l.jc("search",(function(n){return l.Ic(t),l.nc(2).searchVideos(n)})),l.Wb()}}function Kt(t,n){if(1&t){const t=l.Yb();l.Xb(0,"div",30),l.jc("click",(function(){return l.Ic(t),l.nc(3).openModal()})),l.Xb(1,"button",31),l.Xb(2,"mat-icon"),l.Rc(3,"add_circle_outline"),l.Wb(),l.Wb(),l.Wb()}}function Jt(t,n){if(1&t){const t=l.Yb();l.Xb(0,"app-search-stocks-form",34),l.jc("search",(function(n){return l.Ic(t),l.nc(4).searchInUserStocks(n)})),l.Wb()}2&t&&l.uc("whiteForm",!0)("returnSearchText",!0)}function Qt(t,n){if(1&t&&(l.Xb(0,"div",32),l.Pc(1,Jt,1,2,"app-search-stocks-form",33),l.Wb()),2&t){const t=l.nc(3);l.Cb(1),l.uc("ngIf","Watchlist"===t.activeTab.name&&(null==t.userStocks?null:t.userStocks.length)>0)}}function Zt(t,n){if(1&t&&(l.Xb(0,"div",27),l.Pc(1,Kt,4,0,"div",28),l.Pc(2,Qt,2,1,"div",29),l.Wb()),2&t){const t=l.nc(2);l.Cb(1),l.uc("ngIf","Watchlist"===t.activeTab.name),l.Cb(1),l.uc("ngIf","About"!==t.activeTab.name)}}function tn(t,n){if(1&t&&l.Sb(0,"app-watchlist-tab",35),2&t){const t=l.nc(2);l.uc("channelUser",t.channelUser)}}function nn(t,n){if(1&t&&l.Sb(0,"app-videos-tab",36),2&t){const t=l.nc(2);l.uc("channelUser",t.channelUser)("authUser",t.authUser)}}function en(t,n){if(1&t&&l.Sb(0,"app-playlists-tab",36),2&t){const t=l.nc(2);l.uc("channelUser",t.channelUser)("authUser",t.authUser)}}function sn(t,n){if(1&t&&l.Sb(0,"app-about-tab",35),2&t){const t=l.nc(2);l.uc("channelUser",t.channelUser)}}function cn(t,n){if(1&t&&(l.Vb(0),l.Pc(1,Dt,1,0,"app-user-tags",6),l.Pc(2,zt,1,2,"app-channel-profile",7),l.Xb(3,"div",8),l.Xb(4,"div",9),l.Xb(5,"ul",10),l.Pc(6,Nt,3,5,"li",11),l.Wb(),l.Xb(7,"div",12),l.Xb(8,"div",13),l.Pc(9,Ht,1,1,"mat-spinner",0),l.Wb(),l.Wb(),l.Xb(10,"div",14),l.Xb(11,"div",15),l.Pc(12,Gt,3,2,"button",16),l.Wb(),l.Xb(13,"div"),l.Pc(14,$t,1,0,"app-search-videos-form",17),l.Wb(),l.Pc(15,Zt,3,2,"div",18),l.Wb(),l.Wb(),l.Pc(16,tn,1,1,"app-watchlist-tab",19),l.Pc(17,nn,1,2,"app-videos-tab",20),l.Pc(18,en,1,2,"app-playlists-tab",20),l.Pc(19,sn,1,1,"app-about-tab",19),l.Wb(),l.Ub()),2&t){const t=l.nc();l.Cb(1),l.uc("ngIf",t.auth.loggedIn()),l.Cb(1),l.uc("ngIf",t.channelUser),l.Cb(4),l.uc("ngForOf",t.allTabs)("ngForTrackBy",t.trackByElement),l.Cb(3),l.uc("ngIf","loading"===t.loader.stocksLoading.status&&"watchlist"===t.activeTab.name),l.Cb(3),l.uc("ngIf","About"!==t.activeTab.name&&"Watchlist"!==t.activeTab.name),l.Cb(2),l.uc("ngIf","About"!==t.activeTab.name&&"Watchlist"!==t.activeTab.name),l.Cb(1),l.uc("ngIf","Watchlist"===t.activeTab.name),l.Cb(1),l.uc("ngIf","Watchlist"===t.activeTab.name),l.Cb(1),l.uc("ngIf","Videos"===t.activeTab.name),l.Cb(1),l.uc("ngIf","Playlists"===t.activeTab.name),l.Cb(1),l.uc("ngIf","About"===t.activeTab.name)}}function on(t,n){1&t&&(l.Xb(0,"div",37),l.Xb(1,"p"),l.Rc(2,"Channel with such name is not found"),l.Wb(),l.Wb())}function an(t,n){if(1&t){const t=l.Yb();l.Xb(0,"app-chat-bottom-box",38),l.jc("close",(function(){return l.Ic(t),l.nc().showChatBox=!1})),l.Wb()}if(2&t){const t=l.nc();l.uc("channelUser",t.channelUser)}}const rn=[{path:"show",component:(()=>{class t{constructor(t,n,e,s,i,c,r,l,h,b,g,d,u,p,f,m,C,P){this.videoService=t,this.getAuthUser=n,this.router=e,this.usersService=s,this.base64ToFile=i,this.route=c,this.fb=r,this.subjectService=l,this.channelService=h,this.playlistsService=b,this.subject=g,this.auth=d,this.dialog=u,this.loader=p,this.updateStocks=f,this.stocksService=m,this.toastr=C,this.chatService=P,this.allTabs=o.n,this.apiUrl=o.c,this.playlists=[],this.editMode=!1,this.showFilters=!1,this.filters=null,this.dataLoading="idle",this.userStocks=[],this.filteredStocks=[],this.subscriptions=[],this.trackByElement=R.a,this.showChatBox=!1,this.authUser=this.getAuthUser.transform(),this.passedUsername=this.route.snapshot.queryParams.username,this.passedTab=this.route.snapshot.queryParams.tab,this.searchVideosForm=this.fb.group({search:["",a.x.required]})}ngOnInit(){var t;this.activeTab=(null===(t=o.n.filter(t=>t.name.toLowerCase()===this.passedTab))||void 0===t?void 0:t[0])||o.n[0],this.getUserInfo(),this.subject.currentUserStocks.subscribe(t=>{this.userStocks=t.stocks,this.filteredStocks=this.userStocks})}toggleFilters(){this.showFilters=!this.showFilters,this.subject.setToggleFiltersData(this.showFilters)}getUserInfo(){this.loader.channelLoading.status="loading",this.passedUsername&&this.usersService.getUserInfo({username:this.passedUsername,own_channel:+(this.authUser.username===this.passedUsername)}).subscribe(t=>{t&&(this.channelUser=t),this.loader.channelLoading.status="finished"})}changeActiveTab(t){return Object(c.a)(this,void 0,void 0,(function*(){this.activeTab=t,this.showFilters=!1,yield this.router.navigate(["/channels/show"],{queryParams:{tab:t.name.toLowerCase(),username:this.passedUsername}}),this.subject.setToggleFiltersData(this.showFilters),"Videos"===this.activeTab.name&&this.getUserInfo()}))}searchInUserStocks(t){localStorage.setItem("searchStock",t.search),this.watchListTab.getSearchResults(t)}searchVideos(t){localStorage.setItem("search",t.search),this.showFilters=!1,this.subject.setToggleFiltersData(this.showFilters),"Videos"===this.activeTab.name?this.searchInUserVideos(t.search):"Playlists"===this.activeTab.name&&this.searchInPlaylists(t.search)}searchInVideosByAuthor(t){}searchInUserVideos(t){this.videosTab&&this.videosTab.getSearchResults(t)}searchInPlaylists(t){this.playlistsTab&&this.playlistsTab.getSearchResults(t)}getVideosByTag(t){return Object(c.a)(this,void 0,void 0,(function*(){yield this.router.navigate(["videos"],{queryParams:{tag:t}})}))}openModal(){this.dialog.open(N.a,{maxWidth:"100vw",maxHeight:"100vh",height:"100%",width:"100%",panelClass:"stocks-lists-modal"}).afterClosed().subscribe(t=>{})}isStockFollowed(t){return!!this.userStocks.find(n=>n.name===t.name)}updateFollowedStocksList(t){const n=this.updateStocks.transform(this.userStocks,t,this.isStockFollowed(t));n&&(this.loader.stocksLoading.status="loading",this.subscriptions.push(this.stocksService.updateFollowedStocks(Object.assign({user_id:this.authUser.id},{stocks:n})).subscribe(t=>{this.userStocks=(null==t?void 0:t.user_stocks)||[],this.loader.stocksLoading.status="finished",this.subject.changeUserStocks({stocks:this.userStocks,empty:0===this.userStocks.length})})))}toggleChatBox(){this.showChatBox=!this.showChatBox}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(n){return new(n||t)(l.Rb(h.a),l.Rb(u.a),l.Rb(i.d),l.Rb(H.a),l.Rb(G.a),l.Rb(i.a),l.Rb(a.e),l.Rb(b.a),l.Rb($.a),l.Rb(U.a),l.Rb(b.a),l.Rb(K.a),l.Rb(x.b),l.Rb(J.a),l.Rb(Q.a),l.Rb(d.a),l.Rb(Z.b),l.Rb(tt.a))},t.\u0275cmp=l.Lb({type:t,selectors:[["app-show-channel"]],viewQuery:function(t,n){var e;1&t&&(l.Wc(_,!0),l.Wc(k,!0),l.Wc(z,!0)),2&t&&(l.Dc(e=l.kc())&&(n.watchListTab=e.first),l.Dc(e=l.kc())&&(n.videosTab=e.first),l.Dc(e=l.kc())&&(n.playlistsTab=e.first))},decls:5,vars:4,consts:[[3,"diameter",4,"ngIf"],[1,"profile-list"],[4,"ngIf"],["class","channel-not-found",4,"ngIf"],[3,"channelUser","close",4,"ngIf"],[3,"diameter"],[3,"tagSelected",4,"ngIf"],[3,"channelUser","authUser","toggleChatBox",4,"ngIf"],[1,"stocks-watchlist","pWatchlist"],[1,"profile-list","user-profile-block"],["id","channel-tabs-list","role","tablist",1,"nav","nav-tabs"],["class","nav-item",4,"ngFor","ngForOf","ngForTrackBy"],[1,"loader-wrapper"],[1,"spinner-container"],[1,"search-wrapper"],[1,"toggle-filters-btn"],["class","filter-toggle-btn","type","button",3,"filters-active","click",4,"ngIf"],[3,"search",4,"ngIf"],["class","right-side",4,"ngIf"],[3,"channelUser",4,"ngIf"],[3,"channelUser","authUser",4,"ngIf"],[3,"tagSelected"],[3,"channelUser","authUser","toggleChatBox"],[1,"nav-item"],["data-toggle","tab","role","tab","aria-controls","pWatch","aria-selected","true",1,"nav-link",3,"id","href","click"],["type","button",1,"filter-toggle-btn",3,"click"],[3,"search"],[1,"right-side"],["class","open-add-stock-modal",3,"click",4,"ngIf"],["class","watchlist-search d-",4,"ngIf"],[1,"open-add-stock-modal",3,"click"],["type","button"],[1,"watchlist-search","d-"],[3,"whiteForm","returnSearchText","search",4,"ngIf"],[3,"whiteForm","returnSearchText","search"],[3,"channelUser"],[3,"channelUser","authUser"],[1,"channel-not-found"],[3,"channelUser","close"]],template:function(t,n){1&t&&(l.Pc(0,Yt,1,1,"mat-spinner",0),l.Xb(1,"div",1),l.Pc(2,cn,20,12,"ng-container",2),l.Pc(3,on,3,0,"div",3),l.Wb(),l.Pc(4,an,1,1,"app-chat-bottom-box",4)),2&t&&(l.uc("ngIf","loading"===n.loader.channelLoading.status),l.Cb(2),l.uc("ngIf",n.channelUser),l.Cb(1),l.uc("ngIf",!n.channelUser&&"finished"===n.loader.channelLoading.status),l.Cb(1),l.uc("ngIf",n.showChatBox&&n.channelUser))},directives:[s.n,p.b,s.m,nt.a,St,F.a,wt.a,Wt.a,_,k,z,Tt,Vt],styles:[".profile-block[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:100%}.search-wrapper[_ngcontent-%COMP%]{display:flex;max-width:-webkit-min-content;max-width:-moz-min-content;max-width:min-content;align-items:center}.search-wrapper[_ngcontent-%COMP%]   .toggle-filters-btn[_ngcontent-%COMP%]{display:flex;margin-right:20px;padding-top:4px;height:31px}.search-wrapper[_ngcontent-%COMP%]   .toggle-filters-btn[_ngcontent-%COMP%]   .filter-toggle-btn[_ngcontent-%COMP%]{background-color:unset;height:23px}#search-videos-form[_ngcontent-%COMP%], .search-wrapper[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]{display:flex}#search-videos-form[_ngcontent-%COMP%]   .filters-active[_ngcontent-%COMP%]{background-color:#18b587!important;color:#fff}.open-add-stock-modal[_ngcontent-%COMP%]{display:flex;align-items:center;height:31px;margin-right:20px}.open-add-stock-modal[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:unset;height:23px}#channel-tabs-list[_ngcontent-%COMP%]{width:624px}@media (max-width:991px){#channel-tabs-list[_ngcontent-%COMP%]{max-width:624px;width:100%}}"]}),t})(),data:{title:"Channel page"}}];let ln=(()=>{class t{}return t.\u0275mod=l.Pb({type:t}),t.\u0275inj=l.Ob({factory:function(n){return new(n||t)},imports:[[i.f.forChild(rn)],i.f]}),t})();var hn=e("PCNd");let bn=(()=>{class t{}return t.\u0275mod=l.Pb({type:t}),t.\u0275inj=l.Ob({factory:function(n){return new(n||t)},imports:[[s.c,ln,hn.a,st.b]]}),t})()}}]);